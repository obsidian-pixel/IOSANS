(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function Ts(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Pf={exports:{}},Xo={};var Zx;function sE(){if(Zx)return Xo;Zx=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(a,o,s){var c=null;if(s!==void 0&&(c=""+s),o.key!==void 0&&(c=""+o.key),"key"in o){s={};for(var d in o)d!=="key"&&(s[d]=o[d])}else s=o;return o=s.ref,{$$typeof:e,type:a,key:c,ref:o!==void 0?o:null,props:s}}return Xo.Fragment=t,Xo.jsx=n,Xo.jsxs=n,Xo}var Kx;function lE(){return Kx||(Kx=1,Pf.exports=sE()),Pf.exports}var u=lE(),$f={exports:{}},Ae={};var ev;function cE(){if(ev)return Ae;ev=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),x=Symbol.iterator;function v(R){return R===null||typeof R!="object"?null:(R=x&&R[x]||R["@@iterator"],typeof R=="function"?R:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,j={};function S(R,U,B){this.props=R,this.context=U,this.refs=j,this.updater=B||w}S.prototype.isReactComponent={},S.prototype.setState=function(R,U){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,U,"setState")},S.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function k(){}k.prototype=S.prototype;function E(R,U,B){this.props=R,this.context=U,this.refs=j,this.updater=B||w}var T=E.prototype=new k;T.constructor=E,N(T,S.prototype),T.isPureReactComponent=!0;var _=Array.isArray;function A(){}var z={H:null,A:null,T:null,S:null},G=Object.prototype.hasOwnProperty;function F(R,U,B){var re=B.ref;return{$$typeof:e,type:R,key:U,ref:re!==void 0?re:null,props:B}}function L(R,U){return F(R.type,U,R.props)}function $(R){return typeof R=="object"&&R!==null&&R.$$typeof===e}function H(R){var U={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(B){return U[B]})}var Q=/\/+/g;function D(R,U){return typeof R=="object"&&R!==null&&R.key!=null?H(""+R.key):U.toString(36)}function q(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(A,A):(R.status="pending",R.then(function(U){R.status==="pending"&&(R.status="fulfilled",R.value=U)},function(U){R.status==="pending"&&(R.status="rejected",R.reason=U)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function I(R,U,B,re,de){var fe=typeof R;(fe==="undefined"||fe==="boolean")&&(R=null);var ie=!1;if(R===null)ie=!0;else switch(fe){case"bigint":case"string":case"number":ie=!0;break;case"object":switch(R.$$typeof){case e:case t:ie=!0;break;case m:return ie=R._init,I(ie(R._payload),U,B,re,de)}}if(ie)return de=de(R),ie=re===""?"."+D(R,0):re,_(de)?(B="",ie!=null&&(B=ie.replace(Q,"$&/")+"/"),I(de,U,B,"",function(me){return me})):de!=null&&($(de)&&(de=L(de,B+(de.key==null||R&&R.key===de.key?"":(""+de.key).replace(Q,"$&/")+"/")+ie)),U.push(de)),1;ie=0;var te=re===""?".":re+":";if(_(R))for(var ue=0;ue<R.length;ue++)re=R[ue],fe=te+D(re,ue),ie+=I(re,U,B,fe,de);else if(ue=v(R),typeof ue=="function")for(R=ue.call(R),ue=0;!(re=R.next()).done;)re=re.value,fe=te+D(re,ue++),ie+=I(re,U,B,fe,de);else if(fe==="object"){if(typeof R.then=="function")return I(q(R),U,B,re,de);throw U=String(R),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return ie}function V(R,U,B){if(R==null)return R;var re=[],de=0;return I(R,re,"","",function(fe){return U.call(B,fe,de++)}),re}function W(R){if(R._status===-1){var U=R._result;U=U(),U.then(function(B){(R._status===0||R._status===-1)&&(R._status=1,R._result=B)},function(B){(R._status===0||R._status===-1)&&(R._status=2,R._result=B)}),R._status===-1&&(R._status=0,R._result=U)}if(R._status===1)return R._result.default;throw R._result}var J=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)},O={map:V,forEach:function(R,U,B){V(R,function(){U.apply(this,arguments)},B)},count:function(R){var U=0;return V(R,function(){U++}),U},toArray:function(R){return V(R,function(U){return U})||[]},only:function(R){if(!$(R))throw Error("React.Children.only expected to receive a single React element child.");return R}};return Ae.Activity=g,Ae.Children=O,Ae.Component=S,Ae.Fragment=n,Ae.Profiler=o,Ae.PureComponent=E,Ae.StrictMode=a,Ae.Suspense=h,Ae.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,Ae.__COMPILER_RUNTIME={__proto__:null,c:function(R){return z.H.useMemoCache(R)}},Ae.cache=function(R){return function(){return R.apply(null,arguments)}},Ae.cacheSignal=function(){return null},Ae.cloneElement=function(R,U,B){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var re=N({},R.props),de=R.key;if(U!=null)for(fe in U.key!==void 0&&(de=""+U.key),U)!G.call(U,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&U.ref===void 0||(re[fe]=U[fe]);var fe=arguments.length-2;if(fe===1)re.children=B;else if(1<fe){for(var ie=Array(fe),te=0;te<fe;te++)ie[te]=arguments[te+2];re.children=ie}return F(R.type,de,re)},Ae.createContext=function(R){return R={$$typeof:c,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:s,_context:R},R},Ae.createElement=function(R,U,B){var re,de={},fe=null;if(U!=null)for(re in U.key!==void 0&&(fe=""+U.key),U)G.call(U,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(de[re]=U[re]);var ie=arguments.length-2;if(ie===1)de.children=B;else if(1<ie){for(var te=Array(ie),ue=0;ue<ie;ue++)te[ue]=arguments[ue+2];de.children=te}if(R&&R.defaultProps)for(re in ie=R.defaultProps,ie)de[re]===void 0&&(de[re]=ie[re]);return F(R,fe,de)},Ae.createRef=function(){return{current:null}},Ae.forwardRef=function(R){return{$$typeof:d,render:R}},Ae.isValidElement=$,Ae.lazy=function(R){return{$$typeof:m,_payload:{_status:-1,_result:R},_init:W}},Ae.memo=function(R,U){return{$$typeof:p,type:R,compare:U===void 0?null:U}},Ae.startTransition=function(R){var U=z.T,B={};z.T=B;try{var re=R(),de=z.S;de!==null&&de(B,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(A,J)}catch(fe){J(fe)}finally{U!==null&&B.types!==null&&(U.types=B.types),z.T=U}},Ae.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},Ae.use=function(R){return z.H.use(R)},Ae.useActionState=function(R,U,B){return z.H.useActionState(R,U,B)},Ae.useCallback=function(R,U){return z.H.useCallback(R,U)},Ae.useContext=function(R){return z.H.useContext(R)},Ae.useDebugValue=function(){},Ae.useDeferredValue=function(R,U){return z.H.useDeferredValue(R,U)},Ae.useEffect=function(R,U){return z.H.useEffect(R,U)},Ae.useEffectEvent=function(R){return z.H.useEffectEvent(R)},Ae.useId=function(){return z.H.useId()},Ae.useImperativeHandle=function(R,U,B){return z.H.useImperativeHandle(R,U,B)},Ae.useInsertionEffect=function(R,U){return z.H.useInsertionEffect(R,U)},Ae.useLayoutEffect=function(R,U){return z.H.useLayoutEffect(R,U)},Ae.useMemo=function(R,U){return z.H.useMemo(R,U)},Ae.useOptimistic=function(R,U){return z.H.useOptimistic(R,U)},Ae.useReducer=function(R,U,B){return z.H.useReducer(R,U,B)},Ae.useRef=function(R){return z.H.useRef(R)},Ae.useState=function(R){return z.H.useState(R)},Ae.useSyncExternalStore=function(R,U,B){return z.H.useSyncExternalStore(R,U,B)},Ae.useTransition=function(){return z.H.useTransition()},Ae.version="19.2.3",Ae}var tv;function Ms(){return tv||(tv=1,$f.exports=cE()),$f.exports}var M=Ms();const jn=Ts(M);var Hf={exports:{}},Qo={},qf={exports:{}},Uf={};var nv;function uE(){return nv||(nv=1,(function(e){function t(I,V){var W=I.length;I.push(V);e:for(;0<W;){var J=W-1>>>1,O=I[J];if(0<o(O,V))I[J]=V,I[W]=O,W=J;else break e}}function n(I){return I.length===0?null:I[0]}function a(I){if(I.length===0)return null;var V=I[0],W=I.pop();if(W!==V){I[0]=W;e:for(var J=0,O=I.length,R=O>>>1;J<R;){var U=2*(J+1)-1,B=I[U],re=U+1,de=I[re];if(0>o(B,W))re<O&&0>o(de,B)?(I[J]=de,I[re]=W,J=re):(I[J]=B,I[U]=W,J=U);else if(re<O&&0>o(de,W))I[J]=de,I[re]=W,J=re;else break e}}return V}function o(I,V){var W=I.sortIndex-V.sortIndex;return W!==0?W:I.id-V.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var c=Date,d=c.now();e.unstable_now=function(){return c.now()-d}}var h=[],p=[],m=1,g=null,x=3,v=!1,w=!1,N=!1,j=!1,S=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function T(I){for(var V=n(p);V!==null;){if(V.callback===null)a(p);else if(V.startTime<=I)a(p),V.sortIndex=V.expirationTime,t(h,V);else break;V=n(p)}}function _(I){if(N=!1,T(I),!w)if(n(h)!==null)w=!0,A||(A=!0,H());else{var V=n(p);V!==null&&q(_,V.startTime-I)}}var A=!1,z=-1,G=5,F=-1;function L(){return j?!0:!(e.unstable_now()-F<G)}function $(){if(j=!1,A){var I=e.unstable_now();F=I;var V=!0;try{e:{w=!1,N&&(N=!1,k(z),z=-1),v=!0;var W=x;try{t:{for(T(I),g=n(h);g!==null&&!(g.expirationTime>I&&L());){var J=g.callback;if(typeof J=="function"){g.callback=null,x=g.priorityLevel;var O=J(g.expirationTime<=I);if(I=e.unstable_now(),typeof O=="function"){g.callback=O,T(I),V=!0;break t}g===n(h)&&a(h),T(I)}else a(h);g=n(h)}if(g!==null)V=!0;else{var R=n(p);R!==null&&q(_,R.startTime-I),V=!1}}break e}finally{g=null,x=W,v=!1}V=void 0}}finally{V?H():A=!1}}}var H;if(typeof E=="function")H=function(){E($)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,D=Q.port2;Q.port1.onmessage=$,H=function(){D.postMessage(null)}}else H=function(){S($,0)};function q(I,V){z=S(function(){I(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_next=function(I){switch(x){case 1:case 2:case 3:var V=3;break;default:V=x}var W=x;x=V;try{return I()}finally{x=W}},e.unstable_requestPaint=function(){j=!0},e.unstable_runWithPriority=function(I,V){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var W=x;x=I;try{return V()}finally{x=W}},e.unstable_scheduleCallback=function(I,V,W){var J=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?J+W:J):W=J,I){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=W+O,I={id:m++,callback:V,priorityLevel:I,startTime:W,expirationTime:O,sortIndex:-1},W>J?(I.sortIndex=W,t(p,I),n(h)===null&&I===n(p)&&(N?(k(z),z=-1):N=!0,q(_,W-J))):(I.sortIndex=O,t(h,I),w||v||(w=!0,A||(A=!0,H()))),I},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(I){var V=x;return function(){var W=x;x=V;try{return I.apply(this,arguments)}finally{x=W}}}})(Uf)),Uf}var iv;function dE(){return iv||(iv=1,qf.exports=uE()),qf.exports}var Ff={exports:{}},It={};var rv;function fE(){if(rv)return It;rv=1;var e=Ms();function t(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)p+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function s(h,p,m){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:g==null?null:""+g,children:h,containerInfo:p,implementation:m}}var c=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,p){if(h==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return It.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,It.createPortal=function(h,p){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return s(h,p,null,m)},It.flushSync=function(h){var p=c.T,m=a.p;try{if(c.T=null,a.p=2,h)return h()}finally{c.T=p,a.p=m,a.d.f()}},It.preconnect=function(h,p){typeof h=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,a.d.C(h,p))},It.prefetchDNS=function(h){typeof h=="string"&&a.d.D(h)},It.preinit=function(h,p){if(typeof h=="string"&&p&&typeof p.as=="string"){var m=p.as,g=d(m,p.crossOrigin),x=typeof p.integrity=="string"?p.integrity:void 0,v=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;m==="style"?a.d.S(h,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:g,integrity:x,fetchPriority:v}):m==="script"&&a.d.X(h,{crossOrigin:g,integrity:x,fetchPriority:v,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},It.preinitModule=function(h,p){if(typeof h=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var m=d(p.as,p.crossOrigin);a.d.M(h,{crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&a.d.M(h)},It.preload=function(h,p){if(typeof h=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var m=p.as,g=d(m,p.crossOrigin);a.d.L(h,m,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},It.preloadModule=function(h,p){if(typeof h=="string")if(p){var m=d(p.as,p.crossOrigin);a.d.m(h,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else a.d.m(h)},It.requestFormReset=function(h){a.d.r(h)},It.unstable_batchedUpdates=function(h,p){return h(p)},It.useFormState=function(h,p,m){return c.H.useFormState(h,p,m)},It.useFormStatus=function(){return c.H.useHostTransitionStatus()},It.version="19.2.3",It}var av;function Q0(){if(av)return Ff.exports;av=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Ff.exports=fE(),Ff.exports}var ov;function hE(){if(ov)return Qo;ov=1;var e=dE(),t=Ms(),n=Q0();function a(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function s(i){var r=i,l=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(l=r.return),i=r.return;while(i)}return r.tag===3?l:null}function c(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function d(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function h(i){if(s(i)!==i)throw Error(a(188))}function p(i){var r=i.alternate;if(!r){if(r=s(i),r===null)throw Error(a(188));return r!==i?null:i}for(var l=i,f=r;;){var y=l.return;if(y===null)break;var b=y.alternate;if(b===null){if(f=y.return,f!==null){l=f;continue}break}if(y.child===b.child){for(b=y.child;b;){if(b===l)return h(y),i;if(b===f)return h(y),r;b=b.sibling}throw Error(a(188))}if(l.return!==f.return)l=y,f=b;else{for(var C=!1,P=y.child;P;){if(P===l){C=!0,l=y,f=b;break}if(P===f){C=!0,f=y,l=b;break}P=P.sibling}if(!C){for(P=b.child;P;){if(P===l){C=!0,l=b,f=y;break}if(P===f){C=!0,f=b,l=y;break}P=P.sibling}if(!C)throw Error(a(189))}}if(l.alternate!==f)throw Error(a(190))}if(l.tag!==3)throw Error(a(188));return l.stateNode.current===l?i:r}function m(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=m(i),r!==null)return r;i=i.sibling}return null}var g=Object.assign,x=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),E=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),$=Symbol.iterator;function H(i){return i===null||typeof i!="object"?null:(i=$&&i[$]||i["@@iterator"],typeof i=="function"?i:null)}var Q=Symbol.for("react.client.reference");function D(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===Q?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case N:return"Fragment";case S:return"Profiler";case j:return"StrictMode";case _:return"Suspense";case A:return"SuspenseList";case F:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case w:return"Portal";case E:return i.displayName||"Context";case k:return(i._context.displayName||"Context")+".Consumer";case T:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case z:return r=i.displayName||null,r!==null?r:D(i.type)||"Memo";case G:r=i._payload,i=i._init;try{return D(i(r))}catch{}}return null}var q=Array.isArray,I=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},J=[],O=-1;function R(i){return{current:i}}function U(i){0>O||(i.current=J[O],J[O]=null,O--)}function B(i,r){O++,J[O]=i.current,i.current=r}var re=R(null),de=R(null),fe=R(null),ie=R(null);function te(i,r){switch(B(fe,r),B(de,i),B(re,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?wx(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=wx(r),i=Sx(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}U(re),B(re,i)}function ue(){U(re),U(de),U(fe)}function me(i){i.memoizedState!==null&&B(ie,i);var r=re.current,l=Sx(r,i.type);r!==l&&(B(de,i),B(re,l))}function ge(i){de.current===i&&(U(re),U(de)),ie.current===i&&(U(ie),Vo._currentValue=W)}var xe,we;function Ce(i){if(xe===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);xe=r&&r[1]||"",we=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xe+i+we}var Ue=!1;function $e(i,r){if(!i||Ue)return"";Ue=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(r){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(ae){var ne=ae}Reflect.construct(i,[],ce)}else{try{ce.call()}catch(ae){ne=ae}i.call(ce.prototype)}}else{try{throw Error()}catch(ae){ne=ae}(ce=i())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(ae){if(ae&&ne&&typeof ae.stack=="string")return[ae.stack,ne.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=f.DetermineComponentFrameRoot(),C=b[0],P=b[1];if(C&&P){var Y=C.split(`
`),ee=P.split(`
`);for(y=f=0;f<Y.length&&!Y[f].includes("DetermineComponentFrameRoot");)f++;for(;y<ee.length&&!ee[y].includes("DetermineComponentFrameRoot");)y++;if(f===Y.length||y===ee.length)for(f=Y.length-1,y=ee.length-1;1<=f&&0<=y&&Y[f]!==ee[y];)y--;for(;1<=f&&0<=y;f--,y--)if(Y[f]!==ee[y]){if(f!==1||y!==1)do if(f--,y--,0>y||Y[f]!==ee[y]){var se=`
`+Y[f].replace(" at new "," at ");return i.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",i.displayName)),se}while(1<=f&&0<=y);break}}}finally{Ue=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?Ce(l):""}function ut(i,r){switch(i.tag){case 26:case 27:case 5:return Ce(i.type);case 16:return Ce("Lazy");case 13:return i.child!==r&&r!==null?Ce("Suspense Fallback"):Ce("Suspense");case 19:return Ce("SuspenseList");case 0:case 15:return $e(i.type,!1);case 11:return $e(i.type.render,!1);case 1:return $e(i.type,!0);case 31:return Ce("Activity");default:return""}}function Kt(i){try{var r="",l=null;do r+=ut(i,l),l=i,i=i.return;while(i);return r}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var Ot=Object.prototype.hasOwnProperty,Ht=e.unstable_scheduleCallback,En=e.unstable_cancelCallback,Zn=e.unstable_shouldYield,Kn=e.unstable_requestPaint,Nt=e.unstable_now,Ai=e.unstable_getCurrentPriorityLevel,oe=e.unstable_ImmediatePriority,pe=e.unstable_UserBlockingPriority,Ee=e.unstable_NormalPriority,Oe=e.unstable_LowPriority,He=e.unstable_IdlePriority,Bt=e.log,kn=e.unstable_setDisableYieldValue,Ct=null,ht=null;function _t(i){if(typeof Bt=="function"&&kn(i),ht&&typeof ht.setStrictMode=="function")try{ht.setStrictMode(Ct,i)}catch{}}var Xe=Math.clz32?Math.clz32:ku,Bn=Math.log,en=Math.LN2;function ku(i){return i>>>=0,i===0?32:31-(Bn(i)/en|0)|0}var Wr=256,Yr=262144,Xr=4194304;function ei(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Qr(i,r,l){var f=i.pendingLanes;if(f===0)return 0;var y=0,b=i.suspendedLanes,C=i.pingedLanes;i=i.warmLanes;var P=f&134217727;return P!==0?(f=P&~b,f!==0?y=ei(f):(C&=P,C!==0?y=ei(C):l||(l=P&~i,l!==0&&(y=ei(l))))):(P=f&~b,P!==0?y=ei(P):C!==0?y=ei(C):l||(l=f&~i,l!==0&&(y=ei(l)))),y===0?0:r!==0&&r!==y&&(r&b)===0&&(b=y&-y,l=r&-r,b>=l||b===32&&(l&4194048)!==0)?r:y}function fr(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function Cu(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Us(){var i=Xr;return Xr<<=1,(Xr&62914560)===0&&(Xr=4194304),i}function to(i){for(var r=[],l=0;31>l;l++)r.push(i);return r}function hr(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Au(i,r,l,f,y,b){var C=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var P=i.entanglements,Y=i.expirationTimes,ee=i.hiddenUpdates;for(l=C&~l;0<l;){var se=31-Xe(l),ce=1<<se;P[se]=0,Y[se]=-1;var ne=ee[se];if(ne!==null)for(ee[se]=null,se=0;se<ne.length;se++){var ae=ne[se];ae!==null&&(ae.lane&=-536870913)}l&=~ce}f!==0&&Fs(i,f,0),b!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=b&~(C&~r))}function Fs(i,r,l){i.pendingLanes|=r,i.suspendedLanes&=~r;var f=31-Xe(r);i.entangledLanes|=r,i.entanglements[f]=i.entanglements[f]|1073741824|l&261930}function Vs(i,r){var l=i.entangledLanes|=r;for(i=i.entanglements;l;){var f=31-Xe(l),y=1<<f;y&r|i[f]&r&&(i[f]|=r),l&=~y}}function Gs(i,r){var l=r&-r;return l=(l&42)!==0?1:no(l),(l&(i.suspendedLanes|r))!==0?0:l}function no(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function io(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Ws(){var i=V.p;return i!==0?i:(i=window.event,i===void 0?32:Vx(i.type))}function Ys(i,r){var l=V.p;try{return V.p=i,r()}finally{V.p=l}}var Pn=Math.random().toString(36).slice(2),jt="__reactFiber$"+Pn,Rt="__reactProps$"+Pn,ti="__reactContainer$"+Pn,Jr="__reactEvents$"+Pn,Xs="__reactListeners$"+Pn,Tu="__reactHandles$"+Pn,Qs="__reactResources$"+Pn,pr="__reactMarker$"+Pn;function ro(i){delete i[jt],delete i[Rt],delete i[Jr],delete i[Xs],delete i[Tu]}function Ti(i){var r=i[jt];if(r)return r;for(var l=i.parentNode;l;){if(r=l[ti]||l[jt]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(i=Tx(i);i!==null;){if(l=i[jt])return l;i=Tx(i)}return r}i=l,l=i.parentNode}return null}function Mi(i){if(i=i[jt]||i[ti]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function Di(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(a(33))}function Oi(i){var r=i[Qs];return r||(r=i[Qs]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function gt(i){i[pr]=!0}var Js=new Set,Zs={};function ni(i,r){_i(i,r),_i(i+"Capture",r)}function _i(i,r){for(Zs[i]=r,i=0;i<r.length;i++)Js.add(r[i])}var Mu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ao={},Ks={};function Du(i){return Ot.call(Ks,i)?!0:Ot.call(ao,i)?!1:Mu.test(i)?Ks[i]=!0:(ao[i]=!0,!1)}function Zr(i,r,l){if(Du(r))if(l===null)i.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var f=r.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+l)}}function Kr(i,r,l){if(l===null)i.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+l)}}function Cn(i,r,l,f){if(f===null)i.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(r,l,""+f)}}function qt(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function el(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Ou(i,r,l){var f=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var y=f.get,b=f.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return y.call(this)},set:function(C){l=""+C,b.call(this,C)}}),Object.defineProperty(i,r,{enumerable:f.enumerable}),{getValue:function(){return l},setValue:function(C){l=""+C},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function ea(i){if(!i._valueTracker){var r=el(i)?"checked":"value";i._valueTracker=Ou(i,r,""+i[r])}}function tl(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var l=r.getValue(),f="";return i&&(f=el(i)?i.checked?"true":"false":i.value),i=f,i!==l?(r.setValue(i),!0):!1}function mr(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var _u=/[\n"\\]/g;function Ut(i){return i.replace(_u,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function gr(i,r,l,f,y,b,C,P){i.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?i.type=C:i.removeAttribute("type"),r!=null?C==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+qt(r)):i.value!==""+qt(r)&&(i.value=""+qt(r)):C!=="submit"&&C!=="reset"||i.removeAttribute("value"),r!=null?oo(i,C,qt(r)):l!=null?oo(i,C,qt(l)):f!=null&&i.removeAttribute("value"),y==null&&b!=null&&(i.defaultChecked=!!b),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?i.name=""+qt(P):i.removeAttribute("name")}function nl(i,r,l,f,y,b,C,P){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.type=b),r!=null||l!=null){if(!(b!=="submit"&&b!=="reset"||r!=null)){ea(i);return}l=l!=null?""+qt(l):"",r=r!=null?""+qt(r):l,P||r===i.value||(i.value=r),i.defaultValue=r}f=f??y,f=typeof f!="function"&&typeof f!="symbol"&&!!f,i.checked=P?i.checked:!!f,i.defaultChecked=!!f,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(i.name=C),ea(i)}function oo(i,r,l){r==="number"&&mr(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function ii(i,r,l,f){if(i=i.options,r){r={};for(var y=0;y<l.length;y++)r["$"+l[y]]=!0;for(l=0;l<i.length;l++)y=r.hasOwnProperty("$"+i[l].value),i[l].selected!==y&&(i[l].selected=y),y&&f&&(i[l].defaultSelected=!0)}else{for(l=""+qt(l),r=null,y=0;y<i.length;y++){if(i[y].value===l){i[y].selected=!0,f&&(i[y].defaultSelected=!0);return}r!==null||i[y].disabled||(r=i[y])}r!==null&&(r.selected=!0)}}function gm(i,r,l){if(r!=null&&(r=""+qt(r),r!==i.value&&(i.value=r),l==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=l!=null?""+qt(l):""}function ym(i,r,l,f){if(r==null){if(f!=null){if(l!=null)throw Error(a(92));if(q(f)){if(1<f.length)throw Error(a(93));f=f[0]}l=f}l==null&&(l=""),r=l}l=qt(r),i.defaultValue=l,f=i.textContent,f===l&&f!==""&&f!==null&&(i.value=f),ea(i)}function ta(i,r){if(r){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=r;return}}i.textContent=r}var nN=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xm(i,r,l){var f=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?f?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":f?i.setProperty(r,l):typeof l!="number"||l===0||nN.has(r)?r==="float"?i.cssFloat=l:i[r]=(""+l).trim():i[r]=l+"px"}function vm(i,r,l){if(r!=null&&typeof r!="object")throw Error(a(62));if(i=i.style,l!=null){for(var f in l)!l.hasOwnProperty(f)||r!=null&&r.hasOwnProperty(f)||(f.indexOf("--")===0?i.setProperty(f,""):f==="float"?i.cssFloat="":i[f]="");for(var y in r)f=r[y],r.hasOwnProperty(y)&&l[y]!==f&&xm(i,y,f)}else for(var b in r)r.hasOwnProperty(b)&&xm(i,b,r[b])}function Ru(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var iN=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),rN=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function il(i){return rN.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function ri(){}var Iu=null;function Lu(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var na=null,ia=null;function bm(i){var r=Mi(i);if(r&&(i=r.stateNode)){var l=i[Rt]||null;e:switch(i=r.stateNode,r.type){case"input":if(gr(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Ut(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var f=l[r];if(f!==i&&f.form===i.form){var y=f[Rt]||null;if(!y)throw Error(a(90));gr(f,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<l.length;r++)f=l[r],f.form===i.form&&tl(f)}break e;case"textarea":gm(i,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&ii(i,!!l.multiple,r,!1)}}}var zu=!1;function wm(i,r,l){if(zu)return i(r,l);zu=!0;try{var f=i(r);return f}finally{if(zu=!1,(na!==null||ia!==null)&&(Fl(),na&&(r=na,i=ia,ia=na=null,bm(r),i)))for(r=0;r<i.length;r++)bm(i[r])}}function so(i,r){var l=i.stateNode;if(l===null)return null;var f=l[Rt]||null;if(f===null)return null;l=f[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(a(231,r,typeof l));return l}var ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bu=!1;if(ai)try{var lo={};Object.defineProperty(lo,"passive",{get:function(){Bu=!0}}),window.addEventListener("test",lo,lo),window.removeEventListener("test",lo,lo)}catch{Bu=!1}var Ri=null,Pu=null,rl=null;function Sm(){if(rl)return rl;var i,r=Pu,l=r.length,f,y="value"in Ri?Ri.value:Ri.textContent,b=y.length;for(i=0;i<l&&r[i]===y[i];i++);var C=l-i;for(f=1;f<=C&&r[l-f]===y[b-f];f++);return rl=y.slice(i,1<f?1-f:void 0)}function al(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function ol(){return!0}function Nm(){return!1}function Ft(i){function r(l,f,y,b,C){this._reactName=l,this._targetInst=y,this.type=f,this.nativeEvent=b,this.target=C,this.currentTarget=null;for(var P in i)i.hasOwnProperty(P)&&(l=i[P],this[P]=l?l(b):b[P]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?ol:Nm,this.isPropagationStopped=Nm,this}return g(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=ol)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=ol)},persist:function(){},isPersistent:ol}),r}var yr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sl=Ft(yr),co=g({},yr,{view:0,detail:0}),aN=Ft(co),$u,Hu,uo,ll=g({},co,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uu,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==uo&&(uo&&i.type==="mousemove"?($u=i.screenX-uo.screenX,Hu=i.screenY-uo.screenY):Hu=$u=0,uo=i),$u)},movementY:function(i){return"movementY"in i?i.movementY:Hu}}),jm=Ft(ll),oN=g({},ll,{dataTransfer:0}),sN=Ft(oN),lN=g({},co,{relatedTarget:0}),qu=Ft(lN),cN=g({},yr,{animationName:0,elapsedTime:0,pseudoElement:0}),uN=Ft(cN),dN=g({},yr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),fN=Ft(dN),hN=g({},yr,{data:0}),Em=Ft(hN),pN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yN(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=gN[i])?!!r[i]:!1}function Uu(){return yN}var xN=g({},co,{key:function(i){if(i.key){var r=pN[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=al(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?mN[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uu,charCode:function(i){return i.type==="keypress"?al(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?al(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),vN=Ft(xN),bN=g({},ll,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),km=Ft(bN),wN=g({},co,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uu}),SN=Ft(wN),NN=g({},yr,{propertyName:0,elapsedTime:0,pseudoElement:0}),jN=Ft(NN),EN=g({},ll,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),kN=Ft(EN),CN=g({},yr,{newState:0,oldState:0}),AN=Ft(CN),TN=[9,13,27,32],Fu=ai&&"CompositionEvent"in window,fo=null;ai&&"documentMode"in document&&(fo=document.documentMode);var MN=ai&&"TextEvent"in window&&!fo,Cm=ai&&(!Fu||fo&&8<fo&&11>=fo),Am=" ",Tm=!1;function Mm(i,r){switch(i){case"keyup":return TN.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dm(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ra=!1;function DN(i,r){switch(i){case"compositionend":return Dm(r);case"keypress":return r.which!==32?null:(Tm=!0,Am);case"textInput":return i=r.data,i===Am&&Tm?null:i;default:return null}}function ON(i,r){if(ra)return i==="compositionend"||!Fu&&Mm(i,r)?(i=Sm(),rl=Pu=Ri=null,ra=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Cm&&r.locale!=="ko"?null:r.data;default:return null}}var _N={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Om(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!_N[i.type]:r==="textarea"}function _m(i,r,l,f){na?ia?ia.push(f):ia=[f]:na=f,r=Jl(r,"onChange"),0<r.length&&(l=new sl("onChange","change",null,l,f),i.push({event:l,listeners:r}))}var ho=null,po=null;function RN(i){mx(i,0)}function cl(i){var r=Di(i);if(tl(r))return i}function Rm(i,r){if(i==="change")return r}var Im=!1;if(ai){var Vu;if(ai){var Gu="oninput"in document;if(!Gu){var Lm=document.createElement("div");Lm.setAttribute("oninput","return;"),Gu=typeof Lm.oninput=="function"}Vu=Gu}else Vu=!1;Im=Vu&&(!document.documentMode||9<document.documentMode)}function zm(){ho&&(ho.detachEvent("onpropertychange",Bm),po=ho=null)}function Bm(i){if(i.propertyName==="value"&&cl(po)){var r=[];_m(r,po,i,Lu(i)),wm(RN,r)}}function IN(i,r,l){i==="focusin"?(zm(),ho=r,po=l,ho.attachEvent("onpropertychange",Bm)):i==="focusout"&&zm()}function LN(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return cl(po)}function zN(i,r){if(i==="click")return cl(r)}function BN(i,r){if(i==="input"||i==="change")return cl(r)}function PN(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var tn=typeof Object.is=="function"?Object.is:PN;function mo(i,r){if(tn(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var l=Object.keys(i),f=Object.keys(r);if(l.length!==f.length)return!1;for(f=0;f<l.length;f++){var y=l[f];if(!Ot.call(r,y)||!tn(i[y],r[y]))return!1}return!0}function Pm(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function $m(i,r){var l=Pm(i);i=0;for(var f;l;){if(l.nodeType===3){if(f=i+l.textContent.length,i<=r&&f>=r)return{node:l,offset:r-i};i=f}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Pm(l)}}function Hm(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?Hm(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function qm(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=mr(i.document);r instanceof i.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)i=r.contentWindow;else break;r=mr(i.document)}return r}function Wu(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var $N=ai&&"documentMode"in document&&11>=document.documentMode,aa=null,Yu=null,go=null,Xu=!1;function Um(i,r,l){var f=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Xu||aa==null||aa!==mr(f)||(f=aa,"selectionStart"in f&&Wu(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),go&&mo(go,f)||(go=f,f=Jl(Yu,"onSelect"),0<f.length&&(r=new sl("onSelect","select",null,r,l),i.push({event:r,listeners:f}),r.target=aa)))}function xr(i,r){var l={};return l[i.toLowerCase()]=r.toLowerCase(),l["Webkit"+i]="webkit"+r,l["Moz"+i]="moz"+r,l}var oa={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionrun:xr("Transition","TransitionRun"),transitionstart:xr("Transition","TransitionStart"),transitioncancel:xr("Transition","TransitionCancel"),transitionend:xr("Transition","TransitionEnd")},Qu={},Fm={};ai&&(Fm=document.createElement("div").style,"AnimationEvent"in window||(delete oa.animationend.animation,delete oa.animationiteration.animation,delete oa.animationstart.animation),"TransitionEvent"in window||delete oa.transitionend.transition);function vr(i){if(Qu[i])return Qu[i];if(!oa[i])return i;var r=oa[i],l;for(l in r)if(r.hasOwnProperty(l)&&l in Fm)return Qu[i]=r[l];return i}var Vm=vr("animationend"),Gm=vr("animationiteration"),Wm=vr("animationstart"),HN=vr("transitionrun"),qN=vr("transitionstart"),UN=vr("transitioncancel"),Ym=vr("transitionend"),Xm=new Map,Ju="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ju.push("scrollEnd");function An(i,r){Xm.set(i,r),ni(r,[i])}var ul=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},mn=[],sa=0,Zu=0;function dl(){for(var i=sa,r=Zu=sa=0;r<i;){var l=mn[r];mn[r++]=null;var f=mn[r];mn[r++]=null;var y=mn[r];mn[r++]=null;var b=mn[r];if(mn[r++]=null,f!==null&&y!==null){var C=f.pending;C===null?y.next=y:(y.next=C.next,C.next=y),f.pending=y}b!==0&&Qm(l,y,b)}}function fl(i,r,l,f){mn[sa++]=i,mn[sa++]=r,mn[sa++]=l,mn[sa++]=f,Zu|=f,i.lanes|=f,i=i.alternate,i!==null&&(i.lanes|=f)}function Ku(i,r,l,f){return fl(i,r,l,f),hl(i)}function br(i,r){return fl(i,null,null,r),hl(i)}function Qm(i,r,l){i.lanes|=l;var f=i.alternate;f!==null&&(f.lanes|=l);for(var y=!1,b=i.return;b!==null;)b.childLanes|=l,f=b.alternate,f!==null&&(f.childLanes|=l),b.tag===22&&(i=b.stateNode,i===null||i._visibility&1||(y=!0)),i=b,b=b.return;return i.tag===3?(b=i.stateNode,y&&r!==null&&(y=31-Xe(l),i=b.hiddenUpdates,f=i[y],f===null?i[y]=[r]:f.push(r),r.lane=l|536870912),b):null}function hl(i){if(50<Bo)throw Bo=0,cf=null,Error(a(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var la={};function FN(i,r,l,f){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nn(i,r,l,f){return new FN(i,r,l,f)}function ed(i){return i=i.prototype,!(!i||!i.isReactComponent)}function oi(i,r){var l=i.alternate;return l===null?(l=nn(i.tag,r,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=r,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,r=i.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function Jm(i,r){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,r=l.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function pl(i,r,l,f,y,b){var C=0;if(f=i,typeof i=="function")ed(i)&&(C=1);else if(typeof i=="string")C=Xj(i,l,re.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case F:return i=nn(31,l,r,y),i.elementType=F,i.lanes=b,i;case N:return wr(l.children,y,b,r);case j:C=8,y|=24;break;case S:return i=nn(12,l,r,y|2),i.elementType=S,i.lanes=b,i;case _:return i=nn(13,l,r,y),i.elementType=_,i.lanes=b,i;case A:return i=nn(19,l,r,y),i.elementType=A,i.lanes=b,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case E:C=10;break e;case k:C=9;break e;case T:C=11;break e;case z:C=14;break e;case G:C=16,f=null;break e}C=29,l=Error(a(130,i===null?"null":typeof i,"")),f=null}return r=nn(C,l,r,y),r.elementType=i,r.type=f,r.lanes=b,r}function wr(i,r,l,f){return i=nn(7,i,f,r),i.lanes=l,i}function td(i,r,l){return i=nn(6,i,null,r),i.lanes=l,i}function Zm(i){var r=nn(18,null,null,0);return r.stateNode=i,r}function nd(i,r,l){return r=nn(4,i.children!==null?i.children:[],i.key,r),r.lanes=l,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var Km=new WeakMap;function gn(i,r){if(typeof i=="object"&&i!==null){var l=Km.get(i);return l!==void 0?l:(r={value:i,source:r,stack:Kt(r)},Km.set(i,r),r)}return{value:i,source:r,stack:Kt(r)}}var ca=[],ua=0,ml=null,yo=0,yn=[],xn=0,Ii=null,$n=1,Hn="";function si(i,r){ca[ua++]=yo,ca[ua++]=ml,ml=i,yo=r}function eg(i,r,l){yn[xn++]=$n,yn[xn++]=Hn,yn[xn++]=Ii,Ii=i;var f=$n;i=Hn;var y=32-Xe(f)-1;f&=~(1<<y),l+=1;var b=32-Xe(r)+y;if(30<b){var C=y-y%5;b=(f&(1<<C)-1).toString(32),f>>=C,y-=C,$n=1<<32-Xe(r)+y|l<<y|f,Hn=b+i}else $n=1<<b|l<<y|f,Hn=i}function id(i){i.return!==null&&(si(i,1),eg(i,1,0))}function rd(i){for(;i===ml;)ml=ca[--ua],ca[ua]=null,yo=ca[--ua],ca[ua]=null;for(;i===Ii;)Ii=yn[--xn],yn[xn]=null,Hn=yn[--xn],yn[xn]=null,$n=yn[--xn],yn[xn]=null}function tg(i,r){yn[xn++]=$n,yn[xn++]=Hn,yn[xn++]=Ii,$n=r.id,Hn=r.overflow,Ii=i}var At=null,rt=null,Pe=!1,Li=null,vn=!1,ad=Error(a(519));function zi(i){var r=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw xo(gn(r,i)),ad}function ng(i){var r=i.stateNode,l=i.type,f=i.memoizedProps;switch(r[jt]=i,r[Rt]=f,l){case"dialog":Re("cancel",r),Re("close",r);break;case"iframe":case"object":case"embed":Re("load",r);break;case"video":case"audio":for(l=0;l<$o.length;l++)Re($o[l],r);break;case"source":Re("error",r);break;case"img":case"image":case"link":Re("error",r),Re("load",r);break;case"details":Re("toggle",r);break;case"input":Re("invalid",r),nl(r,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":Re("invalid",r);break;case"textarea":Re("invalid",r),ym(r,f.value,f.defaultValue,f.children)}l=f.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||f.suppressHydrationWarning===!0||vx(r.textContent,l)?(f.popover!=null&&(Re("beforetoggle",r),Re("toggle",r)),f.onScroll!=null&&Re("scroll",r),f.onScrollEnd!=null&&Re("scrollend",r),f.onClick!=null&&(r.onclick=ri),r=!0):r=!1,r||zi(i,!0)}function ig(i){for(At=i.return;At;)switch(At.tag){case 5:case 31:case 13:vn=!1;return;case 27:case 3:vn=!0;return;default:At=At.return}}function da(i){if(i!==At)return!1;if(!Pe)return ig(i),Pe=!0,!1;var r=i.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||jf(i.type,i.memoizedProps)),l=!l),l&&rt&&zi(i),ig(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(a(317));rt=Ax(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(a(317));rt=Ax(i)}else r===27?(r=rt,Ji(i.type)?(i=Tf,Tf=null,rt=i):rt=r):rt=At?wn(i.stateNode.nextSibling):null;return!0}function Sr(){rt=At=null,Pe=!1}function od(){var i=Li;return i!==null&&(Yt===null?Yt=i:Yt.push.apply(Yt,i),Li=null),i}function xo(i){Li===null?Li=[i]:Li.push(i)}var sd=R(null),Nr=null,li=null;function Bi(i,r,l){B(sd,r._currentValue),r._currentValue=l}function ci(i){i._currentValue=sd.current,U(sd)}function ld(i,r,l){for(;i!==null;){var f=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,f!==null&&(f.childLanes|=r)):f!==null&&(f.childLanes&r)!==r&&(f.childLanes|=r),i===l)break;i=i.return}}function cd(i,r,l,f){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var b=y.dependencies;if(b!==null){var C=y.child;b=b.firstContext;e:for(;b!==null;){var P=b;b=y;for(var Y=0;Y<r.length;Y++)if(P.context===r[Y]){b.lanes|=l,P=b.alternate,P!==null&&(P.lanes|=l),ld(b.return,l,i),f||(C=null);break e}b=P.next}}else if(y.tag===18){if(C=y.return,C===null)throw Error(a(341));C.lanes|=l,b=C.alternate,b!==null&&(b.lanes|=l),ld(C,l,i),C=null}else C=y.child;if(C!==null)C.return=y;else for(C=y;C!==null;){if(C===i){C=null;break}if(y=C.sibling,y!==null){y.return=C.return,C=y;break}C=C.return}y=C}}function fa(i,r,l,f){i=null;for(var y=r,b=!1;y!==null;){if(!b){if((y.flags&524288)!==0)b=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var C=y.alternate;if(C===null)throw Error(a(387));if(C=C.memoizedProps,C!==null){var P=y.type;tn(y.pendingProps.value,C.value)||(i!==null?i.push(P):i=[P])}}else if(y===ie.current){if(C=y.alternate,C===null)throw Error(a(387));C.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(Vo):i=[Vo])}y=y.return}i!==null&&cd(r,i,l,f),r.flags|=262144}function gl(i){for(i=i.firstContext;i!==null;){if(!tn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function jr(i){Nr=i,li=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Tt(i){return rg(Nr,i)}function yl(i,r){return Nr===null&&jr(i),rg(i,r)}function rg(i,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},li===null){if(i===null)throw Error(a(308));li=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else li=li.next=r;return l}var VN=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(l,f){i.push(f)}};this.abort=function(){r.aborted=!0,i.forEach(function(l){return l()})}},GN=e.unstable_scheduleCallback,WN=e.unstable_NormalPriority,yt={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ud(){return{controller:new VN,data:new Map,refCount:0}}function vo(i){i.refCount--,i.refCount===0&&GN(WN,function(){i.controller.abort()})}var bo=null,dd=0,ha=0,pa=null;function YN(i,r){if(bo===null){var l=bo=[];dd=0,ha=mf(),pa={status:"pending",value:void 0,then:function(f){l.push(f)}}}return dd++,r.then(ag,ag),r}function ag(){if(--dd===0&&bo!==null){pa!==null&&(pa.status="fulfilled");var i=bo;bo=null,ha=0,pa=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function XN(i,r){var l=[],f={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return i.then(function(){f.status="fulfilled",f.value=r;for(var y=0;y<l.length;y++)(0,l[y])(r)},function(y){for(f.status="rejected",f.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),f}var og=I.S;I.S=function(i,r){Uy=Nt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&YN(i,r),og!==null&&og(i,r)};var Er=R(null);function fd(){var i=Er.current;return i!==null?i:tt.pooledCache}function xl(i,r){r===null?B(Er,Er.current):B(Er,r.pool)}function sg(){var i=fd();return i===null?null:{parent:yt._currentValue,pool:i}}var ma=Error(a(460)),hd=Error(a(474)),vl=Error(a(542)),bl={then:function(){}};function lg(i){return i=i.status,i==="fulfilled"||i==="rejected"}function cg(i,r,l){switch(l=i[l],l===void 0?i.push(r):l!==r&&(r.then(ri,ri),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,dg(i),i;default:if(typeof r.status=="string")r.then(ri,ri);else{if(i=tt,i!==null&&100<i.shellSuspendCounter)throw Error(a(482));i=r,i.status="pending",i.then(function(f){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=f}},function(f){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=f}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,dg(i),i}throw Cr=r,ma}}function kr(i){try{var r=i._init;return r(i._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Cr=l,ma):l}}var Cr=null;function ug(){if(Cr===null)throw Error(a(459));var i=Cr;return Cr=null,i}function dg(i){if(i===ma||i===vl)throw Error(a(483))}var ga=null,wo=0;function wl(i){var r=wo;return wo+=1,ga===null&&(ga=[]),cg(ga,i,r)}function So(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function Sl(i,r){throw r.$$typeof===x?Error(a(525)):(i=Object.prototype.toString.call(r),Error(a(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function fg(i){function r(Z,X){if(i){var K=Z.deletions;K===null?(Z.deletions=[X],Z.flags|=16):K.push(X)}}function l(Z,X){if(!i)return null;for(;X!==null;)r(Z,X),X=X.sibling;return null}function f(Z){for(var X=new Map;Z!==null;)Z.key!==null?X.set(Z.key,Z):X.set(Z.index,Z),Z=Z.sibling;return X}function y(Z,X){return Z=oi(Z,X),Z.index=0,Z.sibling=null,Z}function b(Z,X,K){return Z.index=K,i?(K=Z.alternate,K!==null?(K=K.index,K<X?(Z.flags|=67108866,X):K):(Z.flags|=67108866,X)):(Z.flags|=1048576,X)}function C(Z){return i&&Z.alternate===null&&(Z.flags|=67108866),Z}function P(Z,X,K,le){return X===null||X.tag!==6?(X=td(K,Z.mode,le),X.return=Z,X):(X=y(X,K),X.return=Z,X)}function Y(Z,X,K,le){var Se=K.type;return Se===N?se(Z,X,K.props.children,le,K.key):X!==null&&(X.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===G&&kr(Se)===X.type)?(X=y(X,K.props),So(X,K),X.return=Z,X):(X=pl(K.type,K.key,K.props,null,Z.mode,le),So(X,K),X.return=Z,X)}function ee(Z,X,K,le){return X===null||X.tag!==4||X.stateNode.containerInfo!==K.containerInfo||X.stateNode.implementation!==K.implementation?(X=nd(K,Z.mode,le),X.return=Z,X):(X=y(X,K.children||[]),X.return=Z,X)}function se(Z,X,K,le,Se){return X===null||X.tag!==7?(X=wr(K,Z.mode,le,Se),X.return=Z,X):(X=y(X,K),X.return=Z,X)}function ce(Z,X,K){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return X=td(""+X,Z.mode,K),X.return=Z,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case v:return K=pl(X.type,X.key,X.props,null,Z.mode,K),So(K,X),K.return=Z,K;case w:return X=nd(X,Z.mode,K),X.return=Z,X;case G:return X=kr(X),ce(Z,X,K)}if(q(X)||H(X))return X=wr(X,Z.mode,K,null),X.return=Z,X;if(typeof X.then=="function")return ce(Z,wl(X),K);if(X.$$typeof===E)return ce(Z,yl(Z,X),K);Sl(Z,X)}return null}function ne(Z,X,K,le){var Se=X!==null?X.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return Se!==null?null:P(Z,X,""+K,le);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case v:return K.key===Se?Y(Z,X,K,le):null;case w:return K.key===Se?ee(Z,X,K,le):null;case G:return K=kr(K),ne(Z,X,K,le)}if(q(K)||H(K))return Se!==null?null:se(Z,X,K,le,null);if(typeof K.then=="function")return ne(Z,X,wl(K),le);if(K.$$typeof===E)return ne(Z,X,yl(Z,K),le);Sl(Z,K)}return null}function ae(Z,X,K,le,Se){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return Z=Z.get(K)||null,P(X,Z,""+le,Se);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case v:return Z=Z.get(le.key===null?K:le.key)||null,Y(X,Z,le,Se);case w:return Z=Z.get(le.key===null?K:le.key)||null,ee(X,Z,le,Se);case G:return le=kr(le),ae(Z,X,K,le,Se)}if(q(le)||H(le))return Z=Z.get(K)||null,se(X,Z,le,Se,null);if(typeof le.then=="function")return ae(Z,X,K,wl(le),Se);if(le.$$typeof===E)return ae(Z,X,K,yl(X,le),Se);Sl(X,le)}return null}function ve(Z,X,K,le){for(var Se=null,Fe=null,be=X,Me=X=0,ze=null;be!==null&&Me<K.length;Me++){be.index>Me?(ze=be,be=null):ze=be.sibling;var Ve=ne(Z,be,K[Me],le);if(Ve===null){be===null&&(be=ze);break}i&&be&&Ve.alternate===null&&r(Z,be),X=b(Ve,X,Me),Fe===null?Se=Ve:Fe.sibling=Ve,Fe=Ve,be=ze}if(Me===K.length)return l(Z,be),Pe&&si(Z,Me),Se;if(be===null){for(;Me<K.length;Me++)be=ce(Z,K[Me],le),be!==null&&(X=b(be,X,Me),Fe===null?Se=be:Fe.sibling=be,Fe=be);return Pe&&si(Z,Me),Se}for(be=f(be);Me<K.length;Me++)ze=ae(be,Z,Me,K[Me],le),ze!==null&&(i&&ze.alternate!==null&&be.delete(ze.key===null?Me:ze.key),X=b(ze,X,Me),Fe===null?Se=ze:Fe.sibling=ze,Fe=ze);return i&&be.forEach(function(nr){return r(Z,nr)}),Pe&&si(Z,Me),Se}function ke(Z,X,K,le){if(K==null)throw Error(a(151));for(var Se=null,Fe=null,be=X,Me=X=0,ze=null,Ve=K.next();be!==null&&!Ve.done;Me++,Ve=K.next()){be.index>Me?(ze=be,be=null):ze=be.sibling;var nr=ne(Z,be,Ve.value,le);if(nr===null){be===null&&(be=ze);break}i&&be&&nr.alternate===null&&r(Z,be),X=b(nr,X,Me),Fe===null?Se=nr:Fe.sibling=nr,Fe=nr,be=ze}if(Ve.done)return l(Z,be),Pe&&si(Z,Me),Se;if(be===null){for(;!Ve.done;Me++,Ve=K.next())Ve=ce(Z,Ve.value,le),Ve!==null&&(X=b(Ve,X,Me),Fe===null?Se=Ve:Fe.sibling=Ve,Fe=Ve);return Pe&&si(Z,Me),Se}for(be=f(be);!Ve.done;Me++,Ve=K.next())Ve=ae(be,Z,Me,Ve.value,le),Ve!==null&&(i&&Ve.alternate!==null&&be.delete(Ve.key===null?Me:Ve.key),X=b(Ve,X,Me),Fe===null?Se=Ve:Fe.sibling=Ve,Fe=Ve);return i&&be.forEach(function(oE){return r(Z,oE)}),Pe&&si(Z,Me),Se}function et(Z,X,K,le){if(typeof K=="object"&&K!==null&&K.type===N&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case v:e:{for(var Se=K.key;X!==null;){if(X.key===Se){if(Se=K.type,Se===N){if(X.tag===7){l(Z,X.sibling),le=y(X,K.props.children),le.return=Z,Z=le;break e}}else if(X.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===G&&kr(Se)===X.type){l(Z,X.sibling),le=y(X,K.props),So(le,K),le.return=Z,Z=le;break e}l(Z,X);break}else r(Z,X);X=X.sibling}K.type===N?(le=wr(K.props.children,Z.mode,le,K.key),le.return=Z,Z=le):(le=pl(K.type,K.key,K.props,null,Z.mode,le),So(le,K),le.return=Z,Z=le)}return C(Z);case w:e:{for(Se=K.key;X!==null;){if(X.key===Se)if(X.tag===4&&X.stateNode.containerInfo===K.containerInfo&&X.stateNode.implementation===K.implementation){l(Z,X.sibling),le=y(X,K.children||[]),le.return=Z,Z=le;break e}else{l(Z,X);break}else r(Z,X);X=X.sibling}le=nd(K,Z.mode,le),le.return=Z,Z=le}return C(Z);case G:return K=kr(K),et(Z,X,K,le)}if(q(K))return ve(Z,X,K,le);if(H(K)){if(Se=H(K),typeof Se!="function")throw Error(a(150));return K=Se.call(K),ke(Z,X,K,le)}if(typeof K.then=="function")return et(Z,X,wl(K),le);if(K.$$typeof===E)return et(Z,X,yl(Z,K),le);Sl(Z,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,X!==null&&X.tag===6?(l(Z,X.sibling),le=y(X,K),le.return=Z,Z=le):(l(Z,X),le=td(K,Z.mode,le),le.return=Z,Z=le),C(Z)):l(Z,X)}return function(Z,X,K,le){try{wo=0;var Se=et(Z,X,K,le);return ga=null,Se}catch(be){if(be===ma||be===vl)throw be;var Fe=nn(29,be,null,Z.mode);return Fe.lanes=le,Fe.return=Z,Fe}}}var Ar=fg(!0),hg=fg(!1),Pi=!1;function pd(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function md(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function $i(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Hi(i,r,l){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(Ye&2)!==0){var y=f.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),f.pending=r,r=hl(i),Qm(i,null,l),r}return fl(i,f,r,l),hl(i)}function No(i,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var f=r.lanes;f&=i.pendingLanes,l|=f,r.lanes=l,Vs(i,l)}}function gd(i,r){var l=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,l===f)){var y=null,b=null;if(l=l.firstBaseUpdate,l!==null){do{var C={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};b===null?y=b=C:b=b.next=C,l=l.next}while(l!==null);b===null?y=b=r:b=b.next=r}else y=b=r;l={baseState:f.baseState,firstBaseUpdate:y,lastBaseUpdate:b,shared:f.shared,callbacks:f.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=r:i.next=r,l.lastBaseUpdate=r}var yd=!1;function jo(){if(yd){var i=pa;if(i!==null)throw i}}function Eo(i,r,l,f){yd=!1;var y=i.updateQueue;Pi=!1;var b=y.firstBaseUpdate,C=y.lastBaseUpdate,P=y.shared.pending;if(P!==null){y.shared.pending=null;var Y=P,ee=Y.next;Y.next=null,C===null?b=ee:C.next=ee,C=Y;var se=i.alternate;se!==null&&(se=se.updateQueue,P=se.lastBaseUpdate,P!==C&&(P===null?se.firstBaseUpdate=ee:P.next=ee,se.lastBaseUpdate=Y))}if(b!==null){var ce=y.baseState;C=0,se=ee=Y=null,P=b;do{var ne=P.lane&-536870913,ae=ne!==P.lane;if(ae?(Le&ne)===ne:(f&ne)===ne){ne!==0&&ne===ha&&(yd=!0),se!==null&&(se=se.next={lane:0,tag:P.tag,payload:P.payload,callback:null,next:null});e:{var ve=i,ke=P;ne=r;var et=l;switch(ke.tag){case 1:if(ve=ke.payload,typeof ve=="function"){ce=ve.call(et,ce,ne);break e}ce=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=ke.payload,ne=typeof ve=="function"?ve.call(et,ce,ne):ve,ne==null)break e;ce=g({},ce,ne);break e;case 2:Pi=!0}}ne=P.callback,ne!==null&&(i.flags|=64,ae&&(i.flags|=8192),ae=y.callbacks,ae===null?y.callbacks=[ne]:ae.push(ne))}else ae={lane:ne,tag:P.tag,payload:P.payload,callback:P.callback,next:null},se===null?(ee=se=ae,Y=ce):se=se.next=ae,C|=ne;if(P=P.next,P===null){if(P=y.shared.pending,P===null)break;ae=P,P=ae.next,ae.next=null,y.lastBaseUpdate=ae,y.shared.pending=null}}while(!0);se===null&&(Y=ce),y.baseState=Y,y.firstBaseUpdate=ee,y.lastBaseUpdate=se,b===null&&(y.shared.lanes=0),Gi|=C,i.lanes=C,i.memoizedState=ce}}function pg(i,r){if(typeof i!="function")throw Error(a(191,i));i.call(r)}function mg(i,r){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)pg(l[i],r)}var ya=R(null),Nl=R(0);function gg(i,r){i=xi,B(Nl,i),B(ya,r),xi=i|r.baseLanes}function xd(){B(Nl,xi),B(ya,ya.current)}function vd(){xi=Nl.current,U(ya),U(Nl)}var rn=R(null),bn=null;function qi(i){var r=i.alternate;B(pt,pt.current&1),B(rn,i),bn===null&&(r===null||ya.current!==null||r.memoizedState!==null)&&(bn=i)}function bd(i){B(pt,pt.current),B(rn,i),bn===null&&(bn=i)}function yg(i){i.tag===22?(B(pt,pt.current),B(rn,i),bn===null&&(bn=i)):Ui()}function Ui(){B(pt,pt.current),B(rn,rn.current)}function an(i){U(rn),bn===i&&(bn=null),U(pt)}var pt=R(0);function jl(i){for(var r=i;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Cf(l)||Af(l)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ui=0,Te=null,Ze=null,xt=null,El=!1,xa=!1,Tr=!1,kl=0,ko=0,va=null,QN=0;function dt(){throw Error(a(321))}function wd(i,r){if(r===null)return!1;for(var l=0;l<r.length&&l<i.length;l++)if(!tn(i[l],r[l]))return!1;return!0}function Sd(i,r,l,f,y,b){return ui=b,Te=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,I.H=i===null||i.memoizedState===null?ey:zd,Tr=!1,b=l(f,y),Tr=!1,xa&&(b=vg(r,l,f,y)),xg(i),b}function xg(i){I.H=To;var r=Ze!==null&&Ze.next!==null;if(ui=0,xt=Ze=Te=null,El=!1,ko=0,va=null,r)throw Error(a(300));i===null||vt||(i=i.dependencies,i!==null&&gl(i)&&(vt=!0))}function vg(i,r,l,f){Te=i;var y=0;do{if(xa&&(va=null),ko=0,xa=!1,25<=y)throw Error(a(301));if(y+=1,xt=Ze=null,i.updateQueue!=null){var b=i.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}I.H=ty,b=r(l,f)}while(xa);return b}function JN(){var i=I.H,r=i.useState()[0];return r=typeof r.then=="function"?Co(r):r,i=i.useState()[0],(Ze!==null?Ze.memoizedState:null)!==i&&(Te.flags|=1024),r}function Nd(){var i=kl!==0;return kl=0,i}function jd(i,r,l){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~l}function Ed(i){if(El){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}El=!1}ui=0,xt=Ze=Te=null,xa=!1,ko=kl=0,va=null}function Pt(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?Te.memoizedState=xt=i:xt=xt.next=i,xt}function mt(){if(Ze===null){var i=Te.alternate;i=i!==null?i.memoizedState:null}else i=Ze.next;var r=xt===null?Te.memoizedState:xt.next;if(r!==null)xt=r,Ze=i;else{if(i===null)throw Te.alternate===null?Error(a(467)):Error(a(310));Ze=i,i={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},xt===null?Te.memoizedState=xt=i:xt=xt.next=i}return xt}function Cl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Co(i){var r=ko;return ko+=1,va===null&&(va=[]),i=cg(va,i,r),r=Te,(xt===null?r.memoizedState:xt.next)===null&&(r=r.alternate,I.H=r===null||r.memoizedState===null?ey:zd),i}function Al(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Co(i);if(i.$$typeof===E)return Tt(i)}throw Error(a(438,String(i)))}function kd(i){var r=null,l=Te.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var f=Te.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(r={data:f.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=Cl(),Te.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(i),f=0;f<i;f++)l[f]=L;return r.index++,l}function di(i,r){return typeof r=="function"?r(i):r}function Tl(i){var r=mt();return Cd(r,Ze,i)}function Cd(i,r,l){var f=i.queue;if(f===null)throw Error(a(311));f.lastRenderedReducer=l;var y=i.baseQueue,b=f.pending;if(b!==null){if(y!==null){var C=y.next;y.next=b.next,b.next=C}r.baseQueue=y=b,f.pending=null}if(b=i.baseState,y===null)i.memoizedState=b;else{r=y.next;var P=C=null,Y=null,ee=r,se=!1;do{var ce=ee.lane&-536870913;if(ce!==ee.lane?(Le&ce)===ce:(ui&ce)===ce){var ne=ee.revertLane;if(ne===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),ce===ha&&(se=!0);else if((ui&ne)===ne){ee=ee.next,ne===ha&&(se=!0);continue}else ce={lane:0,revertLane:ee.revertLane,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},Y===null?(P=Y=ce,C=b):Y=Y.next=ce,Te.lanes|=ne,Gi|=ne;ce=ee.action,Tr&&l(b,ce),b=ee.hasEagerState?ee.eagerState:l(b,ce)}else ne={lane:ce,revertLane:ee.revertLane,gesture:ee.gesture,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},Y===null?(P=Y=ne,C=b):Y=Y.next=ne,Te.lanes|=ce,Gi|=ce;ee=ee.next}while(ee!==null&&ee!==r);if(Y===null?C=b:Y.next=P,!tn(b,i.memoizedState)&&(vt=!0,se&&(l=pa,l!==null)))throw l;i.memoizedState=b,i.baseState=C,i.baseQueue=Y,f.lastRenderedState=b}return y===null&&(f.lanes=0),[i.memoizedState,f.dispatch]}function Ad(i){var r=mt(),l=r.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=i;var f=l.dispatch,y=l.pending,b=r.memoizedState;if(y!==null){l.pending=null;var C=y=y.next;do b=i(b,C.action),C=C.next;while(C!==y);tn(b,r.memoizedState)||(vt=!0),r.memoizedState=b,r.baseQueue===null&&(r.baseState=b),l.lastRenderedState=b}return[b,f]}function bg(i,r,l){var f=Te,y=mt(),b=Pe;if(b){if(l===void 0)throw Error(a(407));l=l()}else l=r();var C=!tn((Ze||y).memoizedState,l);if(C&&(y.memoizedState=l,vt=!0),y=y.queue,Dd(Ng.bind(null,f,y,i),[i]),y.getSnapshot!==r||C||xt!==null&&xt.memoizedState.tag&1){if(f.flags|=2048,ba(9,{destroy:void 0},Sg.bind(null,f,y,l,r),null),tt===null)throw Error(a(349));b||(ui&127)!==0||wg(f,r,l)}return l}function wg(i,r,l){i.flags|=16384,i={getSnapshot:r,value:l},r=Te.updateQueue,r===null?(r=Cl(),Te.updateQueue=r,r.stores=[i]):(l=r.stores,l===null?r.stores=[i]:l.push(i))}function Sg(i,r,l,f){r.value=l,r.getSnapshot=f,jg(r)&&Eg(i)}function Ng(i,r,l){return l(function(){jg(r)&&Eg(i)})}function jg(i){var r=i.getSnapshot;i=i.value;try{var l=r();return!tn(i,l)}catch{return!0}}function Eg(i){var r=br(i,2);r!==null&&Xt(r,i,2)}function Td(i){var r=Pt();if(typeof i=="function"){var l=i;if(i=l(),Tr){_t(!0);try{l()}finally{_t(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:di,lastRenderedState:i},r}function kg(i,r,l,f){return i.baseState=l,Cd(i,Ze,typeof f=="function"?f:di)}function ZN(i,r,l,f,y){if(Ol(i))throw Error(a(485));if(i=r.action,i!==null){var b={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){b.listeners.push(C)}};I.T!==null?l(!0):b.isTransition=!1,f(b),l=r.pending,l===null?(b.next=r.pending=b,Cg(r,b)):(b.next=l.next,r.pending=l.next=b)}}function Cg(i,r){var l=r.action,f=r.payload,y=i.state;if(r.isTransition){var b=I.T,C={};I.T=C;try{var P=l(y,f),Y=I.S;Y!==null&&Y(C,P),Ag(i,r,P)}catch(ee){Md(i,r,ee)}finally{b!==null&&C.types!==null&&(b.types=C.types),I.T=b}}else try{b=l(y,f),Ag(i,r,b)}catch(ee){Md(i,r,ee)}}function Ag(i,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(f){Tg(i,r,f)},function(f){return Md(i,r,f)}):Tg(i,r,l)}function Tg(i,r,l){r.status="fulfilled",r.value=l,Mg(r),i.state=l,r=i.pending,r!==null&&(l=r.next,l===r?i.pending=null:(l=l.next,r.next=l,Cg(i,l)))}function Md(i,r,l){var f=i.pending;if(i.pending=null,f!==null){f=f.next;do r.status="rejected",r.reason=l,Mg(r),r=r.next;while(r!==f)}i.action=null}function Mg(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function Dg(i,r){return r}function Og(i,r){if(Pe){var l=tt.formState;if(l!==null){e:{var f=Te;if(Pe){if(rt){t:{for(var y=rt,b=vn;y.nodeType!==8;){if(!b){y=null;break t}if(y=wn(y.nextSibling),y===null){y=null;break t}}b=y.data,y=b==="F!"||b==="F"?y:null}if(y){rt=wn(y.nextSibling),f=y.data==="F!";break e}}zi(f)}f=!1}f&&(r=l[0])}}return l=Pt(),l.memoizedState=l.baseState=r,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dg,lastRenderedState:r},l.queue=f,l=Jg.bind(null,Te,f),f.dispatch=l,f=Td(!1),b=Ld.bind(null,Te,!1,f.queue),f=Pt(),y={state:r,dispatch:null,action:i,pending:null},f.queue=y,l=ZN.bind(null,Te,y,b,l),y.dispatch=l,f.memoizedState=i,[r,l,!1]}function _g(i){var r=mt();return Rg(r,Ze,i)}function Rg(i,r,l){if(r=Cd(i,r,Dg)[0],i=Tl(di)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var f=Co(r)}catch(C){throw C===ma?vl:C}else f=r;r=mt();var y=r.queue,b=y.dispatch;return l!==r.memoizedState&&(Te.flags|=2048,ba(9,{destroy:void 0},KN.bind(null,y,l),null)),[f,b,i]}function KN(i,r){i.action=r}function Ig(i){var r=mt(),l=Ze;if(l!==null)return Rg(r,l,i);mt(),r=r.memoizedState,l=mt();var f=l.queue.dispatch;return l.memoizedState=i,[r,f,!1]}function ba(i,r,l,f){return i={tag:i,create:l,deps:f,inst:r,next:null},r=Te.updateQueue,r===null&&(r=Cl(),Te.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=i.next=i:(f=l.next,l.next=i,i.next=f,r.lastEffect=i),i}function Lg(){return mt().memoizedState}function Ml(i,r,l,f){var y=Pt();Te.flags|=i,y.memoizedState=ba(1|r,{destroy:void 0},l,f===void 0?null:f)}function Dl(i,r,l,f){var y=mt();f=f===void 0?null:f;var b=y.memoizedState.inst;Ze!==null&&f!==null&&wd(f,Ze.memoizedState.deps)?y.memoizedState=ba(r,b,l,f):(Te.flags|=i,y.memoizedState=ba(1|r,b,l,f))}function zg(i,r){Ml(8390656,8,i,r)}function Dd(i,r){Dl(2048,8,i,r)}function ej(i){Te.flags|=4;var r=Te.updateQueue;if(r===null)r=Cl(),Te.updateQueue=r,r.events=[i];else{var l=r.events;l===null?r.events=[i]:l.push(i)}}function Bg(i){var r=mt().memoizedState;return ej({ref:r,nextImpl:i}),function(){if((Ye&2)!==0)throw Error(a(440));return r.impl.apply(void 0,arguments)}}function Pg(i,r){return Dl(4,2,i,r)}function $g(i,r){return Dl(4,4,i,r)}function Hg(i,r){if(typeof r=="function"){i=i();var l=r(i);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function qg(i,r,l){l=l!=null?l.concat([i]):null,Dl(4,4,Hg.bind(null,r,i),l)}function Od(){}function Ug(i,r){var l=mt();r=r===void 0?null:r;var f=l.memoizedState;return r!==null&&wd(r,f[1])?f[0]:(l.memoizedState=[i,r],i)}function Fg(i,r){var l=mt();r=r===void 0?null:r;var f=l.memoizedState;if(r!==null&&wd(r,f[1]))return f[0];if(f=i(),Tr){_t(!0);try{i()}finally{_t(!1)}}return l.memoizedState=[f,r],f}function _d(i,r,l){return l===void 0||(ui&1073741824)!==0&&(Le&261930)===0?i.memoizedState=r:(i.memoizedState=l,i=Vy(),Te.lanes|=i,Gi|=i,l)}function Vg(i,r,l,f){return tn(l,r)?l:ya.current!==null?(i=_d(i,l,f),tn(i,r)||(vt=!0),i):(ui&42)===0||(ui&1073741824)!==0&&(Le&261930)===0?(vt=!0,i.memoizedState=l):(i=Vy(),Te.lanes|=i,Gi|=i,r)}function Gg(i,r,l,f,y){var b=V.p;V.p=b!==0&&8>b?b:8;var C=I.T,P={};I.T=P,Ld(i,!1,r,l);try{var Y=y(),ee=I.S;if(ee!==null&&ee(P,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var se=XN(Y,f);Ao(i,r,se,ln(i))}else Ao(i,r,f,ln(i))}catch(ce){Ao(i,r,{then:function(){},status:"rejected",reason:ce},ln())}finally{V.p=b,C!==null&&P.types!==null&&(C.types=P.types),I.T=C}}function tj(){}function Rd(i,r,l,f){if(i.tag!==5)throw Error(a(476));var y=Wg(i).queue;Gg(i,y,r,W,l===null?tj:function(){return Yg(i),l(f)})}function Wg(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:di,lastRenderedState:W},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:di,lastRenderedState:l},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function Yg(i){var r=Wg(i);r.next===null&&(r=i.alternate.memoizedState),Ao(i,r.next.queue,{},ln())}function Id(){return Tt(Vo)}function Xg(){return mt().memoizedState}function Qg(){return mt().memoizedState}function nj(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var l=ln();i=$i(l);var f=Hi(r,i,l);f!==null&&(Xt(f,r,l),No(f,r,l)),r={cache:ud()},i.payload=r;return}r=r.return}}function ij(i,r,l){var f=ln();l={lane:f,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ol(i)?Zg(r,l):(l=Ku(i,r,l,f),l!==null&&(Xt(l,i,f),Kg(l,r,f)))}function Jg(i,r,l){var f=ln();Ao(i,r,l,f)}function Ao(i,r,l,f){var y={lane:f,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Ol(i))Zg(r,y);else{var b=i.alternate;if(i.lanes===0&&(b===null||b.lanes===0)&&(b=r.lastRenderedReducer,b!==null))try{var C=r.lastRenderedState,P=b(C,l);if(y.hasEagerState=!0,y.eagerState=P,tn(P,C))return fl(i,r,y,0),tt===null&&dl(),!1}catch{}if(l=Ku(i,r,y,f),l!==null)return Xt(l,i,f),Kg(l,r,f),!0}return!1}function Ld(i,r,l,f){if(f={lane:2,revertLane:mf(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Ol(i)){if(r)throw Error(a(479))}else r=Ku(i,l,f,2),r!==null&&Xt(r,i,2)}function Ol(i){var r=i.alternate;return i===Te||r!==null&&r===Te}function Zg(i,r){xa=El=!0;var l=i.pending;l===null?r.next=r:(r.next=l.next,l.next=r),i.pending=r}function Kg(i,r,l){if((l&4194048)!==0){var f=r.lanes;f&=i.pendingLanes,l|=f,r.lanes=l,Vs(i,l)}}var To={readContext:Tt,use:Al,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useLayoutEffect:dt,useInsertionEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useSyncExternalStore:dt,useId:dt,useHostTransitionStatus:dt,useFormState:dt,useActionState:dt,useOptimistic:dt,useMemoCache:dt,useCacheRefresh:dt};To.useEffectEvent=dt;var ey={readContext:Tt,use:Al,useCallback:function(i,r){return Pt().memoizedState=[i,r===void 0?null:r],i},useContext:Tt,useEffect:zg,useImperativeHandle:function(i,r,l){l=l!=null?l.concat([i]):null,Ml(4194308,4,Hg.bind(null,r,i),l)},useLayoutEffect:function(i,r){return Ml(4194308,4,i,r)},useInsertionEffect:function(i,r){Ml(4,2,i,r)},useMemo:function(i,r){var l=Pt();r=r===void 0?null:r;var f=i();if(Tr){_t(!0);try{i()}finally{_t(!1)}}return l.memoizedState=[f,r],f},useReducer:function(i,r,l){var f=Pt();if(l!==void 0){var y=l(r);if(Tr){_t(!0);try{l(r)}finally{_t(!1)}}}else y=r;return f.memoizedState=f.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},f.queue=i,i=i.dispatch=ij.bind(null,Te,i),[f.memoizedState,i]},useRef:function(i){var r=Pt();return i={current:i},r.memoizedState=i},useState:function(i){i=Td(i);var r=i.queue,l=Jg.bind(null,Te,r);return r.dispatch=l,[i.memoizedState,l]},useDebugValue:Od,useDeferredValue:function(i,r){var l=Pt();return _d(l,i,r)},useTransition:function(){var i=Td(!1);return i=Gg.bind(null,Te,i.queue,!0,!1),Pt().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,l){var f=Te,y=Pt();if(Pe){if(l===void 0)throw Error(a(407));l=l()}else{if(l=r(),tt===null)throw Error(a(349));(Le&127)!==0||wg(f,r,l)}y.memoizedState=l;var b={value:l,getSnapshot:r};return y.queue=b,zg(Ng.bind(null,f,b,i),[i]),f.flags|=2048,ba(9,{destroy:void 0},Sg.bind(null,f,b,l,r),null),l},useId:function(){var i=Pt(),r=tt.identifierPrefix;if(Pe){var l=Hn,f=$n;l=(f&~(1<<32-Xe(f)-1)).toString(32)+l,r="_"+r+"R_"+l,l=kl++,0<l&&(r+="H"+l.toString(32)),r+="_"}else l=QN++,r="_"+r+"r_"+l.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:Id,useFormState:Og,useActionState:Og,useOptimistic:function(i){var r=Pt();r.memoizedState=r.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=Ld.bind(null,Te,!0,l),l.dispatch=r,[i,r]},useMemoCache:kd,useCacheRefresh:function(){return Pt().memoizedState=nj.bind(null,Te)},useEffectEvent:function(i){var r=Pt(),l={impl:i};return r.memoizedState=l,function(){if((Ye&2)!==0)throw Error(a(440));return l.impl.apply(void 0,arguments)}}},zd={readContext:Tt,use:Al,useCallback:Ug,useContext:Tt,useEffect:Dd,useImperativeHandle:qg,useInsertionEffect:Pg,useLayoutEffect:$g,useMemo:Fg,useReducer:Tl,useRef:Lg,useState:function(){return Tl(di)},useDebugValue:Od,useDeferredValue:function(i,r){var l=mt();return Vg(l,Ze.memoizedState,i,r)},useTransition:function(){var i=Tl(di)[0],r=mt().memoizedState;return[typeof i=="boolean"?i:Co(i),r]},useSyncExternalStore:bg,useId:Xg,useHostTransitionStatus:Id,useFormState:_g,useActionState:_g,useOptimistic:function(i,r){var l=mt();return kg(l,Ze,i,r)},useMemoCache:kd,useCacheRefresh:Qg};zd.useEffectEvent=Bg;var ty={readContext:Tt,use:Al,useCallback:Ug,useContext:Tt,useEffect:Dd,useImperativeHandle:qg,useInsertionEffect:Pg,useLayoutEffect:$g,useMemo:Fg,useReducer:Ad,useRef:Lg,useState:function(){return Ad(di)},useDebugValue:Od,useDeferredValue:function(i,r){var l=mt();return Ze===null?_d(l,i,r):Vg(l,Ze.memoizedState,i,r)},useTransition:function(){var i=Ad(di)[0],r=mt().memoizedState;return[typeof i=="boolean"?i:Co(i),r]},useSyncExternalStore:bg,useId:Xg,useHostTransitionStatus:Id,useFormState:Ig,useActionState:Ig,useOptimistic:function(i,r){var l=mt();return Ze!==null?kg(l,Ze,i,r):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:kd,useCacheRefresh:Qg};ty.useEffectEvent=Bg;function Bd(i,r,l,f){r=i.memoizedState,l=l(f,r),l=l==null?r:g({},r,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var Pd={enqueueSetState:function(i,r,l){i=i._reactInternals;var f=ln(),y=$i(f);y.payload=r,l!=null&&(y.callback=l),r=Hi(i,y,f),r!==null&&(Xt(r,i,f),No(r,i,f))},enqueueReplaceState:function(i,r,l){i=i._reactInternals;var f=ln(),y=$i(f);y.tag=1,y.payload=r,l!=null&&(y.callback=l),r=Hi(i,y,f),r!==null&&(Xt(r,i,f),No(r,i,f))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var l=ln(),f=$i(l);f.tag=2,r!=null&&(f.callback=r),r=Hi(i,f,l),r!==null&&(Xt(r,i,l),No(r,i,l))}};function ny(i,r,l,f,y,b,C){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,b,C):r.prototype&&r.prototype.isPureReactComponent?!mo(l,f)||!mo(y,b):!0}function iy(i,r,l,f){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,f),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,f),r.state!==i&&Pd.enqueueReplaceState(r,r.state,null)}function Mr(i,r){var l=r;if("ref"in r){l={};for(var f in r)f!=="ref"&&(l[f]=r[f])}if(i=i.defaultProps){l===r&&(l=g({},l));for(var y in i)l[y]===void 0&&(l[y]=i[y])}return l}function ry(i){ul(i)}function ay(i){console.error(i)}function oy(i){ul(i)}function _l(i,r){try{var l=i.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(f){setTimeout(function(){throw f})}}function sy(i,r,l){try{var f=i.onCaughtError;f(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function $d(i,r,l){return l=$i(l),l.tag=3,l.payload={element:null},l.callback=function(){_l(i,r)},l}function ly(i){return i=$i(i),i.tag=3,i}function cy(i,r,l,f){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var b=f.value;i.payload=function(){return y(b)},i.callback=function(){sy(r,l,f)}}var C=l.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(i.callback=function(){sy(r,l,f),typeof y!="function"&&(Wi===null?Wi=new Set([this]):Wi.add(this));var P=f.stack;this.componentDidCatch(f.value,{componentStack:P!==null?P:""})})}function rj(i,r,l,f,y){if(l.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(r=l.alternate,r!==null&&fa(r,l,y,!0),l=rn.current,l!==null){switch(l.tag){case 31:case 13:return bn===null?Vl():l.alternate===null&&ft===0&&(ft=3),l.flags&=-257,l.flags|=65536,l.lanes=y,f===bl?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([f]):r.add(f),ff(i,f,y)),!1;case 22:return l.flags|=65536,f===bl?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([f])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([f]):l.add(f)),ff(i,f,y)),!1}throw Error(a(435,l.tag))}return ff(i,f,y),Vl(),!1}if(Pe)return r=rn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,f!==ad&&(i=Error(a(422),{cause:f}),xo(gn(i,l)))):(f!==ad&&(r=Error(a(423),{cause:f}),xo(gn(r,l))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,f=gn(f,l),y=$d(i.stateNode,f,y),gd(i,y),ft!==4&&(ft=2)),!1;var b=Error(a(520),{cause:f});if(b=gn(b,l),zo===null?zo=[b]:zo.push(b),ft!==4&&(ft=2),r===null)return!0;f=gn(f,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,i=y&-y,l.lanes|=i,i=$d(l.stateNode,f,i),gd(l,i),!1;case 1:if(r=l.type,b=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Wi===null||!Wi.has(b))))return l.flags|=65536,y&=-y,l.lanes|=y,y=ly(y),cy(y,i,l,f),gd(l,y),!1}l=l.return}while(l!==null);return!1}var Hd=Error(a(461)),vt=!1;function Mt(i,r,l,f){r.child=i===null?hg(r,null,l,f):Ar(r,i.child,l,f)}function uy(i,r,l,f,y){l=l.render;var b=r.ref;if("ref"in f){var C={};for(var P in f)P!=="ref"&&(C[P]=f[P])}else C=f;return jr(r),f=Sd(i,r,l,C,b,y),P=Nd(),i!==null&&!vt?(jd(i,r,y),fi(i,r,y)):(Pe&&P&&id(r),r.flags|=1,Mt(i,r,f,y),r.child)}function dy(i,r,l,f,y){if(i===null){var b=l.type;return typeof b=="function"&&!ed(b)&&b.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=b,fy(i,r,b,f,y)):(i=pl(l.type,null,f,r,r.mode,y),i.ref=r.ref,i.return=r,r.child=i)}if(b=i.child,!Xd(i,y)){var C=b.memoizedProps;if(l=l.compare,l=l!==null?l:mo,l(C,f)&&i.ref===r.ref)return fi(i,r,y)}return r.flags|=1,i=oi(b,f),i.ref=r.ref,i.return=r,r.child=i}function fy(i,r,l,f,y){if(i!==null){var b=i.memoizedProps;if(mo(b,f)&&i.ref===r.ref)if(vt=!1,r.pendingProps=f=b,Xd(i,y))(i.flags&131072)!==0&&(vt=!0);else return r.lanes=i.lanes,fi(i,r,y)}return qd(i,r,l,f,y)}function hy(i,r,l,f){var y=f.children,b=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((r.flags&128)!==0){if(b=b!==null?b.baseLanes|l:l,i!==null){for(f=r.child=i.child,y=0;f!==null;)y=y|f.lanes|f.childLanes,f=f.sibling;f=y&~b}else f=0,r.child=null;return py(i,r,b,l,f)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&xl(r,b!==null?b.cachePool:null),b!==null?gg(r,b):xd(),yg(r);else return f=r.lanes=536870912,py(i,r,b!==null?b.baseLanes|l:l,l,f)}else b!==null?(xl(r,b.cachePool),gg(r,b),Ui(),r.memoizedState=null):(i!==null&&xl(r,null),xd(),Ui());return Mt(i,r,y,l),r.child}function Mo(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function py(i,r,l,f,y){var b=fd();return b=b===null?null:{parent:yt._currentValue,pool:b},r.memoizedState={baseLanes:l,cachePool:b},i!==null&&xl(r,null),xd(),yg(r),i!==null&&fa(i,r,f,!0),r.childLanes=y,null}function Rl(i,r){return r=Ll({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function my(i,r,l){return Ar(r,i.child,null,l),i=Rl(r,r.pendingProps),i.flags|=2,an(r),r.memoizedState=null,i}function aj(i,r,l){var f=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(Pe){if(f.mode==="hidden")return i=Rl(r,f),r.lanes=536870912,Mo(null,i);if(bd(r),(i=rt)?(i=Cx(i,vn),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Ii!==null?{id:$n,overflow:Hn}:null,retryLane:536870912,hydrationErrors:null},l=Zm(i),l.return=r,r.child=l,At=r,rt=null)):i=null,i===null)throw zi(r);return r.lanes=536870912,null}return Rl(r,f)}var b=i.memoizedState;if(b!==null){var C=b.dehydrated;if(bd(r),y)if(r.flags&256)r.flags&=-257,r=my(i,r,l);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(a(558));else if(vt||fa(i,r,l,!1),y=(l&i.childLanes)!==0,vt||y){if(f=tt,f!==null&&(C=Gs(f,l),C!==0&&C!==b.retryLane))throw b.retryLane=C,br(i,C),Xt(f,i,C),Hd;Vl(),r=my(i,r,l)}else i=b.treeContext,rt=wn(C.nextSibling),At=r,Pe=!0,Li=null,vn=!1,i!==null&&tg(r,i),r=Rl(r,f),r.flags|=4096;return r}return i=oi(i.child,{mode:f.mode,children:f.children}),i.ref=r.ref,r.child=i,i.return=r,i}function Il(i,r){var l=r.ref;if(l===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(a(284));(i===null||i.ref!==l)&&(r.flags|=4194816)}}function qd(i,r,l,f,y){return jr(r),l=Sd(i,r,l,f,void 0,y),f=Nd(),i!==null&&!vt?(jd(i,r,y),fi(i,r,y)):(Pe&&f&&id(r),r.flags|=1,Mt(i,r,l,y),r.child)}function gy(i,r,l,f,y,b){return jr(r),r.updateQueue=null,l=vg(r,f,l,y),xg(i),f=Nd(),i!==null&&!vt?(jd(i,r,b),fi(i,r,b)):(Pe&&f&&id(r),r.flags|=1,Mt(i,r,l,b),r.child)}function yy(i,r,l,f,y){if(jr(r),r.stateNode===null){var b=la,C=l.contextType;typeof C=="object"&&C!==null&&(b=Tt(C)),b=new l(f,b),r.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Pd,r.stateNode=b,b._reactInternals=r,b=r.stateNode,b.props=f,b.state=r.memoizedState,b.refs={},pd(r),C=l.contextType,b.context=typeof C=="object"&&C!==null?Tt(C):la,b.state=r.memoizedState,C=l.getDerivedStateFromProps,typeof C=="function"&&(Bd(r,l,C,f),b.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(C=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),C!==b.state&&Pd.enqueueReplaceState(b,b.state,null),Eo(r,f,b,y),jo(),b.state=r.memoizedState),typeof b.componentDidMount=="function"&&(r.flags|=4194308),f=!0}else if(i===null){b=r.stateNode;var P=r.memoizedProps,Y=Mr(l,P);b.props=Y;var ee=b.context,se=l.contextType;C=la,typeof se=="object"&&se!==null&&(C=Tt(se));var ce=l.getDerivedStateFromProps;se=typeof ce=="function"||typeof b.getSnapshotBeforeUpdate=="function",P=r.pendingProps!==P,se||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(P||ee!==C)&&iy(r,b,f,C),Pi=!1;var ne=r.memoizedState;b.state=ne,Eo(r,f,b,y),jo(),ee=r.memoizedState,P||ne!==ee||Pi?(typeof ce=="function"&&(Bd(r,l,ce,f),ee=r.memoizedState),(Y=Pi||ny(r,l,Y,f,ne,ee,C))?(se||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(r.flags|=4194308)):(typeof b.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=f,r.memoizedState=ee),b.props=f,b.state=ee,b.context=C,f=Y):(typeof b.componentDidMount=="function"&&(r.flags|=4194308),f=!1)}else{b=r.stateNode,md(i,r),C=r.memoizedProps,se=Mr(l,C),b.props=se,ce=r.pendingProps,ne=b.context,ee=l.contextType,Y=la,typeof ee=="object"&&ee!==null&&(Y=Tt(ee)),P=l.getDerivedStateFromProps,(ee=typeof P=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(C!==ce||ne!==Y)&&iy(r,b,f,Y),Pi=!1,ne=r.memoizedState,b.state=ne,Eo(r,f,b,y),jo();var ae=r.memoizedState;C!==ce||ne!==ae||Pi||i!==null&&i.dependencies!==null&&gl(i.dependencies)?(typeof P=="function"&&(Bd(r,l,P,f),ae=r.memoizedState),(se=Pi||ny(r,l,se,f,ne,ae,Y)||i!==null&&i.dependencies!==null&&gl(i.dependencies))?(ee||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(f,ae,Y),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(f,ae,Y)),typeof b.componentDidUpdate=="function"&&(r.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof b.componentDidUpdate!="function"||C===i.memoizedProps&&ne===i.memoizedState||(r.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&ne===i.memoizedState||(r.flags|=1024),r.memoizedProps=f,r.memoizedState=ae),b.props=f,b.state=ae,b.context=Y,f=se):(typeof b.componentDidUpdate!="function"||C===i.memoizedProps&&ne===i.memoizedState||(r.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&ne===i.memoizedState||(r.flags|=1024),f=!1)}return b=f,Il(i,r),f=(r.flags&128)!==0,b||f?(b=r.stateNode,l=f&&typeof l.getDerivedStateFromError!="function"?null:b.render(),r.flags|=1,i!==null&&f?(r.child=Ar(r,i.child,null,y),r.child=Ar(r,null,l,y)):Mt(i,r,l,y),r.memoizedState=b.state,i=r.child):i=fi(i,r,y),i}function xy(i,r,l,f){return Sr(),r.flags|=256,Mt(i,r,l,f),r.child}var Ud={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Fd(i){return{baseLanes:i,cachePool:sg()}}function Vd(i,r,l){return i=i!==null?i.childLanes&~l:0,r&&(i|=sn),i}function vy(i,r,l){var f=r.pendingProps,y=!1,b=(r.flags&128)!==0,C;if((C=b)||(C=i!==null&&i.memoizedState===null?!1:(pt.current&2)!==0),C&&(y=!0,r.flags&=-129),C=(r.flags&32)!==0,r.flags&=-33,i===null){if(Pe){if(y?qi(r):Ui(),(i=rt)?(i=Cx(i,vn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Ii!==null?{id:$n,overflow:Hn}:null,retryLane:536870912,hydrationErrors:null},l=Zm(i),l.return=r,r.child=l,At=r,rt=null)):i=null,i===null)throw zi(r);return Af(i)?r.lanes=32:r.lanes=536870912,null}var P=f.children;return f=f.fallback,y?(Ui(),y=r.mode,P=Ll({mode:"hidden",children:P},y),f=wr(f,y,l,null),P.return=r,f.return=r,P.sibling=f,r.child=P,f=r.child,f.memoizedState=Fd(l),f.childLanes=Vd(i,C,l),r.memoizedState=Ud,Mo(null,f)):(qi(r),Gd(r,P))}var Y=i.memoizedState;if(Y!==null&&(P=Y.dehydrated,P!==null)){if(b)r.flags&256?(qi(r),r.flags&=-257,r=Wd(i,r,l)):r.memoizedState!==null?(Ui(),r.child=i.child,r.flags|=128,r=null):(Ui(),P=f.fallback,y=r.mode,f=Ll({mode:"visible",children:f.children},y),P=wr(P,y,l,null),P.flags|=2,f.return=r,P.return=r,f.sibling=P,r.child=f,Ar(r,i.child,null,l),f=r.child,f.memoizedState=Fd(l),f.childLanes=Vd(i,C,l),r.memoizedState=Ud,r=Mo(null,f));else if(qi(r),Af(P)){if(C=P.nextSibling&&P.nextSibling.dataset,C)var ee=C.dgst;C=ee,f=Error(a(419)),f.stack="",f.digest=C,xo({value:f,source:null,stack:null}),r=Wd(i,r,l)}else if(vt||fa(i,r,l,!1),C=(l&i.childLanes)!==0,vt||C){if(C=tt,C!==null&&(f=Gs(C,l),f!==0&&f!==Y.retryLane))throw Y.retryLane=f,br(i,f),Xt(C,i,f),Hd;Cf(P)||Vl(),r=Wd(i,r,l)}else Cf(P)?(r.flags|=192,r.child=i.child,r=null):(i=Y.treeContext,rt=wn(P.nextSibling),At=r,Pe=!0,Li=null,vn=!1,i!==null&&tg(r,i),r=Gd(r,f.children),r.flags|=4096);return r}return y?(Ui(),P=f.fallback,y=r.mode,Y=i.child,ee=Y.sibling,f=oi(Y,{mode:"hidden",children:f.children}),f.subtreeFlags=Y.subtreeFlags&65011712,ee!==null?P=oi(ee,P):(P=wr(P,y,l,null),P.flags|=2),P.return=r,f.return=r,f.sibling=P,r.child=f,Mo(null,f),f=r.child,P=i.child.memoizedState,P===null?P=Fd(l):(y=P.cachePool,y!==null?(Y=yt._currentValue,y=y.parent!==Y?{parent:Y,pool:Y}:y):y=sg(),P={baseLanes:P.baseLanes|l,cachePool:y}),f.memoizedState=P,f.childLanes=Vd(i,C,l),r.memoizedState=Ud,Mo(i.child,f)):(qi(r),l=i.child,i=l.sibling,l=oi(l,{mode:"visible",children:f.children}),l.return=r,l.sibling=null,i!==null&&(C=r.deletions,C===null?(r.deletions=[i],r.flags|=16):C.push(i)),r.child=l,r.memoizedState=null,l)}function Gd(i,r){return r=Ll({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function Ll(i,r){return i=nn(22,i,null,r),i.lanes=0,i}function Wd(i,r,l){return Ar(r,i.child,null,l),i=Gd(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function by(i,r,l){i.lanes|=r;var f=i.alternate;f!==null&&(f.lanes|=r),ld(i.return,r,l)}function Yd(i,r,l,f,y,b){var C=i.memoizedState;C===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:f,tail:l,tailMode:y,treeForkCount:b}:(C.isBackwards=r,C.rendering=null,C.renderingStartTime=0,C.last=f,C.tail=l,C.tailMode=y,C.treeForkCount=b)}function wy(i,r,l){var f=r.pendingProps,y=f.revealOrder,b=f.tail;f=f.children;var C=pt.current,P=(C&2)!==0;if(P?(C=C&1|2,r.flags|=128):C&=1,B(pt,C),Mt(i,r,f,l),f=Pe?yo:0,!P&&i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&by(i,l,r);else if(i.tag===19)by(i,l,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(l=r.child,y=null;l!==null;)i=l.alternate,i!==null&&jl(i)===null&&(y=l),l=l.sibling;l=y,l===null?(y=r.child,r.child=null):(y=l.sibling,l.sibling=null),Yd(r,!1,y,l,b,f);break;case"backwards":case"unstable_legacy-backwards":for(l=null,y=r.child,r.child=null;y!==null;){if(i=y.alternate,i!==null&&jl(i)===null){r.child=y;break}i=y.sibling,y.sibling=l,l=y,y=i}Yd(r,!0,l,null,b,f);break;case"together":Yd(r,!1,null,null,void 0,f);break;default:r.memoizedState=null}return r.child}function fi(i,r,l){if(i!==null&&(r.dependencies=i.dependencies),Gi|=r.lanes,(l&r.childLanes)===0)if(i!==null){if(fa(i,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(a(153));if(r.child!==null){for(i=r.child,l=oi(i,i.pendingProps),r.child=l,l.return=r;i.sibling!==null;)i=i.sibling,l=l.sibling=oi(i,i.pendingProps),l.return=r;l.sibling=null}return r.child}function Xd(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&gl(i)))}function oj(i,r,l){switch(r.tag){case 3:te(r,r.stateNode.containerInfo),Bi(r,yt,i.memoizedState.cache),Sr();break;case 27:case 5:me(r);break;case 4:te(r,r.stateNode.containerInfo);break;case 10:Bi(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,bd(r),null;break;case 13:var f=r.memoizedState;if(f!==null)return f.dehydrated!==null?(qi(r),r.flags|=128,null):(l&r.child.childLanes)!==0?vy(i,r,l):(qi(r),i=fi(i,r,l),i!==null?i.sibling:null);qi(r);break;case 19:var y=(i.flags&128)!==0;if(f=(l&r.childLanes)!==0,f||(fa(i,r,l,!1),f=(l&r.childLanes)!==0),y){if(f)return wy(i,r,l);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),B(pt,pt.current),f)break;return null;case 22:return r.lanes=0,hy(i,r,l,r.pendingProps);case 24:Bi(r,yt,i.memoizedState.cache)}return fi(i,r,l)}function Sy(i,r,l){if(i!==null)if(i.memoizedProps!==r.pendingProps)vt=!0;else{if(!Xd(i,l)&&(r.flags&128)===0)return vt=!1,oj(i,r,l);vt=(i.flags&131072)!==0}else vt=!1,Pe&&(r.flags&1048576)!==0&&eg(r,yo,r.index);switch(r.lanes=0,r.tag){case 16:e:{var f=r.pendingProps;if(i=kr(r.elementType),r.type=i,typeof i=="function")ed(i)?(f=Mr(i,f),r.tag=1,r=yy(null,r,i,f,l)):(r.tag=0,r=qd(null,r,i,f,l));else{if(i!=null){var y=i.$$typeof;if(y===T){r.tag=11,r=uy(null,r,i,f,l);break e}else if(y===z){r.tag=14,r=dy(null,r,i,f,l);break e}}throw r=D(i)||i,Error(a(306,r,""))}}return r;case 0:return qd(i,r,r.type,r.pendingProps,l);case 1:return f=r.type,y=Mr(f,r.pendingProps),yy(i,r,f,y,l);case 3:e:{if(te(r,r.stateNode.containerInfo),i===null)throw Error(a(387));f=r.pendingProps;var b=r.memoizedState;y=b.element,md(i,r),Eo(r,f,null,l);var C=r.memoizedState;if(f=C.cache,Bi(r,yt,f),f!==b.cache&&cd(r,[yt],l,!0),jo(),f=C.element,b.isDehydrated)if(b={element:f,isDehydrated:!1,cache:C.cache},r.updateQueue.baseState=b,r.memoizedState=b,r.flags&256){r=xy(i,r,f,l);break e}else if(f!==y){y=gn(Error(a(424)),r),xo(y),r=xy(i,r,f,l);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(rt=wn(i.firstChild),At=r,Pe=!0,Li=null,vn=!0,l=hg(r,null,f,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Sr(),f===y){r=fi(i,r,l);break e}Mt(i,r,f,l)}r=r.child}return r;case 26:return Il(i,r),i===null?(l=_x(r.type,null,r.pendingProps,null))?r.memoizedState=l:Pe||(l=r.type,i=r.pendingProps,f=Zl(fe.current).createElement(l),f[jt]=r,f[Rt]=i,Dt(f,l,i),gt(f),r.stateNode=f):r.memoizedState=_x(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return me(r),i===null&&Pe&&(f=r.stateNode=Mx(r.type,r.pendingProps,fe.current),At=r,vn=!0,y=rt,Ji(r.type)?(Tf=y,rt=wn(f.firstChild)):rt=y),Mt(i,r,r.pendingProps.children,l),Il(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&Pe&&((y=f=rt)&&(f=Lj(f,r.type,r.pendingProps,vn),f!==null?(r.stateNode=f,At=r,rt=wn(f.firstChild),vn=!1,y=!0):y=!1),y||zi(r)),me(r),y=r.type,b=r.pendingProps,C=i!==null?i.memoizedProps:null,f=b.children,jf(y,b)?f=null:C!==null&&jf(y,C)&&(r.flags|=32),r.memoizedState!==null&&(y=Sd(i,r,JN,null,null,l),Vo._currentValue=y),Il(i,r),Mt(i,r,f,l),r.child;case 6:return i===null&&Pe&&((i=l=rt)&&(l=zj(l,r.pendingProps,vn),l!==null?(r.stateNode=l,At=r,rt=null,i=!0):i=!1),i||zi(r)),null;case 13:return vy(i,r,l);case 4:return te(r,r.stateNode.containerInfo),f=r.pendingProps,i===null?r.child=Ar(r,null,f,l):Mt(i,r,f,l),r.child;case 11:return uy(i,r,r.type,r.pendingProps,l);case 7:return Mt(i,r,r.pendingProps,l),r.child;case 8:return Mt(i,r,r.pendingProps.children,l),r.child;case 12:return Mt(i,r,r.pendingProps.children,l),r.child;case 10:return f=r.pendingProps,Bi(r,r.type,f.value),Mt(i,r,f.children,l),r.child;case 9:return y=r.type._context,f=r.pendingProps.children,jr(r),y=Tt(y),f=f(y),r.flags|=1,Mt(i,r,f,l),r.child;case 14:return dy(i,r,r.type,r.pendingProps,l);case 15:return fy(i,r,r.type,r.pendingProps,l);case 19:return wy(i,r,l);case 31:return aj(i,r,l);case 22:return hy(i,r,l,r.pendingProps);case 24:return jr(r),f=Tt(yt),i===null?(y=fd(),y===null&&(y=tt,b=ud(),y.pooledCache=b,b.refCount++,b!==null&&(y.pooledCacheLanes|=l),y=b),r.memoizedState={parent:f,cache:y},pd(r),Bi(r,yt,y)):((i.lanes&l)!==0&&(md(i,r),Eo(r,null,null,l),jo()),y=i.memoizedState,b=r.memoizedState,y.parent!==f?(y={parent:f,cache:f},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),Bi(r,yt,f)):(f=b.cache,Bi(r,yt,f),f!==y.cache&&cd(r,[yt],l,!0))),Mt(i,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(a(156,r.tag))}function hi(i){i.flags|=4}function Qd(i,r,l,f,y){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(Xy())i.flags|=8192;else throw Cr=bl,hd}else i.flags&=-16777217}function Ny(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Bx(r))if(Xy())i.flags|=8192;else throw Cr=bl,hd}function zl(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?Us():536870912,i.lanes|=r,ja|=r)}function Do(i,r){if(!Pe)switch(i.tailMode){case"hidden":r=i.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function at(i){var r=i.alternate!==null&&i.alternate.child===i.child,l=0,f=0;if(r)for(var y=i.child;y!==null;)l|=y.lanes|y.childLanes,f|=y.subtreeFlags&65011712,f|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)l|=y.lanes|y.childLanes,f|=y.subtreeFlags,f|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=f,i.childLanes=l,r}function sj(i,r,l){var f=r.pendingProps;switch(rd(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(r),null;case 1:return at(r),null;case 3:return l=r.stateNode,f=null,i!==null&&(f=i.memoizedState.cache),r.memoizedState.cache!==f&&(r.flags|=2048),ci(yt),ue(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(da(r)?hi(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,od())),at(r),null;case 26:var y=r.type,b=r.memoizedState;return i===null?(hi(r),b!==null?(at(r),Ny(r,b)):(at(r),Qd(r,y,null,f,l))):b?b!==i.memoizedState?(hi(r),at(r),Ny(r,b)):(at(r),r.flags&=-16777217):(i=i.memoizedProps,i!==f&&hi(r),at(r),Qd(r,y,i,f,l)),null;case 27:if(ge(r),l=fe.current,y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==f&&hi(r);else{if(!f){if(r.stateNode===null)throw Error(a(166));return at(r),null}i=re.current,da(r)?ng(r):(i=Mx(y,f,l),r.stateNode=i,hi(r))}return at(r),null;case 5:if(ge(r),y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==f&&hi(r);else{if(!f){if(r.stateNode===null)throw Error(a(166));return at(r),null}if(b=re.current,da(r))ng(r);else{var C=Zl(fe.current);switch(b){case 1:b=C.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:b=C.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":b=C.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":b=C.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":b=C.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof f.is=="string"?C.createElement("select",{is:f.is}):C.createElement("select"),f.multiple?b.multiple=!0:f.size&&(b.size=f.size);break;default:b=typeof f.is=="string"?C.createElement(y,{is:f.is}):C.createElement(y)}}b[jt]=r,b[Rt]=f;e:for(C=r.child;C!==null;){if(C.tag===5||C.tag===6)b.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===r)break e;for(;C.sibling===null;){if(C.return===null||C.return===r)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}r.stateNode=b;e:switch(Dt(b,y,f),y){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&hi(r)}}return at(r),Qd(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,l),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==f&&hi(r);else{if(typeof f!="string"&&r.stateNode===null)throw Error(a(166));if(i=fe.current,da(r)){if(i=r.stateNode,l=r.memoizedProps,f=null,y=At,y!==null)switch(y.tag){case 27:case 5:f=y.memoizedProps}i[jt]=r,i=!!(i.nodeValue===l||f!==null&&f.suppressHydrationWarning===!0||vx(i.nodeValue,l)),i||zi(r,!0)}else i=Zl(i).createTextNode(f),i[jt]=r,r.stateNode=i}return at(r),null;case 31:if(l=r.memoizedState,i===null||i.memoizedState!==null){if(f=da(r),l!==null){if(i===null){if(!f)throw Error(a(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(a(557));i[jt]=r}else Sr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;at(r),i=!1}else l=od(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=l),i=!0;if(!i)return r.flags&256?(an(r),r):(an(r),null);if((r.flags&128)!==0)throw Error(a(558))}return at(r),null;case 13:if(f=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=da(r),f!==null&&f.dehydrated!==null){if(i===null){if(!y)throw Error(a(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(a(317));y[jt]=r}else Sr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;at(r),y=!1}else y=od(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(an(r),r):(an(r),null)}return an(r),(r.flags&128)!==0?(r.lanes=l,r):(l=f!==null,i=i!==null&&i.memoizedState!==null,l&&(f=r.child,y=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(y=f.alternate.memoizedState.cachePool.pool),b=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(b=f.memoizedState.cachePool.pool),b!==y&&(f.flags|=2048)),l!==i&&l&&(r.child.flags|=8192),zl(r,r.updateQueue),at(r),null);case 4:return ue(),i===null&&vf(r.stateNode.containerInfo),at(r),null;case 10:return ci(r.type),at(r),null;case 19:if(U(pt),f=r.memoizedState,f===null)return at(r),null;if(y=(r.flags&128)!==0,b=f.rendering,b===null)if(y)Do(f,!1);else{if(ft!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(b=jl(i),b!==null){for(r.flags|=128,Do(f,!1),i=b.updateQueue,r.updateQueue=i,zl(r,i),r.subtreeFlags=0,i=l,l=r.child;l!==null;)Jm(l,i),l=l.sibling;return B(pt,pt.current&1|2),Pe&&si(r,f.treeForkCount),r.child}i=i.sibling}f.tail!==null&&Nt()>ql&&(r.flags|=128,y=!0,Do(f,!1),r.lanes=4194304)}else{if(!y)if(i=jl(b),i!==null){if(r.flags|=128,y=!0,i=i.updateQueue,r.updateQueue=i,zl(r,i),Do(f,!0),f.tail===null&&f.tailMode==="hidden"&&!b.alternate&&!Pe)return at(r),null}else 2*Nt()-f.renderingStartTime>ql&&l!==536870912&&(r.flags|=128,y=!0,Do(f,!1),r.lanes=4194304);f.isBackwards?(b.sibling=r.child,r.child=b):(i=f.last,i!==null?i.sibling=b:r.child=b,f.last=b)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=Nt(),i.sibling=null,l=pt.current,B(pt,y?l&1|2:l&1),Pe&&si(r,f.treeForkCount),i):(at(r),null);case 22:case 23:return an(r),vd(),f=r.memoizedState!==null,i!==null?i.memoizedState!==null!==f&&(r.flags|=8192):f&&(r.flags|=8192),f?(l&536870912)!==0&&(r.flags&128)===0&&(at(r),r.subtreeFlags&6&&(r.flags|=8192)):at(r),l=r.updateQueue,l!==null&&zl(r,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),f=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(f=r.memoizedState.cachePool.pool),f!==l&&(r.flags|=2048),i!==null&&U(Er),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),ci(yt),at(r),null;case 25:return null;case 30:return null}throw Error(a(156,r.tag))}function lj(i,r){switch(rd(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return ci(yt),ue(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return ge(r),null;case 31:if(r.memoizedState!==null){if(an(r),r.alternate===null)throw Error(a(340));Sr()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(an(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(a(340));Sr()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return U(pt),null;case 4:return ue(),null;case 10:return ci(r.type),null;case 22:case 23:return an(r),vd(),i!==null&&U(Er),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return ci(yt),null;case 25:return null;default:return null}}function jy(i,r){switch(rd(r),r.tag){case 3:ci(yt),ue();break;case 26:case 27:case 5:ge(r);break;case 4:ue();break;case 31:r.memoizedState!==null&&an(r);break;case 13:an(r);break;case 19:U(pt);break;case 10:ci(r.type);break;case 22:case 23:an(r),vd(),i!==null&&U(Er);break;case 24:ci(yt)}}function Oo(i,r){try{var l=r.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var y=f.next;l=y;do{if((l.tag&i)===i){f=void 0;var b=l.create,C=l.inst;f=b(),C.destroy=f}l=l.next}while(l!==y)}}catch(P){Je(r,r.return,P)}}function Fi(i,r,l){try{var f=r.updateQueue,y=f!==null?f.lastEffect:null;if(y!==null){var b=y.next;f=b;do{if((f.tag&i)===i){var C=f.inst,P=C.destroy;if(P!==void 0){C.destroy=void 0,y=r;var Y=l,ee=P;try{ee()}catch(se){Je(y,Y,se)}}}f=f.next}while(f!==b)}}catch(se){Je(r,r.return,se)}}function Ey(i){var r=i.updateQueue;if(r!==null){var l=i.stateNode;try{mg(r,l)}catch(f){Je(i,i.return,f)}}}function ky(i,r,l){l.props=Mr(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(f){Je(i,r,f)}}function _o(i,r){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var f=i.stateNode;break;case 30:f=i.stateNode;break;default:f=i.stateNode}typeof l=="function"?i.refCleanup=l(f):l.current=f}}catch(y){Je(i,r,y)}}function qn(i,r){var l=i.ref,f=i.refCleanup;if(l!==null)if(typeof f=="function")try{f()}catch(y){Je(i,r,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){Je(i,r,y)}else l.current=null}function Cy(i){var r=i.type,l=i.memoizedProps,f=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&f.focus();break e;case"img":l.src?f.src=l.src:l.srcSet&&(f.srcset=l.srcSet)}}catch(y){Je(i,i.return,y)}}function Jd(i,r,l){try{var f=i.stateNode;Mj(f,i.type,l,r),f[Rt]=r}catch(y){Je(i,i.return,y)}}function Ay(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Ji(i.type)||i.tag===4}function Zd(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Ay(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Ji(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Kd(i,r,l){var f=i.tag;if(f===5||f===6)i=i.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(i),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=ri));else if(f!==4&&(f===27&&Ji(i.type)&&(l=i.stateNode,r=null),i=i.child,i!==null))for(Kd(i,r,l),i=i.sibling;i!==null;)Kd(i,r,l),i=i.sibling}function Bl(i,r,l){var f=i.tag;if(f===5||f===6)i=i.stateNode,r?l.insertBefore(i,r):l.appendChild(i);else if(f!==4&&(f===27&&Ji(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(Bl(i,r,l),i=i.sibling;i!==null;)Bl(i,r,l),i=i.sibling}function Ty(i){var r=i.stateNode,l=i.memoizedProps;try{for(var f=i.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);Dt(r,f,l),r[jt]=i,r[Rt]=l}catch(b){Je(i,i.return,b)}}var pi=!1,bt=!1,ef=!1,My=typeof WeakSet=="function"?WeakSet:Set,kt=null;function cj(i,r){if(i=i.containerInfo,Sf=ac,i=qm(i),Wu(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var f=l.getSelection&&l.getSelection();if(f&&f.rangeCount!==0){l=f.anchorNode;var y=f.anchorOffset,b=f.focusNode;f=f.focusOffset;try{l.nodeType,b.nodeType}catch{l=null;break e}var C=0,P=-1,Y=-1,ee=0,se=0,ce=i,ne=null;t:for(;;){for(var ae;ce!==l||y!==0&&ce.nodeType!==3||(P=C+y),ce!==b||f!==0&&ce.nodeType!==3||(Y=C+f),ce.nodeType===3&&(C+=ce.nodeValue.length),(ae=ce.firstChild)!==null;)ne=ce,ce=ae;for(;;){if(ce===i)break t;if(ne===l&&++ee===y&&(P=C),ne===b&&++se===f&&(Y=C),(ae=ce.nextSibling)!==null)break;ce=ne,ne=ce.parentNode}ce=ae}l=P===-1||Y===-1?null:{start:P,end:Y}}else l=null}l=l||{start:0,end:0}}else l=null;for(Nf={focusedElem:i,selectionRange:l},ac=!1,kt=r;kt!==null;)if(r=kt,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,kt=i;else for(;kt!==null;){switch(r=kt,b=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(l=0;l<i.length;l++)y=i[l],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&b!==null){i=void 0,l=r,y=b.memoizedProps,b=b.memoizedState,f=l.stateNode;try{var ve=Mr(l.type,y);i=f.getSnapshotBeforeUpdate(ve,b),f.__reactInternalSnapshotBeforeUpdate=i}catch(ke){Je(l,l.return,ke)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,l=i.nodeType,l===9)kf(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":kf(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(a(163))}if(i=r.sibling,i!==null){i.return=r.return,kt=i;break}kt=r.return}}function Dy(i,r,l){var f=l.flags;switch(l.tag){case 0:case 11:case 15:gi(i,l),f&4&&Oo(5,l);break;case 1:if(gi(i,l),f&4)if(i=l.stateNode,r===null)try{i.componentDidMount()}catch(C){Je(l,l.return,C)}else{var y=Mr(l.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(y,r,i.__reactInternalSnapshotBeforeUpdate)}catch(C){Je(l,l.return,C)}}f&64&&Ey(l),f&512&&_o(l,l.return);break;case 3:if(gi(i,l),f&64&&(i=l.updateQueue,i!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{mg(i,r)}catch(C){Je(l,l.return,C)}}break;case 27:r===null&&f&4&&Ty(l);case 26:case 5:gi(i,l),r===null&&f&4&&Cy(l),f&512&&_o(l,l.return);break;case 12:gi(i,l);break;case 31:gi(i,l),f&4&&Ry(i,l);break;case 13:gi(i,l),f&4&&Iy(i,l),f&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=xj.bind(null,l),Bj(i,l))));break;case 22:if(f=l.memoizedState!==null||pi,!f){r=r!==null&&r.memoizedState!==null||bt,y=pi;var b=bt;pi=f,(bt=r)&&!b?yi(i,l,(l.subtreeFlags&8772)!==0):gi(i,l),pi=y,bt=b}break;case 30:break;default:gi(i,l)}}function Oy(i){var r=i.alternate;r!==null&&(i.alternate=null,Oy(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&ro(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var ct=null,Vt=!1;function mi(i,r,l){for(l=l.child;l!==null;)_y(i,r,l),l=l.sibling}function _y(i,r,l){if(ht&&typeof ht.onCommitFiberUnmount=="function")try{ht.onCommitFiberUnmount(Ct,l)}catch{}switch(l.tag){case 26:bt||qn(l,r),mi(i,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:bt||qn(l,r);var f=ct,y=Vt;Ji(l.type)&&(ct=l.stateNode,Vt=!1),mi(i,r,l),qo(l.stateNode),ct=f,Vt=y;break;case 5:bt||qn(l,r);case 6:if(f=ct,y=Vt,ct=null,mi(i,r,l),ct=f,Vt=y,ct!==null)if(Vt)try{(ct.nodeType===9?ct.body:ct.nodeName==="HTML"?ct.ownerDocument.body:ct).removeChild(l.stateNode)}catch(b){Je(l,r,b)}else try{ct.removeChild(l.stateNode)}catch(b){Je(l,r,b)}break;case 18:ct!==null&&(Vt?(i=ct,Ex(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),Oa(i)):Ex(ct,l.stateNode));break;case 4:f=ct,y=Vt,ct=l.stateNode.containerInfo,Vt=!0,mi(i,r,l),ct=f,Vt=y;break;case 0:case 11:case 14:case 15:Fi(2,l,r),bt||Fi(4,l,r),mi(i,r,l);break;case 1:bt||(qn(l,r),f=l.stateNode,typeof f.componentWillUnmount=="function"&&ky(l,r,f)),mi(i,r,l);break;case 21:mi(i,r,l);break;case 22:bt=(f=bt)||l.memoizedState!==null,mi(i,r,l),bt=f;break;default:mi(i,r,l)}}function Ry(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Oa(i)}catch(l){Je(r,r.return,l)}}}function Iy(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Oa(i)}catch(l){Je(r,r.return,l)}}function uj(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new My),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new My),r;default:throw Error(a(435,i.tag))}}function Pl(i,r){var l=uj(i);r.forEach(function(f){if(!l.has(f)){l.add(f);var y=vj.bind(null,i,f);f.then(y,y)}})}function Gt(i,r){var l=r.deletions;if(l!==null)for(var f=0;f<l.length;f++){var y=l[f],b=i,C=r,P=C;e:for(;P!==null;){switch(P.tag){case 27:if(Ji(P.type)){ct=P.stateNode,Vt=!1;break e}break;case 5:ct=P.stateNode,Vt=!1;break e;case 3:case 4:ct=P.stateNode.containerInfo,Vt=!0;break e}P=P.return}if(ct===null)throw Error(a(160));_y(b,C,y),ct=null,Vt=!1,b=y.alternate,b!==null&&(b.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Ly(r,i),r=r.sibling}var Tn=null;function Ly(i,r){var l=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Gt(r,i),Wt(i),f&4&&(Fi(3,i,i.return),Oo(3,i),Fi(5,i,i.return));break;case 1:Gt(r,i),Wt(i),f&512&&(bt||l===null||qn(l,l.return)),f&64&&pi&&(i=i.updateQueue,i!==null&&(f=i.callbacks,f!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?f:l.concat(f))));break;case 26:var y=Tn;if(Gt(r,i),Wt(i),f&512&&(bt||l===null||qn(l,l.return)),f&4){var b=l!==null?l.memoizedState:null;if(f=i.memoizedState,l===null)if(f===null)if(i.stateNode===null){e:{f=i.type,l=i.memoizedProps,y=y.ownerDocument||y;t:switch(f){case"title":b=y.getElementsByTagName("title")[0],(!b||b[pr]||b[jt]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=y.createElement(f),y.head.insertBefore(b,y.querySelector("head > title"))),Dt(b,f,l),b[jt]=i,gt(b),f=b;break e;case"link":var C=Lx("link","href",y).get(f+(l.href||""));if(C){for(var P=0;P<C.length;P++)if(b=C[P],b.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&b.getAttribute("rel")===(l.rel==null?null:l.rel)&&b.getAttribute("title")===(l.title==null?null:l.title)&&b.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){C.splice(P,1);break t}}b=y.createElement(f),Dt(b,f,l),y.head.appendChild(b);break;case"meta":if(C=Lx("meta","content",y).get(f+(l.content||""))){for(P=0;P<C.length;P++)if(b=C[P],b.getAttribute("content")===(l.content==null?null:""+l.content)&&b.getAttribute("name")===(l.name==null?null:l.name)&&b.getAttribute("property")===(l.property==null?null:l.property)&&b.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&b.getAttribute("charset")===(l.charSet==null?null:l.charSet)){C.splice(P,1);break t}}b=y.createElement(f),Dt(b,f,l),y.head.appendChild(b);break;default:throw Error(a(468,f))}b[jt]=i,gt(b),f=b}i.stateNode=f}else zx(y,i.type,i.stateNode);else i.stateNode=Ix(y,f,i.memoizedProps);else b!==f?(b===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):b.count--,f===null?zx(y,i.type,i.stateNode):Ix(y,f,i.memoizedProps)):f===null&&i.stateNode!==null&&Jd(i,i.memoizedProps,l.memoizedProps)}break;case 27:Gt(r,i),Wt(i),f&512&&(bt||l===null||qn(l,l.return)),l!==null&&f&4&&Jd(i,i.memoizedProps,l.memoizedProps);break;case 5:if(Gt(r,i),Wt(i),f&512&&(bt||l===null||qn(l,l.return)),i.flags&32){y=i.stateNode;try{ta(y,"")}catch(ve){Je(i,i.return,ve)}}f&4&&i.stateNode!=null&&(y=i.memoizedProps,Jd(i,y,l!==null?l.memoizedProps:y)),f&1024&&(ef=!0);break;case 6:if(Gt(r,i),Wt(i),f&4){if(i.stateNode===null)throw Error(a(162));f=i.memoizedProps,l=i.stateNode;try{l.nodeValue=f}catch(ve){Je(i,i.return,ve)}}break;case 3:if(tc=null,y=Tn,Tn=Kl(r.containerInfo),Gt(r,i),Tn=y,Wt(i),f&4&&l!==null&&l.memoizedState.isDehydrated)try{Oa(r.containerInfo)}catch(ve){Je(i,i.return,ve)}ef&&(ef=!1,zy(i));break;case 4:f=Tn,Tn=Kl(i.stateNode.containerInfo),Gt(r,i),Wt(i),Tn=f;break;case 12:Gt(r,i),Wt(i);break;case 31:Gt(r,i),Wt(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Pl(i,f)));break;case 13:Gt(r,i),Wt(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Hl=Nt()),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Pl(i,f)));break;case 22:y=i.memoizedState!==null;var Y=l!==null&&l.memoizedState!==null,ee=pi,se=bt;if(pi=ee||y,bt=se||Y,Gt(r,i),bt=se,pi=ee,Wt(i),f&8192)e:for(r=i.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(l===null||Y||pi||bt||Dr(i)),l=null,r=i;;){if(r.tag===5||r.tag===26){if(l===null){Y=l=r;try{if(b=Y.stateNode,y)C=b.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{P=Y.stateNode;var ce=Y.memoizedProps.style,ne=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;P.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(ve){Je(Y,Y.return,ve)}}}else if(r.tag===6){if(l===null){Y=r;try{Y.stateNode.nodeValue=y?"":Y.memoizedProps}catch(ve){Je(Y,Y.return,ve)}}}else if(r.tag===18){if(l===null){Y=r;try{var ae=Y.stateNode;y?kx(ae,!0):kx(Y.stateNode,!1)}catch(ve){Je(Y,Y.return,ve)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}f&4&&(f=i.updateQueue,f!==null&&(l=f.retryQueue,l!==null&&(f.retryQueue=null,Pl(i,l))));break;case 19:Gt(r,i),Wt(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Pl(i,f)));break;case 30:break;case 21:break;default:Gt(r,i),Wt(i)}}function Wt(i){var r=i.flags;if(r&2){try{for(var l,f=i.return;f!==null;){if(Ay(f)){l=f;break}f=f.return}if(l==null)throw Error(a(160));switch(l.tag){case 27:var y=l.stateNode,b=Zd(i);Bl(i,b,y);break;case 5:var C=l.stateNode;l.flags&32&&(ta(C,""),l.flags&=-33);var P=Zd(i);Bl(i,P,C);break;case 3:case 4:var Y=l.stateNode.containerInfo,ee=Zd(i);Kd(i,ee,Y);break;default:throw Error(a(161))}}catch(se){Je(i,i.return,se)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function zy(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;zy(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function gi(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Dy(i,r.alternate,r),r=r.sibling}function Dr(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:Fi(4,r,r.return),Dr(r);break;case 1:qn(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&ky(r,r.return,l),Dr(r);break;case 27:qo(r.stateNode);case 26:case 5:qn(r,r.return),Dr(r);break;case 22:r.memoizedState===null&&Dr(r);break;case 30:Dr(r);break;default:Dr(r)}i=i.sibling}}function yi(i,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var f=r.alternate,y=i,b=r,C=b.flags;switch(b.tag){case 0:case 11:case 15:yi(y,b,l),Oo(4,b);break;case 1:if(yi(y,b,l),f=b,y=f.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(ee){Je(f,f.return,ee)}if(f=b,y=f.updateQueue,y!==null){var P=f.stateNode;try{var Y=y.shared.hiddenCallbacks;if(Y!==null)for(y.shared.hiddenCallbacks=null,y=0;y<Y.length;y++)pg(Y[y],P)}catch(ee){Je(f,f.return,ee)}}l&&C&64&&Ey(b),_o(b,b.return);break;case 27:Ty(b);case 26:case 5:yi(y,b,l),l&&f===null&&C&4&&Cy(b),_o(b,b.return);break;case 12:yi(y,b,l);break;case 31:yi(y,b,l),l&&C&4&&Ry(y,b);break;case 13:yi(y,b,l),l&&C&4&&Iy(y,b);break;case 22:b.memoizedState===null&&yi(y,b,l),_o(b,b.return);break;case 30:break;default:yi(y,b,l)}r=r.sibling}}function tf(i,r){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&vo(l))}function nf(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&vo(i))}function Mn(i,r,l,f){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)By(i,r,l,f),r=r.sibling}function By(i,r,l,f){var y=r.flags;switch(r.tag){case 0:case 11:case 15:Mn(i,r,l,f),y&2048&&Oo(9,r);break;case 1:Mn(i,r,l,f);break;case 3:Mn(i,r,l,f),y&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&vo(i)));break;case 12:if(y&2048){Mn(i,r,l,f),i=r.stateNode;try{var b=r.memoizedProps,C=b.id,P=b.onPostCommit;typeof P=="function"&&P(C,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(Y){Je(r,r.return,Y)}}else Mn(i,r,l,f);break;case 31:Mn(i,r,l,f);break;case 13:Mn(i,r,l,f);break;case 23:break;case 22:b=r.stateNode,C=r.alternate,r.memoizedState!==null?b._visibility&2?Mn(i,r,l,f):Ro(i,r):b._visibility&2?Mn(i,r,l,f):(b._visibility|=2,wa(i,r,l,f,(r.subtreeFlags&10256)!==0||!1)),y&2048&&tf(C,r);break;case 24:Mn(i,r,l,f),y&2048&&nf(r.alternate,r);break;default:Mn(i,r,l,f)}}function wa(i,r,l,f,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var b=i,C=r,P=l,Y=f,ee=C.flags;switch(C.tag){case 0:case 11:case 15:wa(b,C,P,Y,y),Oo(8,C);break;case 23:break;case 22:var se=C.stateNode;C.memoizedState!==null?se._visibility&2?wa(b,C,P,Y,y):Ro(b,C):(se._visibility|=2,wa(b,C,P,Y,y)),y&&ee&2048&&tf(C.alternate,C);break;case 24:wa(b,C,P,Y,y),y&&ee&2048&&nf(C.alternate,C);break;default:wa(b,C,P,Y,y)}r=r.sibling}}function Ro(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=i,f=r,y=f.flags;switch(f.tag){case 22:Ro(l,f),y&2048&&tf(f.alternate,f);break;case 24:Ro(l,f),y&2048&&nf(f.alternate,f);break;default:Ro(l,f)}r=r.sibling}}var Io=8192;function Sa(i,r,l){if(i.subtreeFlags&Io)for(i=i.child;i!==null;)Py(i,r,l),i=i.sibling}function Py(i,r,l){switch(i.tag){case 26:Sa(i,r,l),i.flags&Io&&i.memoizedState!==null&&Qj(l,Tn,i.memoizedState,i.memoizedProps);break;case 5:Sa(i,r,l);break;case 3:case 4:var f=Tn;Tn=Kl(i.stateNode.containerInfo),Sa(i,r,l),Tn=f;break;case 22:i.memoizedState===null&&(f=i.alternate,f!==null&&f.memoizedState!==null?(f=Io,Io=16777216,Sa(i,r,l),Io=f):Sa(i,r,l));break;default:Sa(i,r,l)}}function $y(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function Lo(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var f=r[l];kt=f,qy(f,i)}$y(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Hy(i),i=i.sibling}function Hy(i){switch(i.tag){case 0:case 11:case 15:Lo(i),i.flags&2048&&Fi(9,i,i.return);break;case 3:Lo(i);break;case 12:Lo(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,$l(i)):Lo(i);break;default:Lo(i)}}function $l(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var f=r[l];kt=f,qy(f,i)}$y(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:Fi(8,r,r.return),$l(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,$l(r));break;default:$l(r)}i=i.sibling}}function qy(i,r){for(;kt!==null;){var l=kt;switch(l.tag){case 0:case 11:case 15:Fi(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var f=l.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:vo(l.memoizedState.cache)}if(f=l.child,f!==null)f.return=l,kt=f;else e:for(l=i;kt!==null;){f=kt;var y=f.sibling,b=f.return;if(Oy(f),f===l){kt=null;break e}if(y!==null){y.return=b,kt=y;break e}kt=b}}}var dj={getCacheForType:function(i){var r=Tt(yt),l=r.data.get(i);return l===void 0&&(l=i(),r.data.set(i,l)),l},cacheSignal:function(){return Tt(yt).controller.signal}},fj=typeof WeakMap=="function"?WeakMap:Map,Ye=0,tt=null,_e=null,Le=0,Qe=0,on=null,Vi=!1,Na=!1,rf=!1,xi=0,ft=0,Gi=0,Or=0,af=0,sn=0,ja=0,zo=null,Yt=null,of=!1,Hl=0,Uy=0,ql=1/0,Ul=null,Wi=null,Et=0,Yi=null,Ea=null,vi=0,sf=0,lf=null,Fy=null,Bo=0,cf=null;function ln(){return(Ye&2)!==0&&Le!==0?Le&-Le:I.T!==null?mf():Ws()}function Vy(){if(sn===0)if((Le&536870912)===0||Pe){var i=Yr;Yr<<=1,(Yr&3932160)===0&&(Yr=262144),sn=i}else sn=536870912;return i=rn.current,i!==null&&(i.flags|=32),sn}function Xt(i,r,l){(i===tt&&(Qe===2||Qe===9)||i.cancelPendingCommit!==null)&&(ka(i,0),Xi(i,Le,sn,!1)),hr(i,l),((Ye&2)===0||i!==tt)&&(i===tt&&((Ye&2)===0&&(Or|=l),ft===4&&Xi(i,Le,sn,!1)),Un(i))}function Gy(i,r,l){if((Ye&6)!==0)throw Error(a(327));var f=!l&&(r&127)===0&&(r&i.expiredLanes)===0||fr(i,r),y=f?mj(i,r):df(i,r,!0),b=f;do{if(y===0){Na&&!f&&Xi(i,r,0,!1);break}else{if(l=i.current.alternate,b&&!hj(l)){y=df(i,r,!1),b=!1;continue}if(y===2){if(b=r,i.errorRecoveryDisabledLanes&b)var C=0;else C=i.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){r=C;e:{var P=i;y=zo;var Y=P.current.memoizedState.isDehydrated;if(Y&&(ka(P,C).flags|=256),C=df(P,C,!1),C!==2){if(rf&&!Y){P.errorRecoveryDisabledLanes|=b,Or|=b,y=4;break e}b=Yt,Yt=y,b!==null&&(Yt===null?Yt=b:Yt.push.apply(Yt,b))}y=C}if(b=!1,y!==2)continue}}if(y===1){ka(i,0),Xi(i,r,0,!0);break}e:{switch(f=i,b=y,b){case 0:case 1:throw Error(a(345));case 4:if((r&4194048)!==r)break;case 6:Xi(f,r,sn,!Vi);break e;case 2:Yt=null;break;case 3:case 5:break;default:throw Error(a(329))}if((r&62914560)===r&&(y=Hl+300-Nt(),10<y)){if(Xi(f,r,sn,!Vi),Qr(f,0,!0)!==0)break e;vi=r,f.timeoutHandle=Nx(Wy.bind(null,f,l,Yt,Ul,of,r,sn,Or,ja,Vi,b,"Throttled",-0,0),y);break e}Wy(f,l,Yt,Ul,of,r,sn,Or,ja,Vi,b,null,-0,0)}}break}while(!0);Un(i)}function Wy(i,r,l,f,y,b,C,P,Y,ee,se,ce,ne,ae){if(i.timeoutHandle=-1,ce=r.subtreeFlags,ce&8192||(ce&16785408)===16785408){ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ri},Py(r,b,ce);var ve=(b&62914560)===b?Hl-Nt():(b&4194048)===b?Uy-Nt():0;if(ve=Jj(ce,ve),ve!==null){vi=b,i.cancelPendingCommit=ve(tx.bind(null,i,r,b,l,f,y,C,P,Y,se,ce,null,ne,ae)),Xi(i,b,C,!ee);return}}tx(i,r,b,l,f,y,C,P,Y)}function hj(i){for(var r=i;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var f=0;f<l.length;f++){var y=l[f],b=y.getSnapshot;y=y.value;try{if(!tn(b(),y))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Xi(i,r,l,f){r&=~af,r&=~Or,i.suspendedLanes|=r,i.pingedLanes&=~r,f&&(i.warmLanes|=r),f=i.expirationTimes;for(var y=r;0<y;){var b=31-Xe(y),C=1<<b;f[b]=-1,y&=~C}l!==0&&Fs(i,l,r)}function Fl(){return(Ye&6)===0?(Po(0),!1):!0}function uf(){if(_e!==null){if(Qe===0)var i=_e.return;else i=_e,li=Nr=null,Ed(i),ga=null,wo=0,i=_e;for(;i!==null;)jy(i.alternate,i),i=i.return;_e=null}}function ka(i,r){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,_j(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),vi=0,uf(),tt=i,_e=l=oi(i.current,null),Le=r,Qe=0,on=null,Vi=!1,Na=fr(i,r),rf=!1,ja=sn=af=Or=Gi=ft=0,Yt=zo=null,of=!1,(r&8)!==0&&(r|=r&32);var f=i.entangledLanes;if(f!==0)for(i=i.entanglements,f&=r;0<f;){var y=31-Xe(f),b=1<<y;r|=i[y],f&=~b}return xi=r,dl(),l}function Yy(i,r){Te=null,I.H=To,r===ma||r===vl?(r=ug(),Qe=3):r===hd?(r=ug(),Qe=4):Qe=r===Hd?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,on=r,_e===null&&(ft=1,_l(i,gn(r,i.current)))}function Xy(){var i=rn.current;return i===null?!0:(Le&4194048)===Le?bn===null:(Le&62914560)===Le||(Le&536870912)!==0?i===bn:!1}function Qy(){var i=I.H;return I.H=To,i===null?To:i}function Jy(){var i=I.A;return I.A=dj,i}function Vl(){ft=4,Vi||(Le&4194048)!==Le&&rn.current!==null||(Na=!0),(Gi&134217727)===0&&(Or&134217727)===0||tt===null||Xi(tt,Le,sn,!1)}function df(i,r,l){var f=Ye;Ye|=2;var y=Qy(),b=Jy();(tt!==i||Le!==r)&&(Ul=null,ka(i,r)),r=!1;var C=ft;e:do try{if(Qe!==0&&_e!==null){var P=_e,Y=on;switch(Qe){case 8:uf(),C=6;break e;case 3:case 2:case 9:case 6:rn.current===null&&(r=!0);var ee=Qe;if(Qe=0,on=null,Ca(i,P,Y,ee),l&&Na){C=0;break e}break;default:ee=Qe,Qe=0,on=null,Ca(i,P,Y,ee)}}pj(),C=ft;break}catch(se){Yy(i,se)}while(!0);return r&&i.shellSuspendCounter++,li=Nr=null,Ye=f,I.H=y,I.A=b,_e===null&&(tt=null,Le=0,dl()),C}function pj(){for(;_e!==null;)Zy(_e)}function mj(i,r){var l=Ye;Ye|=2;var f=Qy(),y=Jy();tt!==i||Le!==r?(Ul=null,ql=Nt()+500,ka(i,r)):Na=fr(i,r);e:do try{if(Qe!==0&&_e!==null){r=_e;var b=on;t:switch(Qe){case 1:Qe=0,on=null,Ca(i,r,b,1);break;case 2:case 9:if(lg(b)){Qe=0,on=null,Ky(r);break}r=function(){Qe!==2&&Qe!==9||tt!==i||(Qe=7),Un(i)},b.then(r,r);break e;case 3:Qe=7;break e;case 4:Qe=5;break e;case 7:lg(b)?(Qe=0,on=null,Ky(r)):(Qe=0,on=null,Ca(i,r,b,7));break;case 5:var C=null;switch(_e.tag){case 26:C=_e.memoizedState;case 5:case 27:var P=_e;if(C?Bx(C):P.stateNode.complete){Qe=0,on=null;var Y=P.sibling;if(Y!==null)_e=Y;else{var ee=P.return;ee!==null?(_e=ee,Gl(ee)):_e=null}break t}}Qe=0,on=null,Ca(i,r,b,5);break;case 6:Qe=0,on=null,Ca(i,r,b,6);break;case 8:uf(),ft=6;break e;default:throw Error(a(462))}}gj();break}catch(se){Yy(i,se)}while(!0);return li=Nr=null,I.H=f,I.A=y,Ye=l,_e!==null?0:(tt=null,Le=0,dl(),ft)}function gj(){for(;_e!==null&&!Zn();)Zy(_e)}function Zy(i){var r=Sy(i.alternate,i,xi);i.memoizedProps=i.pendingProps,r===null?Gl(i):_e=r}function Ky(i){var r=i,l=r.alternate;switch(r.tag){case 15:case 0:r=gy(l,r,r.pendingProps,r.type,void 0,Le);break;case 11:r=gy(l,r,r.pendingProps,r.type.render,r.ref,Le);break;case 5:Ed(r);default:jy(l,r),r=_e=Jm(r,xi),r=Sy(l,r,xi)}i.memoizedProps=i.pendingProps,r===null?Gl(i):_e=r}function Ca(i,r,l,f){li=Nr=null,Ed(r),ga=null,wo=0;var y=r.return;try{if(rj(i,y,r,l,Le)){ft=1,_l(i,gn(l,i.current)),_e=null;return}}catch(b){if(y!==null)throw _e=y,b;ft=1,_l(i,gn(l,i.current)),_e=null;return}r.flags&32768?(Pe||f===1?i=!0:Na||(Le&536870912)!==0?i=!1:(Vi=i=!0,(f===2||f===9||f===3||f===6)&&(f=rn.current,f!==null&&f.tag===13&&(f.flags|=16384))),ex(r,i)):Gl(r)}function Gl(i){var r=i;do{if((r.flags&32768)!==0){ex(r,Vi);return}i=r.return;var l=sj(r.alternate,r,xi);if(l!==null){_e=l;return}if(r=r.sibling,r!==null){_e=r;return}_e=r=i}while(r!==null);ft===0&&(ft=5)}function ex(i,r){do{var l=lj(i.alternate,i);if(l!==null){l.flags&=32767,_e=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(i=i.sibling,i!==null)){_e=i;return}_e=i=l}while(i!==null);ft=6,_e=null}function tx(i,r,l,f,y,b,C,P,Y){i.cancelPendingCommit=null;do Wl();while(Et!==0);if((Ye&6)!==0)throw Error(a(327));if(r!==null){if(r===i.current)throw Error(a(177));if(b=r.lanes|r.childLanes,b|=Zu,Au(i,l,b,C,P,Y),i===tt&&(_e=tt=null,Le=0),Ea=r,Yi=i,vi=l,sf=b,lf=y,Fy=f,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,bj(Ee,function(){return ox(),null})):(i.callbackNode=null,i.callbackPriority=0),f=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||f){f=I.T,I.T=null,y=V.p,V.p=2,C=Ye,Ye|=4;try{cj(i,r,l)}finally{Ye=C,V.p=y,I.T=f}}Et=1,nx(),ix(),rx()}}function nx(){if(Et===1){Et=0;var i=Yi,r=Ea,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=I.T,I.T=null;var f=V.p;V.p=2;var y=Ye;Ye|=4;try{Ly(r,i);var b=Nf,C=qm(i.containerInfo),P=b.focusedElem,Y=b.selectionRange;if(C!==P&&P&&P.ownerDocument&&Hm(P.ownerDocument.documentElement,P)){if(Y!==null&&Wu(P)){var ee=Y.start,se=Y.end;if(se===void 0&&(se=ee),"selectionStart"in P)P.selectionStart=ee,P.selectionEnd=Math.min(se,P.value.length);else{var ce=P.ownerDocument||document,ne=ce&&ce.defaultView||window;if(ne.getSelection){var ae=ne.getSelection(),ve=P.textContent.length,ke=Math.min(Y.start,ve),et=Y.end===void 0?ke:Math.min(Y.end,ve);!ae.extend&&ke>et&&(C=et,et=ke,ke=C);var Z=$m(P,ke),X=$m(P,et);if(Z&&X&&(ae.rangeCount!==1||ae.anchorNode!==Z.node||ae.anchorOffset!==Z.offset||ae.focusNode!==X.node||ae.focusOffset!==X.offset)){var K=ce.createRange();K.setStart(Z.node,Z.offset),ae.removeAllRanges(),ke>et?(ae.addRange(K),ae.extend(X.node,X.offset)):(K.setEnd(X.node,X.offset),ae.addRange(K))}}}}for(ce=[],ae=P;ae=ae.parentNode;)ae.nodeType===1&&ce.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof P.focus=="function"&&P.focus(),P=0;P<ce.length;P++){var le=ce[P];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}ac=!!Sf,Nf=Sf=null}finally{Ye=y,V.p=f,I.T=l}}i.current=r,Et=2}}function ix(){if(Et===2){Et=0;var i=Yi,r=Ea,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=I.T,I.T=null;var f=V.p;V.p=2;var y=Ye;Ye|=4;try{Dy(i,r.alternate,r)}finally{Ye=y,V.p=f,I.T=l}}Et=3}}function rx(){if(Et===4||Et===3){Et=0,Kn();var i=Yi,r=Ea,l=vi,f=Fy;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Et=5:(Et=0,Ea=Yi=null,ax(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(Wi=null),io(l),r=r.stateNode,ht&&typeof ht.onCommitFiberRoot=="function")try{ht.onCommitFiberRoot(Ct,r,void 0,(r.current.flags&128)===128)}catch{}if(f!==null){r=I.T,y=V.p,V.p=2,I.T=null;try{for(var b=i.onRecoverableError,C=0;C<f.length;C++){var P=f[C];b(P.value,{componentStack:P.stack})}}finally{I.T=r,V.p=y}}(vi&3)!==0&&Wl(),Un(i),y=i.pendingLanes,(l&261930)!==0&&(y&42)!==0?i===cf?Bo++:(Bo=0,cf=i):Bo=0,Po(0)}}function ax(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,vo(r)))}function Wl(){return nx(),ix(),rx(),ox()}function ox(){if(Et!==5)return!1;var i=Yi,r=sf;sf=0;var l=io(vi),f=I.T,y=V.p;try{V.p=32>l?32:l,I.T=null,l=lf,lf=null;var b=Yi,C=vi;if(Et=0,Ea=Yi=null,vi=0,(Ye&6)!==0)throw Error(a(331));var P=Ye;if(Ye|=4,Hy(b.current),By(b,b.current,C,l),Ye=P,Po(0,!1),ht&&typeof ht.onPostCommitFiberRoot=="function")try{ht.onPostCommitFiberRoot(Ct,b)}catch{}return!0}finally{V.p=y,I.T=f,ax(i,r)}}function sx(i,r,l){r=gn(l,r),r=$d(i.stateNode,r,2),i=Hi(i,r,2),i!==null&&(hr(i,2),Un(i))}function Je(i,r,l){if(i.tag===3)sx(i,i,l);else for(;r!==null;){if(r.tag===3){sx(r,i,l);break}else if(r.tag===1){var f=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Wi===null||!Wi.has(f))){i=gn(l,i),l=ly(2),f=Hi(r,l,2),f!==null&&(cy(l,f,r,i),hr(f,2),Un(f));break}}r=r.return}}function ff(i,r,l){var f=i.pingCache;if(f===null){f=i.pingCache=new fj;var y=new Set;f.set(r,y)}else y=f.get(r),y===void 0&&(y=new Set,f.set(r,y));y.has(l)||(rf=!0,y.add(l),i=yj.bind(null,i,r,l),r.then(i,i))}function yj(i,r,l){var f=i.pingCache;f!==null&&f.delete(r),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,tt===i&&(Le&l)===l&&(ft===4||ft===3&&(Le&62914560)===Le&&300>Nt()-Hl?(Ye&2)===0&&ka(i,0):af|=l,ja===Le&&(ja=0)),Un(i)}function lx(i,r){r===0&&(r=Us()),i=br(i,r),i!==null&&(hr(i,r),Un(i))}function xj(i){var r=i.memoizedState,l=0;r!==null&&(l=r.retryLane),lx(i,l)}function vj(i,r){var l=0;switch(i.tag){case 31:case 13:var f=i.stateNode,y=i.memoizedState;y!==null&&(l=y.retryLane);break;case 19:f=i.stateNode;break;case 22:f=i.stateNode._retryCache;break;default:throw Error(a(314))}f!==null&&f.delete(r),lx(i,l)}function bj(i,r){return Ht(i,r)}var Yl=null,Aa=null,hf=!1,Xl=!1,pf=!1,Qi=0;function Un(i){i!==Aa&&i.next===null&&(Aa===null?Yl=Aa=i:Aa=Aa.next=i),Xl=!0,hf||(hf=!0,Sj())}function Po(i,r){if(!pf&&Xl){pf=!0;do for(var l=!1,f=Yl;f!==null;){if(i!==0){var y=f.pendingLanes;if(y===0)var b=0;else{var C=f.suspendedLanes,P=f.pingedLanes;b=(1<<31-Xe(42|i)+1)-1,b&=y&~(C&~P),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(l=!0,fx(f,b))}else b=Le,b=Qr(f,f===tt?b:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(b&3)===0||fr(f,b)||(l=!0,fx(f,b));f=f.next}while(l);pf=!1}}function wj(){cx()}function cx(){Xl=hf=!1;var i=0;Qi!==0&&Oj()&&(i=Qi);for(var r=Nt(),l=null,f=Yl;f!==null;){var y=f.next,b=ux(f,r);b===0?(f.next=null,l===null?Yl=y:l.next=y,y===null&&(Aa=l)):(l=f,(i!==0||(b&3)!==0)&&(Xl=!0)),f=y}Et!==0&&Et!==5||Po(i),Qi!==0&&(Qi=0)}function ux(i,r){for(var l=i.suspendedLanes,f=i.pingedLanes,y=i.expirationTimes,b=i.pendingLanes&-62914561;0<b;){var C=31-Xe(b),P=1<<C,Y=y[C];Y===-1?((P&l)===0||(P&f)!==0)&&(y[C]=Cu(P,r)):Y<=r&&(i.expiredLanes|=P),b&=~P}if(r=tt,l=Le,l=Qr(i,i===r?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f=i.callbackNode,l===0||i===r&&(Qe===2||Qe===9)||i.cancelPendingCommit!==null)return f!==null&&f!==null&&En(f),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||fr(i,l)){if(r=l&-l,r===i.callbackPriority)return r;switch(f!==null&&En(f),io(l)){case 2:case 8:l=pe;break;case 32:l=Ee;break;case 268435456:l=He;break;default:l=Ee}return f=dx.bind(null,i),l=Ht(l,f),i.callbackPriority=r,i.callbackNode=l,r}return f!==null&&f!==null&&En(f),i.callbackPriority=2,i.callbackNode=null,2}function dx(i,r){if(Et!==0&&Et!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(Wl()&&i.callbackNode!==l)return null;var f=Le;return f=Qr(i,i===tt?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f===0?null:(Gy(i,f,r),ux(i,Nt()),i.callbackNode!=null&&i.callbackNode===l?dx.bind(null,i):null)}function fx(i,r){if(Wl())return null;Gy(i,r,!0)}function Sj(){Rj(function(){(Ye&6)!==0?Ht(oe,wj):cx()})}function mf(){if(Qi===0){var i=ha;i===0&&(i=Wr,Wr<<=1,(Wr&261888)===0&&(Wr=256)),Qi=i}return Qi}function hx(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:il(""+i)}function px(i,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,i.id&&l.setAttribute("form",i.id),r.parentNode.insertBefore(l,r),i=new FormData(i),l.parentNode.removeChild(l),i}function Nj(i,r,l,f,y){if(r==="submit"&&l&&l.stateNode===y){var b=hx((y[Rt]||null).action),C=f.submitter;C&&(r=(r=C[Rt]||null)?hx(r.formAction):C.getAttribute("formAction"),r!==null&&(b=r,C=null));var P=new sl("action","action",null,f,y);i.push({event:P,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Qi!==0){var Y=C?px(y,C):new FormData(y);Rd(l,{pending:!0,data:Y,method:y.method,action:b},null,Y)}}else typeof b=="function"&&(P.preventDefault(),Y=C?px(y,C):new FormData(y),Rd(l,{pending:!0,data:Y,method:y.method,action:b},b,Y))},currentTarget:y}]})}}for(var gf=0;gf<Ju.length;gf++){var yf=Ju[gf],jj=yf.toLowerCase(),Ej=yf[0].toUpperCase()+yf.slice(1);An(jj,"on"+Ej)}An(Vm,"onAnimationEnd"),An(Gm,"onAnimationIteration"),An(Wm,"onAnimationStart"),An("dblclick","onDoubleClick"),An("focusin","onFocus"),An("focusout","onBlur"),An(HN,"onTransitionRun"),An(qN,"onTransitionStart"),An(UN,"onTransitionCancel"),An(Ym,"onTransitionEnd"),_i("onMouseEnter",["mouseout","mouseover"]),_i("onMouseLeave",["mouseout","mouseover"]),_i("onPointerEnter",["pointerout","pointerover"]),_i("onPointerLeave",["pointerout","pointerover"]),ni("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ni("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ni("onBeforeInput",["compositionend","keypress","textInput","paste"]),ni("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ni("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ni("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $o="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kj=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($o));function mx(i,r){r=(r&4)!==0;for(var l=0;l<i.length;l++){var f=i[l],y=f.event;f=f.listeners;e:{var b=void 0;if(r)for(var C=f.length-1;0<=C;C--){var P=f[C],Y=P.instance,ee=P.currentTarget;if(P=P.listener,Y!==b&&y.isPropagationStopped())break e;b=P,y.currentTarget=ee;try{b(y)}catch(se){ul(se)}y.currentTarget=null,b=Y}else for(C=0;C<f.length;C++){if(P=f[C],Y=P.instance,ee=P.currentTarget,P=P.listener,Y!==b&&y.isPropagationStopped())break e;b=P,y.currentTarget=ee;try{b(y)}catch(se){ul(se)}y.currentTarget=null,b=Y}}}}function Re(i,r){var l=r[Jr];l===void 0&&(l=r[Jr]=new Set);var f=i+"__bubble";l.has(f)||(gx(r,i,2,!1),l.add(f))}function xf(i,r,l){var f=0;r&&(f|=4),gx(l,i,f,r)}var Ql="_reactListening"+Math.random().toString(36).slice(2);function vf(i){if(!i[Ql]){i[Ql]=!0,Js.forEach(function(l){l!=="selectionchange"&&(kj.has(l)||xf(l,!1,i),xf(l,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[Ql]||(r[Ql]=!0,xf("selectionchange",!1,r))}}function gx(i,r,l,f){switch(Vx(r)){case 2:var y=eE;break;case 8:y=tE;break;default:y=Rf}l=y.bind(null,r,l,i),y=void 0,!Bu||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),f?y!==void 0?i.addEventListener(r,l,{capture:!0,passive:y}):i.addEventListener(r,l,!0):y!==void 0?i.addEventListener(r,l,{passive:y}):i.addEventListener(r,l,!1)}function bf(i,r,l,f,y){var b=f;if((r&1)===0&&(r&2)===0&&f!==null)e:for(;;){if(f===null)return;var C=f.tag;if(C===3||C===4){var P=f.stateNode.containerInfo;if(P===y)break;if(C===4)for(C=f.return;C!==null;){var Y=C.tag;if((Y===3||Y===4)&&C.stateNode.containerInfo===y)return;C=C.return}for(;P!==null;){if(C=Ti(P),C===null)return;if(Y=C.tag,Y===5||Y===6||Y===26||Y===27){f=b=C;continue e}P=P.parentNode}}f=f.return}wm(function(){var ee=b,se=Lu(l),ce=[];e:{var ne=Xm.get(i);if(ne!==void 0){var ae=sl,ve=i;switch(i){case"keypress":if(al(l)===0)break e;case"keydown":case"keyup":ae=vN;break;case"focusin":ve="focus",ae=qu;break;case"focusout":ve="blur",ae=qu;break;case"beforeblur":case"afterblur":ae=qu;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=jm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=sN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=SN;break;case Vm:case Gm:case Wm:ae=uN;break;case Ym:ae=jN;break;case"scroll":case"scrollend":ae=aN;break;case"wheel":ae=kN;break;case"copy":case"cut":case"paste":ae=fN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=km;break;case"toggle":case"beforetoggle":ae=AN}var ke=(r&4)!==0,et=!ke&&(i==="scroll"||i==="scrollend"),Z=ke?ne!==null?ne+"Capture":null:ne;ke=[];for(var X=ee,K;X!==null;){var le=X;if(K=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||K===null||Z===null||(le=so(X,Z),le!=null&&ke.push(Ho(X,le,K))),et)break;X=X.return}0<ke.length&&(ne=new ae(ne,ve,null,l,se),ce.push({event:ne,listeners:ke}))}}if((r&7)===0){e:{if(ne=i==="mouseover"||i==="pointerover",ae=i==="mouseout"||i==="pointerout",ne&&l!==Iu&&(ve=l.relatedTarget||l.fromElement)&&(Ti(ve)||ve[ti]))break e;if((ae||ne)&&(ne=se.window===se?se:(ne=se.ownerDocument)?ne.defaultView||ne.parentWindow:window,ae?(ve=l.relatedTarget||l.toElement,ae=ee,ve=ve?Ti(ve):null,ve!==null&&(et=s(ve),ke=ve.tag,ve!==et||ke!==5&&ke!==27&&ke!==6)&&(ve=null)):(ae=null,ve=ee),ae!==ve)){if(ke=jm,le="onMouseLeave",Z="onMouseEnter",X="mouse",(i==="pointerout"||i==="pointerover")&&(ke=km,le="onPointerLeave",Z="onPointerEnter",X="pointer"),et=ae==null?ne:Di(ae),K=ve==null?ne:Di(ve),ne=new ke(le,X+"leave",ae,l,se),ne.target=et,ne.relatedTarget=K,le=null,Ti(se)===ee&&(ke=new ke(Z,X+"enter",ve,l,se),ke.target=K,ke.relatedTarget=et,le=ke),et=le,ae&&ve)t:{for(ke=Cj,Z=ae,X=ve,K=0,le=Z;le;le=ke(le))K++;le=0;for(var Se=X;Se;Se=ke(Se))le++;for(;0<K-le;)Z=ke(Z),K--;for(;0<le-K;)X=ke(X),le--;for(;K--;){if(Z===X||X!==null&&Z===X.alternate){ke=Z;break t}Z=ke(Z),X=ke(X)}ke=null}else ke=null;ae!==null&&yx(ce,ne,ae,ke,!1),ve!==null&&et!==null&&yx(ce,et,ve,ke,!0)}}e:{if(ne=ee?Di(ee):window,ae=ne.nodeName&&ne.nodeName.toLowerCase(),ae==="select"||ae==="input"&&ne.type==="file")var Fe=Rm;else if(Om(ne))if(Im)Fe=BN;else{Fe=LN;var be=IN}else ae=ne.nodeName,!ae||ae.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?ee&&Ru(ee.elementType)&&(Fe=Rm):Fe=zN;if(Fe&&(Fe=Fe(i,ee))){_m(ce,Fe,l,se);break e}be&&be(i,ne,ee),i==="focusout"&&ee&&ne.type==="number"&&ee.memoizedProps.value!=null&&oo(ne,"number",ne.value)}switch(be=ee?Di(ee):window,i){case"focusin":(Om(be)||be.contentEditable==="true")&&(aa=be,Yu=ee,go=null);break;case"focusout":go=Yu=aa=null;break;case"mousedown":Xu=!0;break;case"contextmenu":case"mouseup":case"dragend":Xu=!1,Um(ce,l,se);break;case"selectionchange":if($N)break;case"keydown":case"keyup":Um(ce,l,se)}var Me;if(Fu)e:{switch(i){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else ra?Mm(i,l)&&(ze="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(ze="onCompositionStart");ze&&(Cm&&l.locale!=="ko"&&(ra||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&ra&&(Me=Sm()):(Ri=se,Pu="value"in Ri?Ri.value:Ri.textContent,ra=!0)),be=Jl(ee,ze),0<be.length&&(ze=new Em(ze,i,null,l,se),ce.push({event:ze,listeners:be}),Me?ze.data=Me:(Me=Dm(l),Me!==null&&(ze.data=Me)))),(Me=MN?DN(i,l):ON(i,l))&&(ze=Jl(ee,"onBeforeInput"),0<ze.length&&(be=new Em("onBeforeInput","beforeinput",null,l,se),ce.push({event:be,listeners:ze}),be.data=Me)),Nj(ce,i,ee,l,se)}mx(ce,r)})}function Ho(i,r,l){return{instance:i,listener:r,currentTarget:l}}function Jl(i,r){for(var l=r+"Capture",f=[];i!==null;){var y=i,b=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||b===null||(y=so(i,l),y!=null&&f.unshift(Ho(i,y,b)),y=so(i,r),y!=null&&f.push(Ho(i,y,b))),i.tag===3)return f;i=i.return}return[]}function Cj(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function yx(i,r,l,f,y){for(var b=r._reactName,C=[];l!==null&&l!==f;){var P=l,Y=P.alternate,ee=P.stateNode;if(P=P.tag,Y!==null&&Y===f)break;P!==5&&P!==26&&P!==27||ee===null||(Y=ee,y?(ee=so(l,b),ee!=null&&C.unshift(Ho(l,ee,Y))):y||(ee=so(l,b),ee!=null&&C.push(Ho(l,ee,Y)))),l=l.return}C.length!==0&&i.push({event:r,listeners:C})}var Aj=/\r\n?/g,Tj=/\u0000|\uFFFD/g;function xx(i){return(typeof i=="string"?i:""+i).replace(Aj,`
`).replace(Tj,"")}function vx(i,r){return r=xx(r),xx(i)===r}function Ke(i,r,l,f,y,b){switch(l){case"children":typeof f=="string"?r==="body"||r==="textarea"&&f===""||ta(i,f):(typeof f=="number"||typeof f=="bigint")&&r!=="body"&&ta(i,""+f);break;case"className":Kr(i,"class",f);break;case"tabIndex":Kr(i,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":Kr(i,l,f);break;case"style":vm(i,f,b);break;case"data":if(r!=="object"){Kr(i,"data",f);break}case"src":case"href":if(f===""&&(r!=="a"||l!=="href")){i.removeAttribute(l);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(l);break}f=il(""+f),i.setAttribute(l,f);break;case"action":case"formAction":if(typeof f=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(l==="formAction"?(r!=="input"&&Ke(i,r,"name",y.name,y,null),Ke(i,r,"formEncType",y.formEncType,y,null),Ke(i,r,"formMethod",y.formMethod,y,null),Ke(i,r,"formTarget",y.formTarget,y,null)):(Ke(i,r,"encType",y.encType,y,null),Ke(i,r,"method",y.method,y,null),Ke(i,r,"target",y.target,y,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(l);break}f=il(""+f),i.setAttribute(l,f);break;case"onClick":f!=null&&(i.onclick=ri);break;case"onScroll":f!=null&&Re("scroll",i);break;case"onScrollEnd":f!=null&&Re("scrollend",i);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(a(61));if(l=f.__html,l!=null){if(y.children!=null)throw Error(a(60));i.innerHTML=l}}break;case"multiple":i.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":i.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){i.removeAttribute("xlink:href");break}l=il(""+f),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(l,""+f):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":f===!0?i.setAttribute(l,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(l,f):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?i.setAttribute(l,f):i.removeAttribute(l);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?i.removeAttribute(l):i.setAttribute(l,f);break;case"popover":Re("beforetoggle",i),Re("toggle",i),Zr(i,"popover",f);break;case"xlinkActuate":Cn(i,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Cn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Cn(i,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Cn(i,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Cn(i,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Cn(i,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Cn(i,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Cn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Cn(i,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Zr(i,"is",f);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=iN.get(l)||l,Zr(i,l,f))}}function wf(i,r,l,f,y,b){switch(l){case"style":vm(i,f,b);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(a(61));if(l=f.__html,l!=null){if(y.children!=null)throw Error(a(60));i.innerHTML=l}}break;case"children":typeof f=="string"?ta(i,f):(typeof f=="number"||typeof f=="bigint")&&ta(i,""+f);break;case"onScroll":f!=null&&Re("scroll",i);break;case"onScrollEnd":f!=null&&Re("scrollend",i);break;case"onClick":f!=null&&(i.onclick=ri);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zs.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),r=l.slice(2,y?l.length-7:void 0),b=i[Rt]||null,b=b!=null?b[l]:null,typeof b=="function"&&i.removeEventListener(r,b,y),typeof f=="function")){typeof b!="function"&&b!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(r,f,y);break e}l in i?i[l]=f:f===!0?i.setAttribute(l,""):Zr(i,l,f)}}}function Dt(i,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Re("error",i),Re("load",i);var f=!1,y=!1,b;for(b in l)if(l.hasOwnProperty(b)){var C=l[b];if(C!=null)switch(b){case"src":f=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:Ke(i,r,b,C,l,null)}}y&&Ke(i,r,"srcSet",l.srcSet,l,null),f&&Ke(i,r,"src",l.src,l,null);return;case"input":Re("invalid",i);var P=b=C=y=null,Y=null,ee=null;for(f in l)if(l.hasOwnProperty(f)){var se=l[f];if(se!=null)switch(f){case"name":y=se;break;case"type":C=se;break;case"checked":Y=se;break;case"defaultChecked":ee=se;break;case"value":b=se;break;case"defaultValue":P=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(a(137,r));break;default:Ke(i,r,f,se,l,null)}}nl(i,b,P,Y,ee,C,y,!1);return;case"select":Re("invalid",i),f=C=b=null;for(y in l)if(l.hasOwnProperty(y)&&(P=l[y],P!=null))switch(y){case"value":b=P;break;case"defaultValue":C=P;break;case"multiple":f=P;default:Ke(i,r,y,P,l,null)}r=b,l=C,i.multiple=!!f,r!=null?ii(i,!!f,r,!1):l!=null&&ii(i,!!f,l,!0);return;case"textarea":Re("invalid",i),b=y=f=null;for(C in l)if(l.hasOwnProperty(C)&&(P=l[C],P!=null))switch(C){case"value":f=P;break;case"defaultValue":y=P;break;case"children":b=P;break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(a(91));break;default:Ke(i,r,C,P,l,null)}ym(i,f,y,b);return;case"option":for(Y in l)if(l.hasOwnProperty(Y)&&(f=l[Y],f!=null))switch(Y){case"selected":i.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Ke(i,r,Y,f,l,null)}return;case"dialog":Re("beforetoggle",i),Re("toggle",i),Re("cancel",i),Re("close",i);break;case"iframe":case"object":Re("load",i);break;case"video":case"audio":for(f=0;f<$o.length;f++)Re($o[f],i);break;case"image":Re("error",i),Re("load",i);break;case"details":Re("toggle",i);break;case"embed":case"source":case"link":Re("error",i),Re("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in l)if(l.hasOwnProperty(ee)&&(f=l[ee],f!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:Ke(i,r,ee,f,l,null)}return;default:if(Ru(r)){for(se in l)l.hasOwnProperty(se)&&(f=l[se],f!==void 0&&wf(i,r,se,f,l,void 0));return}}for(P in l)l.hasOwnProperty(P)&&(f=l[P],f!=null&&Ke(i,r,P,f,l,null))}function Mj(i,r,l,f){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,b=null,C=null,P=null,Y=null,ee=null,se=null;for(ae in l){var ce=l[ae];if(l.hasOwnProperty(ae)&&ce!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":Y=ce;default:f.hasOwnProperty(ae)||Ke(i,r,ae,null,f,ce)}}for(var ne in f){var ae=f[ne];if(ce=l[ne],f.hasOwnProperty(ne)&&(ae!=null||ce!=null))switch(ne){case"type":b=ae;break;case"name":y=ae;break;case"checked":ee=ae;break;case"defaultChecked":se=ae;break;case"value":C=ae;break;case"defaultValue":P=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(a(137,r));break;default:ae!==ce&&Ke(i,r,ne,ae,f,ce)}}gr(i,C,P,Y,ee,se,b,y);return;case"select":ae=C=P=ne=null;for(b in l)if(Y=l[b],l.hasOwnProperty(b)&&Y!=null)switch(b){case"value":break;case"multiple":ae=Y;default:f.hasOwnProperty(b)||Ke(i,r,b,null,f,Y)}for(y in f)if(b=f[y],Y=l[y],f.hasOwnProperty(y)&&(b!=null||Y!=null))switch(y){case"value":ne=b;break;case"defaultValue":P=b;break;case"multiple":C=b;default:b!==Y&&Ke(i,r,y,b,f,Y)}r=P,l=C,f=ae,ne!=null?ii(i,!!l,ne,!1):!!f!=!!l&&(r!=null?ii(i,!!l,r,!0):ii(i,!!l,l?[]:"",!1));return;case"textarea":ae=ne=null;for(P in l)if(y=l[P],l.hasOwnProperty(P)&&y!=null&&!f.hasOwnProperty(P))switch(P){case"value":break;case"children":break;default:Ke(i,r,P,null,f,y)}for(C in f)if(y=f[C],b=l[C],f.hasOwnProperty(C)&&(y!=null||b!=null))switch(C){case"value":ne=y;break;case"defaultValue":ae=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(a(91));break;default:y!==b&&Ke(i,r,C,y,f,b)}gm(i,ne,ae);return;case"option":for(var ve in l)if(ne=l[ve],l.hasOwnProperty(ve)&&ne!=null&&!f.hasOwnProperty(ve))switch(ve){case"selected":i.selected=!1;break;default:Ke(i,r,ve,null,f,ne)}for(Y in f)if(ne=f[Y],ae=l[Y],f.hasOwnProperty(Y)&&ne!==ae&&(ne!=null||ae!=null))switch(Y){case"selected":i.selected=ne&&typeof ne!="function"&&typeof ne!="symbol";break;default:Ke(i,r,Y,ne,f,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ke in l)ne=l[ke],l.hasOwnProperty(ke)&&ne!=null&&!f.hasOwnProperty(ke)&&Ke(i,r,ke,null,f,ne);for(ee in f)if(ne=f[ee],ae=l[ee],f.hasOwnProperty(ee)&&ne!==ae&&(ne!=null||ae!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(a(137,r));break;default:Ke(i,r,ee,ne,f,ae)}return;default:if(Ru(r)){for(var et in l)ne=l[et],l.hasOwnProperty(et)&&ne!==void 0&&!f.hasOwnProperty(et)&&wf(i,r,et,void 0,f,ne);for(se in f)ne=f[se],ae=l[se],!f.hasOwnProperty(se)||ne===ae||ne===void 0&&ae===void 0||wf(i,r,se,ne,f,ae);return}}for(var Z in l)ne=l[Z],l.hasOwnProperty(Z)&&ne!=null&&!f.hasOwnProperty(Z)&&Ke(i,r,Z,null,f,ne);for(ce in f)ne=f[ce],ae=l[ce],!f.hasOwnProperty(ce)||ne===ae||ne==null&&ae==null||Ke(i,r,ce,ne,f,ae)}function bx(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Dj(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,l=performance.getEntriesByType("resource"),f=0;f<l.length;f++){var y=l[f],b=y.transferSize,C=y.initiatorType,P=y.duration;if(b&&P&&bx(C)){for(C=0,P=y.responseEnd,f+=1;f<l.length;f++){var Y=l[f],ee=Y.startTime;if(ee>P)break;var se=Y.transferSize,ce=Y.initiatorType;se&&bx(ce)&&(Y=Y.responseEnd,C+=se*(Y<P?1:(P-ee)/(Y-ee)))}if(--f,r+=8*(b+C)/(y.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Sf=null,Nf=null;function Zl(i){return i.nodeType===9?i:i.ownerDocument}function wx(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Sx(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function jf(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Ef=null;function Oj(){var i=window.event;return i&&i.type==="popstate"?i===Ef?!1:(Ef=i,!0):(Ef=null,!1)}var Nx=typeof setTimeout=="function"?setTimeout:void 0,_j=typeof clearTimeout=="function"?clearTimeout:void 0,jx=typeof Promise=="function"?Promise:void 0,Rj=typeof queueMicrotask=="function"?queueMicrotask:typeof jx<"u"?function(i){return jx.resolve(null).then(i).catch(Ij)}:Nx;function Ij(i){setTimeout(function(){throw i})}function Ji(i){return i==="head"}function Ex(i,r){var l=r,f=0;do{var y=l.nextSibling;if(i.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"||l==="/&"){if(f===0){i.removeChild(y),Oa(r);return}f--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")f++;else if(l==="html")qo(i.ownerDocument.documentElement);else if(l==="head"){l=i.ownerDocument.head,qo(l);for(var b=l.firstChild;b;){var C=b.nextSibling,P=b.nodeName;b[pr]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&b.rel.toLowerCase()==="stylesheet"||l.removeChild(b),b=C}}else l==="body"&&qo(i.ownerDocument.body);l=y}while(l);Oa(r)}function kx(i,r){var l=i;i=0;do{var f=l.nextSibling;if(l.nodeType===1?r?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(r?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),f&&f.nodeType===8)if(l=f.data,l==="/$"){if(i===0)break;i--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||i++;l=f}while(l)}function kf(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":kf(l),ro(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function Lj(i,r,l,f){for(;i.nodeType===1;){var y=l;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!f&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(f){if(!i[pr])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(b=i.getAttribute("rel"),b==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(b!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(b=i.getAttribute("src"),(b!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&b&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var b=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===b)return i}else return i;if(i=wn(i.nextSibling),i===null)break}return null}function zj(i,r,l){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=wn(i.nextSibling),i===null))return null;return i}function Cx(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=wn(i.nextSibling),i===null))return null;return i}function Cf(i){return i.data==="$?"||i.data==="$~"}function Af(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function Bj(i,r){var l=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||l.readyState!=="loading")r();else{var f=function(){r(),l.removeEventListener("DOMContentLoaded",f)};l.addEventListener("DOMContentLoaded",f),i._reactRetry=f}}function wn(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var Tf=null;function Ax(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"||l==="/&"){if(r===0)return wn(i.nextSibling);r--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||r++}i=i.nextSibling}return null}function Tx(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(r===0)return i;r--}else l!=="/$"&&l!=="/&"||r++}i=i.previousSibling}return null}function Mx(i,r,l){switch(r=Zl(l),i){case"html":if(i=r.documentElement,!i)throw Error(a(452));return i;case"head":if(i=r.head,!i)throw Error(a(453));return i;case"body":if(i=r.body,!i)throw Error(a(454));return i;default:throw Error(a(451))}}function qo(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);ro(i)}var Sn=new Map,Dx=new Set;function Kl(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var bi=V.d;V.d={f:Pj,r:$j,D:Hj,C:qj,L:Uj,m:Fj,X:Gj,S:Vj,M:Wj};function Pj(){var i=bi.f(),r=Fl();return i||r}function $j(i){var r=Mi(i);r!==null&&r.tag===5&&r.type==="form"?Yg(r):bi.r(i)}var Ta=typeof document>"u"?null:document;function Ox(i,r,l){var f=Ta;if(f&&typeof r=="string"&&r){var y=Ut(r);y='link[rel="'+i+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),Dx.has(y)||(Dx.add(y),i={rel:i,crossOrigin:l,href:r},f.querySelector(y)===null&&(r=f.createElement("link"),Dt(r,"link",i),gt(r),f.head.appendChild(r)))}}function Hj(i){bi.D(i),Ox("dns-prefetch",i,null)}function qj(i,r){bi.C(i,r),Ox("preconnect",i,r)}function Uj(i,r,l){bi.L(i,r,l);var f=Ta;if(f&&i&&r){var y='link[rel="preload"][as="'+Ut(r)+'"]';r==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+Ut(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+Ut(l.imageSizes)+'"]')):y+='[href="'+Ut(i)+'"]';var b=y;switch(r){case"style":b=Ma(i);break;case"script":b=Da(i)}Sn.has(b)||(i=g({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:i,as:r},l),Sn.set(b,i),f.querySelector(y)!==null||r==="style"&&f.querySelector(Uo(b))||r==="script"&&f.querySelector(Fo(b))||(r=f.createElement("link"),Dt(r,"link",i),gt(r),f.head.appendChild(r)))}}function Fj(i,r){bi.m(i,r);var l=Ta;if(l&&i){var f=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+Ut(f)+'"][href="'+Ut(i)+'"]',b=y;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Da(i)}if(!Sn.has(b)&&(i=g({rel:"modulepreload",href:i},r),Sn.set(b,i),l.querySelector(y)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Fo(b)))return}f=l.createElement("link"),Dt(f,"link",i),gt(f),l.head.appendChild(f)}}}function Vj(i,r,l){bi.S(i,r,l);var f=Ta;if(f&&i){var y=Oi(f).hoistableStyles,b=Ma(i);r=r||"default";var C=y.get(b);if(!C){var P={loading:0,preload:null};if(C=f.querySelector(Uo(b)))P.loading=5;else{i=g({rel:"stylesheet",href:i,"data-precedence":r},l),(l=Sn.get(b))&&Mf(i,l);var Y=C=f.createElement("link");gt(Y),Dt(Y,"link",i),Y._p=new Promise(function(ee,se){Y.onload=ee,Y.onerror=se}),Y.addEventListener("load",function(){P.loading|=1}),Y.addEventListener("error",function(){P.loading|=2}),P.loading|=4,ec(C,r,f)}C={type:"stylesheet",instance:C,count:1,state:P},y.set(b,C)}}}function Gj(i,r){bi.X(i,r);var l=Ta;if(l&&i){var f=Oi(l).hoistableScripts,y=Da(i),b=f.get(y);b||(b=l.querySelector(Fo(y)),b||(i=g({src:i,async:!0},r),(r=Sn.get(y))&&Df(i,r),b=l.createElement("script"),gt(b),Dt(b,"link",i),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(y,b))}}function Wj(i,r){bi.M(i,r);var l=Ta;if(l&&i){var f=Oi(l).hoistableScripts,y=Da(i),b=f.get(y);b||(b=l.querySelector(Fo(y)),b||(i=g({src:i,async:!0,type:"module"},r),(r=Sn.get(y))&&Df(i,r),b=l.createElement("script"),gt(b),Dt(b,"link",i),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(y,b))}}function _x(i,r,l,f){var y=(y=fe.current)?Kl(y):null;if(!y)throw Error(a(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=Ma(l.href),l=Oi(y).hoistableStyles,f=l.get(r),f||(f={type:"style",instance:null,count:0,state:null},l.set(r,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=Ma(l.href);var b=Oi(y).hoistableStyles,C=b.get(i);if(C||(y=y.ownerDocument||y,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(i,C),(b=y.querySelector(Uo(i)))&&!b._p&&(C.instance=b,C.state.loading=5),Sn.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Sn.set(i,l),b||Yj(y,i,l,C.state))),r&&f===null)throw Error(a(528,""));return C}if(r&&f!==null)throw Error(a(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Da(l),l=Oi(y).hoistableScripts,f=l.get(r),f||(f={type:"script",instance:null,count:0,state:null},l.set(r,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,i))}}function Ma(i){return'href="'+Ut(i)+'"'}function Uo(i){return'link[rel="stylesheet"]['+i+"]"}function Rx(i){return g({},i,{"data-precedence":i.precedence,precedence:null})}function Yj(i,r,l,f){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?f.loading=1:(r=i.createElement("link"),f.preload=r,r.addEventListener("load",function(){return f.loading|=1}),r.addEventListener("error",function(){return f.loading|=2}),Dt(r,"link",l),gt(r),i.head.appendChild(r))}function Da(i){return'[src="'+Ut(i)+'"]'}function Fo(i){return"script[async]"+i}function Ix(i,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var f=i.querySelector('style[data-href~="'+Ut(l.href)+'"]');if(f)return r.instance=f,gt(f),f;var y=g({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return f=(i.ownerDocument||i).createElement("style"),gt(f),Dt(f,"style",y),ec(f,l.precedence,i),r.instance=f;case"stylesheet":y=Ma(l.href);var b=i.querySelector(Uo(y));if(b)return r.state.loading|=4,r.instance=b,gt(b),b;f=Rx(l),(y=Sn.get(y))&&Mf(f,y),b=(i.ownerDocument||i).createElement("link"),gt(b);var C=b;return C._p=new Promise(function(P,Y){C.onload=P,C.onerror=Y}),Dt(b,"link",f),r.state.loading|=4,ec(b,l.precedence,i),r.instance=b;case"script":return b=Da(l.src),(y=i.querySelector(Fo(b)))?(r.instance=y,gt(y),y):(f=l,(y=Sn.get(b))&&(f=g({},l),Df(f,y)),i=i.ownerDocument||i,y=i.createElement("script"),gt(y),Dt(y,"link",f),i.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(a(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(f=r.instance,r.state.loading|=4,ec(f,l.precedence,i));return r.instance}function ec(i,r,l){for(var f=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=f.length?f[f.length-1]:null,b=y,C=0;C<f.length;C++){var P=f[C];if(P.dataset.precedence===r)b=P;else if(b!==y)break}b?b.parentNode.insertBefore(i,b.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(i,r.firstChild))}function Mf(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function Df(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var tc=null;function Lx(i,r,l){if(tc===null){var f=new Map,y=tc=new Map;y.set(l,f)}else y=tc,f=y.get(l),f||(f=new Map,y.set(l,f));if(f.has(i))return f;for(f.set(i,null),l=l.getElementsByTagName(i),y=0;y<l.length;y++){var b=l[y];if(!(b[pr]||b[jt]||i==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var C=b.getAttribute(r)||"";C=i+C;var P=f.get(C);P?P.push(b):f.set(C,[b])}}return f}function zx(i,r,l){i=i.ownerDocument||i,i.head.insertBefore(l,r==="title"?i.querySelector("head > title"):null)}function Xj(i,r,l){if(l===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Bx(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function Qj(i,r,l,f){if(l.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=Ma(f.href),b=r.querySelector(Uo(y));if(b){r=b._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=nc.bind(i),r.then(i,i)),l.state.loading|=4,l.instance=b,gt(b);return}b=r.ownerDocument||r,f=Rx(f),(y=Sn.get(y))&&Mf(f,y),b=b.createElement("link"),gt(b);var C=b;C._p=new Promise(function(P,Y){C.onload=P,C.onerror=Y}),Dt(b,"link",f),l.instance=b}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(i.count++,l=nc.bind(i),r.addEventListener("load",l),r.addEventListener("error",l))}}var Of=0;function Jj(i,r){return i.stylesheets&&i.count===0&&rc(i,i.stylesheets),0<i.count||0<i.imgCount?function(l){var f=setTimeout(function(){if(i.stylesheets&&rc(i,i.stylesheets),i.unsuspend){var b=i.unsuspend;i.unsuspend=null,b()}},6e4+r);0<i.imgBytes&&Of===0&&(Of=62500*Dj());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&rc(i,i.stylesheets),i.unsuspend)){var b=i.unsuspend;i.unsuspend=null,b()}},(i.imgBytes>Of?50:800)+r);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(f),clearTimeout(y)}}:null}function nc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)rc(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var ic=null;function rc(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,ic=new Map,r.forEach(Zj,i),ic=null,nc.call(i))}function Zj(i,r){if(!(r.state.loading&4)){var l=ic.get(i);if(l)var f=l.get(null);else{l=new Map,ic.set(i,l);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<y.length;b++){var C=y[b];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(l.set(C.dataset.precedence,C),f=C)}f&&l.set(null,f)}y=r.instance,C=y.getAttribute("data-precedence"),b=l.get(C)||f,b===f&&l.set(null,y),l.set(C,y),this.count++,f=nc.bind(this),y.addEventListener("load",f),y.addEventListener("error",f),b?b.parentNode.insertBefore(y,b.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),r.state.loading|=4}}var Vo={$$typeof:E,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function Kj(i,r,l,f,y,b,C,P,Y){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=to(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=to(0),this.hiddenUpdates=to(null),this.identifierPrefix=f,this.onUncaughtError=y,this.onCaughtError=b,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Y,this.incompleteTransitions=new Map}function Px(i,r,l,f,y,b,C,P,Y,ee,se,ce){return i=new Kj(i,r,l,C,Y,ee,se,ce,P),r=1,b===!0&&(r|=24),b=nn(3,null,null,r),i.current=b,b.stateNode=i,r=ud(),r.refCount++,i.pooledCache=r,r.refCount++,b.memoizedState={element:f,isDehydrated:l,cache:r},pd(b),i}function $x(i){return i?(i=la,i):la}function Hx(i,r,l,f,y,b){y=$x(y),f.context===null?f.context=y:f.pendingContext=y,f=$i(r),f.payload={element:l},b=b===void 0?null:b,b!==null&&(f.callback=b),l=Hi(i,f,r),l!==null&&(Xt(l,i,r),No(l,i,r))}function qx(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<r?l:r}}function _f(i,r){qx(i,r),(i=i.alternate)&&qx(i,r)}function Ux(i){if(i.tag===13||i.tag===31){var r=br(i,67108864);r!==null&&Xt(r,i,67108864),_f(i,67108864)}}function Fx(i){if(i.tag===13||i.tag===31){var r=ln();r=no(r);var l=br(i,r);l!==null&&Xt(l,i,r),_f(i,r)}}var ac=!0;function eE(i,r,l,f){var y=I.T;I.T=null;var b=V.p;try{V.p=2,Rf(i,r,l,f)}finally{V.p=b,I.T=y}}function tE(i,r,l,f){var y=I.T;I.T=null;var b=V.p;try{V.p=8,Rf(i,r,l,f)}finally{V.p=b,I.T=y}}function Rf(i,r,l,f){if(ac){var y=If(f);if(y===null)bf(i,r,f,oc,l),Gx(i,f);else if(iE(y,i,r,l,f))f.stopPropagation();else if(Gx(i,f),r&4&&-1<nE.indexOf(i)){for(;y!==null;){var b=Mi(y);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var C=ei(b.pendingLanes);if(C!==0){var P=b;for(P.pendingLanes|=2,P.entangledLanes|=2;C;){var Y=1<<31-Xe(C);P.entanglements[1]|=Y,C&=~Y}Un(b),(Ye&6)===0&&(ql=Nt()+500,Po(0))}}break;case 31:case 13:P=br(b,2),P!==null&&Xt(P,b,2),Fl(),_f(b,2)}if(b=If(f),b===null&&bf(i,r,f,oc,l),b===y)break;y=b}y!==null&&f.stopPropagation()}else bf(i,r,f,null,l)}}function If(i){return i=Lu(i),Lf(i)}var oc=null;function Lf(i){if(oc=null,i=Ti(i),i!==null){var r=s(i);if(r===null)i=null;else{var l=r.tag;if(l===13){if(i=c(r),i!==null)return i;i=null}else if(l===31){if(i=d(r),i!==null)return i;i=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return oc=i,null}function Vx(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ai()){case oe:return 2;case pe:return 8;case Ee:case Oe:return 32;case He:return 268435456;default:return 32}default:return 32}}var zf=!1,Zi=null,Ki=null,er=null,Go=new Map,Wo=new Map,tr=[],nE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Gx(i,r){switch(i){case"focusin":case"focusout":Zi=null;break;case"dragenter":case"dragleave":Ki=null;break;case"mouseover":case"mouseout":er=null;break;case"pointerover":case"pointerout":Go.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wo.delete(r.pointerId)}}function Yo(i,r,l,f,y,b){return i===null||i.nativeEvent!==b?(i={blockedOn:r,domEventName:l,eventSystemFlags:f,nativeEvent:b,targetContainers:[y]},r!==null&&(r=Mi(r),r!==null&&Ux(r)),i):(i.eventSystemFlags|=f,r=i.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),i)}function iE(i,r,l,f,y){switch(r){case"focusin":return Zi=Yo(Zi,i,r,l,f,y),!0;case"dragenter":return Ki=Yo(Ki,i,r,l,f,y),!0;case"mouseover":return er=Yo(er,i,r,l,f,y),!0;case"pointerover":var b=y.pointerId;return Go.set(b,Yo(Go.get(b)||null,i,r,l,f,y)),!0;case"gotpointercapture":return b=y.pointerId,Wo.set(b,Yo(Wo.get(b)||null,i,r,l,f,y)),!0}return!1}function Wx(i){var r=Ti(i.target);if(r!==null){var l=s(r);if(l!==null){if(r=l.tag,r===13){if(r=c(l),r!==null){i.blockedOn=r,Ys(i.priority,function(){Fx(l)});return}}else if(r===31){if(r=d(l),r!==null){i.blockedOn=r,Ys(i.priority,function(){Fx(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function sc(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var l=If(i.nativeEvent);if(l===null){l=i.nativeEvent;var f=new l.constructor(l.type,l);Iu=f,l.target.dispatchEvent(f),Iu=null}else return r=Mi(l),r!==null&&Ux(r),i.blockedOn=l,!1;r.shift()}return!0}function Yx(i,r,l){sc(i)&&l.delete(r)}function rE(){zf=!1,Zi!==null&&sc(Zi)&&(Zi=null),Ki!==null&&sc(Ki)&&(Ki=null),er!==null&&sc(er)&&(er=null),Go.forEach(Yx),Wo.forEach(Yx)}function lc(i,r){i.blockedOn===r&&(i.blockedOn=null,zf||(zf=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,rE)))}var cc=null;function Xx(i){cc!==i&&(cc=i,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){cc===i&&(cc=null);for(var r=0;r<i.length;r+=3){var l=i[r],f=i[r+1],y=i[r+2];if(typeof f!="function"){if(Lf(f||l)===null)continue;break}var b=Mi(l);b!==null&&(i.splice(r,3),r-=3,Rd(b,{pending:!0,data:y,method:l.method,action:f},f,y))}}))}function Oa(i){function r(Y){return lc(Y,i)}Zi!==null&&lc(Zi,i),Ki!==null&&lc(Ki,i),er!==null&&lc(er,i),Go.forEach(r),Wo.forEach(r);for(var l=0;l<tr.length;l++){var f=tr[l];f.blockedOn===i&&(f.blockedOn=null)}for(;0<tr.length&&(l=tr[0],l.blockedOn===null);)Wx(l),l.blockedOn===null&&tr.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(f=0;f<l.length;f+=3){var y=l[f],b=l[f+1],C=y[Rt]||null;if(typeof b=="function")C||Xx(l);else if(C){var P=null;if(b&&b.hasAttribute("formAction")){if(y=b,C=b[Rt]||null)P=C.formAction;else if(Lf(y)!==null)continue}else P=C.action;typeof P=="function"?l[f+1]=P:(l.splice(f,3),f-=3),Xx(l)}}}function Qx(){function i(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(C){return y=C})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),f||setTimeout(l,20)}function l(){if(!f&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(l,100),function(){f=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function Bf(i){this._internalRoot=i}uc.prototype.render=Bf.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(a(409));var l=r.current,f=ln();Hx(l,f,i,r,null,null)},uc.prototype.unmount=Bf.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;Hx(i.current,2,null,i,null,null),Fl(),r[ti]=null}};function uc(i){this._internalRoot=i}uc.prototype.unstable_scheduleHydration=function(i){if(i){var r=Ws();i={blockedOn:null,target:i,priority:r};for(var l=0;l<tr.length&&r!==0&&r<tr[l].priority;l++);tr.splice(l,0,i),l===0&&Wx(i)}};var Jx=t.version;if(Jx!=="19.2.3")throw Error(a(527,Jx,"19.2.3"));V.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(a(188)):(i=Object.keys(i).join(","),Error(a(268,i)));return i=p(r),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var aE={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dc.isDisabled&&dc.supportsFiber)try{Ct=dc.inject(aE),ht=dc}catch{}}return Qo.createRoot=function(i,r){if(!o(i))throw Error(a(299));var l=!1,f="",y=ry,b=ay,C=oy;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(b=r.onCaughtError),r.onRecoverableError!==void 0&&(C=r.onRecoverableError)),r=Px(i,1,!1,null,null,l,f,null,y,b,C,Qx),i[ti]=r.current,vf(i),new Bf(r)},Qo.hydrateRoot=function(i,r,l){if(!o(i))throw Error(a(299));var f=!1,y="",b=ry,C=ay,P=oy,Y=null;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(C=l.onCaughtError),l.onRecoverableError!==void 0&&(P=l.onRecoverableError),l.formState!==void 0&&(Y=l.formState)),r=Px(i,1,!0,r,l??null,f,y,Y,b,C,P,Qx),r.context=$x(null),l=r.current,f=ln(),f=no(f),y=$i(f),y.callback=null,Hi(l,y,f),l=f,r.current.lanes=l,hr(r,l),Un(r),i[ti]=r.current,vf(i),new uc(r)},Qo.version="19.2.3",Qo}var sv;function pE(){if(sv)return Hf.exports;sv=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Hf.exports=hE(),Hf.exports}var mE=pE();function St(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,a;n<e.length;n++)(a=St(e[n]))!==""&&(t+=(t&&" ")+a);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var gE={value:()=>{}};function ru(){for(var e=0,t=arguments.length,n={},a;e<t;++e){if(!(a=arguments[e]+"")||a in n||/[\s.]/.test(a))throw new Error("illegal type: "+a);n[a]=[]}return new Oc(n)}function Oc(e){this._=e}function yE(e,t){return e.trim().split(/^|\s+/).map(function(n){var a="",o=n.indexOf(".");if(o>=0&&(a=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:a}})}Oc.prototype=ru.prototype={constructor:Oc,on:function(e,t){var n=this._,a=yE(e+"",n),o,s=-1,c=a.length;if(arguments.length<2){for(;++s<c;)if((o=(e=a[s]).type)&&(o=xE(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<c;)if(o=(e=a[s]).type)n[o]=lv(n[o],e.name,t);else if(t==null)for(o in n)n[o]=lv(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Oc(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),a=0,o,s;a<o;++a)n[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],a=0,o=s.length;a<o;++a)s[a].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var a=this._[e],o=0,s=a.length;o<s;++o)a[o].value.apply(t,n)}};function xE(e,t){for(var n=0,a=e.length,o;n<a;++n)if((o=e[n]).name===t)return o.value}function lv(e,t,n){for(var a=0,o=e.length;a<o;++a)if(e[a].name===t){e[a]=gE,e=e.slice(0,a).concat(e.slice(a+1));break}return n!=null&&e.push({name:t,value:n}),e}var Qh="http://www.w3.org/1999/xhtml";const cv={svg:"http://www.w3.org/2000/svg",xhtml:Qh,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function au(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),cv.hasOwnProperty(t)?{space:cv[t],local:e}:e}function vE(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Qh&&t.documentElement.namespaceURI===Qh?t.createElement(e):t.createElementNS(n,e)}}function bE(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function J0(e){var t=au(e);return(t.local?bE:vE)(t)}function wE(){}function Mp(e){return e==null?wE:function(){return this.querySelector(e)}}function SE(e){typeof e!="function"&&(e=Mp(e));for(var t=this._groups,n=t.length,a=new Array(n),o=0;o<n;++o)for(var s=t[o],c=s.length,d=a[o]=new Array(c),h,p,m=0;m<c;++m)(h=s[m])&&(p=e.call(h,h.__data__,m,s))&&("__data__"in h&&(p.__data__=h.__data__),d[m]=p);return new hn(a,this._parents)}function NE(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function jE(){return[]}function Z0(e){return e==null?jE:function(){return this.querySelectorAll(e)}}function EE(e){return function(){return NE(e.apply(this,arguments))}}function kE(e){typeof e=="function"?e=EE(e):e=Z0(e);for(var t=this._groups,n=t.length,a=[],o=[],s=0;s<n;++s)for(var c=t[s],d=c.length,h,p=0;p<d;++p)(h=c[p])&&(a.push(e.call(h,h.__data__,p,c)),o.push(h));return new hn(a,o)}function K0(e){return function(){return this.matches(e)}}function ew(e){return function(t){return t.matches(e)}}var CE=Array.prototype.find;function AE(e){return function(){return CE.call(this.children,e)}}function TE(){return this.firstElementChild}function ME(e){return this.select(e==null?TE:AE(typeof e=="function"?e:ew(e)))}var DE=Array.prototype.filter;function OE(){return Array.from(this.children)}function _E(e){return function(){return DE.call(this.children,e)}}function RE(e){return this.selectAll(e==null?OE:_E(typeof e=="function"?e:ew(e)))}function IE(e){typeof e!="function"&&(e=K0(e));for(var t=this._groups,n=t.length,a=new Array(n),o=0;o<n;++o)for(var s=t[o],c=s.length,d=a[o]=[],h,p=0;p<c;++p)(h=s[p])&&e.call(h,h.__data__,p,s)&&d.push(h);return new hn(a,this._parents)}function tw(e){return new Array(e.length)}function LE(){return new hn(this._enter||this._groups.map(tw),this._parents)}function Pc(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Pc.prototype={constructor:Pc,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function zE(e){return function(){return e}}function BE(e,t,n,a,o,s){for(var c=0,d,h=t.length,p=s.length;c<p;++c)(d=t[c])?(d.__data__=s[c],a[c]=d):n[c]=new Pc(e,s[c]);for(;c<h;++c)(d=t[c])&&(o[c]=d)}function PE(e,t,n,a,o,s,c){var d,h,p=new Map,m=t.length,g=s.length,x=new Array(m),v;for(d=0;d<m;++d)(h=t[d])&&(x[d]=v=c.call(h,h.__data__,d,t)+"",p.has(v)?o[d]=h:p.set(v,h));for(d=0;d<g;++d)v=c.call(e,s[d],d,s)+"",(h=p.get(v))?(a[d]=h,h.__data__=s[d],p.delete(v)):n[d]=new Pc(e,s[d]);for(d=0;d<m;++d)(h=t[d])&&p.get(x[d])===h&&(o[d]=h)}function $E(e){return e.__data__}function HE(e,t){if(!arguments.length)return Array.from(this,$E);var n=t?PE:BE,a=this._parents,o=this._groups;typeof e!="function"&&(e=zE(e));for(var s=o.length,c=new Array(s),d=new Array(s),h=new Array(s),p=0;p<s;++p){var m=a[p],g=o[p],x=g.length,v=qE(e.call(m,m&&m.__data__,p,a)),w=v.length,N=d[p]=new Array(w),j=c[p]=new Array(w),S=h[p]=new Array(x);n(m,g,N,j,S,v,t);for(var k=0,E=0,T,_;k<w;++k)if(T=N[k]){for(k>=E&&(E=k+1);!(_=j[E])&&++E<w;);T._next=_||null}}return c=new hn(c,a),c._enter=d,c._exit=h,c}function qE(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function UE(){return new hn(this._exit||this._groups.map(tw),this._parents)}function FE(e,t,n){var a=this.enter(),o=this,s=this.exit();return typeof e=="function"?(a=e(a),a&&(a=a.selection())):a=a.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?s.remove():n(s),a&&o?a.merge(o).order():o}function VE(e){for(var t=e.selection?e.selection():e,n=this._groups,a=t._groups,o=n.length,s=a.length,c=Math.min(o,s),d=new Array(o),h=0;h<c;++h)for(var p=n[h],m=a[h],g=p.length,x=d[h]=new Array(g),v,w=0;w<g;++w)(v=p[w]||m[w])&&(x[w]=v);for(;h<o;++h)d[h]=n[h];return new hn(d,this._parents)}function GE(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var a=e[t],o=a.length-1,s=a[o],c;--o>=0;)(c=a[o])&&(s&&c.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(c,s),s=c);return this}function WE(e){e||(e=YE);function t(g,x){return g&&x?e(g.__data__,x.__data__):!g-!x}for(var n=this._groups,a=n.length,o=new Array(a),s=0;s<a;++s){for(var c=n[s],d=c.length,h=o[s]=new Array(d),p,m=0;m<d;++m)(p=c[m])&&(h[m]=p);h.sort(t)}return new hn(o,this._parents).order()}function YE(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function XE(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function QE(){return Array.from(this)}function JE(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var a=e[t],o=0,s=a.length;o<s;++o){var c=a[o];if(c)return c}return null}function ZE(){let e=0;for(const t of this)++e;return e}function KE(){return!this.node()}function ek(e){for(var t=this._groups,n=0,a=t.length;n<a;++n)for(var o=t[n],s=0,c=o.length,d;s<c;++s)(d=o[s])&&e.call(d,d.__data__,s,o);return this}function tk(e){return function(){this.removeAttribute(e)}}function nk(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ik(e,t){return function(){this.setAttribute(e,t)}}function rk(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function ak(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function ok(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function sk(e,t){var n=au(e);if(arguments.length<2){var a=this.node();return n.local?a.getAttributeNS(n.space,n.local):a.getAttribute(n)}return this.each((t==null?n.local?nk:tk:typeof t=="function"?n.local?ok:ak:n.local?rk:ik)(n,t))}function nw(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function lk(e){return function(){this.style.removeProperty(e)}}function ck(e,t,n){return function(){this.style.setProperty(e,t,n)}}function uk(e,t,n){return function(){var a=t.apply(this,arguments);a==null?this.style.removeProperty(e):this.style.setProperty(e,a,n)}}function dk(e,t,n){return arguments.length>1?this.each((t==null?lk:typeof t=="function"?uk:ck)(e,t,n??"")):Fa(this.node(),e)}function Fa(e,t){return e.style.getPropertyValue(t)||nw(e).getComputedStyle(e,null).getPropertyValue(t)}function fk(e){return function(){delete this[e]}}function hk(e,t){return function(){this[e]=t}}function pk(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function mk(e,t){return arguments.length>1?this.each((t==null?fk:typeof t=="function"?pk:hk)(e,t)):this.node()[e]}function iw(e){return e.trim().split(/^|\s+/)}function Dp(e){return e.classList||new rw(e)}function rw(e){this._node=e,this._names=iw(e.getAttribute("class")||"")}rw.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function aw(e,t){for(var n=Dp(e),a=-1,o=t.length;++a<o;)n.add(t[a])}function ow(e,t){for(var n=Dp(e),a=-1,o=t.length;++a<o;)n.remove(t[a])}function gk(e){return function(){aw(this,e)}}function yk(e){return function(){ow(this,e)}}function xk(e,t){return function(){(t.apply(this,arguments)?aw:ow)(this,e)}}function vk(e,t){var n=iw(e+"");if(arguments.length<2){for(var a=Dp(this.node()),o=-1,s=n.length;++o<s;)if(!a.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?xk:t?gk:yk)(n,t))}function bk(){this.textContent=""}function wk(e){return function(){this.textContent=e}}function Sk(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Nk(e){return arguments.length?this.each(e==null?bk:(typeof e=="function"?Sk:wk)(e)):this.node().textContent}function jk(){this.innerHTML=""}function Ek(e){return function(){this.innerHTML=e}}function kk(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Ck(e){return arguments.length?this.each(e==null?jk:(typeof e=="function"?kk:Ek)(e)):this.node().innerHTML}function Ak(){this.nextSibling&&this.parentNode.appendChild(this)}function Tk(){return this.each(Ak)}function Mk(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Dk(){return this.each(Mk)}function Ok(e){var t=typeof e=="function"?e:J0(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function _k(){return null}function Rk(e,t){var n=typeof e=="function"?e:J0(e),a=t==null?_k:typeof t=="function"?t:Mp(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),a.apply(this,arguments)||null)})}function Ik(){var e=this.parentNode;e&&e.removeChild(this)}function Lk(){return this.each(Ik)}function zk(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Bk(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Pk(e){return this.select(e?Bk:zk)}function $k(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Hk(e){return function(t){e.call(this,t,this.__data__)}}function qk(e){return e.trim().split(/^|\s+/).map(function(t){var n="",a=t.indexOf(".");return a>=0&&(n=t.slice(a+1),t=t.slice(0,a)),{type:t,name:n}})}function Uk(e){return function(){var t=this.__on;if(t){for(var n=0,a=-1,o=t.length,s;n<o;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++a]=s;++a?t.length=a:delete this.__on}}}function Fk(e,t,n){return function(){var a=this.__on,o,s=Hk(t);if(a){for(var c=0,d=a.length;c<d;++c)if((o=a[c]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=s,o.options=n),o.value=t;return}}this.addEventListener(e.type,s,n),o={type:e.type,name:e.name,value:t,listener:s,options:n},a?a.push(o):this.__on=[o]}}function Vk(e,t,n){var a=qk(e+""),o,s=a.length,c;if(arguments.length<2){var d=this.node().__on;if(d){for(var h=0,p=d.length,m;h<p;++h)for(o=0,m=d[h];o<s;++o)if((c=a[o]).type===m.type&&c.name===m.name)return m.value}return}for(d=t?Fk:Uk,o=0;o<s;++o)this.each(d(a[o],t,n));return this}function sw(e,t,n){var a=nw(e),o=a.CustomEvent;typeof o=="function"?o=new o(t,n):(o=a.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function Gk(e,t){return function(){return sw(this,e,t)}}function Wk(e,t){return function(){return sw(this,e,t.apply(this,arguments))}}function Yk(e,t){return this.each((typeof t=="function"?Wk:Gk)(e,t))}function*Xk(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var a=e[t],o=0,s=a.length,c;o<s;++o)(c=a[o])&&(yield c)}var lw=[null];function hn(e,t){this._groups=e,this._parents=t}function Ds(){return new hn([[document.documentElement]],lw)}function Qk(){return this}hn.prototype=Ds.prototype={constructor:hn,select:SE,selectAll:kE,selectChild:ME,selectChildren:RE,filter:IE,data:HE,enter:LE,exit:UE,join:FE,merge:VE,selection:Qk,order:GE,sort:WE,call:XE,nodes:QE,node:JE,size:ZE,empty:KE,each:ek,attr:sk,style:dk,property:mk,classed:vk,text:Nk,html:Ck,raise:Tk,lower:Dk,append:Ok,insert:Rk,remove:Lk,clone:Pk,datum:$k,on:Vk,dispatch:Yk,[Symbol.iterator]:Xk};function dn(e){return typeof e=="string"?new hn([[document.querySelector(e)]],[document.documentElement]):new hn([[e]],lw)}function Jk(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Dn(e,t){if(e=Jk(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var a=n.createSVGPoint();return a.x=e.clientX,a.y=e.clientY,a=a.matrixTransform(t.getScreenCTM().inverse()),[a.x,a.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const Zk={passive:!1},ys={capture:!0,passive:!1};function Vf(e){e.stopImmediatePropagation()}function Ha(e){e.preventDefault(),e.stopImmediatePropagation()}function cw(e){var t=e.document.documentElement,n=dn(e).on("dragstart.drag",Ha,ys);"onselectstart"in t?n.on("selectstart.drag",Ha,ys):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function uw(e,t){var n=e.document.documentElement,a=dn(e).on("dragstart.drag",null);t&&(a.on("click.drag",Ha,ys),setTimeout(function(){a.on("click.drag",null)},0)),"onselectstart"in n?a.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const fc=e=>()=>e;function Jh(e,{sourceEvent:t,subject:n,target:a,identifier:o,active:s,x:c,y:d,dx:h,dy:p,dispatch:m}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:d,enumerable:!0,configurable:!0},dx:{value:h,enumerable:!0,configurable:!0},dy:{value:p,enumerable:!0,configurable:!0},_:{value:m}})}Jh.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Kk(e){return!e.ctrlKey&&!e.button}function eC(){return this.parentNode}function tC(e,t){return t??{x:e.x,y:e.y}}function nC(){return navigator.maxTouchPoints||"ontouchstart"in this}function dw(){var e=Kk,t=eC,n=tC,a=nC,o={},s=ru("start","drag","end"),c=0,d,h,p,m,g=0;function x(T){T.on("mousedown.drag",v).filter(a).on("touchstart.drag",j).on("touchmove.drag",S,Zk).on("touchend.drag touchcancel.drag",k).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(T,_){if(!(m||!e.call(this,T,_))){var A=E(this,t.call(this,T,_),T,_,"mouse");A&&(dn(T.view).on("mousemove.drag",w,ys).on("mouseup.drag",N,ys),cw(T.view),Vf(T),p=!1,d=T.clientX,h=T.clientY,A("start",T))}}function w(T){if(Ha(T),!p){var _=T.clientX-d,A=T.clientY-h;p=_*_+A*A>g}o.mouse("drag",T)}function N(T){dn(T.view).on("mousemove.drag mouseup.drag",null),uw(T.view,p),Ha(T),o.mouse("end",T)}function j(T,_){if(e.call(this,T,_)){var A=T.changedTouches,z=t.call(this,T,_),G=A.length,F,L;for(F=0;F<G;++F)(L=E(this,z,T,_,A[F].identifier,A[F]))&&(Vf(T),L("start",T,A[F]))}}function S(T){var _=T.changedTouches,A=_.length,z,G;for(z=0;z<A;++z)(G=o[_[z].identifier])&&(Ha(T),G("drag",T,_[z]))}function k(T){var _=T.changedTouches,A=_.length,z,G;for(m&&clearTimeout(m),m=setTimeout(function(){m=null},500),z=0;z<A;++z)(G=o[_[z].identifier])&&(Vf(T),G("end",T,_[z]))}function E(T,_,A,z,G,F){var L=s.copy(),$=Dn(F||A,_),H,Q,D;if((D=n.call(T,new Jh("beforestart",{sourceEvent:A,target:x,identifier:G,active:c,x:$[0],y:$[1],dx:0,dy:0,dispatch:L}),z))!=null)return H=D.x-$[0]||0,Q=D.y-$[1]||0,function q(I,V,W){var J=$,O;switch(I){case"start":o[G]=q,O=c++;break;case"end":delete o[G],--c;case"drag":$=Dn(W||V,_),O=c;break}L.call(I,T,new Jh(I,{sourceEvent:V,subject:D,target:x,identifier:G,active:O,x:$[0]+H,y:$[1]+Q,dx:$[0]-J[0],dy:$[1]-J[1],dispatch:L}),z)}}return x.filter=function(T){return arguments.length?(e=typeof T=="function"?T:fc(!!T),x):e},x.container=function(T){return arguments.length?(t=typeof T=="function"?T:fc(T),x):t},x.subject=function(T){return arguments.length?(n=typeof T=="function"?T:fc(T),x):n},x.touchable=function(T){return arguments.length?(a=typeof T=="function"?T:fc(!!T),x):a},x.on=function(){var T=s.on.apply(s,arguments);return T===s?x:T},x.clickDistance=function(T){return arguments.length?(g=(T=+T)*T,x):Math.sqrt(g)},x}function Op(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function fw(e,t){var n=Object.create(e.prototype);for(var a in t)n[a]=t[a];return n}function Os(){}var xs=.7,$c=1/xs,qa="\\s*([+-]?\\d+)\\s*",vs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Yn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",iC=/^#([0-9a-f]{3,8})$/,rC=new RegExp(`^rgb\\(${qa},${qa},${qa}\\)$`),aC=new RegExp(`^rgb\\(${Yn},${Yn},${Yn}\\)$`),oC=new RegExp(`^rgba\\(${qa},${qa},${qa},${vs}\\)$`),sC=new RegExp(`^rgba\\(${Yn},${Yn},${Yn},${vs}\\)$`),lC=new RegExp(`^hsl\\(${vs},${Yn},${Yn}\\)$`),cC=new RegExp(`^hsla\\(${vs},${Yn},${Yn},${vs}\\)$`),uv={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Op(Os,Br,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:dv,formatHex:dv,formatHex8:uC,formatHsl:dC,formatRgb:fv,toString:fv});function dv(){return this.rgb().formatHex()}function uC(){return this.rgb().formatHex8()}function dC(){return hw(this).formatHsl()}function fv(){return this.rgb().formatRgb()}function Br(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=iC.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?hv(t):n===3?new Jt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?hc(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?hc(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=rC.exec(e))?new Jt(t[1],t[2],t[3],1):(t=aC.exec(e))?new Jt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=oC.exec(e))?hc(t[1],t[2],t[3],t[4]):(t=sC.exec(e))?hc(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=lC.exec(e))?gv(t[1],t[2]/100,t[3]/100,1):(t=cC.exec(e))?gv(t[1],t[2]/100,t[3]/100,t[4]):uv.hasOwnProperty(e)?hv(uv[e]):e==="transparent"?new Jt(NaN,NaN,NaN,0):null}function hv(e){return new Jt(e>>16&255,e>>8&255,e&255,1)}function hc(e,t,n,a){return a<=0&&(e=t=n=NaN),new Jt(e,t,n,a)}function fC(e){return e instanceof Os||(e=Br(e)),e?(e=e.rgb(),new Jt(e.r,e.g,e.b,e.opacity)):new Jt}function Zh(e,t,n,a){return arguments.length===1?fC(e):new Jt(e,t,n,a??1)}function Jt(e,t,n,a){this.r=+e,this.g=+t,this.b=+n,this.opacity=+a}Op(Jt,Zh,fw(Os,{brighter(e){return e=e==null?$c:Math.pow($c,e),new Jt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?xs:Math.pow(xs,e),new Jt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Jt(Lr(this.r),Lr(this.g),Lr(this.b),Hc(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:pv,formatHex:pv,formatHex8:hC,formatRgb:mv,toString:mv}));function pv(){return`#${Ir(this.r)}${Ir(this.g)}${Ir(this.b)}`}function hC(){return`#${Ir(this.r)}${Ir(this.g)}${Ir(this.b)}${Ir((isNaN(this.opacity)?1:this.opacity)*255)}`}function mv(){const e=Hc(this.opacity);return`${e===1?"rgb(":"rgba("}${Lr(this.r)}, ${Lr(this.g)}, ${Lr(this.b)}${e===1?")":`, ${e})`}`}function Hc(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Lr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ir(e){return e=Lr(e),(e<16?"0":"")+e.toString(16)}function gv(e,t,n,a){return a<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new On(e,t,n,a)}function hw(e){if(e instanceof On)return new On(e.h,e.s,e.l,e.opacity);if(e instanceof Os||(e=Br(e)),!e)return new On;if(e instanceof On)return e;e=e.rgb();var t=e.r/255,n=e.g/255,a=e.b/255,o=Math.min(t,n,a),s=Math.max(t,n,a),c=NaN,d=s-o,h=(s+o)/2;return d?(t===s?c=(n-a)/d+(n<a)*6:n===s?c=(a-t)/d+2:c=(t-n)/d+4,d/=h<.5?s+o:2-s-o,c*=60):d=h>0&&h<1?0:c,new On(c,d,h,e.opacity)}function pC(e,t,n,a){return arguments.length===1?hw(e):new On(e,t,n,a??1)}function On(e,t,n,a){this.h=+e,this.s=+t,this.l=+n,this.opacity=+a}Op(On,pC,fw(Os,{brighter(e){return e=e==null?$c:Math.pow($c,e),new On(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?xs:Math.pow(xs,e),new On(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*t,o=2*n-a;return new Jt(Gf(e>=240?e-240:e+120,o,a),Gf(e,o,a),Gf(e<120?e+240:e-120,o,a),this.opacity)},clamp(){return new On(yv(this.h),pc(this.s),pc(this.l),Hc(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Hc(this.opacity);return`${e===1?"hsl(":"hsla("}${yv(this.h)}, ${pc(this.s)*100}%, ${pc(this.l)*100}%${e===1?")":`, ${e})`}`}}));function yv(e){return e=(e||0)%360,e<0?e+360:e}function pc(e){return Math.max(0,Math.min(1,e||0))}function Gf(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const _p=e=>()=>e;function mC(e,t){return function(n){return e+n*t}}function gC(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(a){return Math.pow(e+a*t,n)}}function yC(e){return(e=+e)==1?pw:function(t,n){return n-t?gC(t,n,e):_p(isNaN(t)?n:t)}}function pw(e,t){var n=t-e;return n?mC(e,n):_p(isNaN(e)?t:e)}const qc=(function e(t){var n=yC(t);function a(o,s){var c=n((o=Zh(o)).r,(s=Zh(s)).r),d=n(o.g,s.g),h=n(o.b,s.b),p=pw(o.opacity,s.opacity);return function(m){return o.r=c(m),o.g=d(m),o.b=h(m),o.opacity=p(m),o+""}}return a.gamma=e,a})(1);function xC(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,a=t.slice(),o;return function(s){for(o=0;o<n;++o)a[o]=e[o]*(1-s)+t[o]*s;return a}}function vC(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function bC(e,t){var n=t?t.length:0,a=e?Math.min(n,e.length):0,o=new Array(a),s=new Array(n),c;for(c=0;c<a;++c)o[c]=us(e[c],t[c]);for(;c<n;++c)s[c]=t[c];return function(d){for(c=0;c<a;++c)s[c]=o[c](d);return s}}function wC(e,t){var n=new Date;return e=+e,t=+t,function(a){return n.setTime(e*(1-a)+t*a),n}}function Gn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function SC(e,t){var n={},a={},o;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(o in t)o in e?n[o]=us(e[o],t[o]):a[o]=t[o];return function(s){for(o in n)a[o]=n[o](s);return a}}var Kh=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Wf=new RegExp(Kh.source,"g");function NC(e){return function(){return e}}function jC(e){return function(t){return e(t)+""}}function mw(e,t){var n=Kh.lastIndex=Wf.lastIndex=0,a,o,s,c=-1,d=[],h=[];for(e=e+"",t=t+"";(a=Kh.exec(e))&&(o=Wf.exec(t));)(s=o.index)>n&&(s=t.slice(n,s),d[c]?d[c]+=s:d[++c]=s),(a=a[0])===(o=o[0])?d[c]?d[c]+=o:d[++c]=o:(d[++c]=null,h.push({i:c,x:Gn(a,o)})),n=Wf.lastIndex;return n<t.length&&(s=t.slice(n),d[c]?d[c]+=s:d[++c]=s),d.length<2?h[0]?jC(h[0].x):NC(t):(t=h.length,function(p){for(var m=0,g;m<t;++m)d[(g=h[m]).i]=g.x(p);return d.join("")})}function us(e,t){var n=typeof t,a;return t==null||n==="boolean"?_p(t):(n==="number"?Gn:n==="string"?(a=Br(t))?(t=a,qc):mw:t instanceof Br?qc:t instanceof Date?wC:vC(t)?xC:Array.isArray(t)?bC:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?SC:Gn)(e,t)}var xv=180/Math.PI,ep={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function gw(e,t,n,a,o,s){var c,d,h;return(c=Math.sqrt(e*e+t*t))&&(e/=c,t/=c),(h=e*n+t*a)&&(n-=e*h,a-=t*h),(d=Math.sqrt(n*n+a*a))&&(n/=d,a/=d,h/=d),e*a<t*n&&(e=-e,t=-t,h=-h,c=-c),{translateX:o,translateY:s,rotate:Math.atan2(t,e)*xv,skewX:Math.atan(h)*xv,scaleX:c,scaleY:d}}var mc;function EC(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?ep:gw(t.a,t.b,t.c,t.d,t.e,t.f)}function kC(e){return e==null||(mc||(mc=document.createElementNS("http://www.w3.org/2000/svg","g")),mc.setAttribute("transform",e),!(e=mc.transform.baseVal.consolidate()))?ep:(e=e.matrix,gw(e.a,e.b,e.c,e.d,e.e,e.f))}function yw(e,t,n,a){function o(p){return p.length?p.pop()+" ":""}function s(p,m,g,x,v,w){if(p!==g||m!==x){var N=v.push("translate(",null,t,null,n);w.push({i:N-4,x:Gn(p,g)},{i:N-2,x:Gn(m,x)})}else(g||x)&&v.push("translate("+g+t+x+n)}function c(p,m,g,x){p!==m?(p-m>180?m+=360:m-p>180&&(p+=360),x.push({i:g.push(o(g)+"rotate(",null,a)-2,x:Gn(p,m)})):m&&g.push(o(g)+"rotate("+m+a)}function d(p,m,g,x){p!==m?x.push({i:g.push(o(g)+"skewX(",null,a)-2,x:Gn(p,m)}):m&&g.push(o(g)+"skewX("+m+a)}function h(p,m,g,x,v,w){if(p!==g||m!==x){var N=v.push(o(v)+"scale(",null,",",null,")");w.push({i:N-4,x:Gn(p,g)},{i:N-2,x:Gn(m,x)})}else(g!==1||x!==1)&&v.push(o(v)+"scale("+g+","+x+")")}return function(p,m){var g=[],x=[];return p=e(p),m=e(m),s(p.translateX,p.translateY,m.translateX,m.translateY,g,x),c(p.rotate,m.rotate,g,x),d(p.skewX,m.skewX,g,x),h(p.scaleX,p.scaleY,m.scaleX,m.scaleY,g,x),p=m=null,function(v){for(var w=-1,N=x.length,j;++w<N;)g[(j=x[w]).i]=j.x(v);return g.join("")}}}var CC=yw(EC,"px, ","px)","deg)"),AC=yw(kC,", ",")",")"),TC=1e-12;function vv(e){return((e=Math.exp(e))+1/e)/2}function MC(e){return((e=Math.exp(e))-1/e)/2}function DC(e){return((e=Math.exp(2*e))-1)/(e+1)}const _c=(function e(t,n,a){function o(s,c){var d=s[0],h=s[1],p=s[2],m=c[0],g=c[1],x=c[2],v=m-d,w=g-h,N=v*v+w*w,j,S;if(N<TC)S=Math.log(x/p)/t,j=function(z){return[d+z*v,h+z*w,p*Math.exp(t*z*S)]};else{var k=Math.sqrt(N),E=(x*x-p*p+a*N)/(2*p*n*k),T=(x*x-p*p-a*N)/(2*x*n*k),_=Math.log(Math.sqrt(E*E+1)-E),A=Math.log(Math.sqrt(T*T+1)-T);S=(A-_)/t,j=function(z){var G=z*S,F=vv(_),L=p/(n*k)*(F*DC(t*G+_)-MC(_));return[d+L*v,h+L*w,p*F/vv(t*G+_)]}}return j.duration=S*1e3*t/Math.SQRT2,j}return o.rho=function(s){var c=Math.max(.001,+s),d=c*c,h=d*d;return e(c,d,h)},o})(Math.SQRT2,2,4);var Va=0,ss=0,Jo=0,xw=1e3,Uc,ls,Fc=0,Pr=0,ou=0,bs=typeof performance=="object"&&performance.now?performance:Date,vw=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Rp(){return Pr||(vw(OC),Pr=bs.now()+ou)}function OC(){Pr=0}function Vc(){this._call=this._time=this._next=null}Vc.prototype=bw.prototype={constructor:Vc,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Rp():+n)+(t==null?0:+t),!this._next&&ls!==this&&(ls?ls._next=this:Uc=this,ls=this),this._call=e,this._time=n,tp()},stop:function(){this._call&&(this._call=null,this._time=1/0,tp())}};function bw(e,t,n){var a=new Vc;return a.restart(e,t,n),a}function _C(){Rp(),++Va;for(var e=Uc,t;e;)(t=Pr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Va}function bv(){Pr=(Fc=bs.now())+ou,Va=ss=0;try{_C()}finally{Va=0,IC(),Pr=0}}function RC(){var e=bs.now(),t=e-Fc;t>xw&&(ou-=t,Fc=e)}function IC(){for(var e,t=Uc,n,a=1/0;t;)t._call?(a>t._time&&(a=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Uc=n);ls=e,tp(a)}function tp(e){if(!Va){ss&&(ss=clearTimeout(ss));var t=e-Pr;t>24?(e<1/0&&(ss=setTimeout(bv,e-bs.now()-ou)),Jo&&(Jo=clearInterval(Jo))):(Jo||(Fc=bs.now(),Jo=setInterval(RC,xw)),Va=1,vw(bv))}}function wv(e,t,n){var a=new Vc;return t=t==null?0:+t,a.restart(o=>{a.stop(),e(o+t)},t,n),a}var LC=ru("start","end","cancel","interrupt"),zC=[],ww=0,Sv=1,np=2,Rc=3,Nv=4,ip=5,Ic=6;function su(e,t,n,a,o,s){var c=e.__transition;if(!c)e.__transition={};else if(n in c)return;BC(e,n,{name:t,index:a,group:o,on:LC,tween:zC,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:ww})}function Ip(e,t){var n=zn(e,t);if(n.state>ww)throw new Error("too late; already scheduled");return n}function Qn(e,t){var n=zn(e,t);if(n.state>Rc)throw new Error("too late; already running");return n}function zn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function BC(e,t,n){var a=e.__transition,o;a[t]=n,n.timer=bw(s,0,n.time);function s(p){n.state=Sv,n.timer.restart(c,n.delay,n.time),n.delay<=p&&c(p-n.delay)}function c(p){var m,g,x,v;if(n.state!==Sv)return h();for(m in a)if(v=a[m],v.name===n.name){if(v.state===Rc)return wv(c);v.state===Nv?(v.state=Ic,v.timer.stop(),v.on.call("interrupt",e,e.__data__,v.index,v.group),delete a[m]):+m<t&&(v.state=Ic,v.timer.stop(),v.on.call("cancel",e,e.__data__,v.index,v.group),delete a[m])}if(wv(function(){n.state===Rc&&(n.state=Nv,n.timer.restart(d,n.delay,n.time),d(p))}),n.state=np,n.on.call("start",e,e.__data__,n.index,n.group),n.state===np){for(n.state=Rc,o=new Array(x=n.tween.length),m=0,g=-1;m<x;++m)(v=n.tween[m].value.call(e,e.__data__,n.index,n.group))&&(o[++g]=v);o.length=g+1}}function d(p){for(var m=p<n.duration?n.ease.call(null,p/n.duration):(n.timer.restart(h),n.state=ip,1),g=-1,x=o.length;++g<x;)o[g].call(e,m);n.state===ip&&(n.on.call("end",e,e.__data__,n.index,n.group),h())}function h(){n.state=Ic,n.timer.stop(),delete a[t];for(var p in a)return;delete e.__transition}}function Lc(e,t){var n=e.__transition,a,o,s=!0,c;if(n){t=t==null?null:t+"";for(c in n){if((a=n[c]).name!==t){s=!1;continue}o=a.state>np&&a.state<ip,a.state=Ic,a.timer.stop(),a.on.call(o?"interrupt":"cancel",e,e.__data__,a.index,a.group),delete n[c]}s&&delete e.__transition}}function PC(e){return this.each(function(){Lc(this,e)})}function $C(e,t){var n,a;return function(){var o=Qn(this,e),s=o.tween;if(s!==n){a=n=s;for(var c=0,d=a.length;c<d;++c)if(a[c].name===t){a=a.slice(),a.splice(c,1);break}}o.tween=a}}function HC(e,t,n){var a,o;if(typeof n!="function")throw new Error;return function(){var s=Qn(this,e),c=s.tween;if(c!==a){o=(a=c).slice();for(var d={name:t,value:n},h=0,p=o.length;h<p;++h)if(o[h].name===t){o[h]=d;break}h===p&&o.push(d)}s.tween=o}}function qC(e,t){var n=this._id;if(e+="",arguments.length<2){for(var a=zn(this.node(),n).tween,o=0,s=a.length,c;o<s;++o)if((c=a[o]).name===e)return c.value;return null}return this.each((t==null?$C:HC)(n,e,t))}function Lp(e,t,n){var a=e._id;return e.each(function(){var o=Qn(this,a);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return zn(o,a).value[t]}}function Sw(e,t){var n;return(typeof t=="number"?Gn:t instanceof Br?qc:(n=Br(t))?(t=n,qc):mw)(e,t)}function UC(e){return function(){this.removeAttribute(e)}}function FC(e){return function(){this.removeAttributeNS(e.space,e.local)}}function VC(e,t,n){var a,o=n+"",s;return function(){var c=this.getAttribute(e);return c===o?null:c===a?s:s=t(a=c,n)}}function GC(e,t,n){var a,o=n+"",s;return function(){var c=this.getAttributeNS(e.space,e.local);return c===o?null:c===a?s:s=t(a=c,n)}}function WC(e,t,n){var a,o,s;return function(){var c,d=n(this),h;return d==null?void this.removeAttribute(e):(c=this.getAttribute(e),h=d+"",c===h?null:c===a&&h===o?s:(o=h,s=t(a=c,d)))}}function YC(e,t,n){var a,o,s;return function(){var c,d=n(this),h;return d==null?void this.removeAttributeNS(e.space,e.local):(c=this.getAttributeNS(e.space,e.local),h=d+"",c===h?null:c===a&&h===o?s:(o=h,s=t(a=c,d)))}}function XC(e,t){var n=au(e),a=n==="transform"?AC:Sw;return this.attrTween(e,typeof t=="function"?(n.local?YC:WC)(n,a,Lp(this,"attr."+e,t)):t==null?(n.local?FC:UC)(n):(n.local?GC:VC)(n,a,t))}function QC(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function JC(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function ZC(e,t){var n,a;function o(){var s=t.apply(this,arguments);return s!==a&&(n=(a=s)&&JC(e,s)),n}return o._value=t,o}function KC(e,t){var n,a;function o(){var s=t.apply(this,arguments);return s!==a&&(n=(a=s)&&QC(e,s)),n}return o._value=t,o}function eA(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var a=au(e);return this.tween(n,(a.local?ZC:KC)(a,t))}function tA(e,t){return function(){Ip(this,e).delay=+t.apply(this,arguments)}}function nA(e,t){return t=+t,function(){Ip(this,e).delay=t}}function iA(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?tA:nA)(t,e)):zn(this.node(),t).delay}function rA(e,t){return function(){Qn(this,e).duration=+t.apply(this,arguments)}}function aA(e,t){return t=+t,function(){Qn(this,e).duration=t}}function oA(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?rA:aA)(t,e)):zn(this.node(),t).duration}function sA(e,t){if(typeof t!="function")throw new Error;return function(){Qn(this,e).ease=t}}function lA(e){var t=this._id;return arguments.length?this.each(sA(t,e)):zn(this.node(),t).ease}function cA(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Qn(this,e).ease=n}}function uA(e){if(typeof e!="function")throw new Error;return this.each(cA(this._id,e))}function dA(e){typeof e!="function"&&(e=K0(e));for(var t=this._groups,n=t.length,a=new Array(n),o=0;o<n;++o)for(var s=t[o],c=s.length,d=a[o]=[],h,p=0;p<c;++p)(h=s[p])&&e.call(h,h.__data__,p,s)&&d.push(h);return new ji(a,this._parents,this._name,this._id)}function fA(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,a=t.length,o=n.length,s=Math.min(a,o),c=new Array(a),d=0;d<s;++d)for(var h=t[d],p=n[d],m=h.length,g=c[d]=new Array(m),x,v=0;v<m;++v)(x=h[v]||p[v])&&(g[v]=x);for(;d<a;++d)c[d]=t[d];return new ji(c,this._parents,this._name,this._id)}function hA(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function pA(e,t,n){var a,o,s=hA(t)?Ip:Qn;return function(){var c=s(this,e),d=c.on;d!==a&&(o=(a=d).copy()).on(t,n),c.on=o}}function mA(e,t){var n=this._id;return arguments.length<2?zn(this.node(),n).on.on(e):this.each(pA(n,e,t))}function gA(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function yA(){return this.on("end.remove",gA(this._id))}function xA(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Mp(e));for(var a=this._groups,o=a.length,s=new Array(o),c=0;c<o;++c)for(var d=a[c],h=d.length,p=s[c]=new Array(h),m,g,x=0;x<h;++x)(m=d[x])&&(g=e.call(m,m.__data__,x,d))&&("__data__"in m&&(g.__data__=m.__data__),p[x]=g,su(p[x],t,n,x,p,zn(m,n)));return new ji(s,this._parents,t,n)}function vA(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Z0(e));for(var a=this._groups,o=a.length,s=[],c=[],d=0;d<o;++d)for(var h=a[d],p=h.length,m,g=0;g<p;++g)if(m=h[g]){for(var x=e.call(m,m.__data__,g,h),v,w=zn(m,n),N=0,j=x.length;N<j;++N)(v=x[N])&&su(v,t,n,N,x,w);s.push(x),c.push(m)}return new ji(s,c,t,n)}var bA=Ds.prototype.constructor;function wA(){return new bA(this._groups,this._parents)}function SA(e,t){var n,a,o;return function(){var s=Fa(this,e),c=(this.style.removeProperty(e),Fa(this,e));return s===c?null:s===n&&c===a?o:o=t(n=s,a=c)}}function Nw(e){return function(){this.style.removeProperty(e)}}function NA(e,t,n){var a,o=n+"",s;return function(){var c=Fa(this,e);return c===o?null:c===a?s:s=t(a=c,n)}}function jA(e,t,n){var a,o,s;return function(){var c=Fa(this,e),d=n(this),h=d+"";return d==null&&(h=d=(this.style.removeProperty(e),Fa(this,e))),c===h?null:c===a&&h===o?s:(o=h,s=t(a=c,d))}}function EA(e,t){var n,a,o,s="style."+t,c="end."+s,d;return function(){var h=Qn(this,e),p=h.on,m=h.value[s]==null?d||(d=Nw(t)):void 0;(p!==n||o!==m)&&(a=(n=p).copy()).on(c,o=m),h.on=a}}function kA(e,t,n){var a=(e+="")=="transform"?CC:Sw;return t==null?this.styleTween(e,SA(e,a)).on("end.style."+e,Nw(e)):typeof t=="function"?this.styleTween(e,jA(e,a,Lp(this,"style."+e,t))).each(EA(this._id,e)):this.styleTween(e,NA(e,a,t),n).on("end.style."+e,null)}function CA(e,t,n){return function(a){this.style.setProperty(e,t.call(this,a),n)}}function AA(e,t,n){var a,o;function s(){var c=t.apply(this,arguments);return c!==o&&(a=(o=c)&&CA(e,c,n)),a}return s._value=t,s}function TA(e,t,n){var a="style."+(e+="");if(arguments.length<2)return(a=this.tween(a))&&a._value;if(t==null)return this.tween(a,null);if(typeof t!="function")throw new Error;return this.tween(a,AA(e,t,n??""))}function MA(e){return function(){this.textContent=e}}function DA(e){return function(){var t=e(this);this.textContent=t??""}}function OA(e){return this.tween("text",typeof e=="function"?DA(Lp(this,"text",e)):MA(e==null?"":e+""))}function _A(e){return function(t){this.textContent=e.call(this,t)}}function RA(e){var t,n;function a(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&_A(o)),t}return a._value=e,a}function IA(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,RA(e))}function LA(){for(var e=this._name,t=this._id,n=jw(),a=this._groups,o=a.length,s=0;s<o;++s)for(var c=a[s],d=c.length,h,p=0;p<d;++p)if(h=c[p]){var m=zn(h,t);su(h,e,n,p,c,{time:m.time+m.delay+m.duration,delay:0,duration:m.duration,ease:m.ease})}return new ji(a,this._parents,e,n)}function zA(){var e,t,n=this,a=n._id,o=n.size();return new Promise(function(s,c){var d={value:c},h={value:function(){--o===0&&s()}};n.each(function(){var p=Qn(this,a),m=p.on;m!==e&&(t=(e=m).copy(),t._.cancel.push(d),t._.interrupt.push(d),t._.end.push(h)),p.on=t}),o===0&&s()})}var BA=0;function ji(e,t,n,a){this._groups=e,this._parents=t,this._name=n,this._id=a}function jw(){return++BA}var wi=Ds.prototype;ji.prototype={constructor:ji,select:xA,selectAll:vA,selectChild:wi.selectChild,selectChildren:wi.selectChildren,filter:dA,merge:fA,selection:wA,transition:LA,call:wi.call,nodes:wi.nodes,node:wi.node,size:wi.size,empty:wi.empty,each:wi.each,on:mA,attr:XC,attrTween:eA,style:kA,styleTween:TA,text:OA,textTween:IA,remove:yA,tween:qC,delay:iA,duration:oA,ease:lA,easeVarying:uA,end:zA,[Symbol.iterator]:wi[Symbol.iterator]};function PA(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var $A={time:null,delay:0,duration:250,ease:PA};function HA(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function qA(e){var t,n;e instanceof ji?(t=e._id,e=e._name):(t=jw(),(n=$A).time=Rp(),e=e==null?null:e+"");for(var a=this._groups,o=a.length,s=0;s<o;++s)for(var c=a[s],d=c.length,h,p=0;p<d;++p)(h=c[p])&&su(h,e,t,p,c,n||HA(h,t));return new ji(a,this._parents,e,t)}Ds.prototype.interrupt=PC;Ds.prototype.transition=qA;const gc=e=>()=>e;function UA(e,{sourceEvent:t,target:n,transform:a,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:a,enumerable:!0,configurable:!0},_:{value:o}})}function Ni(e,t,n){this.k=e,this.x=t,this.y=n}Ni.prototype={constructor:Ni,scale:function(e){return e===1?this:new Ni(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ni(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var lu=new Ni(1,0,0);Ew.prototype=Ni.prototype;function Ew(e){for(;!e.__zoom;)if(!(e=e.parentNode))return lu;return e.__zoom}function Yf(e){e.stopImmediatePropagation()}function Zo(e){e.preventDefault(),e.stopImmediatePropagation()}function FA(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function VA(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function jv(){return this.__zoom||lu}function GA(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function WA(){return navigator.maxTouchPoints||"ontouchstart"in this}function YA(e,t,n){var a=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],c=e.invertY(t[1][1])-n[1][1];return e.translate(o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o),c>s?(s+c)/2:Math.min(0,s)||Math.max(0,c))}function kw(){var e=FA,t=VA,n=YA,a=GA,o=WA,s=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,h=_c,p=ru("start","zoom","end"),m,g,x,v=500,w=150,N=0,j=10;function S(D){D.property("__zoom",jv).on("wheel.zoom",G,{passive:!1}).on("mousedown.zoom",F).on("dblclick.zoom",L).filter(o).on("touchstart.zoom",$).on("touchmove.zoom",H).on("touchend.zoom touchcancel.zoom",Q).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}S.transform=function(D,q,I,V){var W=D.selection?D.selection():D;W.property("__zoom",jv),D!==W?_(D,q,I,V):W.interrupt().each(function(){A(this,arguments).event(V).start().zoom(null,typeof q=="function"?q.apply(this,arguments):q).end()})},S.scaleBy=function(D,q,I,V){S.scaleTo(D,function(){var W=this.__zoom.k,J=typeof q=="function"?q.apply(this,arguments):q;return W*J},I,V)},S.scaleTo=function(D,q,I,V){S.transform(D,function(){var W=t.apply(this,arguments),J=this.__zoom,O=I==null?T(W):typeof I=="function"?I.apply(this,arguments):I,R=J.invert(O),U=typeof q=="function"?q.apply(this,arguments):q;return n(E(k(J,U),O,R),W,c)},I,V)},S.translateBy=function(D,q,I,V){S.transform(D,function(){return n(this.__zoom.translate(typeof q=="function"?q.apply(this,arguments):q,typeof I=="function"?I.apply(this,arguments):I),t.apply(this,arguments),c)},null,V)},S.translateTo=function(D,q,I,V,W){S.transform(D,function(){var J=t.apply(this,arguments),O=this.__zoom,R=V==null?T(J):typeof V=="function"?V.apply(this,arguments):V;return n(lu.translate(R[0],R[1]).scale(O.k).translate(typeof q=="function"?-q.apply(this,arguments):-q,typeof I=="function"?-I.apply(this,arguments):-I),J,c)},V,W)};function k(D,q){return q=Math.max(s[0],Math.min(s[1],q)),q===D.k?D:new Ni(q,D.x,D.y)}function E(D,q,I){var V=q[0]-I[0]*D.k,W=q[1]-I[1]*D.k;return V===D.x&&W===D.y?D:new Ni(D.k,V,W)}function T(D){return[(+D[0][0]+ +D[1][0])/2,(+D[0][1]+ +D[1][1])/2]}function _(D,q,I,V){D.on("start.zoom",function(){A(this,arguments).event(V).start()}).on("interrupt.zoom end.zoom",function(){A(this,arguments).event(V).end()}).tween("zoom",function(){var W=this,J=arguments,O=A(W,J).event(V),R=t.apply(W,J),U=I==null?T(R):typeof I=="function"?I.apply(W,J):I,B=Math.max(R[1][0]-R[0][0],R[1][1]-R[0][1]),re=W.__zoom,de=typeof q=="function"?q.apply(W,J):q,fe=h(re.invert(U).concat(B/re.k),de.invert(U).concat(B/de.k));return function(ie){if(ie===1)ie=de;else{var te=fe(ie),ue=B/te[2];ie=new Ni(ue,U[0]-te[0]*ue,U[1]-te[1]*ue)}O.zoom(null,ie)}})}function A(D,q,I){return!I&&D.__zooming||new z(D,q)}function z(D,q){this.that=D,this.args=q,this.active=0,this.sourceEvent=null,this.extent=t.apply(D,q),this.taps=0}z.prototype={event:function(D){return D&&(this.sourceEvent=D),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(D,q){return this.mouse&&D!=="mouse"&&(this.mouse[1]=q.invert(this.mouse[0])),this.touch0&&D!=="touch"&&(this.touch0[1]=q.invert(this.touch0[0])),this.touch1&&D!=="touch"&&(this.touch1[1]=q.invert(this.touch1[0])),this.that.__zoom=q,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(D){var q=dn(this.that).datum();p.call(D,this.that,new UA(D,{sourceEvent:this.sourceEvent,target:S,transform:this.that.__zoom,dispatch:p}),q)}};function G(D,...q){if(!e.apply(this,arguments))return;var I=A(this,q).event(D),V=this.__zoom,W=Math.max(s[0],Math.min(s[1],V.k*Math.pow(2,a.apply(this,arguments)))),J=Dn(D);if(I.wheel)(I.mouse[0][0]!==J[0]||I.mouse[0][1]!==J[1])&&(I.mouse[1]=V.invert(I.mouse[0]=J)),clearTimeout(I.wheel);else{if(V.k===W)return;I.mouse=[J,V.invert(J)],Lc(this),I.start()}Zo(D),I.wheel=setTimeout(O,w),I.zoom("mouse",n(E(k(V,W),I.mouse[0],I.mouse[1]),I.extent,c));function O(){I.wheel=null,I.end()}}function F(D,...q){if(x||!e.apply(this,arguments))return;var I=D.currentTarget,V=A(this,q,!0).event(D),W=dn(D.view).on("mousemove.zoom",U,!0).on("mouseup.zoom",B,!0),J=Dn(D,I),O=D.clientX,R=D.clientY;cw(D.view),Yf(D),V.mouse=[J,this.__zoom.invert(J)],Lc(this),V.start();function U(re){if(Zo(re),!V.moved){var de=re.clientX-O,fe=re.clientY-R;V.moved=de*de+fe*fe>N}V.event(re).zoom("mouse",n(E(V.that.__zoom,V.mouse[0]=Dn(re,I),V.mouse[1]),V.extent,c))}function B(re){W.on("mousemove.zoom mouseup.zoom",null),uw(re.view,V.moved),Zo(re),V.event(re).end()}}function L(D,...q){if(e.apply(this,arguments)){var I=this.__zoom,V=Dn(D.changedTouches?D.changedTouches[0]:D,this),W=I.invert(V),J=I.k*(D.shiftKey?.5:2),O=n(E(k(I,J),V,W),t.apply(this,q),c);Zo(D),d>0?dn(this).transition().duration(d).call(_,O,V,D):dn(this).call(S.transform,O,V,D)}}function $(D,...q){if(e.apply(this,arguments)){var I=D.touches,V=I.length,W=A(this,q,D.changedTouches.length===V).event(D),J,O,R,U;for(Yf(D),O=0;O<V;++O)R=I[O],U=Dn(R,this),U=[U,this.__zoom.invert(U),R.identifier],W.touch0?!W.touch1&&W.touch0[2]!==U[2]&&(W.touch1=U,W.taps=0):(W.touch0=U,J=!0,W.taps=1+!!m);m&&(m=clearTimeout(m)),J&&(W.taps<2&&(g=U[0],m=setTimeout(function(){m=null},v)),Lc(this),W.start())}}function H(D,...q){if(this.__zooming){var I=A(this,q).event(D),V=D.changedTouches,W=V.length,J,O,R,U;for(Zo(D),J=0;J<W;++J)O=V[J],R=Dn(O,this),I.touch0&&I.touch0[2]===O.identifier?I.touch0[0]=R:I.touch1&&I.touch1[2]===O.identifier&&(I.touch1[0]=R);if(O=I.that.__zoom,I.touch1){var B=I.touch0[0],re=I.touch0[1],de=I.touch1[0],fe=I.touch1[1],ie=(ie=de[0]-B[0])*ie+(ie=de[1]-B[1])*ie,te=(te=fe[0]-re[0])*te+(te=fe[1]-re[1])*te;O=k(O,Math.sqrt(ie/te)),R=[(B[0]+de[0])/2,(B[1]+de[1])/2],U=[(re[0]+fe[0])/2,(re[1]+fe[1])/2]}else if(I.touch0)R=I.touch0[0],U=I.touch0[1];else return;I.zoom("touch",n(E(O,R,U),I.extent,c))}}function Q(D,...q){if(this.__zooming){var I=A(this,q).event(D),V=D.changedTouches,W=V.length,J,O;for(Yf(D),x&&clearTimeout(x),x=setTimeout(function(){x=null},v),J=0;J<W;++J)O=V[J],I.touch0&&I.touch0[2]===O.identifier?delete I.touch0:I.touch1&&I.touch1[2]===O.identifier&&delete I.touch1;if(I.touch1&&!I.touch0&&(I.touch0=I.touch1,delete I.touch1),I.touch0)I.touch0[1]=this.__zoom.invert(I.touch0[0]);else if(I.end(),I.taps===2&&(O=Dn(O,this),Math.hypot(g[0]-O[0],g[1]-O[1])<j)){var R=dn(this).on("dblclick.zoom");R&&R.apply(this,arguments)}}}return S.wheelDelta=function(D){return arguments.length?(a=typeof D=="function"?D:gc(+D),S):a},S.filter=function(D){return arguments.length?(e=typeof D=="function"?D:gc(!!D),S):e},S.touchable=function(D){return arguments.length?(o=typeof D=="function"?D:gc(!!D),S):o},S.extent=function(D){return arguments.length?(t=typeof D=="function"?D:gc([[+D[0][0],+D[0][1]],[+D[1][0],+D[1][1]]]),S):t},S.scaleExtent=function(D){return arguments.length?(s[0]=+D[0],s[1]=+D[1],S):[s[0],s[1]]},S.translateExtent=function(D){return arguments.length?(c[0][0]=+D[0][0],c[1][0]=+D[1][0],c[0][1]=+D[0][1],c[1][1]=+D[1][1],S):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},S.constrain=function(D){return arguments.length?(n=D,S):n},S.duration=function(D){return arguments.length?(d=+D,S):d},S.interpolate=function(D){return arguments.length?(h=D,S):h},S.on=function(){var D=p.on.apply(p,arguments);return D===p?S:D},S.clickDistance=function(D){return arguments.length?(N=(D=+D)*D,S):Math.sqrt(N)},S.tapDistance=function(D){return arguments.length?(j=+D,S):j},S}const Xn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:a})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:a}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},ws=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Cw=["Enter"," ","Escape"],Aw={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Ga;(function(e){e.Strict="strict",e.Loose="loose"})(Ga||(Ga={}));var zr;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(zr||(zr={}));var Ss;(function(e){e.Partial="partial",e.Full="full"})(Ss||(Ss={}));const Tw={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var lr;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(lr||(lr={}));var Gc;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Gc||(Gc={}));var ye;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(ye||(ye={}));const Ev={[ye.Left]:ye.Right,[ye.Right]:ye.Left,[ye.Top]:ye.Bottom,[ye.Bottom]:ye.Top};function Mw(e){return e===null?null:e?"valid":"invalid"}const Dw=e=>"id"in e&&"source"in e&&"target"in e,XA=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),zp=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),_s=(e,t=[0,0])=>{const{width:n,height:a}=Ei(e),o=e.origin??t,s=n*o[0],c=a*o[1];return{x:e.position.x-s,y:e.position.y-c}},QA=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((a,o)=>{const s=typeof o=="string";let c=!t.nodeLookup&&!s?o:void 0;t.nodeLookup&&(c=s?t.nodeLookup.get(o):zp(o)?o:t.nodeLookup.get(o.id));const d=c?Wc(c,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return cu(a,d)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return uu(n)},Rs=(e,t={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},a=!1;return e.forEach(o=>{(t.filter===void 0||t.filter(o))&&(n=cu(n,Wc(o)),a=!0)}),a?uu(n):{x:0,y:0,width:0,height:0}},Bp=(e,t,[n,a,o]=[0,0,1],s=!1,c=!1)=>{const d={...Ls(t,[n,a,o]),width:t.width/o,height:t.height/o},h=[];for(const p of e.values()){const{measured:m,selectable:g=!0,hidden:x=!1}=p;if(c&&!g||x)continue;const v=m.width??p.width??p.initialWidth??null,w=m.height??p.height??p.initialHeight??null,N=Ns(d,Ya(p)),j=(v??0)*(w??0),S=s&&N>0;(!p.internals.handleBounds||S||N>=j||p.dragging)&&h.push(p)}return h},JA=(e,t)=>{const n=new Set;return e.forEach(a=>{n.add(a.id)}),t.filter(a=>n.has(a.source)||n.has(a.target))};function ZA(e,t){const n=new Map,a=t?.nodes?new Set(t.nodes.map(o=>o.id)):null;return e.forEach(o=>{o.measured.width&&o.measured.height&&(t?.includeHiddenNodes||!o.hidden)&&(!a||a.has(o.id))&&n.set(o.id,o)}),n}async function KA({nodes:e,width:t,height:n,panZoom:a,minZoom:o,maxZoom:s},c){if(e.size===0)return Promise.resolve(!0);const d=ZA(e,c),h=Rs(d),p=Pp(h,t,n,c?.minZoom??o,c?.maxZoom??s,c?.padding??.1);return await a.setViewport(p,{duration:c?.duration,ease:c?.ease,interpolate:c?.interpolate}),Promise.resolve(!0)}function Ow({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:a=[0,0],nodeExtent:o,onError:s}){const c=n.get(e),d=c.parentId?n.get(c.parentId):void 0,{x:h,y:p}=d?d.internals.positionAbsolute:{x:0,y:0},m=c.origin??a;let g=c.extent||o;if(c.extent==="parent"&&!c.expandParent)if(!d)s?.("005",Xn.error005());else{const v=d.measured.width,w=d.measured.height;v&&w&&(g=[[h,p],[h+v,p+w]])}else d&&Xa(c.extent)&&(g=[[c.extent[0][0]+h,c.extent[0][1]+p],[c.extent[1][0]+h,c.extent[1][1]+p]]);const x=Xa(g)?$r(t,g,c.measured):t;return(c.measured.width===void 0||c.measured.height===void 0)&&s?.("015",Xn.error015()),{position:{x:x.x-h+(c.measured.width??0)*m[0],y:x.y-p+(c.measured.height??0)*m[1]},positionAbsolute:x}}async function eT({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:a,onBeforeDelete:o}){const s=new Set(e.map(x=>x.id)),c=[];for(const x of n){if(x.deletable===!1)continue;const v=s.has(x.id),w=!v&&x.parentId&&c.find(N=>N.id===x.parentId);(v||w)&&c.push(x)}const d=new Set(t.map(x=>x.id)),h=a.filter(x=>x.deletable!==!1),m=JA(c,h);for(const x of h)d.has(x.id)&&!m.find(w=>w.id===x.id)&&m.push(x);if(!o)return{edges:m,nodes:c};const g=await o({nodes:c,edges:m});return typeof g=="boolean"?g?{edges:m,nodes:c}:{edges:[],nodes:[]}:g}const Wa=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),$r=(e={x:0,y:0},t,n)=>({x:Wa(e.x,t[0][0],t[1][0]-(n?.width??0)),y:Wa(e.y,t[0][1],t[1][1]-(n?.height??0))});function _w(e,t,n){const{width:a,height:o}=Ei(n),{x:s,y:c}=n.internals.positionAbsolute;return $r(e,[[s,c],[s+a,c+o]],t)}const kv=(e,t,n)=>e<t?Wa(Math.abs(e-t),1,t)/t:e>n?-Wa(Math.abs(e-n),1,t)/t:0,Rw=(e,t,n=15,a=40)=>{const o=kv(e.x,a,t.width-a)*n,s=kv(e.y,a,t.height-a)*n;return[o,s]},cu=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),rp=({x:e,y:t,width:n,height:a})=>({x:e,y:t,x2:e+n,y2:t+a}),uu=({x:e,y:t,x2:n,y2:a})=>({x:e,y:t,width:n-e,height:a-t}),Ya=(e,t=[0,0])=>{const{x:n,y:a}=zp(e)?e.internals.positionAbsolute:_s(e,t);return{x:n,y:a,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},Wc=(e,t=[0,0])=>{const{x:n,y:a}=zp(e)?e.internals.positionAbsolute:_s(e,t);return{x:n,y:a,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:a+(e.measured?.height??e.height??e.initialHeight??0)}},Iw=(e,t)=>uu(cu(rp(e),rp(t))),Ns=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),a=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*a)},Cv=e=>_n(e.width)&&_n(e.height)&&_n(e.x)&&_n(e.y),_n=e=>!isNaN(e)&&isFinite(e),tT=(e,t)=>{},Is=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Ls=({x:e,y:t},[n,a,o],s=!1,c=[1,1])=>{const d={x:(e-n)/o,y:(t-a)/o};return s?Is(d,c):d},Yc=({x:e,y:t},[n,a,o])=>({x:e*o+n,y:t*o+a});function _a(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function nT(e,t,n){if(typeof e=="string"||typeof e=="number"){const a=_a(e,n),o=_a(e,t);return{top:a,right:o,bottom:a,left:o,x:o*2,y:a*2}}if(typeof e=="object"){const a=_a(e.top??e.y??0,n),o=_a(e.bottom??e.y??0,n),s=_a(e.left??e.x??0,t),c=_a(e.right??e.x??0,t);return{top:a,right:c,bottom:o,left:s,x:s+c,y:a+o}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function iT(e,t,n,a,o,s){const{x:c,y:d}=Yc(e,[t,n,a]),{x:h,y:p}=Yc({x:e.x+e.width,y:e.y+e.height},[t,n,a]),m=o-h,g=s-p;return{left:Math.floor(c),top:Math.floor(d),right:Math.floor(m),bottom:Math.floor(g)}}const Pp=(e,t,n,a,o,s)=>{const c=nT(s,t,n),d=(t-c.x)/e.width,h=(n-c.y)/e.height,p=Math.min(d,h),m=Wa(p,a,o),g=e.x+e.width/2,x=e.y+e.height/2,v=t/2-g*m,w=n/2-x*m,N=iT(e,v,w,m,t,n),j={left:Math.min(N.left-c.left,0),top:Math.min(N.top-c.top,0),right:Math.min(N.right-c.right,0),bottom:Math.min(N.bottom-c.bottom,0)};return{x:v-j.left+j.right,y:w-j.top+j.bottom,zoom:m}},js=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Xa(e){return e!=null&&e!=="parent"}function Ei(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function Lw(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function zw(e,t={width:0,height:0},n,a,o){const s={...e},c=a.get(n);if(c){const d=c.origin||o;s.x+=c.internals.positionAbsolute.x-(t.width??0)*d[0],s.y+=c.internals.positionAbsolute.y-(t.height??0)*d[1]}return s}function Av(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function rT(){let e,t;return{promise:new Promise((a,o)=>{e=a,t=o}),resolve:e,reject:t}}function aT(e){return{...Aw,...e||{}}}function ds(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:a,containerBounds:o}){const{x:s,y:c}=Rn(e),d=Ls({x:s-(o?.left??0),y:c-(o?.top??0)},a),{x:h,y:p}=n?Is(d,t):d;return{xSnapped:h,ySnapped:p,...d}}const $p=e=>({width:e.offsetWidth,height:e.offsetHeight}),Bw=e=>e?.getRootNode?.()||window?.document,oT=["INPUT","SELECT","TEXTAREA"];function Pw(e){const t=e.composedPath?.()?.[0]||e.target;return t?.nodeType!==1?!1:oT.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const $w=e=>"clientX"in e,Rn=(e,t)=>{const n=$w(e),a=n?e.clientX:e.touches?.[0].clientX,o=n?e.clientY:e.touches?.[0].clientY;return{x:a-(t?.left??0),y:o-(t?.top??0)}},Tv=(e,t,n,a,o)=>{const s=t.querySelectorAll(`.${e}`);return!s||!s.length?null:Array.from(s).map(c=>{const d=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),type:e,nodeId:o,position:c.getAttribute("data-handlepos"),x:(d.left-n.left)/a,y:(d.top-n.top)/a,...$p(c)}})};function Hw({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:o,sourceControlY:s,targetControlX:c,targetControlY:d}){const h=e*.125+o*.375+c*.375+n*.125,p=t*.125+s*.375+d*.375+a*.125,m=Math.abs(h-e),g=Math.abs(p-t);return[h,p,m,g]}function yc(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Mv({pos:e,x1:t,y1:n,x2:a,y2:o,c:s}){switch(e){case ye.Left:return[t-yc(t-a,s),n];case ye.Right:return[t+yc(a-t,s),n];case ye.Top:return[t,n-yc(n-o,s)];case ye.Bottom:return[t,n+yc(o-n,s)]}}function qw({sourceX:e,sourceY:t,sourcePosition:n=ye.Bottom,targetX:a,targetY:o,targetPosition:s=ye.Top,curvature:c=.25}){const[d,h]=Mv({pos:n,x1:e,y1:t,x2:a,y2:o,c}),[p,m]=Mv({pos:s,x1:a,y1:o,x2:e,y2:t,c}),[g,x,v,w]=Hw({sourceX:e,sourceY:t,targetX:a,targetY:o,sourceControlX:d,sourceControlY:h,targetControlX:p,targetControlY:m});return[`M${e},${t} C${d},${h} ${p},${m} ${a},${o}`,g,x,v,w]}function Uw({sourceX:e,sourceY:t,targetX:n,targetY:a}){const o=Math.abs(n-e)/2,s=n<e?n+o:n-o,c=Math.abs(a-t)/2,d=a<t?a+c:a-c;return[s,d,o,c]}function sT({sourceNode:e,targetNode:t,selected:n=!1,zIndex:a=0,elevateOnSelect:o=!1,zIndexMode:s="basic"}){if(s==="manual")return a;const c=o&&n?a+1e3:a,d=Math.max(e.parentId||o&&e.selected?e.internals.z:0,t.parentId||o&&t.selected?t.internals.z:0);return c+d}function lT({sourceNode:e,targetNode:t,width:n,height:a,transform:o}){const s=cu(Wc(e),Wc(t));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const c={x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:a/o[2]};return Ns(c,uu(s))>0}const cT=({source:e,sourceHandle:t,target:n,targetHandle:a})=>`xy-edge__${e}${t||""}-${n}${a||""}`,uT=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Fw=(e,t,n={})=>{if(!e.source||!e.target)return t;const a=n.getEdgeId||cT;let o;return Dw(e)?o={...e}:o={...e,id:a(e)},uT(o,t)?t:(o.sourceHandle===null&&delete o.sourceHandle,o.targetHandle===null&&delete o.targetHandle,t.concat(o))};function Vw({sourceX:e,sourceY:t,targetX:n,targetY:a}){const[o,s,c,d]=Uw({sourceX:e,sourceY:t,targetX:n,targetY:a});return[`M ${e},${t}L ${n},${a}`,o,s,c,d]}const Dv={[ye.Left]:{x:-1,y:0},[ye.Right]:{x:1,y:0},[ye.Top]:{x:0,y:-1},[ye.Bottom]:{x:0,y:1}},dT=({source:e,sourcePosition:t=ye.Bottom,target:n})=>t===ye.Left||t===ye.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Ov=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function fT({source:e,sourcePosition:t=ye.Bottom,target:n,targetPosition:a=ye.Top,center:o,offset:s,stepPosition:c}){const d=Dv[t],h=Dv[a],p={x:e.x+d.x*s,y:e.y+d.y*s},m={x:n.x+h.x*s,y:n.y+h.y*s},g=dT({source:p,sourcePosition:t,target:m}),x=g.x!==0?"x":"y",v=g[x];let w=[],N,j;const S={x:0,y:0},k={x:0,y:0},[,,E,T]=Uw({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(d[x]*h[x]===-1){x==="x"?(N=o.x??p.x+(m.x-p.x)*c,j=o.y??(p.y+m.y)/2):(N=o.x??(p.x+m.x)/2,j=o.y??p.y+(m.y-p.y)*c);const A=[{x:N,y:p.y},{x:N,y:m.y}],z=[{x:p.x,y:j},{x:m.x,y:j}];d[x]===v?w=x==="x"?A:z:w=x==="x"?z:A}else{const A=[{x:p.x,y:m.y}],z=[{x:m.x,y:p.y}];if(x==="x"?w=d.x===v?z:A:w=d.y===v?A:z,t===a){const H=Math.abs(e[x]-n[x]);if(H<=s){const Q=Math.min(s-1,s-H);d[x]===v?S[x]=(p[x]>e[x]?-1:1)*Q:k[x]=(m[x]>n[x]?-1:1)*Q}}if(t!==a){const H=x==="x"?"y":"x",Q=d[x]===h[H],D=p[H]>m[H],q=p[H]<m[H];(d[x]===1&&(!Q&&D||Q&&q)||d[x]!==1&&(!Q&&q||Q&&D))&&(w=x==="x"?A:z)}const G={x:p.x+S.x,y:p.y+S.y},F={x:m.x+k.x,y:m.y+k.y},L=Math.max(Math.abs(G.x-w[0].x),Math.abs(F.x-w[0].x)),$=Math.max(Math.abs(G.y-w[0].y),Math.abs(F.y-w[0].y));L>=$?(N=(G.x+F.x)/2,j=w[0].y):(N=w[0].x,j=(G.y+F.y)/2)}return[[e,{x:p.x+S.x,y:p.y+S.y},...w,{x:m.x+k.x,y:m.y+k.y},n],N,j,E,T]}function hT(e,t,n,a){const o=Math.min(Ov(e,t)/2,Ov(t,n)/2,a),{x:s,y:c}=t;if(e.x===s&&s===n.x||e.y===c&&c===n.y)return`L${s} ${c}`;if(e.y===c){const p=e.x<n.x?-1:1,m=e.y<n.y?1:-1;return`L ${s+o*p},${c}Q ${s},${c} ${s},${c+o*m}`}const d=e.x<n.x?1:-1,h=e.y<n.y?-1:1;return`L ${s},${c+o*h}Q ${s},${c} ${s+o*d},${c}`}function ap({sourceX:e,sourceY:t,sourcePosition:n=ye.Bottom,targetX:a,targetY:o,targetPosition:s=ye.Top,borderRadius:c=5,centerX:d,centerY:h,offset:p=20,stepPosition:m=.5}){const[g,x,v,w,N]=fT({source:{x:e,y:t},sourcePosition:n,target:{x:a,y:o},targetPosition:s,center:{x:d,y:h},offset:p,stepPosition:m});return[g.reduce((S,k,E)=>{let T="";return E>0&&E<g.length-1?T=hT(g[E-1],k,g[E+1],c):T=`${E===0?"M":"L"}${k.x} ${k.y}`,S+=T,S},""),x,v,w,N]}function _v(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function pT(e){const{sourceNode:t,targetNode:n}=e;if(!_v(t)||!_v(n))return null;const a=t.internals.handleBounds||Rv(t.handles),o=n.internals.handleBounds||Rv(n.handles),s=Iv(a?.source??[],e.sourceHandle),c=Iv(e.connectionMode===Ga.Strict?o?.target??[]:(o?.target??[]).concat(o?.source??[]),e.targetHandle);if(!s||!c)return e.onError?.("008",Xn.error008(s?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const d=s?.position||ye.Bottom,h=c?.position||ye.Top,p=Hr(t,s,d),m=Hr(n,c,h);return{sourceX:p.x,sourceY:p.y,targetX:m.x,targetY:m.y,sourcePosition:d,targetPosition:h}}function Rv(e){if(!e)return null;const t=[],n=[];for(const a of e)a.width=a.width??1,a.height=a.height??1,a.type==="source"?t.push(a):a.type==="target"&&n.push(a);return{source:t,target:n}}function Hr(e,t,n=ye.Left,a=!1){const o=(t?.x??0)+e.internals.positionAbsolute.x,s=(t?.y??0)+e.internals.positionAbsolute.y,{width:c,height:d}=t??Ei(e);if(a)return{x:o+c/2,y:s+d/2};switch(t?.position??n){case ye.Top:return{x:o+c/2,y:s};case ye.Right:return{x:o+c,y:s+d/2};case ye.Bottom:return{x:o+c/2,y:s+d};case ye.Left:return{x:o,y:s+d/2}}}function Iv(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function op(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(a=>`${a}=${e[a]}`).join("&")}`:""}function mT(e,{id:t,defaultColor:n,defaultMarkerStart:a,defaultMarkerEnd:o}){const s=new Set;return e.reduce((c,d)=>([d.markerStart||a,d.markerEnd||o].forEach(h=>{if(h&&typeof h=="object"){const p=op(h,t);s.has(p)||(c.push({id:p,color:h.color||n,...h}),s.add(p))}}),c),[]).sort((c,d)=>c.id.localeCompare(d.id))}const Gw=1e3,gT=10,Hp={nodeOrigin:[0,0],nodeExtent:ws,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},yT={...Hp,checkEquality:!0};function qp(e,t){const n={...e};for(const a in t)t[a]!==void 0&&(n[a]=t[a]);return n}function xT(e,t,n){const a=qp(Hp,n);for(const o of e.values())if(o.parentId)Fp(o,e,t,a);else{const s=_s(o,a.nodeOrigin),c=Xa(o.extent)?o.extent:a.nodeExtent,d=$r(s,c,Ei(o));o.internals.positionAbsolute=d}}function vT(e,t){if(!e.handles)return e.measured?t?.internals.handleBounds:void 0;const n=[],a=[];for(const o of e.handles){const s={id:o.id,width:o.width??1,height:o.height??1,nodeId:e.id,x:o.x,y:o.y,position:o.position,type:o.type};o.type==="source"?n.push(s):o.type==="target"&&a.push(s)}return{source:n,target:a}}function Up(e){return e==="manual"}function sp(e,t,n,a={}){const o=qp(yT,a),s={i:0},c=new Map(t),d=o?.elevateNodesOnSelect&&!Up(o.zIndexMode)?Gw:0;let h=e.length>0;t.clear(),n.clear();for(const p of e){let m=c.get(p.id);if(o.checkEquality&&p===m?.internals.userNode)t.set(p.id,m);else{const g=_s(p,o.nodeOrigin),x=Xa(p.extent)?p.extent:o.nodeExtent,v=$r(g,x,Ei(p));m={...o.defaults,...p,measured:{width:p.measured?.width,height:p.measured?.height},internals:{positionAbsolute:v,handleBounds:vT(p,m),z:Ww(p,d,o.zIndexMode),userNode:p}},t.set(p.id,m)}(m.measured===void 0||m.measured.width===void 0||m.measured.height===void 0)&&!m.hidden&&(h=!1),p.parentId&&Fp(m,t,n,a,s)}return h}function bT(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function Fp(e,t,n,a,o){const{elevateNodesOnSelect:s,nodeOrigin:c,nodeExtent:d,zIndexMode:h}=qp(Hp,a),p=e.parentId,m=t.get(p);if(!m){console.warn(`Parent node ${p} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}bT(e,n),o&&!m.parentId&&m.internals.rootParentIndex===void 0&&h==="auto"&&(m.internals.rootParentIndex=++o.i,m.internals.z=m.internals.z+o.i*gT),o&&m.internals.rootParentIndex!==void 0&&(o.i=m.internals.rootParentIndex);const g=s&&!Up(h)?Gw:0,{x,y:v,z:w}=wT(e,m,c,d,g,h),{positionAbsolute:N}=e.internals,j=x!==N.x||v!==N.y;(j||w!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:j?{x,y:v}:N,z:w}})}function Ww(e,t,n){const a=_n(e.zIndex)?e.zIndex:0;return Up(n)?a:a+(e.selected?t:0)}function wT(e,t,n,a,o,s){const{x:c,y:d}=t.internals.positionAbsolute,h=Ei(e),p=_s(e,n),m=Xa(e.extent)?$r(p,e.extent,h):p;let g=$r({x:c+m.x,y:d+m.y},a,h);e.extent==="parent"&&(g=_w(g,h,t));const x=Ww(e,o,s),v=t.internals.z??0;return{x:g.x,y:g.y,z:v>=x?v+1:x}}function Vp(e,t,n,a=[0,0]){const o=[],s=new Map;for(const c of e){const d=t.get(c.parentId);if(!d)continue;const h=s.get(c.parentId)?.expandedRect??Ya(d),p=Iw(h,c.rect);s.set(c.parentId,{expandedRect:p,parent:d})}return s.size>0&&s.forEach(({expandedRect:c,parent:d},h)=>{const p=d.internals.positionAbsolute,m=Ei(d),g=d.origin??a,x=c.x<p.x?Math.round(Math.abs(p.x-c.x)):0,v=c.y<p.y?Math.round(Math.abs(p.y-c.y)):0,w=Math.max(m.width,Math.round(c.width)),N=Math.max(m.height,Math.round(c.height)),j=(w-m.width)*g[0],S=(N-m.height)*g[1];(x>0||v>0||j||S)&&(o.push({id:h,type:"position",position:{x:d.position.x-x+j,y:d.position.y-v+S}}),n.get(h)?.forEach(k=>{e.some(E=>E.id===k.id)||o.push({id:k.id,type:"position",position:{x:k.position.x+x,y:k.position.y+v}})})),(m.width<c.width||m.height<c.height||x||v)&&o.push({id:h,type:"dimensions",setAttributes:!0,dimensions:{width:w+(x?g[0]*x-j:0),height:N+(v?g[1]*v-S:0)}})}),o}function ST(e,t,n,a,o,s,c){const d=a?.querySelector(".xyflow__viewport");let h=!1;if(!d)return{changes:[],updatedInternals:h};const p=[],m=window.getComputedStyle(d),{m22:g}=new window.DOMMatrixReadOnly(m.transform),x=[];for(const v of e.values()){const w=t.get(v.id);if(!w)continue;if(w.hidden){t.set(w.id,{...w,internals:{...w.internals,handleBounds:void 0}}),h=!0;continue}const N=$p(v.nodeElement),j=w.measured.width!==N.width||w.measured.height!==N.height;if(!!(N.width&&N.height&&(j||!w.internals.handleBounds||v.force))){const k=v.nodeElement.getBoundingClientRect(),E=Xa(w.extent)?w.extent:s;let{positionAbsolute:T}=w.internals;w.parentId&&w.extent==="parent"?T=_w(T,N,t.get(w.parentId)):E&&(T=$r(T,E,N));const _={...w,measured:N,internals:{...w.internals,positionAbsolute:T,handleBounds:{source:Tv("source",v.nodeElement,k,g,w.id),target:Tv("target",v.nodeElement,k,g,w.id)}}};t.set(w.id,_),w.parentId&&Fp(_,t,n,{nodeOrigin:o,zIndexMode:c}),h=!0,j&&(p.push({id:w.id,type:"dimensions",dimensions:N}),w.expandParent&&w.parentId&&x.push({id:w.id,parentId:w.parentId,rect:Ya(_,o)}))}}if(x.length>0){const v=Vp(x,t,n,o);p.push(...v)}return{changes:p,updatedInternals:h}}async function NT({delta:e,panZoom:t,transform:n,translateExtent:a,width:o,height:s}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const c=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[o,s]],a),d=!!c&&(c.x!==n[0]||c.y!==n[1]||c.k!==n[2]);return Promise.resolve(d)}function Lv(e,t,n,a,o,s){let c=o;const d=a.get(c)||new Map;a.set(c,d.set(n,t)),c=`${o}-${e}`;const h=a.get(c)||new Map;if(a.set(c,h.set(n,t)),s){c=`${o}-${e}-${s}`;const p=a.get(c)||new Map;a.set(c,p.set(n,t))}}function Yw(e,t,n){e.clear(),t.clear();for(const a of n){const{source:o,target:s,sourceHandle:c=null,targetHandle:d=null}=a,h={edgeId:a.id,source:o,target:s,sourceHandle:c,targetHandle:d},p=`${o}-${c}--${s}-${d}`,m=`${s}-${d}--${o}-${c}`;Lv("source",h,m,e,o,c),Lv("target",h,p,e,s,d),t.set(a.id,a)}}function Xw(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:Xw(n,t):!1}function zv(e,t,n){let a=e;do{if(a?.matches?.(t))return!0;if(a===n)return!1;a=a?.parentElement}while(a);return!1}function jT(e,t,n,a){const o=new Map;for(const[s,c]of e)if((c.selected||c.id===a)&&(!c.parentId||!Xw(c,e))&&(c.draggable||t&&typeof c.draggable>"u")){const d=e.get(s);d&&o.set(s,{id:s,position:d.position||{x:0,y:0},distance:{x:n.x-d.internals.positionAbsolute.x,y:n.y-d.internals.positionAbsolute.y},extent:d.extent,parentId:d.parentId,origin:d.origin,expandParent:d.expandParent,internals:{positionAbsolute:d.internals.positionAbsolute||{x:0,y:0}},measured:{width:d.measured.width??0,height:d.measured.height??0}})}return o}function Xf({nodeId:e,dragItems:t,nodeLookup:n,dragging:a=!0}){const o=[];for(const[c,d]of t){const h=n.get(c)?.internals.userNode;h&&o.push({...h,position:d.position,dragging:a})}if(!e)return[o[0],o];const s=n.get(e)?.internals.userNode;return[s?{...s,position:t.get(e)?.position||s.position,dragging:a}:o[0],o]}function ET({dragItems:e,snapGrid:t,x:n,y:a}){const o=e.values().next().value;if(!o)return null;const s={x:n-o.distance.x,y:a-o.distance.y},c=Is(s,t);return{x:c.x-s.x,y:c.y-s.y}}function kT({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:a,onDragStop:o}){let s={x:null,y:null},c=0,d=new Map,h=!1,p={x:0,y:0},m=null,g=!1,x=null,v=!1,w=!1,N=null;function j({noDragClassName:k,handleSelector:E,domNode:T,isSelectable:_,nodeId:A,nodeClickDistance:z=0}){x=dn(T);function G({x:H,y:Q}){const{nodeLookup:D,nodeExtent:q,snapGrid:I,snapToGrid:V,nodeOrigin:W,onNodeDrag:J,onSelectionDrag:O,onError:R,updateNodePositions:U}=t();s={x:H,y:Q};let B=!1;const re=d.size>1,de=re&&q?rp(Rs(d)):null,fe=re&&V?ET({dragItems:d,snapGrid:I,x:H,y:Q}):null;for(const[ie,te]of d){if(!D.has(ie))continue;let ue={x:H-te.distance.x,y:Q-te.distance.y};V&&(ue=fe?{x:Math.round(ue.x+fe.x),y:Math.round(ue.y+fe.y)}:Is(ue,I));let me=null;if(re&&q&&!te.extent&&de){const{positionAbsolute:we}=te.internals,Ce=we.x-de.x+q[0][0],Ue=we.x+te.measured.width-de.x2+q[1][0],$e=we.y-de.y+q[0][1],ut=we.y+te.measured.height-de.y2+q[1][1];me=[[Ce,$e],[Ue,ut]]}const{position:ge,positionAbsolute:xe}=Ow({nodeId:ie,nextPosition:ue,nodeLookup:D,nodeExtent:me||q,nodeOrigin:W,onError:R});B=B||te.position.x!==ge.x||te.position.y!==ge.y,te.position=ge,te.internals.positionAbsolute=xe}if(w=w||B,!!B&&(U(d,!0),N&&(a||J||!A&&O))){const[ie,te]=Xf({nodeId:A,dragItems:d,nodeLookup:D});a?.(N,d,ie,te),J?.(N,ie,te),A||O?.(N,te)}}async function F(){if(!m)return;const{transform:H,panBy:Q,autoPanSpeed:D,autoPanOnNodeDrag:q}=t();if(!q){h=!1,cancelAnimationFrame(c);return}const[I,V]=Rw(p,m,D);(I!==0||V!==0)&&(s.x=(s.x??0)-I/H[2],s.y=(s.y??0)-V/H[2],await Q({x:I,y:V})&&G(s)),c=requestAnimationFrame(F)}function L(H){const{nodeLookup:Q,multiSelectionActive:D,nodesDraggable:q,transform:I,snapGrid:V,snapToGrid:W,selectNodesOnDrag:J,onNodeDragStart:O,onSelectionDragStart:R,unselectNodesAndEdges:U}=t();g=!0,(!J||!_)&&!D&&A&&(Q.get(A)?.selected||U()),_&&J&&A&&e?.(A);const B=ds(H.sourceEvent,{transform:I,snapGrid:V,snapToGrid:W,containerBounds:m});if(s=B,d=jT(Q,q,B,A),d.size>0&&(n||O||!A&&R)){const[re,de]=Xf({nodeId:A,dragItems:d,nodeLookup:Q});n?.(H.sourceEvent,d,re,de),O?.(H.sourceEvent,re,de),A||R?.(H.sourceEvent,de)}}const $=dw().clickDistance(z).on("start",H=>{const{domNode:Q,nodeDragThreshold:D,transform:q,snapGrid:I,snapToGrid:V}=t();m=Q?.getBoundingClientRect()||null,v=!1,w=!1,N=H.sourceEvent,D===0&&L(H),s=ds(H.sourceEvent,{transform:q,snapGrid:I,snapToGrid:V,containerBounds:m}),p=Rn(H.sourceEvent,m)}).on("drag",H=>{const{autoPanOnNodeDrag:Q,transform:D,snapGrid:q,snapToGrid:I,nodeDragThreshold:V,nodeLookup:W}=t(),J=ds(H.sourceEvent,{transform:D,snapGrid:q,snapToGrid:I,containerBounds:m});if(N=H.sourceEvent,(H.sourceEvent.type==="touchmove"&&H.sourceEvent.touches.length>1||A&&!W.has(A))&&(v=!0),!v){if(!h&&Q&&g&&(h=!0,F()),!g){const O=Rn(H.sourceEvent,m),R=O.x-p.x,U=O.y-p.y;Math.sqrt(R*R+U*U)>V&&L(H)}(s.x!==J.xSnapped||s.y!==J.ySnapped)&&d&&g&&(p=Rn(H.sourceEvent,m),G(J))}}).on("end",H=>{if(!(!g||v)&&(h=!1,g=!1,cancelAnimationFrame(c),d.size>0)){const{nodeLookup:Q,updateNodePositions:D,onNodeDragStop:q,onSelectionDragStop:I}=t();if(w&&(D(d,!1),w=!1),o||q||!A&&I){const[V,W]=Xf({nodeId:A,dragItems:d,nodeLookup:Q,dragging:!1});o?.(H.sourceEvent,d,V,W),q?.(H.sourceEvent,V,W),A||I?.(H.sourceEvent,W)}}}).filter(H=>{const Q=H.target;return!H.button&&(!k||!zv(Q,`.${k}`,T))&&(!E||zv(Q,E,T))});x.call($)}function S(){x?.on(".drag",null)}return{update:j,destroy:S}}function CT(e,t,n){const a=[],o={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const s of t.values())Ns(o,Ya(s))>0&&a.push(s);return a}const AT=250;function TT(e,t,n,a){let o=[],s=1/0;const c=CT(e,n,t+AT);for(const d of c){const h=[...d.internals.handleBounds?.source??[],...d.internals.handleBounds?.target??[]];for(const p of h){if(a.nodeId===p.nodeId&&a.type===p.type&&a.id===p.id)continue;const{x:m,y:g}=Hr(d,p,p.position,!0),x=Math.sqrt(Math.pow(m-e.x,2)+Math.pow(g-e.y,2));x>t||(x<s?(o=[{...p,x:m,y:g}],s=x):x===s&&o.push({...p,x:m,y:g}))}}if(!o.length)return null;if(o.length>1){const d=a.type==="source"?"target":"source";return o.find(h=>h.type===d)??o[0]}return o[0]}function Qw(e,t,n,a,o,s=!1){const c=a.get(e);if(!c)return null;const d=o==="strict"?c.internals.handleBounds?.[t]:[...c.internals.handleBounds?.source??[],...c.internals.handleBounds?.target??[]],h=(n?d?.find(p=>p.id===n):d?.[0])??null;return h&&s?{...h,...Hr(c,h,h.position,!0)}:h}function Jw(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function MT(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const Zw=()=>!0;function DT(e,{connectionMode:t,connectionRadius:n,handleId:a,nodeId:o,edgeUpdaterType:s,isTarget:c,domNode:d,nodeLookup:h,lib:p,autoPanOnConnect:m,flowId:g,panBy:x,cancelConnection:v,onConnectStart:w,onConnect:N,onConnectEnd:j,isValidConnection:S=Zw,onReconnectEnd:k,updateConnection:E,getTransform:T,getFromHandle:_,autoPanSpeed:A,dragThreshold:z=1,handleDomNode:G}){const F=Bw(e.target);let L=0,$;const{x:H,y:Q}=Rn(e),D=Jw(s,G),q=d?.getBoundingClientRect();let I=!1;if(!q||!D)return;const V=Qw(o,D,a,h,t);if(!V)return;let W=Rn(e,q),J=!1,O=null,R=!1,U=null;function B(){if(!m||!q)return;const[ge,xe]=Rw(W,q,A);x({x:ge,y:xe}),L=requestAnimationFrame(B)}const re={...V,nodeId:o,type:D,position:V.position},de=h.get(o);let ie={inProgress:!0,isValid:null,from:Hr(de,re,ye.Left,!0),fromHandle:re,fromPosition:re.position,fromNode:de,to:W,toHandle:null,toPosition:Ev[re.position],toNode:null,pointer:W};function te(){I=!0,E(ie),w?.(e,{nodeId:o,handleId:a,handleType:D})}z===0&&te();function ue(ge){if(!I){const{x:ut,y:Kt}=Rn(ge),Ot=ut-H,Ht=Kt-Q;if(!(Ot*Ot+Ht*Ht>z*z))return;te()}if(!_()||!re){me(ge);return}const xe=T();W=Rn(ge,q),$=TT(Ls(W,xe,!1,[1,1]),n,h,re),J||(B(),J=!0);const we=Kw(ge,{handle:$,connectionMode:t,fromNodeId:o,fromHandleId:a,fromType:c?"target":"source",isValidConnection:S,doc:F,lib:p,flowId:g,nodeLookup:h});U=we.handleDomNode,O=we.connection,R=MT(!!$,we.isValid);const Ce=h.get(o),Ue=Ce?Hr(Ce,re,ye.Left,!0):ie.from,$e={...ie,from:Ue,isValid:R,to:we.toHandle&&R?Yc({x:we.toHandle.x,y:we.toHandle.y},xe):W,toHandle:we.toHandle,toPosition:R&&we.toHandle?we.toHandle.position:Ev[re.position],toNode:we.toHandle?h.get(we.toHandle.nodeId):null,pointer:W};E($e),ie=$e}function me(ge){if(!("touches"in ge&&ge.touches.length>0)){if(I){($||U)&&O&&R&&N?.(O);const{inProgress:xe,...we}=ie,Ce={...we,toPosition:ie.toHandle?ie.toPosition:null};j?.(ge,Ce),s&&k?.(ge,Ce)}v(),cancelAnimationFrame(L),J=!1,R=!1,O=null,U=null,F.removeEventListener("mousemove",ue),F.removeEventListener("mouseup",me),F.removeEventListener("touchmove",ue),F.removeEventListener("touchend",me)}}F.addEventListener("mousemove",ue),F.addEventListener("mouseup",me),F.addEventListener("touchmove",ue),F.addEventListener("touchend",me)}function Kw(e,{handle:t,connectionMode:n,fromNodeId:a,fromHandleId:o,fromType:s,doc:c,lib:d,flowId:h,isValidConnection:p=Zw,nodeLookup:m}){const g=s==="target",x=t?c.querySelector(`.${d}-flow__handle[data-id="${h}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:v,y:w}=Rn(e),N=c.elementFromPoint(v,w),j=N?.classList.contains(`${d}-flow__handle`)?N:x,S={handleDomNode:j,isValid:!1,connection:null,toHandle:null};if(j){const k=Jw(void 0,j),E=j.getAttribute("data-nodeid"),T=j.getAttribute("data-handleid"),_=j.classList.contains("connectable"),A=j.classList.contains("connectableend");if(!E||!k)return S;const z={source:g?E:a,sourceHandle:g?T:o,target:g?a:E,targetHandle:g?o:T};S.connection=z;const F=_&&A&&(n===Ga.Strict?g&&k==="source"||!g&&k==="target":E!==a||T!==o);S.isValid=F&&p(z),S.toHandle=Qw(E,k,T,m,n,!0)}return S}const lp={onPointerDown:DT,isValid:Kw};function OT({domNode:e,panZoom:t,getTransform:n,getViewScale:a}){const o=dn(e);function s({translateExtent:d,width:h,height:p,zoomStep:m=1,pannable:g=!0,zoomable:x=!0,inversePan:v=!1}){const w=E=>{if(E.sourceEvent.type!=="wheel"||!t)return;const T=n(),_=E.sourceEvent.ctrlKey&&js()?10:1,A=-E.sourceEvent.deltaY*(E.sourceEvent.deltaMode===1?.05:E.sourceEvent.deltaMode?1:.002)*m,z=T[2]*Math.pow(2,A*_);t.scaleTo(z)};let N=[0,0];const j=E=>{(E.sourceEvent.type==="mousedown"||E.sourceEvent.type==="touchstart")&&(N=[E.sourceEvent.clientX??E.sourceEvent.touches[0].clientX,E.sourceEvent.clientY??E.sourceEvent.touches[0].clientY])},S=E=>{const T=n();if(E.sourceEvent.type!=="mousemove"&&E.sourceEvent.type!=="touchmove"||!t)return;const _=[E.sourceEvent.clientX??E.sourceEvent.touches[0].clientX,E.sourceEvent.clientY??E.sourceEvent.touches[0].clientY],A=[_[0]-N[0],_[1]-N[1]];N=_;const z=a()*Math.max(T[2],Math.log(T[2]))*(v?-1:1),G={x:T[0]-A[0]*z,y:T[1]-A[1]*z},F=[[0,0],[h,p]];t.setViewportConstrained({x:G.x,y:G.y,zoom:T[2]},F,d)},k=kw().on("start",j).on("zoom",g?S:null).on("zoom.wheel",x?w:null);o.call(k,{})}function c(){o.on("zoom",null)}return{update:s,destroy:c,pointer:Dn}}const du=e=>({x:e.x,y:e.y,zoom:e.k}),Qf=({x:e,y:t,zoom:n})=>lu.translate(e,t).scale(n),Ba=(e,t)=>e.target.closest(`.${t}`),e1=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),_T=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Jf=(e,t=0,n=_T,a=()=>{})=>{const o=typeof t=="number"&&t>0;return o||a(),o?e.transition().duration(t).ease(n).on("end",a):e},t1=e=>{const t=e.ctrlKey&&js()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function RT({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:a,panOnScrollMode:o,panOnScrollSpeed:s,zoomOnPinch:c,onPanZoomStart:d,onPanZoom:h,onPanZoomEnd:p}){return m=>{if(Ba(m,t))return m.ctrlKey&&m.preventDefault(),!1;m.preventDefault(),m.stopImmediatePropagation();const g=n.property("__zoom").k||1;if(m.ctrlKey&&c){const j=Dn(m),S=t1(m),k=g*Math.pow(2,S);a.scaleTo(n,k,j,m);return}const x=m.deltaMode===1?20:1;let v=o===zr.Vertical?0:m.deltaX*x,w=o===zr.Horizontal?0:m.deltaY*x;!js()&&m.shiftKey&&o!==zr.Vertical&&(v=m.deltaY*x,w=0),a.translateBy(n,-(v/g)*s,-(w/g)*s,{internal:!0});const N=du(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(h?.(m,N),e.panScrollTimeout=setTimeout(()=>{p?.(m,N),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,d?.(m,N))}}function IT({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(a,o){const s=a.type==="wheel",c=!t&&s&&!a.ctrlKey,d=Ba(a,e);if(a.ctrlKey&&s&&d&&a.preventDefault(),c||d)return null;a.preventDefault(),n.call(this,a,o)}}function LT({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return a=>{if(a.sourceEvent?.internal)return;const o=du(a.transform);e.mouseButton=a.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=o,a.sourceEvent?.type==="mousedown"&&t(!0),n&&n?.(a.sourceEvent,o)}}function zT({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:a,onPanZoom:o}){return s=>{e.usedRightMouseButton=!!(n&&e1(t,e.mouseButton??0)),s.sourceEvent?.sync||a([s.transform.x,s.transform.y,s.transform.k]),o&&!s.sourceEvent?.internal&&o?.(s.sourceEvent,du(s.transform))}}function BT({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:a,onPanZoomEnd:o,onPaneContextMenu:s}){return c=>{if(!c.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,s&&e1(t,e.mouseButton??0)&&!e.usedRightMouseButton&&c.sourceEvent&&s(c.sourceEvent),e.usedRightMouseButton=!1,a(!1),o)){const d=du(c.transform);e.prevViewport=d,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{o?.(c.sourceEvent,d)},n?150:0)}}}function PT({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:a,panOnScroll:o,zoomOnDoubleClick:s,userSelectionActive:c,noWheelClassName:d,noPanClassName:h,lib:p,connectionInProgress:m}){return g=>{const x=e||t,v=n&&g.ctrlKey,w=g.type==="wheel";if(g.button===1&&g.type==="mousedown"&&(Ba(g,`${p}-flow__node`)||Ba(g,`${p}-flow__edge`)))return!0;if(!a&&!x&&!o&&!s&&!n||c||m&&!w||Ba(g,d)&&w||Ba(g,h)&&(!w||o&&w&&!e)||!n&&g.ctrlKey&&w)return!1;if(!n&&g.type==="touchstart"&&g.touches?.length>1)return g.preventDefault(),!1;if(!x&&!o&&!v&&w||!a&&(g.type==="mousedown"||g.type==="touchstart")||Array.isArray(a)&&!a.includes(g.button)&&g.type==="mousedown")return!1;const N=Array.isArray(a)&&a.includes(g.button)||!g.button||g.button<=1;return(!g.ctrlKey||w)&&N}}function $T({domNode:e,minZoom:t,maxZoom:n,translateExtent:a,viewport:o,onPanZoom:s,onPanZoomStart:c,onPanZoomEnd:d,onDraggingChange:h}){const p={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},m=e.getBoundingClientRect(),g=kw().scaleExtent([t,n]).translateExtent(a),x=dn(e).call(g);k({x:o.x,y:o.y,zoom:Wa(o.zoom,t,n)},[[0,0],[m.width,m.height]],a);const v=x.on("wheel.zoom"),w=x.on("dblclick.zoom");g.wheelDelta(t1);function N($,H){return x?new Promise(Q=>{g?.interpolate(H?.interpolate==="linear"?us:_c).transform(Jf(x,H?.duration,H?.ease,()=>Q(!0)),$)}):Promise.resolve(!1)}function j({noWheelClassName:$,noPanClassName:H,onPaneContextMenu:Q,userSelectionActive:D,panOnScroll:q,panOnDrag:I,panOnScrollMode:V,panOnScrollSpeed:W,preventScrolling:J,zoomOnPinch:O,zoomOnScroll:R,zoomOnDoubleClick:U,zoomActivationKeyPressed:B,lib:re,onTransformChange:de,connectionInProgress:fe,paneClickDistance:ie,selectionOnDrag:te}){D&&!p.isZoomingOrPanning&&S();const ue=q&&!B&&!D;g.clickDistance(te?1/0:!_n(ie)||ie<0?0:ie);const me=ue?RT({zoomPanValues:p,noWheelClassName:$,d3Selection:x,d3Zoom:g,panOnScrollMode:V,panOnScrollSpeed:W,zoomOnPinch:O,onPanZoomStart:c,onPanZoom:s,onPanZoomEnd:d}):IT({noWheelClassName:$,preventScrolling:J,d3ZoomHandler:v});if(x.on("wheel.zoom",me,{passive:!1}),!D){const xe=LT({zoomPanValues:p,onDraggingChange:h,onPanZoomStart:c});g.on("start",xe);const we=zT({zoomPanValues:p,panOnDrag:I,onPaneContextMenu:!!Q,onPanZoom:s,onTransformChange:de});g.on("zoom",we);const Ce=BT({zoomPanValues:p,panOnDrag:I,panOnScroll:q,onPaneContextMenu:Q,onPanZoomEnd:d,onDraggingChange:h});g.on("end",Ce)}const ge=PT({zoomActivationKeyPressed:B,panOnDrag:I,zoomOnScroll:R,panOnScroll:q,zoomOnDoubleClick:U,zoomOnPinch:O,userSelectionActive:D,noPanClassName:H,noWheelClassName:$,lib:re,connectionInProgress:fe});g.filter(ge),U?x.on("dblclick.zoom",w):x.on("dblclick.zoom",null)}function S(){g.on("zoom",null)}async function k($,H,Q){const D=Qf($),q=g?.constrain()(D,H,Q);return q&&await N(q),new Promise(I=>I(q))}async function E($,H){const Q=Qf($);return await N(Q,H),new Promise(D=>D(Q))}function T($){if(x){const H=Qf($),Q=x.property("__zoom");(Q.k!==$.zoom||Q.x!==$.x||Q.y!==$.y)&&g?.transform(x,H,null,{sync:!0})}}function _(){const $=x?Ew(x.node()):{x:0,y:0,k:1};return{x:$.x,y:$.y,zoom:$.k}}function A($,H){return x?new Promise(Q=>{g?.interpolate(H?.interpolate==="linear"?us:_c).scaleTo(Jf(x,H?.duration,H?.ease,()=>Q(!0)),$)}):Promise.resolve(!1)}function z($,H){return x?new Promise(Q=>{g?.interpolate(H?.interpolate==="linear"?us:_c).scaleBy(Jf(x,H?.duration,H?.ease,()=>Q(!0)),$)}):Promise.resolve(!1)}function G($){g?.scaleExtent($)}function F($){g?.translateExtent($)}function L($){const H=!_n($)||$<0?0:$;g?.clickDistance(H)}return{update:j,destroy:S,setViewport:E,setViewportConstrained:k,getViewport:_,scaleTo:A,scaleBy:z,setScaleExtent:G,setTranslateExtent:F,syncViewport:T,setClickDistance:L}}var Qa;(function(e){e.Line="line",e.Handle="handle"})(Qa||(Qa={}));function HT({width:e,prevWidth:t,height:n,prevHeight:a,affectsX:o,affectsY:s}){const c=e-t,d=n-a,h=[c>0?1:c<0?-1:0,d>0?1:d<0?-1:0];return c&&o&&(h[0]=h[0]*-1),d&&s&&(h[1]=h[1]*-1),h}function Bv(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),a=e.includes("left"),o=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:a,affectsY:o}}function ir(e,t){return Math.max(0,t-e)}function rr(e,t){return Math.max(0,e-t)}function xc(e,t,n){return Math.max(0,t-e,e-n)}function Pv(e,t){return e?!t:t}function qT(e,t,n,a,o,s,c,d){let{affectsX:h,affectsY:p}=t;const{isHorizontal:m,isVertical:g}=t,x=m&&g,{xSnapped:v,ySnapped:w}=n,{minWidth:N,maxWidth:j,minHeight:S,maxHeight:k}=a,{x:E,y:T,width:_,height:A,aspectRatio:z}=e;let G=Math.floor(m?v-e.pointerX:0),F=Math.floor(g?w-e.pointerY:0);const L=_+(h?-G:G),$=A+(p?-F:F),H=-s[0]*_,Q=-s[1]*A;let D=xc(L,N,j),q=xc($,S,k);if(c){let W=0,J=0;h&&G<0?W=ir(E+G+H,c[0][0]):!h&&G>0&&(W=rr(E+L+H,c[1][0])),p&&F<0?J=ir(T+F+Q,c[0][1]):!p&&F>0&&(J=rr(T+$+Q,c[1][1])),D=Math.max(D,W),q=Math.max(q,J)}if(d){let W=0,J=0;h&&G>0?W=rr(E+G,d[0][0]):!h&&G<0&&(W=ir(E+L,d[1][0])),p&&F>0?J=rr(T+F,d[0][1]):!p&&F<0&&(J=ir(T+$,d[1][1])),D=Math.max(D,W),q=Math.max(q,J)}if(o){if(m){const W=xc(L/z,S,k)*z;if(D=Math.max(D,W),c){let J=0;!h&&!p||h&&!p&&x?J=rr(T+Q+L/z,c[1][1])*z:J=ir(T+Q+(h?G:-G)/z,c[0][1])*z,D=Math.max(D,J)}if(d){let J=0;!h&&!p||h&&!p&&x?J=ir(T+L/z,d[1][1])*z:J=rr(T+(h?G:-G)/z,d[0][1])*z,D=Math.max(D,J)}}if(g){const W=xc($*z,N,j)/z;if(q=Math.max(q,W),c){let J=0;!h&&!p||p&&!h&&x?J=rr(E+$*z+H,c[1][0])/z:J=ir(E+(p?F:-F)*z+H,c[0][0])/z,q=Math.max(q,J)}if(d){let J=0;!h&&!p||p&&!h&&x?J=ir(E+$*z,d[1][0])/z:J=rr(E+(p?F:-F)*z,d[0][0])/z,q=Math.max(q,J)}}}F=F+(F<0?q:-q),G=G+(G<0?D:-D),o&&(x?L>$*z?F=(Pv(h,p)?-G:G)/z:G=(Pv(h,p)?-F:F)*z:m?(F=G/z,p=h):(G=F*z,h=p));const I=h?E+G:E,V=p?T+F:T;return{width:_+(h?-G:G),height:A+(p?-F:F),x:s[0]*G*(h?-1:1)+I,y:s[1]*F*(p?-1:1)+V}}const n1={width:0,height:0,x:0,y:0},UT={...n1,pointerX:0,pointerY:0,aspectRatio:1};function FT(e){return[[0,0],[e.measured.width,e.measured.height]]}function VT(e,t,n){const a=t.position.x+e.position.x,o=t.position.y+e.position.y,s=e.measured.width??0,c=e.measured.height??0,d=n[0]*s,h=n[1]*c;return[[a-d,o-h],[a+s-d,o+c-h]]}function GT({domNode:e,nodeId:t,getStoreItems:n,onChange:a,onEnd:o}){const s=dn(e);let c={controlDirection:Bv("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function d({controlPosition:p,boundaries:m,keepAspectRatio:g,resizeDirection:x,onResizeStart:v,onResize:w,onResizeEnd:N,shouldResize:j}){let S={...n1},k={...UT};c={boundaries:m,resizeDirection:x,keepAspectRatio:g,controlDirection:Bv(p)};let E,T=null,_=[],A,z,G,F=!1;const L=dw().on("start",$=>{const{nodeLookup:H,transform:Q,snapGrid:D,snapToGrid:q,nodeOrigin:I,paneDomNode:V}=n();if(E=H.get(t),!E)return;T=V?.getBoundingClientRect()??null;const{xSnapped:W,ySnapped:J}=ds($.sourceEvent,{transform:Q,snapGrid:D,snapToGrid:q,containerBounds:T});S={width:E.measured.width??0,height:E.measured.height??0,x:E.position.x??0,y:E.position.y??0},k={...S,pointerX:W,pointerY:J,aspectRatio:S.width/S.height},A=void 0,E.parentId&&(E.extent==="parent"||E.expandParent)&&(A=H.get(E.parentId),z=A&&E.extent==="parent"?FT(A):void 0),_=[],G=void 0;for(const[O,R]of H)if(R.parentId===t&&(_.push({id:O,position:{...R.position},extent:R.extent}),R.extent==="parent"||R.expandParent)){const U=VT(R,E,R.origin??I);G?G=[[Math.min(U[0][0],G[0][0]),Math.min(U[0][1],G[0][1])],[Math.max(U[1][0],G[1][0]),Math.max(U[1][1],G[1][1])]]:G=U}v?.($,{...S})}).on("drag",$=>{const{transform:H,snapGrid:Q,snapToGrid:D,nodeOrigin:q}=n(),I=ds($.sourceEvent,{transform:H,snapGrid:Q,snapToGrid:D,containerBounds:T}),V=[];if(!E)return;const{x:W,y:J,width:O,height:R}=S,U={},B=E.origin??q,{width:re,height:de,x:fe,y:ie}=qT(k,c.controlDirection,I,c.boundaries,c.keepAspectRatio,B,z,G),te=re!==O,ue=de!==R,me=fe!==W&&te,ge=ie!==J&&ue;if(!me&&!ge&&!te&&!ue)return;if((me||ge||B[0]===1||B[1]===1)&&(U.x=me?fe:S.x,U.y=ge?ie:S.y,S.x=U.x,S.y=U.y,_.length>0)){const Ue=fe-W,$e=ie-J;for(const ut of _)ut.position={x:ut.position.x-Ue+B[0]*(re-O),y:ut.position.y-$e+B[1]*(de-R)},V.push(ut)}if((te||ue)&&(U.width=te&&(!c.resizeDirection||c.resizeDirection==="horizontal")?re:S.width,U.height=ue&&(!c.resizeDirection||c.resizeDirection==="vertical")?de:S.height,S.width=U.width,S.height=U.height),A&&E.expandParent){const Ue=B[0]*(U.width??0);U.x&&U.x<Ue&&(S.x=Ue,k.x=k.x-(U.x-Ue));const $e=B[1]*(U.height??0);U.y&&U.y<$e&&(S.y=$e,k.y=k.y-(U.y-$e))}const xe=HT({width:S.width,prevWidth:O,height:S.height,prevHeight:R,affectsX:c.controlDirection.affectsX,affectsY:c.controlDirection.affectsY}),we={...S,direction:xe};j?.($,we)!==!1&&(F=!0,w?.($,we),a(U,V))}).on("end",$=>{F&&(N?.($,{...S}),o?.({...S}),F=!1)});s.call(L)}function h(){s.on(".drag",null)}return{update:d,destroy:h}}var Zf={exports:{}},Kf={},eh={exports:{}},th={};var $v;function WT(){if($v)return th;$v=1;var e=Ms();function t(g,x){return g===x&&(g!==0||1/g===1/x)||g!==g&&x!==x}var n=typeof Object.is=="function"?Object.is:t,a=e.useState,o=e.useEffect,s=e.useLayoutEffect,c=e.useDebugValue;function d(g,x){var v=x(),w=a({inst:{value:v,getSnapshot:x}}),N=w[0].inst,j=w[1];return s(function(){N.value=v,N.getSnapshot=x,h(N)&&j({inst:N})},[g,v,x]),o(function(){return h(N)&&j({inst:N}),g(function(){h(N)&&j({inst:N})})},[g]),c(v),v}function h(g){var x=g.getSnapshot;g=g.value;try{var v=x();return!n(g,v)}catch{return!0}}function p(g,x){return x()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:d;return th.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:m,th}var Hv;function YT(){return Hv||(Hv=1,eh.exports=WT()),eh.exports}var qv;function XT(){if(qv)return Kf;qv=1;var e=Ms(),t=YT();function n(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var a=typeof Object.is=="function"?Object.is:n,o=t.useSyncExternalStore,s=e.useRef,c=e.useEffect,d=e.useMemo,h=e.useDebugValue;return Kf.useSyncExternalStoreWithSelector=function(p,m,g,x,v){var w=s(null);if(w.current===null){var N={hasValue:!1,value:null};w.current=N}else N=w.current;w=d(function(){function S(A){if(!k){if(k=!0,E=A,A=x(A),v!==void 0&&N.hasValue){var z=N.value;if(v(z,A))return T=z}return T=A}if(z=T,a(E,A))return z;var G=x(A);return v!==void 0&&v(z,G)?(E=A,z):(E=A,T=G)}var k=!1,E,T,_=g===void 0?null:g;return[function(){return S(m())},_===null?void 0:function(){return S(_())}]},[m,g,x,v]);var j=o(p,w[0],w[1]);return c(function(){N.hasValue=!0,N.value=j},[j]),h(j),j},Kf}var Uv;function QT(){return Uv||(Uv=1,Zf.exports=XT()),Zf.exports}var JT=QT();const ZT=Ts(JT),KT={},Fv=e=>{let t;const n=new Set,a=(m,g)=>{const x=typeof m=="function"?m(t):m;if(!Object.is(x,t)){const v=t;t=g??(typeof x!="object"||x===null)?x:Object.assign({},t,x),n.forEach(w=>w(t,v))}},o=()=>t,h={setState:a,getState:o,getInitialState:()=>p,subscribe:m=>(n.add(m),()=>n.delete(m)),destroy:()=>{(KT?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},p=t=e(a,o,h);return h},eM=e=>e?Fv(e):Fv,{useDebugValue:tM}=jn,{useSyncExternalStoreWithSelector:nM}=ZT,iM=e=>e;function i1(e,t=iM,n){const a=nM(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return tM(a),a}const Vv=(e,t)=>{const n=eM(e),a=(o,s=t)=>i1(n,o,s);return Object.assign(a,n),a},rM=(e,t)=>e?Vv(e,t):Vv;function ot(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[a,o]of e)if(!Object.is(o,t.get(a)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const a of e)if(!t.has(a))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const a of n)if(!Object.prototype.hasOwnProperty.call(t,a)||!Object.is(e[a],t[a]))return!1;return!0}var cp=Q0();const fu=M.createContext(null),aM=fu.Provider,r1=Xn.error001();function Be(e,t){const n=M.useContext(fu);if(n===null)throw new Error(r1);return i1(n,e,t)}function st(){const e=M.useContext(fu);if(e===null)throw new Error(r1);return M.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const Gv={display:"none"},oM={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},a1="react-flow__node-desc",o1="react-flow__edge-desc",sM="react-flow__aria-live",lM=e=>e.ariaLiveMessage,cM=e=>e.ariaLabelConfig;function uM({rfId:e}){const t=Be(lM);return u.jsx("div",{id:`${sM}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:oM,children:t})}function dM({rfId:e,disableKeyboardA11y:t}){const n=Be(cM);return u.jsxs(u.Fragment,{children:[u.jsx("div",{id:`${a1}-${e}`,style:Gv,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),u.jsx("div",{id:`${o1}-${e}`,style:Gv,children:n["edge.a11yDescription.default"]}),!t&&u.jsx(uM,{rfId:e})]})}const hu=M.forwardRef(({position:e="top-left",children:t,className:n,style:a,...o},s)=>{const c=`${e}`.split("-");return u.jsx("div",{className:St(["react-flow__panel",n,...c]),style:a,ref:s,...o,children:t})});hu.displayName="Panel";function fM({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:u.jsx(hu,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:u.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const hM=e=>{const t=[],n=[];for(const[,a]of e.nodeLookup)a.selected&&t.push(a.internals.userNode);for(const[,a]of e.edgeLookup)a.selected&&n.push(a);return{selectedNodes:t,selectedEdges:n}},vc=e=>e.id;function pM(e,t){return ot(e.selectedNodes.map(vc),t.selectedNodes.map(vc))&&ot(e.selectedEdges.map(vc),t.selectedEdges.map(vc))}function mM({onSelectionChange:e}){const t=st(),{selectedNodes:n,selectedEdges:a}=Be(hM,pM);return M.useEffect(()=>{const o={nodes:n,edges:a};e?.(o),t.getState().onSelectionChangeHandlers.forEach(s=>s(o))},[n,a,e]),null}const gM=e=>!!e.onSelectionChangeHandlers;function yM({onSelectionChange:e}){const t=Be(gM);return e||t?u.jsx(mM,{onSelectionChange:e}):null}const s1=[0,0],xM={x:0,y:0,zoom:1},vM=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],Wv=[...vM,"rfId"],bM=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),Yv={translateExtent:ws,nodeOrigin:s1,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function wM(e){const{setNodes:t,setEdges:n,setMinZoom:a,setMaxZoom:o,setTranslateExtent:s,setNodeExtent:c,reset:d,setDefaultNodesAndEdges:h}=Be(bM,ot),p=st();M.useEffect(()=>(h(e.defaultNodes,e.defaultEdges),()=>{m.current=Yv,d()}),[]);const m=M.useRef(Yv);return M.useEffect(()=>{for(const g of Wv){const x=e[g],v=m.current[g];x!==v&&(typeof e[g]>"u"||(g==="nodes"?t(x):g==="edges"?n(x):g==="minZoom"?a(x):g==="maxZoom"?o(x):g==="translateExtent"?s(x):g==="nodeExtent"?c(x):g==="ariaLabelConfig"?p.setState({ariaLabelConfig:aT(x)}):g==="fitView"?p.setState({fitViewQueued:x}):g==="fitViewOptions"?p.setState({fitViewOptions:x}):p.setState({[g]:x})))}m.current=e},Wv.map(g=>e[g])),null}function Xv(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function SM(e){const[t,n]=M.useState(e==="system"?null:e);return M.useEffect(()=>{if(e!=="system"){n(e);return}const a=Xv(),o=()=>n(a?.matches?"dark":"light");return o(),a?.addEventListener("change",o),()=>{a?.removeEventListener("change",o)}},[e]),t!==null?t:Xv()?.matches?"dark":"light"}const Qv=typeof document<"u"?document:null;function Es(e=null,t={target:Qv,actInsideInputWithModifier:!0}){const[n,a]=M.useState(!1),o=M.useRef(!1),s=M.useRef(new Set([])),[c,d]=M.useMemo(()=>{if(e!==null){const p=(Array.isArray(e)?e:[e]).filter(g=>typeof g=="string").map(g=>g.replace("+",`
`).replace(`

`,`
+`).split(`
`)),m=p.reduce((g,x)=>g.concat(...x),[]);return[p,m]}return[[],[]]},[e]);return M.useEffect(()=>{const h=t?.target??Qv,p=t?.actInsideInputWithModifier??!0;if(e!==null){const m=v=>{if(o.current=v.ctrlKey||v.metaKey||v.shiftKey||v.altKey,(!o.current||o.current&&!p)&&Pw(v))return!1;const N=Zv(v.code,d);if(s.current.add(v[N]),Jv(c,s.current,!1)){const j=v.composedPath?.()?.[0]||v.target,S=j?.nodeName==="BUTTON"||j?.nodeName==="A";t.preventDefault!==!1&&(o.current||!S)&&v.preventDefault(),a(!0)}},g=v=>{const w=Zv(v.code,d);Jv(c,s.current,!0)?(a(!1),s.current.clear()):s.current.delete(v[w]),v.key==="Meta"&&s.current.clear(),o.current=!1},x=()=>{s.current.clear(),a(!1)};return h?.addEventListener("keydown",m),h?.addEventListener("keyup",g),window.addEventListener("blur",x),window.addEventListener("contextmenu",x),()=>{h?.removeEventListener("keydown",m),h?.removeEventListener("keyup",g),window.removeEventListener("blur",x),window.removeEventListener("contextmenu",x)}}},[e,a]),n}function Jv(e,t,n){return e.filter(a=>n||a.length===t.size).some(a=>a.every(o=>t.has(o)))}function Zv(e,t){return t.includes(e)?"code":"key"}const NM=()=>{const e=st();return M.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:a}=e.getState();return a?a.scaleTo(t,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[a,o,s],panZoom:c}=e.getState();return c?(await c.setViewport({x:t.x??a,y:t.y??o,zoom:t.zoom??s},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,a]=e.getState().transform;return{x:t,y:n,zoom:a}},setCenter:async(t,n,a)=>e.getState().setCenter(t,n,a),fitBounds:async(t,n)=>{const{width:a,height:o,minZoom:s,maxZoom:c,panZoom:d}=e.getState(),h=Pp(t,a,o,s,c,n?.padding??.1);return d?(await d.setViewport(h,{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:a,snapGrid:o,snapToGrid:s,domNode:c}=e.getState();if(!c)return t;const{x:d,y:h}=c.getBoundingClientRect(),p={x:t.x-d,y:t.y-h},m=n.snapGrid??o,g=n.snapToGrid??s;return Ls(p,a,g,m)},flowToScreenPosition:t=>{const{transform:n,domNode:a}=e.getState();if(!a)return t;const{x:o,y:s}=a.getBoundingClientRect(),c=Yc(t,n);return{x:c.x+o,y:c.y+s}}}),[])};function l1(e,t){const n=[],a=new Map,o=[];for(const s of e)if(s.type==="add"){o.push(s);continue}else if(s.type==="remove"||s.type==="replace")a.set(s.id,[s]);else{const c=a.get(s.id);c?c.push(s):a.set(s.id,[s])}for(const s of t){const c=a.get(s.id);if(!c){n.push(s);continue}if(c[0].type==="remove")continue;if(c[0].type==="replace"){n.push({...c[0].item});continue}const d={...s};for(const h of c)jM(h,d);n.push(d)}return o.length&&o.forEach(s=>{s.index!==void 0?n.splice(s.index,0,{...s.item}):n.push({...s.item})}),n}function jM(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured={...e.dimensions},e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function c1(e,t){return l1(e,t)}function u1(e,t){return l1(e,t)}function Rr(e,t){return{id:e,type:"select",selected:t}}function Pa(e,t=new Set,n=!1){const a=[];for(const[o,s]of e){const c=t.has(o);!(s.selected===void 0&&!c)&&s.selected!==c&&(n&&(s.selected=c),a.push(Rr(s.id,c)))}return a}function Kv({items:e=[],lookup:t}){const n=[],a=new Map(e.map(o=>[o.id,o]));for(const[o,s]of e.entries()){const c=t.get(s.id),d=c?.internals?.userNode??c;d!==void 0&&d!==s&&n.push({id:s.id,item:s,type:"replace"}),d===void 0&&n.push({item:s,type:"add",index:o})}for(const[o]of t)a.get(o)===void 0&&n.push({id:o,type:"remove"});return n}function eb(e){return{id:e.id,type:"remove"}}const tb=e=>XA(e),EM=e=>Dw(e);function d1(e){return M.forwardRef(e)}const kM=typeof window<"u"?M.useLayoutEffect:M.useEffect;function nb(e){const[t,n]=M.useState(BigInt(0)),[a]=M.useState(()=>CM(()=>n(o=>o+BigInt(1))));return kM(()=>{const o=a.get();o.length&&(e(o),a.reset())},[t]),a}function CM(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const f1=M.createContext(null);function AM({children:e}){const t=st(),n=M.useCallback(d=>{const{nodes:h=[],setNodes:p,hasDefaultNodes:m,onNodesChange:g,nodeLookup:x,fitViewQueued:v,onNodesChangeMiddlewareMap:w}=t.getState();let N=h;for(const S of d)N=typeof S=="function"?S(N):S;let j=Kv({items:N,lookup:x});for(const S of w.values())j=S(j);m&&p(N),j.length>0?g?.(j):v&&window.requestAnimationFrame(()=>{const{fitViewQueued:S,nodes:k,setNodes:E}=t.getState();S&&E(k)})},[]),a=nb(n),o=M.useCallback(d=>{const{edges:h=[],setEdges:p,hasDefaultEdges:m,onEdgesChange:g,edgeLookup:x}=t.getState();let v=h;for(const w of d)v=typeof w=="function"?w(v):w;m?p(v):g&&g(Kv({items:v,lookup:x}))},[]),s=nb(o),c=M.useMemo(()=>({nodeQueue:a,edgeQueue:s}),[]);return u.jsx(f1.Provider,{value:c,children:e})}function TM(){const e=M.useContext(f1);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const MM=e=>!!e.panZoom;function pu(){const e=NM(),t=st(),n=TM(),a=Be(MM),o=M.useMemo(()=>{const s=g=>t.getState().nodeLookup.get(g),c=g=>{n.nodeQueue.push(g)},d=g=>{n.edgeQueue.push(g)},h=g=>{const{nodeLookup:x,nodeOrigin:v}=t.getState(),w=tb(g)?g:x.get(g.id),N=w.parentId?zw(w.position,w.measured,w.parentId,x,v):w.position,j={...w,position:N,width:w.measured?.width??w.width,height:w.measured?.height??w.height};return Ya(j)},p=(g,x,v={replace:!1})=>{c(w=>w.map(N=>{if(N.id===g){const j=typeof x=="function"?x(N):x;return v.replace&&tb(j)?j:{...N,...j}}return N}))},m=(g,x,v={replace:!1})=>{d(w=>w.map(N=>{if(N.id===g){const j=typeof x=="function"?x(N):x;return v.replace&&EM(j)?j:{...N,...j}}return N}))};return{getNodes:()=>t.getState().nodes.map(g=>({...g})),getNode:g=>s(g)?.internals.userNode,getInternalNode:s,getEdges:()=>{const{edges:g=[]}=t.getState();return g.map(x=>({...x}))},getEdge:g=>t.getState().edgeLookup.get(g),setNodes:c,setEdges:d,addNodes:g=>{const x=Array.isArray(g)?g:[g];n.nodeQueue.push(v=>[...v,...x])},addEdges:g=>{const x=Array.isArray(g)?g:[g];n.edgeQueue.push(v=>[...v,...x])},toObject:()=>{const{nodes:g=[],edges:x=[],transform:v}=t.getState(),[w,N,j]=v;return{nodes:g.map(S=>({...S})),edges:x.map(S=>({...S})),viewport:{x:w,y:N,zoom:j}}},deleteElements:async({nodes:g=[],edges:x=[]})=>{const{nodes:v,edges:w,onNodesDelete:N,onEdgesDelete:j,triggerNodeChanges:S,triggerEdgeChanges:k,onDelete:E,onBeforeDelete:T}=t.getState(),{nodes:_,edges:A}=await eT({nodesToRemove:g,edgesToRemove:x,nodes:v,edges:w,onBeforeDelete:T}),z=A.length>0,G=_.length>0;if(z){const F=A.map(eb);j?.(A),k(F)}if(G){const F=_.map(eb);N?.(_),S(F)}return(G||z)&&E?.({nodes:_,edges:A}),{deletedNodes:_,deletedEdges:A}},getIntersectingNodes:(g,x=!0,v)=>{const w=Cv(g),N=w?g:h(g),j=v!==void 0;return N?(v||t.getState().nodes).filter(S=>{const k=t.getState().nodeLookup.get(S.id);if(k&&!w&&(S.id===g.id||!k.internals.positionAbsolute))return!1;const E=Ya(j?S:k),T=Ns(E,N);return x&&T>0||T>=E.width*E.height||T>=N.width*N.height}):[]},isNodeIntersecting:(g,x,v=!0)=>{const N=Cv(g)?g:h(g);if(!N)return!1;const j=Ns(N,x);return v&&j>0||j>=x.width*x.height||j>=N.width*N.height},updateNode:p,updateNodeData:(g,x,v={replace:!1})=>{p(g,w=>{const N=typeof x=="function"?x(w):x;return v.replace?{...w,data:N}:{...w,data:{...w.data,...N}}},v)},updateEdge:m,updateEdgeData:(g,x,v={replace:!1})=>{m(g,w=>{const N=typeof x=="function"?x(w):x;return v.replace?{...w,data:N}:{...w,data:{...w.data,...N}}},v)},getNodesBounds:g=>{const{nodeLookup:x,nodeOrigin:v}=t.getState();return QA(g,{nodeLookup:x,nodeOrigin:v})},getHandleConnections:({type:g,id:x,nodeId:v})=>Array.from(t.getState().connectionLookup.get(`${v}-${g}${x?`-${x}`:""}`)?.values()??[]),getNodeConnections:({type:g,handleId:x,nodeId:v})=>Array.from(t.getState().connectionLookup.get(`${v}${g?x?`-${g}-${x}`:`-${g}`:""}`)?.values()??[]),fitView:async g=>{const x=t.getState().fitViewResolver??rT();return t.setState({fitViewQueued:!0,fitViewOptions:g,fitViewResolver:x}),n.nodeQueue.push(v=>[...v]),x.promise}}},[]);return M.useMemo(()=>({...o,...e,viewportInitialized:a}),[a])}const ib=e=>e.selected,DM=typeof window<"u"?window:void 0;function OM({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=st(),{deleteElements:a}=pu(),o=Es(e,{actInsideInputWithModifier:!1}),s=Es(t,{target:DM});M.useEffect(()=>{if(o){const{edges:c,nodes:d}=n.getState();a({nodes:d.filter(ib),edges:c.filter(ib)}),n.setState({nodesSelectionActive:!1})}},[o]),M.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])}function _M(e){const t=st();M.useEffect(()=>{const n=()=>{if(!e.current||!(e.current.checkVisibility?.()??!0))return!1;const a=$p(e.current);(a.height===0||a.width===0)&&t.getState().onError?.("004",Xn.error004()),t.setState({width:a.width||500,height:a.height||500})};if(e.current){n(),window.addEventListener("resize",n);const a=new ResizeObserver(()=>n());return a.observe(e.current),()=>{window.removeEventListener("resize",n),a&&e.current&&a.unobserve(e.current)}}},[])}const mu={position:"absolute",width:"100%",height:"100%",top:0,left:0},RM=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function IM({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:a=!1,panOnScrollSpeed:o=.5,panOnScrollMode:s=zr.Free,zoomOnDoubleClick:c=!0,panOnDrag:d=!0,defaultViewport:h,translateExtent:p,minZoom:m,maxZoom:g,zoomActivationKeyCode:x,preventScrolling:v=!0,children:w,noWheelClassName:N,noPanClassName:j,onViewportChange:S,isControlledViewport:k,paneClickDistance:E,selectionOnDrag:T}){const _=st(),A=M.useRef(null),{userSelectionActive:z,lib:G,connectionInProgress:F}=Be(RM,ot),L=Es(x),$=M.useRef();_M(A);const H=M.useCallback(Q=>{S?.({x:Q[0],y:Q[1],zoom:Q[2]}),k||_.setState({transform:Q})},[S,k]);return M.useEffect(()=>{if(A.current){$.current=$T({domNode:A.current,minZoom:m,maxZoom:g,translateExtent:p,viewport:h,onDraggingChange:I=>_.setState({paneDragging:I}),onPanZoomStart:(I,V)=>{const{onViewportChangeStart:W,onMoveStart:J}=_.getState();J?.(I,V),W?.(V)},onPanZoom:(I,V)=>{const{onViewportChange:W,onMove:J}=_.getState();J?.(I,V),W?.(V)},onPanZoomEnd:(I,V)=>{const{onViewportChangeEnd:W,onMoveEnd:J}=_.getState();J?.(I,V),W?.(V)}});const{x:Q,y:D,zoom:q}=$.current.getViewport();return _.setState({panZoom:$.current,transform:[Q,D,q],domNode:A.current.closest(".react-flow")}),()=>{$.current?.destroy()}}},[]),M.useEffect(()=>{$.current?.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:a,panOnScrollSpeed:o,panOnScrollMode:s,zoomOnDoubleClick:c,panOnDrag:d,zoomActivationKeyPressed:L,preventScrolling:v,noPanClassName:j,userSelectionActive:z,noWheelClassName:N,lib:G,onTransformChange:H,connectionInProgress:F,selectionOnDrag:T,paneClickDistance:E})},[e,t,n,a,o,s,c,d,L,v,j,z,N,G,H,F,T,E]),u.jsx("div",{className:"react-flow__renderer",ref:A,style:mu,children:w})}const LM=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function zM(){const{userSelectionActive:e,userSelectionRect:t}=Be(LM,ot);return e&&t?u.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const nh=(e,t)=>n=>{n.target===t.current&&e?.(n)},BM=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function PM({isSelecting:e,selectionKeyPressed:t,selectionMode:n=Ss.Full,panOnDrag:a,paneClickDistance:o,selectionOnDrag:s,onSelectionStart:c,onSelectionEnd:d,onPaneClick:h,onPaneContextMenu:p,onPaneScroll:m,onPaneMouseEnter:g,onPaneMouseMove:x,onPaneMouseLeave:v,children:w}){const N=st(),{userSelectionActive:j,elementsSelectable:S,dragging:k,connectionInProgress:E}=Be(BM,ot),T=S&&(e||j),_=M.useRef(null),A=M.useRef(),z=M.useRef(new Set),G=M.useRef(new Set),F=M.useRef(!1),L=W=>{if(F.current||E){F.current=!1;return}h?.(W),N.getState().resetSelectedElements(),N.setState({nodesSelectionActive:!1})},$=W=>{if(Array.isArray(a)&&a?.includes(2)){W.preventDefault();return}p?.(W)},H=m?W=>m(W):void 0,Q=W=>{F.current&&(W.stopPropagation(),F.current=!1)},D=W=>{const{domNode:J}=N.getState();if(A.current=J?.getBoundingClientRect(),!A.current)return;const O=W.target===_.current;if(!O&&!!W.target.closest(".nokey")||!e||!(s&&O||t)||W.button!==0||!W.isPrimary)return;W.target?.setPointerCapture?.(W.pointerId),F.current=!1;const{x:B,y:re}=Rn(W.nativeEvent,A.current);N.setState({userSelectionRect:{width:0,height:0,startX:B,startY:re,x:B,y:re}}),O||(W.stopPropagation(),W.preventDefault())},q=W=>{const{userSelectionRect:J,transform:O,nodeLookup:R,edgeLookup:U,connectionLookup:B,triggerNodeChanges:re,triggerEdgeChanges:de,defaultEdgeOptions:fe,resetSelectedElements:ie}=N.getState();if(!A.current||!J)return;const{x:te,y:ue}=Rn(W.nativeEvent,A.current),{startX:me,startY:ge}=J;if(!F.current){const $e=t?0:o;if(Math.hypot(te-me,ue-ge)<=$e)return;ie(),c?.(W)}F.current=!0;const xe={startX:me,startY:ge,x:te<me?te:me,y:ue<ge?ue:ge,width:Math.abs(te-me),height:Math.abs(ue-ge)},we=z.current,Ce=G.current;z.current=new Set(Bp(R,xe,O,n===Ss.Partial,!0).map($e=>$e.id)),G.current=new Set;const Ue=fe?.selectable??!0;for(const $e of z.current){const ut=B.get($e);if(ut)for(const{edgeId:Kt}of ut.values()){const Ot=U.get(Kt);Ot&&(Ot.selectable??Ue)&&G.current.add(Kt)}}if(!Av(we,z.current)){const $e=Pa(R,z.current,!0);re($e)}if(!Av(Ce,G.current)){const $e=Pa(U,G.current);de($e)}N.setState({userSelectionRect:xe,userSelectionActive:!0,nodesSelectionActive:!1})},I=W=>{W.button===0&&(W.target?.releasePointerCapture?.(W.pointerId),!j&&W.target===_.current&&N.getState().userSelectionRect&&L?.(W),N.setState({userSelectionActive:!1,userSelectionRect:null}),F.current&&(d?.(W),N.setState({nodesSelectionActive:z.current.size>0})))},V=a===!0||Array.isArray(a)&&a.includes(0);return u.jsxs("div",{className:St(["react-flow__pane",{draggable:V,dragging:k,selection:e}]),onClick:T?void 0:nh(L,_),onContextMenu:nh($,_),onWheel:nh(H,_),onPointerEnter:T?void 0:g,onPointerMove:T?q:x,onPointerUp:T?I:void 0,onPointerDownCapture:T?D:void 0,onClickCapture:T?Q:void 0,onPointerLeave:v,ref:_,style:mu,children:[w,u.jsx(zM,{})]})}function up({id:e,store:t,unselect:n=!1,nodeRef:a}){const{addSelectedNodes:o,unselectNodesAndEdges:s,multiSelectionActive:c,nodeLookup:d,onError:h}=t.getState(),p=d.get(e);if(!p){h?.("012",Xn.error012(e));return}t.setState({nodesSelectionActive:!1}),p.selected?(n||p.selected&&c)&&(s({nodes:[p],edges:[]}),requestAnimationFrame(()=>a?.current?.blur())):o([e])}function h1({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:a,nodeId:o,isSelectable:s,nodeClickDistance:c}){const d=st(),[h,p]=M.useState(!1),m=M.useRef();return M.useEffect(()=>{m.current=kT({getStoreItems:()=>d.getState(),onNodeMouseDown:g=>{up({id:g,store:d,nodeRef:e})},onDragStart:()=>{p(!0)},onDragStop:()=>{p(!1)}})},[]),M.useEffect(()=>{if(t)m.current?.destroy();else if(e.current)return m.current?.update({noDragClassName:n,handleSelector:a,domNode:e.current,isSelectable:s,nodeId:o,nodeClickDistance:c}),()=>{m.current?.destroy()}},[n,a,t,s,e,o]),h}const $M=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function p1(){const e=st();return M.useCallback(n=>{const{nodeExtent:a,snapToGrid:o,snapGrid:s,nodesDraggable:c,onError:d,updateNodePositions:h,nodeLookup:p,nodeOrigin:m}=e.getState(),g=new Map,x=$M(c),v=o?s[0]:5,w=o?s[1]:5,N=n.direction.x*v*n.factor,j=n.direction.y*w*n.factor;for(const[,S]of p){if(!x(S))continue;let k={x:S.internals.positionAbsolute.x+N,y:S.internals.positionAbsolute.y+j};o&&(k=Is(k,s));const{position:E,positionAbsolute:T}=Ow({nodeId:S.id,nextPosition:k,nodeLookup:p,nodeExtent:a,nodeOrigin:m,onError:d});S.position=E,S.internals.positionAbsolute=T,g.set(S.id,S)}h(g)},[])}const Gp=M.createContext(null),HM=Gp.Provider;Gp.Consumer;const Fr=()=>M.useContext(Gp),qM=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),UM=(e,t,n)=>a=>{const{connectionClickStartHandle:o,connectionMode:s,connection:c}=a,{fromHandle:d,toHandle:h,isValid:p}=c,m=h?.nodeId===e&&h?.id===t&&h?.type===n;return{connectingFrom:d?.nodeId===e&&d?.id===t&&d?.type===n,connectingTo:m,clickConnecting:o?.nodeId===e&&o?.id===t&&o?.type===n,isPossibleEndHandle:s===Ga.Strict?d?.type!==n:e!==d?.nodeId||t!==d?.id,connectionInProcess:!!d,clickConnectionInProcess:!!o,valid:m&&p}};function FM({type:e="source",position:t=ye.Top,isValidConnection:n,isConnectable:a=!0,isConnectableStart:o=!0,isConnectableEnd:s=!0,id:c,onConnect:d,children:h,className:p,onMouseDown:m,onTouchStart:g,...x},v){const w=c||null,N=e==="target",j=st(),S=Fr(),{connectOnClick:k,noPanClassName:E,rfId:T}=Be(qM,ot),{connectingFrom:_,connectingTo:A,clickConnecting:z,isPossibleEndHandle:G,connectionInProcess:F,clickConnectionInProcess:L,valid:$}=Be(UM(S,w,e),ot);S||j.getState().onError?.("010",Xn.error010());const H=q=>{const{defaultEdgeOptions:I,onConnect:V,hasDefaultEdges:W}=j.getState(),J={...I,...q};if(W){const{edges:O,setEdges:R}=j.getState();R(Fw(J,O))}V?.(J),d?.(J)},Q=q=>{if(!S)return;const I=$w(q.nativeEvent);if(o&&(I&&q.button===0||!I)){const V=j.getState();lp.onPointerDown(q.nativeEvent,{handleDomNode:q.currentTarget,autoPanOnConnect:V.autoPanOnConnect,connectionMode:V.connectionMode,connectionRadius:V.connectionRadius,domNode:V.domNode,nodeLookup:V.nodeLookup,lib:V.lib,isTarget:N,handleId:w,nodeId:S,flowId:V.rfId,panBy:V.panBy,cancelConnection:V.cancelConnection,onConnectStart:V.onConnectStart,onConnectEnd:V.onConnectEnd,updateConnection:V.updateConnection,onConnect:H,isValidConnection:n||V.isValidConnection,getTransform:()=>j.getState().transform,getFromHandle:()=>j.getState().connection.fromHandle,autoPanSpeed:V.autoPanSpeed,dragThreshold:V.connectionDragThreshold})}I?m?.(q):g?.(q)},D=q=>{const{onClickConnectStart:I,onClickConnectEnd:V,connectionClickStartHandle:W,connectionMode:J,isValidConnection:O,lib:R,rfId:U,nodeLookup:B,connection:re}=j.getState();if(!S||!W&&!o)return;if(!W){I?.(q.nativeEvent,{nodeId:S,handleId:w,handleType:e}),j.setState({connectionClickStartHandle:{nodeId:S,type:e,id:w}});return}const de=Bw(q.target),fe=n||O,{connection:ie,isValid:te}=lp.isValid(q.nativeEvent,{handle:{nodeId:S,id:w,type:e},connectionMode:J,fromNodeId:W.nodeId,fromHandleId:W.id||null,fromType:W.type,isValidConnection:fe,flowId:U,doc:de,lib:R,nodeLookup:B});te&&ie&&H(ie);const ue=structuredClone(re);delete ue.inProgress,ue.toPosition=ue.toHandle?ue.toHandle.position:null,V?.(q,ue),j.setState({connectionClickStartHandle:null})};return u.jsx("div",{"data-handleid":w,"data-nodeid":S,"data-handlepos":t,"data-id":`${T}-${S}-${w}-${e}`,className:St(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",E,p,{source:!N,target:N,connectable:a,connectablestart:o,connectableend:s,clickconnecting:z,connectingfrom:_,connectingto:A,valid:$,connectionindicator:a&&(!F||G)&&(F||L?s:o)}]),onMouseDown:Q,onTouchStart:Q,onClick:k?D:void 0,ref:v,...x,children:h})}const Ln=M.memo(d1(FM));function VM({data:e,isConnectable:t,sourcePosition:n=ye.Bottom}){return u.jsxs(u.Fragment,{children:[e?.label,u.jsx(Ln,{type:"source",position:n,isConnectable:t})]})}function GM({data:e,isConnectable:t,targetPosition:n=ye.Top,sourcePosition:a=ye.Bottom}){return u.jsxs(u.Fragment,{children:[u.jsx(Ln,{type:"target",position:n,isConnectable:t}),e?.label,u.jsx(Ln,{type:"source",position:a,isConnectable:t})]})}function WM(){return null}function YM({data:e,isConnectable:t,targetPosition:n=ye.Top}){return u.jsxs(u.Fragment,{children:[u.jsx(Ln,{type:"target",position:n,isConnectable:t}),e?.label]})}const Xc={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},rb={input:VM,default:GM,output:YM,group:WM};function XM(e){return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}const QM=e=>{const{width:t,height:n,x:a,y:o}=Rs(e.nodeLookup,{filter:s=>!!s.selected});return{width:_n(t)?t:null,height:_n(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${a}px,${o}px)`}};function JM({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const a=st(),{width:o,height:s,transformString:c,userSelectionActive:d}=Be(QM,ot),h=p1(),p=M.useRef(null);if(M.useEffect(()=>{n||p.current?.focus({preventScroll:!0})},[n]),h1({nodeRef:p}),d||!o||!s)return null;const m=e?x=>{const v=a.getState().nodes.filter(w=>w.selected);e(x,v)}:void 0,g=x=>{Object.prototype.hasOwnProperty.call(Xc,x.key)&&(x.preventDefault(),h({direction:Xc[x.key],factor:x.shiftKey?4:1}))};return u.jsx("div",{className:St(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c},children:u.jsx("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:n?void 0:-1,onKeyDown:n?void 0:g,style:{width:o,height:s}})})}const ab=typeof window<"u"?window:void 0,ZM=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function m1({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:a,onPaneMouseLeave:o,onPaneContextMenu:s,onPaneScroll:c,paneClickDistance:d,deleteKeyCode:h,selectionKeyCode:p,selectionOnDrag:m,selectionMode:g,onSelectionStart:x,onSelectionEnd:v,multiSelectionKeyCode:w,panActivationKeyCode:N,zoomActivationKeyCode:j,elementsSelectable:S,zoomOnScroll:k,zoomOnPinch:E,panOnScroll:T,panOnScrollSpeed:_,panOnScrollMode:A,zoomOnDoubleClick:z,panOnDrag:G,defaultViewport:F,translateExtent:L,minZoom:$,maxZoom:H,preventScrolling:Q,onSelectionContextMenu:D,noWheelClassName:q,noPanClassName:I,disableKeyboardA11y:V,onViewportChange:W,isControlledViewport:J}){const{nodesSelectionActive:O,userSelectionActive:R}=Be(ZM,ot),U=Es(p,{target:ab}),B=Es(N,{target:ab}),re=B||G,de=B||T,fe=m&&re!==!0,ie=U||R||fe;return OM({deleteKeyCode:h,multiSelectionKeyCode:w}),u.jsx(IM,{onPaneContextMenu:s,elementsSelectable:S,zoomOnScroll:k,zoomOnPinch:E,panOnScroll:de,panOnScrollSpeed:_,panOnScrollMode:A,zoomOnDoubleClick:z,panOnDrag:!U&&re,defaultViewport:F,translateExtent:L,minZoom:$,maxZoom:H,zoomActivationKeyCode:j,preventScrolling:Q,noWheelClassName:q,noPanClassName:I,onViewportChange:W,isControlledViewport:J,paneClickDistance:d,selectionOnDrag:fe,children:u.jsxs(PM,{onSelectionStart:x,onSelectionEnd:v,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:a,onPaneMouseLeave:o,onPaneContextMenu:s,onPaneScroll:c,panOnDrag:re,isSelecting:!!ie,selectionMode:g,selectionKeyPressed:U,paneClickDistance:d,selectionOnDrag:fe,children:[e,O&&u.jsx(JM,{onSelectionContextMenu:D,noPanClassName:I,disableKeyboardA11y:V})]})})}m1.displayName="FlowRenderer";const KM=M.memo(m1),e2=e=>t=>e?Bp(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function t2(e){return Be(M.useCallback(e2(e),[e]),ot)}const n2=e=>e.updateNodeInternals;function i2(){const e=Be(n2),[t]=M.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const a=new Map;n.forEach(o=>{const s=o.target.getAttribute("data-id");a.set(s,{id:s,nodeElement:o.target,force:!0})}),e(a)}));return M.useEffect(()=>()=>{t?.disconnect()},[t]),t}function r2({node:e,nodeType:t,hasDimensions:n,resizeObserver:a}){const o=st(),s=M.useRef(null),c=M.useRef(null),d=M.useRef(e.sourcePosition),h=M.useRef(e.targetPosition),p=M.useRef(t),m=n&&!!e.internals.handleBounds;return M.useEffect(()=>{s.current&&!e.hidden&&(!m||c.current!==s.current)&&(c.current&&a?.unobserve(c.current),a?.observe(s.current),c.current=s.current)},[m,e.hidden]),M.useEffect(()=>()=>{c.current&&(a?.unobserve(c.current),c.current=null)},[]),M.useEffect(()=>{if(s.current){const g=p.current!==t,x=d.current!==e.sourcePosition,v=h.current!==e.targetPosition;(g||x||v)&&(p.current=t,d.current=e.sourcePosition,h.current=e.targetPosition,o.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:s.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),s}function a2({id:e,onClick:t,onMouseEnter:n,onMouseMove:a,onMouseLeave:o,onContextMenu:s,onDoubleClick:c,nodesDraggable:d,elementsSelectable:h,nodesConnectable:p,nodesFocusable:m,resizeObserver:g,noDragClassName:x,noPanClassName:v,disableKeyboardA11y:w,rfId:N,nodeTypes:j,nodeClickDistance:S,onError:k}){const{node:E,internals:T,isParent:_}=Be(te=>{const ue=te.nodeLookup.get(e),me=te.parentLookup.has(e);return{node:ue,internals:ue.internals,isParent:me}},ot);let A=E.type||"default",z=j?.[A]||rb[A];z===void 0&&(k?.("003",Xn.error003(A)),A="default",z=j?.default||rb.default);const G=!!(E.draggable||d&&typeof E.draggable>"u"),F=!!(E.selectable||h&&typeof E.selectable>"u"),L=!!(E.connectable||p&&typeof E.connectable>"u"),$=!!(E.focusable||m&&typeof E.focusable>"u"),H=st(),Q=Lw(E),D=r2({node:E,nodeType:A,hasDimensions:Q,resizeObserver:g}),q=h1({nodeRef:D,disabled:E.hidden||!G,noDragClassName:x,handleSelector:E.dragHandle,nodeId:e,isSelectable:F,nodeClickDistance:S}),I=p1();if(E.hidden)return null;const V=Ei(E),W=XM(E),J=F||G||t||n||a||o,O=n?te=>n(te,{...T.userNode}):void 0,R=a?te=>a(te,{...T.userNode}):void 0,U=o?te=>o(te,{...T.userNode}):void 0,B=s?te=>s(te,{...T.userNode}):void 0,re=c?te=>c(te,{...T.userNode}):void 0,de=te=>{const{selectNodesOnDrag:ue,nodeDragThreshold:me}=H.getState();F&&(!ue||!G||me>0)&&up({id:e,store:H,nodeRef:D}),t&&t(te,{...T.userNode})},fe=te=>{if(!(Pw(te.nativeEvent)||w)){if(Cw.includes(te.key)&&F){const ue=te.key==="Escape";up({id:e,store:H,unselect:ue,nodeRef:D})}else if(G&&E.selected&&Object.prototype.hasOwnProperty.call(Xc,te.key)){te.preventDefault();const{ariaLabelConfig:ue}=H.getState();H.setState({ariaLiveMessage:ue["node.a11yDescription.ariaLiveMessage"]({direction:te.key.replace("Arrow","").toLowerCase(),x:~~T.positionAbsolute.x,y:~~T.positionAbsolute.y})}),I({direction:Xc[te.key],factor:te.shiftKey?4:1})}}},ie=()=>{if(w||!D.current?.matches(":focus-visible"))return;const{transform:te,width:ue,height:me,autoPanOnNodeFocus:ge,setCenter:xe}=H.getState();if(!ge)return;Bp(new Map([[e,E]]),{x:0,y:0,width:ue,height:me},te,!0).length>0||xe(E.position.x+V.width/2,E.position.y+V.height/2,{zoom:te[2]})};return u.jsx("div",{className:St(["react-flow__node",`react-flow__node-${A}`,{[v]:G},E.className,{selected:E.selected,selectable:F,parent:_,draggable:G,dragging:q}]),ref:D,style:{zIndex:T.z,transform:`translate(${T.positionAbsolute.x}px,${T.positionAbsolute.y}px)`,pointerEvents:J?"all":"none",visibility:Q?"visible":"hidden",...E.style,...W},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:O,onMouseMove:R,onMouseLeave:U,onContextMenu:B,onClick:de,onDoubleClick:re,onKeyDown:$?fe:void 0,tabIndex:$?0:void 0,onFocus:$?ie:void 0,role:E.ariaRole??($?"group":void 0),"aria-roledescription":"node","aria-describedby":w?void 0:`${a1}-${N}`,"aria-label":E.ariaLabel,...E.domAttributes,children:u.jsx(HM,{value:e,children:u.jsx(z,{id:e,data:E.data,type:A,positionAbsoluteX:T.positionAbsolute.x,positionAbsoluteY:T.positionAbsolute.y,selected:E.selected??!1,selectable:F,draggable:G,deletable:E.deletable??!0,isConnectable:L,sourcePosition:E.sourcePosition,targetPosition:E.targetPosition,dragging:q,dragHandle:E.dragHandle,zIndex:T.z,parentId:E.parentId,...V})})})}var o2=M.memo(a2);const s2=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function g1(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:a,elementsSelectable:o,onError:s}=Be(s2,ot),c=t2(e.onlyRenderVisibleElements),d=i2();return u.jsx("div",{className:"react-flow__nodes",style:mu,children:c.map(h=>u.jsx(o2,{id:h,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:d,nodesDraggable:t,nodesConnectable:n,nodesFocusable:a,elementsSelectable:o,nodeClickDistance:e.nodeClickDistance,onError:s},h))})}g1.displayName="NodeRenderer";const l2=M.memo(g1);function c2(e){return Be(M.useCallback(n=>{if(!e)return n.edges.map(o=>o.id);const a=[];if(n.width&&n.height)for(const o of n.edges){const s=n.nodeLookup.get(o.source),c=n.nodeLookup.get(o.target);s&&c&&lT({sourceNode:s,targetNode:c,width:n.width,height:n.height,transform:n.transform})&&a.push(o.id)}return a},[e]),ot)}const u2=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e}};return u.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},d2=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e,fill:e}};return u.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},ob={[Gc.Arrow]:u2,[Gc.ArrowClosed]:d2};function f2(e){const t=st();return M.useMemo(()=>Object.prototype.hasOwnProperty.call(ob,e)?ob[e]:(t.getState().onError?.("009",Xn.error009(e)),null),[e])}const h2=({id:e,type:t,color:n,width:a=12.5,height:o=12.5,markerUnits:s="strokeWidth",strokeWidth:c,orient:d="auto-start-reverse"})=>{const h=f2(t);return h?u.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${a}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:d,refX:"0",refY:"0",children:u.jsx(h,{color:n,strokeWidth:c})}):null},y1=({defaultColor:e,rfId:t})=>{const n=Be(s=>s.edges),a=Be(s=>s.defaultEdgeOptions),o=M.useMemo(()=>mT(n,{id:t,defaultColor:e,defaultMarkerStart:a?.markerStart,defaultMarkerEnd:a?.markerEnd}),[n,a,t,e]);return o.length?u.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:u.jsx("defs",{children:o.map(s=>u.jsx(h2,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};y1.displayName="MarkerDefinitions";var p2=M.memo(y1);function x1({x:e,y:t,label:n,labelStyle:a,labelShowBg:o=!0,labelBgStyle:s,labelBgPadding:c=[2,4],labelBgBorderRadius:d=2,children:h,className:p,...m}){const[g,x]=M.useState({x:1,y:0,width:0,height:0}),v=St(["react-flow__edge-textwrapper",p]),w=M.useRef(null);return M.useEffect(()=>{if(w.current){const N=w.current.getBBox();x({x:N.x,y:N.y,width:N.width,height:N.height})}},[n]),n?u.jsxs("g",{transform:`translate(${e-g.width/2} ${t-g.height/2})`,className:v,visibility:g.width?"visible":"hidden",...m,children:[o&&u.jsx("rect",{width:g.width+2*c[0],x:-c[0],y:-c[1],height:g.height+2*c[1],className:"react-flow__edge-textbg",style:s,rx:d,ry:d}),u.jsx("text",{className:"react-flow__edge-text",y:g.height/2,dy:"0.3em",ref:w,style:a,children:n}),h]}):null}x1.displayName="EdgeText";const m2=M.memo(x1);function zs({path:e,labelX:t,labelY:n,label:a,labelStyle:o,labelShowBg:s,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:h,interactionWidth:p=20,...m}){return u.jsxs(u.Fragment,{children:[u.jsx("path",{...m,d:e,fill:"none",className:St(["react-flow__edge-path",m.className])}),p?u.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}):null,a&&_n(t)&&_n(n)?u.jsx(m2,{x:t,y:n,label:a,labelStyle:o,labelShowBg:s,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:h}):null]})}function sb({pos:e,x1:t,y1:n,x2:a,y2:o}){return e===ye.Left||e===ye.Right?[.5*(t+a),n]:[t,.5*(n+o)]}function v1({sourceX:e,sourceY:t,sourcePosition:n=ye.Bottom,targetX:a,targetY:o,targetPosition:s=ye.Top}){const[c,d]=sb({pos:n,x1:e,y1:t,x2:a,y2:o}),[h,p]=sb({pos:s,x1:a,y1:o,x2:e,y2:t}),[m,g,x,v]=Hw({sourceX:e,sourceY:t,targetX:a,targetY:o,sourceControlX:c,sourceControlY:d,targetControlX:h,targetControlY:p});return[`M${e},${t} C${c},${d} ${h},${p} ${a},${o}`,m,g,x,v]}function b1(e){return M.memo(({id:t,sourceX:n,sourceY:a,targetX:o,targetY:s,sourcePosition:c,targetPosition:d,label:h,labelStyle:p,labelShowBg:m,labelBgStyle:g,labelBgPadding:x,labelBgBorderRadius:v,style:w,markerEnd:N,markerStart:j,interactionWidth:S})=>{const[k,E,T]=v1({sourceX:n,sourceY:a,sourcePosition:c,targetX:o,targetY:s,targetPosition:d}),_=e.isInternal?void 0:t;return u.jsx(zs,{id:_,path:k,labelX:E,labelY:T,label:h,labelStyle:p,labelShowBg:m,labelBgStyle:g,labelBgPadding:x,labelBgBorderRadius:v,style:w,markerEnd:N,markerStart:j,interactionWidth:S})})}const g2=b1({isInternal:!1}),w1=b1({isInternal:!0});g2.displayName="SimpleBezierEdge";w1.displayName="SimpleBezierEdgeInternal";function S1(e){return M.memo(({id:t,sourceX:n,sourceY:a,targetX:o,targetY:s,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:g,style:x,sourcePosition:v=ye.Bottom,targetPosition:w=ye.Top,markerEnd:N,markerStart:j,pathOptions:S,interactionWidth:k})=>{const[E,T,_]=ap({sourceX:n,sourceY:a,sourcePosition:v,targetX:o,targetY:s,targetPosition:w,borderRadius:S?.borderRadius,offset:S?.offset,stepPosition:S?.stepPosition}),A=e.isInternal?void 0:t;return u.jsx(zs,{id:A,path:E,labelX:T,labelY:_,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:g,style:x,markerEnd:N,markerStart:j,interactionWidth:k})})}const N1=S1({isInternal:!1}),j1=S1({isInternal:!0});N1.displayName="SmoothStepEdge";j1.displayName="SmoothStepEdgeInternal";function E1(e){return M.memo(({id:t,...n})=>{const a=e.isInternal?void 0:t;return u.jsx(N1,{...n,id:a,pathOptions:M.useMemo(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}const y2=E1({isInternal:!1}),k1=E1({isInternal:!0});y2.displayName="StepEdge";k1.displayName="StepEdgeInternal";function C1(e){return M.memo(({id:t,sourceX:n,sourceY:a,targetX:o,targetY:s,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:g,style:x,markerEnd:v,markerStart:w,interactionWidth:N})=>{const[j,S,k]=Vw({sourceX:n,sourceY:a,targetX:o,targetY:s}),E=e.isInternal?void 0:t;return u.jsx(zs,{id:E,path:j,labelX:S,labelY:k,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:g,style:x,markerEnd:v,markerStart:w,interactionWidth:N})})}const x2=C1({isInternal:!1}),A1=C1({isInternal:!0});x2.displayName="StraightEdge";A1.displayName="StraightEdgeInternal";function T1(e){return M.memo(({id:t,sourceX:n,sourceY:a,targetX:o,targetY:s,sourcePosition:c=ye.Bottom,targetPosition:d=ye.Top,label:h,labelStyle:p,labelShowBg:m,labelBgStyle:g,labelBgPadding:x,labelBgBorderRadius:v,style:w,markerEnd:N,markerStart:j,pathOptions:S,interactionWidth:k})=>{const[E,T,_]=qw({sourceX:n,sourceY:a,sourcePosition:c,targetX:o,targetY:s,targetPosition:d,curvature:S?.curvature}),A=e.isInternal?void 0:t;return u.jsx(zs,{id:A,path:E,labelX:T,labelY:_,label:h,labelStyle:p,labelShowBg:m,labelBgStyle:g,labelBgPadding:x,labelBgBorderRadius:v,style:w,markerEnd:N,markerStart:j,interactionWidth:k})})}const v2=T1({isInternal:!1}),M1=T1({isInternal:!0});v2.displayName="BezierEdge";M1.displayName="BezierEdgeInternal";const lb={default:M1,straight:A1,step:k1,smoothstep:j1,simplebezier:w1},cb={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},b2=(e,t,n)=>n===ye.Left?e-t:n===ye.Right?e+t:e,w2=(e,t,n)=>n===ye.Top?e-t:n===ye.Bottom?e+t:e,ub="react-flow__edgeupdater";function db({position:e,centerX:t,centerY:n,radius:a=10,onMouseDown:o,onMouseEnter:s,onMouseOut:c,type:d}){return u.jsx("circle",{onMouseDown:o,onMouseEnter:s,onMouseOut:c,className:St([ub,`${ub}-${d}`]),cx:b2(t,a,e),cy:w2(n,a,e),r:a,stroke:"transparent",fill:"transparent"})}function S2({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:a,sourceY:o,targetX:s,targetY:c,sourcePosition:d,targetPosition:h,onReconnect:p,onReconnectStart:m,onReconnectEnd:g,setReconnecting:x,setUpdateHover:v}){const w=st(),N=(T,_)=>{if(T.button!==0)return;const{autoPanOnConnect:A,domNode:z,isValidConnection:G,connectionMode:F,connectionRadius:L,lib:$,onConnectStart:H,onConnectEnd:Q,cancelConnection:D,nodeLookup:q,rfId:I,panBy:V,updateConnection:W}=w.getState(),J=_.type==="target",O=(B,re)=>{x(!1),g?.(B,n,_.type,re)},R=B=>p?.(n,B),U=(B,re)=>{x(!0),m?.(T,n,_.type),H?.(B,re)};lp.onPointerDown(T.nativeEvent,{autoPanOnConnect:A,connectionMode:F,connectionRadius:L,domNode:z,handleId:_.id,nodeId:_.nodeId,nodeLookup:q,isTarget:J,edgeUpdaterType:_.type,lib:$,flowId:I,cancelConnection:D,panBy:V,isValidConnection:G,onConnect:R,onConnectStart:U,onConnectEnd:Q,onReconnectEnd:O,updateConnection:W,getTransform:()=>w.getState().transform,getFromHandle:()=>w.getState().connection.fromHandle,dragThreshold:w.getState().connectionDragThreshold,handleDomNode:T.currentTarget})},j=T=>N(T,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),S=T=>N(T,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),k=()=>v(!0),E=()=>v(!1);return u.jsxs(u.Fragment,{children:[(e===!0||e==="source")&&u.jsx(db,{position:d,centerX:a,centerY:o,radius:t,onMouseDown:j,onMouseEnter:k,onMouseOut:E,type:"source"}),(e===!0||e==="target")&&u.jsx(db,{position:h,centerX:s,centerY:c,radius:t,onMouseDown:S,onMouseEnter:k,onMouseOut:E,type:"target"})]})}function N2({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:a,onClick:o,onDoubleClick:s,onContextMenu:c,onMouseEnter:d,onMouseMove:h,onMouseLeave:p,reconnectRadius:m,onReconnect:g,onReconnectStart:x,onReconnectEnd:v,rfId:w,edgeTypes:N,noPanClassName:j,onError:S,disableKeyboardA11y:k}){let E=Be(xe=>xe.edgeLookup.get(e));const T=Be(xe=>xe.defaultEdgeOptions);E=T?{...T,...E}:E;let _=E.type||"default",A=N?.[_]||lb[_];A===void 0&&(S?.("011",Xn.error011(_)),_="default",A=N?.default||lb.default);const z=!!(E.focusable||t&&typeof E.focusable>"u"),G=typeof g<"u"&&(E.reconnectable||n&&typeof E.reconnectable>"u"),F=!!(E.selectable||a&&typeof E.selectable>"u"),L=M.useRef(null),[$,H]=M.useState(!1),[Q,D]=M.useState(!1),q=st(),{zIndex:I,sourceX:V,sourceY:W,targetX:J,targetY:O,sourcePosition:R,targetPosition:U}=Be(M.useCallback(xe=>{const we=xe.nodeLookup.get(E.source),Ce=xe.nodeLookup.get(E.target);if(!we||!Ce)return{zIndex:E.zIndex,...cb};const Ue=pT({id:e,sourceNode:we,targetNode:Ce,sourceHandle:E.sourceHandle||null,targetHandle:E.targetHandle||null,connectionMode:xe.connectionMode,onError:S});return{zIndex:sT({selected:E.selected,zIndex:E.zIndex,sourceNode:we,targetNode:Ce,elevateOnSelect:xe.elevateEdgesOnSelect,zIndexMode:xe.zIndexMode}),...Ue||cb}},[E.source,E.target,E.sourceHandle,E.targetHandle,E.selected,E.zIndex]),ot),B=M.useMemo(()=>E.markerStart?`url('#${op(E.markerStart,w)}')`:void 0,[E.markerStart,w]),re=M.useMemo(()=>E.markerEnd?`url('#${op(E.markerEnd,w)}')`:void 0,[E.markerEnd,w]);if(E.hidden||V===null||W===null||J===null||O===null)return null;const de=xe=>{const{addSelectedEdges:we,unselectNodesAndEdges:Ce,multiSelectionActive:Ue}=q.getState();F&&(q.setState({nodesSelectionActive:!1}),E.selected&&Ue?(Ce({nodes:[],edges:[E]}),L.current?.blur()):we([e])),o&&o(xe,E)},fe=s?xe=>{s(xe,{...E})}:void 0,ie=c?xe=>{c(xe,{...E})}:void 0,te=d?xe=>{d(xe,{...E})}:void 0,ue=h?xe=>{h(xe,{...E})}:void 0,me=p?xe=>{p(xe,{...E})}:void 0,ge=xe=>{if(!k&&Cw.includes(xe.key)&&F){const{unselectNodesAndEdges:we,addSelectedEdges:Ce}=q.getState();xe.key==="Escape"?(L.current?.blur(),we({edges:[E]})):Ce([e])}};return u.jsx("svg",{style:{zIndex:I},children:u.jsxs("g",{className:St(["react-flow__edge",`react-flow__edge-${_}`,E.className,j,{selected:E.selected,animated:E.animated,inactive:!F&&!o,updating:$,selectable:F}]),onClick:de,onDoubleClick:fe,onContextMenu:ie,onMouseEnter:te,onMouseMove:ue,onMouseLeave:me,onKeyDown:z?ge:void 0,tabIndex:z?0:void 0,role:E.ariaRole??(z?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":E.ariaLabel===null?void 0:E.ariaLabel||`Edge from ${E.source} to ${E.target}`,"aria-describedby":z?`${o1}-${w}`:void 0,ref:L,...E.domAttributes,children:[!Q&&u.jsx(A,{id:e,source:E.source,target:E.target,type:E.type,selected:E.selected,animated:E.animated,selectable:F,deletable:E.deletable??!0,label:E.label,labelStyle:E.labelStyle,labelShowBg:E.labelShowBg,labelBgStyle:E.labelBgStyle,labelBgPadding:E.labelBgPadding,labelBgBorderRadius:E.labelBgBorderRadius,sourceX:V,sourceY:W,targetX:J,targetY:O,sourcePosition:R,targetPosition:U,data:E.data,style:E.style,sourceHandleId:E.sourceHandle,targetHandleId:E.targetHandle,markerStart:B,markerEnd:re,pathOptions:"pathOptions"in E?E.pathOptions:void 0,interactionWidth:E.interactionWidth}),G&&u.jsx(S2,{edge:E,isReconnectable:G,reconnectRadius:m,onReconnect:g,onReconnectStart:x,onReconnectEnd:v,sourceX:V,sourceY:W,targetX:J,targetY:O,sourcePosition:R,targetPosition:U,setUpdateHover:H,setReconnecting:D})]})})}var j2=M.memo(N2);const E2=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function D1({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:a,noPanClassName:o,onReconnect:s,onEdgeContextMenu:c,onEdgeMouseEnter:d,onEdgeMouseMove:h,onEdgeMouseLeave:p,onEdgeClick:m,reconnectRadius:g,onEdgeDoubleClick:x,onReconnectStart:v,onReconnectEnd:w,disableKeyboardA11y:N}){const{edgesFocusable:j,edgesReconnectable:S,elementsSelectable:k,onError:E}=Be(E2,ot),T=c2(t);return u.jsxs("div",{className:"react-flow__edges",children:[u.jsx(p2,{defaultColor:e,rfId:n}),T.map(_=>u.jsx(j2,{id:_,edgesFocusable:j,edgesReconnectable:S,elementsSelectable:k,noPanClassName:o,onReconnect:s,onContextMenu:c,onMouseEnter:d,onMouseMove:h,onMouseLeave:p,onClick:m,reconnectRadius:g,onDoubleClick:x,onReconnectStart:v,onReconnectEnd:w,rfId:n,onError:E,edgeTypes:a,disableKeyboardA11y:N},_))]})}D1.displayName="EdgeRenderer";const k2=M.memo(D1),C2=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function A2({children:e}){const t=Be(C2);return u.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function T2(e){const t=pu(),n=M.useRef(!1);M.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const M2=e=>e.panZoom?.syncViewport;function D2(e){const t=Be(M2),n=st();return M.useEffect(()=>{e&&(t?.(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function O2(e){return e.connection.inProgress?{...e.connection,to:Ls(e.connection.to,e.transform)}:{...e.connection}}function _2(e){return O2}function R2(e){const t=_2();return Be(t,ot)}const I2=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function L2({containerStyle:e,style:t,type:n,component:a}){const{nodesConnectable:o,width:s,height:c,isValid:d,inProgress:h}=Be(I2,ot);return!(s&&o&&h)?null:u.jsx("svg",{style:e,width:s,height:c,className:"react-flow__connectionline react-flow__container",children:u.jsx("g",{className:St(["react-flow__connection",Mw(d)]),children:u.jsx(O1,{style:t,type:n,CustomComponent:a,isValid:d})})})}const O1=({style:e,type:t=lr.Bezier,CustomComponent:n,isValid:a})=>{const{inProgress:o,from:s,fromNode:c,fromHandle:d,fromPosition:h,to:p,toNode:m,toHandle:g,toPosition:x,pointer:v}=R2();if(!o)return;if(n)return u.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:c,fromHandle:d,fromX:s.x,fromY:s.y,toX:p.x,toY:p.y,fromPosition:h,toPosition:x,connectionStatus:Mw(a),toNode:m,toHandle:g,pointer:v});let w="";const N={sourceX:s.x,sourceY:s.y,sourcePosition:h,targetX:p.x,targetY:p.y,targetPosition:x};switch(t){case lr.Bezier:[w]=qw(N);break;case lr.SimpleBezier:[w]=v1(N);break;case lr.Step:[w]=ap({...N,borderRadius:0});break;case lr.SmoothStep:[w]=ap(N);break;default:[w]=Vw(N)}return u.jsx("path",{d:w,fill:"none",className:"react-flow__connection-path",style:e})};O1.displayName="ConnectionLine";const z2={};function fb(e=z2){M.useRef(e),st(),M.useEffect(()=>{},[e])}function B2(){st(),M.useRef(!1),M.useEffect(()=>{},[])}function _1({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:a,onEdgeClick:o,onNodeDoubleClick:s,onEdgeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:p,onNodeContextMenu:m,onSelectionContextMenu:g,onSelectionStart:x,onSelectionEnd:v,connectionLineType:w,connectionLineStyle:N,connectionLineComponent:j,connectionLineContainerStyle:S,selectionKeyCode:k,selectionOnDrag:E,selectionMode:T,multiSelectionKeyCode:_,panActivationKeyCode:A,zoomActivationKeyCode:z,deleteKeyCode:G,onlyRenderVisibleElements:F,elementsSelectable:L,defaultViewport:$,translateExtent:H,minZoom:Q,maxZoom:D,preventScrolling:q,defaultMarkerColor:I,zoomOnScroll:V,zoomOnPinch:W,panOnScroll:J,panOnScrollSpeed:O,panOnScrollMode:R,zoomOnDoubleClick:U,panOnDrag:B,onPaneClick:re,onPaneMouseEnter:de,onPaneMouseMove:fe,onPaneMouseLeave:ie,onPaneScroll:te,onPaneContextMenu:ue,paneClickDistance:me,nodeClickDistance:ge,onEdgeContextMenu:xe,onEdgeMouseEnter:we,onEdgeMouseMove:Ce,onEdgeMouseLeave:Ue,reconnectRadius:$e,onReconnect:ut,onReconnectStart:Kt,onReconnectEnd:Ot,noDragClassName:Ht,noWheelClassName:En,noPanClassName:Zn,disableKeyboardA11y:Kn,nodeExtent:Nt,rfId:Ai,viewport:oe,onViewportChange:pe}){return fb(e),fb(t),B2(),T2(n),D2(oe),u.jsx(KM,{onPaneClick:re,onPaneMouseEnter:de,onPaneMouseMove:fe,onPaneMouseLeave:ie,onPaneContextMenu:ue,onPaneScroll:te,paneClickDistance:me,deleteKeyCode:G,selectionKeyCode:k,selectionOnDrag:E,selectionMode:T,onSelectionStart:x,onSelectionEnd:v,multiSelectionKeyCode:_,panActivationKeyCode:A,zoomActivationKeyCode:z,elementsSelectable:L,zoomOnScroll:V,zoomOnPinch:W,zoomOnDoubleClick:U,panOnScroll:J,panOnScrollSpeed:O,panOnScrollMode:R,panOnDrag:B,defaultViewport:$,translateExtent:H,minZoom:Q,maxZoom:D,onSelectionContextMenu:g,preventScrolling:q,noDragClassName:Ht,noWheelClassName:En,noPanClassName:Zn,disableKeyboardA11y:Kn,onViewportChange:pe,isControlledViewport:!!oe,children:u.jsxs(A2,{children:[u.jsx(k2,{edgeTypes:t,onEdgeClick:o,onEdgeDoubleClick:c,onReconnect:ut,onReconnectStart:Kt,onReconnectEnd:Ot,onlyRenderVisibleElements:F,onEdgeContextMenu:xe,onEdgeMouseEnter:we,onEdgeMouseMove:Ce,onEdgeMouseLeave:Ue,reconnectRadius:$e,defaultMarkerColor:I,noPanClassName:Zn,disableKeyboardA11y:Kn,rfId:Ai}),u.jsx(L2,{style:N,type:w,component:j,containerStyle:S}),u.jsx("div",{className:"react-flow__edgelabel-renderer"}),u.jsx(l2,{nodeTypes:e,onNodeClick:a,onNodeDoubleClick:s,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:p,onNodeContextMenu:m,nodeClickDistance:ge,onlyRenderVisibleElements:F,noPanClassName:Zn,noDragClassName:Ht,disableKeyboardA11y:Kn,nodeExtent:Nt,rfId:Ai}),u.jsx("div",{className:"react-flow__viewport-portal"})]})})}_1.displayName="GraphView";const P2=M.memo(_1),hb=({nodes:e,edges:t,defaultNodes:n,defaultEdges:a,width:o,height:s,fitView:c,fitViewOptions:d,minZoom:h=.5,maxZoom:p=2,nodeOrigin:m,nodeExtent:g,zIndexMode:x="basic"}={})=>{const v=new Map,w=new Map,N=new Map,j=new Map,S=a??t??[],k=n??e??[],E=m??[0,0],T=g??ws;Yw(N,j,S);const _=sp(k,v,w,{nodeOrigin:E,nodeExtent:T,zIndexMode:x});let A=[0,0,1];if(c&&o&&s){const z=Rs(v,{filter:$=>!!(($.width||$.initialWidth)&&($.height||$.initialHeight))}),{x:G,y:F,zoom:L}=Pp(z,o,s,h,p,d?.padding??.1);A=[G,F,L]}return{rfId:"1",width:o??0,height:s??0,transform:A,nodes:k,nodesInitialized:_,nodeLookup:v,parentLookup:w,edges:S,edgeLookup:j,connectionLookup:N,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:a!==void 0,panZoom:null,minZoom:h,maxZoom:p,translateExtent:ws,nodeExtent:T,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Ga.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:E,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:c??!1,fitViewOptions:d,fitViewResolver:null,connection:{...Tw},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:tT,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:Aw,zIndexMode:x,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},$2=({nodes:e,edges:t,defaultNodes:n,defaultEdges:a,width:o,height:s,fitView:c,fitViewOptions:d,minZoom:h,maxZoom:p,nodeOrigin:m,nodeExtent:g,zIndexMode:x})=>rM((v,w)=>{async function N(){const{nodeLookup:j,panZoom:S,fitViewOptions:k,fitViewResolver:E,width:T,height:_,minZoom:A,maxZoom:z}=w();S&&(await KA({nodes:j,width:T,height:_,panZoom:S,minZoom:A,maxZoom:z},k),E?.resolve(!0),v({fitViewResolver:null}))}return{...hb({nodes:e,edges:t,width:o,height:s,fitView:c,fitViewOptions:d,minZoom:h,maxZoom:p,nodeOrigin:m,nodeExtent:g,defaultNodes:n,defaultEdges:a,zIndexMode:x}),setNodes:j=>{const{nodeLookup:S,parentLookup:k,nodeOrigin:E,elevateNodesOnSelect:T,fitViewQueued:_,zIndexMode:A}=w(),z=sp(j,S,k,{nodeOrigin:E,nodeExtent:g,elevateNodesOnSelect:T,checkEquality:!0,zIndexMode:A});_&&z?(N(),v({nodes:j,nodesInitialized:z,fitViewQueued:!1,fitViewOptions:void 0})):v({nodes:j,nodesInitialized:z})},setEdges:j=>{const{connectionLookup:S,edgeLookup:k}=w();Yw(S,k,j),v({edges:j})},setDefaultNodesAndEdges:(j,S)=>{if(j){const{setNodes:k}=w();k(j),v({hasDefaultNodes:!0})}if(S){const{setEdges:k}=w();k(S),v({hasDefaultEdges:!0})}},updateNodeInternals:j=>{const{triggerNodeChanges:S,nodeLookup:k,parentLookup:E,domNode:T,nodeOrigin:_,nodeExtent:A,debug:z,fitViewQueued:G,zIndexMode:F}=w(),{changes:L,updatedInternals:$}=ST(j,k,E,T,_,A,F);$&&(xT(k,E,{nodeOrigin:_,nodeExtent:A,zIndexMode:F}),G?(N(),v({fitViewQueued:!1,fitViewOptions:void 0})):v({}),L?.length>0&&(z&&console.log("React Flow: trigger node changes",L),S?.(L)))},updateNodePositions:(j,S=!1)=>{const k=[];let E=[];const{nodeLookup:T,triggerNodeChanges:_,connection:A,updateConnection:z,onNodesChangeMiddlewareMap:G}=w();for(const[F,L]of j){const $=T.get(F),H=!!($?.expandParent&&$?.parentId&&L?.position),Q={id:F,type:"position",position:H?{x:Math.max(0,L.position.x),y:Math.max(0,L.position.y)}:L.position,dragging:S};if($&&A.inProgress&&A.fromNode.id===$.id){const D=Hr($,A.fromHandle,ye.Left,!0);z({...A,from:D})}H&&$.parentId&&k.push({id:F,parentId:$.parentId,rect:{...L.internals.positionAbsolute,width:L.measured.width??0,height:L.measured.height??0}}),E.push(Q)}if(k.length>0){const{parentLookup:F,nodeOrigin:L}=w(),$=Vp(k,T,F,L);E.push(...$)}for(const F of G.values())E=F(E);_(E)},triggerNodeChanges:j=>{const{onNodesChange:S,setNodes:k,nodes:E,hasDefaultNodes:T,debug:_}=w();if(j?.length){if(T){const A=c1(j,E);k(A)}_&&console.log("React Flow: trigger node changes",j),S?.(j)}},triggerEdgeChanges:j=>{const{onEdgesChange:S,setEdges:k,edges:E,hasDefaultEdges:T,debug:_}=w();if(j?.length){if(T){const A=u1(j,E);k(A)}_&&console.log("React Flow: trigger edge changes",j),S?.(j)}},addSelectedNodes:j=>{const{multiSelectionActive:S,edgeLookup:k,nodeLookup:E,triggerNodeChanges:T,triggerEdgeChanges:_}=w();if(S){const A=j.map(z=>Rr(z,!0));T(A);return}T(Pa(E,new Set([...j]),!0)),_(Pa(k))},addSelectedEdges:j=>{const{multiSelectionActive:S,edgeLookup:k,nodeLookup:E,triggerNodeChanges:T,triggerEdgeChanges:_}=w();if(S){const A=j.map(z=>Rr(z,!0));_(A);return}_(Pa(k,new Set([...j]))),T(Pa(E,new Set,!0))},unselectNodesAndEdges:({nodes:j,edges:S}={})=>{const{edges:k,nodes:E,nodeLookup:T,triggerNodeChanges:_,triggerEdgeChanges:A}=w(),z=j||E,G=S||k,F=z.map($=>{const H=T.get($.id);return H&&(H.selected=!1),Rr($.id,!1)}),L=G.map($=>Rr($.id,!1));_(F),A(L)},setMinZoom:j=>{const{panZoom:S,maxZoom:k}=w();S?.setScaleExtent([j,k]),v({minZoom:j})},setMaxZoom:j=>{const{panZoom:S,minZoom:k}=w();S?.setScaleExtent([k,j]),v({maxZoom:j})},setTranslateExtent:j=>{w().panZoom?.setTranslateExtent(j),v({translateExtent:j})},resetSelectedElements:()=>{const{edges:j,nodes:S,triggerNodeChanges:k,triggerEdgeChanges:E,elementsSelectable:T}=w();if(!T)return;const _=S.reduce((z,G)=>G.selected?[...z,Rr(G.id,!1)]:z,[]),A=j.reduce((z,G)=>G.selected?[...z,Rr(G.id,!1)]:z,[]);k(_),E(A)},setNodeExtent:j=>{const{nodes:S,nodeLookup:k,parentLookup:E,nodeOrigin:T,elevateNodesOnSelect:_,nodeExtent:A,zIndexMode:z}=w();j[0][0]===A[0][0]&&j[0][1]===A[0][1]&&j[1][0]===A[1][0]&&j[1][1]===A[1][1]||(sp(S,k,E,{nodeOrigin:T,nodeExtent:j,elevateNodesOnSelect:_,checkEquality:!1,zIndexMode:z}),v({nodeExtent:j}))},panBy:j=>{const{transform:S,width:k,height:E,panZoom:T,translateExtent:_}=w();return NT({delta:j,panZoom:T,transform:S,translateExtent:_,width:k,height:E})},setCenter:async(j,S,k)=>{const{width:E,height:T,maxZoom:_,panZoom:A}=w();if(!A)return Promise.resolve(!1);const z=typeof k?.zoom<"u"?k.zoom:_;return await A.setViewport({x:E/2-j*z,y:T/2-S*z,zoom:z},{duration:k?.duration,ease:k?.ease,interpolate:k?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{v({connection:{...Tw}})},updateConnection:j=>{v({connection:j})},reset:()=>v({...hb()})}},Object.is);function R1({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:a,initialWidth:o,initialHeight:s,initialMinZoom:c,initialMaxZoom:d,initialFitViewOptions:h,fitView:p,nodeOrigin:m,nodeExtent:g,zIndexMode:x,children:v}){const[w]=M.useState(()=>$2({nodes:e,edges:t,defaultNodes:n,defaultEdges:a,width:o,height:s,fitView:p,minZoom:c,maxZoom:d,fitViewOptions:h,nodeOrigin:m,nodeExtent:g,zIndexMode:x}));return u.jsx(aM,{value:w,children:u.jsx(AM,{children:v})})}function H2({children:e,nodes:t,edges:n,defaultNodes:a,defaultEdges:o,width:s,height:c,fitView:d,fitViewOptions:h,minZoom:p,maxZoom:m,nodeOrigin:g,nodeExtent:x,zIndexMode:v}){return M.useContext(fu)?u.jsx(u.Fragment,{children:e}):u.jsx(R1,{initialNodes:t,initialEdges:n,defaultNodes:a,defaultEdges:o,initialWidth:s,initialHeight:c,fitView:d,initialFitViewOptions:h,initialMinZoom:p,initialMaxZoom:m,nodeOrigin:g,nodeExtent:x,zIndexMode:v,children:e})}const q2={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function U2({nodes:e,edges:t,defaultNodes:n,defaultEdges:a,className:o,nodeTypes:s,edgeTypes:c,onNodeClick:d,onEdgeClick:h,onInit:p,onMove:m,onMoveStart:g,onMoveEnd:x,onConnect:v,onConnectStart:w,onConnectEnd:N,onClickConnectStart:j,onClickConnectEnd:S,onNodeMouseEnter:k,onNodeMouseMove:E,onNodeMouseLeave:T,onNodeContextMenu:_,onNodeDoubleClick:A,onNodeDragStart:z,onNodeDrag:G,onNodeDragStop:F,onNodesDelete:L,onEdgesDelete:$,onDelete:H,onSelectionChange:Q,onSelectionDragStart:D,onSelectionDrag:q,onSelectionDragStop:I,onSelectionContextMenu:V,onSelectionStart:W,onSelectionEnd:J,onBeforeDelete:O,connectionMode:R,connectionLineType:U=lr.Bezier,connectionLineStyle:B,connectionLineComponent:re,connectionLineContainerStyle:de,deleteKeyCode:fe="Backspace",selectionKeyCode:ie="Shift",selectionOnDrag:te=!1,selectionMode:ue=Ss.Full,panActivationKeyCode:me="Space",multiSelectionKeyCode:ge=js()?"Meta":"Control",zoomActivationKeyCode:xe=js()?"Meta":"Control",snapToGrid:we,snapGrid:Ce,onlyRenderVisibleElements:Ue=!1,selectNodesOnDrag:$e,nodesDraggable:ut,autoPanOnNodeFocus:Kt,nodesConnectable:Ot,nodesFocusable:Ht,nodeOrigin:En=s1,edgesFocusable:Zn,edgesReconnectable:Kn,elementsSelectable:Nt=!0,defaultViewport:Ai=xM,minZoom:oe=.5,maxZoom:pe=2,translateExtent:Ee=ws,preventScrolling:Oe=!0,nodeExtent:He,defaultMarkerColor:Bt="#b1b1b7",zoomOnScroll:kn=!0,zoomOnPinch:Ct=!0,panOnScroll:ht=!1,panOnScrollSpeed:_t=.5,panOnScrollMode:Xe=zr.Free,zoomOnDoubleClick:Bn=!0,panOnDrag:en=!0,onPaneClick:ku,onPaneMouseEnter:Wr,onPaneMouseMove:Yr,onPaneMouseLeave:Xr,onPaneScroll:ei,onPaneContextMenu:Qr,paneClickDistance:fr=1,nodeClickDistance:Cu=0,children:Us,onReconnect:to,onReconnectStart:hr,onReconnectEnd:Au,onEdgeContextMenu:Fs,onEdgeDoubleClick:Vs,onEdgeMouseEnter:Gs,onEdgeMouseMove:no,onEdgeMouseLeave:io,reconnectRadius:Ws=10,onNodesChange:Ys,onEdgesChange:Pn,noDragClassName:jt="nodrag",noWheelClassName:Rt="nowheel",noPanClassName:ti="nopan",fitView:Jr,fitViewOptions:Xs,connectOnClick:Tu,attributionPosition:Qs,proOptions:pr,defaultEdgeOptions:ro,elevateNodesOnSelect:Ti=!0,elevateEdgesOnSelect:Mi=!1,disableKeyboardA11y:Di=!1,autoPanOnConnect:Oi,autoPanOnNodeDrag:gt,autoPanSpeed:Js,connectionRadius:Zs,isValidConnection:ni,onError:_i,style:Mu,id:ao,nodeDragThreshold:Ks,connectionDragThreshold:Du,viewport:Zr,onViewportChange:Kr,width:Cn,height:qt,colorMode:el="light",debug:Ou,onScroll:ea,ariaLabelConfig:tl,zIndexMode:mr="basic",..._u},Ut){const gr=ao||"1",nl=SM(el),oo=M.useCallback(ii=>{ii.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),ea?.(ii)},[ea]);return u.jsx("div",{"data-testid":"rf__wrapper",..._u,onScroll:oo,style:{...Mu,...q2},ref:Ut,className:St(["react-flow",o,nl]),id:ao,role:"application",children:u.jsxs(H2,{nodes:e,edges:t,width:Cn,height:qt,fitView:Jr,fitViewOptions:Xs,minZoom:oe,maxZoom:pe,nodeOrigin:En,nodeExtent:He,zIndexMode:mr,children:[u.jsx(P2,{onInit:p,onNodeClick:d,onEdgeClick:h,onNodeMouseEnter:k,onNodeMouseMove:E,onNodeMouseLeave:T,onNodeContextMenu:_,onNodeDoubleClick:A,nodeTypes:s,edgeTypes:c,connectionLineType:U,connectionLineStyle:B,connectionLineComponent:re,connectionLineContainerStyle:de,selectionKeyCode:ie,selectionOnDrag:te,selectionMode:ue,deleteKeyCode:fe,multiSelectionKeyCode:ge,panActivationKeyCode:me,zoomActivationKeyCode:xe,onlyRenderVisibleElements:Ue,defaultViewport:Ai,translateExtent:Ee,minZoom:oe,maxZoom:pe,preventScrolling:Oe,zoomOnScroll:kn,zoomOnPinch:Ct,zoomOnDoubleClick:Bn,panOnScroll:ht,panOnScrollSpeed:_t,panOnScrollMode:Xe,panOnDrag:en,onPaneClick:ku,onPaneMouseEnter:Wr,onPaneMouseMove:Yr,onPaneMouseLeave:Xr,onPaneScroll:ei,onPaneContextMenu:Qr,paneClickDistance:fr,nodeClickDistance:Cu,onSelectionContextMenu:V,onSelectionStart:W,onSelectionEnd:J,onReconnect:to,onReconnectStart:hr,onReconnectEnd:Au,onEdgeContextMenu:Fs,onEdgeDoubleClick:Vs,onEdgeMouseEnter:Gs,onEdgeMouseMove:no,onEdgeMouseLeave:io,reconnectRadius:Ws,defaultMarkerColor:Bt,noDragClassName:jt,noWheelClassName:Rt,noPanClassName:ti,rfId:gr,disableKeyboardA11y:Di,nodeExtent:He,viewport:Zr,onViewportChange:Kr}),u.jsx(wM,{nodes:e,edges:t,defaultNodes:n,defaultEdges:a,onConnect:v,onConnectStart:w,onConnectEnd:N,onClickConnectStart:j,onClickConnectEnd:S,nodesDraggable:ut,autoPanOnNodeFocus:Kt,nodesConnectable:Ot,nodesFocusable:Ht,edgesFocusable:Zn,edgesReconnectable:Kn,elementsSelectable:Nt,elevateNodesOnSelect:Ti,elevateEdgesOnSelect:Mi,minZoom:oe,maxZoom:pe,nodeExtent:He,onNodesChange:Ys,onEdgesChange:Pn,snapToGrid:we,snapGrid:Ce,connectionMode:R,translateExtent:Ee,connectOnClick:Tu,defaultEdgeOptions:ro,fitView:Jr,fitViewOptions:Xs,onNodesDelete:L,onEdgesDelete:$,onDelete:H,onNodeDragStart:z,onNodeDrag:G,onNodeDragStop:F,onSelectionDrag:q,onSelectionDragStart:D,onSelectionDragStop:I,onMove:m,onMoveStart:g,onMoveEnd:x,noPanClassName:ti,nodeOrigin:En,rfId:gr,autoPanOnConnect:Oi,autoPanOnNodeDrag:gt,autoPanSpeed:Js,onError:_i,connectionRadius:Zs,isValidConnection:ni,selectNodesOnDrag:$e,nodeDragThreshold:Ks,connectionDragThreshold:Du,onBeforeDelete:O,debug:Ou,ariaLabelConfig:tl,zIndexMode:mr}),u.jsx(yM,{onSelectionChange:Q}),Us,u.jsx(fM,{proOptions:pr,position:Qs}),u.jsx(dM,{rfId:gr,disableKeyboardA11y:Di})]})})}var F2=d1(U2);const V2=e=>e.domNode?.querySelector(".react-flow__edgelabel-renderer");function G2({children:e}){const t=Be(V2);return t?cp.createPortal(e,t):null}function I1(){const e=st();return M.useCallback(t=>{const{domNode:n,updateNodeInternals:a}=e.getState(),o=Array.isArray(t)?t:[t],s=new Map;o.forEach(c=>{const d=n?.querySelector(`.react-flow__node[data-id="${c}"]`);d&&s.set(c,{id:c,nodeElement:d,force:!0})}),requestAnimationFrame(()=>a(s,{triggerFitView:!1}))},[])}const W2=e=>({x:e.transform[0],y:e.transform[1],zoom:e.transform[2]});function Y2(){return Be(W2,ot)}function X2({dimensions:e,lineWidth:t,variant:n,className:a}){return u.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:St(["react-flow__background-pattern",n,a])})}function Q2({radius:e,className:t}){return u.jsx("circle",{cx:e,cy:e,r:e,className:St(["react-flow__background-pattern","dots",t])})}var cr;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(cr||(cr={}));const J2={[cr.Dots]:1,[cr.Lines]:1,[cr.Cross]:6},Z2=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function L1({id:e,variant:t=cr.Dots,gap:n=20,size:a,lineWidth:o=1,offset:s=0,color:c,bgColor:d,style:h,className:p,patternClassName:m}){const g=M.useRef(null),{transform:x,patternId:v}=Be(Z2,ot),w=a||J2[t],N=t===cr.Dots,j=t===cr.Cross,S=Array.isArray(n)?n:[n,n],k=[S[0]*x[2]||1,S[1]*x[2]||1],E=w*x[2],T=Array.isArray(s)?s:[s,s],_=j?[E,E]:k,A=[T[0]*x[2]||1+_[0]/2,T[1]*x[2]||1+_[1]/2],z=`${v}${e||""}`;return u.jsxs("svg",{className:St(["react-flow__background",p]),style:{...h,...mu,"--xy-background-color-props":d,"--xy-background-pattern-color-props":c},ref:g,"data-testid":"rf__background",children:[u.jsx("pattern",{id:z,x:x[0]%k[0],y:x[1]%k[1],width:k[0],height:k[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${A[0]},-${A[1]})`,children:N?u.jsx(Q2,{radius:E/2,className:m}):u.jsx(X2,{dimensions:_,lineWidth:o,variant:t,className:m})}),u.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${z})`})]})}L1.displayName="Background";const K2=M.memo(L1);function eD(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:u.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function tD(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:u.jsx("path",{d:"M0 0h32v4.2H0z"})})}function nD(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:u.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function iD(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:u.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function rD(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:u.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function bc({children:e,className:t,...n}){return u.jsx("button",{type:"button",className:St(["react-flow__controls-button",t]),...n,children:e})}const aD=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function z1({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:a=!0,fitViewOptions:o,onZoomIn:s,onZoomOut:c,onFitView:d,onInteractiveChange:h,className:p,children:m,position:g="bottom-left",orientation:x="vertical","aria-label":v}){const w=st(),{isInteractive:N,minZoomReached:j,maxZoomReached:S,ariaLabelConfig:k}=Be(aD,ot),{zoomIn:E,zoomOut:T,fitView:_}=pu(),A=()=>{E(),s?.()},z=()=>{T(),c?.()},G=()=>{_(o),d?.()},F=()=>{w.setState({nodesDraggable:!N,nodesConnectable:!N,elementsSelectable:!N}),h?.(!N)},L=x==="horizontal"?"horizontal":"vertical";return u.jsxs(hu,{className:St(["react-flow__controls",L,p]),position:g,style:e,"data-testid":"rf__controls","aria-label":v??k["controls.ariaLabel"],children:[t&&u.jsxs(u.Fragment,{children:[u.jsx(bc,{onClick:A,className:"react-flow__controls-zoomin",title:k["controls.zoomIn.ariaLabel"],"aria-label":k["controls.zoomIn.ariaLabel"],disabled:S,children:u.jsx(eD,{})}),u.jsx(bc,{onClick:z,className:"react-flow__controls-zoomout",title:k["controls.zoomOut.ariaLabel"],"aria-label":k["controls.zoomOut.ariaLabel"],disabled:j,children:u.jsx(tD,{})})]}),n&&u.jsx(bc,{className:"react-flow__controls-fitview",onClick:G,title:k["controls.fitView.ariaLabel"],"aria-label":k["controls.fitView.ariaLabel"],children:u.jsx(nD,{})}),a&&u.jsx(bc,{className:"react-flow__controls-interactive",onClick:F,title:k["controls.interactive.ariaLabel"],"aria-label":k["controls.interactive.ariaLabel"],children:N?u.jsx(rD,{}):u.jsx(iD,{})}),m]})}z1.displayName="Controls";M.memo(z1);function oD({id:e,x:t,y:n,width:a,height:o,style:s,color:c,strokeColor:d,strokeWidth:h,className:p,borderRadius:m,shapeRendering:g,selected:x,onClick:v}){const{background:w,backgroundColor:N}=s||{},j=c||w||N;return u.jsx("rect",{className:St(["react-flow__minimap-node",{selected:x},p]),x:t,y:n,rx:m,ry:m,width:a,height:o,style:{fill:j,stroke:d,strokeWidth:h},shapeRendering:g,onClick:v?S=>v(S,e):void 0})}const sD=M.memo(oD),lD=e=>e.nodes.map(t=>t.id),ih=e=>e instanceof Function?e:()=>e;function cD({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:a=5,nodeStrokeWidth:o,nodeComponent:s=sD,onClick:c}){const d=Be(lD,ot),h=ih(t),p=ih(e),m=ih(n),g=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return u.jsx(u.Fragment,{children:d.map(x=>u.jsx(dD,{id:x,nodeColorFunc:h,nodeStrokeColorFunc:p,nodeClassNameFunc:m,nodeBorderRadius:a,nodeStrokeWidth:o,NodeComponent:s,onClick:c,shapeRendering:g},x))})}function uD({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:a,nodeBorderRadius:o,nodeStrokeWidth:s,shapeRendering:c,NodeComponent:d,onClick:h}){const{node:p,x:m,y:g,width:x,height:v}=Be(w=>{const{internals:N}=w.nodeLookup.get(e),j=N.userNode,{x:S,y:k}=N.positionAbsolute,{width:E,height:T}=Ei(j);return{node:j,x:S,y:k,width:E,height:T}},ot);return!p||p.hidden||!Lw(p)?null:u.jsx(d,{x:m,y:g,width:x,height:v,style:p.style,selected:!!p.selected,className:a(p),color:t(p),borderRadius:o,strokeColor:n(p),strokeWidth:s,shapeRendering:c,onClick:h,id:p.id})}const dD=M.memo(uD);var fD=M.memo(cD);const hD=200,pD=150,mD=e=>!e.hidden,gD=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?Iw(Rs(e.nodeLookup,{filter:mD}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},yD="react-flow__minimap-desc";function B1({style:e,className:t,nodeStrokeColor:n,nodeColor:a,nodeClassName:o="",nodeBorderRadius:s=5,nodeStrokeWidth:c,nodeComponent:d,bgColor:h,maskColor:p,maskStrokeColor:m,maskStrokeWidth:g,position:x="bottom-right",onClick:v,onNodeClick:w,pannable:N=!1,zoomable:j=!1,ariaLabel:S,inversePan:k,zoomStep:E=1,offsetScale:T=5}){const _=st(),A=M.useRef(null),{boundingRect:z,viewBB:G,rfId:F,panZoom:L,translateExtent:$,flowWidth:H,flowHeight:Q,ariaLabelConfig:D}=Be(gD,ot),q=e?.width??hD,I=e?.height??pD,V=z.width/q,W=z.height/I,J=Math.max(V,W),O=J*q,R=J*I,U=T*J,B=z.x-(O-z.width)/2-U,re=z.y-(R-z.height)/2-U,de=O+U*2,fe=R+U*2,ie=`${yD}-${F}`,te=M.useRef(0),ue=M.useRef();te.current=J,M.useEffect(()=>{if(A.current&&L)return ue.current=OT({domNode:A.current,panZoom:L,getTransform:()=>_.getState().transform,getViewScale:()=>te.current}),()=>{ue.current?.destroy()}},[L]),M.useEffect(()=>{ue.current?.update({translateExtent:$,width:H,height:Q,inversePan:k,pannable:N,zoomStep:E,zoomable:j})},[N,j,k,E,$,H,Q]);const me=v?we=>{const[Ce,Ue]=ue.current?.pointer(we)||[0,0];v(we,{x:Ce,y:Ue})}:void 0,ge=w?M.useCallback((we,Ce)=>{const Ue=_.getState().nodeLookup.get(Ce).internals.userNode;w(we,Ue)},[]):void 0,xe=S??D["minimap.ariaLabel"];return u.jsx(hu,{position:x,style:{...e,"--xy-minimap-background-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-background-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-stroke-color-props":typeof m=="string"?m:void 0,"--xy-minimap-mask-stroke-width-props":typeof g=="number"?g*J:void 0,"--xy-minimap-node-background-color-props":typeof a=="string"?a:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof c=="number"?c:void 0},className:St(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:u.jsxs("svg",{width:q,height:I,viewBox:`${B} ${re} ${de} ${fe}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":ie,ref:A,onClick:me,children:[xe&&u.jsx("title",{id:ie,children:xe}),u.jsx(fD,{onClick:ge,nodeColor:a,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:o,nodeStrokeWidth:c,nodeComponent:d}),u.jsx("path",{className:"react-flow__minimap-mask",d:`M${B-U},${re-U}h${de+U*2}v${fe+U*2}h${-de-U*2}z
        M${G.x},${G.y}h${G.width}v${G.height}h${-G.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}B1.displayName="MiniMap";const xD=M.memo(B1),vD=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,bD={[Qa.Line]:"right",[Qa.Handle]:"bottom-right"};function wD({nodeId:e,position:t,variant:n=Qa.Handle,className:a,style:o=void 0,children:s,color:c,minWidth:d=10,minHeight:h=10,maxWidth:p=Number.MAX_VALUE,maxHeight:m=Number.MAX_VALUE,keepAspectRatio:g=!1,resizeDirection:x,autoScale:v=!0,shouldResize:w,onResizeStart:N,onResize:j,onResizeEnd:S}){const k=Fr(),E=typeof e=="string"?e:k,T=st(),_=M.useRef(null),A=n===Qa.Handle,z=Be(M.useCallback(vD(A&&v),[A,v]),ot),G=M.useRef(null),F=t??bD[n];M.useEffect(()=>{if(!(!_.current||!E))return G.current||(G.current=GT({domNode:_.current,nodeId:E,getStoreItems:()=>{const{nodeLookup:$,transform:H,snapGrid:Q,snapToGrid:D,nodeOrigin:q,domNode:I}=T.getState();return{nodeLookup:$,transform:H,snapGrid:Q,snapToGrid:D,nodeOrigin:q,paneDomNode:I}},onChange:($,H)=>{const{triggerNodeChanges:Q,nodeLookup:D,parentLookup:q,nodeOrigin:I}=T.getState(),V=[],W={x:$.x,y:$.y},J=D.get(E);if(J&&J.expandParent&&J.parentId){const O=J.origin??I,R=$.width??J.measured.width??0,U=$.height??J.measured.height??0,B={id:J.id,parentId:J.parentId,rect:{width:R,height:U,...zw({x:$.x??J.position.x,y:$.y??J.position.y},{width:R,height:U},J.parentId,D,O)}},re=Vp([B],D,q,I);V.push(...re),W.x=$.x?Math.max(O[0]*R,$.x):void 0,W.y=$.y?Math.max(O[1]*U,$.y):void 0}if(W.x!==void 0&&W.y!==void 0){const O={id:E,type:"position",position:{...W}};V.push(O)}if($.width!==void 0&&$.height!==void 0){const R={id:E,type:"dimensions",resizing:!0,setAttributes:x?x==="horizontal"?"width":"height":!0,dimensions:{width:$.width,height:$.height}};V.push(R)}for(const O of H){const R={...O,type:"position"};V.push(R)}Q(V)},onEnd:({width:$,height:H})=>{const Q={id:E,type:"dimensions",resizing:!1,dimensions:{width:$,height:H}};T.getState().triggerNodeChanges([Q])}})),G.current.update({controlPosition:F,boundaries:{minWidth:d,minHeight:h,maxWidth:p,maxHeight:m},keepAspectRatio:g,resizeDirection:x,onResizeStart:N,onResize:j,onResizeEnd:S,shouldResize:w}),()=>{G.current?.destroy()}},[F,d,h,p,m,g,N,j,S,w]);const L=F.split("-");return u.jsx("div",{className:St(["react-flow__resize-control","nodrag",...L,n,a]),ref:_,style:{...o,scale:z,...c&&{[A?"backgroundColor":"borderColor"]:c}},children:s})}M.memo(wD);const pb=e=>{let t;const n=new Set,a=(p,m)=>{const g=typeof p=="function"?p(t):p;if(!Object.is(g,t)){const x=t;t=m??(typeof g!="object"||g===null)?g:Object.assign({},t,g),n.forEach(v=>v(t,x))}},o=()=>t,d={setState:a,getState:o,getInitialState:()=>h,subscribe:p=>(n.add(p),()=>n.delete(p))},h=t=e(a,o,d);return d},SD=(e=>e?pb(e):pb),ND=e=>e;function jD(e,t=ND){const n=jn.useSyncExternalStore(e.subscribe,jn.useCallback(()=>t(e.getState()),[e,t]),jn.useCallback(()=>t(e.getInitialState()),[e,t]));return jn.useDebugValue(n),n}const mb=e=>{const t=SD(e),n=a=>jD(t,a);return Object.assign(n,t),n},gu=(e=>e?mb(e):mb),Ne=gu((e,t)=>({workflowId:null,workflowName:"Untitled Workflow",nodes:[],edges:[],previewNodes:[],previewEdges:[],selectedNodeId:null,configOpen:!1,setNodes:n=>e({nodes:n}),setEdges:n=>e({edges:n}),onNodesChange:n=>{e({nodes:c1(n,t().nodes)})},onEdgesChange:n=>{e({edges:u1(n,t().edges)})},onConnect:n=>{const a={...n,type:"animated"};e({edges:Fw(a,t().edges)})},addNode:n=>{e({nodes:[...t().nodes,n]})},updateNode:(n,a)=>{e({nodes:t().nodes.map(o=>o.id===n?{...o,data:{...o.data,...a}}:o)})},deleteNode:n=>{e({nodes:t().nodes.filter(a=>a.id!==n),edges:t().edges.filter(a=>a.source!==n&&a.target!==n)})},setSelectedNode:n=>e({selectedNodeId:n}),setConfigOpen:n=>e({configOpen:n}),openConfig:n=>e({selectedNodeId:n,configOpen:!0}),closeConfig:()=>e({configOpen:!1}),clearWorkflow:()=>e({nodes:[],edges:[],selectedNodeId:null,configOpen:!1}),setWorkflowName:n=>e({workflowName:n}),getWorkflowData:()=>({id:t().workflowId,name:t().workflowName,nodes:t().nodes,edges:t().edges}),loadWorkflow:n=>{e({workflowId:n.id||Date.now().toString(),workflowName:n.name||"Untitled Workflow",nodes:n.nodes||[],edges:n.edges||[],selectedNodeId:null})},setPreview:(n,a)=>{e({previewNodes:n.map(o=>({...o,id:o.id||`preview-${Math.random()}`,className:"node-ghost",draggable:!1,selectable:!1})),previewEdges:a.map(o=>({...o,id:o.id||`preview-edge-${Math.random()}`,className:"edge-ghost",animated:!0}))})},clearPreview:()=>e({previewNodes:[],previewEdges:[]}),commitPreview:()=>{const{nodes:n,edges:a,previewNodes:o,previewEdges:s}=t(),c=o.map(h=>{const{className:p,draggable:m,selectable:g,...x}=h;return{...x,selected:!1}}),d=s.map(h=>{const{className:p,...m}=h;return{...m,type:"animated"}});e({nodes:[...n,...c],edges:[...a,...d],previewNodes:[],previewEdges:[]})}})),We=gu((e,t)=>({isRunning:!1,isPaused:!1,isDebugMode:!1,currentNodeId:null,activeSupportingNodeIds:[],executionPath:[],logs:[],nodeResults:{},edgeSnapshots:{},artifacts:[],startTime:null,endTime:null,startExecution:()=>{e({isRunning:!0,isPaused:!1,startTime:Date.now(),endTime:null,logs:[],nodeResults:{},executionPath:[],currentNodeId:null,activeSupportingNodeIds:[]})},stopExecution:()=>{e({isRunning:!1,isPaused:!1,endTime:Date.now(),currentNodeId:null,activeSupportingNodeIds:[]})},setCurrentNode:n=>{const a=t().executionPath;e({currentNodeId:n,executionPath:n?[...a,n]:a,activeSupportingNodeIds:[]})},setActiveSupportingNodes:n=>{e({activeSupportingNodeIds:n||[]})},setNodeResult:(n,a)=>{e({nodeResults:{...t().nodeResults,[n]:a}})},addEdgeSnapshot:(n,a)=>{const o=t().edgeSnapshots,s=o[n]||[],c={timestamp:Date.now(),data:a,preview:JSON.stringify(a,null,2).slice(0,500)},d=[...s,c].slice(-5);e({edgeSnapshots:{...o,[n]:d}})},getEdgeSnapshots:n=>t().edgeSnapshots[n]||[],getLastEdgeSnapshot:n=>{const a=t().edgeSnapshots[n];return a?.[a.length-1]||null},clearEdgeSnapshots:()=>e({edgeSnapshots:{}}),addLog:n=>{const a={id:Date.now().toString()+Math.random().toString(36).slice(2,9),timestamp:new Date().toISOString(),...n};e({logs:[...t().logs,a]})},addArtifact:n=>{e({artifacts:[...t().artifacts,n]})},clearLogs:()=>e({logs:[]}),setDebugMode:n=>e({isDebugMode:n}),getExecutionDuration:()=>{const{startTime:n,endTime:a,isRunning:o}=t();return n?(o?Date.now():a||Date.now())-n:0},reset:()=>{e({isRunning:!1,isPaused:!1,isDebugMode:!1,currentNodeId:null,executionPath:[],logs:[],nodeResults:{},edgeSnapshots:{},artifacts:[],startTime:null,endTime:null})}})),Ja=gu((e,t)=>({toasts:[],addToast:(n,a="info",o=3e3)=>{const s=Date.now().toString()+Math.random().toString(36).slice(2,6),c={id:s,message:n,type:a,duration:o};return e({toasts:[...t().toasts,c]}),o>0&&setTimeout(()=>{t().removeToast(s)},o),s},removeToast:n=>{e({toasts:t().toasts.filter(a=>a.id!==n)})},success:(n,a)=>t().addToast(n,"success",a),error:(n,a)=>t().addToast(n,"error",a??5e3),warning:(n,a)=>t().addToast(n,"warning",a),info:(n,a)=>t().addToast(n,"info",a)})),qr={trigger:{name:"Triggers",color:"#00c853",description:"Start a workflow execution"},action:{name:"Actions",color:"#2979ff",description:"Perform operations on data"},logic:{name:"Logic",color:"#ffab00",description:"Control workflow flow"},ai:{name:"AI",color:"#e040fb",description:"AI-powered operations"},aiTool:{name:"AI Tools",color:"#f59e0b",description:"Tools callable by AI Agents"}},ki={manualTrigger:{type:"manualTrigger",category:"trigger",name:"Manual Trigger",description:"Manually start the workflow",icon:"",inputs:0,outputs:1,defaultData:{label:"Manual Trigger"}},scheduleTrigger:{type:"scheduleTrigger",category:"trigger",name:"Schedule Trigger",description:"Run on a schedule (cron-like)",icon:"",inputs:1,outputs:1,defaultData:{label:"Schedule",schedule:"*/5 * * * *",enabled:!1}},webhookTrigger:{type:"webhookTrigger",category:"trigger",name:"Webhook Trigger",description:"Receive external HTTP triggers",icon:"",inputs:0,outputs:1,defaultData:{label:"Webhook",method:"POST",endpoint:"/webhook/default",authRequired:!1}},errorTrigger:{type:"errorTrigger",category:"trigger",name:"Error Trigger",description:"Trigger when any node fails",icon:"",inputs:0,outputs:1,defaultData:{label:"On Error",watchAll:!0,specificNodes:[],retryEnabled:!1,retryCount:3}},browserEventTrigger:{type:"browserEventTrigger",category:"trigger",name:"Browser Event",description:"Trigger on browser events",icon:"",inputs:0,outputs:1,defaultData:{label:"Browser Event",eventType:"focus",selector:"",urlPattern:"",interval:1e3}},output:{type:"output",category:"trigger",name:"Output",description:"Workflow output - displays or saves result",icon:"",inputs:1,outputs:0,defaultData:{label:"Output",outputType:"console",filename:"output.txt",formatJson:!1}},codeExecutor:{type:"codeExecutor",category:"action",name:"Code",description:"Execute JavaScript code",icon:"",inputs:1,outputs:1,defaultData:{label:"Code",code:"// Access input data via `input`\n// Return output data\nreturn input;"}},setVariable:{type:"setVariable",category:"action",name:"Set Variable",description:"Set or transform data",icon:"",inputs:1,outputs:1,defaultData:{label:"Set Variable",variableName:"data",value:"",mode:"set"}},httpRequest:{type:"httpRequest",category:"aiTool",name:"HTTP Request",description:"Make HTTP requests to APIs",icon:"",inputs:0,outputs:0,isProvider:!0,defaultData:{label:"HTTP Request",method:"GET",url:"",headers:{},body:"",timeout:3e4,description:"Perform HTTP request. Args: { url, method, body }"}},fileSystem:{type:"fileSystem",category:"aiTool",name:"File System",description:"Read/write local files (FSA API)",icon:"",inputs:0,outputs:0,isProvider:!0,defaultData:{label:"File",mode:"read",filename:"",fileTypes:[],description:"Read or write files. Args: { filename, content, mode }"}},localStorage:{type:"localStorage",category:"action",name:"Local Storage",description:"Read/write to IndexedDB or LocalStorage",icon:"",inputs:1,outputs:1,defaultData:{label:"Storage",mode:"get",storageType:"indexedDB",key:""}},ifElse:{type:"ifElse",category:"logic",name:"If/Else",description:"Branch based on conditions",icon:"",inputs:1,outputs:2,defaultData:{label:"If/Else",condition:"",operator:"equals",compareValue:""}},loop:{type:"loop",category:"logic",name:"Loop",description:"Iterate over array items or repeat N times",icon:"",inputs:1,outputs:2,defaultData:{label:"Loop",iterations:1,itemsPath:"items",maxIterations:100}},switchNode:{type:"switchNode",category:"logic",name:"Switch",description:"Route to different outputs",icon:"",inputs:1,outputs:4,defaultData:{label:"Switch",field:"",routes:[{value:"",outputIndex:0},{value:"",outputIndex:1}],defaultOutput:3}},merge:{type:"merge",category:"logic",name:"Merge",description:"Combine multiple inputs (wait for all or first)",icon:"",inputs:2,outputs:1,defaultData:{label:"Merge",mode:"wait",inputCount:2,aggregator:"array"}},semanticRouter:{type:"semanticRouter",category:"ai",name:"Semantic Router",description:"Route input to outputs based on semantic classification",icon:"",inputs:1,outputs:4,defaultData:{label:"Router",classificationMode:"keyword",routes:[{id:"route-0",label:"General",keywords:["general","other"]},{id:"route-1",label:"Technical",keywords:["code","programming","bug"]},{id:"route-2",label:"Creative",keywords:["story","write","creative"]}]}},evaluator:{type:"evaluator",category:"ai",name:"Evaluator",description:"Validate output against schema for self-correction loops",icon:"",inputs:1,outputs:2,defaultData:{label:"Evaluator",evaluationType:"schema",maxRetries:3,schema:null,regexPattern:""}},swarm:{type:"swarm",category:"ai",name:"Swarm",description:"Execute multiple AI agents in parallel and aggregate results",icon:"",inputs:1,outputs:2,defaultData:{label:"Swarm",agentCount:3,aggregationMode:"consensus",timeout:3e4,systemPrompt:""}},groupNode:{type:"groupNode",category:"logic",name:"Group",description:"Collapsible container for grouping nodes",icon:"",inputs:1,outputs:1,defaultData:{label:"Node Group",collapsed:!1,childNodeIds:[],width:300,height:200,color:"#6366f1"}},chatModel:{type:"chatModel",category:"ai",name:"Chat Model",description:"AI model provider for agents",icon:"",inputs:0,outputs:0,isProvider:!0,defaultData:{label:"Chat Model",provider:"webllm",modelId:"gemma-2-2b-it-q4f16_1-MLC",modelName:"Gemma 2 2B",temperature:.7,maxTokens:2e3}},aiAgent:{type:"aiAgent",category:"ai",name:"AI Agent",description:"WebLLM-powered AI agent with ReAct",icon:"",inputs:1,outputs:1,defaultData:{label:"AI Agent",systemPrompt:"",modelId:"gemma-2-2b-it-q4f16_1-MLC",temperature:.7,maxTokens:2e3,tools:[]}},vectorMemory:{type:"vectorMemory",category:"ai",name:"Vector Memory",description:"Store and query local vector memory",icon:"",inputs:1,outputs:1,isProvider:!0,defaultData:{label:"Memory",mode:"query",namespace:"default",topK:5,minScore:.3}},waitForApproval:{type:"waitForApproval",category:"ai",name:"Wait for Approval",description:"Pause workflow for human approval",icon:"",inputs:1,outputs:2,defaultData:{label:"Approval",title:"Approval Required",message:"",timeout:0,notifyBrowser:!0}},subWorkflow:{type:"subWorkflow",category:"ai",name:"Sub-Workflow",description:"Execute another workflow as subroutine",icon:"",inputs:1,outputs:1,defaultData:{label:"Sub-Workflow",workflowId:"",workflowName:"",passInput:!0,async:!1}},textToSpeech:{type:"textToSpeech",category:"aiTool",name:"Text to Speech",description:"Convert text to audio using Web Speech API",icon:"",inputs:0,outputs:0,isProvider:!0,defaultData:{label:"Text to Speech",provider:"webSpeech",voice:"default",speed:1,pitch:1,autoPlay:!0}},imageGeneration:{type:"imageGeneration",category:"aiTool",name:"Image Generation",description:"Generate images using AI models",icon:"",inputs:1,outputs:1,defaultData:{label:"Generate Image",provider:"local",model:"stable-diffusion",size:"512x512",negativePrompt:"",seed:null,steps:20}},pythonExecutor:{type:"pythonExecutor",category:"aiTool",name:"Python Executor",description:"Run Python code locally using Pyodide",icon:"",inputs:1,outputs:1,defaultData:{label:"Python",code:`# Access input via 'input' variable
result = input`,packages:[],timeout:3e4}}};function ED(){const e={};return Object.values(qr).forEach(t=>{e[t.name]=[]}),Object.values(ki).forEach(t=>{const n=qr[t.category];n&&e[n.name].push(t)}),e}function ar(e,t){const n=ki[e];if(!n)throw new Error(`Unknown node type: ${e}`);return{id:`${e}-${Date.now()}-${Math.random().toString(36).slice(2,9)}`,type:e,position:t,data:{...n.defaultData}}}function yu(e){const t=ki[e];if(!t)return"#666666";const n=qr[t.category];return n?n.color:"#666666"}function kD(e,t,n){const{source:a,target:o}=e;if(a===o)return!1;const s=t.find(x=>x.id===a),c=t.find(x=>x.id===o);if(!s||!c||ki[c.type]?.category==="trigger"&&c.type!=="scheduleTrigger"&&c.type!=="output"||n.find(x=>x.source===a&&x.target===o))return!1;const p=s.type==="loop";if(n.find(x=>x.source===o&&x.target===a)&&!p)return!1;const{targetHandle:g}=e;return!(g==="model-slot"&&s.type!=="chatModel"||g==="memory-slot"&&s.type!=="vectorMemory"||g==="tool-slot"&&!["codeExecutor","pythonExecutor","httpRequest","pythonTool","textToSpeech","imageGeneration","aiAgent","fileSystem"].includes(s.type))}function CD(e){return e.filter(t=>ki[t.type]?.category==="trigger")}function AD({x:e,y:t,type:n,onClose:a,onAction:o}){const s=n==="node"?[{id:"duplicate",label:"Duplicate",icon:"",shortcut:"Ctrl+D"},{id:"copy",label:"Copy",icon:"",shortcut:"Ctrl+C"},{id:"cut",label:"Cut",icon:"",shortcut:"Ctrl+X"},{id:"divider1",divider:!0},{id:"delete",label:"Delete",icon:"",shortcut:"Del",danger:!0}]:n==="insert"?[{id:"addTrigger",label:"Add Trigger",icon:""},{id:"addHTTP",label:"Add HTTP Request",icon:""},{id:"addAI",label:"Add AI Agent",icon:""},{id:"codeExecutor",label:"Add Code Executor",icon:""},{id:"setVariable",label:"Add Set Variable",icon:""},{id:"divider1",divider:!0},{id:"ifElse",label:"Add If/Else",icon:""},{id:"textToSpeech",label:"Add Text to Speech",icon:""},{id:"output",label:"Add Output",icon:""}]:[{id:"addTrigger",label:"Add Trigger",icon:""},{id:"addHTTP",label:"Add HTTP Request",icon:""},{id:"addAI",label:"Add AI Agent",icon:""},{id:"divider1",divider:!0},{id:"paste",label:"Paste",icon:"",shortcut:"Ctrl+V"},{id:"selectAll",label:"Select All",icon:"",shortcut:"Ctrl+A"},{id:"divider2",divider:!0},{id:"fitView",label:"Fit View",icon:""},{id:"zoomIn",label:"Zoom In",icon:"",shortcut:"Ctrl++"},{id:"zoomOut",label:"Zoom Out",icon:"",shortcut:"Ctrl+-"}],c=d=>{o(d),a()};return u.jsx("div",{className:"context-menu",style:{left:e,top:t},onClick:d=>d.stopPropagation(),children:s.map(d=>d.divider?u.jsx("div",{className:"context-menu-divider"},d.id):u.jsxs("button",{className:`context-menu-item ${d.danger?"danger":""}`,onClick:()=>c(d.id),children:[u.jsx("span",{className:"menu-icon",children:d.icon}),u.jsx("span",{className:"menu-label",children:d.label}),d.shortcut&&u.jsx("span",{className:"menu-shortcut",children:d.shortcut})]},d.id))})}const TD=M.memo(AD),wc={circle:"circle",diamond:"diamond"},Qc={workflow:{id:"workflow",label:"Data",color:"#888",strokeDasharray:"none",shape:wc.circle,description:"Standard data flow connection"},model:{id:"model",label:"Chat Model",color:"#6366f1",strokeDasharray:"5,5",shape:wc.diamond,description:"AI model provider connection",required:!0,warningColor:"#ef4444"},memory:{id:"memory",label:"Memory",color:"#10b981",strokeDasharray:"5,5",shape:wc.diamond,description:"Memory/context connection",required:!1},tool:{id:"tool",label:"Tool",color:"#f59e0b",strokeDasharray:"5,5",shape:wc.diamond,description:"Tool/function connection",multiple:!0,required:!1}},MD={resourceSlots:[{id:"model-slot",type:"model",position:"bottom",label:"Model",shape:"diamond",required:!0},{id:"memory-slot",type:"memory",position:"bottom",label:"Memory",shape:"diamond",required:!1},{id:"tool-slot",type:"tool",position:"bottom",label:"Tools",shape:"diamond",multiple:!0,required:!1}]},DD="modulepreload",OD=function(e){return"/"+e},gb={},_D=function(t,n,a){let o=Promise.resolve();if(n&&n.length>0){let h=function(p){return Promise.all(p.map(m=>Promise.resolve(m).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=c?.nonce||c?.getAttribute("nonce");o=h(n.map(p=>{if(p=OD(p),p in gb)return;gb[p]=!0;const m=p.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${g}`))return;const x=document.createElement("link");if(x.rel=m?"stylesheet":DD,m||(x.as="script"),x.crossOrigin="",x.href=p,d&&x.setAttribute("nonce",d),document.head.appendChild(x),m)return new Promise((v,w)=>{x.addEventListener("load",v),x.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${p}`)))})}))}function s(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return o.then(c=>{for(const d of c||[])d.status==="rejected"&&s(d.reason);return t().catch(s)})},RD=[{id:"gemma-2-2b-it-q4f16_1-MLC",name:"Gemma 2 2B",size:"~1.4GB",description:"Google's fast, lightweight model (Recommended)",category:"recommended"},{id:"Qwen2.5-1.5B-Instruct-q4f16_1-MLC",name:"Qwen 2.5 1.5B",size:"~1GB",description:"Alibaba's efficient small model",category:"recommended"},{id:"SmolLM2-1.7B-Instruct-q4f16_1-MLC",name:"SmolLM2 1.7B",size:"~1.1GB",description:"HuggingFace's compact model",category:"recommended"},{id:"Qwen2.5-0.5B-Instruct-q4f16_1-MLC",name:"Qwen 2.5 0.5B",size:"~350MB",description:"Ultra-light Qwen for basic tasks",category:"qwen"},{id:"Qwen2.5-3B-Instruct-q4f16_1-MLC",name:"Qwen 2.5 3B",size:"~2GB",description:"Balanced Qwen with good reasoning",category:"qwen"},{id:"Qwen2.5-7B-Instruct-q4f16_1-MLC",name:"Qwen 2.5 7B",size:"~4.5GB",description:"Powerful Qwen for complex tasks",category:"qwen"},{id:"Qwen2.5-Coder-1.5B-Instruct-q4f16_1-MLC",name:"Qwen 2.5 Coder 1.5B",size:"~1GB",description:"Optimized for code generation",category:"qwen"},{id:"Qwen2.5-Coder-7B-Instruct-q4f16_1-MLC",name:"Qwen 2.5 Coder 7B",size:"~4.5GB",description:"Advanced coding assistant",category:"qwen"},{id:"Phi-3.5-mini-instruct-q4f16_1-MLC",name:"Phi-3.5 Mini",size:"~2.4GB",description:"Microsoft's balanced 3.8B model",category:"medium"},{id:"Llama-3.2-3B-Instruct-q4f16_1-MLC",name:"Llama 3.2 3B",size:"~2GB",description:"Meta's capable small model",category:"medium"},{id:"Mistral-7B-Instruct-v0.3-q4f16_1-MLC",name:"Mistral 7B v0.3",size:"~4.5GB",description:"Mistral AI's flagship model",category:"medium"},{id:"TinyLlama-1.1B-Chat-v1.0-q4f16_1-MLC",name:"TinyLlama 1.1B",size:"~700MB",description:"Ultra-fast for simple tasks",category:"tiny"},{id:"SmolLM2-360M-Instruct-q4f16_1-MLC",name:"SmolLM2 360M",size:"~250MB",description:"Smallest practical model",category:"tiny"}];class ID{constructor(){this.worker=null,this.isLoading=!1,this.isReady=!1,this.currentModel=null,this.messageId=0,this.pendingRequests=new Map}static async checkWebGPUSupport(){if(!navigator.gpu)return{supported:!1,reason:"WebGPU not available in this browser"};try{const t=await navigator.gpu.requestAdapter();return t?{supported:!0,adapter:t}:{supported:!1,reason:"No WebGPU adapter found"}}catch(t){return{supported:!1,reason:t.message}}}async downloadModel(t,n=null){return new Promise((a,o)=>{const s=new Worker(new URL("/assets/webllm.worker-Ch0B_N4r.js",import.meta.url),{type:"module"}),c=this.getNextMessageId();s.onmessage=d=>{const{type:h,id:p,progress:m,text:g,error:x}=d.data;if(!(p!==c&&h!=="INIT_PROGRESS"))switch(h){case"INIT_PROGRESS":n&&n({progress:m,text:g});break;case"INIT_COMPLETE":s.terminate(),a(!0);break;case"ERROR":s.terminate(),o(new Error(x));break}},s.onerror=d=>{s.terminate(),o(d)},s.postMessage({type:"INIT",id:c,payload:{modelId:t}})})}async initialize(t=RD[0].id,n=null){if(this.isLoading)throw new Error("Model is already loading");return this.isLoading=!0,new Promise((a,o)=>{this.worker=new Worker(new URL("/assets/webllm.worker-Ch0B_N4r.js",import.meta.url),{type:"module"});const s=this.getNextMessageId();this.worker.onmessage=c=>{const{type:d,id:h,progress:p,text:m,timeElapsed:g,error:x}=c.data;if(!(h!==s&&d!=="INIT_PROGRESS"))switch(d){case"INIT_PROGRESS":n&&n({progress:p,text:m,timeElapsed:g});break;case"INIT_COMPLETE":this.isReady=!0,this.isLoading=!1,this.currentModel=t,a(!0);break;case"ERROR":this.isLoading=!1,o(new Error(x));break}},this.worker.onerror=c=>{this.isLoading=!1,o(c)},this.worker.postMessage({type:"INIT",id:s,payload:{modelId:t}})})}async generateWithHistory(t,n=[],a={},o=null){if(!this.isReady||!this.worker)throw new Error("Model not loaded");const{maxTokens:s=4096,temperature:c=1,systemPrompt:d=""}=a,h=this.getNextMessageId(),p=!!o;return new Promise((m,g)=>{const x=setTimeout(()=>{this.worker.removeEventListener("message",v),g(new Error("Model generation timed out (worker unresponsive)"))},6e4),v=w=>{const{type:N,id:j,text:S,token:k,error:E}=w.data;if(j===h)switch((N==="GENERATE_TOKEN"||N==="GENERATE_COMPLETE")&&clearTimeout(x),N){case"GENERATE_TOKEN":o&&o(k,S);break;case"GENERATE_COMPLETE":this.worker.removeEventListener("message",v),m(S);break;case"ERROR":this.worker.removeEventListener("message",v),clearTimeout(x),g(new Error(E));break}};this.worker.addEventListener("message",v),this.worker.postMessage({type:"GENERATE",id:h,payload:{userMessage:t,history:n,maxTokens:s,temperature:c,systemPrompt:d,streaming:p}})})}async resetChat(){if(!this.worker)return;const t=this.getNextMessageId();this.worker.postMessage({type:"RESET",id:t})}async unload(){this.worker&&(this.worker.terminate(),this.worker=null,this.isReady=!1,this.currentModel=null)}getNextMessageId(){return++this.messageId}}const Wn=new ID,LD="VectorMemoryDB",zD=1,Fn="vectors",BD=10;class PD{constructor(){this.name="VectorMemory",this.db=null,this.embeddingDimension=384,this.worker=null,this.workerReady=!1}async initialize(){return this.worker||(this.worker=new Worker(new URL("/assets/EmbeddingWorker-BNxhFdi_.js",import.meta.url),{type:"module"}),this.worker.onmessage=t=>{t.data.type==="ready"&&(this.workerReady=!0,console.log(" Embedding Worker ready"))},this.worker.postMessage({type:"load"})),this.db?this.db:new Promise((t,n)=>{const a=indexedDB.open(LD,zD);a.onerror=()=>n(a.error),a.onsuccess=()=>{this.db=a.result,t(this.db)},a.onupgradeneeded=o=>{const s=o.target.result;if(!s.objectStoreNames.contains(Fn)){const c=s.createObjectStore(Fn,{keyPath:"id",autoIncrement:!0});c.createIndex("namespace","namespace",{unique:!1}),c.createIndex("timestamp","timestamp",{unique:!1})}}})}async upsert(t,n={}){await this.initialize();const a={text:t.text,embedding:t.embedding,metadata:t.metadata||{},namespace:t.namespace||"default",timestamp:Date.now()};return new Promise((o,s)=>{const d=this.db.transaction(Fn,"readwrite").objectStore(Fn),h=t.id?d.put({...a,id:t.id}):d.add(a);h.onsuccess=()=>{this.log(n,"success",` Vector stored: ${t.text.slice(0,30)}...`),o({id:h.result,...a})},h.onerror=()=>s(h.error)})}async query(t,n={},a={}){await this.initialize();const{namespace:o,limit:s=BD,minScore:c=0}=n;return new Promise((d,h)=>{const m=this.db.transaction(Fn,"readonly").objectStore(Fn);let g;o?g=m.index("namespace").getAll(o):g=m.getAll(),g.onsuccess=()=>{const x=g.result.map(v=>({...v,score:this.cosineSimilarity(t,v.embedding)})).filter(v=>v.score>=c).sort((v,w)=>w.score-v.score).slice(0,s);this.log(a,"info",` Found ${x.length} similar vectors`),d(x)},g.onerror=()=>h(g.error)})}async delete(t,n={}){return await this.initialize(),new Promise((a,o)=>{const d=this.db.transaction(Fn,"readwrite").objectStore(Fn).delete(t);d.onsuccess=()=>{this.log(n,"info",` Vector ${t} deleted`),a(!0)},d.onerror=()=>o(d.error)})}async getAll(t=null){return await this.initialize(),new Promise((n,a)=>{const s=this.db.transaction(Fn,"readonly").objectStore(Fn);let c;t?c=s.index("namespace").getAll(t):c=s.getAll(),c.onsuccess=()=>n(c.result),c.onerror=()=>a(c.error)})}async clearNamespace(t,n={}){const a=await this.getAll(t);for(const o of a)await this.delete(o.id,n);return this.log(n,"info",` Cleared ${a.length} vectors from "${t}"`),a.length}async getStats(){await this.initialize();const t=await this.getAll(),n={};for(const a of t){const o=a.namespace||"default";n[o]=(n[o]||0)+1}return{totalVectors:t.length,namespaces:n,embeddingDimension:this.embeddingDimension}}cosineSimilarity(t,n){if(!t||!n||t.length!==n.length)return 0;let a=0,o=0,s=0;for(let d=0;d<t.length;d++)a+=t[d]*n[d],o+=t[d]*t[d],s+=n[d]*n[d];const c=Math.sqrt(o)*Math.sqrt(s);return c===0?0:a/c}async generateEmbedding(t){await this.initialize();const n=Math.random().toString(36).substring(7);return new Promise((a,o)=>{const s=c=>{c.data.id===n&&(this.worker.removeEventListener("message",s),c.data.type==="result"?a(c.data.embedding):c.data.type==="error"&&o(new Error(c.data.error)))};this.worker.addEventListener("message",s),this.worker.postMessage({type:"extract",text:t,id:n}),setTimeout(()=>{this.worker.removeEventListener("message",s),o(new Error("Embedding generation timed out"))},3e4)})}log(t,n,a,o=null){t.addLog&&t.addLog({type:n,nodeId:t.nodeId,nodeName:t.nodeName||"VectorMemory",message:a,data:o})}}const rh=new PD,$D="EchoesArtifactsDB",Jc="artifacts",HD=1,qD=()=>new Promise((e,t)=>{const n=indexedDB.open($D,HD);n.onerror=a=>t("IndexedDB error: "+a.target.error),n.onsuccess=a=>e(a.target.result),n.onupgradeneeded=a=>{const o=a.target.result;if(!o.objectStoreNames.contains(Jc)){const s=o.createObjectStore(Jc,{keyPath:"id"});s.createIndex("executionId","executionId",{unique:!1}),s.createIndex("nodeId","nodeId",{unique:!1}),s.createIndex("timestamp","timestamp",{unique:!1})}}}),UD=async e=>{const t=await qD();return new Promise((n,a)=>{const c=t.transaction([Jc],"readwrite").objectStore(Jc).put(e);c.onsuccess=()=>n(e),c.onerror=d=>a(d.target.error)})};class FD{constructor(){this.storagePrefix="echoes_memory_"}_getKey(t){return`${this.storagePrefix}${t}`}_load(t){try{const n=localStorage.getItem(this._getKey(t));return n?JSON.parse(n):[]}catch(n){return console.error("Memory load error:",n),[]}}_save(t,n){try{localStorage.setItem(this._getKey(t),JSON.stringify(n))}catch(a){console.error("Memory save error:",a)}}_tokenize(t){return t?new Set(t.toLowerCase().replace(/[^\w\s]/g,"").split(/\s+/).filter(n=>n.length>2)):new Set}_similarity(t,n){const a=this._tokenize(t),o=this._tokenize(n);if(a.size===0||o.size===0)return 0;const s=new Set([...a].filter(d=>o.has(d))),c=new Set([...a,...o]);return s.size/c.size}async upsert(t="default",n){const a=this._load(t),o=Date.now(),s=Array.isArray(n)?n:[n];let c=0,d=0;return s.forEach(h=>{h.id||(h.id=`mem_${o}_${Math.random().toString(36).substr(2,9)}`);const p=a.findIndex(g=>g.id===h.id),m={id:h.id,text:h.text||JSON.stringify(h),metadata:h.metadata||{},timestamp:o};p>=0?(a[p]=m,d++):(a.push(m),c++)}),this._save(t,a),{status:"success",added:c,updated:d,total:a.length}}async query(t="default",n,a=5,o=.1){const c=this._load(t).map(d=>{const h=this._similarity(n,d.text);return{...d,score:h}}).filter(d=>d.score>=o).sort((d,h)=>h.score-d.score).slice(0,a);return{matches:c,count:c.length}}async delete(t="default",n=[],a=!1){if(a)return localStorage.removeItem(this._getKey(t)),{status:"success",deleted:"all"};const o=this._load(t),s=o.length,c=new Set(Array.isArray(n)?n:[n]),d=o.filter(h=>!c.has(h.id));return this._save(t,d),{status:"success",deleted:s-d.length,remaining:d.length}}}const Sc=new FD,VD=["window","document","location","navigator","fetch","XMLHttpRequest","WebSocket","EventSource","Worker","SharedWorker","ServiceWorker","importScripts","eval","Function","localStorage","sessionStorage","indexedDB","caches","cookieStore","crypto","Notification","alert","confirm","prompt","open","close","postMessage","parent","top","frames","opener","self","globalThis"],GD={Math,Array,Object,String,Number,Boolean,Date,RegExp,Map,Set,WeakMap,WeakSet,JSON,Promise,Error,TypeError,RangeError,SyntaxError,parseInt,parseFloat,isNaN,isFinite,encodeURI,decodeURI,encodeURIComponent,decodeURIComponent,console:{log:(...e)=>console.log("[Sandbox]",...e),info:(...e)=>console.info("[Sandbox]",...e),warn:(...e)=>console.warn("[Sandbox]",...e),error:(...e)=>console.error("[Sandbox]",...e)},setTimeout:(e,t)=>setTimeout(e,Math.min(t,3e4)),undefined:void 0,NaN:NaN,Infinity:1/0};async function WD(e,t,n={},a={}){const{timeout:o=3e4}=a;if(typeof e!="string")throw new Error("Code must be a string");const s=[/\beval\s*\(/gi,/\bFunction\s*\(/gi,/\bimport\s*\(/gi,/\bimport\s+/gi,/\brequire\s*\(/gi,/\b__proto__\b/gi,/\bconstructor\s*\[/gi,/\bprototype\b/gi];for(const m of s)if(m.test(e))throw new Error(`Potentially dangerous code pattern detected: ${m.source}`);const c={...GD,input:t,context:{nodeId:n.nodeId}};for(const m of VD)c[m]=new Proxy({},{get(){throw new Error(`Access to '${m}' is not allowed in sandboxed code`)},set(){throw new Error(`Cannot modify '${m}' in sandboxed code`)},apply(){throw new Error(`Cannot call '${m}' in sandboxed code`)}});const d=Object.keys(c),h=Object.values(c),p=`
    "use strict";
    return (async () => {
      ${e}
    })();
  `;try{const m=new Function(...d,p);return await Promise.race([m(...h),new Promise((x,v)=>setTimeout(()=>v(new Error(`Execution timeout after ${o}ms`)),o))])}catch(m){const g=m.message.replace(/at\s+.*?:\d+:\d+/g,"").replace(/\n\s+at\s+.*/g,"").trim();throw new Error(`Sandbox execution error: ${g}`)}}function P1(e){if(e==null)return{mimeType:"text/plain",extension:".txt",data:"",isBlob:!1};if(e instanceof Blob)return{mimeType:e.type||"application/octet-stream",extension:Ko(e.type),data:e,isBlob:!0};if(e instanceof ArrayBuffer||ArrayBuffer.isView(e))return{mimeType:"application/octet-stream",extension:".bin",data:new Blob([e]),isBlob:!0};if(typeof e=="object"&&e!==null){if(e.audioBlob instanceof Blob)return{mimeType:e.audioBlob.type||"audio/wav",extension:".wav",data:e.audioBlob,isBlob:!0};if(e.imageBlob instanceof Blob)return{mimeType:e.imageBlob.type||"image/png",extension:".png",data:e.imageBlob,isBlob:!0};if(e.videoBlob instanceof Blob)return{mimeType:e.videoBlob.type||"video/mp4",extension:".mp4",data:e.videoBlob,isBlob:!0};if(typeof e.url=="string"&&e.url.startsWith("blob:")){const t=e.type||e.mimeType||"application/octet-stream";return{mimeType:t,extension:Ko(t),data:e.url,isBlob:!1,isBlobUrl:!0}}return{mimeType:"application/json",extension:".json",data:JSON.stringify(e,null,2),isBlob:!1}}if(typeof e=="string"){if(e.startsWith("data:audio/")){const t=e.match(/^data:(audio\/[^;]+)/),n=t?t[1]:"audio/wav";return{mimeType:n,extension:Ko(n),data:e,isBlob:!1,isDataUri:!0}}if(e.startsWith("data:image/")){const t=e.match(/^data:(image\/[^;]+)/),n=t?t[1]:"image/png";return{mimeType:n,extension:Ko(n),data:e,isBlob:!1,isDataUri:!0}}if(e.startsWith("data:video/")){const t=e.match(/^data:(video\/[^;]+)/),n=t?t[1]:"video/mp4";return{mimeType:n,extension:Ko(n),data:e,isBlob:!1,isDataUri:!0}}if(/<[a-z][\s\S]*>/i.test(e)&&(e.includes("<html")||e.includes("<div")||e.includes("<p>")))return{mimeType:"text/html",extension:".html",data:e,isBlob:!1};if(e.startsWith("{")&&e.endsWith("}")||e.startsWith("[")&&e.endsWith("]"))try{return JSON.parse(e),{mimeType:"application/json",extension:".json",data:e,isBlob:!1}}catch{}return e.includes("# ")||e.includes("## ")||e.includes("```")||e.includes("**")?{mimeType:"text/markdown",extension:".md",data:e,isBlob:!1}:e.includes(",")&&e.split(`
`).every(t=>t.split(",").length>1)?{mimeType:"text/csv",extension:".csv",data:e,isBlob:!1}:{mimeType:"text/plain",extension:".txt",data:e,isBlob:!1}}return{mimeType:"text/plain",extension:".txt",data:String(e),isBlob:!1}}function Ko(e){return{"audio/wav":".wav","audio/wave":".wav","audio/x-wav":".wav","audio/mpeg":".mp3","audio/mp3":".mp3","audio/ogg":".ogg","audio/webm":".webm","audio/flac":".flac","audio/aac":".aac","audio/mp4":".m4a","video/mp4":".mp4","video/webm":".webm","video/ogg":".ogv","video/quicktime":".mov","video/x-msvideo":".avi","image/png":".png","image/jpeg":".jpg","image/jpg":".jpg","image/gif":".gif","image/webp":".webp","image/svg+xml":".svg","image/bmp":".bmp","text/plain":".txt","text/markdown":".md","text/html":".html","text/css":".css","text/javascript":".js","text/csv":".csv","application/json":".json","application/xml":".xml","application/yaml":".yaml","application/pdf":".pdf","application/octet-stream":".bin"}[e]||".bin"}function YD(e){try{const[t,n]=e.split(","),a=t.match(/data:([^;]+)/),o=a?a[1]:"application/octet-stream",s=atob(n),c=new Array(s.length);for(let d=0;d<s.length;d++)c[d]=s.charCodeAt(d);return new Blob([new Uint8Array(c)],{type:o})}catch{return null}}const XD={$now:()=>new Date().toISOString(),$uuid:()=>crypto.randomUUID?.()||"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)}),$formatDate:(e,t="yyyy-MM-dd")=>{const n=new Date(e),a=o=>String(o).padStart(2,"0");return t.replace("yyyy",n.getFullYear()).replace("MM",a(n.getMonth()+1)).replace("dd",a(n.getDate())).replace("HH",a(n.getHours())).replace("mm",a(n.getMinutes())).replace("ss",a(n.getSeconds()))},$upper:e=>String(e).toUpperCase(),$lower:e=>String(e).toLowerCase(),$trim:e=>String(e).trim(),$replace:(e,t,n)=>String(e).replace(t,n),$split:(e,t)=>String(e).split(t),$join:(e,t=",")=>Array.isArray(e)?e.join(t):String(e),$round:(e,t=0)=>Number(Number(e).toFixed(t)),$floor:e=>Math.floor(Number(e)),$ceil:e=>Math.ceil(Number(e)),$abs:e=>Math.abs(Number(e)),$min:(...e)=>Math.min(...e.map(Number)),$max:(...e)=>Math.max(...e.map(Number)),$length:e=>Array.isArray(e)?e.length:String(e).length,$first:e=>Array.isArray(e)?e[0]:e,$last:e=>Array.isArray(e)?e[e.length-1]:e,$reverse:e=>Array.isArray(e)?[...e].reverse():e,$keys:e=>typeof e=="object"&&e!==null?Object.keys(e):[],$values:e=>typeof e=="object"&&e!==null?Object.values(e):[],$pick:(e,...t)=>typeof e!="object"||e===null?{}:t.reduce((n,a)=>(a in e&&(n[a]=e[a]),n),{}),$stringify:(e,t=!1)=>JSON.stringify(e,null,t?2:void 0),$parse:e=>{try{return JSON.parse(e)}catch{return e}},$if:(e,t,n)=>e?t:n,$default:(e,t)=>e??t,$isEmpty:e=>e==null||e===""||Array.isArray(e)&&e.length===0||typeof e=="object"&&Object.keys(e).length===0};function QD(e,t={}){const n=e.trim(),a=[/\beval\b/i,/\bFunction\b/,/\bimport\b/i,/\brequire\b/i,/\b__proto__\b/,/\bconstructor\b/,/\bprototype\b/,/\bwindow\b/i,/\bdocument\b/i,/\bfetch\b/i,/\bglobalThis\b/i];for(const s of a)if(s.test(n))return console.warn(`Blocked dangerous expression: ${s.source}`),"{{BLOCKED: unsafe pattern}}";const o={...XD,$json:t.input||{},$input:t.input||{},$index:t.index??0,$item:t.item??null,$node:t.nodeData||{},$workflow:t.workflowData||{},...t.variables};try{const s=Object.keys(o),c=Object.values(o),d=`"use strict"; return (${n});`;return new Function(...s,d)(...c)}catch(s){return console.warn(`Expression error: ${s.message}`,{expr:e,context:t}),`{{ERROR: ${s.message}}}`}}function fs(e,t={}){if(typeof e!="string")return e;const n=/\{\{\s*((?:[^{}]|\{[^{}]*\})*)\s*\}\}/g;return e.replace(n,(a,o)=>{const s=QD(o,t);return s==null?"":typeof s=="object"?JSON.stringify(s):String(s)})}function JD(){return[{name:"$json",description:"Input data object",example:"$json.fieldName"},{name:"$input",description:"Full input object",example:"$input"},{name:"$index",description:"Current loop index",example:"$index"},{name:"$item",description:"Current loop item",example:"$item"},{name:"$node",description:"Current node data",example:"$node.label"},{name:"$now",description:"Current timestamp",example:"$now"},{name:"$uuid",description:"Generate UUID",example:"$uuid"},{name:"$formatDate",description:"Format date",example:'$formatDate($now, "yyyy-MM-dd")'},{name:"$upper",description:"Uppercase string",example:"$upper($json.name)"},{name:"$lower",description:"Lowercase string",example:"$lower($json.name)"},{name:"$trim",description:"Trim whitespace",example:"$trim($json.text)"},{name:"$replace",description:"Replace text",example:'$replace($json.text, "old", "new")'},{name:"$split",description:"Split string",example:'$split($json.csv, ",")'},{name:"$join",description:"Join array",example:'$join($json.items, ", ")'},{name:"$round",description:"Round number",example:"$round($json.price, 2)"},{name:"$floor",description:"Floor number",example:"$floor($json.value)"},{name:"$ceil",description:"Ceiling number",example:"$ceil($json.value)"},{name:"$min",description:"Minimum value",example:"$min($json.a, $json.b)"},{name:"$max",description:"Maximum value",example:"$max($json.a, $json.b)"},{name:"$length",description:"Array/string length",example:"$length($json.items)"},{name:"$first",description:"First array item",example:"$first($json.items)"},{name:"$last",description:"Last array item",example:"$last($json.items)"},{name:"$keys",description:"Object keys",example:"$keys($json)"},{name:"$values",description:"Object values",example:"$values($json)"},{name:"$stringify",description:"JSON stringify",example:"$stringify($json, true)"},{name:"$if",description:"Conditional value",example:'$if($json.active, "Yes", "No")'},{name:"$default",description:"Default value",example:'$default($json.name, "Unknown")'},{name:"$isEmpty",description:"Check if empty",example:"$isEmpty($json.items)"}]}async function Wp(e,t,n){const a=tO[e.type];if(!a)throw new Error(`No executor found for node type: ${e.type}`);try{return{success:!0,...await a(e.data,t,n)}}catch(o){return{success:!1,error:o.message||"Node execution failed",output:null}}}const ZD=e=>{try{return JSON.parse(e)}catch{return null}},KD=e=>{if(e instanceof Blob){const t=dp(e.type);return{mimeType:e.type||"application/octet-stream",extension:t,data:e,isBlob:!0}}if(e?.audioBlob instanceof Blob)return{mimeType:e.audioBlob.type||"audio/wav",extension:".wav",data:e.audioBlob,isBlob:!0};if(e?.imageBlob instanceof Blob)return{mimeType:e.imageBlob.type||"image/png",extension:".png",data:e.imageBlob,isBlob:!0};if(typeof e?.audioBase64=="string")return{mimeType:"audio/wav",extension:".wav",data:eO(e.audioBase64,"audio/wav"),isBlob:!0};if(typeof e?.url=="string"&&e.url.startsWith("blob:")){const t=e.type||"application/octet-stream";return{mimeType:t,extension:dp(t),data:e.url,isBlob:!1}}return typeof e=="string"?{mimeType:"text/plain",extension:".txt",data:e,isBlob:!1}:typeof e=="object"&&e!==null?{mimeType:"application/json",extension:".json",data:JSON.stringify(e,null,2),isBlob:!1}:{mimeType:"text/plain",extension:".txt",data:String(e),isBlob:!1}},dp=e=>({"audio/wav":".wav","audio/mpeg":".mp3","audio/mp3":".mp3","audio/ogg":".ogg","audio/webm":".webm","audio/flac":".flac","audio/aac":".aac","video/mp4":".mp4","video/webm":".webm","video/ogg":".ogv","video/quicktime":".mov","video/x-msvideo":".avi","image/png":".png","image/jpeg":".jpg","image/jpg":".jpg","image/gif":".gif","image/webp":".webp","image/svg+xml":".svg","image/bmp":".bmp","text/plain":".txt","text/markdown":".md","text/html":".html","text/css":".css","text/javascript":".js","text/csv":".csv","application/json":".json","application/xml":".xml","application/yaml":".yaml","application/pdf":".pdf","application/msword":".doc","application/vnd.openxmlformats-officedocument.wordprocessingml.document":".docx","application/vnd.ms-excel":".xls","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":".xlsx","application/vnd.ms-powerpoint":".ppt","application/vnd.openxmlformats-officedocument.presentationml.presentation":".pptx","application/zip":".zip","application/x-tar":".tar","application/gzip":".gz","application/x-7z-compressed":".7z","application/octet-stream":".bin"})[e]||".bin",eO=(e,t="application/octet-stream")=>{try{const n=atob(e.replace(/^data:[^;]+;base64,/,"")),a=new Array(n.length);for(let o=0;o<n.length;o++)a[o]=n.charCodeAt(o);return new Blob([new Uint8Array(a)],{type:t})}catch{return null}},Nc=async(e,t,n,a)=>{try{const o={id:crypto.randomUUID(),nodeId:e.nodeId,executionId:e.executionId||"manual",name:t,type:n,data:a,timestamp:Date.now()};return await UD(o),e.executionStore?.addArtifact&&e.executionStore.addArtifact(o),e.addLog({type:"success",nodeId:e.nodeId,nodeName:"System",message:` Saved artifact: ${t}`}),o}catch(o){return console.error("Failed to save artifact:",o),e.addLog({type:"error",nodeId:e.nodeId,nodeName:"System",message:`Failed to save artifact: ${o.message}`}),null}},tO={manualTrigger:async(e,t,n)=>{const a=e.defaultPayload||"",o=e.inputValues||{},s={timestamp:new Date().toISOString(),trigger:"manual",...o,text:a,data:t||{...o,text:a}};return n.addLog({type:"info",nodeId:n.nodeId,nodeName:e.label||"Manual Trigger",message:" Workflow started manually"}),{output:s}},scheduleTrigger:async(e,t,n)=>(n.addLog({type:"info",nodeId:n.nodeId,nodeName:"Schedule",message:" Rescheduling next run... (Simulated)"}),{output:t}),aiAgent:async(e,t,n)=>{const a={...e};typeof t=="object"&&t!==null&&!Array.isArray(t)&&["model","temperature","maxTokens","systemMessage"].forEach(v=>{t[v]!==void 0&&(a[v]=t[v])});const o=a.connectedModel;o&&(o.temperature!==void 0&&(a.temperature=o.temperature),o.maxTokens!==void 0&&(a.maxTokens=o.maxTokens),o.modelId&&(a.modelId=o.modelId));const{systemMessage:s,userMessage:c,temperature:d=.7,maxTokens:h=1e3}=a;let p=[],m="",g=s||"";if(Array.isArray(t)&&t.length>0){m=t[t.length-1].content,p=t.slice(0,-1);const w=p.find(N=>N.role==="system");w&&(g=w.content,p=p.filter(N=>N.role!=="system"))}else g&&g.includes("{{")&&(g=fs(g,{input:t})),c?c.includes("{{")?m=fs(c,{input:t}):m=c:m=typeof t=="string"?t:JSON.stringify(t);n.addLog({type:"info",nodeId:n.nodeId,nodeName:e.label||"AI Agent",message:" AI processing..."});const x=a.connectedMemory;if(x){n.addLog({type:"info",nodeId:n.nodeId,nodeName:e.label||"AI Agent",message:` Retrieving memories from ${x.namespace}...`});try{const v=await Sc.query(x.namespace,m,x.topK||5);if(v&&v.matches&&v.matches.length>0){const w=v.matches.map(N=>`- ${typeof N.text=="string"?N.text:JSON.stringify(N.text)}`).join(`
`);g=`${g}

[CONTEXT FROM MEMORY]
Use the following retrieved context to answer the user:
${w}
[/CONTEXT]`.trim(),n.addLog({type:"info",nodeId:n.nodeId,nodeName:e.label||"AI Agent",message:` Found ${v.matches.length} relevant memories`})}}catch(v){n.addLog({type:"warning",nodeId:n.nodeId,nodeName:e.label||"AI Agent",message:` Memory retrieval failed: ${v.message}`})}n.addLog({type:"info",nodeId:n.nodeId,nodeName:e.label||"AI Agent",message:" Context prep complete. Starting generation..."})}try{const v=a.modelId||"gemma-2-2b-it";(!Wn.isReady||Wn.currentModel!==v)&&(n.addLog({type:"info",nodeId:n.nodeId,nodeName:e.label||"AI Agent",message:` Loading AI Model: ${v}... (This may take a moment)`}),await Wn.initialize(v,()=>{n.heartbeat&&n.heartbeat()}),n.addLog({type:"success",nodeId:n.nodeId,nodeName:e.label||"AI Agent",message:` Model loaded: ${v}`}));const w=a.tools||[];let N="";w.length>0&&(N=`

You have access to these tools:
${w.map(A=>`- ${A.name}: ${A.description||"Execute "+A.type+" node"}`).join(`
`)}

IMPORTANT: When you need to use a tool, respond ONLY with this JSON format:
{"action": "tool", "tool": "tool_name", "input": "your input for the tool"}

When you have the final answer (after tool results or if no tool needed), respond with:
{"action": "answer", "content": "your final response to the user"}

Always respond with valid JSON. Do not include any text outside the JSON object.`);const j=g+N,S=a.maxIterations||10;let k=0,E=[...p],T=m,_=null;for(;k<S;){k++,n.addLog({type:"info",nodeId:n.nodeId,nodeName:e.label||"AI Agent",message:k===1?" Generating response...":` Processing tool result (iteration ${k})...`});let z=(await Wn.generateWithHistory(T,E,{temperature:d,maxTokens:h,systemPrompt:j},()=>{n.heartbeat&&n.heartbeat()})).trim();n.addLog({type:"success",nodeId:n.nodeId,nodeName:e.label||"AI Agent",message:" Generation complete"});let G=null;try{let F=z;const L=z.match(/```(?:json)?\s*([\s\S]*?)```/);L&&(F=L[1].trim());const $=z.match(/\{[\s\S]*\}/);!L&&$&&(F=$[0]),G=JSON.parse(F)}catch{n.addLog({type:"info",nodeId:n.nodeId,nodeName:e.label||"AI Agent",message:" Response is not JSON, treating as direct answer"}),_=z;break}if(G.action==="answer"){_=G.content||z;break}else if(G.action==="tool"&&G.tool){const F=G.tool,L=G.input;n.addLog({type:"warning",nodeId:n.nodeId,nodeName:e.label||"AI Agent",message:` Agent calling tool: ${F}`,data:{tool:F,input:L}});const $=w.find(H=>H.name.toLowerCase()===F.toLowerCase());if($){const H=n.nodes.find(Q=>Q.id===$.nodeId);if(H){n.addLog({type:"info",nodeId:n.nodeId,nodeName:e.label||"AI Agent",message:` Executing tool: ${F}...`});const Q=await Wp(H,L,n);Q.success?(n.addLog({type:"success",nodeId:n.nodeId,nodeName:e.label||"AI Agent",message:` Tool '${F}' executed successfully`}),E.push({role:"assistant",content:z},{role:"user",content:`Tool "${F}" returned: ${typeof Q.output=="object"?JSON.stringify(Q.output):String(Q.output)}

Please provide your final answer using: {"action": "answer", "content": "..."}`}),T="",k===S&&(_=Q.output)):(n.addLog({type:"error",nodeId:n.nodeId,nodeName:e.label||"AI Agent",message:` Tool '${F}' failed: ${Q.error}`}),E.push({role:"assistant",content:z},{role:"user",content:`Tool "${F}" failed with error: ${Q.error}

Please handle this error and provide your final answer.`}),T="")}else{n.addLog({type:"error",nodeId:n.nodeId,nodeName:e.label||"AI Agent",message:` Tool node not found: ${$.nodeId}`}),_=`Error: Tool node "${F}" not found in workflow`;break}}else n.addLog({type:"error",nodeId:n.nodeId,nodeName:e.label||"AI Agent",message:` Tool '${F}' not connected. Available: ${w.map(H=>H.name).join(", ")||"none"}`}),E.push({role:"assistant",content:z},{role:"user",content:`Tool "${F}" is not available. Available tools: ${w.map(H=>H.name).join(", ")||"none"}.

Please provide your answer without using that tool.`}),T=""}else{_=G.content||z;break}}return k>=S&&!_&&n.addLog({type:"warning",nodeId:n.nodeId,nodeName:e.label||"AI Agent",message:` Max tool iterations reached (${S})`}),{output:_}}catch(v){throw new Error(`AI generation failed: ${v.message}`)}},codeExecutor:async(e,t,n)=>{const{code:a,language:o="javascript",cdnUrls:s=[]}=e;if(n.addLog({type:"info",nodeId:n.nodeId,nodeName:e.label||"Code Executor",message:` Executing ${o} code (sandboxed)...`}),o==="javascript")try{if(s.length>0){n.addLog({type:"info",nodeId:n.nodeId,nodeName:e.label||"Code Executor",message:` Loading ${s.length} CDN libraries...`});const{loadFromCDN:d}=await _D(async()=>{const{loadFromCDN:h}=await Promise.resolve().then(()=>rP);return{loadFromCDN:h}},void 0);for(const h of s)try{await d(h)}catch{n.addLog({type:"warning",nodeId:n.nodeId,nodeName:e.label||"Code Executor",message:` Failed to load: ${h.split("/").pop()}`})}}return{output:await WD(a,t,{nodeId:n.nodeId},{timeout:3e4})}}catch(c){throw new Error(`Execution error: ${c.message}`)}else throw o==="python"&&window.pyodide?new Error("Python execution not ready pending Pyodide load"):new Error(`Unsupported language: ${o}`)},imageGeneration:async(e,t,n)=>{const a={...e};typeof t=="object"&&t!==null&&["model","size","negativePrompt","seed","steps"].forEach(d=>{t[d]!==void 0&&(a[d]=t[d])});const{seed:o=null}=a;n.addLog({type:"info",nodeId:n.nodeId,nodeName:e.label||"Image Generation",message:" Generating image (Simulated)..."}),await new Promise(d=>setTimeout(d,2e3));const s=document.createElement("canvas");s.width=512,s.height=512;const c=s.getContext("2d");return c.fillStyle="#ff4444",c.fillRect(0,0,512,512),c.fillStyle="white",c.font="30px Arial",c.fillText("AI Generated Image",100,256),new Promise(d=>{s.toBlob(async h=>{const p=`image_${Date.now()}_${crypto.randomUUID().slice(0,8)}`;await Nc(n,`${p}.png`,"image/png",h),d({output:{artifactId:p,type:"image",mimeType:"image/png",url:URL.createObjectURL(h),prompt:t,seed:o||12345,_executed:!0}})})})},httpRequest:async(e,t,n)=>{const{method:a="GET",url:o,headers:s,body:c,timeout:d=5e3}=e;n.addLog({type:"info",nodeId:n.nodeId,nodeName:e.label||"HTTP Request",message:` ${a} ${o}`});try{const h=new AbortController,p=setTimeout(()=>h.abort(),d),m=await fetch(o,{method:a,headers:ZD(s)||{},body:["GET","HEAD"].includes(a)?void 0:typeof c=="string"?c:JSON.stringify(c),signal:h.signal});clearTimeout(p);const g=await m.json().catch(()=>({}));return{output:{status:m.status,statusText:m.statusText,data:g,headers:Object.fromEntries(m.headers.entries())}}}catch(h){throw new Error(`HTTP Request failed: ${h.message}`)}},setVariable:async(e,t,n)=>{const{variableName:a,value:o}=e;let s=o;return typeof t=="object"&&t!==null&&(t[a]!==void 0?s=t[a]:t.value!==void 0?s=t.value:t.text!==void 0&&(s=t.text)),typeof s=="string"&&s.includes("{{")&&(s=yb(s,{input:t})),n.addLog({type:"info",nodeId:n.nodeId,nodeName:e.label||"Set Variable",message:` Set ${a} = ${typeof s=="string"?s.slice(0,50):"..."}`}),{output:{...t,[a]:s}}},ifElse:async(e,t,n)=>{const{condition:a,operator:o="equals",compareValue:s}=e,c=xb(t,a);let d=!1;switch(o){case"equals":d=c==s;break;case"notEquals":d=c!=s;break;case"contains":d=String(c).includes(s);break;case"greaterThan":d=Number(c)>Number(s);break;case"lessThan":d=Number(c)<Number(s);break;case"exists":d=c!=null;break}return n.addLog({type:"info",nodeId:n.nodeId,nodeName:e.label||"If/Else",message:` Check: ${a} ${o} ${s} -> ${d}`}),{output:t,outputIndex:d?0:1}},merge:async(e,t,n)=>{const{mode:a="wait",inputCount:o=2,aggregator:s="array"}=e;n.addLog({type:"info",nodeId:n.nodeId,nodeName:e.label||"Merge",message:` Merge node (mode: ${a})`});let c;if(Array.isArray(t))switch(s){case"object":c=t.reduce((d,h,p)=>({...d,[`input${p}`]:h}),{});break;case"concat":c=t.flat();break;case"array":default:c=t}else c=t;return{output:c}},semanticRouter:async(e,t,n)=>{const{routes:a=[],classificationMode:o="keyword"}=e,s=typeof t=="string"?t:t?.text||t?.content||JSON.stringify(t);n.addLog({type:"info",nodeId:n.nodeId,nodeName:e.label||"Router",message:` Classifying input (${o} mode)...`});let c=-1;if(o==="keyword"){const p=s.toLowerCase();for(let m=0;m<a.length;m++){const x=a[m].keywords||[];for(const v of x)if(p.includes(v.toLowerCase())){c=m;break}if(c>=0)break}}else if(o==="embedding")try{n.addLog({type:"info",nodeId:n.nodeId,nodeName:e.label||"Router",message:" Generating embeddings for input..."});const p=await rh.generateEmbedding(s);let m=-1;for(let g=0;g<a.length;g++){const x=a[g],v=(x.keywords||[]).join(" ")||x.label;if(!v)continue;const w=await rh.generateEmbedding(v),N=rh.cosineSimilarity(p,w);n.addLog({type:"info",nodeId:n.nodeId,nodeName:e.label||"Router",message:`Route "${x.label}" score: ${N.toFixed(4)}`}),N>m&&N>.3&&(m=N,c=g)}}catch(p){n.addLog({type:"error",nodeId:n.nodeId,nodeName:e.label||"Router",message:`Embedding error: ${p.message}`})}const d=c>=0?c:a.length,h=d<a.length?a[d].label:"Other";return n.addLog({type:"success",nodeId:n.nodeId,nodeName:e.label||"Router",message:` Routed to: ${h} (output ${d+1})`}),{output:t,outputIndex:d}},evaluator:async(e,t,n)=>{const{evaluationType:a="schema",schema:o=null,regexPattern:s="",maxRetries:c=3}=e,d=n.retryCount||0;n.addLog({type:"info",nodeId:n.nodeId,nodeName:e.label||"Evaluator",message:` Evaluating output (${a}, attempt ${d+1}/${c+1})...`});let h=!1,p=null;try{switch(a){case"schema":if(o&&typeof o=="object"){const m=Object.keys(o),g=typeof t=="object"?t:JSON.parse(t),x=m.filter(v=>!(v in g));h=x.length===0,h||(p=`Missing required keys: ${x.join(", ")}`)}else h=!0;break;case"regex":if(s){const m=new RegExp(s),g=typeof t=="string"?t:JSON.stringify(t);h=m.test(g),h||(p=`Pattern not matched: ${s}`)}else h=!0;break;case"llm":h=!0;break;default:h=!0}}catch(m){h=!1,p=m.message}return h?(n.addLog({type:"success",nodeId:n.nodeId,nodeName:e.label||"Evaluator",message:" Validation passed"}),{output:t,outputIndex:0}):d<c?(n.addLog({type:"warning",nodeId:n.nodeId,nodeName:e.label||"Evaluator",message:` Validation failed: ${p}. Retrying...`}),{output:{originalInput:t,error:p,retryCount:d+1,feedback:`Your output was invalid: ${p}. Please try again.`},outputIndex:1,retryCount:d+1}):(n.addLog({type:"error",nodeId:n.nodeId,nodeName:e.label||"Evaluator",message:` Max retries reached. Validation failed: ${p}`}),{output:{...t,_validationFailed:!0,_validationError:p},outputIndex:0})},loop:async(e,t,n)=>{const{iterations:a=1}=e,o=n.loopState||{currentIteration:0,totalIterations:a,results:[]};return o.currentIteration>0&&t&&o.results.push(t),o.currentIteration++,o.currentIteration<=o.totalIterations?(n.addLog({type:"info",nodeId:n.nodeId,nodeName:e.label||"Loop",message:` Iteration ${o.currentIteration} of ${o.totalIterations}`}),{output:{iteration:o.currentIteration,totalIterations:o.totalIterations,previousResult:t,isLoopIteration:!0},outputIndex:0,loopState:o}):(n.addLog({type:"success",nodeId:n.nodeId,nodeName:e.label||"Loop",message:` Loop complete: ${o.results.length} iterations processed`}),{output:{results:o.results,totalIterations:o.totalIterations,lastResult:t,completed:!0},outputIndex:1,loopState:null})},toolCall:async(e,t,n)=>{const{toolName:a,args:o}=e;return n.addLog({type:"info",nodeId:n.nodeId,nodeName:e.label||"Tool Call",message:` Executing tool: ${a}`,data:o||t}),{output:{tool:a,status:"success",result:`Executed ${a} successfully`,args:o||t}}},vectorMemory:async(e,t,n)=>{const a={...e};typeof t=="object"&&t!==null&&["mode","namespace","topK","minScore"].forEach(p=>{t[p]!==void 0&&(a[p]=t[p])});const{mode:o="upsert",namespace:s="default",topK:c=5,minScore:d=.1}=a;n.addLog({type:"info",nodeId:n.nodeId,nodeName:e.label||"Vector Store",message:` Vector Store Operation: ${o} (${s})`});let h;try{if(o==="upsert"){let p=[];Array.isArray(t)?p=t.map(m=>typeof m=="string"?{text:m}:m):typeof t=="object"&&t!==null?t.text?p=[t]:t.content?p=[{text:t.content,...t}]:p=[{text:JSON.stringify(t),metadata:t}]:p=[{text:String(t)}],h=await Sc.upsert(s,p),n.addLog({type:"success",nodeId:n.nodeId,nodeName:e.label||"Vector Store",message:` Memorized ${h.added} new items, updated ${h.updated}`})}else if(o==="query"){const p=typeof t=="string"?t:JSON.stringify(t);h=await Sc.query(s,p,c,d),n.addLog({type:"success",nodeId:n.nodeId,nodeName:e.label||"Vector Store",message:` Found ${h.count} matches`})}else if(o==="delete"){const p=Array.isArray(t)?t:t.id||t;h=await Sc.delete(s,p),n.addLog({type:"success",nodeId:n.nodeId,nodeName:e.label||"Vector Store",message:` Deleted ${h.deleted} items`})}}catch(p){throw new Error(`Memory operation failed: ${p.message}`)}return{output:h}},output:async(e,t,n)=>{const a={...e};typeof t=="object"&&t!==null&&["outputType","filename","notificationTitle","artifactType","artifactName"].forEach(N=>{t[N]!==void 0&&(a[N]=t[N])});const{outputType:o="console",filename:s,formatJson:c,notificationTitle:d,artifactType:h="auto",artifactName:p=""}=a,m=c?JSON.stringify(t,null,2):t;switch(n.addLog({type:"success",nodeId:n.nodeId,nodeName:e.label||"Output",message:` Workflow output (${o})`,data:m}),o){case"console":console.log(" Workflow Output:",m),n.addLog({type:"info",nodeId:n.nodeId,nodeName:e.label||"Output",message:`Console: ${String(m).slice(0,150)}${String(m).length>150?"...":""}`});break;case"file":{const N=P1(t);let j=N.data,S=N.mimeType,k=N.extension;if(N.isDataUri&&typeof j=="string"){const z=YD(j);z&&(j=z)}const E=j instanceof Blob?j:new Blob([j],{type:S}),T=URL.createObjectURL(E),_=document.createElement("a");_.href=T;let A=s;A?A.includes(".")||(A+=k):A=`output_${Date.now()}${k}`,_.download=A,document.body.appendChild(_),_.click(),document.body.removeChild(_),URL.revokeObjectURL(T),n.addLog({type:"success",nodeId:n.nodeId,nodeName:e.label||"Output",message:` Downloaded: ${A} (${S})`});break}case"notification":{if("Notification"in window){let N=Notification.permission;N==="default"&&(N=await Notification.requestPermission()),N==="granted"&&new Notification(d||"Workflow Complete",{body:typeof m=="string"?m.slice(0,200):"Data ready"})}typeof window<"u"&&window.dispatchEvent(new CustomEvent("workflow-toast",{detail:{type:"success",message:d||"Workflow Complete"}})),n.addLog({type:"success",nodeId:n.nodeId,nodeName:e.label||"Output",message:` Notification: ${d||"Workflow Complete"}`});break}case"artifact":n.addLog({type:"success",nodeId:n.nodeId,nodeName:e.label||"Output",message:" Artifact saved"});break;default:console.log(" Output:",m)}let g,x,v;if(h&&h!=="auto")if(g=h,x=dp(h),t instanceof Blob)v=t;else if(typeof t=="object"&&t!==null)if(h==="application/json")v=JSON.stringify(t,null,2);else if(h==="text/csv")if(Array.isArray(t)&&t.length>0&&typeof t[0]=="object"){const N=Object.keys(t[0]);v=[N.join(","),...t.map(S=>N.map(k=>JSON.stringify(S[k]??"")).join(","))].join(`
`)}else v=JSON.stringify(t,null,2);else v=JSON.stringify(t,null,2);else v=String(t);else{const N=KD(t);g=N.mimeType,x=N.extension,v=N.data}let w=p||s;return w?w.includes(".")?h&&h!=="auto"&&(w=w.replace(/\.[^.]+$/,x)):w+=x:w=`output_${Date.now()}`+x,await Nc(n,w,g,v),{output:m}},webhookTrigger:async(e,t,n)=>(n.addLog({type:"info",nodeId:n.nodeId,nodeName:e.label||"Webhook",message:` Webhook endpoint ready: ${e.endpoint||"/webhook/default"}`}),{output:{timestamp:new Date().toISOString(),trigger:"webhook",method:e.method||"POST",endpoint:e.endpoint||"/webhook/default",body:t||{},query:{}}}),errorTrigger:async(e,t,n)=>(n.addLog({type:"warning",nodeId:n.nodeId,nodeName:e.label||"Error Trigger",message:" Error trigger activated",data:t}),{output:{timestamp:new Date().toISOString(),trigger:"error",error:t?.error||null,originalInput:t}}),browserEventTrigger:async(e,t,n)=>{const{eventType:a="focus"}=e;return n.addLog({type:"info",nodeId:n.nodeId,nodeName:e.label||"Browser Event",message:` Browser event: ${a}`}),{output:{timestamp:new Date().toISOString(),trigger:"browserEvent",eventType:a,url:typeof window<"u"?window.location.href:"",...t}}},fileSystem:async(e,t,n)=>{const a={...e};typeof t=="object"&&t!==null&&(t.mode&&(a.mode=t.mode),t.filename&&(a.filename=t.filename),t.content&&(a.content=t.content));const{mode:o="read"}=a;if(o==="read")try{if(typeof window<"u"&&"showOpenFilePicker"in window){const[s]=await window.showOpenFilePicker({types:a.fileTypes?.length?[{accept:{"text/*":a.fileTypes}}]:void 0}),c=await s.getFile(),d=await c.text();return n.addLog({type:"success",nodeId:n.nodeId,nodeName:e.label||"File System",message:` Read file: ${c.name} (${c.size} bytes)`}),{output:{filename:c.name,size:c.size,type:c.type,content:d,lastModified:c.lastModified}}}else throw new Error("File System Access API not supported")}catch(s){return n.addLog({type:"error",nodeId:n.nodeId,nodeName:e.label||"File System",message:` File read failed: ${s.message}`}),{output:{error:s.message}}}else if(o==="write")try{const s=typeof t=="string"?t:t?.text||JSON.stringify(t,null,2);if(typeof window<"u"&&"showSaveFilePicker"in window){const c=await window.showSaveFilePicker({suggestedName:e.filename||"output.txt"}),d=await c.createWritable();return await d.write(s),await d.close(),n.addLog({type:"success",nodeId:n.nodeId,nodeName:e.label||"File System",message:" File written successfully"}),{output:{success:!0,filename:c.name}}}else{const c=new Blob([s],{type:"text/plain"}),d=URL.createObjectURL(c),h=document.createElement("a");return h.href=d,h.download=e.filename||"output.txt",h.click(),URL.revokeObjectURL(d),{output:{success:!0,downloaded:!0}}}}catch(s){return{output:{error:s.message}}}return{output:t}},localStorage:async(e,t,n)=>{const{mode:a="get",storageType:o="localStorage",key:s}=e;if(!s)return{output:{error:"No key specified"}};try{if(o==="localStorage")switch(a){case"get":{const c=window.localStorage.getItem(s),d=c?JSON.parse(c):null;return n.addLog({type:"info",nodeId:n.nodeId,nodeName:e.label||"Storage",message:` Retrieved: ${s}`}),{output:{key:s,value:d,found:c!==null}}}case"set":{const c=typeof t=="string"?t:JSON.stringify(t);return window.localStorage.setItem(s,c),n.addLog({type:"success",nodeId:n.nodeId,nodeName:e.label||"Storage",message:` Stored: ${s}`}),{output:{key:s,success:!0}}}case"delete":return window.localStorage.removeItem(s),n.addLog({type:"info",nodeId:n.nodeId,nodeName:e.label||"Storage",message:` Deleted: ${s}`}),{output:{key:s,deleted:!0}}}else{const c="iosans-storage",d="keyvalue",p=await new Promise((m,g)=>{const x=indexedDB.open(c,1);x.onerror=()=>g(x.error),x.onsuccess=()=>m(x.result),x.onupgradeneeded=v=>{const w=v.target.result;w.objectStoreNames.contains(d)||w.createObjectStore(d)}});switch(a){case"get":return new Promise(m=>{const v=p.transaction(d,"readonly").objectStore(d).get(s);v.onsuccess=()=>{n.addLog({type:"info",nodeId:n.nodeId,nodeName:e.label||"Storage",message:` Retrieved (IndexedDB): ${s}`}),m({output:{key:s,value:v.result,found:v.result!==void 0}})},v.onerror=()=>m({output:{error:v.error.message}})});case"set":return new Promise(m=>{const v=p.transaction(d,"readwrite").objectStore(d).put(t,s);v.onsuccess=()=>{n.addLog({type:"success",nodeId:n.nodeId,nodeName:e.label||"Storage",message:` Stored (IndexedDB): ${s}`}),m({output:{key:s,success:!0}})},v.onerror=()=>m({output:{error:v.error.message}})});case"delete":return new Promise(m=>{const v=p.transaction(d,"readwrite").objectStore(d).delete(s);v.onsuccess=()=>{n.addLog({type:"info",nodeId:n.nodeId,nodeName:e.label||"Storage",message:` Deleted (IndexedDB): ${s}`}),m({output:{key:s,deleted:!0}})},v.onerror=()=>m({output:{error:v.error.message}})})}}}catch(c){return{output:{error:c.message}}}return{output:t}},switchNode:async(e,t,n)=>{const{field:a,routes:o=[],defaultOutput:s=3}=e,c=xb(t,a);n.addLog({type:"info",nodeId:n.nodeId,nodeName:e.label||"Switch",message:` Switch on "${a}": value = "${c}"`});for(const d of o)if(String(d.value)===String(c))return{output:t,outputIndex:d.outputIndex};return{output:t,outputIndex:s}},waitForApproval:async(e,t,n)=>{const{title:a="Approval Required",message:o=""}=e;return n.addLog({type:"warning",nodeId:n.nodeId,nodeName:e.label||"Approval",message:` Waiting for approval: ${a}`,data:t}),new Promise(s=>{const c=yb(o,t);window.confirm(`${a}

${c}

Click OK to approve, Cancel to reject.`)?(n.addLog({type:"success",nodeId:n.nodeId,nodeName:e.label||"Approval",message:" Approved"}),s({output:{approved:!0,approvedAt:new Date().toISOString(),originalInput:t},outputIndex:0})):(n.addLog({type:"info",nodeId:n.nodeId,nodeName:e.label||"Approval",message:" Rejected"}),s({output:{approved:!1,rejectedAt:new Date().toISOString(),originalInput:t},outputIndex:1}))})},subWorkflow:async(e,t,n)=>{const{workflowId:a,passInput:o=!0}=e;return n.addLog({type:"info",nodeId:n.nodeId,nodeName:e.label||"Sub-Workflow",message:` Executing sub-workflow: ${a||"none selected"}`}),a?(n.addLog({type:"warning",nodeId:n.nodeId,nodeName:e.label||"Sub-Workflow",message:" Sub-workflow execution not yet implemented"}),{output:{subWorkflowId:a,result:o?t:{},duration:0,note:"Sub-workflow execution coming soon"}}):{output:{error:"No workflow selected"}}},textToSpeech:async(e,t,n)=>{let a="";typeof t=="object"&&t!==null?a=t.text||t.data||JSON.stringify(t):a=String(t||"");const o=fs(a,{input:t});if(!o||o.trim()==="")throw new Error("No text provided for speech synthesis");if(n.addLog({type:"info",nodeId:n.nodeId,nodeName:e.label||"Text to Speech",message:` Generating audio for: "${o.substring(0,50)}${o.length>50?"...":""}"`}),!("speechSynthesis"in window))throw new Error("Web Speech API not supported in this browser");const s=e.voice||"default",c=e.speed||1,d=e.pitch||1,h=new SpeechSynthesisUtterance(o);if(h.rate=c,h.pitch=d,s!=="default"){const x=window.speechSynthesis.getVoices().find(v=>v.name.toLowerCase().includes(s.toLowerCase()));x&&(h.voice=x)}const p=`tts_${Date.now()}_${crypto.randomUUID().slice(0,8)}`,m={type:"speech",text:o,voice:s,speed:c,pitch:d,mimeType:"audio/speech",canPlay:!0};return await Nc(n,`${p}.speech.json`,"application/json",JSON.stringify(m,null,2)),await new Promise((g,x)=>{h.onend=g,h.onerror=v=>x(new Error(`Speech failed: ${v.error}`)),window.speechSynthesis.speak(h)}),n.addLog({type:"success",nodeId:n.nodeId,nodeName:e.label||"Text to Speech",message:" Audio played successfully"}),{output:{artifactId:p,type:"audio",mimeType:"audio/speech",text:o,voice:s,speed:c,pitch:d,played:!0,_executed:!0}}},pythonExecutor:async(e,t,n)=>{const{code:a="",packages:o=[]}=e;if(n.addLog({type:"info",nodeId:n.nodeId,nodeName:e.label||"Python",message:" Executing Python code..."}),typeof window>"u"||!window.loadPyodide)try{n.addLog({type:"info",nodeId:n.nodeId,nodeName:e.label||"Python",message:" Loading Pyodide runtime..."}),window.pyodideLoading||(window.pyodideLoading=(async()=>{const c=document.createElement("script");return c.src="https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.js",document.head.appendChild(c),await new Promise(d=>{c.onload=d}),window.pyodide=await window.loadPyodide(),window.pyodide})()),await window.pyodideLoading}catch(c){return n.addLog({type:"error",nodeId:n.nodeId,nodeName:e.label||"Python",message:` Failed to load Pyodide: ${c.message}`}),{output:{error:`Failed to load Pyodide: ${c.message}`}}}const s=window.pyodide;try{o.length>0&&(n.addLog({type:"info",nodeId:n.nodeId,nodeName:e.label||"Python",message:` Installing packages: ${o.join(", ")}`}),await s.loadPackagesFromImports(o.join(`
`))),s.globals.set("input",s.toPy(t));let c="";s.setStdout({batched:x=>{c+=x}});const d=Date.now(),h=await s.runPythonAsync(`
${a}
result if 'result' in dir() else None
`),p=(Date.now()-d)/1e3,m=h?.toJs?h.toJs():h;n.addLog({type:"success",nodeId:n.nodeId,nodeName:e.label||"Python",message:` Python executed in ${p.toFixed(2)}s`,data:m});const g=`python_${Date.now()}_${crypto.randomUUID().slice(0,8)}`;return m!=null&&await Nc(n,`${g}.json`,"application/json",JSON.stringify({result:m,stdout:c},null,2)),{output:{artifactId:g,result:m,stdout:c,duration:p,_executed:!0}}}catch(c){return n.addLog({type:"error",nodeId:n.nodeId,nodeName:e.label||"Python",message:` Python error: ${c.message}`}),{output:{error:c.message}}}}};function yb(e,t){return fs(e,{input:t})}function xb(e,t){return!t||!e?e:t.split(".").reduce((n,a)=>n&&n[a]!==void 0?n[a]:void 0,e)}async function nO(e,t=null){const n=We.getState();let a=t;if(!a){const c=n.nodeResults[e.id];c?.input?a=c.input:a=iO(e.type)}const o={nodeId:e.id,nodes:[],edges:[],addLog:c=>{n.addLog({...c,nodeId:e.id})}};n.addLog({type:"info",nodeId:e.id,nodeName:e.data?.label||e.type,message:` Running step: ${e.data?.label||e.type}`});const s=Date.now();try{const c=await Wp(e,a,o),d=Date.now()-s;return n.setNodeResult(e.id,{...c,executionTime:d,input:a,stepExecution:!0}),n.addLog({type:"success",nodeId:e.id,nodeName:e.data?.label||e.type,message:` Step completed in ${d}ms`,data:{preview:rO(c.output)}}),{success:!0,output:c.output,executionTime:d}}catch(c){const d=Date.now()-s;return n.setNodeResult(e.id,{success:!1,error:c.message,executionTime:d,input:a,stepExecution:!0}),n.addLog({type:"error",nodeId:e.id,nodeName:e.data?.label||e.type,message:` Step failed: ${c.message}`}),{success:!1,error:c.message,executionTime:d}}}function iO(e){return{manualTrigger:{timestamp:new Date().toISOString(),trigger:"manual",test:!0},httpRequest:{url:"https://api.example.com/data",method:"GET"},codeExecutor:{message:"Hello from step execution",value:42,items:[1,2,3]},pythonExecutor:{data:[1,2,3,4,5],text:"Sample Python input"},aiAgent:{prompt:"Test prompt for AI agent",context:"Running in step mode"},ifElse:{value:!0,status:"active"},loop:{items:["item1","item2","item3"]},switchNode:{value:"case1",status:"pending"},setVariable:{key:"testVar",value:"testValue"},textToSpeech:{text:"This is a test message for text to speech."},output:{result:"Test output data",status:"complete"}}[e]||{input:"default mock data",timestamp:new Date().toISOString()}}function rO(e){if(typeof e=="string")return e.slice(0,100)+(e.length>100?"...":"");if(typeof e=="object"){const t=JSON.stringify(e);return t.slice(0,100)+(t.length>100?"...":"")}return String(e)}function vb({id:e,type:t,position:n,label:a,isConnected:o,isRequired:s}){const c=Qc[t]||Qc.workflow,d=s&&!o?"#ef4444":c.color;return u.jsxs("div",{className:"diamond-handle-wrapper",children:[a&&u.jsx("span",{className:"diamond-handle-label",style:{color:d},children:a}),u.jsx(Ln,{type:n===ye.Top?"source":"target",position:n,id:e,isConnectable:!0,className:`diamond-handle handle-${t} ${s&&!o?"required":""} ${o?"connected":""}`,style:{"--handle-color":d}})]})}function aO({type:e,data:t,children:n,inputs:a=1,outputs:o=1,outputLabels:s=[],resourceSlots:c=null,providerOutput:d=null}){const h=Fr(),p=ki[e],m=yu(e),[g,x]=M.useState(!1),[v,w]=M.useState(!1),N=We(O=>O.currentNodeId),j=We(O=>O.activeSupportingNodeIds||[]),S=We(O=>O.isRunning),k=We(O=>O.nodeResults),E=Ne(O=>O.selectedNodeId),T=Ne(O=>O.configOpen),_=Ne(O=>O.openConfig),A=Ne(O=>O.closeConfig),z=Ne(O=>O.edges),G=Ne(O=>O.nodes),F=S&&N===h,L=S&&j.includes(h),$=E===h,H=k[h]!==void 0,Q=k[h]?.error,D=k[h],q=M.useCallback(O=>{O.stopPropagation(),$&&T?A():_(h)},[h,$,T,_,A]),I=M.useCallback(async O=>{if(O.stopPropagation(),!(g||S)){x(!0),w(!0);try{const R=G.find(U=>U.id===h);R&&await nO(R)}finally{x(!1)}}},[h,G,g,S]),V=M.useMemo(()=>{const O=new Set;return z.forEach(R=>{R.source===h&&R.sourceHandle&&O.add(R.sourceHandle),R.target===h&&R.targetHandle&&O.add(R.targetHandle)}),O},[z,h]),W=c||(e==="aiAgent"?MD.resourceSlots:null),J=()=>{if(!D?.output)return null;const O=D.output;if(typeof O=="string")return O.slice(0,80)+(O.length>80?"...":"");const R=JSON.stringify(O,null,2);return R.slice(0,120)+(R.length>120?"...":"")};return u.jsxs("div",{className:`base-node ${F?"active":""} ${L?"supporting-active":""} ${$?"selected":""} ${Q?"error":""} ${W?"has-resource-slots":""} ${g?"step-running":""}
      }`,style:{"--node-color":m},children:[d&&u.jsx(vb,{id:d.id,type:d.type,position:ye.Top,label:d.label,isConnected:V.has(d.id),isRequired:!1}),a>0&&Array.from({length:a},(O,R)=>{const U=`input-${R}`,B=V.has(U);return u.jsx(Ln,{type:"target",position:ye.Left,id:U,isConnectable:!0,className:`node-handle input-handle circle-handle ${B?"connected":""}`,style:a>1?{top:`${(R+1)/(a+1)*100}%`}:{}},U)}),u.jsxs("div",{className:"node-header",children:[u.jsx("span",{className:"node-icon",children:p?.icon||""}),u.jsx("span",{className:"node-label",children:t.label||p?.name||e}),F&&u.jsx("span",{className:"running-indicator",children:""}),g&&u.jsx("span",{className:"running-indicator step",children:""}),H&&!F&&!g&&!Q&&u.jsx("span",{className:"success-indicator",children:""}),Q&&u.jsx("span",{className:"error-indicator",title:"Node failed - click to see error",children:""})]}),u.jsx("div",{className:"node-body",children:n}),u.jsxs("div",{className:"node-action-toolbar",children:[u.jsx("button",{className:`action-btn config-btn ${$?"active":""}`,onClick:q,title:$?"Close config":"Open config",children:""}),!S&&u.jsx("button",{className:`action-btn run-btn ${g?"running":""}`,onClick:I,disabled:g,title:"Run this step",children:g?"":""})]}),v&&D&&u.jsxs("div",{className:`step-result-preview ${Q?"error":"success"}`,children:[u.jsxs("div",{className:"step-result-header",children:[u.jsx("span",{children:Q?" Error":" Result"}),u.jsxs("span",{className:"step-time",children:[D.executionTime,"ms"]}),u.jsx("button",{className:"step-close-btn",onClick:O=>{O.stopPropagation(),w(!1)},children:""})]}),u.jsx("pre",{className:"step-result-body",children:Q?D.error:J()})]}),W&&W.length>0&&u.jsx("div",{className:"resource-slots-container",children:W.map(O=>u.jsx(vb,{id:O.id,type:O.type,position:ye.Bottom,label:O.label,isConnected:V.has(O.id),isRequired:O.required},O.id))}),o>0&&Array.from({length:o},(O,R)=>{const U=`output-${R}`,B=V.has(U);return u.jsx(Ln,{type:"source",position:ye.Right,id:U,isConnectable:!0,className:`node-handle output-handle circle-handle ${B?"connected":""}`,style:o>1?{top:`${(R+1)/(o+1)*100}%`}:{},children:s[R]&&u.jsx("span",{className:"handle-label",children:s[R]})},U)})]})}const lt=M.memo(aO);function oO({data:e}){const t=Fr(),n=Ne(o=>o.updateNode),a=M.useCallback(o=>{n(t,{defaultPayload:o.target.value})},[t,n]);return u.jsx(lt,{type:"manualTrigger",data:e,inputs:0,outputs:1,children:u.jsxs("div",{className:"node-field",children:[u.jsx("label",{children:"Default Payload"}),u.jsx("textarea",{className:"node-input nodrag",placeholder:"Enter text to start flow...",value:e.defaultPayload||"",onChange:a,rows:3,style:{width:"100%",resize:"vertical"}})]})})}const sO=M.memo(oO);function lO({data:e}){return u.jsxs(lt,{type:"scheduleTrigger",data:e,inputs:1,outputs:1,children:[u.jsxs("div",{className:"node-field",children:[u.jsx("label",{children:"Schedule (cron)"}),u.jsx("div",{className:"node-preview",children:e.schedule||"*/5 * * * *"})]}),u.jsx("div",{className:"node-preview",children:e.enabled?" Enabled":" Disabled"})]})}const cO=M.memo(lO);function uO({data:e}){const[t,n]=M.useState(!1),a=e.endpoint||`/webhook/${e.id||"default"}`,o=e.method||"POST",s=()=>{navigator.clipboard.writeText(`${window.location.origin}${a}`),n(!0),setTimeout(()=>n(!1),2e3)};return u.jsx(lt,{type:"webhookTrigger",data:e,inputs:0,outputs:1,children:u.jsxs("div",{className:"webhook-content",children:[u.jsx("div",{className:"method-badge",children:o}),u.jsxs("div",{className:"endpoint-display",onClick:s,children:[u.jsx("span",{className:"endpoint-path",children:a}),u.jsx("span",{className:"copy-hint",children:t?"":""})]}),e.authRequired&&u.jsx("div",{className:"auth-badge",children:" Auth Required"})]})})}const dO=M.memo(uO);function fO({data:e}){const t=e.watchAll!==!1,n=e.specificNodes||[];return u.jsx(lt,{type:"errorTrigger",data:e,inputs:0,outputs:1,children:u.jsxs("div",{className:"error-trigger-content",children:[u.jsx("div",{className:"error-icon",children:""}),u.jsx("div",{className:"watch-mode",children:t?u.jsx("span",{className:"watch-all",children:"Watching all nodes"}):u.jsxs("span",{className:"watch-specific",children:["Watching ",n.length," node(s)"]})}),e.retryEnabled&&u.jsxs("div",{className:"retry-badge",children:[" Auto-retry: ",e.retryCount||3,"x"]})]})})}const hO=M.memo(fO),pO={focus:"Tab Focus",blur:"Tab Blur",urlChange:"URL Change",domClick:"DOM Click",domChange:"DOM Change",keypress:"Key Press",timer:"Timer"};function mO({data:e}){const t=e.eventType||"focus",n=pO[t]||t;return u.jsx(lt,{type:"browserEventTrigger",data:e,inputs:0,outputs:1,children:u.jsxs("div",{className:"browser-event-content",children:[u.jsx("div",{className:"event-icon",children:""}),u.jsx("div",{className:"event-type",children:n}),t==="domClick"&&e.selector&&u.jsx("div",{className:"selector-preview",children:u.jsx("code",{children:e.selector})}),t==="timer"&&e.interval&&u.jsxs("div",{className:"timer-preview",children:["Every ",e.interval,"ms"]}),t==="urlChange"&&e.urlPattern&&u.jsxs("div",{className:"pattern-preview",children:[e.urlPattern.slice(0,30),"..."]})]})})}const gO=M.memo(mO),bb="https://cdn.jsdelivr.net/npm/monaco-editor@0.45.0/min/vs";function yO({data:e}){const[t,n]=M.useState(!1),[a,o]=M.useState(!!window.monaco),s=M.useRef(null),c=M.useRef(null),d=(e.code||"").split(`
`)[0].slice(0,40);return M.useEffect(()=>{if(!t||a)return;if(window.monaco){o(!0);return}let h=!0;const p=document.createElement("script");return p.src=`${bb}/loader.js`,p.async=!0,p.onload=()=>{window.require.config({paths:{vs:bb}}),window.require(["vs/editor/editor.main"],()=>{h&&o(!0)})},document.body.appendChild(p),()=>{h=!1}},[t,a]),M.useEffect(()=>{a&&t&&c.current&&!s.current&&(s.current=window.monaco.editor.create(c.current,{value:e.code||`// JavaScript code
return input;`,language:"javascript",theme:"vs-dark",minimap:{enabled:!1},fontSize:12,lineNumbers:"on",scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:2}))},[a,t,e.code]),M.useEffect(()=>(!t&&s.current&&(s.current.dispose(),s.current=null),()=>{s.current&&(s.current.dispose(),s.current=null)}),[t]),u.jsxs(lt,{type:"codeExecutor",data:e,inputs:1,outputs:1,children:[u.jsxs("div",{className:"code-executor-content",children:[u.jsxs("div",{className:"node-preview code-preview",onClick:()=>n(!0),title:"Click to edit code",children:[u.jsxs("span",{className:"code-text",children:[d||"// JavaScript code",d&&d.length>=40&&"..."]}),u.jsx("span",{className:"edit-hint",children:""})]}),e.cdnUrls?.length>0&&u.jsxs("div",{className:"cdn-badge",children:[" ",e.cdnUrls.length," CDN",e.cdnUrls.length>1?"s":""]})]}),t&&u.jsx("div",{className:"monaco-modal-overlay",onClick:h=>{h.target===h.currentTarget&&n(!1)},children:u.jsxs("div",{className:"monaco-modal",children:[u.jsxs("div",{className:"monaco-header",children:[u.jsx("span",{children:" Code Editor"}),u.jsx("button",{className:"monaco-close",onClick:()=>n(!1),children:""})]}),u.jsx("div",{ref:c,className:"monaco-container",children:!a&&u.jsx("div",{className:"monaco-loading",children:"Loading editor..."})})]})})]})}const xO=M.memo(yO);function vO({data:e}){return u.jsxs(lt,{type:"setVariable",data:e,inputs:1,outputs:1,children:[u.jsxs("div",{className:"node-field",children:[u.jsx("label",{children:"Variable"}),u.jsx("div",{className:"node-preview",children:e.variableName||"data"})]}),u.jsxs("div",{className:"node-preview",style:{marginTop:"4px"},children:["Mode: ",e.mode||"set"]})]})}const bO=M.memo(vO);function wO({data:e}){const t=e.mode||"get",n=e.storageType||"indexedDB",a=e.key||"";return u.jsx(lt,{type:"localStorage",data:e,inputs:1,outputs:1,children:u.jsxs("div",{className:"localstorage-content",children:[u.jsxs("div",{className:"storage-badge",children:[u.jsx("span",{className:"storage-icon",children:""}),u.jsx("span",{className:"storage-type",children:n})]}),u.jsxs("div",{className:"operation-row",children:[u.jsx("span",{className:`operation-mode ${t}`,children:t==="get"?"GET":t==="set"?"SET":"DELETE"}),a&&u.jsx("span",{className:"key-name",children:a})]})]})})}const SO=M.memo(wO);function NO({data:e}){const t=e.mode||"read";return u.jsx(lt,{type:"fileSystem",data:e,inputs:0,outputs:0,providerOutput:{id:"tool-out",type:"tool",label:null},children:u.jsxs("div",{className:"filesystem-content",style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"10px"},children:[u.jsx("div",{className:"mode-badge",style:{marginBottom:"5px"},children:u.jsx("span",{className:"mode-icon",style:{fontSize:"24px"},children:""})}),u.jsx("div",{className:"filename-display",children:u.jsx("span",{className:"mode-label",style:{fontSize:"10px",textTransform:"uppercase",fontWeight:"bold"},children:t==="read"?"Read File":"Write File"})})]})})}const jO=M.memo(NO);function EO({data:e}){const t={GET:"#00c853",POST:"#2979ff",PUT:"#ffab00",DELETE:"#ff5252",PATCH:"#e040fb"};return u.jsx(lt,{type:"httpRequest",data:e,inputs:0,outputs:0,providerOutput:{id:"tool-out",type:"tool",label:null},children:u.jsxs("div",{className:"http-content",style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"10px"},children:[u.jsx("div",{className:"http-icon",style:{fontSize:"24px",marginBottom:"8px"},children:""}),u.jsx("div",{className:"node-field",children:u.jsx("span",{className:"http-method",style:{color:t[e.method]||"#666",fontWeight:600,fontSize:"10px"},children:e.method||"GET"})})]})})}const kO=M.memo(EO);function CO({data:e}){return u.jsx(lt,{type:"ifElse",data:e,inputs:1,outputs:2,outputLabels:["true","false"],children:u.jsx("div",{className:"node-preview",children:e.condition||"No condition set"})})}const AO=M.memo(CO);function TO({data:e}){return u.jsxs(lt,{type:"loop",data:e,inputs:1,outputs:2,outputLabels:["loop ","done "],children:[u.jsxs("div",{className:"node-field",children:[u.jsx("label",{children:"Iterations"}),u.jsxs("div",{className:"node-preview",children:[e.iterations||1,""]})]}),u.jsxs("div",{className:"node-field",children:[u.jsx("label",{children:"Items path"}),u.jsx("div",{className:"node-preview",children:e.itemsPath||"items"})]})]})}const MO=M.memo(TO);function DO({data:e}){const t=Fr(),n=I1(),a=yu("switchNode"),o=We(N=>N.currentNodeId),s=We(N=>N.isRunning),c=We(N=>N.nodeResults),d=Ne(N=>N.selectedNodeId),h=s&&o===t,p=d===t,m=c[t]!==void 0,g=c[t]?.error,x=M.useMemo(()=>e.routes||[],[e.routes]),v=e.field||"value",w=M.useMemo(()=>{const N=x.map((j,S)=>({id:`output-${S}`,label:String(j.value||j.label||S),index:S}));return N.push({id:"output-default",label:"default",index:N.length}),N},[x]);return M.useEffect(()=>{n(t)},[t,x.length,n]),u.jsxs("div",{className:`switch-node ${h?"active":""} ${p?"selected":""} ${g?"error":""}`,style:{"--node-color":a},children:[u.jsx(Ln,{type:"target",position:ye.Left,id:"input-0",className:"node-handle circle-handle"}),u.jsxs("div",{className:"node-header",children:[u.jsx("span",{className:"node-icon",children:""}),u.jsx("span",{className:"node-label",children:e.label||"Switch"}),h&&u.jsx("span",{className:"running-indicator",children:""}),m&&!h&&!g&&u.jsx("span",{className:"success-indicator",children:""})]}),u.jsxs("div",{className:"node-body",children:[u.jsxs("div",{className:"switch-field",children:[u.jsx("span",{className:"field-label",children:"Switch on:"}),u.jsx("span",{className:"field-value",children:v})]}),u.jsx("div",{className:"switch-routes",children:w.map(N=>u.jsxs("div",{className:"route-label-row",children:[u.jsx("span",{className:"route-value",children:N.label}),u.jsx("span",{className:"route-arrow",children:""})]},N.id))})]}),w.map((N,j)=>u.jsx(Ln,{type:"source",position:ye.Right,id:N.id,className:`node-handle circle-handle ${N.id==="output-default"?"default-handle":""}`,style:{top:`${(j+1)/(w.length+1)*100}%`}},N.id))]})}const OO=M.memo(DO);function _O({data:e}){const t=e.inputCount||2,n=e.mode||"wait";return u.jsx(lt,{type:"merge",data:e,inputs:t,outputs:1,outputLabels:["merged"],children:u.jsxs("div",{className:"merge-node-content",children:[u.jsxs("div",{className:"merge-mode",children:[u.jsx("span",{className:"mode-icon",children:n==="wait"?"":""}),u.jsx("span",{className:"mode-text",children:n==="wait"?"Wait for all":"First to arrive"})]}),u.jsxs("div",{className:"merge-inputs",children:[u.jsx("span",{className:"inputs-label",children:"Inputs:"}),u.jsx("span",{className:"inputs-count",children:t})]}),e.aggregator&&u.jsxs("div",{className:"merge-aggregator",children:[u.jsx("span",{className:"agg-label",children:"Combine:"}),u.jsx("span",{className:"agg-value",children:e.aggregator})]})]})})}const RO=M.memo(_O);function IO({data:e}){const[t,n]=M.useState(e.collapsed||!1),a=M.useCallback(()=>{n(d=>!d)},[]),o=e.childNodeIds?.length||0,s=e.label||"Node Group",c=e.color||"#6366f1";return u.jsxs("div",{className:`group-node ${t?"collapsed":"expanded"}`,style:{"--group-color":c,minWidth:t?"160px":e.width||"300px",minHeight:t?"60px":e.height||"200px"},children:[u.jsx(Ln,{type:"target",position:ye.Left,id:"input-0",className:"group-handle"}),u.jsxs("div",{className:"group-header",onClick:a,children:[u.jsx("span",{className:"group-icon",children:t?"":""}),u.jsx("span",{className:"group-label",children:s}),u.jsxs("span",{className:"group-badge",children:[o," nodes"]}),u.jsx("button",{className:"collapse-btn",title:t?"Expand":"Collapse",children:t?"":""})]}),!t&&u.jsx("div",{className:"group-body",children:o>0?u.jsx("div",{className:"group-content",children:u.jsx("span",{className:"group-hint",children:"Drag nodes here to add them to the group"})}):u.jsxs("div",{className:"group-empty",children:[u.jsx("span",{children:"Empty Group"}),u.jsx("span",{className:"group-hint",children:"Add nodes from context menu"})]})}),t&&o>0&&u.jsxs("div",{className:"collapsed-preview",children:["Contains ",o," connected nodes"]}),u.jsx(Ln,{type:"source",position:ye.Right,id:"output-0",className:"group-handle"})]})}const LO=M.memo(IO);function zO(e,t){let n;try{n=e()}catch{return}return{getItem:o=>{var s;const c=h=>h===null?null:JSON.parse(h,void 0),d=(s=n.getItem(o))!=null?s:null;return d instanceof Promise?d.then(c):c(d)},setItem:(o,s)=>n.setItem(o,JSON.stringify(s,void 0)),removeItem:o=>n.removeItem(o)}}const fp=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(a){return fp(a)(n)},catch(a){return this}}}catch(n){return{then(a){return this},catch(a){return fp(a)(n)}}}},BO=(e,t)=>(n,a,o)=>{let s={storage:zO(()=>localStorage),partialize:N=>N,version:0,merge:(N,j)=>({...j,...N}),...t},c=!1;const d=new Set,h=new Set;let p=s.storage;if(!p)return e((...N)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...N)},a,o);const m=()=>{const N=s.partialize({...a()});return p.setItem(s.name,{state:N,version:s.version})},g=o.setState;o.setState=(N,j)=>(g(N,j),m());const x=e((...N)=>(n(...N),m()),a,o);o.getInitialState=()=>x;let v;const w=()=>{var N,j;if(!p)return;c=!1,d.forEach(k=>{var E;return k((E=a())!=null?E:x)});const S=((j=s.onRehydrateStorage)==null?void 0:j.call(s,(N=a())!=null?N:x))||void 0;return fp(p.getItem.bind(p))(s.name).then(k=>{if(k)if(typeof k.version=="number"&&k.version!==s.version){if(s.migrate){const E=s.migrate(k.state,k.version);return E instanceof Promise?E.then(T=>[!0,T]):[!0,E]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,k.state];return[!1,void 0]}).then(k=>{var E;const[T,_]=k;if(v=s.merge(_,(E=a())!=null?E:x),n(v,!0),T)return m()}).then(()=>{S?.(v,void 0),v=a(),c=!0,h.forEach(k=>k(v))}).catch(k=>{S?.(void 0,k)})};return o.persist={setOptions:N=>{s={...s,...N},N.storage&&(p=N.storage)},clearStorage:()=>{p?.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>w(),hasHydrated:()=>c,onHydrate:N=>(d.add(N),()=>{d.delete(N)}),onFinishHydration:N=>(h.add(N),()=>{h.delete(N)})},s.skipHydration||w(),v||x},PO=BO,Ge=gu(PO((e,t)=>({status:"idle",currentModelId:null,loadProgress:0,loadingText:"",errorMessage:null,downloadedModels:[],downloadProgress:{},downloadQueue:[],isDownloading:!1,availableModels:[{id:"gemma-2-2b-it-q4f16_1-MLC",name:"Gemma 2 2B",size:"~1.4GB",vramRequired:2,description:"Google's fast, lightweight model (Recommended)",category:"recommended"},{id:"Qwen2.5-1.5B-Instruct-q4f16_1-MLC",name:"Qwen 2.5 1.5B",size:"~1GB",vramRequired:1.5,description:"Alibaba's efficient small model",category:"recommended"},{id:"SmolLM2-1.7B-Instruct-q4f16_1-MLC",name:"SmolLM2 1.7B",size:"~1.1GB",vramRequired:1.8,description:"HuggingFace's compact model",category:"recommended"},{id:"gemma-2-2b-it-q4f32_1-MLC",name:"Gemma 2 2B (F32)",size:"~2.5GB",vramRequired:3,description:"Higher precision Gemma 2",category:"gemma"},{id:"gemma-2-9b-it-q4f16_1-MLC",name:"Gemma 2 9B",size:"~6GB",vramRequired:8,description:"Larger Gemma 2 with better reasoning",category:"gemma"},{id:"gemma-2-2b-jpn-it-q4f16_1-MLC",name:"Gemma 2 2B Japanese",size:"~1.4GB",vramRequired:2,description:"Japanese-optimized Gemma 2",category:"gemma"},{id:"Qwen3-0.6B-q4f16_1-MLC",name:"Qwen 3 0.6B",size:"~400MB",vramRequired:.8,description:"Ultra-light Qwen 3 - instant responses",category:"qwen3"},{id:"Qwen3-1.7B-q4f16_1-MLC",name:"Qwen 3 1.7B",size:"~1.1GB",vramRequired:1.8,description:"Fast Qwen 3 with hybrid thinking",category:"qwen3"},{id:"Qwen3-4B-q4f16_1-MLC",name:"Qwen 3 4B",size:"~2.5GB",vramRequired:3.5,description:"Balanced Qwen 3 for most tasks",category:"qwen3"},{id:"Qwen3-8B-q4f16_1-MLC",name:"Qwen 3 8B",size:"~5GB",vramRequired:6.5,description:"Advanced Qwen 3 with deep reasoning",category:"qwen3"},{id:"Qwen2.5-0.5B-Instruct-q4f16_1-MLC",name:"Qwen 2.5 0.5B",size:"~350MB",description:"Ultra-light Qwen for basic tasks",category:"qwen"},{id:"Qwen2.5-3B-Instruct-q4f16_1-MLC",name:"Qwen 2.5 3B",size:"~2GB",description:"Balanced Qwen with good reasoning",category:"qwen"},{id:"Qwen2.5-7B-Instruct-q4f16_1-MLC",name:"Qwen 2.5 7B",size:"~4.5GB",description:"Powerful Qwen for complex tasks",category:"qwen"},{id:"Qwen2.5-Coder-1.5B-Instruct-q4f16_1-MLC",name:"Qwen 2.5 Coder 1.5B",size:"~1GB",description:"Optimized for code generation",category:"qwen"},{id:"Phi-3.5-mini-instruct-q4f16_1-MLC",name:"Phi-3.5 Mini",size:"~2.4GB",description:"Microsoft's balanced 3.8B model",category:"medium"},{id:"Llama-3.2-3B-Instruct-q4f16_1-MLC",name:"Llama 3.2 3B",size:"~2GB",description:"Meta's capable small model",category:"medium"},{id:"Llama-3.2-1B-Instruct-q4f16_1-MLC",name:"Llama 3.2 1B",size:"~900MB",description:"Meta's fast tiny model",category:"medium"},{id:"Mistral-7B-Instruct-v0.3-q4f16_1-MLC",name:"Mistral 7B v0.3",size:"~4.5GB",description:"Mistral AI's flagship model",category:"medium"},{id:"SmolLM2-360M-Instruct-q4f16_1-MLC",name:"SmolLM2 360M",size:"~250MB",description:"Smallest practical model",category:"tiny"},{id:"SmolLM2-135M-Instruct-q0f16-MLC",name:"SmolLM2 135M",size:"~150MB",description:"Tiny model for simple tasks",category:"tiny"}],setStatus:n=>e({status:n}),setLoading:(n,a)=>{e({status:"loading",loadProgress:n,loadingText:a})},setReady:n=>{const{downloadedModels:a}=t(),o=a.includes(n)?a:[...a,n];e({status:"ready",currentModelId:n,loadProgress:1,loadingText:"",errorMessage:null,downloadedModels:o})},setError:n=>{e({status:"error",errorMessage:n,loadProgress:0,loadingText:""})},reset:()=>{e({status:"idle",currentModelId:null,loadProgress:0,loadingText:"",errorMessage:null})},addToDownloadQueue:n=>{const{downloadQueue:a,downloadedModels:o}=t();!a.includes(n)&&!o.includes(n)&&e({downloadQueue:[...a,n]})},removeFromQueue:n=>{const{downloadQueue:a}=t();e({downloadQueue:a.filter(o=>o!==n)})},setDownloadProgress:(n,a,o="downloading")=>{const{downloadProgress:s}=t();e({downloadProgress:{...s,[n]:{progress:a,status:o}}})},markDownloaded:n=>{const{downloadedModels:a,downloadProgress:o,downloadQueue:s}=t();a.includes(n)||e({downloadedModels:[...a,n],downloadProgress:{...o,[n]:{progress:100,status:"complete"}},downloadQueue:s.filter(c=>c!==n)})},isModelDownloaded:n=>t().downloadedModels.includes(n),getDownloadStatus:n=>{const{downloadProgress:a,downloadedModels:o}=t();return o.includes(n)?{progress:100,status:"complete"}:a[n]||{progress:0,status:"idle"}},isReady:()=>t().status==="ready",isLoading:()=>t().status==="loading",getDownloadedModels:()=>{const{availableModels:n,downloadedModels:a}=t();return n.filter(o=>a.includes(o.id))},getModelsForVRAM:n=>{const{availableModels:a}=t();return a.filter(o=>(o.vramRequired||1)<=n)},canLoadModel:(n,a)=>{const{availableModels:o}=t(),s=o.find(c=>c.id===n);return s?(s.vramRequired||1)<=a:!1},getVRAMStatus:(n,a)=>{const{availableModels:o}=t(),s=o.find(h=>h.id===n);if(!s)return{status:"unknown",message:"Model not found"};const c=s.vramRequired||1,d=a/c;return d>=1.5?{status:"excellent",color:"#10b981",message:"Plenty of VRAM"}:d>=1?{status:"good",color:"#22c55e",message:"Should work well"}:d>=.8?{status:"tight",color:"#f59e0b",message:"May be slow"}:{status:"insufficient",color:"#ef4444",message:"Not enough VRAM"}}}),{name:"sauvrn-models",partialize:e=>({downloadedModels:e.downloadedModels,currentModelId:e.currentModelId})}));let ah=null;async function $O(){if(ah)return ah;const e={webgpu:!1,gpuVendor:null,gpuRenderer:null,estimatedVRAM:0,tier:"cpu",warning:null,recommendations:[]};if("gpu"in navigator)try{const t=await navigator.gpu.requestAdapter();if(t){e.webgpu=!0;const n=await t.requestAdapterInfo?.();n&&(e.gpuVendor=n.vendor||"Unknown",e.gpuRenderer=n.device||"Unknown GPU");const a=t.limits,o=a.maxBufferSize||0,s=a.maxStorageBufferBindingSize||0,c=Math.max(o,s)/(1024*1024*1024);e.estimatedVRAM=Math.round(c*10)/10,e.estimatedVRAM>=8?e.tier="high":e.estimatedVRAM>=4?e.tier="medium":(e.estimatedVRAM>=2||e.webgpu)&&(e.tier="low")}}catch(t){console.warn("WebGPU detection failed:",t),e.warning="WebGPU available but adapter request failed"}if(!e.gpuRenderer)try{const t=document.createElement("canvas"),n=t.getContext("webgl")||t.getContext("experimental-webgl");if(n){const a=n.getExtension("WEBGL_debug_renderer_info");a&&(e.gpuVendor=n.getParameter(a.UNMASKED_VENDOR_WEBGL)||"Unknown",e.gpuRenderer=n.getParameter(a.UNMASKED_RENDERER_WEBGL)||"Unknown GPU")}}catch{}return e.tier==="cpu"?(e.recommendations.push("WebGPU not supported - AI will run on CPU (slower)"),e.warning="No GPU acceleration available"):e.tier==="low"?(e.recommendations.push("Limited VRAM - use smaller AI models"),e.recommendations.push("Recommended: Phi-3-mini, Gemma-2B")):e.tier==="medium"?(e.recommendations.push("Moderate VRAM - most models will work"),e.recommendations.push("Recommended: Mistral-7B, Llama-3.1-8B")):e.tier==="high"&&e.recommendations.push("High VRAM - all models supported"),ah=e,e}function HO(e){switch(e){case"high":return"#22c55e";case"medium":return"#f59e0b";case"low":return"#f87171";case"cpu":return"#6b7280";default:return"#6b7280"}}function qO(e){switch(e){case"high":return"";case"medium":return"";case"low":return"";case"cpu":return"";default:return""}}function UO({data:e}){const t=Ge(h=>h.availableModels),n=Ge(h=>h.status),[a,o]=M.useState(null);M.useEffect(()=>{$O().then(o)},[]);const c=t.find(h=>h.id===e.modelId)?.name||"Gemma 2 2B",d=(e.systemPrompt||"").split(`
`)[0].slice(0,50);return u.jsx(lt,{type:"aiAgent",data:e,inputs:1,outputs:1,children:u.jsxs("div",{className:"ai-node-content",children:[u.jsxs("div",{className:"model-badge",children:[u.jsx("span",{className:`status-dot ${n}`}),u.jsx("span",{className:"model-name",children:c})]}),a&&u.jsxs("div",{className:"hardware-badge",title:a.recommendations?.[0]||`GPU: ${a.gpuRenderer}`,style:{"--tier-color":HO(a.tier)},children:[qO(a.tier)," ",a.tier.toUpperCase()]}),e.systemPrompt&&u.jsxs("div",{className:"node-preview prompt-preview",children:[d,"..."]}),e.tools&&e.tools.length>0&&u.jsxs("div",{className:"tools-count",children:[" ",e.tools.length," tool(s) available"]})]})})}const FO=M.memo(UO);function VO({data:e}){const t=Ge(d=>d.availableModels),n=Ge(d=>d.status),a=e.provider||"webllm",s=t.find(d=>d.id===e.modelId)?.name||e.modelName||"Gemma 2 2B",c={webllm:"",openai:"",anthropic:"",local:""};return u.jsx(lt,{type:"chatModel",data:e,inputs:0,outputs:0,providerOutput:{id:"model-out",type:"model"},children:u.jsx("div",{className:"chat-model-content",children:u.jsxs("div",{className:"model-provider-row",children:[u.jsx("span",{className:"provider-icon-badge",children:c[a]||""}),u.jsxs("div",{className:"model-details",children:[u.jsx("div",{className:"model-name-label",children:s}),u.jsx("div",{className:"provider-name",children:a.toUpperCase()})]}),u.jsxs("div",{className:`model-status-indicator ${n}`,children:[n==="ready"&&"",n==="loading"&&"",n==="error"&&""]})]})})})}const GO=M.memo(VO);function WO({data:e}){const t=e.mode||"query",n=e.namespace||"default";return u.jsx(lt,{type:"vectorMemory",data:e,inputs:0,outputs:0,providerOutput:{id:"memory-out",type:"memory",label:null},children:u.jsxs("div",{className:"vector-memory-content",children:[u.jsxs("div",{className:"mode-badge",children:[u.jsx("span",{className:"mode-icon",children:t==="upsert"?"":""}),u.jsx("span",{className:"mode-label",children:t==="upsert"?"Store":"Query"})]}),u.jsxs("div",{className:"namespace-tag",children:[u.jsx("span",{className:"namespace-icon",children:""}),u.jsx("span",{className:"namespace-name",children:n})]}),e.topK&&t==="query"&&u.jsxs("div",{className:"config-preview",children:["Top ",e.topK," results"]}),u.jsxs("div",{className:"neural-badge",style:{marginTop:"8px",fontSize:"0.7em",color:"#8b5cf6",display:"flex",alignItems:"center",gap:"4px"},children:[u.jsx("span",{children:""})," Neural Embeddings"]})]})})}const YO=M.memo(WO);function XO({data:e}){const t=e.title||"Approval Required",n=e.timeout||0;return u.jsx(lt,{type:"waitForApproval",data:e,inputs:1,outputs:2,children:u.jsxs("div",{className:"approval-content",children:[u.jsx("div",{className:"approval-icon",children:""}),u.jsx("div",{className:"approval-title",children:t}),e.message&&u.jsxs("div",{className:"approval-message",children:[e.message.slice(0,60),"..."]}),u.jsxs("div",{className:"approval-outputs",children:[u.jsx("div",{className:"output-label approved",children:" Approved"}),u.jsx("div",{className:"output-label rejected",children:" Rejected"})]}),n>0&&u.jsxs("div",{className:"timeout-badge",children:[" ",n,"s timeout"]})]})})}const QO=M.memo(XO);function JO({data:e}){const t=e.workflowName||"Select workflow...",n=e.passInput!==!1;return u.jsx(lt,{type:"subWorkflow",data:e,inputs:1,outputs:1,children:u.jsxs("div",{className:"subworkflow-content",children:[u.jsx("div",{className:"workflow-icon",children:""}),u.jsx("div",{className:"workflow-name",children:t}),u.jsxs("div",{className:"workflow-config",children:[n&&u.jsx("span",{className:"config-tag",children:" Pass input"}),e.async&&u.jsx("span",{className:"config-tag",children:" Async"})]}),e.description&&u.jsxs("div",{className:"workflow-desc",children:[e.description.slice(0,50),"..."]})]})})}const ZO=M.memo(JO);function KO({data:e}){const t=Fr(),n=I1(),a=e.routes||[{id:"route-0",label:"General",keywords:["general","other"]},{id:"route-1",label:"Technical",keywords:["code","programming","bug"]},{id:"route-2",label:"Creative",keywords:["story","write","creative"]}],o=a.length+1;M.useEffect(()=>{n(t)},[a.length,t,n]);const s=[...a.map(c=>c.label),"Other"];return u.jsx(lt,{type:"semanticRouter",data:e,inputs:1,outputs:o,outputLabels:s,children:u.jsxs("div",{className:"semantic-router-content",children:[u.jsxs("div",{className:"routes-header",children:[u.jsx("span",{className:"routes-icon",children:""}),u.jsxs("span",{className:"routes-count",children:[a.length," routes"]})]}),u.jsxs("div",{className:"routes-preview",children:[a.slice(0,3).map((c,d)=>u.jsxs("div",{className:"route-chip",children:[u.jsx("span",{className:"route-number",children:d+1}),u.jsx("span",{className:"route-label",children:c.label})]},c.id||d)),a.length>3&&u.jsxs("div",{className:"route-chip more",children:["+",a.length-3]})]}),u.jsxs("div",{className:"classification-mode",children:[u.jsx("span",{className:"mode-label",children:"Mode:"}),u.jsx("span",{className:"mode-value",children:e.classificationMode||"keyword"})]})]})})}const e_=M.memo(KO);function t_({data:e}){const t=e.evaluationType||"schema",n=e.maxRetries||3,a=e.schema||null;return u.jsx(lt,{type:"evaluator",data:e,inputs:1,outputs:2,outputLabels:["pass ","retry "],children:u.jsxs("div",{className:"evaluator-node-content",children:[u.jsxs("div",{className:"eval-type",children:[u.jsx("span",{className:"eval-icon",children:""}),u.jsx("span",{className:"eval-label",children:t})]}),u.jsxs("div",{className:"eval-retries",children:[u.jsx("span",{className:"retries-label",children:"Max retries:"}),u.jsx("span",{className:"retries-count",children:n})]}),a&&u.jsxs("div",{className:"eval-schema",children:[u.jsx("span",{className:"schema-label",children:"Schema:"}),u.jsx("span",{className:"schema-preview",children:typeof a=="object"?Object.keys(a).slice(0,3).join(", "):a})]}),u.jsxs("div",{className:"eval-modes",children:[u.jsx("span",{className:`mode-chip ${t==="schema"?"active":""}`,children:"JSON"}),u.jsx("span",{className:`mode-chip ${t==="regex"?"active":""}`,children:"Regex"}),u.jsx("span",{className:`mode-chip ${t==="llm"?"active":""}`,children:"LLM"})]})]})})}const n_=M.memo(t_);function i_({data:e}){const t=e.agentCount||3,n=e.aggregationMode||"consensus",a=e.timeout||3e4;return u.jsx(lt,{type:"swarm",data:e,inputs:1,outputs:2,outputLabels:["result","all"],children:u.jsxs("div",{className:"swarm-node-content",children:[u.jsxs("div",{className:"swarm-header",children:[u.jsx("span",{className:"swarm-icon",children:""}),u.jsxs("span",{className:"swarm-count",children:[t," agents"]})]}),u.jsxs("div",{className:"swarm-mode",children:[u.jsx("span",{className:"mode-label",children:"Mode:"}),u.jsx("span",{className:`mode-value ${n}`,children:n})]}),u.jsxs("div",{className:"swarm-agents",children:[Array.from({length:Math.min(t,5)}).map((o,s)=>u.jsx("div",{className:"agent-indicator"},s)),t>5&&u.jsxs("span",{className:"agent-overflow",children:["+",t-5]})]}),u.jsxs("div",{className:"swarm-timeout",children:[u.jsx("span",{className:"timeout-label",children:"Timeout:"}),u.jsxs("span",{className:"timeout-value",children:[a/1e3,"s"]})]})]})})}const r_=M.memo(i_);function a_({data:e}){const t=Fr(),n=e.voice||"default",a=e.speed||1,o=e.provider||"webSpeech",d=We(w=>w.nodeResults)[t]?.output,[h,p]=M.useState(!1),m=M.useCallback(()=>{if(!d?.audioId)return;const w=window.__ttsAudio?.[d.audioId];if(!w){const k=new SpeechSynthesisUtterance(d.text);k.rate=d.speed||1,k.pitch=d.pitch||1,k.onend=()=>{p(!1),window.dispatchEvent(new CustomEvent("audioEnd"))},p(!0),window.dispatchEvent(new CustomEvent("audioStart")),speechSynthesis.speak(k);return}const{utterance:N,text:j}=w,S=new SpeechSynthesisUtterance(j);S.rate=N.rate,S.pitch=N.pitch,N.voice&&(S.voice=N.voice),S.onend=()=>{p(!1),window.dispatchEvent(new CustomEvent("audioEnd"))},p(!0),window.dispatchEvent(new CustomEvent("audioStart")),speechSynthesis.speak(S)},[d]),g=M.useCallback(()=>{speechSynthesis.cancel(),p(!1),window.dispatchEvent(new CustomEvent("audioEnd"))},[]),x=M.useCallback(()=>{if(!d?.text)return;const w=`Text to Speech Content
${"=".repeat(40)}

${d.text}

---
Voice: ${d.voice}
Speed: ${d.speed}x
Pitch: ${d.pitch}`,N=new Blob([w],{type:"text/plain"}),j=URL.createObjectURL(N),S=document.createElement("a");S.href=j,S.download="speech-content.txt",S.click(),URL.revokeObjectURL(j)},[d]),v=d?.canPlay;return u.jsx(lt,{type:"textToSpeech",data:e,inputs:0,outputs:0,providerOutput:{id:"tool-out",type:"tool",label:null},children:u.jsxs("div",{className:"tts-content",children:[u.jsx("div",{className:"tts-icon",children:""}),u.jsxs("div",{className:"tts-config",children:[u.jsx("div",{className:"provider-badge",children:o==="webSpeech"?"Web Speech API":o}),u.jsxs("div",{className:"voice-info",children:[u.jsx("span",{className:"voice-label",children:"Voice:"}),u.jsx("span",{className:"voice-name",children:n})]}),u.jsx("div",{className:"speed-info",children:a!==1&&u.jsxs("span",{children:[a,"x speed"]})})]}),e.autoPlay&&u.jsx("div",{className:"autoplay-badge",children:" Auto-play"}),v&&u.jsxs("div",{className:"tts-audio-controls",children:[h?u.jsx("button",{className:"tts-btn tts-btn-stop",onClick:g,children:" Stop"}):u.jsx("button",{className:"tts-btn tts-btn-play",onClick:m,children:" Play"}),u.jsx("button",{className:"tts-btn tts-btn-download",onClick:x,children:""})]})]})})}const o_=M.memo(a_);function s_({data:e}){const t=e.model||"stable-diffusion";return u.jsx(lt,{type:"imageGeneration",data:e,inputs:0,outputs:0,providerOutput:{id:"tool-out",type:"tool",label:null},children:u.jsxs("div",{className:"imagegen-content",style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"10px"},children:[u.jsx("div",{className:"imagegen-icon",style:{fontSize:"24px",marginBottom:"8px"},children:""}),u.jsx("div",{className:"model-info",style:{fontSize:"12px",fontWeight:"500"},children:t})]})})}const l_=M.memo(s_);function c_({data:e}){return u.jsx(lt,{type:"pythonExecutor",data:e,inputs:0,outputs:0,providerOutput:{id:"tool-out",type:"tool",label:null},children:u.jsxs("div",{className:"python-content",style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"10px"},children:[u.jsx("div",{className:"python-icon",style:{fontSize:"24px",marginBottom:"8px"},children:""}),u.jsx("div",{className:"python-label",style:{fontSize:"12px",fontWeight:"500"},children:"Python (Pyodide)"})]})})}const u_=M.memo(c_);function d_({data:e,artifactId:t}){const[n,a]=M.useState(!1),[o,s]=M.useState(0),[c,d]=M.useState(0),h=M.useRef(null),p=M.useRef(null),m=e?.type==="speech"||e?.mimeType==="audio/speech";M.useEffect(()=>{const w=p.current;return()=>{w&&clearInterval(w),window.speechSynthesis&&window.speechSynthesis.cancel()}},[]);const g=()=>{if(m){if(n){window.speechSynthesis.cancel(),a(!1);return}const w=new SpeechSynthesisUtterance(e.text);w.rate=e.speed||1,w.pitch=e.pitch||1,w.onstart=()=>a(!0),w.onend=()=>{a(!1),s(100)};const j=(e.text?.split(/\s+/).length||0)/150*60;d(j),window.speechSynthesis.speak(w)}else h.current&&(n?h.current.pause():h.current.play())},x=()=>{if(h.current){const w=h.current.currentTime,N=h.current.duration;s(w/N*100),d(N)}},v=w=>{if(!w||isNaN(w))return"0:00";const N=Math.floor(w/60),j=Math.floor(w%60);return`${N}:${j.toString().padStart(2,"0")}`};return u.jsxs("div",{className:"audio-player",children:[u.jsxs("div",{className:"audio-player-header",children:[u.jsx("span",{className:"audio-icon",children:""}),u.jsx("span",{className:"audio-title",children:m?"Speech":"Audio"}),t&&u.jsxs("span",{className:"audio-id",children:[t.slice(0,12),"..."]})]}),u.jsxs("div",{className:"audio-waveform",children:[u.jsx("div",{className:"waveform-bars",children:Array.from({length:20}).map((w,N)=>u.jsx("div",{className:`waveform-bar ${n?"active":""}`,style:{height:`${20+Math.sin(N*.5)*15+N%3*5}px`,animationDelay:`${N*.05}s`}},N))}),u.jsx("div",{className:"progress-overlay",style:{width:`${o}%`}})]}),u.jsxs("div",{className:"audio-controls",children:[u.jsx("button",{className:`play-btn ${n?"playing":""}`,onClick:g,title:n?"Pause":"Play",children:n?"":""}),u.jsxs("div",{className:"time-display",children:[u.jsx("span",{className:"current-time",children:v(o/100*c)}),u.jsx("span",{className:"separator",children:"/"}),u.jsx("span",{className:"total-time",children:v(c)})]})]}),!m&&e?.url&&u.jsx("audio",{ref:h,src:e.url,onTimeUpdate:x,onPlay:()=>a(!0),onPause:()=>a(!1),onEnded:()=>{a(!1),s(100)},onLoadedMetadata:()=>d(h.current?.duration||0)}),m&&e?.text&&u.jsxs("div",{className:"speech-text",children:['"',e.text.length>100?e.text.slice(0,100)+"...":e.text,'"']})]})}const wb=M.memo(d_);function f_({data:e,artifactId:t}){const[n,a]=M.useState(!1),[o,s]=M.useState(!1),c=e?.url||e?.blobUrl,d=e?.prompt;return c?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"image-thumbnail",onClick:()=>a(!0),children:[u.jsxs("div",{className:"image-header",children:[u.jsx("span",{className:"image-icon",children:""}),u.jsx("span",{className:"image-title",children:"Generated Image"}),t&&u.jsxs("span",{className:"image-id",children:[t.slice(0,12),"..."]})]}),u.jsxs("div",{className:"thumbnail-container",children:[u.jsx("img",{src:c,alt:d||"Generated image",className:`thumbnail-img ${o?"loaded":""}`,onLoad:()=>s(!0)}),!o&&u.jsx("div",{className:"thumbnail-loader",children:u.jsx("div",{className:"loader-spinner"})}),u.jsxs("div",{className:"thumbnail-overlay",children:[u.jsx("span",{className:"zoom-icon",children:""}),u.jsx("span",{className:"zoom-text",children:"Click to enlarge"})]})]}),d&&u.jsx("div",{className:"image-prompt",children:d.length>60?d.slice(0,60)+"...":d})]}),n&&u.jsx("div",{className:"lightbox-modal",onClick:()=>a(!1),children:u.jsxs("div",{className:"lightbox-content",onClick:h=>h.stopPropagation(),children:[u.jsx("button",{className:"lightbox-close",onClick:()=>a(!1),title:"Close",children:""}),u.jsx("img",{src:c,alt:d||"Generated image",className:"lightbox-img"}),d&&u.jsxs("div",{className:"lightbox-prompt",children:[u.jsx("span",{className:"prompt-label",children:"Prompt:"}),u.jsx("span",{className:"prompt-text",children:d})]}),u.jsx("div",{className:"lightbox-actions",children:u.jsx("a",{href:c,download:`${t||"image"}.png`,className:"download-btn",onClick:h=>h.stopPropagation(),children:" Download"})})]})})]}):u.jsxs("div",{className:"image-placeholder",children:[u.jsx("span",{className:"placeholder-icon",children:""}),u.jsx("span",{className:"placeholder-text",children:"No image available"})]})}const Sb=M.memo(f_);function h_(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const p_=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,m_=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,g_={};function Nb(e,t){return(g_.jsx?m_:p_).test(e)}const y_=/[ \t\n\f\r]/g;function x_(e){return typeof e=="object"?e.type==="text"?jb(e.value):!1:jb(e)}function jb(e){return e.replace(y_,"")===""}class Bs{constructor(t,n,a){this.normal=n,this.property=t,a&&(this.space=a)}}Bs.prototype.normal={};Bs.prototype.property={};Bs.prototype.space=void 0;function $1(e,t){const n={},a={};for(const o of e)Object.assign(n,o.property),Object.assign(a,o.normal);return new Bs(n,a,t)}function hp(e){return e.toLowerCase()}class Zt{constructor(t,n){this.attribute=n,this.property=t}}Zt.prototype.attribute="";Zt.prototype.booleanish=!1;Zt.prototype.boolean=!1;Zt.prototype.commaOrSpaceSeparated=!1;Zt.prototype.commaSeparated=!1;Zt.prototype.defined=!1;Zt.prototype.mustUseProperty=!1;Zt.prototype.number=!1;Zt.prototype.overloadedBoolean=!1;Zt.prototype.property="";Zt.prototype.spaceSeparated=!1;Zt.prototype.space=void 0;let v_=0;const De=Vr(),wt=Vr(),pp=Vr(),he=Vr(),it=Vr(),Ua=Vr(),cn=Vr();function Vr(){return 2**++v_}const mp=Object.freeze(Object.defineProperty({__proto__:null,boolean:De,booleanish:wt,commaOrSpaceSeparated:cn,commaSeparated:Ua,number:he,overloadedBoolean:pp,spaceSeparated:it},Symbol.toStringTag,{value:"Module"})),oh=Object.keys(mp);class Yp extends Zt{constructor(t,n,a,o){let s=-1;if(super(t,n),Eb(this,"space",o),typeof a=="number")for(;++s<oh.length;){const c=oh[s];Eb(this,oh[s],(a&mp[c])===mp[c])}}}Yp.prototype.defined=!0;function Eb(e,t,n){n&&(e[t]=n)}function Ka(e){const t={},n={};for(const[a,o]of Object.entries(e.properties)){const s=new Yp(a,e.transform(e.attributes||{},a),o,e.space);e.mustUseProperty&&e.mustUseProperty.includes(a)&&(s.mustUseProperty=!0),t[a]=s,n[hp(a)]=a,n[hp(s.attribute)]=a}return new Bs(t,n,e.space)}const H1=Ka({properties:{ariaActiveDescendant:null,ariaAtomic:wt,ariaAutoComplete:null,ariaBusy:wt,ariaChecked:wt,ariaColCount:he,ariaColIndex:he,ariaColSpan:he,ariaControls:it,ariaCurrent:null,ariaDescribedBy:it,ariaDetails:null,ariaDisabled:wt,ariaDropEffect:it,ariaErrorMessage:null,ariaExpanded:wt,ariaFlowTo:it,ariaGrabbed:wt,ariaHasPopup:null,ariaHidden:wt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:it,ariaLevel:he,ariaLive:null,ariaModal:wt,ariaMultiLine:wt,ariaMultiSelectable:wt,ariaOrientation:null,ariaOwns:it,ariaPlaceholder:null,ariaPosInSet:he,ariaPressed:wt,ariaReadOnly:wt,ariaRelevant:null,ariaRequired:wt,ariaRoleDescription:it,ariaRowCount:he,ariaRowIndex:he,ariaRowSpan:he,ariaSelected:wt,ariaSetSize:he,ariaSort:null,ariaValueMax:he,ariaValueMin:he,ariaValueNow:he,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function q1(e,t){return t in e?e[t]:t}function U1(e,t){return q1(e,t.toLowerCase())}const b_=Ka({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Ua,acceptCharset:it,accessKey:it,action:null,allow:null,allowFullScreen:De,allowPaymentRequest:De,allowUserMedia:De,alt:null,as:null,async:De,autoCapitalize:null,autoComplete:it,autoFocus:De,autoPlay:De,blocking:it,capture:null,charSet:null,checked:De,cite:null,className:it,cols:he,colSpan:null,content:null,contentEditable:wt,controls:De,controlsList:it,coords:he|Ua,crossOrigin:null,data:null,dateTime:null,decoding:null,default:De,defer:De,dir:null,dirName:null,disabled:De,download:pp,draggable:wt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:De,formTarget:null,headers:it,height:he,hidden:pp,high:he,href:null,hrefLang:null,htmlFor:it,httpEquiv:it,id:null,imageSizes:null,imageSrcSet:null,inert:De,inputMode:null,integrity:null,is:null,isMap:De,itemId:null,itemProp:it,itemRef:it,itemScope:De,itemType:it,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:De,low:he,manifest:null,max:null,maxLength:he,media:null,method:null,min:null,minLength:he,multiple:De,muted:De,name:null,nonce:null,noModule:De,noValidate:De,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:De,optimum:he,pattern:null,ping:it,placeholder:null,playsInline:De,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:De,referrerPolicy:null,rel:it,required:De,reversed:De,rows:he,rowSpan:he,sandbox:it,scope:null,scoped:De,seamless:De,selected:De,shadowRootClonable:De,shadowRootDelegatesFocus:De,shadowRootMode:null,shape:null,size:he,sizes:null,slot:null,span:he,spellCheck:wt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:he,step:null,style:null,tabIndex:he,target:null,title:null,translate:null,type:null,typeMustMatch:De,useMap:null,value:wt,width:he,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:it,axis:null,background:null,bgColor:null,border:he,borderColor:null,bottomMargin:he,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:De,declare:De,event:null,face:null,frame:null,frameBorder:null,hSpace:he,leftMargin:he,link:null,longDesc:null,lowSrc:null,marginHeight:he,marginWidth:he,noResize:De,noHref:De,noShade:De,noWrap:De,object:null,profile:null,prompt:null,rev:null,rightMargin:he,rules:null,scheme:null,scrolling:wt,standby:null,summary:null,text:null,topMargin:he,valueType:null,version:null,vAlign:null,vLink:null,vSpace:he,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:De,disableRemotePlayback:De,prefix:null,property:null,results:he,security:null,unselectable:null},space:"html",transform:U1}),w_=Ka({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:cn,accentHeight:he,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:he,amplitude:he,arabicForm:null,ascent:he,attributeName:null,attributeType:null,azimuth:he,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:he,by:null,calcMode:null,capHeight:he,className:it,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:he,diffuseConstant:he,direction:null,display:null,dur:null,divisor:he,dominantBaseline:null,download:De,dx:null,dy:null,edgeMode:null,editable:null,elevation:he,enableBackground:null,end:null,event:null,exponent:he,externalResourcesRequired:null,fill:null,fillOpacity:he,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Ua,g2:Ua,glyphName:Ua,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:he,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:he,horizOriginX:he,horizOriginY:he,id:null,ideographic:he,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:he,k:he,k1:he,k2:he,k3:he,k4:he,kernelMatrix:cn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:he,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:he,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:he,overlineThickness:he,paintOrder:null,panose1:null,path:null,pathLength:he,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:it,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:he,pointsAtY:he,pointsAtZ:he,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:cn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:cn,rev:cn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:cn,requiredFeatures:cn,requiredFonts:cn,requiredFormats:cn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:he,specularExponent:he,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:he,strikethroughThickness:he,string:null,stroke:null,strokeDashArray:cn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:he,strokeOpacity:he,strokeWidth:null,style:null,surfaceScale:he,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:cn,tabIndex:he,tableValues:null,target:null,targetX:he,targetY:he,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:cn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:he,underlineThickness:he,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:he,values:null,vAlphabetic:he,vMathematical:he,vectorEffect:null,vHanging:he,vIdeographic:he,version:null,vertAdvY:he,vertOriginX:he,vertOriginY:he,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:he,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:q1}),F1=Ka({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),V1=Ka({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:U1}),G1=Ka({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),S_={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},N_=/[A-Z]/g,kb=/-[a-z]/g,j_=/^data[-\w.:]+$/i;function E_(e,t){const n=hp(t);let a=t,o=Zt;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&j_.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(kb,C_);a="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!kb.test(s)){let c=s.replace(N_,k_);c.charAt(0)!=="-"&&(c="-"+c),t="data"+c}}o=Yp}return new o(a,t)}function k_(e){return"-"+e.toLowerCase()}function C_(e){return e.charAt(1).toUpperCase()}const A_=$1([H1,b_,F1,V1,G1],"html"),Xp=$1([H1,w_,F1,V1,G1],"svg");function T_(e){return e.join(" ").trim()}var Ra={},sh,Cb;function M_(){if(Cb)return sh;Cb=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,a=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,o=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,c=/^[;\s]*/,d=/^\s+|\s+$/g,h=`
`,p="/",m="*",g="",x="comment",v="declaration";function w(j,S){if(typeof j!="string")throw new TypeError("First argument must be a string");if(!j)return[];S=S||{};var k=1,E=1;function T(D){var q=D.match(t);q&&(k+=q.length);var I=D.lastIndexOf(h);E=~I?D.length-I:E+D.length}function _(){var D={line:k,column:E};return function(q){return q.position=new A(D),F(),q}}function A(D){this.start=D,this.end={line:k,column:E},this.source=S.source}A.prototype.content=j;function z(D){var q=new Error(S.source+":"+k+":"+E+": "+D);if(q.reason=D,q.filename=S.source,q.line=k,q.column=E,q.source=j,!S.silent)throw q}function G(D){var q=D.exec(j);if(q){var I=q[0];return T(I),j=j.slice(I.length),q}}function F(){G(n)}function L(D){var q;for(D=D||[];q=$();)q!==!1&&D.push(q);return D}function $(){var D=_();if(!(p!=j.charAt(0)||m!=j.charAt(1))){for(var q=2;g!=j.charAt(q)&&(m!=j.charAt(q)||p!=j.charAt(q+1));)++q;if(q+=2,g===j.charAt(q-1))return z("End of comment missing");var I=j.slice(2,q-2);return E+=2,T(I),j=j.slice(q),E+=2,D({type:x,comment:I})}}function H(){var D=_(),q=G(a);if(q){if($(),!G(o))return z("property missing ':'");var I=G(s),V=D({type:v,property:N(q[0].replace(e,g)),value:I?N(I[0].replace(e,g)):g});return G(c),V}}function Q(){var D=[];L(D);for(var q;q=H();)q!==!1&&(D.push(q),L(D));return D}return F(),Q()}function N(j){return j?j.replace(d,g):g}return sh=w,sh}var Ab;function D_(){if(Ab)return Ra;Ab=1;var e=Ra&&Ra.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Ra,"__esModule",{value:!0}),Ra.default=n;const t=e(M_());function n(a,o){let s=null;if(!a||typeof a!="string")return s;const c=(0,t.default)(a),d=typeof o=="function";return c.forEach(h=>{if(h.type!=="declaration")return;const{property:p,value:m}=h;d?o(p,m,h):m&&(s=s||{},s[p]=m)}),s}return Ra}var es={},Tb;function O_(){if(Tb)return es;Tb=1,Object.defineProperty(es,"__esModule",{value:!0}),es.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,a=/^-(webkit|moz|ms|o|khtml)-/,o=/^-(ms)-/,s=function(p){return!p||n.test(p)||e.test(p)},c=function(p,m){return m.toUpperCase()},d=function(p,m){return"".concat(m,"-")},h=function(p,m){return m===void 0&&(m={}),s(p)?p:(p=p.toLowerCase(),m.reactCompat?p=p.replace(o,d):p=p.replace(a,d),p.replace(t,c))};return es.camelCase=h,es}var ts,Mb;function __(){if(Mb)return ts;Mb=1;var e=ts&&ts.__importDefault||function(o){return o&&o.__esModule?o:{default:o}},t=e(D_()),n=O_();function a(o,s){var c={};return!o||typeof o!="string"||(0,t.default)(o,function(d,h){d&&h&&(c[(0,n.camelCase)(d,s)]=h)}),c}return a.default=a,ts=a,ts}var R_=__();const I_=Ts(R_),W1=Y1("end"),Qp=Y1("start");function Y1(e){return t;function t(n){const a=n&&n.position&&n.position[e]||{};if(typeof a.line=="number"&&a.line>0&&typeof a.column=="number"&&a.column>0)return{line:a.line,column:a.column,offset:typeof a.offset=="number"&&a.offset>-1?a.offset:void 0}}}function L_(e){const t=Qp(e),n=W1(e);if(t&&n)return{start:t,end:n}}function hs(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Db(e.position):"start"in e||"end"in e?Db(e):"line"in e||"column"in e?gp(e):""}function gp(e){return Ob(e&&e.line)+":"+Ob(e&&e.column)}function Db(e){return gp(e&&e.start)+"-"+gp(e&&e.end)}function Ob(e){return e&&typeof e=="number"?e:1}class zt extends Error{constructor(t,n,a){super(),typeof n=="string"&&(a=n,n=void 0);let o="",s={},c=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?o=t:!s.cause&&t&&(c=!0,o=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof a=="string"){const h=a.indexOf(":");h===-1?s.ruleId=a:(s.source=a.slice(0,h),s.ruleId=a.slice(h+1))}if(!s.place&&s.ancestors&&s.ancestors){const h=s.ancestors[s.ancestors.length-1];h&&(s.place=h.position)}const d=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=d?d.column:void 0,this.fatal=void 0,this.file="",this.message=o,this.line=d?d.line:void 0,this.name=hs(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=c&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}zt.prototype.file="";zt.prototype.name="";zt.prototype.reason="";zt.prototype.message="";zt.prototype.stack="";zt.prototype.column=void 0;zt.prototype.line=void 0;zt.prototype.ancestors=void 0;zt.prototype.cause=void 0;zt.prototype.fatal=void 0;zt.prototype.place=void 0;zt.prototype.ruleId=void 0;zt.prototype.source=void 0;const Jp={}.hasOwnProperty,z_=new Map,B_=/[A-Z]/g,P_=new Set(["table","tbody","thead","tfoot","tr"]),$_=new Set(["td","th"]),X1="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function H_(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let a;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");a=X_(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");a=Y_(n,t.jsx,t.jsxs)}const o={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:a,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Xp:A_,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=Q1(o,e,void 0);return s&&typeof s!="string"?s:o.create(e,o.Fragment,{children:s||void 0},void 0)}function Q1(e,t,n){if(t.type==="element")return q_(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return U_(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return V_(e,t,n);if(t.type==="mdxjsEsm")return F_(e,t);if(t.type==="root")return G_(e,t,n);if(t.type==="text")return W_(e,t)}function q_(e,t,n){const a=e.schema;let o=a;t.tagName.toLowerCase()==="svg"&&a.space==="html"&&(o=Xp,e.schema=o),e.ancestors.push(t);const s=Z1(e,t.tagName,!1),c=Q_(e,t);let d=Kp(e,t);return P_.has(t.tagName)&&(d=d.filter(function(h){return typeof h=="string"?!x_(h):!0})),J1(e,c,s,t),Zp(c,d),e.ancestors.pop(),e.schema=a,e.create(t,s,c,n)}function U_(e,t){if(t.data&&t.data.estree&&e.evaluater){const a=t.data.estree.body[0];return a.type,e.evaluater.evaluateExpression(a.expression)}ks(e,t.position)}function F_(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);ks(e,t.position)}function V_(e,t,n){const a=e.schema;let o=a;t.name==="svg"&&a.space==="html"&&(o=Xp,e.schema=o),e.ancestors.push(t);const s=t.name===null?e.Fragment:Z1(e,t.name,!0),c=J_(e,t),d=Kp(e,t);return J1(e,c,s,t),Zp(c,d),e.ancestors.pop(),e.schema=a,e.create(t,s,c,n)}function G_(e,t,n){const a={};return Zp(a,Kp(e,t)),e.create(t,e.Fragment,a,n)}function W_(e,t){return t.value}function J1(e,t,n,a){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=a)}function Zp(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function Y_(e,t,n){return a;function a(o,s,c,d){const p=Array.isArray(c.children)?n:t;return d?p(s,c,d):p(s,c)}}function X_(e,t){return n;function n(a,o,s,c){const d=Array.isArray(s.children),h=Qp(a);return t(o,s,c,d,{columnNumber:h?h.column-1:void 0,fileName:e,lineNumber:h?h.line:void 0},void 0)}}function Q_(e,t){const n={};let a,o;for(o in t.properties)if(o!=="children"&&Jp.call(t.properties,o)){const s=Z_(e,o,t.properties[o]);if(s){const[c,d]=s;e.tableCellAlignToStyle&&c==="align"&&typeof d=="string"&&$_.has(t.tagName)?a=d:n[c]=d}}if(a){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=a}return n}function J_(e,t){const n={};for(const a of t.attributes)if(a.type==="mdxJsxExpressionAttribute")if(a.data&&a.data.estree&&e.evaluater){const s=a.data.estree.body[0];s.type;const c=s.expression;c.type;const d=c.properties[0];d.type,Object.assign(n,e.evaluater.evaluateExpression(d.argument))}else ks(e,t.position);else{const o=a.name;let s;if(a.value&&typeof a.value=="object")if(a.value.data&&a.value.data.estree&&e.evaluater){const d=a.value.data.estree.body[0];d.type,s=e.evaluater.evaluateExpression(d.expression)}else ks(e,t.position);else s=a.value===null?!0:a.value;n[o]=s}return n}function Kp(e,t){const n=[];let a=-1;const o=e.passKeys?new Map:z_;for(;++a<t.children.length;){const s=t.children[a];let c;if(e.passKeys){const h=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(h){const p=o.get(h)||0;c=h+"-"+p,o.set(h,p+1)}}const d=Q1(e,s,c);d!==void 0&&n.push(d)}return n}function Z_(e,t,n){const a=E_(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=a.commaSeparated?h_(n):T_(n)),a.property==="style"){let o=typeof n=="object"?n:K_(e,String(n));return e.stylePropertyNameCase==="css"&&(o=eR(o)),["style",o]}return[e.elementAttributeNameCase==="react"&&a.space?S_[a.property]||a.property:a.attribute,n]}}function K_(e,t){try{return I_(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const a=n,o=new zt("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:a,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=X1+"#cannot-parse-style-attribute",o}}function Z1(e,t,n){let a;if(!n)a={type:"Literal",value:t};else if(t.includes(".")){const o=t.split(".");let s=-1,c;for(;++s<o.length;){const d=Nb(o[s])?{type:"Identifier",name:o[s]}:{type:"Literal",value:o[s]};c=c?{type:"MemberExpression",object:c,property:d,computed:!!(s&&d.type==="Literal"),optional:!1}:d}a=c}else a=Nb(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(a.type==="Literal"){const o=a.value;return Jp.call(e.components,o)?e.components[o]:o}if(e.evaluater)return e.evaluater.evaluateExpression(a);ks(e)}function ks(e,t){const n=new zt("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=X1+"#cannot-handle-mdx-estrees-without-createevaluater",n}function eR(e){const t={};let n;for(n in e)Jp.call(e,n)&&(t[tR(n)]=e[n]);return t}function tR(e){let t=e.replace(B_,nR);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function nR(e){return"-"+e.toLowerCase()}const lh={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},iR={};function em(e,t){const n=iR,a=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,o=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return K1(e,a,o)}function K1(e,t,n){if(rR(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return _b(e.children,t,n)}return Array.isArray(e)?_b(e,t,n):""}function _b(e,t,n){const a=[];let o=-1;for(;++o<e.length;)a[o]=K1(e[o],t,n);return a.join("")}function rR(e){return!!(e&&typeof e=="object")}const Rb=document.createElement("i");function tm(e){const t="&"+e+";";Rb.innerHTML=t;const n=Rb.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function fn(e,t,n,a){const o=e.length;let s=0,c;if(t<0?t=-t>o?0:o+t:t=t>o?o:t,n=n>0?n:0,a.length<1e4)c=Array.from(a),c.unshift(t,n),e.splice(...c);else for(n&&e.splice(t,n);s<a.length;)c=a.slice(s,s+1e4),c.unshift(t,0),e.splice(...c),s+=1e4,t+=1e4}function Nn(e,t){return e.length>0?(fn(e,e.length,0,t),e):t}const Ib={}.hasOwnProperty;function eS(e){const t={};let n=-1;for(;++n<e.length;)aR(t,e[n]);return t}function aR(e,t){let n;for(n in t){const o=(Ib.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let c;if(s)for(c in s){Ib.call(o,c)||(o[c]=[]);const d=s[c];oR(o[c],Array.isArray(d)?d:d?[d]:[])}}}function oR(e,t){let n=-1;const a=[];for(;++n<t.length;)(t[n].add==="after"?e:a).push(t[n]);fn(e,0,0,a)}function tS(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function In(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const $t=dr(/[A-Za-z]/),Lt=dr(/[\dA-Za-z]/),sR=dr(/[#-'*+\--9=?A-Z^-~]/);function Zc(e){return e!==null&&(e<32||e===127)}const yp=dr(/\d/),lR=dr(/[\dA-Fa-f]/),cR=dr(/[!-/:-@[-`{-~]/);function je(e){return e!==null&&e<-2}function nt(e){return e!==null&&(e<0||e===32)}function Ie(e){return e===-2||e===-1||e===32}const xu=dr(new RegExp("\\p{P}|\\p{S}","u")),Ur=dr(/\s/);function dr(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function eo(e){const t=[];let n=-1,a=0,o=0;for(;++n<e.length;){const s=e.charCodeAt(n);let c="";if(s===37&&Lt(e.charCodeAt(n+1))&&Lt(e.charCodeAt(n+2)))o=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(c=String.fromCharCode(s));else if(s>55295&&s<57344){const d=e.charCodeAt(n+1);s<56320&&d>56319&&d<57344?(c=String.fromCharCode(s,d),o=1):c=""}else c=String.fromCharCode(s);c&&(t.push(e.slice(a,n),encodeURIComponent(c)),a=n+o+1,c=""),o&&(n+=o,o=0)}return t.join("")+e.slice(a)}function qe(e,t,n,a){const o=a?a-1:Number.POSITIVE_INFINITY;let s=0;return c;function c(h){return Ie(h)?(e.enter(n),d(h)):t(h)}function d(h){return Ie(h)&&s++<o?(e.consume(h),d):(e.exit(n),t(h))}}const uR={tokenize:dR};function dR(e){const t=e.attempt(this.parser.constructs.contentInitial,a,o);let n;return t;function a(d){if(d===null){e.consume(d);return}return e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),qe(e,t,"linePrefix")}function o(d){return e.enter("paragraph"),s(d)}function s(d){const h=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=h),n=h,c(d)}function c(d){if(d===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(d);return}return je(d)?(e.consume(d),e.exit("chunkText"),s):(e.consume(d),c)}}const fR={tokenize:hR},Lb={tokenize:pR};function hR(e){const t=this,n=[];let a=0,o,s,c;return d;function d(E){if(a<n.length){const T=n[a];return t.containerState=T[1],e.attempt(T[0].continuation,h,p)(E)}return p(E)}function h(E){if(a++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,o&&k();const T=t.events.length;let _=T,A;for(;_--;)if(t.events[_][0]==="exit"&&t.events[_][1].type==="chunkFlow"){A=t.events[_][1].end;break}S(a);let z=T;for(;z<t.events.length;)t.events[z][1].end={...A},z++;return fn(t.events,_+1,0,t.events.slice(T)),t.events.length=z,p(E)}return d(E)}function p(E){if(a===n.length){if(!o)return x(E);if(o.currentConstruct&&o.currentConstruct.concrete)return w(E);t.interrupt=!!(o.currentConstruct&&!o._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Lb,m,g)(E)}function m(E){return o&&k(),S(a),x(E)}function g(E){return t.parser.lazy[t.now().line]=a!==n.length,c=t.now().offset,w(E)}function x(E){return t.containerState={},e.attempt(Lb,v,w)(E)}function v(E){return a++,n.push([t.currentConstruct,t.containerState]),x(E)}function w(E){if(E===null){o&&k(),S(0),e.consume(E);return}return o=o||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:o,contentType:"flow",previous:s}),N(E)}function N(E){if(E===null){j(e.exit("chunkFlow"),!0),S(0),e.consume(E);return}return je(E)?(e.consume(E),j(e.exit("chunkFlow")),a=0,t.interrupt=void 0,d):(e.consume(E),N)}function j(E,T){const _=t.sliceStream(E);if(T&&_.push(null),E.previous=s,s&&(s.next=E),s=E,o.defineSkip(E.start),o.write(_),t.parser.lazy[E.start.line]){let A=o.events.length;for(;A--;)if(o.events[A][1].start.offset<c&&(!o.events[A][1].end||o.events[A][1].end.offset>c))return;const z=t.events.length;let G=z,F,L;for(;G--;)if(t.events[G][0]==="exit"&&t.events[G][1].type==="chunkFlow"){if(F){L=t.events[G][1].end;break}F=!0}for(S(a),A=z;A<t.events.length;)t.events[A][1].end={...L},A++;fn(t.events,G+1,0,t.events.slice(z)),t.events.length=A}}function S(E){let T=n.length;for(;T-- >E;){const _=n[T];t.containerState=_[1],_[0].exit.call(t,e)}n.length=E}function k(){o.write([null]),s=void 0,o=void 0,t.containerState._closeFlow=void 0}}function pR(e,t,n){return qe(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Za(e){if(e===null||nt(e)||Ur(e))return 1;if(xu(e))return 2}function vu(e,t,n){const a=[];let o=-1;for(;++o<e.length;){const s=e[o].resolveAll;s&&!a.includes(s)&&(t=s(t,n),a.push(s))}return t}const xp={name:"attention",resolveAll:mR,tokenize:gR};function mR(e,t){let n=-1,a,o,s,c,d,h,p,m;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(a=n;a--;)if(e[a][0]==="exit"&&e[a][1].type==="attentionSequence"&&e[a][1]._open&&t.sliceSerialize(e[a][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[a][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[a][1].end.offset-e[a][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;h=e[a][1].end.offset-e[a][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const g={...e[a][1].end},x={...e[n][1].start};zb(g,-h),zb(x,h),c={type:h>1?"strongSequence":"emphasisSequence",start:g,end:{...e[a][1].end}},d={type:h>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:x},s={type:h>1?"strongText":"emphasisText",start:{...e[a][1].end},end:{...e[n][1].start}},o={type:h>1?"strong":"emphasis",start:{...c.start},end:{...d.end}},e[a][1].end={...c.start},e[n][1].start={...d.end},p=[],e[a][1].end.offset-e[a][1].start.offset&&(p=Nn(p,[["enter",e[a][1],t],["exit",e[a][1],t]])),p=Nn(p,[["enter",o,t],["enter",c,t],["exit",c,t],["enter",s,t]]),p=Nn(p,vu(t.parser.constructs.insideSpan.null,e.slice(a+1,n),t)),p=Nn(p,[["exit",s,t],["enter",d,t],["exit",d,t],["exit",o,t]]),e[n][1].end.offset-e[n][1].start.offset?(m=2,p=Nn(p,[["enter",e[n][1],t],["exit",e[n][1],t]])):m=0,fn(e,a-1,n-a+3,p),n=a+p.length-m-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function gR(e,t){const n=this.parser.constructs.attentionMarkers.null,a=this.previous,o=Za(a);let s;return c;function c(h){return s=h,e.enter("attentionSequence"),d(h)}function d(h){if(h===s)return e.consume(h),d;const p=e.exit("attentionSequence"),m=Za(h),g=!m||m===2&&o||n.includes(h),x=!o||o===2&&m||n.includes(a);return p._open=!!(s===42?g:g&&(o||!x)),p._close=!!(s===42?x:x&&(m||!g)),t(h)}}function zb(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const yR={name:"autolink",tokenize:xR};function xR(e,t,n){let a=0;return o;function o(v){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(v),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(v){return $t(v)?(e.consume(v),c):v===64?n(v):p(v)}function c(v){return v===43||v===45||v===46||Lt(v)?(a=1,d(v)):p(v)}function d(v){return v===58?(e.consume(v),a=0,h):(v===43||v===45||v===46||Lt(v))&&a++<32?(e.consume(v),d):(a=0,p(v))}function h(v){return v===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(v),e.exit("autolinkMarker"),e.exit("autolink"),t):v===null||v===32||v===60||Zc(v)?n(v):(e.consume(v),h)}function p(v){return v===64?(e.consume(v),m):sR(v)?(e.consume(v),p):n(v)}function m(v){return Lt(v)?g(v):n(v)}function g(v){return v===46?(e.consume(v),a=0,m):v===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(v),e.exit("autolinkMarker"),e.exit("autolink"),t):x(v)}function x(v){if((v===45||Lt(v))&&a++<63){const w=v===45?x:g;return e.consume(v),w}return n(v)}}const Ps={partial:!0,tokenize:vR};function vR(e,t,n){return a;function a(s){return Ie(s)?qe(e,o,"linePrefix")(s):o(s)}function o(s){return s===null||je(s)?t(s):n(s)}}const nS={continuation:{tokenize:wR},exit:SR,name:"blockQuote",tokenize:bR};function bR(e,t,n){const a=this;return o;function o(c){if(c===62){const d=a.containerState;return d.open||(e.enter("blockQuote",{_container:!0}),d.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(c),e.exit("blockQuoteMarker"),s}return n(c)}function s(c){return Ie(c)?(e.enter("blockQuotePrefixWhitespace"),e.consume(c),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(c))}}function wR(e,t,n){const a=this;return o;function o(c){return Ie(c)?qe(e,s,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c):s(c)}function s(c){return e.attempt(nS,t,n)(c)}}function SR(e){e.exit("blockQuote")}const iS={name:"characterEscape",tokenize:NR};function NR(e,t,n){return a;function a(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),o}function o(s){return cR(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const rS={name:"characterReference",tokenize:jR};function jR(e,t,n){const a=this;let o=0,s,c;return d;function d(g){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(g),e.exit("characterReferenceMarker"),h}function h(g){return g===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(g),e.exit("characterReferenceMarkerNumeric"),p):(e.enter("characterReferenceValue"),s=31,c=Lt,m(g))}function p(g){return g===88||g===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(g),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,c=lR,m):(e.enter("characterReferenceValue"),s=7,c=yp,m(g))}function m(g){if(g===59&&o){const x=e.exit("characterReferenceValue");return c===Lt&&!tm(a.sliceSerialize(x))?n(g):(e.enter("characterReferenceMarker"),e.consume(g),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return c(g)&&o++<s?(e.consume(g),m):n(g)}}const Bb={partial:!0,tokenize:kR},Pb={concrete:!0,name:"codeFenced",tokenize:ER};function ER(e,t,n){const a=this,o={partial:!0,tokenize:_};let s=0,c=0,d;return h;function h(A){return p(A)}function p(A){const z=a.events[a.events.length-1];return s=z&&z[1].type==="linePrefix"?z[2].sliceSerialize(z[1],!0).length:0,d=A,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),m(A)}function m(A){return A===d?(c++,e.consume(A),m):c<3?n(A):(e.exit("codeFencedFenceSequence"),Ie(A)?qe(e,g,"whitespace")(A):g(A))}function g(A){return A===null||je(A)?(e.exit("codeFencedFence"),a.interrupt?t(A):e.check(Bb,N,T)(A)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),x(A))}function x(A){return A===null||je(A)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),g(A)):Ie(A)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),qe(e,v,"whitespace")(A)):A===96&&A===d?n(A):(e.consume(A),x)}function v(A){return A===null||je(A)?g(A):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),w(A))}function w(A){return A===null||je(A)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),g(A)):A===96&&A===d?n(A):(e.consume(A),w)}function N(A){return e.attempt(o,T,j)(A)}function j(A){return e.enter("lineEnding"),e.consume(A),e.exit("lineEnding"),S}function S(A){return s>0&&Ie(A)?qe(e,k,"linePrefix",s+1)(A):k(A)}function k(A){return A===null||je(A)?e.check(Bb,N,T)(A):(e.enter("codeFlowValue"),E(A))}function E(A){return A===null||je(A)?(e.exit("codeFlowValue"),k(A)):(e.consume(A),E)}function T(A){return e.exit("codeFenced"),t(A)}function _(A,z,G){let F=0;return L;function L(q){return A.enter("lineEnding"),A.consume(q),A.exit("lineEnding"),$}function $(q){return A.enter("codeFencedFence"),Ie(q)?qe(A,H,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(q):H(q)}function H(q){return q===d?(A.enter("codeFencedFenceSequence"),Q(q)):G(q)}function Q(q){return q===d?(F++,A.consume(q),Q):F>=c?(A.exit("codeFencedFenceSequence"),Ie(q)?qe(A,D,"whitespace")(q):D(q)):G(q)}function D(q){return q===null||je(q)?(A.exit("codeFencedFence"),z(q)):G(q)}}}function kR(e,t,n){const a=this;return o;function o(c){return c===null?n(c):(e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),s)}function s(c){return a.parser.lazy[a.now().line]?n(c):t(c)}}const ch={name:"codeIndented",tokenize:AR},CR={partial:!0,tokenize:TR};function AR(e,t,n){const a=this;return o;function o(p){return e.enter("codeIndented"),qe(e,s,"linePrefix",5)(p)}function s(p){const m=a.events[a.events.length-1];return m&&m[1].type==="linePrefix"&&m[2].sliceSerialize(m[1],!0).length>=4?c(p):n(p)}function c(p){return p===null?h(p):je(p)?e.attempt(CR,c,h)(p):(e.enter("codeFlowValue"),d(p))}function d(p){return p===null||je(p)?(e.exit("codeFlowValue"),c(p)):(e.consume(p),d)}function h(p){return e.exit("codeIndented"),t(p)}}function TR(e,t,n){const a=this;return o;function o(c){return a.parser.lazy[a.now().line]?n(c):je(c)?(e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),o):qe(e,s,"linePrefix",5)(c)}function s(c){const d=a.events[a.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?t(c):je(c)?o(c):n(c)}}const MR={name:"codeText",previous:OR,resolve:DR,tokenize:_R};function DR(e){let t=e.length-4,n=3,a,o;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(a=n;++a<t;)if(e[a][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(a=n-1,t++;++a<=t;)o===void 0?a!==t&&e[a][1].type!=="lineEnding"&&(o=a):(a===t||e[a][1].type==="lineEnding")&&(e[o][1].type="codeTextData",a!==o+2&&(e[o][1].end=e[a-1][1].end,e.splice(o+2,a-o-2),t-=a-o-2,a=o+2),o=void 0);return e}function OR(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function _R(e,t,n){let a=0,o,s;return c;function c(g){return e.enter("codeText"),e.enter("codeTextSequence"),d(g)}function d(g){return g===96?(e.consume(g),a++,d):(e.exit("codeTextSequence"),h(g))}function h(g){return g===null?n(g):g===32?(e.enter("space"),e.consume(g),e.exit("space"),h):g===96?(s=e.enter("codeTextSequence"),o=0,m(g)):je(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),h):(e.enter("codeTextData"),p(g))}function p(g){return g===null||g===32||g===96||je(g)?(e.exit("codeTextData"),h(g)):(e.consume(g),p)}function m(g){return g===96?(e.consume(g),o++,m):o===a?(e.exit("codeTextSequence"),e.exit("codeText"),t(g)):(s.type="codeTextData",p(g))}}class RR{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const a=n??Number.POSITIVE_INFINITY;return a<this.left.length?this.left.slice(t,a):t>this.left.length?this.right.slice(this.right.length-a+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-a+this.left.length).reverse())}splice(t,n,a){const o=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-o,Number.POSITIVE_INFINITY);return a&&ns(this.left,a),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),ns(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),ns(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);ns(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);ns(this.left,n.reverse())}}}function ns(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function aS(e){const t={};let n=-1,a,o,s,c,d,h,p;const m=new RR(e);for(;++n<m.length;){for(;n in t;)n=t[n];if(a=m.get(n),n&&a[1].type==="chunkFlow"&&m.get(n-1)[1].type==="listItemPrefix"&&(h=a[1]._tokenizer.events,s=0,s<h.length&&h[s][1].type==="lineEndingBlank"&&(s+=2),s<h.length&&h[s][1].type==="content"))for(;++s<h.length&&h[s][1].type!=="content";)h[s][1].type==="chunkText"&&(h[s][1]._isInFirstContentOfListItem=!0,s++);if(a[0]==="enter")a[1].contentType&&(Object.assign(t,IR(m,n)),n=t[n],p=!0);else if(a[1]._container){for(s=n,o=void 0;s--;)if(c=m.get(s),c[1].type==="lineEnding"||c[1].type==="lineEndingBlank")c[0]==="enter"&&(o&&(m.get(o)[1].type="lineEndingBlank"),c[1].type="lineEnding",o=s);else if(!(c[1].type==="linePrefix"||c[1].type==="listItemIndent"))break;o&&(a[1].end={...m.get(o)[1].start},d=m.slice(o,n),d.unshift(a),m.splice(o,n-o+1,d))}}return fn(e,0,Number.POSITIVE_INFINITY,m.slice(0)),!p}function IR(e,t){const n=e.get(t)[1],a=e.get(t)[2];let o=t-1;const s=[];let c=n._tokenizer;c||(c=a.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(c._contentTypeTextTrailing=!0));const d=c.events,h=[],p={};let m,g,x=-1,v=n,w=0,N=0;const j=[N];for(;v;){for(;e.get(++o)[1]!==v;);s.push(o),v._tokenizer||(m=a.sliceStream(v),v.next||m.push(null),g&&c.defineSkip(v.start),v._isInFirstContentOfListItem&&(c._gfmTasklistFirstContentOfListItem=!0),c.write(m),v._isInFirstContentOfListItem&&(c._gfmTasklistFirstContentOfListItem=void 0)),g=v,v=v.next}for(v=n;++x<d.length;)d[x][0]==="exit"&&d[x-1][0]==="enter"&&d[x][1].type===d[x-1][1].type&&d[x][1].start.line!==d[x][1].end.line&&(N=x+1,j.push(N),v._tokenizer=void 0,v.previous=void 0,v=v.next);for(c.events=[],v?(v._tokenizer=void 0,v.previous=void 0):j.pop(),x=j.length;x--;){const S=d.slice(j[x],j[x+1]),k=s.pop();h.push([k,k+S.length-1]),e.splice(k,2,S)}for(h.reverse(),x=-1;++x<h.length;)p[w+h[x][0]]=w+h[x][1],w+=h[x][1]-h[x][0]-1;return p}const LR={resolve:BR,tokenize:PR},zR={partial:!0,tokenize:$R};function BR(e){return aS(e),e}function PR(e,t){let n;return a;function a(d){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),o(d)}function o(d){return d===null?s(d):je(d)?e.check(zR,c,s)(d):(e.consume(d),o)}function s(d){return e.exit("chunkContent"),e.exit("content"),t(d)}function c(d){return e.consume(d),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,o}}function $R(e,t,n){const a=this;return o;function o(c){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),qe(e,s,"linePrefix")}function s(c){if(c===null||je(c))return n(c);const d=a.events[a.events.length-1];return!a.parser.constructs.disable.null.includes("codeIndented")&&d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?t(c):e.interrupt(a.parser.constructs.flow,n,t)(c)}}function oS(e,t,n,a,o,s,c,d,h){const p=h||Number.POSITIVE_INFINITY;let m=0;return g;function g(S){return S===60?(e.enter(a),e.enter(o),e.enter(s),e.consume(S),e.exit(s),x):S===null||S===32||S===41||Zc(S)?n(S):(e.enter(a),e.enter(c),e.enter(d),e.enter("chunkString",{contentType:"string"}),N(S))}function x(S){return S===62?(e.enter(s),e.consume(S),e.exit(s),e.exit(o),e.exit(a),t):(e.enter(d),e.enter("chunkString",{contentType:"string"}),v(S))}function v(S){return S===62?(e.exit("chunkString"),e.exit(d),x(S)):S===null||S===60||je(S)?n(S):(e.consume(S),S===92?w:v)}function w(S){return S===60||S===62||S===92?(e.consume(S),v):v(S)}function N(S){return!m&&(S===null||S===41||nt(S))?(e.exit("chunkString"),e.exit(d),e.exit(c),e.exit(a),t(S)):m<p&&S===40?(e.consume(S),m++,N):S===41?(e.consume(S),m--,N):S===null||S===32||S===40||Zc(S)?n(S):(e.consume(S),S===92?j:N)}function j(S){return S===40||S===41||S===92?(e.consume(S),N):N(S)}}function sS(e,t,n,a,o,s){const c=this;let d=0,h;return p;function p(v){return e.enter(a),e.enter(o),e.consume(v),e.exit(o),e.enter(s),m}function m(v){return d>999||v===null||v===91||v===93&&!h||v===94&&!d&&"_hiddenFootnoteSupport"in c.parser.constructs?n(v):v===93?(e.exit(s),e.enter(o),e.consume(v),e.exit(o),e.exit(a),t):je(v)?(e.enter("lineEnding"),e.consume(v),e.exit("lineEnding"),m):(e.enter("chunkString",{contentType:"string"}),g(v))}function g(v){return v===null||v===91||v===93||je(v)||d++>999?(e.exit("chunkString"),m(v)):(e.consume(v),h||(h=!Ie(v)),v===92?x:g)}function x(v){return v===91||v===92||v===93?(e.consume(v),d++,g):g(v)}}function lS(e,t,n,a,o,s){let c;return d;function d(x){return x===34||x===39||x===40?(e.enter(a),e.enter(o),e.consume(x),e.exit(o),c=x===40?41:x,h):n(x)}function h(x){return x===c?(e.enter(o),e.consume(x),e.exit(o),e.exit(a),t):(e.enter(s),p(x))}function p(x){return x===c?(e.exit(s),h(c)):x===null?n(x):je(x)?(e.enter("lineEnding"),e.consume(x),e.exit("lineEnding"),qe(e,p,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),m(x))}function m(x){return x===c||x===null||je(x)?(e.exit("chunkString"),p(x)):(e.consume(x),x===92?g:m)}function g(x){return x===c||x===92?(e.consume(x),m):m(x)}}function ps(e,t){let n;return a;function a(o){return je(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),n=!0,a):Ie(o)?qe(e,a,n?"linePrefix":"lineSuffix")(o):t(o)}}const HR={name:"definition",tokenize:UR},qR={partial:!0,tokenize:FR};function UR(e,t,n){const a=this;let o;return s;function s(v){return e.enter("definition"),c(v)}function c(v){return sS.call(a,e,d,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(v)}function d(v){return o=In(a.sliceSerialize(a.events[a.events.length-1][1]).slice(1,-1)),v===58?(e.enter("definitionMarker"),e.consume(v),e.exit("definitionMarker"),h):n(v)}function h(v){return nt(v)?ps(e,p)(v):p(v)}function p(v){return oS(e,m,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(v)}function m(v){return e.attempt(qR,g,g)(v)}function g(v){return Ie(v)?qe(e,x,"whitespace")(v):x(v)}function x(v){return v===null||je(v)?(e.exit("definition"),a.parser.defined.push(o),t(v)):n(v)}}function FR(e,t,n){return a;function a(d){return nt(d)?ps(e,o)(d):n(d)}function o(d){return lS(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(d)}function s(d){return Ie(d)?qe(e,c,"whitespace")(d):c(d)}function c(d){return d===null||je(d)?t(d):n(d)}}const VR={name:"hardBreakEscape",tokenize:GR};function GR(e,t,n){return a;function a(s){return e.enter("hardBreakEscape"),e.consume(s),o}function o(s){return je(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const WR={name:"headingAtx",resolve:YR,tokenize:XR};function YR(e,t){let n=e.length-2,a=3,o,s;return e[a][1].type==="whitespace"&&(a+=2),n-2>a&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(a===n-1||n-4>a&&e[n-2][1].type==="whitespace")&&(n-=a+1===n?2:4),n>a&&(o={type:"atxHeadingText",start:e[a][1].start,end:e[n][1].end},s={type:"chunkText",start:e[a][1].start,end:e[n][1].end,contentType:"text"},fn(e,a,n-a+1,[["enter",o,t],["enter",s,t],["exit",s,t],["exit",o,t]])),e}function XR(e,t,n){let a=0;return o;function o(m){return e.enter("atxHeading"),s(m)}function s(m){return e.enter("atxHeadingSequence"),c(m)}function c(m){return m===35&&a++<6?(e.consume(m),c):m===null||nt(m)?(e.exit("atxHeadingSequence"),d(m)):n(m)}function d(m){return m===35?(e.enter("atxHeadingSequence"),h(m)):m===null||je(m)?(e.exit("atxHeading"),t(m)):Ie(m)?qe(e,d,"whitespace")(m):(e.enter("atxHeadingText"),p(m))}function h(m){return m===35?(e.consume(m),h):(e.exit("atxHeadingSequence"),d(m))}function p(m){return m===null||m===35||nt(m)?(e.exit("atxHeadingText"),d(m)):(e.consume(m),p)}}const QR=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],$b=["pre","script","style","textarea"],JR={concrete:!0,name:"htmlFlow",resolveTo:eI,tokenize:tI},ZR={partial:!0,tokenize:iI},KR={partial:!0,tokenize:nI};function eI(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function tI(e,t,n){const a=this;let o,s,c,d,h;return p;function p(B){return m(B)}function m(B){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(B),g}function g(B){return B===33?(e.consume(B),x):B===47?(e.consume(B),s=!0,N):B===63?(e.consume(B),o=3,a.interrupt?t:O):$t(B)?(e.consume(B),c=String.fromCharCode(B),j):n(B)}function x(B){return B===45?(e.consume(B),o=2,v):B===91?(e.consume(B),o=5,d=0,w):$t(B)?(e.consume(B),o=4,a.interrupt?t:O):n(B)}function v(B){return B===45?(e.consume(B),a.interrupt?t:O):n(B)}function w(B){const re="CDATA[";return B===re.charCodeAt(d++)?(e.consume(B),d===re.length?a.interrupt?t:H:w):n(B)}function N(B){return $t(B)?(e.consume(B),c=String.fromCharCode(B),j):n(B)}function j(B){if(B===null||B===47||B===62||nt(B)){const re=B===47,de=c.toLowerCase();return!re&&!s&&$b.includes(de)?(o=1,a.interrupt?t(B):H(B)):QR.includes(c.toLowerCase())?(o=6,re?(e.consume(B),S):a.interrupt?t(B):H(B)):(o=7,a.interrupt&&!a.parser.lazy[a.now().line]?n(B):s?k(B):E(B))}return B===45||Lt(B)?(e.consume(B),c+=String.fromCharCode(B),j):n(B)}function S(B){return B===62?(e.consume(B),a.interrupt?t:H):n(B)}function k(B){return Ie(B)?(e.consume(B),k):L(B)}function E(B){return B===47?(e.consume(B),L):B===58||B===95||$t(B)?(e.consume(B),T):Ie(B)?(e.consume(B),E):L(B)}function T(B){return B===45||B===46||B===58||B===95||Lt(B)?(e.consume(B),T):_(B)}function _(B){return B===61?(e.consume(B),A):Ie(B)?(e.consume(B),_):E(B)}function A(B){return B===null||B===60||B===61||B===62||B===96?n(B):B===34||B===39?(e.consume(B),h=B,z):Ie(B)?(e.consume(B),A):G(B)}function z(B){return B===h?(e.consume(B),h=null,F):B===null||je(B)?n(B):(e.consume(B),z)}function G(B){return B===null||B===34||B===39||B===47||B===60||B===61||B===62||B===96||nt(B)?_(B):(e.consume(B),G)}function F(B){return B===47||B===62||Ie(B)?E(B):n(B)}function L(B){return B===62?(e.consume(B),$):n(B)}function $(B){return B===null||je(B)?H(B):Ie(B)?(e.consume(B),$):n(B)}function H(B){return B===45&&o===2?(e.consume(B),I):B===60&&o===1?(e.consume(B),V):B===62&&o===4?(e.consume(B),R):B===63&&o===3?(e.consume(B),O):B===93&&o===5?(e.consume(B),J):je(B)&&(o===6||o===7)?(e.exit("htmlFlowData"),e.check(ZR,U,Q)(B)):B===null||je(B)?(e.exit("htmlFlowData"),Q(B)):(e.consume(B),H)}function Q(B){return e.check(KR,D,U)(B)}function D(B){return e.enter("lineEnding"),e.consume(B),e.exit("lineEnding"),q}function q(B){return B===null||je(B)?Q(B):(e.enter("htmlFlowData"),H(B))}function I(B){return B===45?(e.consume(B),O):H(B)}function V(B){return B===47?(e.consume(B),c="",W):H(B)}function W(B){if(B===62){const re=c.toLowerCase();return $b.includes(re)?(e.consume(B),R):H(B)}return $t(B)&&c.length<8?(e.consume(B),c+=String.fromCharCode(B),W):H(B)}function J(B){return B===93?(e.consume(B),O):H(B)}function O(B){return B===62?(e.consume(B),R):B===45&&o===2?(e.consume(B),O):H(B)}function R(B){return B===null||je(B)?(e.exit("htmlFlowData"),U(B)):(e.consume(B),R)}function U(B){return e.exit("htmlFlow"),t(B)}}function nI(e,t,n){const a=this;return o;function o(c){return je(c)?(e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),s):n(c)}function s(c){return a.parser.lazy[a.now().line]?n(c):t(c)}}function iI(e,t,n){return a;function a(o){return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),e.attempt(Ps,t,n)}}const rI={name:"htmlText",tokenize:aI};function aI(e,t,n){const a=this;let o,s,c;return d;function d(O){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(O),h}function h(O){return O===33?(e.consume(O),p):O===47?(e.consume(O),_):O===63?(e.consume(O),E):$t(O)?(e.consume(O),G):n(O)}function p(O){return O===45?(e.consume(O),m):O===91?(e.consume(O),s=0,w):$t(O)?(e.consume(O),k):n(O)}function m(O){return O===45?(e.consume(O),v):n(O)}function g(O){return O===null?n(O):O===45?(e.consume(O),x):je(O)?(c=g,V(O)):(e.consume(O),g)}function x(O){return O===45?(e.consume(O),v):g(O)}function v(O){return O===62?I(O):O===45?x(O):g(O)}function w(O){const R="CDATA[";return O===R.charCodeAt(s++)?(e.consume(O),s===R.length?N:w):n(O)}function N(O){return O===null?n(O):O===93?(e.consume(O),j):je(O)?(c=N,V(O)):(e.consume(O),N)}function j(O){return O===93?(e.consume(O),S):N(O)}function S(O){return O===62?I(O):O===93?(e.consume(O),S):N(O)}function k(O){return O===null||O===62?I(O):je(O)?(c=k,V(O)):(e.consume(O),k)}function E(O){return O===null?n(O):O===63?(e.consume(O),T):je(O)?(c=E,V(O)):(e.consume(O),E)}function T(O){return O===62?I(O):E(O)}function _(O){return $t(O)?(e.consume(O),A):n(O)}function A(O){return O===45||Lt(O)?(e.consume(O),A):z(O)}function z(O){return je(O)?(c=z,V(O)):Ie(O)?(e.consume(O),z):I(O)}function G(O){return O===45||Lt(O)?(e.consume(O),G):O===47||O===62||nt(O)?F(O):n(O)}function F(O){return O===47?(e.consume(O),I):O===58||O===95||$t(O)?(e.consume(O),L):je(O)?(c=F,V(O)):Ie(O)?(e.consume(O),F):I(O)}function L(O){return O===45||O===46||O===58||O===95||Lt(O)?(e.consume(O),L):$(O)}function $(O){return O===61?(e.consume(O),H):je(O)?(c=$,V(O)):Ie(O)?(e.consume(O),$):F(O)}function H(O){return O===null||O===60||O===61||O===62||O===96?n(O):O===34||O===39?(e.consume(O),o=O,Q):je(O)?(c=H,V(O)):Ie(O)?(e.consume(O),H):(e.consume(O),D)}function Q(O){return O===o?(e.consume(O),o=void 0,q):O===null?n(O):je(O)?(c=Q,V(O)):(e.consume(O),Q)}function D(O){return O===null||O===34||O===39||O===60||O===61||O===96?n(O):O===47||O===62||nt(O)?F(O):(e.consume(O),D)}function q(O){return O===47||O===62||nt(O)?F(O):n(O)}function I(O){return O===62?(e.consume(O),e.exit("htmlTextData"),e.exit("htmlText"),t):n(O)}function V(O){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(O),e.exit("lineEnding"),W}function W(O){return Ie(O)?qe(e,J,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(O):J(O)}function J(O){return e.enter("htmlTextData"),c(O)}}const nm={name:"labelEnd",resolveAll:cI,resolveTo:uI,tokenize:dI},oI={tokenize:fI},sI={tokenize:hI},lI={tokenize:pI};function cI(e){let t=-1;const n=[];for(;++t<e.length;){const a=e[t][1];if(n.push(e[t]),a.type==="labelImage"||a.type==="labelLink"||a.type==="labelEnd"){const o=a.type==="labelImage"?4:2;a.type="data",t+=o}}return e.length!==n.length&&fn(e,0,e.length,n),e}function uI(e,t){let n=e.length,a=0,o,s,c,d;for(;n--;)if(o=e[n][1],s){if(o.type==="link"||o.type==="labelLink"&&o._inactive)break;e[n][0]==="enter"&&o.type==="labelLink"&&(o._inactive=!0)}else if(c){if(e[n][0]==="enter"&&(o.type==="labelImage"||o.type==="labelLink")&&!o._balanced&&(s=n,o.type!=="labelLink")){a=2;break}}else o.type==="labelEnd"&&(c=n);const h={type:e[s][1].type==="labelLink"?"link":"image",start:{...e[s][1].start},end:{...e[e.length-1][1].end}},p={type:"label",start:{...e[s][1].start},end:{...e[c][1].end}},m={type:"labelText",start:{...e[s+a+2][1].end},end:{...e[c-2][1].start}};return d=[["enter",h,t],["enter",p,t]],d=Nn(d,e.slice(s+1,s+a+3)),d=Nn(d,[["enter",m,t]]),d=Nn(d,vu(t.parser.constructs.insideSpan.null,e.slice(s+a+4,c-3),t)),d=Nn(d,[["exit",m,t],e[c-2],e[c-1],["exit",p,t]]),d=Nn(d,e.slice(c+1)),d=Nn(d,[["exit",h,t]]),fn(e,s,e.length,d),e}function dI(e,t,n){const a=this;let o=a.events.length,s,c;for(;o--;)if((a.events[o][1].type==="labelImage"||a.events[o][1].type==="labelLink")&&!a.events[o][1]._balanced){s=a.events[o][1];break}return d;function d(x){return s?s._inactive?g(x):(c=a.parser.defined.includes(In(a.sliceSerialize({start:s.end,end:a.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(x),e.exit("labelMarker"),e.exit("labelEnd"),h):n(x)}function h(x){return x===40?e.attempt(oI,m,c?m:g)(x):x===91?e.attempt(sI,m,c?p:g)(x):c?m(x):g(x)}function p(x){return e.attempt(lI,m,g)(x)}function m(x){return t(x)}function g(x){return s._balanced=!0,n(x)}}function fI(e,t,n){return a;function a(g){return e.enter("resource"),e.enter("resourceMarker"),e.consume(g),e.exit("resourceMarker"),o}function o(g){return nt(g)?ps(e,s)(g):s(g)}function s(g){return g===41?m(g):oS(e,c,d,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(g)}function c(g){return nt(g)?ps(e,h)(g):m(g)}function d(g){return n(g)}function h(g){return g===34||g===39||g===40?lS(e,p,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(g):m(g)}function p(g){return nt(g)?ps(e,m)(g):m(g)}function m(g){return g===41?(e.enter("resourceMarker"),e.consume(g),e.exit("resourceMarker"),e.exit("resource"),t):n(g)}}function hI(e,t,n){const a=this;return o;function o(d){return sS.call(a,e,s,c,"reference","referenceMarker","referenceString")(d)}function s(d){return a.parser.defined.includes(In(a.sliceSerialize(a.events[a.events.length-1][1]).slice(1,-1)))?t(d):n(d)}function c(d){return n(d)}}function pI(e,t,n){return a;function a(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),o}function o(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const mI={name:"labelStartImage",resolveAll:nm.resolveAll,tokenize:gI};function gI(e,t,n){const a=this;return o;function o(d){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(d),e.exit("labelImageMarker"),s}function s(d){return d===91?(e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelImage"),c):n(d)}function c(d){return d===94&&"_hiddenFootnoteSupport"in a.parser.constructs?n(d):t(d)}}const yI={name:"labelStartLink",resolveAll:nm.resolveAll,tokenize:xI};function xI(e,t,n){const a=this;return o;function o(c){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(c),e.exit("labelMarker"),e.exit("labelLink"),s}function s(c){return c===94&&"_hiddenFootnoteSupport"in a.parser.constructs?n(c):t(c)}}const uh={name:"lineEnding",tokenize:vI};function vI(e,t){return n;function n(a){return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),qe(e,t,"linePrefix")}}const zc={name:"thematicBreak",tokenize:bI};function bI(e,t,n){let a=0,o;return s;function s(p){return e.enter("thematicBreak"),c(p)}function c(p){return o=p,d(p)}function d(p){return p===o?(e.enter("thematicBreakSequence"),h(p)):a>=3&&(p===null||je(p))?(e.exit("thematicBreak"),t(p)):n(p)}function h(p){return p===o?(e.consume(p),a++,h):(e.exit("thematicBreakSequence"),Ie(p)?qe(e,d,"whitespace")(p):d(p))}}const Qt={continuation:{tokenize:jI},exit:kI,name:"list",tokenize:NI},wI={partial:!0,tokenize:CI},SI={partial:!0,tokenize:EI};function NI(e,t,n){const a=this,o=a.events[a.events.length-1];let s=o&&o[1].type==="linePrefix"?o[2].sliceSerialize(o[1],!0).length:0,c=0;return d;function d(v){const w=a.containerState.type||(v===42||v===43||v===45?"listUnordered":"listOrdered");if(w==="listUnordered"?!a.containerState.marker||v===a.containerState.marker:yp(v)){if(a.containerState.type||(a.containerState.type=w,e.enter(w,{_container:!0})),w==="listUnordered")return e.enter("listItemPrefix"),v===42||v===45?e.check(zc,n,p)(v):p(v);if(!a.interrupt||v===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),h(v)}return n(v)}function h(v){return yp(v)&&++c<10?(e.consume(v),h):(!a.interrupt||c<2)&&(a.containerState.marker?v===a.containerState.marker:v===41||v===46)?(e.exit("listItemValue"),p(v)):n(v)}function p(v){return e.enter("listItemMarker"),e.consume(v),e.exit("listItemMarker"),a.containerState.marker=a.containerState.marker||v,e.check(Ps,a.interrupt?n:m,e.attempt(wI,x,g))}function m(v){return a.containerState.initialBlankLine=!0,s++,x(v)}function g(v){return Ie(v)?(e.enter("listItemPrefixWhitespace"),e.consume(v),e.exit("listItemPrefixWhitespace"),x):n(v)}function x(v){return a.containerState.size=s+a.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(v)}}function jI(e,t,n){const a=this;return a.containerState._closeFlow=void 0,e.check(Ps,o,s);function o(d){return a.containerState.furtherBlankLines=a.containerState.furtherBlankLines||a.containerState.initialBlankLine,qe(e,t,"listItemIndent",a.containerState.size+1)(d)}function s(d){return a.containerState.furtherBlankLines||!Ie(d)?(a.containerState.furtherBlankLines=void 0,a.containerState.initialBlankLine=void 0,c(d)):(a.containerState.furtherBlankLines=void 0,a.containerState.initialBlankLine=void 0,e.attempt(SI,t,c)(d))}function c(d){return a.containerState._closeFlow=!0,a.interrupt=void 0,qe(e,e.attempt(Qt,t,n),"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(d)}}function EI(e,t,n){const a=this;return qe(e,o,"listItemIndent",a.containerState.size+1);function o(s){const c=a.events[a.events.length-1];return c&&c[1].type==="listItemIndent"&&c[2].sliceSerialize(c[1],!0).length===a.containerState.size?t(s):n(s)}}function kI(e){e.exit(this.containerState.type)}function CI(e,t,n){const a=this;return qe(e,o,"listItemPrefixWhitespace",a.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function o(s){const c=a.events[a.events.length-1];return!Ie(s)&&c&&c[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const Hb={name:"setextUnderline",resolveTo:AI,tokenize:TI};function AI(e,t){let n=e.length,a,o,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){a=n;break}e[n][1].type==="paragraph"&&(o=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const c={type:"setextHeading",start:{...e[a][1].start},end:{...e[e.length-1][1].end}};return e[o][1].type="setextHeadingText",s?(e.splice(o,0,["enter",c,t]),e.splice(s+1,0,["exit",e[a][1],t]),e[a][1].end={...e[s][1].end}):e[a][1]=c,e.push(["exit",c,t]),e}function TI(e,t,n){const a=this;let o;return s;function s(p){let m=a.events.length,g;for(;m--;)if(a.events[m][1].type!=="lineEnding"&&a.events[m][1].type!=="linePrefix"&&a.events[m][1].type!=="content"){g=a.events[m][1].type==="paragraph";break}return!a.parser.lazy[a.now().line]&&(a.interrupt||g)?(e.enter("setextHeadingLine"),o=p,c(p)):n(p)}function c(p){return e.enter("setextHeadingLineSequence"),d(p)}function d(p){return p===o?(e.consume(p),d):(e.exit("setextHeadingLineSequence"),Ie(p)?qe(e,h,"lineSuffix")(p):h(p))}function h(p){return p===null||je(p)?(e.exit("setextHeadingLine"),t(p)):n(p)}}const MI={tokenize:DI};function DI(e){const t=this,n=e.attempt(Ps,a,e.attempt(this.parser.constructs.flowInitial,o,qe(e,e.attempt(this.parser.constructs.flow,o,e.attempt(LR,o)),"linePrefix")));return n;function a(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function o(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const OI={resolveAll:uS()},_I=cS("string"),RI=cS("text");function cS(e){return{resolveAll:uS(e==="text"?II:void 0),tokenize:t};function t(n){const a=this,o=this.parser.constructs[e],s=n.attempt(o,c,d);return c;function c(m){return p(m)?s(m):d(m)}function d(m){if(m===null){n.consume(m);return}return n.enter("data"),n.consume(m),h}function h(m){return p(m)?(n.exit("data"),s(m)):(n.consume(m),h)}function p(m){if(m===null)return!0;const g=o[m];let x=-1;if(g)for(;++x<g.length;){const v=g[x];if(!v.previous||v.previous.call(a,a.previous))return!0}return!1}}}function uS(e){return t;function t(n,a){let o=-1,s;for(;++o<=n.length;)s===void 0?n[o]&&n[o][1].type==="data"&&(s=o,o++):(!n[o]||n[o][1].type!=="data")&&(o!==s+2&&(n[s][1].end=n[o-1][1].end,n.splice(s+2,o-s-2),o=s+2),s=void 0);return e?e(n,a):n}}function II(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const a=e[n-1][1],o=t.sliceStream(a);let s=o.length,c=-1,d=0,h;for(;s--;){const p=o[s];if(typeof p=="string"){for(c=p.length;p.charCodeAt(c-1)===32;)d++,c--;if(c)break;c=-1}else if(p===-2)h=!0,d++;else if(p!==-1){s++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(d=0),d){const p={type:n===e.length||h||d<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?c:a.start._bufferIndex+c,_index:a.start._index+s,line:a.end.line,column:a.end.column-d,offset:a.end.offset-d},end:{...a.end}};a.end={...p.start},a.start.offset===a.end.offset?Object.assign(a,p):(e.splice(n,0,["enter",p,t],["exit",p,t]),n+=2)}n++}return e}const LI={42:Qt,43:Qt,45:Qt,48:Qt,49:Qt,50:Qt,51:Qt,52:Qt,53:Qt,54:Qt,55:Qt,56:Qt,57:Qt,62:nS},zI={91:HR},BI={[-2]:ch,[-1]:ch,32:ch},PI={35:WR,42:zc,45:[Hb,zc],60:JR,61:Hb,95:zc,96:Pb,126:Pb},$I={38:rS,92:iS},HI={[-5]:uh,[-4]:uh,[-3]:uh,33:mI,38:rS,42:xp,60:[yR,rI],91:yI,92:[VR,iS],93:nm,95:xp,96:MR},qI={null:[xp,OI]},UI={null:[42,95]},FI={null:[]},VI=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:UI,contentInitial:zI,disable:FI,document:LI,flow:PI,flowInitial:BI,insideSpan:qI,string:$I,text:HI},Symbol.toStringTag,{value:"Module"}));function GI(e,t,n){let a={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const o={},s=[];let c=[],d=[];const h={attempt:z(_),check:z(A),consume:k,enter:E,exit:T,interrupt:z(A,{interrupt:!0})},p={code:null,containerState:{},defineSkip:N,events:[],now:w,parser:e,previous:null,sliceSerialize:x,sliceStream:v,write:g};let m=t.tokenize.call(p,h);return t.resolveAll&&s.push(t),p;function g($){return c=Nn(c,$),j(),c[c.length-1]!==null?[]:(G(t,0),p.events=vu(s,p.events,p),p.events)}function x($,H){return YI(v($),H)}function v($){return WI(c,$)}function w(){const{_bufferIndex:$,_index:H,line:Q,column:D,offset:q}=a;return{_bufferIndex:$,_index:H,line:Q,column:D,offset:q}}function N($){o[$.line]=$.column,L()}function j(){let $;for(;a._index<c.length;){const H=c[a._index];if(typeof H=="string")for($=a._index,a._bufferIndex<0&&(a._bufferIndex=0);a._index===$&&a._bufferIndex<H.length;)S(H.charCodeAt(a._bufferIndex));else S(H)}}function S($){m=m($)}function k($){je($)?(a.line++,a.column=1,a.offset+=$===-3?2:1,L()):$!==-1&&(a.column++,a.offset++),a._bufferIndex<0?a._index++:(a._bufferIndex++,a._bufferIndex===c[a._index].length&&(a._bufferIndex=-1,a._index++)),p.previous=$}function E($,H){const Q=H||{};return Q.type=$,Q.start=w(),p.events.push(["enter",Q,p]),d.push(Q),Q}function T($){const H=d.pop();return H.end=w(),p.events.push(["exit",H,p]),H}function _($,H){G($,H.from)}function A($,H){H.restore()}function z($,H){return Q;function Q(D,q,I){let V,W,J,O;return Array.isArray(D)?U(D):"tokenize"in D?U([D]):R(D);function R(fe){return ie;function ie(te){const ue=te!==null&&fe[te],me=te!==null&&fe.null,ge=[...Array.isArray(ue)?ue:ue?[ue]:[],...Array.isArray(me)?me:me?[me]:[]];return U(ge)(te)}}function U(fe){return V=fe,W=0,fe.length===0?I:B(fe[W])}function B(fe){return ie;function ie(te){return O=F(),J=fe,fe.partial||(p.currentConstruct=fe),fe.name&&p.parser.constructs.disable.null.includes(fe.name)?de():fe.tokenize.call(H?Object.assign(Object.create(p),H):p,h,re,de)(te)}}function re(fe){return $(J,O),q}function de(fe){return O.restore(),++W<V.length?B(V[W]):I}}}function G($,H){$.resolveAll&&!s.includes($)&&s.push($),$.resolve&&fn(p.events,H,p.events.length-H,$.resolve(p.events.slice(H),p)),$.resolveTo&&(p.events=$.resolveTo(p.events,p))}function F(){const $=w(),H=p.previous,Q=p.currentConstruct,D=p.events.length,q=Array.from(d);return{from:D,restore:I};function I(){a=$,p.previous=H,p.currentConstruct=Q,p.events.length=D,d=q,L()}}function L(){a.line in o&&a.column<2&&(a.column=o[a.line],a.offset+=o[a.line]-1)}}function WI(e,t){const n=t.start._index,a=t.start._bufferIndex,o=t.end._index,s=t.end._bufferIndex;let c;if(n===o)c=[e[n].slice(a,s)];else{if(c=e.slice(n,o),a>-1){const d=c[0];typeof d=="string"?c[0]=d.slice(a):c.shift()}s>0&&c.push(e[o].slice(0,s))}return c}function YI(e,t){let n=-1;const a=[];let o;for(;++n<e.length;){const s=e[n];let c;if(typeof s=="string")c=s;else switch(s){case-5:{c="\r";break}case-4:{c=`
`;break}case-3:{c=`\r
`;break}case-2:{c=t?" ":"	";break}case-1:{if(!t&&o)continue;c=" ";break}default:c=String.fromCharCode(s)}o=s===-2,a.push(c)}return a.join("")}function XI(e){const a={constructs:eS([VI,...(e||{}).extensions||[]]),content:o(uR),defined:[],document:o(fR),flow:o(MI),lazy:{},string:o(_I),text:o(RI)};return a;function o(s){return c;function c(d){return GI(a,s,d)}}}function QI(e){for(;!aS(e););return e}const qb=/[\0\t\n\r]/g;function JI(){let e=1,t="",n=!0,a;return o;function o(s,c,d){const h=[];let p,m,g,x,v;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(c||void 0).decode(s)),g=0,t="",n&&(s.charCodeAt(0)===65279&&g++,n=void 0);g<s.length;){if(qb.lastIndex=g,p=qb.exec(s),x=p&&p.index!==void 0?p.index:s.length,v=s.charCodeAt(x),!p){t=s.slice(g);break}if(v===10&&g===x&&a)h.push(-3),a=void 0;else switch(a&&(h.push(-5),a=void 0),g<x&&(h.push(s.slice(g,x)),e+=x-g),v){case 0:{h.push(65533),e++;break}case 9:{for(m=Math.ceil(e/4)*4,h.push(-2);e++<m;)h.push(-1);break}case 10:{h.push(-4),e=1;break}default:a=!0,e=1}g=x+1}return d&&(a&&h.push(-5),t&&h.push(t),h.push(null)),h}}const ZI=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function KI(e){return e.replace(ZI,eL)}function eL(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const o=n.charCodeAt(1),s=o===120||o===88;return tS(n.slice(s?2:1),s?16:10)}return tm(n)||e}const dS={}.hasOwnProperty;function tL(e,t,n){return typeof t!="string"&&(n=t,t=void 0),nL(n)(QI(XI(n).document().write(JI()(e,t,!0))))}function nL(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Ot),autolinkProtocol:F,autolinkEmail:F,atxHeading:s(Ue),blockQuote:s(me),characterEscape:F,characterReference:F,codeFenced:s(ge),codeFencedFenceInfo:c,codeFencedFenceMeta:c,codeIndented:s(ge,c),codeText:s(xe,c),codeTextData:F,data:F,codeFlowValue:F,definition:s(we),definitionDestinationString:c,definitionLabelString:c,definitionTitleString:c,emphasis:s(Ce),hardBreakEscape:s($e),hardBreakTrailing:s($e),htmlFlow:s(ut,c),htmlFlowData:F,htmlText:s(ut,c),htmlTextData:F,image:s(Kt),label:c,link:s(Ot),listItem:s(En),listItemValue:x,listOrdered:s(Ht,g),listUnordered:s(Ht),paragraph:s(Zn),reference:B,referenceString:c,resourceDestinationString:c,resourceTitleString:c,setextHeading:s(Ue),strong:s(Kn),thematicBreak:s(Ai)},exit:{atxHeading:h(),atxHeadingSequence:_,autolink:h(),autolinkEmail:ue,autolinkProtocol:te,blockQuote:h(),characterEscapeValue:L,characterReferenceMarkerHexadecimal:de,characterReferenceMarkerNumeric:de,characterReferenceValue:fe,characterReference:ie,codeFenced:h(j),codeFencedFence:N,codeFencedFenceInfo:v,codeFencedFenceMeta:w,codeFlowValue:L,codeIndented:h(S),codeText:h(q),codeTextData:L,data:L,definition:h(),definitionDestinationString:T,definitionLabelString:k,definitionTitleString:E,emphasis:h(),hardBreakEscape:h(H),hardBreakTrailing:h(H),htmlFlow:h(Q),htmlFlowData:L,htmlText:h(D),htmlTextData:L,image:h(V),label:J,labelText:W,lineEnding:$,link:h(I),listItem:h(),listOrdered:h(),listUnordered:h(),paragraph:h(),referenceString:re,resourceDestinationString:O,resourceTitleString:R,resource:U,setextHeading:h(G),setextHeadingLineSequence:z,setextHeadingText:A,strong:h(),thematicBreak:h()}};fS(t,(e||{}).mdastExtensions||[]);const n={};return a;function a(oe){let pe={type:"root",children:[]};const Ee={stack:[pe],tokenStack:[],config:t,enter:d,exit:p,buffer:c,resume:m,data:n},Oe=[];let He=-1;for(;++He<oe.length;)if(oe[He][1].type==="listOrdered"||oe[He][1].type==="listUnordered")if(oe[He][0]==="enter")Oe.push(He);else{const Bt=Oe.pop();He=o(oe,Bt,He)}for(He=-1;++He<oe.length;){const Bt=t[oe[He][0]];dS.call(Bt,oe[He][1].type)&&Bt[oe[He][1].type].call(Object.assign({sliceSerialize:oe[He][2].sliceSerialize},Ee),oe[He][1])}if(Ee.tokenStack.length>0){const Bt=Ee.tokenStack[Ee.tokenStack.length-1];(Bt[1]||Ub).call(Ee,void 0,Bt[0])}for(pe.position={start:or(oe.length>0?oe[0][1].start:{line:1,column:1,offset:0}),end:or(oe.length>0?oe[oe.length-2][1].end:{line:1,column:1,offset:0})},He=-1;++He<t.transforms.length;)pe=t.transforms[He](pe)||pe;return pe}function o(oe,pe,Ee){let Oe=pe-1,He=-1,Bt=!1,kn,Ct,ht,_t;for(;++Oe<=Ee;){const Xe=oe[Oe];switch(Xe[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Xe[0]==="enter"?He++:He--,_t=void 0;break}case"lineEndingBlank":{Xe[0]==="enter"&&(kn&&!_t&&!He&&!ht&&(ht=Oe),_t=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:_t=void 0}if(!He&&Xe[0]==="enter"&&Xe[1].type==="listItemPrefix"||He===-1&&Xe[0]==="exit"&&(Xe[1].type==="listUnordered"||Xe[1].type==="listOrdered")){if(kn){let Bn=Oe;for(Ct=void 0;Bn--;){const en=oe[Bn];if(en[1].type==="lineEnding"||en[1].type==="lineEndingBlank"){if(en[0]==="exit")continue;Ct&&(oe[Ct][1].type="lineEndingBlank",Bt=!0),en[1].type="lineEnding",Ct=Bn}else if(!(en[1].type==="linePrefix"||en[1].type==="blockQuotePrefix"||en[1].type==="blockQuotePrefixWhitespace"||en[1].type==="blockQuoteMarker"||en[1].type==="listItemIndent"))break}ht&&(!Ct||ht<Ct)&&(kn._spread=!0),kn.end=Object.assign({},Ct?oe[Ct][1].start:Xe[1].end),oe.splice(Ct||Oe,0,["exit",kn,Xe[2]]),Oe++,Ee++}if(Xe[1].type==="listItemPrefix"){const Bn={type:"listItem",_spread:!1,start:Object.assign({},Xe[1].start),end:void 0};kn=Bn,oe.splice(Oe,0,["enter",Bn,Xe[2]]),Oe++,Ee++,ht=void 0,_t=!0}}}return oe[pe][1]._spread=Bt,Ee}function s(oe,pe){return Ee;function Ee(Oe){d.call(this,oe(Oe),Oe),pe&&pe.call(this,Oe)}}function c(){this.stack.push({type:"fragment",children:[]})}function d(oe,pe,Ee){this.stack[this.stack.length-1].children.push(oe),this.stack.push(oe),this.tokenStack.push([pe,Ee||void 0]),oe.position={start:or(pe.start),end:void 0}}function h(oe){return pe;function pe(Ee){oe&&oe.call(this,Ee),p.call(this,Ee)}}function p(oe,pe){const Ee=this.stack.pop(),Oe=this.tokenStack.pop();if(Oe)Oe[0].type!==oe.type&&(pe?pe.call(this,oe,Oe[0]):(Oe[1]||Ub).call(this,oe,Oe[0]));else throw new Error("Cannot close `"+oe.type+"` ("+hs({start:oe.start,end:oe.end})+"): its not open");Ee.position.end=or(oe.end)}function m(){return em(this.stack.pop())}function g(){this.data.expectingFirstListItemValue=!0}function x(oe){if(this.data.expectingFirstListItemValue){const pe=this.stack[this.stack.length-2];pe.start=Number.parseInt(this.sliceSerialize(oe),10),this.data.expectingFirstListItemValue=void 0}}function v(){const oe=this.resume(),pe=this.stack[this.stack.length-1];pe.lang=oe}function w(){const oe=this.resume(),pe=this.stack[this.stack.length-1];pe.meta=oe}function N(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function j(){const oe=this.resume(),pe=this.stack[this.stack.length-1];pe.value=oe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function S(){const oe=this.resume(),pe=this.stack[this.stack.length-1];pe.value=oe.replace(/(\r?\n|\r)$/g,"")}function k(oe){const pe=this.resume(),Ee=this.stack[this.stack.length-1];Ee.label=pe,Ee.identifier=In(this.sliceSerialize(oe)).toLowerCase()}function E(){const oe=this.resume(),pe=this.stack[this.stack.length-1];pe.title=oe}function T(){const oe=this.resume(),pe=this.stack[this.stack.length-1];pe.url=oe}function _(oe){const pe=this.stack[this.stack.length-1];if(!pe.depth){const Ee=this.sliceSerialize(oe).length;pe.depth=Ee}}function A(){this.data.setextHeadingSlurpLineEnding=!0}function z(oe){const pe=this.stack[this.stack.length-1];pe.depth=this.sliceSerialize(oe).codePointAt(0)===61?1:2}function G(){this.data.setextHeadingSlurpLineEnding=void 0}function F(oe){const Ee=this.stack[this.stack.length-1].children;let Oe=Ee[Ee.length-1];(!Oe||Oe.type!=="text")&&(Oe=Nt(),Oe.position={start:or(oe.start),end:void 0},Ee.push(Oe)),this.stack.push(Oe)}function L(oe){const pe=this.stack.pop();pe.value+=this.sliceSerialize(oe),pe.position.end=or(oe.end)}function $(oe){const pe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Ee=pe.children[pe.children.length-1];Ee.position.end=or(oe.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(pe.type)&&(F.call(this,oe),L.call(this,oe))}function H(){this.data.atHardBreak=!0}function Q(){const oe=this.resume(),pe=this.stack[this.stack.length-1];pe.value=oe}function D(){const oe=this.resume(),pe=this.stack[this.stack.length-1];pe.value=oe}function q(){const oe=this.resume(),pe=this.stack[this.stack.length-1];pe.value=oe}function I(){const oe=this.stack[this.stack.length-1];if(this.data.inReference){const pe=this.data.referenceType||"shortcut";oe.type+="Reference",oe.referenceType=pe,delete oe.url,delete oe.title}else delete oe.identifier,delete oe.label;this.data.referenceType=void 0}function V(){const oe=this.stack[this.stack.length-1];if(this.data.inReference){const pe=this.data.referenceType||"shortcut";oe.type+="Reference",oe.referenceType=pe,delete oe.url,delete oe.title}else delete oe.identifier,delete oe.label;this.data.referenceType=void 0}function W(oe){const pe=this.sliceSerialize(oe),Ee=this.stack[this.stack.length-2];Ee.label=KI(pe),Ee.identifier=In(pe).toLowerCase()}function J(){const oe=this.stack[this.stack.length-1],pe=this.resume(),Ee=this.stack[this.stack.length-1];if(this.data.inReference=!0,Ee.type==="link"){const Oe=oe.children;Ee.children=Oe}else Ee.alt=pe}function O(){const oe=this.resume(),pe=this.stack[this.stack.length-1];pe.url=oe}function R(){const oe=this.resume(),pe=this.stack[this.stack.length-1];pe.title=oe}function U(){this.data.inReference=void 0}function B(){this.data.referenceType="collapsed"}function re(oe){const pe=this.resume(),Ee=this.stack[this.stack.length-1];Ee.label=pe,Ee.identifier=In(this.sliceSerialize(oe)).toLowerCase(),this.data.referenceType="full"}function de(oe){this.data.characterReferenceType=oe.type}function fe(oe){const pe=this.sliceSerialize(oe),Ee=this.data.characterReferenceType;let Oe;Ee?(Oe=tS(pe,Ee==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Oe=tm(pe);const He=this.stack[this.stack.length-1];He.value+=Oe}function ie(oe){const pe=this.stack.pop();pe.position.end=or(oe.end)}function te(oe){L.call(this,oe);const pe=this.stack[this.stack.length-1];pe.url=this.sliceSerialize(oe)}function ue(oe){L.call(this,oe);const pe=this.stack[this.stack.length-1];pe.url="mailto:"+this.sliceSerialize(oe)}function me(){return{type:"blockquote",children:[]}}function ge(){return{type:"code",lang:null,meta:null,value:""}}function xe(){return{type:"inlineCode",value:""}}function we(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ce(){return{type:"emphasis",children:[]}}function Ue(){return{type:"heading",depth:0,children:[]}}function $e(){return{type:"break"}}function ut(){return{type:"html",value:""}}function Kt(){return{type:"image",title:null,url:"",alt:null}}function Ot(){return{type:"link",title:null,url:"",children:[]}}function Ht(oe){return{type:"list",ordered:oe.type==="listOrdered",start:null,spread:oe._spread,children:[]}}function En(oe){return{type:"listItem",spread:oe._spread,checked:null,children:[]}}function Zn(){return{type:"paragraph",children:[]}}function Kn(){return{type:"strong",children:[]}}function Nt(){return{type:"text",value:""}}function Ai(){return{type:"thematicBreak"}}}function or(e){return{line:e.line,column:e.column,offset:e.offset}}function fS(e,t){let n=-1;for(;++n<t.length;){const a=t[n];Array.isArray(a)?fS(e,a):iL(e,a)}}function iL(e,t){let n;for(n in t)if(dS.call(t,n))switch(n){case"canContainEols":{const a=t[n];a&&e[n].push(...a);break}case"transforms":{const a=t[n];a&&e[n].push(...a);break}case"enter":case"exit":{const a=t[n];a&&Object.assign(e[n],a);break}}}function Ub(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+hs({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+hs({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+hs({start:t.start,end:t.end})+") is still open")}function rL(e){const t=this;t.parser=n;function n(a){return tL(a,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function aL(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function oL(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function sL(e,t){const n=t.value?t.value+`
`:"",a={},o=t.lang?t.lang.split(/\s+/):[];o.length>0&&(a.className=["language-"+o[0]]);let s={type:"element",tagName:"code",properties:a,children:[{type:"text",value:n}]};return t.meta&&(s.data={meta:t.meta}),e.patch(t,s),s=e.applyData(t,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(t,s),s}function lL(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function cL(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function uL(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",a=String(t.identifier).toUpperCase(),o=eo(a.toLowerCase()),s=e.footnoteOrder.indexOf(a);let c,d=e.footnoteCounts.get(a);d===void 0?(d=0,e.footnoteOrder.push(a),c=e.footnoteOrder.length):c=s+1,d+=1,e.footnoteCounts.set(a,d);const h={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+o,id:n+"fnref-"+o+(d>1?"-"+d:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(c)}]};e.patch(t,h);const p={type:"element",tagName:"sup",properties:{},children:[h]};return e.patch(t,p),e.applyData(t,p)}function dL(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function fL(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function hS(e,t){const n=t.referenceType;let a="]";if(n==="collapsed"?a+="[]":n==="full"&&(a+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+a}];const o=e.all(t),s=o[0];s&&s.type==="text"?s.value="["+s.value:o.unshift({type:"text",value:"["});const c=o[o.length-1];return c&&c.type==="text"?c.value+=a:o.push({type:"text",value:a}),o}function hL(e,t){const n=String(t.identifier).toUpperCase(),a=e.definitionById.get(n);if(!a)return hS(e,t);const o={src:eo(a.url||""),alt:t.alt};a.title!==null&&a.title!==void 0&&(o.title=a.title);const s={type:"element",tagName:"img",properties:o,children:[]};return e.patch(t,s),e.applyData(t,s)}function pL(e,t){const n={src:eo(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const a={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,a),e.applyData(t,a)}function mL(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const a={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,a),e.applyData(t,a)}function gL(e,t){const n=String(t.identifier).toUpperCase(),a=e.definitionById.get(n);if(!a)return hS(e,t);const o={href:eo(a.url||"")};a.title!==null&&a.title!==void 0&&(o.title=a.title);const s={type:"element",tagName:"a",properties:o,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function yL(e,t){const n={href:eo(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const a={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,a),e.applyData(t,a)}function xL(e,t,n){const a=e.all(t),o=n?vL(n):pS(t),s={},c=[];if(typeof t.checked=="boolean"){const m=a[0];let g;m&&m.type==="element"&&m.tagName==="p"?g=m:(g={type:"element",tagName:"p",properties:{},children:[]},a.unshift(g)),g.children.length>0&&g.children.unshift({type:"text",value:" "}),g.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let d=-1;for(;++d<a.length;){const m=a[d];(o||d!==0||m.type!=="element"||m.tagName!=="p")&&c.push({type:"text",value:`
`}),m.type==="element"&&m.tagName==="p"&&!o?c.push(...m.children):c.push(m)}const h=a[a.length-1];h&&(o||h.type!=="element"||h.tagName!=="p")&&c.push({type:"text",value:`
`});const p={type:"element",tagName:"li",properties:s,children:c};return e.patch(t,p),e.applyData(t,p)}function vL(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let a=-1;for(;!t&&++a<n.length;)t=pS(n[a])}return t}function pS(e){const t=e.spread;return t??e.children.length>1}function bL(e,t){const n={},a=e.all(t);let o=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++o<a.length;){const c=a[o];if(c.type==="element"&&c.tagName==="li"&&c.properties&&Array.isArray(c.properties.className)&&c.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(a,!0)};return e.patch(t,s),e.applyData(t,s)}function wL(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function SL(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function NL(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function jL(e,t){const n=e.all(t),a=n.shift(),o=[];if(a){const c={type:"element",tagName:"thead",properties:{},children:e.wrap([a],!0)};e.patch(t.children[0],c),o.push(c)}if(n.length>0){const c={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},d=Qp(t.children[1]),h=W1(t.children[t.children.length-1]);d&&h&&(c.position={start:d,end:h}),o.push(c)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(o,!0)};return e.patch(t,s),e.applyData(t,s)}function EL(e,t,n){const a=n?n.children:void 0,s=(a?a.indexOf(t):1)===0?"th":"td",c=n&&n.type==="table"?n.align:void 0,d=c?c.length:t.children.length;let h=-1;const p=[];for(;++h<d;){const g=t.children[h],x={},v=c?c[h]:void 0;v&&(x.align=v);let w={type:"element",tagName:s,properties:x,children:[]};g&&(w.children=e.all(g),e.patch(g,w),w=e.applyData(g,w)),p.push(w)}const m={type:"element",tagName:"tr",properties:{},children:e.wrap(p,!0)};return e.patch(t,m),e.applyData(t,m)}function kL(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Fb=9,Vb=32;function CL(e){const t=String(e),n=/\r?\n|\r/g;let a=n.exec(t),o=0;const s=[];for(;a;)s.push(Gb(t.slice(o,a.index),o>0,!0),a[0]),o=a.index+a[0].length,a=n.exec(t);return s.push(Gb(t.slice(o),o>0,!1)),s.join("")}function Gb(e,t,n){let a=0,o=e.length;if(t){let s=e.codePointAt(a);for(;s===Fb||s===Vb;)a++,s=e.codePointAt(a)}if(n){let s=e.codePointAt(o-1);for(;s===Fb||s===Vb;)o--,s=e.codePointAt(o-1)}return o>a?e.slice(a,o):""}function AL(e,t){const n={type:"text",value:CL(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function TL(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const ML={blockquote:aL,break:oL,code:sL,delete:lL,emphasis:cL,footnoteReference:uL,heading:dL,html:fL,imageReference:hL,image:pL,inlineCode:mL,linkReference:gL,link:yL,listItem:xL,list:bL,paragraph:wL,root:SL,strong:NL,table:jL,tableCell:kL,tableRow:EL,text:AL,thematicBreak:TL,toml:jc,yaml:jc,definition:jc,footnoteDefinition:jc};function jc(){}const mS=-1,bu=0,ms=1,Kc=2,im=3,rm=4,am=5,om=6,gS=7,yS=8,Wb=typeof self=="object"?self:globalThis,DL=(e,t)=>{const n=(o,s)=>(e.set(s,o),o),a=o=>{if(e.has(o))return e.get(o);const[s,c]=t[o];switch(s){case bu:case mS:return n(c,o);case ms:{const d=n([],o);for(const h of c)d.push(a(h));return d}case Kc:{const d=n({},o);for(const[h,p]of c)d[a(h)]=a(p);return d}case im:return n(new Date(c),o);case rm:{const{source:d,flags:h}=c;return n(new RegExp(d,h),o)}case am:{const d=n(new Map,o);for(const[h,p]of c)d.set(a(h),a(p));return d}case om:{const d=n(new Set,o);for(const h of c)d.add(a(h));return d}case gS:{const{name:d,message:h}=c;return n(new Wb[d](h),o)}case yS:return n(BigInt(c),o);case"BigInt":return n(Object(BigInt(c)),o);case"ArrayBuffer":return n(new Uint8Array(c).buffer,c);case"DataView":{const{buffer:d}=new Uint8Array(c);return n(new DataView(d),c)}}return n(new Wb[s](c),o)};return a},Yb=e=>DL(new Map,e)(0),Ia="",{toString:OL}={},{keys:_L}=Object,is=e=>{const t=typeof e;if(t!=="object"||!e)return[bu,t];const n=OL.call(e).slice(8,-1);switch(n){case"Array":return[ms,Ia];case"Object":return[Kc,Ia];case"Date":return[im,Ia];case"RegExp":return[rm,Ia];case"Map":return[am,Ia];case"Set":return[om,Ia];case"DataView":return[ms,n]}return n.includes("Array")?[ms,n]:n.includes("Error")?[gS,n]:[Kc,n]},Ec=([e,t])=>e===bu&&(t==="function"||t==="symbol"),RL=(e,t,n,a)=>{const o=(c,d)=>{const h=a.push(c)-1;return n.set(d,h),h},s=c=>{if(n.has(c))return n.get(c);let[d,h]=is(c);switch(d){case bu:{let m=c;switch(h){case"bigint":d=yS,m=c.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+h);m=null;break;case"undefined":return o([mS],c)}return o([d,m],c)}case ms:{if(h){let x=c;return h==="DataView"?x=new Uint8Array(c.buffer):h==="ArrayBuffer"&&(x=new Uint8Array(c)),o([h,[...x]],c)}const m=[],g=o([d,m],c);for(const x of c)m.push(s(x));return g}case Kc:{if(h)switch(h){case"BigInt":return o([h,c.toString()],c);case"Boolean":case"Number":case"String":return o([h,c.valueOf()],c)}if(t&&"toJSON"in c)return s(c.toJSON());const m=[],g=o([d,m],c);for(const x of _L(c))(e||!Ec(is(c[x])))&&m.push([s(x),s(c[x])]);return g}case im:return o([d,c.toISOString()],c);case rm:{const{source:m,flags:g}=c;return o([d,{source:m,flags:g}],c)}case am:{const m=[],g=o([d,m],c);for(const[x,v]of c)(e||!(Ec(is(x))||Ec(is(v))))&&m.push([s(x),s(v)]);return g}case om:{const m=[],g=o([d,m],c);for(const x of c)(e||!Ec(is(x)))&&m.push(s(x));return g}}const{message:p}=c;return o([d,{name:h,message:p}],c)};return s},Xb=(e,{json:t,lossy:n}={})=>{const a=[];return RL(!(t||n),!!t,new Map,a)(e),a},eu=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Yb(Xb(e,t)):structuredClone(e):(e,t)=>Yb(Xb(e,t));function IL(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function LL(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function zL(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||IL,a=e.options.footnoteBackLabel||LL,o=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",c=e.options.footnoteLabelProperties||{className:["sr-only"]},d=[];let h=-1;for(;++h<e.footnoteOrder.length;){const p=e.footnoteById.get(e.footnoteOrder[h]);if(!p)continue;const m=e.all(p),g=String(p.identifier).toUpperCase(),x=eo(g.toLowerCase());let v=0;const w=[],N=e.footnoteCounts.get(g);for(;N!==void 0&&++v<=N;){w.length>0&&w.push({type:"text",value:" "});let k=typeof n=="string"?n:n(h,v);typeof k=="string"&&(k={type:"text",value:k}),w.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+x+(v>1?"-"+v:""),dataFootnoteBackref:"",ariaLabel:typeof a=="string"?a:a(h,v),className:["data-footnote-backref"]},children:Array.isArray(k)?k:[k]})}const j=m[m.length-1];if(j&&j.type==="element"&&j.tagName==="p"){const k=j.children[j.children.length-1];k&&k.type==="text"?k.value+=" ":j.children.push({type:"text",value:" "}),j.children.push(...w)}else m.push(...w);const S={type:"element",tagName:"li",properties:{id:t+"fn-"+x},children:e.wrap(m,!0)};e.patch(p,S),d.push(S)}if(d.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...eu(c),id:"footnote-label"},children:[{type:"text",value:o}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(d,!0)},{type:"text",value:`
`}]}}const wu=(function(e){if(e==null)return HL;if(typeof e=="function")return Su(e);if(typeof e=="object")return Array.isArray(e)?BL(e):PL(e);if(typeof e=="string")return $L(e);throw new Error("Expected function, string, or object as test")});function BL(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=wu(e[n]);return Su(a);function a(...o){let s=-1;for(;++s<t.length;)if(t[s].apply(this,o))return!0;return!1}}function PL(e){const t=e;return Su(n);function n(a){const o=a;let s;for(s in e)if(o[s]!==t[s])return!1;return!0}}function $L(e){return Su(t);function t(n){return n&&n.type===e}}function Su(e){return t;function t(n,a,o){return!!(qL(n)&&e.call(this,n,typeof a=="number"?a:void 0,o||void 0))}}function HL(){return!0}function qL(e){return e!==null&&typeof e=="object"&&"type"in e}const xS=[],UL=!0,vp=!1,FL="skip";function vS(e,t,n,a){let o;typeof t=="function"&&typeof n!="function"?(a=n,n=t):o=t;const s=wu(o),c=a?-1:1;d(e,void 0,[])();function d(h,p,m){const g=h&&typeof h=="object"?h:{};if(typeof g.type=="string"){const v=typeof g.tagName=="string"?g.tagName:typeof g.name=="string"?g.name:void 0;Object.defineProperty(x,"name",{value:"node ("+(h.type+(v?"<"+v+">":""))+")"})}return x;function x(){let v=xS,w,N,j;if((!t||s(h,p,m[m.length-1]||void 0))&&(v=VL(n(h,m)),v[0]===vp))return v;if("children"in h&&h.children){const S=h;if(S.children&&v[0]!==FL)for(N=(a?S.children.length:-1)+c,j=m.concat(S);N>-1&&N<S.children.length;){const k=S.children[N];if(w=d(k,N,j)(),w[0]===vp)return w;N=typeof w[1]=="number"?w[1]:N+c}}return v}}}function VL(e){return Array.isArray(e)?e:typeof e=="number"?[UL,e]:e==null?xS:[e]}function sm(e,t,n,a){let o,s,c;typeof t=="function"&&typeof n!="function"?(s=void 0,c=t,o=n):(s=t,c=n,o=a),vS(e,s,d,o);function d(h,p){const m=p[p.length-1],g=m?m.children.indexOf(h):void 0;return c(h,g,m)}}const bp={}.hasOwnProperty,GL={};function WL(e,t){const n=t||GL,a=new Map,o=new Map,s=new Map,c={...ML,...n.handlers},d={all:p,applyData:XL,definitionById:a,footnoteById:o,footnoteCounts:s,footnoteOrder:[],handlers:c,one:h,options:n,patch:YL,wrap:JL};return sm(e,function(m){if(m.type==="definition"||m.type==="footnoteDefinition"){const g=m.type==="definition"?a:o,x=String(m.identifier).toUpperCase();g.has(x)||g.set(x,m)}}),d;function h(m,g){const x=m.type,v=d.handlers[x];if(bp.call(d.handlers,x)&&v)return v(d,m,g);if(d.options.passThrough&&d.options.passThrough.includes(x)){if("children"in m){const{children:N,...j}=m,S=eu(j);return S.children=d.all(m),S}return eu(m)}return(d.options.unknownHandler||QL)(d,m,g)}function p(m){const g=[];if("children"in m){const x=m.children;let v=-1;for(;++v<x.length;){const w=d.one(x[v],m);if(w){if(v&&x[v-1].type==="break"&&(!Array.isArray(w)&&w.type==="text"&&(w.value=Qb(w.value)),!Array.isArray(w)&&w.type==="element")){const N=w.children[0];N&&N.type==="text"&&(N.value=Qb(N.value))}Array.isArray(w)?g.push(...w):g.push(w)}}}return g}}function YL(e,t){e.position&&(t.position=L_(e))}function XL(e,t){let n=t;if(e&&e.data){const a=e.data.hName,o=e.data.hChildren,s=e.data.hProperties;if(typeof a=="string")if(n.type==="element")n.tagName=a;else{const c="children"in n?n.children:[n];n={type:"element",tagName:a,properties:{},children:c}}n.type==="element"&&s&&Object.assign(n.properties,eu(s)),"children"in n&&n.children&&o!==null&&o!==void 0&&(n.children=o)}return n}function QL(e,t){const n=t.data||{},a="value"in t&&!(bp.call(n,"hProperties")||bp.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,a),e.applyData(t,a)}function JL(e,t){const n=[];let a=-1;for(t&&n.push({type:"text",value:`
`});++a<e.length;)a&&n.push({type:"text",value:`
`}),n.push(e[a]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Qb(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Jb(e,t){const n=WL(e,t),a=n.one(e,void 0),o=zL(n),s=Array.isArray(a)?{type:"root",children:a}:a||{type:"root",children:[]};return o&&s.children.push({type:"text",value:`
`},o),s}function ZL(e,t){return e&&"run"in e?async function(n,a){const o=Jb(n,{file:a,...t});await e.run(o,a)}:function(n,a){return Jb(n,{file:a,...e||t})}}function Zb(e){if(e)throw e}var dh,Kb;function KL(){if(Kb)return dh;Kb=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,a=Object.getOwnPropertyDescriptor,o=function(p){return typeof Array.isArray=="function"?Array.isArray(p):t.call(p)==="[object Array]"},s=function(p){if(!p||t.call(p)!=="[object Object]")return!1;var m=e.call(p,"constructor"),g=p.constructor&&p.constructor.prototype&&e.call(p.constructor.prototype,"isPrototypeOf");if(p.constructor&&!m&&!g)return!1;var x;for(x in p);return typeof x>"u"||e.call(p,x)},c=function(p,m){n&&m.name==="__proto__"?n(p,m.name,{enumerable:!0,configurable:!0,value:m.newValue,writable:!0}):p[m.name]=m.newValue},d=function(p,m){if(m==="__proto__")if(e.call(p,m)){if(a)return a(p,m).value}else return;return p[m]};return dh=function h(){var p,m,g,x,v,w,N=arguments[0],j=1,S=arguments.length,k=!1;for(typeof N=="boolean"&&(k=N,N=arguments[1]||{},j=2),(N==null||typeof N!="object"&&typeof N!="function")&&(N={});j<S;++j)if(p=arguments[j],p!=null)for(m in p)g=d(N,m),x=d(p,m),N!==x&&(k&&x&&(s(x)||(v=o(x)))?(v?(v=!1,w=g&&o(g)?g:[]):w=g&&s(g)?g:{},c(N,{name:m,newValue:h(k,w,x)})):typeof x<"u"&&c(N,{name:m,newValue:x}));return N},dh}var ez=KL();const fh=Ts(ez);function wp(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function tz(){const e=[],t={run:n,use:a};return t;function n(...o){let s=-1;const c=o.pop();if(typeof c!="function")throw new TypeError("Expected function as last argument, not "+c);d(null,...o);function d(h,...p){const m=e[++s];let g=-1;if(h){c(h);return}for(;++g<o.length;)(p[g]===null||p[g]===void 0)&&(p[g]=o[g]);o=p,m?nz(m,d)(...p):c(null,...p)}}function a(o){if(typeof o!="function")throw new TypeError("Expected `middelware` to be a function, not "+o);return e.push(o),t}}function nz(e,t){let n;return a;function a(...c){const d=e.length>c.length;let h;d&&c.push(o);try{h=e.apply(this,c)}catch(p){const m=p;if(d&&n)throw m;return o(m)}d||(h&&h.then&&typeof h.then=="function"?h.then(s,o):h instanceof Error?o(h):s(h))}function o(c,...d){n||(n=!0,t(c,...d))}function s(c){o(null,c)}}const Vn={basename:iz,dirname:rz,extname:az,join:oz,sep:"/"};function iz(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');$s(e);let n=0,a=-1,o=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;o--;)if(e.codePointAt(o)===47){if(s){n=o+1;break}}else a<0&&(s=!0,a=o+1);return a<0?"":e.slice(n,a)}if(t===e)return"";let c=-1,d=t.length-1;for(;o--;)if(e.codePointAt(o)===47){if(s){n=o+1;break}}else c<0&&(s=!0,c=o+1),d>-1&&(e.codePointAt(o)===t.codePointAt(d--)?d<0&&(a=o):(d=-1,a=c));return n===a?a=c:a<0&&(a=e.length),e.slice(n,a)}function rz(e){if($s(e),e.length===0)return".";let t=-1,n=e.length,a;for(;--n;)if(e.codePointAt(n)===47){if(a){t=n;break}}else a||(a=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function az(e){$s(e);let t=e.length,n=-1,a=0,o=-1,s=0,c;for(;t--;){const d=e.codePointAt(t);if(d===47){if(c){a=t+1;break}continue}n<0&&(c=!0,n=t+1),d===46?o<0?o=t:s!==1&&(s=1):o>-1&&(s=-1)}return o<0||n<0||s===0||s===1&&o===n-1&&o===a+1?"":e.slice(o,n)}function oz(...e){let t=-1,n;for(;++t<e.length;)$s(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":sz(n)}function sz(e){$s(e);const t=e.codePointAt(0)===47;let n=lz(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function lz(e,t){let n="",a=0,o=-1,s=0,c=-1,d,h;for(;++c<=e.length;){if(c<e.length)d=e.codePointAt(c);else{if(d===47)break;d=47}if(d===47){if(!(o===c-1||s===1))if(o!==c-1&&s===2){if(n.length<2||a!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(h=n.lastIndexOf("/"),h!==n.length-1){h<0?(n="",a=0):(n=n.slice(0,h),a=n.length-1-n.lastIndexOf("/")),o=c,s=0;continue}}else if(n.length>0){n="",a=0,o=c,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",a=2)}else n.length>0?n+="/"+e.slice(o+1,c):n=e.slice(o+1,c),a=c-o-1;o=c,s=0}else d===46&&s>-1?s++:s=-1}return n}function $s(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const cz={cwd:uz};function uz(){return"/"}function Sp(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function dz(e){if(typeof e=="string")e=new URL(e);else if(!Sp(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return fz(e)}function fz(e){if(e.hostname!==""){const a=new TypeError('File URL host must be "localhost" or empty on darwin');throw a.code="ERR_INVALID_FILE_URL_HOST",a}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const a=t.codePointAt(n+2);if(a===70||a===102){const o=new TypeError("File URL path must not include encoded / characters");throw o.code="ERR_INVALID_FILE_URL_PATH",o}}return decodeURIComponent(t)}const hh=["history","path","basename","stem","extname","dirname"];class bS{constructor(t){let n;t?Sp(t)?n={path:t}:typeof t=="string"||hz(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":cz.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let a=-1;for(;++a<hh.length;){const s=hh[a];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let o;for(o in n)hh.includes(o)||(this[o]=n[o])}get basename(){return typeof this.path=="string"?Vn.basename(this.path):void 0}set basename(t){mh(t,"basename"),ph(t,"basename"),this.path=Vn.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Vn.dirname(this.path):void 0}set dirname(t){e0(this.basename,"dirname"),this.path=Vn.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Vn.extname(this.path):void 0}set extname(t){if(ph(t,"extname"),e0(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Vn.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Sp(t)&&(t=dz(t)),mh(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Vn.basename(this.path,this.extname):void 0}set stem(t){mh(t,"stem"),ph(t,"stem"),this.path=Vn.join(this.dirname||"",t+(this.extname||""))}fail(t,n,a){const o=this.message(t,n,a);throw o.fatal=!0,o}info(t,n,a){const o=this.message(t,n,a);return o.fatal=void 0,o}message(t,n,a){const o=new zt(t,n,a);return this.path&&(o.name=this.path+":"+o.name,o.file=this.path),o.fatal=!1,this.messages.push(o),o}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function ph(e,t){if(e&&e.includes(Vn.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Vn.sep+"`")}function mh(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function e0(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function hz(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const pz=(function(e){const a=this.constructor.prototype,o=a[e],s=function(){return o.apply(s,arguments)};return Object.setPrototypeOf(s,a),s}),mz={}.hasOwnProperty;class lm extends pz{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=tz()}copy(){const t=new lm;let n=-1;for(;++n<this.attachers.length;){const a=this.attachers[n];t.use(...a)}return t.data(fh(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(xh("data",this.frozen),this.namespace[t]=n,this):mz.call(this.namespace,t)&&this.namespace[t]||void 0:t?(xh("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...a]=this.attachers[this.freezeIndex];if(a[0]===!1)continue;a[0]===!0&&(a[0]=void 0);const o=n.call(t,...a);typeof o=="function"&&this.transformers.use(o)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=kc(t),a=this.parser||this.Parser;return gh("parse",a),a(String(n),n)}process(t,n){const a=this;return this.freeze(),gh("process",this.parser||this.Parser),yh("process",this.compiler||this.Compiler),n?o(void 0,n):new Promise(o);function o(s,c){const d=kc(t),h=a.parse(d);a.run(h,d,function(m,g,x){if(m||!g||!x)return p(m);const v=g,w=a.stringify(v,x);xz(w)?x.value=w:x.result=w,p(m,x)});function p(m,g){m||!g?c(m):s?s(g):n(void 0,g)}}}processSync(t){let n=!1,a;return this.freeze(),gh("processSync",this.parser||this.Parser),yh("processSync",this.compiler||this.Compiler),this.process(t,o),n0("processSync","process",n),a;function o(s,c){n=!0,Zb(s),a=c}}run(t,n,a){t0(t),this.freeze();const o=this.transformers;return!a&&typeof n=="function"&&(a=n,n=void 0),a?s(void 0,a):new Promise(s);function s(c,d){const h=kc(n);o.run(t,h,p);function p(m,g,x){const v=g||t;m?d(m):c?c(v):a(void 0,v,x)}}}runSync(t,n){let a=!1,o;return this.run(t,n,s),n0("runSync","run",a),o;function s(c,d){Zb(c),o=d,a=!0}}stringify(t,n){this.freeze();const a=kc(n),o=this.compiler||this.Compiler;return yh("stringify",o),t0(t),o(t,a)}use(t,...n){const a=this.attachers,o=this.namespace;if(xh("use",this.frozen),t!=null)if(typeof t=="function")h(t,n);else if(typeof t=="object")Array.isArray(t)?d(t):c(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(p){if(typeof p=="function")h(p,[]);else if(typeof p=="object")if(Array.isArray(p)){const[m,...g]=p;h(m,g)}else c(p);else throw new TypeError("Expected usable value, not `"+p+"`")}function c(p){if(!("plugins"in p)&&!("settings"in p))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");d(p.plugins),p.settings&&(o.settings=fh(!0,o.settings,p.settings))}function d(p){let m=-1;if(p!=null)if(Array.isArray(p))for(;++m<p.length;){const g=p[m];s(g)}else throw new TypeError("Expected a list of plugins, not `"+p+"`")}function h(p,m){let g=-1,x=-1;for(;++g<a.length;)if(a[g][0]===p){x=g;break}if(x===-1)a.push([p,...m]);else if(m.length>0){let[v,...w]=m;const N=a[x][1];wp(N)&&wp(v)&&(v=fh(!0,N,v)),a[x]=[p,v,...w]}}}}const gz=new lm().freeze();function gh(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function yh(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function xh(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function t0(e){if(!wp(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function n0(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function kc(e){return yz(e)?e:new bS(e)}function yz(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function xz(e){return typeof e=="string"||vz(e)}function vz(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const bz="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",i0=[],r0={allowDangerousHtml:!0},wz=/^(https?|ircs?|mailto|xmpp)$/i,Sz=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function cm(e){const t=Nz(e),n=jz(e);return Ez(t.runSync(t.parse(n),n),e)}function Nz(e){const t=e.rehypePlugins||i0,n=e.remarkPlugins||i0,a=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...r0}:r0;return gz().use(rL).use(n).use(ZL,a).use(t)}function jz(e){const t=e.children||"",n=new bS;return typeof t=="string"&&(n.value=t),n}function Ez(e,t){const n=t.allowedElements,a=t.allowElement,o=t.components,s=t.disallowedElements,c=t.skipHtml,d=t.unwrapDisallowed,h=t.urlTransform||kz;for(const m of Sz)Object.hasOwn(t,m.from)&&(""+m.from+(m.to?"use `"+m.to+"` instead":"remove it")+bz+m.id,void 0);return sm(e,p),H_(e,{Fragment:u.Fragment,components:o,ignoreInvalidStyle:!0,jsx:u.jsx,jsxs:u.jsxs,passKeys:!0,passNode:!0});function p(m,g,x){if(m.type==="raw"&&x&&typeof g=="number")return c?x.children.splice(g,1):x.children[g]={type:"text",value:m.value},g;if(m.type==="element"){let v;for(v in lh)if(Object.hasOwn(lh,v)&&Object.hasOwn(m.properties,v)){const w=m.properties[v],N=lh[v];(N===null||N.includes(m.tagName))&&(m.properties[v]=h(String(w||""),v,m))}}if(m.type==="element"){let v=n?!n.includes(m.tagName):s?s.includes(m.tagName):!1;if(!v&&a&&typeof g=="number"&&(v=!a(m,g,x)),v&&x&&typeof g=="number")return d&&m.children?x.children.splice(g,1,...m.children):x.children.splice(g,1),g}}}function kz(e){const t=e.indexOf(":"),n=e.indexOf("?"),a=e.indexOf("#"),o=e.indexOf("/");return t===-1||o!==-1&&t>o||n!==-1&&t>n||a!==-1&&t>a||wz.test(e.slice(0,t))?e:""}function a0(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let a=0,o=n.indexOf(t);for(;o!==-1;)a++,o=n.indexOf(t,o+t.length);return a}function Cz(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function Az(e,t,n){const o=wu((n||{}).ignore||[]),s=Tz(t);let c=-1;for(;++c<s.length;)vS(e,"text",d);function d(p,m){let g=-1,x;for(;++g<m.length;){const v=m[g],w=x?x.children:void 0;if(o(v,w?w.indexOf(v):void 0,x))return;x=v}if(x)return h(p,m)}function h(p,m){const g=m[m.length-1],x=s[c][0],v=s[c][1];let w=0;const j=g.children.indexOf(p);let S=!1,k=[];x.lastIndex=0;let E=x.exec(p.value);for(;E;){const T=E.index,_={index:E.index,input:E.input,stack:[...m,p]};let A=v(...E,_);if(typeof A=="string"&&(A=A.length>0?{type:"text",value:A}:void 0),A===!1?x.lastIndex=T+1:(w!==T&&k.push({type:"text",value:p.value.slice(w,T)}),Array.isArray(A)?k.push(...A):A&&k.push(A),w=T+E[0].length,S=!0),!x.global)break;E=x.exec(p.value)}return S?(w<p.value.length&&k.push({type:"text",value:p.value.slice(w)}),g.children.splice(j,1,...k)):k=[p],j+k.length}}function Tz(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let a=-1;for(;++a<n.length;){const o=n[a];t.push([Mz(o[0]),Dz(o[1])])}return t}function Mz(e){return typeof e=="string"?new RegExp(Cz(e),"g"):e}function Dz(e){return typeof e=="function"?e:function(){return e}}const vh="phrasing",bh=["autolink","link","image","label"];function Oz(){return{transforms:[Pz],enter:{literalAutolink:Rz,literalAutolinkEmail:wh,literalAutolinkHttp:wh,literalAutolinkWww:wh},exit:{literalAutolink:Bz,literalAutolinkEmail:zz,literalAutolinkHttp:Iz,literalAutolinkWww:Lz}}}function _z(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:vh,notInConstruct:bh},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:vh,notInConstruct:bh},{character:":",before:"[ps]",after:"\\/",inConstruct:vh,notInConstruct:bh}]}}function Rz(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function wh(e){this.config.enter.autolinkProtocol.call(this,e)}function Iz(e){this.config.exit.autolinkProtocol.call(this,e)}function Lz(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function zz(e){this.config.exit.autolinkEmail.call(this,e)}function Bz(e){this.exit(e)}function Pz(e){Az(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,$z],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),Hz]],{ignore:["link","linkReference"]})}function $z(e,t,n,a,o){let s="";if(!wS(o)||(/^w/i.test(t)&&(n=t+n,t="",s="http://"),!qz(n)))return!1;const c=Uz(n+a);if(!c[0])return!1;const d={type:"link",title:null,url:s+t+c[0],children:[{type:"text",value:t+c[0]}]};return c[1]?[d,{type:"text",value:c[1]}]:d}function Hz(e,t,n,a){return!wS(a,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function qz(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function Uz(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],a=n.indexOf(")");const o=a0(e,"(");let s=a0(e,")");for(;a!==-1&&o>s;)e+=n.slice(0,a+1),n=n.slice(a+1),a=n.indexOf(")"),s++;return[e,n]}function wS(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||Ur(n)||xu(n))&&(!t||n!==47)}SS.peek=Zz;function Fz(){this.buffer()}function Vz(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function Gz(){this.buffer()}function Wz(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function Yz(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=In(this.sliceSerialize(e)).toLowerCase(),n.label=t}function Xz(e){this.exit(e)}function Qz(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=In(this.sliceSerialize(e)).toLowerCase(),n.label=t}function Jz(e){this.exit(e)}function Zz(){return"["}function SS(e,t,n,a){const o=n.createTracker(a);let s=o.move("[^");const c=n.enter("footnoteReference"),d=n.enter("reference");return s+=o.move(n.safe(n.associationId(e),{after:"]",before:s})),d(),c(),s+=o.move("]"),s}function Kz(){return{enter:{gfmFootnoteCallString:Fz,gfmFootnoteCall:Vz,gfmFootnoteDefinitionLabelString:Gz,gfmFootnoteDefinition:Wz},exit:{gfmFootnoteCallString:Yz,gfmFootnoteCall:Xz,gfmFootnoteDefinitionLabelString:Qz,gfmFootnoteDefinition:Jz}}}function e3(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:SS},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(a,o,s,c){const d=s.createTracker(c);let h=d.move("[^");const p=s.enter("footnoteDefinition"),m=s.enter("label");return h+=d.move(s.safe(s.associationId(a),{before:h,after:"]"})),m(),h+=d.move("]:"),a.children&&a.children.length>0&&(d.shift(4),h+=d.move((t?`
`:" ")+s.indentLines(s.containerFlow(a,d.current()),t?NS:t3))),p(),h}}function t3(e,t,n){return t===0?e:NS(e,t,n)}function NS(e,t,n){return(n?"":"    ")+e}const n3=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];jS.peek=s3;function i3(){return{canContainEols:["delete"],enter:{strikethrough:a3},exit:{strikethrough:o3}}}function r3(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:n3}],handlers:{delete:jS}}}function a3(e){this.enter({type:"delete",children:[]},e)}function o3(e){this.exit(e)}function jS(e,t,n,a){const o=n.createTracker(a),s=n.enter("strikethrough");let c=o.move("~~");return c+=n.containerPhrasing(e,{...o.current(),before:c,after:"~"}),c+=o.move("~~"),s(),c}function s3(){return"~"}function l3(e){return e.length}function c3(e,t){const n=t||{},a=(n.align||[]).concat(),o=n.stringLength||l3,s=[],c=[],d=[],h=[];let p=0,m=-1;for(;++m<e.length;){const N=[],j=[];let S=-1;for(e[m].length>p&&(p=e[m].length);++S<e[m].length;){const k=u3(e[m][S]);if(n.alignDelimiters!==!1){const E=o(k);j[S]=E,(h[S]===void 0||E>h[S])&&(h[S]=E)}N.push(k)}c[m]=N,d[m]=j}let g=-1;if(typeof a=="object"&&"length"in a)for(;++g<p;)s[g]=o0(a[g]);else{const N=o0(a);for(;++g<p;)s[g]=N}g=-1;const x=[],v=[];for(;++g<p;){const N=s[g];let j="",S="";N===99?(j=":",S=":"):N===108?j=":":N===114&&(S=":");let k=n.alignDelimiters===!1?1:Math.max(1,h[g]-j.length-S.length);const E=j+"-".repeat(k)+S;n.alignDelimiters!==!1&&(k=j.length+k+S.length,k>h[g]&&(h[g]=k),v[g]=k),x[g]=E}c.splice(1,0,x),d.splice(1,0,v),m=-1;const w=[];for(;++m<c.length;){const N=c[m],j=d[m];g=-1;const S=[];for(;++g<p;){const k=N[g]||"";let E="",T="";if(n.alignDelimiters!==!1){const _=h[g]-(j[g]||0),A=s[g];A===114?E=" ".repeat(_):A===99?_%2?(E=" ".repeat(_/2+.5),T=" ".repeat(_/2-.5)):(E=" ".repeat(_/2),T=E):T=" ".repeat(_)}n.delimiterStart!==!1&&!g&&S.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&k==="")&&(n.delimiterStart!==!1||g)&&S.push(" "),n.alignDelimiters!==!1&&S.push(E),S.push(k),n.alignDelimiters!==!1&&S.push(T),n.padding!==!1&&S.push(" "),(n.delimiterEnd!==!1||g!==p-1)&&S.push("|")}w.push(n.delimiterEnd===!1?S.join("").replace(/ +$/,""):S.join(""))}return w.join(`
`)}function u3(e){return e==null?"":String(e)}function o0(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function d3(e,t,n,a){const o=n.enter("blockquote"),s=n.createTracker(a);s.move("> "),s.shift(2);const c=n.indentLines(n.containerFlow(e,s.current()),f3);return o(),c}function f3(e,t,n){return">"+(n?"":" ")+e}function h3(e,t){return s0(e,t.inConstruct,!0)&&!s0(e,t.notInConstruct,!1)}function s0(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let a=-1;for(;++a<t.length;)if(e.includes(t[a]))return!0;return!1}function l0(e,t,n,a){let o=-1;for(;++o<n.unsafe.length;)if(n.unsafe[o].character===`
`&&h3(n.stack,n.unsafe[o]))return/[ \t]/.test(a.before)?"":" ";return`\\
`}function p3(e,t){const n=String(e);let a=n.indexOf(t),o=a,s=0,c=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;a!==-1;)a===o?++s>c&&(c=s):s=1,o=a+t.length,a=n.indexOf(t,o);return c}function m3(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function g3(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function y3(e,t,n,a){const o=g3(n),s=e.value||"",c=o==="`"?"GraveAccent":"Tilde";if(m3(e,n)){const g=n.enter("codeIndented"),x=n.indentLines(s,x3);return g(),x}const d=n.createTracker(a),h=o.repeat(Math.max(p3(s,o)+1,3)),p=n.enter("codeFenced");let m=d.move(h);if(e.lang){const g=n.enter(`codeFencedLang${c}`);m+=d.move(n.safe(e.lang,{before:m,after:" ",encode:["`"],...d.current()})),g()}if(e.lang&&e.meta){const g=n.enter(`codeFencedMeta${c}`);m+=d.move(" "),m+=d.move(n.safe(e.meta,{before:m,after:`
`,encode:["`"],...d.current()})),g()}return m+=d.move(`
`),s&&(m+=d.move(s+`
`)),m+=d.move(h),p(),m}function x3(e,t,n){return(n?"":"    ")+e}function um(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function v3(e,t,n,a){const o=um(n),s=o==='"'?"Quote":"Apostrophe",c=n.enter("definition");let d=n.enter("label");const h=n.createTracker(a);let p=h.move("[");return p+=h.move(n.safe(n.associationId(e),{before:p,after:"]",...h.current()})),p+=h.move("]: "),d(),!e.url||/[\0- \u007F]/.test(e.url)?(d=n.enter("destinationLiteral"),p+=h.move("<"),p+=h.move(n.safe(e.url,{before:p,after:">",...h.current()})),p+=h.move(">")):(d=n.enter("destinationRaw"),p+=h.move(n.safe(e.url,{before:p,after:e.title?" ":`
`,...h.current()}))),d(),e.title&&(d=n.enter(`title${s}`),p+=h.move(" "+o),p+=h.move(n.safe(e.title,{before:p,after:o,...h.current()})),p+=h.move(o),d()),c(),p}function b3(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function Cs(e){return"&#x"+e.toString(16).toUpperCase()+";"}function tu(e,t,n){const a=Za(e),o=Za(t);return a===void 0?o===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:o===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:a===1?o===void 0?{inside:!1,outside:!1}:o===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:o===void 0?{inside:!1,outside:!1}:o===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}ES.peek=w3;function ES(e,t,n,a){const o=b3(n),s=n.enter("emphasis"),c=n.createTracker(a),d=c.move(o);let h=c.move(n.containerPhrasing(e,{after:o,before:d,...c.current()}));const p=h.charCodeAt(0),m=tu(a.before.charCodeAt(a.before.length-1),p,o);m.inside&&(h=Cs(p)+h.slice(1));const g=h.charCodeAt(h.length-1),x=tu(a.after.charCodeAt(0),g,o);x.inside&&(h=h.slice(0,-1)+Cs(g));const v=c.move(o);return s(),n.attentionEncodeSurroundingInfo={after:x.outside,before:m.outside},d+h+v}function w3(e,t,n){return n.options.emphasis||"*"}function S3(e,t){let n=!1;return sm(e,function(a){if("value"in a&&/\r?\n|\r/.test(a.value)||a.type==="break")return n=!0,vp}),!!((!e.depth||e.depth<3)&&em(e)&&(t.options.setext||n))}function N3(e,t,n,a){const o=Math.max(Math.min(6,e.depth||1),1),s=n.createTracker(a);if(S3(e,n)){const m=n.enter("headingSetext"),g=n.enter("phrasing"),x=n.containerPhrasing(e,{...s.current(),before:`
`,after:`
`});return g(),m(),x+`
`+(o===1?"=":"-").repeat(x.length-(Math.max(x.lastIndexOf("\r"),x.lastIndexOf(`
`))+1))}const c="#".repeat(o),d=n.enter("headingAtx"),h=n.enter("phrasing");s.move(c+" ");let p=n.containerPhrasing(e,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(p)&&(p=Cs(p.charCodeAt(0))+p.slice(1)),p=p?c+" "+p:c,n.options.closeAtx&&(p+=" "+c),h(),d(),p}kS.peek=j3;function kS(e){return e.value||""}function j3(){return"<"}CS.peek=E3;function CS(e,t,n,a){const o=um(n),s=o==='"'?"Quote":"Apostrophe",c=n.enter("image");let d=n.enter("label");const h=n.createTracker(a);let p=h.move("![");return p+=h.move(n.safe(e.alt,{before:p,after:"]",...h.current()})),p+=h.move("]("),d(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(d=n.enter("destinationLiteral"),p+=h.move("<"),p+=h.move(n.safe(e.url,{before:p,after:">",...h.current()})),p+=h.move(">")):(d=n.enter("destinationRaw"),p+=h.move(n.safe(e.url,{before:p,after:e.title?" ":")",...h.current()}))),d(),e.title&&(d=n.enter(`title${s}`),p+=h.move(" "+o),p+=h.move(n.safe(e.title,{before:p,after:o,...h.current()})),p+=h.move(o),d()),p+=h.move(")"),c(),p}function E3(){return"!"}AS.peek=k3;function AS(e,t,n,a){const o=e.referenceType,s=n.enter("imageReference");let c=n.enter("label");const d=n.createTracker(a);let h=d.move("![");const p=n.safe(e.alt,{before:h,after:"]",...d.current()});h+=d.move(p+"]["),c();const m=n.stack;n.stack=[],c=n.enter("reference");const g=n.safe(n.associationId(e),{before:h,after:"]",...d.current()});return c(),n.stack=m,s(),o==="full"||!p||p!==g?h+=d.move(g+"]"):o==="shortcut"?h=h.slice(0,-1):h+=d.move("]"),h}function k3(){return"!"}TS.peek=C3;function TS(e,t,n){let a=e.value||"",o="`",s=-1;for(;new RegExp("(^|[^`])"+o+"([^`]|$)").test(a);)o+="`";for(/[^ \r\n]/.test(a)&&(/^[ \r\n]/.test(a)&&/[ \r\n]$/.test(a)||/^`|`$/.test(a))&&(a=" "+a+" ");++s<n.unsafe.length;){const c=n.unsafe[s],d=n.compilePattern(c);let h;if(c.atBreak)for(;h=d.exec(a);){let p=h.index;a.charCodeAt(p)===10&&a.charCodeAt(p-1)===13&&p--,a=a.slice(0,p)+" "+a.slice(h.index+1)}}return o+a+o}function C3(){return"`"}function MS(e,t){const n=em(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}DS.peek=A3;function DS(e,t,n,a){const o=um(n),s=o==='"'?"Quote":"Apostrophe",c=n.createTracker(a);let d,h;if(MS(e,n)){const m=n.stack;n.stack=[],d=n.enter("autolink");let g=c.move("<");return g+=c.move(n.containerPhrasing(e,{before:g,after:">",...c.current()})),g+=c.move(">"),d(),n.stack=m,g}d=n.enter("link"),h=n.enter("label");let p=c.move("[");return p+=c.move(n.containerPhrasing(e,{before:p,after:"](",...c.current()})),p+=c.move("]("),h(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(h=n.enter("destinationLiteral"),p+=c.move("<"),p+=c.move(n.safe(e.url,{before:p,after:">",...c.current()})),p+=c.move(">")):(h=n.enter("destinationRaw"),p+=c.move(n.safe(e.url,{before:p,after:e.title?" ":")",...c.current()}))),h(),e.title&&(h=n.enter(`title${s}`),p+=c.move(" "+o),p+=c.move(n.safe(e.title,{before:p,after:o,...c.current()})),p+=c.move(o),h()),p+=c.move(")"),d(),p}function A3(e,t,n){return MS(e,n)?"<":"["}OS.peek=T3;function OS(e,t,n,a){const o=e.referenceType,s=n.enter("linkReference");let c=n.enter("label");const d=n.createTracker(a);let h=d.move("[");const p=n.containerPhrasing(e,{before:h,after:"]",...d.current()});h+=d.move(p+"]["),c();const m=n.stack;n.stack=[],c=n.enter("reference");const g=n.safe(n.associationId(e),{before:h,after:"]",...d.current()});return c(),n.stack=m,s(),o==="full"||!p||p!==g?h+=d.move(g+"]"):o==="shortcut"?h=h.slice(0,-1):h+=d.move("]"),h}function T3(){return"["}function dm(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function M3(e){const t=dm(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function D3(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function _S(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function O3(e,t,n,a){const o=n.enter("list"),s=n.bulletCurrent;let c=e.ordered?D3(n):dm(n);const d=e.ordered?c==="."?")":".":M3(n);let h=t&&n.bulletLastUsed?c===n.bulletLastUsed:!1;if(!e.ordered){const m=e.children?e.children[0]:void 0;if((c==="*"||c==="-")&&m&&(!m.children||!m.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(h=!0),_S(n)===c&&m){let g=-1;for(;++g<e.children.length;){const x=e.children[g];if(x&&x.type==="listItem"&&x.children&&x.children[0]&&x.children[0].type==="thematicBreak"){h=!0;break}}}}h&&(c=d),n.bulletCurrent=c;const p=n.containerFlow(e,a);return n.bulletLastUsed=c,n.bulletCurrent=s,o(),p}function _3(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function R3(e,t,n,a){const o=_3(n);let s=n.bulletCurrent||dm(n);t&&t.type==="list"&&t.ordered&&(s=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+s);let c=s.length+1;(o==="tab"||o==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(c=Math.ceil(c/4)*4);const d=n.createTracker(a);d.move(s+" ".repeat(c-s.length)),d.shift(c);const h=n.enter("listItem"),p=n.indentLines(n.containerFlow(e,d.current()),m);return h(),p;function m(g,x,v){return x?(v?"":" ".repeat(c))+g:(v?s:s+" ".repeat(c-s.length))+g}}function I3(e,t,n,a){const o=n.enter("paragraph"),s=n.enter("phrasing"),c=n.containerPhrasing(e,a);return s(),o(),c}const L3=wu(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function z3(e,t,n,a){return(e.children.some(function(c){return L3(c)})?n.containerPhrasing:n.containerFlow).call(n,e,a)}function B3(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}RS.peek=P3;function RS(e,t,n,a){const o=B3(n),s=n.enter("strong"),c=n.createTracker(a),d=c.move(o+o);let h=c.move(n.containerPhrasing(e,{after:o,before:d,...c.current()}));const p=h.charCodeAt(0),m=tu(a.before.charCodeAt(a.before.length-1),p,o);m.inside&&(h=Cs(p)+h.slice(1));const g=h.charCodeAt(h.length-1),x=tu(a.after.charCodeAt(0),g,o);x.inside&&(h=h.slice(0,-1)+Cs(g));const v=c.move(o+o);return s(),n.attentionEncodeSurroundingInfo={after:x.outside,before:m.outside},d+h+v}function P3(e,t,n){return n.options.strong||"*"}function $3(e,t,n,a){return n.safe(e.value,a)}function H3(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function q3(e,t,n){const a=(_S(n)+(n.options.ruleSpaces?" ":"")).repeat(H3(n));return n.options.ruleSpaces?a.slice(0,-1):a}const IS={blockquote:d3,break:l0,code:y3,definition:v3,emphasis:ES,hardBreak:l0,heading:N3,html:kS,image:CS,imageReference:AS,inlineCode:TS,link:DS,linkReference:OS,list:O3,listItem:R3,paragraph:I3,root:z3,strong:RS,text:$3,thematicBreak:q3};function U3(){return{enter:{table:F3,tableData:c0,tableHeader:c0,tableRow:G3},exit:{codeText:W3,table:V3,tableData:Sh,tableHeader:Sh,tableRow:Sh}}}function F3(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function V3(e){this.exit(e),this.data.inTable=void 0}function G3(e){this.enter({type:"tableRow",children:[]},e)}function Sh(e){this.exit(e)}function c0(e){this.enter({type:"tableCell",children:[]},e)}function W3(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,Y3));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function Y3(e,t){return t==="|"?t:e}function X3(e){const t=e||{},n=t.tableCellPadding,a=t.tablePipeAlign,o=t.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:x,table:c,tableCell:h,tableRow:d}};function c(v,w,N,j){return p(m(v,N,j),v.align)}function d(v,w,N,j){const S=g(v,N,j),k=p([S]);return k.slice(0,k.indexOf(`
`))}function h(v,w,N,j){const S=N.enter("tableCell"),k=N.enter("phrasing"),E=N.containerPhrasing(v,{...j,before:s,after:s});return k(),S(),E}function p(v,w){return c3(v,{align:w,alignDelimiters:a,padding:n,stringLength:o})}function m(v,w,N){const j=v.children;let S=-1;const k=[],E=w.enter("table");for(;++S<j.length;)k[S]=g(j[S],w,N);return E(),k}function g(v,w,N){const j=v.children;let S=-1;const k=[],E=w.enter("tableRow");for(;++S<j.length;)k[S]=h(j[S],v,w,N);return E(),k}function x(v,w,N){let j=IS.inlineCode(v,w,N);return N.stack.includes("tableCell")&&(j=j.replace(/\|/g,"\\$&")),j}}function Q3(){return{exit:{taskListCheckValueChecked:u0,taskListCheckValueUnchecked:u0,paragraph:Z3}}}function J3(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:K3}}}function u0(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function Z3(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const a=n.children[0];if(a&&a.type==="text"){const o=t.children;let s=-1,c;for(;++s<o.length;){const d=o[s];if(d.type==="paragraph"){c=d;break}}c===n&&(a.value=a.value.slice(1),a.value.length===0?n.children.shift():n.position&&a.position&&typeof a.position.start.offset=="number"&&(a.position.start.column++,a.position.start.offset++,n.position.start=Object.assign({},a.position.start)))}}this.exit(e)}function K3(e,t,n,a){const o=e.children[0],s=typeof e.checked=="boolean"&&o&&o.type==="paragraph",c="["+(e.checked?"x":" ")+"] ",d=n.createTracker(a);s&&d.move(c);let h=IS.listItem(e,t,n,{...a,...d.current()});return s&&(h=h.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,p)),h;function p(m){return m+c}}function e4(){return[Oz(),Kz(),i3(),U3(),Q3()]}function t4(e){return{extensions:[_z(),e3(e),r3(),X3(e),J3()]}}const n4={tokenize:l4,partial:!0},LS={tokenize:c4,partial:!0},zS={tokenize:u4,partial:!0},BS={tokenize:d4,partial:!0},i4={tokenize:f4,partial:!0},PS={name:"wwwAutolink",tokenize:o4,previous:HS},$S={name:"protocolAutolink",tokenize:s4,previous:qS},Ci={name:"emailAutolink",tokenize:a4,previous:US},Jn={};function r4(){return{text:Jn}}let _r=48;for(;_r<123;)Jn[_r]=Ci,_r++,_r===58?_r=65:_r===91&&(_r=97);Jn[43]=Ci;Jn[45]=Ci;Jn[46]=Ci;Jn[95]=Ci;Jn[72]=[Ci,$S];Jn[104]=[Ci,$S];Jn[87]=[Ci,PS];Jn[119]=[Ci,PS];function a4(e,t,n){const a=this;let o,s;return c;function c(g){return!Np(g)||!US.call(a,a.previous)||fm(a.events)?n(g):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),d(g))}function d(g){return Np(g)?(e.consume(g),d):g===64?(e.consume(g),h):n(g)}function h(g){return g===46?e.check(i4,m,p)(g):g===45||g===95||Lt(g)?(s=!0,e.consume(g),h):m(g)}function p(g){return e.consume(g),o=!0,h}function m(g){return s&&o&&$t(a.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(g)):n(g)}}function o4(e,t,n){const a=this;return o;function o(c){return c!==87&&c!==119||!HS.call(a,a.previous)||fm(a.events)?n(c):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(n4,e.attempt(LS,e.attempt(zS,s),n),n)(c))}function s(c){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(c)}}function s4(e,t,n){const a=this;let o="",s=!1;return c;function c(g){return(g===72||g===104)&&qS.call(a,a.previous)&&!fm(a.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),o+=String.fromCodePoint(g),e.consume(g),d):n(g)}function d(g){if($t(g)&&o.length<5)return o+=String.fromCodePoint(g),e.consume(g),d;if(g===58){const x=o.toLowerCase();if(x==="http"||x==="https")return e.consume(g),h}return n(g)}function h(g){return g===47?(e.consume(g),s?p:(s=!0,h)):n(g)}function p(g){return g===null||Zc(g)||nt(g)||Ur(g)||xu(g)?n(g):e.attempt(LS,e.attempt(zS,m),n)(g)}function m(g){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(g)}}function l4(e,t,n){let a=0;return o;function o(c){return(c===87||c===119)&&a<3?(a++,e.consume(c),o):c===46&&a===3?(e.consume(c),s):n(c)}function s(c){return c===null?n(c):t(c)}}function c4(e,t,n){let a,o,s;return c;function c(p){return p===46||p===95?e.check(BS,h,d)(p):p===null||nt(p)||Ur(p)||p!==45&&xu(p)?h(p):(s=!0,e.consume(p),c)}function d(p){return p===95?a=!0:(o=a,a=void 0),e.consume(p),c}function h(p){return o||a||!s?n(p):t(p)}}function u4(e,t){let n=0,a=0;return o;function o(c){return c===40?(n++,e.consume(c),o):c===41&&a<n?s(c):c===33||c===34||c===38||c===39||c===41||c===42||c===44||c===46||c===58||c===59||c===60||c===63||c===93||c===95||c===126?e.check(BS,t,s)(c):c===null||nt(c)||Ur(c)?t(c):(e.consume(c),o)}function s(c){return c===41&&a++,e.consume(c),o}}function d4(e,t,n){return a;function a(d){return d===33||d===34||d===39||d===41||d===42||d===44||d===46||d===58||d===59||d===63||d===95||d===126?(e.consume(d),a):d===38?(e.consume(d),s):d===93?(e.consume(d),o):d===60||d===null||nt(d)||Ur(d)?t(d):n(d)}function o(d){return d===null||d===40||d===91||nt(d)||Ur(d)?t(d):a(d)}function s(d){return $t(d)?c(d):n(d)}function c(d){return d===59?(e.consume(d),a):$t(d)?(e.consume(d),c):n(d)}}function f4(e,t,n){return a;function a(s){return e.consume(s),o}function o(s){return Lt(s)?n(s):t(s)}}function HS(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||nt(e)}function qS(e){return!$t(e)}function US(e){return!(e===47||Np(e))}function Np(e){return e===43||e===45||e===46||e===95||Lt(e)}function fm(e){let t=e.length,n=!1;for(;t--;){const a=e[t][1];if((a.type==="labelLink"||a.type==="labelImage")&&!a._balanced){n=!0;break}if(a._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const h4={tokenize:w4,partial:!0};function p4(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:x4,continuation:{tokenize:v4},exit:b4}},text:{91:{name:"gfmFootnoteCall",tokenize:y4},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:m4,resolveTo:g4}}}}function m4(e,t,n){const a=this;let o=a.events.length;const s=a.parser.gfmFootnotes||(a.parser.gfmFootnotes=[]);let c;for(;o--;){const h=a.events[o][1];if(h.type==="labelImage"){c=h;break}if(h.type==="gfmFootnoteCall"||h.type==="labelLink"||h.type==="label"||h.type==="image"||h.type==="link")break}return d;function d(h){if(!c||!c._balanced)return n(h);const p=In(a.sliceSerialize({start:c.end,end:a.now()}));return p.codePointAt(0)!==94||!s.includes(p.slice(1))?n(h):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(h),e.exit("gfmFootnoteCallLabelMarker"),t(h))}}function g4(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const a={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},o={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};o.end.column++,o.end.offset++,o.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},o.end),end:Object.assign({},e[e.length-1][1].start)},c={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},d=[e[n+1],e[n+2],["enter",a,t],e[n+3],e[n+4],["enter",o,t],["exit",o,t],["enter",s,t],["enter",c,t],["exit",c,t],["exit",s,t],e[e.length-2],e[e.length-1],["exit",a,t]];return e.splice(n,e.length-n+1,...d),e}function y4(e,t,n){const a=this,o=a.parser.gfmFootnotes||(a.parser.gfmFootnotes=[]);let s=0,c;return d;function d(g){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(g),e.exit("gfmFootnoteCallLabelMarker"),h}function h(g){return g!==94?n(g):(e.enter("gfmFootnoteCallMarker"),e.consume(g),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",p)}function p(g){if(s>999||g===93&&!c||g===null||g===91||nt(g))return n(g);if(g===93){e.exit("chunkString");const x=e.exit("gfmFootnoteCallString");return o.includes(In(a.sliceSerialize(x)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(g),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(g)}return nt(g)||(c=!0),s++,e.consume(g),g===92?m:p}function m(g){return g===91||g===92||g===93?(e.consume(g),s++,p):p(g)}}function x4(e,t,n){const a=this,o=a.parser.gfmFootnotes||(a.parser.gfmFootnotes=[]);let s,c=0,d;return h;function h(w){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(w),e.exit("gfmFootnoteDefinitionLabelMarker"),p}function p(w){return w===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(w),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",m):n(w)}function m(w){if(c>999||w===93&&!d||w===null||w===91||nt(w))return n(w);if(w===93){e.exit("chunkString");const N=e.exit("gfmFootnoteDefinitionLabelString");return s=In(a.sliceSerialize(N)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(w),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),x}return nt(w)||(d=!0),c++,e.consume(w),w===92?g:m}function g(w){return w===91||w===92||w===93?(e.consume(w),c++,m):m(w)}function x(w){return w===58?(e.enter("definitionMarker"),e.consume(w),e.exit("definitionMarker"),o.includes(s)||o.push(s),qe(e,v,"gfmFootnoteDefinitionWhitespace")):n(w)}function v(w){return t(w)}}function v4(e,t,n){return e.check(Ps,t,e.attempt(h4,t,n))}function b4(e){e.exit("gfmFootnoteDefinition")}function w4(e,t,n){const a=this;return qe(e,o,"gfmFootnoteDefinitionIndent",5);function o(s){const c=a.events[a.events.length-1];return c&&c[1].type==="gfmFootnoteDefinitionIndent"&&c[2].sliceSerialize(c[1],!0).length===4?t(s):n(s)}}function S4(e){let n=(e||{}).singleTilde;const a={name:"strikethrough",tokenize:s,resolveAll:o};return n==null&&(n=!0),{text:{126:a},insideSpan:{null:[a]},attentionMarkers:{null:[126]}};function o(c,d){let h=-1;for(;++h<c.length;)if(c[h][0]==="enter"&&c[h][1].type==="strikethroughSequenceTemporary"&&c[h][1]._close){let p=h;for(;p--;)if(c[p][0]==="exit"&&c[p][1].type==="strikethroughSequenceTemporary"&&c[p][1]._open&&c[h][1].end.offset-c[h][1].start.offset===c[p][1].end.offset-c[p][1].start.offset){c[h][1].type="strikethroughSequence",c[p][1].type="strikethroughSequence";const m={type:"strikethrough",start:Object.assign({},c[p][1].start),end:Object.assign({},c[h][1].end)},g={type:"strikethroughText",start:Object.assign({},c[p][1].end),end:Object.assign({},c[h][1].start)},x=[["enter",m,d],["enter",c[p][1],d],["exit",c[p][1],d],["enter",g,d]],v=d.parser.constructs.insideSpan.null;v&&fn(x,x.length,0,vu(v,c.slice(p+1,h),d)),fn(x,x.length,0,[["exit",g,d],["enter",c[h][1],d],["exit",c[h][1],d],["exit",m,d]]),fn(c,p-1,h-p+3,x),h=p+x.length-2;break}}for(h=-1;++h<c.length;)c[h][1].type==="strikethroughSequenceTemporary"&&(c[h][1].type="data");return c}function s(c,d,h){const p=this.previous,m=this.events;let g=0;return x;function x(w){return p===126&&m[m.length-1][1].type!=="characterEscape"?h(w):(c.enter("strikethroughSequenceTemporary"),v(w))}function v(w){const N=Za(p);if(w===126)return g>1?h(w):(c.consume(w),g++,v);if(g<2&&!n)return h(w);const j=c.exit("strikethroughSequenceTemporary"),S=Za(w);return j._open=!S||S===2&&!!N,j._close=!N||N===2&&!!S,d(w)}}}class N4{constructor(){this.map=[]}add(t,n,a){j4(this,t,n,a)}consume(t){if(this.map.sort(function(s,c){return s[0]-c[0]}),this.map.length===0)return;let n=this.map.length;const a=[];for(;n>0;)n-=1,a.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];a.push(t.slice()),t.length=0;let o=a.pop();for(;o;){for(const s of o)t.push(s);o=a.pop()}this.map.length=0}}function j4(e,t,n,a){let o=0;if(!(n===0&&a.length===0)){for(;o<e.map.length;){if(e.map[o][0]===t){e.map[o][1]+=n,e.map[o][2].push(...a);return}o+=1}e.map.push([t,n,a])}}function E4(e,t){let n=!1;const a=[];for(;t<e.length;){const o=e[t];if(n){if(o[0]==="enter")o[1].type==="tableContent"&&a.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(o[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const s=a.length-1;a[s]=a[s]==="left"?"center":"right"}}else if(o[1].type==="tableDelimiterRow")break}else o[0]==="enter"&&o[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return a}function k4(){return{flow:{null:{name:"table",tokenize:C4,resolveAll:A4}}}}function C4(e,t,n){const a=this;let o=0,s=0,c;return d;function d(L){let $=a.events.length-1;for(;$>-1;){const D=a.events[$][1].type;if(D==="lineEnding"||D==="linePrefix")$--;else break}const H=$>-1?a.events[$][1].type:null,Q=H==="tableHead"||H==="tableRow"?A:h;return Q===A&&a.parser.lazy[a.now().line]?n(L):Q(L)}function h(L){return e.enter("tableHead"),e.enter("tableRow"),p(L)}function p(L){return L===124||(c=!0,s+=1),m(L)}function m(L){return L===null?n(L):je(L)?s>1?(s=0,a.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(L),e.exit("lineEnding"),v):n(L):Ie(L)?qe(e,m,"whitespace")(L):(s+=1,c&&(c=!1,o+=1),L===124?(e.enter("tableCellDivider"),e.consume(L),e.exit("tableCellDivider"),c=!0,m):(e.enter("data"),g(L)))}function g(L){return L===null||L===124||nt(L)?(e.exit("data"),m(L)):(e.consume(L),L===92?x:g)}function x(L){return L===92||L===124?(e.consume(L),g):g(L)}function v(L){return a.interrupt=!1,a.parser.lazy[a.now().line]?n(L):(e.enter("tableDelimiterRow"),c=!1,Ie(L)?qe(e,w,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(L):w(L))}function w(L){return L===45||L===58?j(L):L===124?(c=!0,e.enter("tableCellDivider"),e.consume(L),e.exit("tableCellDivider"),N):_(L)}function N(L){return Ie(L)?qe(e,j,"whitespace")(L):j(L)}function j(L){return L===58?(s+=1,c=!0,e.enter("tableDelimiterMarker"),e.consume(L),e.exit("tableDelimiterMarker"),S):L===45?(s+=1,S(L)):L===null||je(L)?T(L):_(L)}function S(L){return L===45?(e.enter("tableDelimiterFiller"),k(L)):_(L)}function k(L){return L===45?(e.consume(L),k):L===58?(c=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(L),e.exit("tableDelimiterMarker"),E):(e.exit("tableDelimiterFiller"),E(L))}function E(L){return Ie(L)?qe(e,T,"whitespace")(L):T(L)}function T(L){return L===124?w(L):L===null||je(L)?!c||o!==s?_(L):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(L)):_(L)}function _(L){return n(L)}function A(L){return e.enter("tableRow"),z(L)}function z(L){return L===124?(e.enter("tableCellDivider"),e.consume(L),e.exit("tableCellDivider"),z):L===null||je(L)?(e.exit("tableRow"),t(L)):Ie(L)?qe(e,z,"whitespace")(L):(e.enter("data"),G(L))}function G(L){return L===null||L===124||nt(L)?(e.exit("data"),z(L)):(e.consume(L),L===92?F:G)}function F(L){return L===92||L===124?(e.consume(L),G):G(L)}}function A4(e,t){let n=-1,a=!0,o=0,s=[0,0,0,0],c=[0,0,0,0],d=!1,h=0,p,m,g;const x=new N4;for(;++n<e.length;){const v=e[n],w=v[1];v[0]==="enter"?w.type==="tableHead"?(d=!1,h!==0&&(d0(x,t,h,p,m),m=void 0,h=0),p={type:"table",start:Object.assign({},w.start),end:Object.assign({},w.end)},x.add(n,0,[["enter",p,t]])):w.type==="tableRow"||w.type==="tableDelimiterRow"?(a=!0,g=void 0,s=[0,0,0,0],c=[0,n+1,0,0],d&&(d=!1,m={type:"tableBody",start:Object.assign({},w.start),end:Object.assign({},w.end)},x.add(n,0,[["enter",m,t]])),o=w.type==="tableDelimiterRow"?2:m?3:1):o&&(w.type==="data"||w.type==="tableDelimiterMarker"||w.type==="tableDelimiterFiller")?(a=!1,c[2]===0&&(s[1]!==0&&(c[0]=c[1],g=Cc(x,t,s,o,void 0,g),s=[0,0,0,0]),c[2]=n)):w.type==="tableCellDivider"&&(a?a=!1:(s[1]!==0&&(c[0]=c[1],g=Cc(x,t,s,o,void 0,g)),s=c,c=[s[1],n,0,0])):w.type==="tableHead"?(d=!0,h=n):w.type==="tableRow"||w.type==="tableDelimiterRow"?(h=n,s[1]!==0?(c[0]=c[1],g=Cc(x,t,s,o,n,g)):c[1]!==0&&(g=Cc(x,t,c,o,n,g)),o=0):o&&(w.type==="data"||w.type==="tableDelimiterMarker"||w.type==="tableDelimiterFiller")&&(c[3]=n)}for(h!==0&&d0(x,t,h,p,m),x.consume(t.events),n=-1;++n<t.events.length;){const v=t.events[n];v[0]==="enter"&&v[1].type==="table"&&(v[1]._align=E4(t.events,n))}return e}function Cc(e,t,n,a,o,s){const c=a===1?"tableHeader":a===2?"tableDelimiter":"tableData",d="tableContent";n[0]!==0&&(s.end=Object.assign({},La(t.events,n[0])),e.add(n[0],0,[["exit",s,t]]));const h=La(t.events,n[1]);if(s={type:c,start:Object.assign({},h),end:Object.assign({},h)},e.add(n[1],0,[["enter",s,t]]),n[2]!==0){const p=La(t.events,n[2]),m=La(t.events,n[3]),g={type:d,start:Object.assign({},p),end:Object.assign({},m)};if(e.add(n[2],0,[["enter",g,t]]),a!==2){const x=t.events[n[2]],v=t.events[n[3]];if(x[1].end=Object.assign({},v[1].end),x[1].type="chunkText",x[1].contentType="text",n[3]>n[2]+1){const w=n[2]+1,N=n[3]-n[2]-1;e.add(w,N,[])}}e.add(n[3]+1,0,[["exit",g,t]])}return o!==void 0&&(s.end=Object.assign({},La(t.events,o)),e.add(o,0,[["exit",s,t]]),s=void 0),s}function d0(e,t,n,a,o){const s=[],c=La(t.events,n);o&&(o.end=Object.assign({},c),s.push(["exit",o,t])),a.end=Object.assign({},c),s.push(["exit",a,t]),e.add(n+1,0,s)}function La(e,t){const n=e[t],a=n[0]==="enter"?"start":"end";return n[1][a]}const T4={name:"tasklistCheck",tokenize:D4};function M4(){return{text:{91:T4}}}function D4(e,t,n){const a=this;return o;function o(h){return a.previous!==null||!a._gfmTasklistFirstContentOfListItem?n(h):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(h),e.exit("taskListCheckMarker"),s)}function s(h){return nt(h)?(e.enter("taskListCheckValueUnchecked"),e.consume(h),e.exit("taskListCheckValueUnchecked"),c):h===88||h===120?(e.enter("taskListCheckValueChecked"),e.consume(h),e.exit("taskListCheckValueChecked"),c):n(h)}function c(h){return h===93?(e.enter("taskListCheckMarker"),e.consume(h),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),d):n(h)}function d(h){return je(h)?t(h):Ie(h)?e.check({tokenize:O4},t,n)(h):n(h)}}function O4(e,t,n){return qe(e,a,"whitespace");function a(o){return o===null?n(o):t(o)}}function _4(e){return eS([r4(),p4(),S4(e),k4(),M4()])}const R4={};function FS(e){const t=this,n=e||R4,a=t.data(),o=a.micromarkExtensions||(a.micromarkExtensions=[]),s=a.fromMarkdownExtensions||(a.fromMarkdownExtensions=[]),c=a.toMarkdownExtensions||(a.toMarkdownExtensions=[]);o.push(_4(n)),s.push(e4()),c.push(t4(n))}function I4({content:e,className:t=""}){return e?u.jsx("div",{className:`markdown-content ${t}`,children:u.jsx(cm,{remarkPlugins:[FS],children:e})}):null}const L4=M.memo(I4);function z4({data:e}){const t=()=>{switch(e.outputType){case"file":return" File";case"notification":return" Notify";case"artifact":return" Artifact";default:return" Console"}},n=M.useMemo(()=>{const a=e.lastOutput;if(!a)return null;if(typeof a=="object"&&a!==null)return a.type==="audio"||a.mimeType?.startsWith("audio/")?u.jsx(wb,{data:a,artifactId:a.artifactId}):a.type==="image"||a.mimeType?.startsWith("image/")?u.jsx(Sb,{data:a,artifactId:a.artifactId}):u.jsxs("div",{className:"output-preview-json",children:[u.jsx("pre",{children:JSON.stringify(a,null,2).slice(0,200)}),JSON.stringify(a).length>200&&u.jsx("span",{className:"preview-more",children:"...more"})]});if(typeof a=="string"){const o=P1(a);return o.isDataUri&&o.mimeType?.startsWith("audio/")?u.jsx(wb,{data:{url:a}}):o.isDataUri&&o.mimeType?.startsWith("image/")?u.jsx(Sb,{data:{url:a}}):a.includes("#")||a.includes("**")||a.includes("```")||a.includes("- ")?u.jsx(L4,{content:a}):u.jsxs("div",{className:"output-preview-text",children:[a.slice(0,300),a.length>300&&"..."]})}return null},[e.lastOutput]);return u.jsx(lt,{type:"output",data:e,inputs:1,outputs:0,children:u.jsxs("div",{className:"output-node-body",children:[u.jsx("div",{className:"output-type-badge",children:t()}),n&&u.jsx("div",{className:"output-preview",children:n})]})})}const B4=M.memo(z4),f0=e=>Symbol.iterator in e,h0=e=>"entries"in e,p0=(e,t)=>{const n=e instanceof Map?e:new Map(e.entries()),a=t instanceof Map?t:new Map(t.entries());if(n.size!==a.size)return!1;for(const[o,s]of n)if(!a.has(o)||!Object.is(s,a.get(o)))return!1;return!0},P4=(e,t)=>{const n=e[Symbol.iterator](),a=t[Symbol.iterator]();let o=n.next(),s=a.next();for(;!o.done&&!s.done;){if(!Object.is(o.value,s.value))return!1;o=n.next(),s=a.next()}return!!o.done&&!!s.done};function $4(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null||Object.getPrototypeOf(e)!==Object.getPrototypeOf(t)?!1:f0(e)&&f0(t)?h0(e)&&h0(t)?p0(e,t):P4(e,t):p0({entries:()=>Object.entries(e)},{entries:()=>Object.entries(t)})}function H4(e){const t=jn.useRef(void 0);return n=>{const a=e(n);return $4(t.current,a)?t.current:t.current=a}}var Bc={exports:{}},q4=Bc.exports,m0;function U4(){return m0||(m0=1,(function(e){(function(){var t,n,a,o,s,c,d,h,p,m,g,x,v,w,N;a=Math.floor,m=Math.min,n=function(j,S){return j<S?-1:j>S?1:0},p=function(j,S,k,E,T){var _;if(k==null&&(k=0),T==null&&(T=n),k<0)throw new Error("lo must be non-negative");for(E==null&&(E=j.length);k<E;)_=a((k+E)/2),T(S,j[_])<0?E=_:k=_+1;return[].splice.apply(j,[k,k-k].concat(S)),S},c=function(j,S,k){return k==null&&(k=n),j.push(S),w(j,0,j.length-1,k)},s=function(j,S){var k,E;return S==null&&(S=n),k=j.pop(),j.length?(E=j[0],j[0]=k,N(j,0,S)):E=k,E},h=function(j,S,k){var E;return k==null&&(k=n),E=j[0],j[0]=S,N(j,0,k),E},d=function(j,S,k){var E;return k==null&&(k=n),j.length&&k(j[0],S)<0&&(E=[j[0],S],S=E[0],j[0]=E[1],N(j,0,k)),S},o=function(j,S){var k,E,T,_,A,z;for(S==null&&(S=n),_=(function(){z=[];for(var G=0,F=a(j.length/2);0<=F?G<F:G>F;0<=F?G++:G--)z.push(G);return z}).apply(this).reverse(),A=[],E=0,T=_.length;E<T;E++)k=_[E],A.push(N(j,k,S));return A},v=function(j,S,k){var E;if(k==null&&(k=n),E=j.indexOf(S),E!==-1)return w(j,0,E,k),N(j,E,k)},g=function(j,S,k){var E,T,_,A,z;if(k==null&&(k=n),T=j.slice(0,S),!T.length)return T;for(o(T,k),z=j.slice(S),_=0,A=z.length;_<A;_++)E=z[_],d(T,E,k);return T.sort(k).reverse()},x=function(j,S,k){var E,T,_,A,z,G,F,L,$;if(k==null&&(k=n),S*10<=j.length){if(_=j.slice(0,S).sort(k),!_.length)return _;for(T=_[_.length-1],F=j.slice(S),A=0,G=F.length;A<G;A++)E=F[A],k(E,T)<0&&(p(_,E,0,null,k),_.pop(),T=_[_.length-1]);return _}for(o(j,k),$=[],z=0,L=m(S,j.length);0<=L?z<L:z>L;0<=L?++z:--z)$.push(s(j,k));return $},w=function(j,S,k,E){var T,_,A;for(E==null&&(E=n),T=j[k];k>S;){if(A=k-1>>1,_=j[A],E(T,_)<0){j[k]=_,k=A;continue}break}return j[k]=T},N=function(j,S,k){var E,T,_,A,z;for(k==null&&(k=n),T=j.length,z=S,_=j[S],E=2*S+1;E<T;)A=E+1,A<T&&!(k(j[E],j[A])<0)&&(E=A),j[S]=j[E],S=E,E=2*S+1;return j[S]=_,w(j,z,S,k)},t=(function(){j.push=c,j.pop=s,j.replace=h,j.pushpop=d,j.heapify=o,j.updateItem=v,j.nlargest=g,j.nsmallest=x;function j(S){this.cmp=S??n,this.nodes=[]}return j.prototype.push=function(S){return c(this.nodes,S,this.cmp)},j.prototype.pop=function(){return s(this.nodes,this.cmp)},j.prototype.peek=function(){return this.nodes[0]},j.prototype.contains=function(S){return this.nodes.indexOf(S)!==-1},j.prototype.replace=function(S){return h(this.nodes,S,this.cmp)},j.prototype.pushpop=function(S){return d(this.nodes,S,this.cmp)},j.prototype.heapify=function(){return o(this.nodes,this.cmp)},j.prototype.updateItem=function(S){return v(this.nodes,S,this.cmp)},j.prototype.clear=function(){return this.nodes=[]},j.prototype.empty=function(){return this.nodes.length===0},j.prototype.size=function(){return this.nodes.length},j.prototype.clone=function(){var S;return S=new j,S.nodes=this.nodes.slice(0),S},j.prototype.toArray=function(){return this.nodes.slice(0)},j.prototype.insert=j.prototype.push,j.prototype.top=j.prototype.peek,j.prototype.front=j.prototype.peek,j.prototype.has=j.prototype.contains,j.prototype.copy=j.prototype.clone,j})(),e!==null&&e.exports?e.exports=t:window.Heap=t}).call(q4)})(Bc)),Bc.exports}var Nh,g0;function Nu(){return g0||(g0=1,Nh=U4()),Nh}var jh,y0;function hm(){if(y0)return jh;y0=1;function e(t,n,a){this.x=t,this.y=n,this.walkable=a===void 0?!0:a}return jh=e,jh}var Eh,x0;function pn(){if(x0)return Eh;x0=1;var e={Always:1,Never:2,IfAtMostOneObstacle:3,OnlyWhenNoObstacles:4};return Eh=e,Eh}var kh,v0;function F4(){if(v0)return kh;v0=1;var e=hm(),t=pn();function n(a,o,s){var c;typeof a!="object"?c=a:(o=a.length,c=a[0].length,s=a),this.width=c,this.height=o,this.nodes=this._buildNodes(c,o,s)}return n.prototype._buildNodes=function(a,o,s){var c,d,h=new Array(o);for(c=0;c<o;++c)for(h[c]=new Array(a),d=0;d<a;++d)h[c][d]=new e(d,c);if(s===void 0)return h;if(s.length!==o||s[0].length!==a)throw new Error("Matrix size does not fit");for(c=0;c<o;++c)for(d=0;d<a;++d)s[c][d]&&(h[c][d].walkable=!1);return h},n.prototype.getNodeAt=function(a,o){return this.nodes[o][a]},n.prototype.isWalkableAt=function(a,o){return this.isInside(a,o)&&this.nodes[o][a].walkable},n.prototype.isInside=function(a,o){return a>=0&&a<this.width&&o>=0&&o<this.height},n.prototype.setWalkableAt=function(a,o,s){this.nodes[o][a].walkable=s},n.prototype.getNeighbors=function(a,o){var s=a.x,c=a.y,d=[],h=!1,p=!1,m=!1,g=!1,x=!1,v=!1,w=!1,N=!1,j=this.nodes;if(this.isWalkableAt(s,c-1)&&(d.push(j[c-1][s]),h=!0),this.isWalkableAt(s+1,c)&&(d.push(j[c][s+1]),m=!0),this.isWalkableAt(s,c+1)&&(d.push(j[c+1][s]),x=!0),this.isWalkableAt(s-1,c)&&(d.push(j[c][s-1]),w=!0),o===t.Never)return d;if(o===t.OnlyWhenNoObstacles)p=w&&h,g=h&&m,v=m&&x,N=x&&w;else if(o===t.IfAtMostOneObstacle)p=w||h,g=h||m,v=m||x,N=x||w;else if(o===t.Always)p=!0,g=!0,v=!0,N=!0;else throw new Error("Incorrect value of diagonalMovement");return p&&this.isWalkableAt(s-1,c-1)&&d.push(j[c-1][s-1]),g&&this.isWalkableAt(s+1,c-1)&&d.push(j[c-1][s+1]),v&&this.isWalkableAt(s+1,c+1)&&d.push(j[c+1][s+1]),N&&this.isWalkableAt(s-1,c+1)&&d.push(j[c+1][s-1]),d},n.prototype.clone=function(){var a,o,s=this.width,c=this.height,d=this.nodes,h=new n(s,c),p=new Array(c);for(a=0;a<c;++a)for(p[a]=new Array(s),o=0;o<s;++o)p[a][o]=new e(o,a,d[a][o].walkable);return h.nodes=p,h},kh=n,kh}var Si={},b0;function Gr(){if(b0)return Si;b0=1;function e(d){for(var h=[[d.x,d.y]];d.parent;)d=d.parent,h.push([d.x,d.y]);return h.reverse()}Si.backtrace=e;function t(d,h){var p=e(d),m=e(h);return p.concat(m.reverse())}Si.biBacktrace=t;function n(d){var h,p=0,m,g,x,v;for(h=1;h<d.length;++h)m=d[h-1],g=d[h],x=m[0]-g[0],v=m[1]-g[1],p+=Math.sqrt(x*x+v*v);return p}Si.pathLength=n;function a(d,h,p,m){var g=Math.abs,x=[],v,w,N,j,S,k;for(N=g(p-d),j=g(m-h),v=d<p?1:-1,w=h<m?1:-1,S=N-j;x.push([d,h]),!(d===p&&h===m);)k=2*S,k>-j&&(S=S-j,d=d+v),k<N&&(S=S+N,h=h+w);return x}Si.interpolate=a;function o(d){var h=[],p=d.length,m,g,x,v,w,N;if(p<2)return h;for(w=0;w<p-1;++w)for(m=d[w],g=d[w+1],x=a(m[0],m[1],g[0],g[1]),v=x.length,N=0;N<v-1;++N)h.push(x[N]);return h.push(d[p-1]),h}Si.expandPath=o;function s(d,h){var p=h.length,m=h[0][0],g=h[0][1],x=h[p-1][0],v=h[p-1][1],w,N,j,S,k,E,T,_,A,z,G;for(w=m,N=g,k=[[w,N]],E=2;E<p;++E){for(_=h[E],j=_[0],S=_[1],A=a(w,N,j,S),G=!1,T=1;T<A.length;++T)if(z=A[T],!d.isWalkableAt(z[0],z[1])){G=!0;break}G&&(lastValidCoord=h[E-1],k.push(lastValidCoord),w=lastValidCoord[0],N=lastValidCoord[1])}return k.push([x,v]),k}Si.smoothenPath=s;function c(d){if(d.length<3)return d;var h=[],p=d[0][0],m=d[0][1],g=d[1][0],x=d[1][1],v=g-p,w=x-m,N,j,S,k,E,T;for(E=Math.sqrt(v*v+w*w),v/=E,w/=E,h.push([p,m]),T=2;T<d.length;T++)N=g,j=x,S=v,k=w,g=d[T][0],x=d[T][1],v=g-N,w=x-j,E=Math.sqrt(v*v+w*w),v/=E,w/=E,(v!==S||w!==k)&&h.push([N,j]);return h.push([g,x]),h}return Si.compressPath=c,Si}var Ch,w0;function Hs(){return w0||(w0=1,Ch={manhattan:function(e,t){return e+t},euclidean:function(e,t){return Math.sqrt(e*e+t*t)},octile:function(e,t){var n=Math.SQRT2-1;return e<t?n*e+t:n*t+e},chebyshev:function(e,t){return Math.max(e,t)}}),Ch}var Ah,S0;function pm(){if(S0)return Ah;S0=1;var e=Nu(),t=Gr(),n=Hs(),a=pn();function o(s){s=s||{},this.allowDiagonal=s.allowDiagonal,this.dontCrossCorners=s.dontCrossCorners,this.heuristic=s.heuristic||n.manhattan,this.weight=s.weight||1,this.diagonalMovement=s.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=a.OnlyWhenNoObstacles:this.diagonalMovement=a.IfAtMostOneObstacle:this.diagonalMovement=a.Never),this.diagonalMovement===a.Never?this.heuristic=s.heuristic||n.manhattan:this.heuristic=s.heuristic||n.octile}return o.prototype.findPath=function(s,c,d,h,p){var m=new e(function(L,$){return L.f-$.f}),g=p.getNodeAt(s,c),x=p.getNodeAt(d,h),v=this.heuristic,w=this.diagonalMovement,N=this.weight,j=Math.abs,S=Math.SQRT2,k,E,T,_,A,z,G,F;for(g.g=0,g.f=0,m.push(g),g.opened=!0;!m.empty();){if(k=m.pop(),k.closed=!0,k===x)return t.backtrace(x);for(E=p.getNeighbors(k,w),_=0,A=E.length;_<A;++_)T=E[_],!T.closed&&(z=T.x,G=T.y,F=k.g+(z-k.x===0||G-k.y===0?1:S),(!T.opened||F<T.g)&&(T.g=F,T.h=T.h||N*v(j(z-d),j(G-h)),T.f=T.g+T.h,T.parent=k,T.opened?m.updateItem(T):(m.push(T),T.opened=!0)))}return[]},Ah=o,Ah}var Th,N0;function V4(){if(N0)return Th;N0=1;var e=pm();function t(n){e.call(this,n);var a=this.heuristic;this.heuristic=function(o,s){return a(o,s)*1e6}}return t.prototype=new e,t.prototype.constructor=t,Th=t,Th}var Mh,j0;function G4(){if(j0)return Mh;j0=1;var e=Gr(),t=pn();function n(a){a=a||{},this.allowDiagonal=a.allowDiagonal,this.dontCrossCorners=a.dontCrossCorners,this.diagonalMovement=a.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=t.OnlyWhenNoObstacles:this.diagonalMovement=t.IfAtMostOneObstacle:this.diagonalMovement=t.Never)}return n.prototype.findPath=function(a,o,s,c,d){var h=[],p=this.diagonalMovement,m=d.getNodeAt(a,o),g=d.getNodeAt(s,c),x,v,w,N,j;for(h.push(m),m.opened=!0;h.length;){if(w=h.shift(),w.closed=!0,w===g)return e.backtrace(g);for(x=d.getNeighbors(w,p),N=0,j=x.length;N<j;++N)v=x[N],!(v.closed||v.opened)&&(h.push(v),v.opened=!0,v.parent=w)}return[]},Mh=n,Mh}var Dh,E0;function W4(){if(E0)return Dh;E0=1;var e=pm();function t(n){e.call(this,n),this.heuristic=function(a,o){return 0}}return t.prototype=new e,t.prototype.constructor=t,Dh=t,Dh}var Oh,k0;function mm(){if(k0)return Oh;k0=1;var e=Nu(),t=Gr(),n=Hs(),a=pn();function o(s){s=s||{},this.allowDiagonal=s.allowDiagonal,this.dontCrossCorners=s.dontCrossCorners,this.diagonalMovement=s.diagonalMovement,this.heuristic=s.heuristic||n.manhattan,this.weight=s.weight||1,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=a.OnlyWhenNoObstacles:this.diagonalMovement=a.IfAtMostOneObstacle:this.diagonalMovement=a.Never),this.diagonalMovement===a.Never?this.heuristic=s.heuristic||n.manhattan:this.heuristic=s.heuristic||n.octile}return o.prototype.findPath=function(s,c,d,h,p){var m=function(D,q){return D.f-q.f},g=new e(m),x=new e(m),v=p.getNodeAt(s,c),w=p.getNodeAt(d,h),N=this.heuristic,j=this.diagonalMovement,S=this.weight,k=Math.abs,E=Math.SQRT2,T,_,A,z,G,F,L,$,H=1,Q=2;for(v.g=0,v.f=0,g.push(v),v.opened=H,w.g=0,w.f=0,x.push(w),w.opened=Q;!g.empty()&&!x.empty();){for(T=g.pop(),T.closed=!0,_=p.getNeighbors(T,j),z=0,G=_.length;z<G;++z)if(A=_[z],!A.closed){if(A.opened===Q)return t.biBacktrace(T,A);F=A.x,L=A.y,$=T.g+(F-T.x===0||L-T.y===0?1:E),(!A.opened||$<A.g)&&(A.g=$,A.h=A.h||S*N(k(F-d),k(L-h)),A.f=A.g+A.h,A.parent=T,A.opened?g.updateItem(A):(g.push(A),A.opened=H))}for(T=x.pop(),T.closed=!0,_=p.getNeighbors(T,j),z=0,G=_.length;z<G;++z)if(A=_[z],!A.closed){if(A.opened===H)return t.biBacktrace(A,T);F=A.x,L=A.y,$=T.g+(F-T.x===0||L-T.y===0?1:E),(!A.opened||$<A.g)&&(A.g=$,A.h=A.h||S*N(k(F-s),k(L-c)),A.f=A.g+A.h,A.parent=T,A.opened?x.updateItem(A):(x.push(A),A.opened=Q))}}return[]},Oh=o,Oh}var _h,C0;function Y4(){if(C0)return _h;C0=1;var e=mm();function t(n){e.call(this,n);var a=this.heuristic;this.heuristic=function(o,s){return a(o,s)*1e6}}return t.prototype=new e,t.prototype.constructor=t,_h=t,_h}var Rh,A0;function X4(){if(A0)return Rh;A0=1;var e=Gr(),t=pn();function n(a){a=a||{},this.allowDiagonal=a.allowDiagonal,this.dontCrossCorners=a.dontCrossCorners,this.diagonalMovement=a.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=t.OnlyWhenNoObstacles:this.diagonalMovement=t.IfAtMostOneObstacle:this.diagonalMovement=t.Never)}return n.prototype.findPath=function(a,o,s,c,d){var h=d.getNodeAt(a,o),p=d.getNodeAt(s,c),m=[],g=[],x,v,w,N=this.diagonalMovement,j=0,S=1,k,E;for(m.push(h),h.opened=!0,h.by=j,g.push(p),p.opened=!0,p.by=S;m.length&&g.length;){for(w=m.shift(),w.closed=!0,x=d.getNeighbors(w,N),k=0,E=x.length;k<E;++k)if(v=x[k],!v.closed){if(v.opened){if(v.by===S)return e.biBacktrace(w,v);continue}m.push(v),v.parent=w,v.opened=!0,v.by=j}for(w=g.shift(),w.closed=!0,x=d.getNeighbors(w,N),k=0,E=x.length;k<E;++k)if(v=x[k],!v.closed){if(v.opened){if(v.by===j)return e.biBacktrace(v,w);continue}g.push(v),v.parent=w,v.opened=!0,v.by=S}}return[]},Rh=n,Rh}var Ih,T0;function Q4(){if(T0)return Ih;T0=1;var e=mm();function t(n){e.call(this,n),this.heuristic=function(a,o){return 0}}return t.prototype=new e,t.prototype.constructor=t,Ih=t,Ih}var Lh,M0;function J4(){if(M0)return Lh;M0=1,Gr();var e=Hs(),t=hm(),n=pn();function a(o){o=o||{},this.allowDiagonal=o.allowDiagonal,this.dontCrossCorners=o.dontCrossCorners,this.diagonalMovement=o.diagonalMovement,this.heuristic=o.heuristic||e.manhattan,this.weight=o.weight||1,this.trackRecursion=o.trackRecursion||!1,this.timeLimit=o.timeLimit||1/0,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=n.OnlyWhenNoObstacles:this.diagonalMovement=n.IfAtMostOneObstacle:this.diagonalMovement=n.Never),this.diagonalMovement===n.Never?this.heuristic=o.heuristic||e.manhattan:this.heuristic=o.heuristic||e.octile}return a.prototype.findPath=function(o,s,c,d,h){var p=new Date().getTime(),m=(function(E,T){return this.heuristic(Math.abs(T.x-E.x),Math.abs(T.y-E.y))}).bind(this),g=function(E,T){return E.x===T.x||E.y===T.y?1:Math.SQRT2},x=(function(E,T,_,A,z){if(this.timeLimit>0&&new Date().getTime()-p>this.timeLimit*1e3)return 1/0;var G=T+m(E,w)*this.weight;if(G>_)return G;if(E==w)return A[z]=[E.x,E.y],E;var F,L,$,H,Q=h.getNeighbors(E,this.diagonalMovement);for($=0,F=1/0;H=Q[$];++$){if(this.trackRecursion&&(H.retainCount=H.retainCount+1||1,H.tested!==!0&&(H.tested=!0)),L=x(H,T+g(E,H),_,A,z+1),L instanceof t)return A[z]=[E.x,E.y],L;this.trackRecursion&&--H.retainCount===0&&(H.tested=!1),L<F&&(F=L)}return F}).bind(this),v=h.getNodeAt(o,s),w=h.getNodeAt(c,d),N=m(v,w),j,S,k;for(j=0;;++j){if(S=[],k=x(v,0,N,S,0),k===1/0)return[];if(k instanceof t)return S;N=k}return[]},Lh=a,Lh}var zh,D0;function ju(){if(D0)return zh;D0=1;var e=Nu(),t=Gr(),n=Hs();pn();function a(o){o=o||{},this.heuristic=o.heuristic||n.manhattan,this.trackJumpRecursion=o.trackJumpRecursion||!1}return a.prototype.findPath=function(o,s,c,d,h){var p=this.openList=new e(function(v,w){return v.f-w.f}),m=this.startNode=h.getNodeAt(o,s),g=this.endNode=h.getNodeAt(c,d),x;for(this.grid=h,m.g=0,m.f=0,p.push(m),m.opened=!0;!p.empty();){if(x=p.pop(),x.closed=!0,x===g)return t.expandPath(t.backtrace(g));this._identifySuccessors(x)}return[]},a.prototype._identifySuccessors=function(o){var s=this.grid,c=this.heuristic,d=this.openList,h=this.endNode.x,p=this.endNode.y,m,g,x,v,w,N=o.x,j=o.y,S,k,E,T,_,A=Math.abs;for(m=this._findNeighbors(o),v=0,w=m.length;v<w;++v)if(g=m[v],x=this._jump(g[0],g[1],N,j),x){if(S=x[0],k=x[1],_=s.getNodeAt(S,k),_.closed)continue;E=n.octile(A(S-N),A(k-j)),T=o.g+E,(!_.opened||T<_.g)&&(_.g=T,_.h=_.h||c(A(S-h),A(k-p)),_.f=_.g+_.h,_.parent=o,_.opened?d.updateItem(_):(d.push(_),_.opened=!0))}},zh=a,zh}var Bh,O0;function Z4(){if(O0)return Bh;O0=1;var e=ju(),t=pn();function n(a){e.call(this,a)}return n.prototype=new e,n.prototype.constructor=n,n.prototype._jump=function(a,o,s,c){var d=this.grid,h=a-s,p=o-c;if(!d.isWalkableAt(a,o))return null;if(this.trackJumpRecursion===!0&&(d.getNodeAt(a,o).tested=!0),d.getNodeAt(a,o)===this.endNode)return[a,o];if(h!==0){if(d.isWalkableAt(a,o-1)&&!d.isWalkableAt(a-h,o-1)||d.isWalkableAt(a,o+1)&&!d.isWalkableAt(a-h,o+1))return[a,o]}else if(p!==0){if(d.isWalkableAt(a-1,o)&&!d.isWalkableAt(a-1,o-p)||d.isWalkableAt(a+1,o)&&!d.isWalkableAt(a+1,o-p))return[a,o];if(this._jump(a+1,o,a,o)||this._jump(a-1,o,a,o))return[a,o]}else throw new Error("Only horizontal and vertical movements are allowed");return this._jump(a+h,o+p,a,o)},n.prototype._findNeighbors=function(a){var o=a.parent,s=a.x,c=a.y,d=this.grid,h,p,m,g,x=[],v,w,N,j;if(o)h=o.x,p=o.y,m=(s-h)/Math.max(Math.abs(s-h),1),g=(c-p)/Math.max(Math.abs(c-p),1),m!==0?(d.isWalkableAt(s,c-1)&&x.push([s,c-1]),d.isWalkableAt(s,c+1)&&x.push([s,c+1]),d.isWalkableAt(s+m,c)&&x.push([s+m,c])):g!==0&&(d.isWalkableAt(s-1,c)&&x.push([s-1,c]),d.isWalkableAt(s+1,c)&&x.push([s+1,c]),d.isWalkableAt(s,c+g)&&x.push([s,c+g]));else for(v=d.getNeighbors(a,t.Never),N=0,j=v.length;N<j;++N)w=v[N],x.push([w.x,w.y]);return x},Bh=n,Bh}var Ph,_0;function K4(){if(_0)return Ph;_0=1;var e=ju(),t=pn();function n(a){e.call(this,a)}return n.prototype=new e,n.prototype.constructor=n,n.prototype._jump=function(a,o,s,c){var d=this.grid,h=a-s,p=o-c;if(!d.isWalkableAt(a,o))return null;if(this.trackJumpRecursion===!0&&(d.getNodeAt(a,o).tested=!0),d.getNodeAt(a,o)===this.endNode)return[a,o];if(h!==0&&p!==0){if(d.isWalkableAt(a-h,o+p)&&!d.isWalkableAt(a-h,o)||d.isWalkableAt(a+h,o-p)&&!d.isWalkableAt(a,o-p))return[a,o];if(this._jump(a+h,o,a,o)||this._jump(a,o+p,a,o))return[a,o]}else if(h!==0){if(d.isWalkableAt(a+h,o+1)&&!d.isWalkableAt(a,o+1)||d.isWalkableAt(a+h,o-1)&&!d.isWalkableAt(a,o-1))return[a,o]}else if(d.isWalkableAt(a+1,o+p)&&!d.isWalkableAt(a+1,o)||d.isWalkableAt(a-1,o+p)&&!d.isWalkableAt(a-1,o))return[a,o];return this._jump(a+h,o+p,a,o)},n.prototype._findNeighbors=function(a){var o=a.parent,s=a.x,c=a.y,d=this.grid,h,p,m,g,x=[],v,w,N,j;if(o)h=o.x,p=o.y,m=(s-h)/Math.max(Math.abs(s-h),1),g=(c-p)/Math.max(Math.abs(c-p),1),m!==0&&g!==0?(d.isWalkableAt(s,c+g)&&x.push([s,c+g]),d.isWalkableAt(s+m,c)&&x.push([s+m,c]),d.isWalkableAt(s+m,c+g)&&x.push([s+m,c+g]),d.isWalkableAt(s-m,c)||x.push([s-m,c+g]),d.isWalkableAt(s,c-g)||x.push([s+m,c-g])):m===0?(d.isWalkableAt(s,c+g)&&x.push([s,c+g]),d.isWalkableAt(s+1,c)||x.push([s+1,c+g]),d.isWalkableAt(s-1,c)||x.push([s-1,c+g])):(d.isWalkableAt(s+m,c)&&x.push([s+m,c]),d.isWalkableAt(s,c+1)||x.push([s+m,c+1]),d.isWalkableAt(s,c-1)||x.push([s+m,c-1]));else for(v=d.getNeighbors(a,t.Always),N=0,j=v.length;N<j;++N)w=v[N],x.push([w.x,w.y]);return x},Ph=n,Ph}var $h,R0;function e5(){if(R0)return $h;R0=1;var e=ju(),t=pn();function n(a){e.call(this,a)}return n.prototype=new e,n.prototype.constructor=n,n.prototype._jump=function(a,o,s,c){var d=this.grid,h=a-s,p=o-c;if(!d.isWalkableAt(a,o))return null;if(this.trackJumpRecursion===!0&&(d.getNodeAt(a,o).tested=!0),d.getNodeAt(a,o)===this.endNode)return[a,o];if(h!==0&&p!==0){if(this._jump(a+h,o,a,o)||this._jump(a,o+p,a,o))return[a,o]}else if(h!==0){if(d.isWalkableAt(a,o-1)&&!d.isWalkableAt(a-h,o-1)||d.isWalkableAt(a,o+1)&&!d.isWalkableAt(a-h,o+1))return[a,o]}else if(p!==0&&(d.isWalkableAt(a-1,o)&&!d.isWalkableAt(a-1,o-p)||d.isWalkableAt(a+1,o)&&!d.isWalkableAt(a+1,o-p)))return[a,o];return d.isWalkableAt(a+h,o)&&d.isWalkableAt(a,o+p)?this._jump(a+h,o+p,a,o):null},n.prototype._findNeighbors=function(a){var o=a.parent,s=a.x,c=a.y,d=this.grid,h,p,m,g,x=[],v,w,N,j;if(o)if(h=o.x,p=o.y,m=(s-h)/Math.max(Math.abs(s-h),1),g=(c-p)/Math.max(Math.abs(c-p),1),m!==0&&g!==0)d.isWalkableAt(s,c+g)&&x.push([s,c+g]),d.isWalkableAt(s+m,c)&&x.push([s+m,c]),d.isWalkableAt(s,c+g)&&d.isWalkableAt(s+m,c)&&x.push([s+m,c+g]);else{var S;if(m!==0){S=d.isWalkableAt(s+m,c);var k=d.isWalkableAt(s,c+1),E=d.isWalkableAt(s,c-1);S&&(x.push([s+m,c]),k&&x.push([s+m,c+1]),E&&x.push([s+m,c-1])),k&&x.push([s,c+1]),E&&x.push([s,c-1])}else if(g!==0){S=d.isWalkableAt(s,c+g);var T=d.isWalkableAt(s+1,c),_=d.isWalkableAt(s-1,c);S&&(x.push([s,c+g]),T&&x.push([s+1,c+g]),_&&x.push([s-1,c+g])),T&&x.push([s+1,c]),_&&x.push([s-1,c])}}else for(v=d.getNeighbors(a,t.OnlyWhenNoObstacles),N=0,j=v.length;N<j;++N)w=v[N],x.push([w.x,w.y]);return x},$h=n,$h}var Hh,I0;function t5(){if(I0)return Hh;I0=1;var e=ju(),t=pn();function n(a){e.call(this,a)}return n.prototype=new e,n.prototype.constructor=n,n.prototype._jump=function(a,o,s,c){var d=this.grid,h=a-s,p=o-c;if(!d.isWalkableAt(a,o))return null;if(this.trackJumpRecursion===!0&&(d.getNodeAt(a,o).tested=!0),d.getNodeAt(a,o)===this.endNode)return[a,o];if(h!==0&&p!==0){if(d.isWalkableAt(a-h,o+p)&&!d.isWalkableAt(a-h,o)||d.isWalkableAt(a+h,o-p)&&!d.isWalkableAt(a,o-p))return[a,o];if(this._jump(a+h,o,a,o)||this._jump(a,o+p,a,o))return[a,o]}else if(h!==0){if(d.isWalkableAt(a+h,o+1)&&!d.isWalkableAt(a,o+1)||d.isWalkableAt(a+h,o-1)&&!d.isWalkableAt(a,o-1))return[a,o]}else if(d.isWalkableAt(a+1,o+p)&&!d.isWalkableAt(a+1,o)||d.isWalkableAt(a-1,o+p)&&!d.isWalkableAt(a-1,o))return[a,o];return d.isWalkableAt(a+h,o)||d.isWalkableAt(a,o+p)?this._jump(a+h,o+p,a,o):null},n.prototype._findNeighbors=function(a){var o=a.parent,s=a.x,c=a.y,d=this.grid,h,p,m,g,x=[],v,w,N,j;if(o)h=o.x,p=o.y,m=(s-h)/Math.max(Math.abs(s-h),1),g=(c-p)/Math.max(Math.abs(c-p),1),m!==0&&g!==0?(d.isWalkableAt(s,c+g)&&x.push([s,c+g]),d.isWalkableAt(s+m,c)&&x.push([s+m,c]),(d.isWalkableAt(s,c+g)||d.isWalkableAt(s+m,c))&&x.push([s+m,c+g]),!d.isWalkableAt(s-m,c)&&d.isWalkableAt(s,c+g)&&x.push([s-m,c+g]),!d.isWalkableAt(s,c-g)&&d.isWalkableAt(s+m,c)&&x.push([s+m,c-g])):m===0?d.isWalkableAt(s,c+g)&&(x.push([s,c+g]),d.isWalkableAt(s+1,c)||x.push([s+1,c+g]),d.isWalkableAt(s-1,c)||x.push([s-1,c+g])):d.isWalkableAt(s+m,c)&&(x.push([s+m,c]),d.isWalkableAt(s,c+1)||x.push([s+m,c+1]),d.isWalkableAt(s,c-1)||x.push([s+m,c-1]));else for(v=d.getNeighbors(a,t.IfAtMostOneObstacle),N=0,j=v.length;N<j;++N)w=v[N],x.push([w.x,w.y]);return x},Hh=n,Hh}var qh,L0;function n5(){if(L0)return qh;L0=1;var e=pn(),t=Z4(),n=K4(),a=e5(),o=t5();function s(c){return c=c||{},c.diagonalMovement===e.Never?new t(c):c.diagonalMovement===e.Always?new n(c):c.diagonalMovement===e.OnlyWhenNoObstacles?new a(c):new o(c)}return qh=s,qh}var Uh,z0;function i5(){return z0||(z0=1,Uh={Heap:Nu(),Node:hm(),Grid:F4(),Util:Gr(),DiagonalMovement:pn(),Heuristic:Hs(),AStarFinder:pm(),BestFirstFinder:V4(),BreadthFirstFinder:G4(),DijkstraFinder:W4(),BiAStarFinder:mm(),BiBestFirstFinder:Y4(),BiBreadthFirstFinder:X4(),BiDijkstraFinder:Q4(),IDAStarFinder:J4(),JumpPointFinder:n5()}),Uh}var Fh,B0;function r5(){return B0||(B0=1,Fh=i5()),Fh}var a5=r5();const Ac=Ts(a5),Tc=40;function o5({sourceX:e,sourceY:t,sourcePosition:n,targetX:a,targetY:o,targetPosition:s,nodes:c=[],excludeNodeIds:d=[]}){let h=Math.min(e,a),p=Math.max(e,a),m=Math.min(t,o),g=Math.max(t,o);const x=c.filter(U=>!d.includes(U.id)&&U.width&&U.height);x.forEach(U=>{h=Math.min(h,U.position.x-50),p=Math.max(p,U.position.x+U.width+50),m=Math.min(m,U.position.y-50),g=Math.max(g,U.position.y+U.height+50)});const v=200;h-=v,m-=v,p+=v,g+=v;const w=Math.ceil((p-h)/Tc),N=Math.ceil((g-m)/Tc);if(w>600||N>600)return l5(e,t,a,o);const j=(U,B)=>Math.round((U-B)/Tc),S=(U,B)=>U*Tc+B,k=new Ac.Grid(w,N);x.forEach(U=>{const re=j(U.position.x-40,h),de=j(U.position.y-40,m),fe=j(U.position.x+U.width+40,h),ie=j(U.position.y+U.height+40,m);for(let we=re;we<=fe;we++)for(let Ce=de;Ce<=ie;Ce++)k.isWalkableAt(we,Ce)&&k.setWeightAt(we,Ce,20);const te=10,ue=j(U.position.x-te,h),me=j(U.position.y-te,m),ge=j(U.position.x+U.width+te,h),xe=j(U.position.y+U.height+te,m);for(let we=ue;we<=ge;we++)for(let Ce=me;Ce<=xe;Ce++)k.setWalkableAt(we,Ce,!1)});const E=20,T=$0(n,E),_=$0(s,E),A=e+T.x,z=t+T.y,G=a+_.x,F=o+_.y,L=j(A,h),$=j(z,m),H=j(G,h),Q=j(F,m);k.setWalkableAt(L,$,!0),k.setWalkableAt(H,Q,!0);const D=new Ac.AStarFinder({allowDiagonal:!1,dontCrossCorners:!0,weight:20,heuristic:Ac.Heuristic.manhattan});let q=[];try{q=D.findPath(L,$,H,Q,k)}catch{return jp(e,t,a,o)}if(q.length===0)return jp(e,t,a,o);const V=Ac.Util.compressPath(q).map(([U,B])=>[S(U,h),S(B,m)]),W=P0({x:A,y:z},{x:V[0][0],y:V[0][1]},n),J=V.length-1,O=P0({x:V[J][0],y:V[J][1]},{x:G,y:F},null);let R=[];return R.push([e,t]),R.push([A,z]),W.forEach(U=>R.push([U.x,U.y])),V.forEach(U=>R.push(U)),O.forEach(U=>R.push([U.x,U.y])),R.push([G,F]),R.push([a,o]),R=R.map(([U,B])=>[Math.round(U),Math.round(B)]),R=s5(R),VS(R,2)}function P0(e,t,n){if(Math.abs(e.x-t.x)<1||Math.abs(e.y-t.y)<1)return[];let a=!0;return n?n===ye.Left||n===ye.Right?a=!0:a=!1:a=!0,a?[{x:t.x,y:e.y}]:[{x:e.x,y:t.y}]}function s5(e){if(e.length<2)return e;const t=[e[0]];for(let n=1;n<e.length;n++){const a=t[t.length-1],o=e[n];Math.abs(a[0]-o[0])<1&&Math.abs(a[1]-o[1])<1||t.push(o)}return t}function $0(e,t){switch(e){case ye.Top:return{x:0,y:-t};case ye.Bottom:return{x:0,y:t};case ye.Left:return{x:-t,y:0};case ye.Right:return{x:t,y:0};default:return{x:0,y:0}}}function VS(e,t=2){if(e.length<2)return["",0,0];let n=`M ${e[0][0]} ${e[0][1]}`;for(let h=1;h<e.length-1;h++){const p=e[h-1],m=e[h],g=e[h+1],x={x:m[0]-p[0],y:m[1]-p[1]},v={x:g[0]-m[0],y:g[1]-m[1]},w=Math.sqrt(x.x*x.x+x.y*x.y),N=Math.sqrt(v.x*v.x+v.y*v.y),j=Math.min(t,w/2,N/2);if(j<1)n+=` L ${m[0]} ${m[1]}`;else{const S=m[0]-x.x/w*j,k=m[1]-x.y/w*j,E=m[0]+v.x/N*j,T=m[1]+v.y/N*j;n+=` L ${S} ${k}`,n+=` Q ${m[0]} ${m[1]} ${E} ${T}`}}n+=` L ${e[e.length-1][0]} ${e[e.length-1][1]}`;const a=Math.floor(e.length/2),o=e[a],s=e[Math.min(a+1,e.length-1)],c=Math.round((o[0]+s[0])/2),d=Math.round((o[1]+s[1])/2);return[n,c,d]}function jp(e,t,n,a){let o=[[e,t]];const s=(e+n)/2;return o.push([s,t]),o.push([s,a]),o.push([n,a]),o=o.map(([c,d])=>[Math.round(c),Math.round(d)]),VS(o,2)}function l5(e,t,n,a){return jp(e,t,n,a)}function c5({id:e,source:t,target:n,sourceX:a,sourceY:o,targetX:s,targetY:c,sourcePosition:d,targetPosition:h,style:p={},markerEnd:m,sourceHandleId:g,targetHandleId:x}){const[v,w]=M.useState(!1),[N,j]=M.useState(!1),S=M.useRef(null),k=Ne(R=>R.nodes),{currentNodeId:E,edgeSnapshots:T,isRunning:_}=We(H4(R=>({currentNodeId:R.currentNodeId,edgeSnapshots:R.edgeSnapshots,isRunning:R.isRunning}))),A=_&&E===t,z=T[e]?.[T[e]?.length-1]||null,G=M.useMemo(()=>{const R=x||g||"";return R.includes("model")?"model":R.includes("memory")?"memory":R.includes("tool")?"tool":"workflow"},[g,x]),F=M.useMemo(()=>(Qc[G]||Qc.workflow).color,[G]),L=M.useCallback(()=>{S.current&&(clearTimeout(S.current),S.current=null),w(!0),z&&j(!0)},[z]),$=M.useCallback(()=>{S.current=setTimeout(()=>{w(!1),j(!1)},400)},[]),H=M.useCallback(()=>{S.current&&(clearTimeout(S.current),S.current=null),w(!0)},[]),[Q,D,q]=M.useMemo(()=>o5({sourceX:a,sourceY:o,sourcePosition:d,targetX:s,targetY:c,targetPosition:h,nodes:k,excludeNodeIds:[t,n]}),[a,o,d,s,c,h,k,t,n]),I=M.useCallback(R=>{R.stopPropagation(),R.preventDefault(),window.dispatchEvent(new CustomEvent("deleteEdge",{detail:{edgeId:e}}))},[e]),V=M.useCallback(R=>{R.stopPropagation(),R.preventDefault(),window.dispatchEvent(new CustomEvent("addNodeOnEdge",{detail:{edgeId:e,position:{x:D,y:q}}}))},[e,D,q]),W=R=>R?new Date(R).toLocaleTimeString():"",J=`animated-edge ${v?"hovered":""} edge-${G} ${z?"has-data":""} ${A?"flowing":""}`,O={...p,"--edge-color":F};return u.jsxs(u.Fragment,{children:[u.jsx("path",{d:Q,fill:"none",strokeWidth:30,stroke:"transparent",style:{cursor:"pointer"},onMouseEnter:L,onMouseLeave:$}),u.jsx(zs,{path:Q,markerEnd:m,style:O,className:J}),u.jsxs(G2,{children:[u.jsx("div",{className:`edge-action-container ${v?"visible":""}`,style:{position:"absolute",transform:`translate(-50%, -50%) translate(${D}px, ${q}px)`,pointerEvents:v?"all":"none"},onMouseEnter:H,onMouseLeave:$,children:u.jsxs("div",{className:"edge-action-buttons",children:[u.jsx("button",{className:"edge-btn edge-btn-add",onClick:V,title:"Insert node here",children:"+"}),u.jsx("button",{className:"edge-btn edge-btn-delete",onClick:I,title:"Delete connection",children:""})]})}),N&&z&&u.jsxs("div",{className:"ghost-data-tooltip",style:{position:"absolute",transform:`translate(-50%, -120%) translate(${D}px, ${q}px)`,pointerEvents:"none"},children:[u.jsxs("div",{className:"ghost-header",children:[u.jsx("span",{className:"ghost-icon",children:""}),u.jsx("span",{className:"ghost-title",children:"Last Data"}),u.jsx("span",{className:"ghost-time",children:W(z.timestamp)})]}),u.jsxs("pre",{className:"ghost-preview",children:[z.preview,z.preview?.length>=500&&"..."]})]})]})]})}const u5=M.memo(c5);class d5{constructor(){this.isRunning=!1,this.isPaused=!1,this.debugMode=!1,this.stepResolve=null,this.abortController=null,this.executedNodes=new Set,this.pendingMerge=new Map}async execute(t,n,a,o={},s={}){const{executionStore:c}=a,{debug:d=!1}=s;if(this.isRunning)throw new Error("Workflow is already running");this.isRunning=!0,this.isPaused=!1,this.debugMode=d,this.abortController=new AbortController,this.executedNodes=new Set,this.nodes=t,this.edges=n,this.nodeMap=new Map(t.map(h=>[h.id,h])),this.executionStore=c,c.startExecution();try{const h=CD(t);if(h.length===0)throw c.addLog({type:"error",message:"No trigger node found. Add a trigger to start the workflow."}),new Error("No trigger node found");c.addLog({type:"info",message:`Starting workflow${d?" (debug mode)":""} with ${h.length} trigger(s)`});const p=[];for(const m of h){const g=await this.executeFromNode(m.id,o);p.push(g)}return c.stopExecution(),c.addLog({type:"success",message:"Workflow completed successfully"}),this.isRunning=!1,{success:!0,results:p}}catch(h){return c.addLog({type:"error",message:`Workflow failed: ${h.message}`}),c.stopExecution(),this.isRunning=!1,{success:!1,error:h.message}}}async executeFromNode(t,n,a=new Set){const o=`${t}-${JSON.stringify(n).slice(0,50)}`;if(a.has(o))return{success:!0,output:n,skipped:!0};if(a.add(o),this.abortController?.signal.aborted)throw new Error("Workflow was stopped");await this.waitIfPaused(),this.debugMode&&await this.waitForStep();const s=this.nodeMap.get(t);if(!s)return{success:!1,error:`Node ${t} not found`};if(s.type==="merge"&&s.data?.mode!=="first"){const N=this.edges.filter(j=>j.target===t).length;if(N>1){this.pendingMerge.has(t)||this.pendingMerge.set(t,{expected:N,results:[]});const j=this.pendingMerge.get(t);if(j.results.push(n),j.results.length<j.expected)return this.executionStore.addLog({type:"info",nodeId:t,nodeName:s.data?.label||"Merge",message:` Waiting for ${j.expected-j.results.length} more branch(es)`}),{success:!0,output:n,waiting:!0};n=j.results,this.pendingMerge.delete(t),this.executionStore.addLog({type:"info",nodeId:t,nodeName:s.data?.label||"Merge",message:` All ${N} branches arrived - merging`})}}if(this.executionStore.setCurrentNode(t),this.executionStore.addLog({type:"node",nodeId:t,nodeName:s.data?.label||s.type,message:`Executing ${s.data?.label||s.type}`}),s.type==="aiAgent"){const w=this.getConnectedResources(t);if(w.model&&(s.data={...s.data,connectedModel:w.model},this.executionStore.addLog({type:"info",nodeId:t,nodeName:s.data?.label||"AI Agent",message:`Using connected model: ${w.model.modelName||w.model.modelId||"WebLLM"}`})),w.memory&&(s.data={...s.data,connectedMemory:w.memory},this.executionStore.addLog({type:"info",nodeId:t,nodeName:s.data?.label||"AI Agent",message:`Using connected memory: ${w.memory.namespace}`})),s.data?.enableToolCalling!==!1){const j=this.getConnectedTools(t),S=[...w.tools,...j];S.length>0&&(s.data={...s.data,tools:S},this.executionStore.addLog({type:"info",nodeId:t,nodeName:s.data?.label||"AI Agent",message:`Detected ${S.length} tool(s): ${S.map(k=>k.name).join(", ")}`}))}const N=[];w.model?.nodeId&&N.push(w.model.nodeId),w.memory?.nodeId&&N.push(w.memory.nodeId),w.tools.forEach(j=>N.push(j.nodeId)),N.length>0&&this.executionStore.setActiveSupportingNodes&&this.executionStore.setActiveSupportingNodes(N)}const c={nodeId:t,nodes:this.nodes,edges:this.edges,executionStore:this.executionStore,addLog:w=>this.executionStore.addLog({...w,nodeId:t})},d=s.data?.retries||0,h=s.data?.retryDelay||1e3,p=s.type==="aiAgent"||s.type==="textToSpeech"||s.type==="imageGeneration",m=s.data?.timeout||(p?3e5:6e4);let g;const x=Date.now();for(let w=0;w<=d;w++){if(w>0){const N=h*Math.pow(2,w-1);this.executionStore.addLog({type:"warning",nodeId:t,nodeName:s.data?.label||s.type,message:`Retrying (attempt ${w+1}/${d+1}) after ${N}ms...`}),await new Promise(j=>setTimeout(j,N))}try{if(g=await this.executeWithTimeout(s,n,c,m),!g.success)throw new Error(g.error||"Node execution failed");break}catch(N){if(w===d){const j=Date.now()-x;throw this.executionStore.setNodeResult(t,{success:!1,error:N.message,executionTime:j,attempts:w+1}),this.executionStore.addLog({type:"error",nodeId:t,nodeName:s.data?.label||s.type,message:`Node failed after ${w+1} attempt(s): ${N.message}`,data:{error:N.message,executionTime:j,canRetry:!0,nodeId:t}}),new Error(`Node ${s.data?.label||t} failed: ${N.message}`)}}}const v=Date.now()-x;return this.executionStore.setNodeResult(t,{...g,executionTime:v}),this.executedNodes.add(t),this.executionStore.addLog({type:"success",nodeId:t,nodeName:s.data?.label||s.type,message:`Completed in ${v}ms`,data:g.output?{preview:this.getOutputPreview(g.output),executionTime:v}:void 0}),await new Promise(w=>setTimeout(w,50)),g.loopData?await this.executeLoop(s,g,a):g.outputIndex!==void 0?await this.executeBranch(s,g,a):await this.executeNextNodes(t,g.output,a)}async executeLoop(t,n,a){const{items:o,index:s}=n.loopData,c=t.id,d=[];this.executionStore.addLog({type:"info",nodeId:c,nodeName:t.data?.label||"Loop",message:`Starting loop with ${o.length} items`});const h=this.edges.find(m=>m.source===c&&m.sourceHandle==="output-0");if(h)for(let m=s;m<o.length;m++){if(this.abortController?.signal.aborted)throw new Error("Workflow was stopped");const x={item:o[m],index:m,total:o.length,isFirst:m===0,isLast:m===o.length-1,...n.output};this.executionStore.addLog({type:"info",nodeId:c,message:`Loop iteration ${m+1}/${o.length}`});const v=await this.executeFromNode(h.target,x,new Set);v.success&&d.push(v.output)}this.executionStore.addLog({type:"success",nodeId:c,message:`Loop completed (${o.length} iterations)`});const p=this.edges.find(m=>m.source===c&&m.sourceHandle==="output-1");if(p){const m={...n.output,loopResults:d,itemCount:o.length};return await this.executeFromNode(p.target,m,a)}return{success:!0,output:d}}async executeBranch(t,n,a){const{output:o,outputIndex:s}=n,c=t.id,d=this.edges.find(h=>h.source===c&&h.sourceHandle===`output-${s}`);return d?(this.executionStore.addLog({type:"info",nodeId:c,message:`Taking branch: output ${s+1}`}),await this.executeFromNode(d.target,o,a)):(this.executionStore.addLog({type:"info",nodeId:c,message:`Branch output ${s+1} has no connection, ending path`}),{success:!0,output:o})}async executeNextNodes(t,n,a){const o=this.edges.filter(c=>c.source===t);if(o.length===0)return{success:!0,output:n};for(const c of o)this.executionStore?.addEdgeSnapshot&&this.executionStore.addEdgeSnapshot(c.id,n);const s=await Promise.all(o.map(c=>this.executeFromNode(c.target,n,a)));return s.length===1?s[0]:{success:!0,outputs:s,parallel:!0}}async waitIfPaused(){for(;this.isPaused&&!this.abortController?.signal.aborted;)await new Promise(t=>setTimeout(t,100))}async waitForStep(){return new Promise(t=>{this.stepResolve=t,this.executionStore.addLog({type:"debug",message:"Waiting for step (press Step to continue)..."})})}step(){if(this.stepResolve){const t=this.stepResolve;this.stepResolve=null,t()}}stop(){this.abortController&&this.abortController.abort(),this.stepResolve&&(this.stepResolve(),this.stepResolve=null),this.isRunning=!1,this.isPaused=!1,this.debugMode=!1}pause(){this.isPaused=!0,this.executionStore?.addLog({type:"info",message:"Execution paused"})}resume(){this.isPaused=!1,this.executionStore?.addLog({type:"info",message:"Execution resumed"})}setDebugMode(t){this.debugMode=t}async executeWithTimeout(t,n,a,o){let s,c;const d=new Promise((p,m)=>{c=m}),h=()=>{s&&clearTimeout(s),s=setTimeout(()=>{c(new Error(`Timeout after ${o}ms`))},o)};if(h(),this.abortController?.signal){if(this.abortController.signal.aborted)return Promise.reject(new Error("Workflow was stopped"));this.abortController.signal.addEventListener("abort",()=>{c(new Error("Workflow was stopped"))})}a.heartbeat=()=>{s&&h()};try{return await Promise.race([Wp(t,n,a),d,new Promise((m,g)=>{this.abortController?.signal&&this.abortController.signal.addEventListener("abort",()=>{g(new Error("Workflow was stopped"))})})])}finally{s&&clearTimeout(s),s=null}}getConnectedResources(t){const n=this.edges.filter(o=>o.target===t&&["model-slot","memory-slot","tool-slot"].includes(o.targetHandle)),a={model:null,memory:null,tools:[]};for(const o of n){const s=this.nodeMap.get(o.source);if(s)switch(o.targetHandle){case"model-slot":a.model={nodeId:s.id,modelId:s.data?.modelId,modelName:s.data?.modelName,provider:s.data?.provider||"webllm",temperature:s.data?.temperature,maxTokens:s.data?.maxTokens};break;case"memory-slot":a.memory={nodeId:s.id,namespace:s.data?.namespace||"default",mode:s.data?.mode||"query",topK:s.data?.topK||5};break;case"tool-slot":a.tools.push({nodeId:s.id,name:s.data?.label||s.type,type:s.type,description:this.getToolDescription(s.type)});break}}return a}getConnectedTools(t){const n=this.edges.filter(o=>o.source===t),a=[];for(const o of n){const s=this.nodeMap.get(o.target);s&&this.isToolNode(s.type)&&a.push({nodeId:s.id,name:s.data?.label||s.type,type:s.type,description:this.getToolDescription(s.type),inputSchema:{input:"any"}})}return a}isToolNode(t){return["codeExecutor","httpRequest","setVariable","ifElse","loopEach","switchNode","delay","merge"].includes(t)}getToolDescription(t){return{codeExecutor:"Execute JavaScript code. Pass data to process and receive the result.",httpRequest:"Make HTTP requests to APIs. Returns the response data.",setVariable:"Store a value in workflow memory for later use.",ifElse:"Evaluate a condition and return the result.",loopEach:"Iterate through an array of items.",switchNode:"Route based on a value matching specific cases.",delay:"Wait for a specified duration.",merge:"Combine multiple inputs into one output."}[t]||`Execute ${t} node.`}getOutputPreview(t){if(typeof t=="string")return t.slice(0,100)+(t.length>100?"...":"");if(typeof t=="object"){const n=JSON.stringify(t);return n.slice(0,100)+(n.length>100?"...":"")}return String(t)}}const za=new d5;function f5(){const e=Ne(x=>x.nodes),t=Ne(x=>x.edges),n=We(x=>x.isRunning),a=We(x=>x.isPaused),o=We(x=>x.isDebugMode),s=We(x=>x.setDebugMode),c=We(x=>x.setPaused),d=M.useCallback(async()=>{if(n)return;const x=We.getState();await za.execute(e,t,{executionStore:x},{},{debug:o})},[e,t,n,o]),h=M.useCallback(()=>za.stop(),[]),p=M.useCallback(()=>{za.pause(),c(!0)},[c]),m=M.useCallback(()=>{za.resume(),c(!1)},[c]),g=M.useCallback(()=>za.step(),[]);return u.jsxs("div",{className:"execution-controls-panel",children:[u.jsx("div",{className:"exec-btn-group",children:n?u.jsxs(u.Fragment,{children:[u.jsx("button",{className:"exec-btn btn-stop",onClick:h,title:"Stop Execution",children:" Stop"}),a?u.jsx("button",{className:"exec-btn btn-resume",onClick:m,title:"Resume",children:" Resume"}):u.jsx("button",{className:"exec-btn btn-pause",onClick:p,title:"Pause",children:" Pause"}),o&&u.jsx("button",{className:"exec-btn btn-step",onClick:g,title:"Step Next",children:" Step"})]}):u.jsx("button",{className:"exec-btn btn-run",onClick:d,disabled:e.length===0,title:o?"Start Debug Run":"Start Workflow",children:o?" Debug Run":" Run"})}),u.jsx("div",{className:"separator"}),u.jsx("button",{className:`exec-btn btn-toggle-debug ${o?"active":""}`,onClick:()=>s(!o),title:"Toggle Debug Mode",children:o?" Debug On":" Debug Off"})]})}function h5({isOpen:e,onClose:t}){const[n,a]=M.useState("all"),o=Ge(k=>k.availableModels),s=Ge(k=>k.currentModelId),c=Ge(k=>k.status),d=Ge(k=>k.loadProgress),h=Ge(k=>k.downloadedModels),p=Ge(k=>k.downloadProgress),m=Ge(k=>k.setDownloadProgress),g=k=>{m(k,5,"downloading"),window.dispatchEvent(new CustomEvent("downloadModel",{detail:{modelId:k}}))},x=async k=>{window.dispatchEvent(new CustomEvent("loadModel",{detail:{modelId:k}})),t()},v=async k=>{try{const E=await caches.keys();for(const A of E)if(A.includes("webllm")||A.includes("mlc")){const z=await caches.open(A),G=await z.keys();for(const F of G)F.url.includes(k)&&await z.delete(F)}const _=Ge.getState().downloadedModels.filter(A=>A!==k);Ge.setState({downloadedModels:_}),console.log(`Removed model: ${k}`)}catch(E){console.error("Failed to remove model:",E)}},w=async()=>{if(confirm("This will remove ALL downloaded models. Continue?"))try{const k=await caches.keys();for(const T of k)(T.includes("webllm")||T.includes("mlc")||T.includes("huggingface"))&&await caches.delete(T);const E=await indexedDB.databases();for(const T of E)(T.name?.includes("webllm")||T.name?.includes("mlc"))&&indexedDB.deleteDatabase(T.name);Ge.setState({downloadedModels:[],downloadProgress:{},currentModelId:null,status:"idle"}),localStorage.removeItem("selectedModel"),console.log("All model caches cleared"),alert("All models removed. Refresh the page to start fresh.")}catch(k){console.error("Failed to clear cache:",k),alert("Failed to clear some caches. Try clearing browser data manually.")}},N=[{id:"all",label:"All"},{id:"recommended",label:" Recommended"},{id:"downloaded",label:" Downloaded"},{id:"gemma",label:" Gemma 3"},{id:"qwen3",label:" Qwen 3"},{id:"qwen",label:"Qwen 2.5"},{id:"medium",label:"Medium"},{id:"tiny",label:"Tiny"}],j=o.filter(k=>n==="all"?!0:n==="downloaded"?h.includes(k.id):k.category===n),S=k=>s===k&&c==="ready"?"active":h.includes(k)?"downloaded":p[k]?.status==="downloading"?"downloading":"available";return e?u.jsx("div",{className:"model-switcher-overlay",onClick:t,children:u.jsxs("div",{className:"model-switcher",onClick:k=>k.stopPropagation(),children:[u.jsxs("header",{className:"ms-header",children:[u.jsx("h2",{children:" Model Manager"}),u.jsx("button",{className:"btn-close",onClick:t,children:""})]}),u.jsx("div",{className:"ms-categories",children:N.map(k=>u.jsxs("button",{className:`cat-btn ${n===k.id?"active":""}`,onClick:()=>a(k.id),children:[k.label,k.id==="downloaded"&&h.length>0&&u.jsx("span",{className:"cat-badge",children:h.length})]},k.id))}),u.jsxs("div",{className:"ms-content",children:[s&&u.jsxs("div",{className:"current-model-banner",children:[u.jsx("span",{className:"banner-icon",children:""}),u.jsxs("span",{className:"banner-text",children:["Active:"," ",o.find(k=>k.id===s)?.name]}),u.jsx("span",{className:`banner-status ${c}`,children:c==="ready"?" Ready":c==="loading"?` ${Math.round(d*100)}%`:""})]}),u.jsx("div",{className:"models-grid",children:j.map(k=>{const E=S(k.id),T=p[k.id]?.progress||0;return u.jsxs("div",{className:`model-card ${E}`,children:[u.jsxs("div",{className:"model-card-header",children:[u.jsx("span",{className:"model-name",children:k.name}),u.jsx("span",{className:"model-size",children:k.size})]}),u.jsx("p",{className:"model-desc",children:k.description}),E==="downloading"&&u.jsxs("div",{className:"download-progress",children:[u.jsx("div",{className:"progress-bar",children:u.jsx("div",{className:"progress-fill",style:{width:`${T}%`}})}),u.jsxs("span",{className:"progress-text",children:[T,"%"]})]}),u.jsxs("div",{className:"model-actions",children:[(()=>{const _=navigator.deviceMemory||4,A=Ge.getState().getVRAMStatus(k.id,_);return A.status==="tight"||A.status==="insufficient"?u.jsx("div",{className:"vram-warning",title:A.message,style:{fontSize:"0.75rem",color:A.color,marginBottom:"8px",display:"flex",alignItems:"center",gap:"4px"},children:u.jsxs("span",{children:[" ",A.message]})}):null})(),E==="active"&&u.jsx("span",{className:"status-badge active",children:" Active"}),E==="downloaded"&&u.jsx("button",{className:"btn-load",onClick:()=>x(k.id),children:" Load"}),E==="available"&&u.jsx("button",{className:"btn-download",onClick:()=>g(k.id),children:" Download"}),E==="downloading"&&u.jsx("span",{className:"status-badge downloading",children:"Downloading..."}),(E==="downloaded"||E==="active")&&u.jsx("button",{className:"btn-remove",onClick:_=>{_.stopPropagation(),v(k.id)},title:"Remove from cache",children:""})]})]},k.id)})}),j.length===0&&u.jsx("div",{className:"empty-state",children:u.jsx("p",{children:"No models in this category"})})]}),u.jsxs("footer",{className:"ms-footer",children:[u.jsx("p",{className:"hint",children:" Models are cached locally after download. Larger models = better quality but slower."}),u.jsx("button",{className:"btn-clear-cache",onClick:w,children:" Clear All Cache"})]})]})}):null}const p5=M.memo(h5);function m5({isOpen:e,onClose:t}){const[n,a]=M.useState({localRequests:0,externalRequests:0,modelsLoaded:[],storageUsed:0,lastActivity:null});M.useEffect(()=>{navigator.storage?.estimate&&navigator.storage.estimate().then(({usage:p,quota:m})=>{a(g=>({...g,storageUsed:p||0,storageQuota:m||0}))});const c=window.fetch;let d=0,h=0;return window.fetch=function(...p){const m=p[0]?.toString()||"";return m.startsWith("/")||m.includes("localhost")?d++:m.startsWith("http")&&h++,a(g=>({...g,localRequests:d,externalRequests:h,lastActivity:new Date().toISOString()})),c.apply(this,p)},()=>{window.fetch=c}},[]);const o=c=>{if(!c)return"0 B";const d=1024,h=["B","KB","MB","GB"],p=Math.floor(Math.log(c)/Math.log(d));return`${(c/Math.pow(d,p)).toFixed(1)} ${h[p]}`},s=n.externalRequests===0?100:Math.max(0,100-n.externalRequests/(n.localRequests+1)*100);return e?u.jsx("div",{className:"privacy-monitor-overlay",onClick:t,children:u.jsxs("div",{className:"privacy-monitor",onClick:c=>c.stopPropagation(),children:[u.jsxs("header",{className:"pm-header",children:[u.jsx("h2",{children:" Privacy Monitor"}),u.jsx("button",{className:"btn-close",onClick:t,children:""})]}),u.jsxs("div",{className:"pm-content",children:[u.jsxs("div",{className:"privacy-score-section",children:[u.jsxs("div",{className:`privacy-score ${s===100?"perfect":s>80?"good":"warning"}`,children:[u.jsxs("span",{className:"score-value",children:[Math.round(s),"%"]}),u.jsx("span",{className:"score-label",children:"Local Processing"})]}),s===100&&u.jsx("div",{className:"privacy-badge",children:" Zero Cloud Leakage"})]}),u.jsxs("div",{className:"pm-stats-grid",children:[u.jsxs("div",{className:"pm-stat",children:[u.jsx("span",{className:"stat-icon",children:""}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-value",children:n.localRequests}),u.jsx("span",{className:"stat-label",children:"Local Requests"})]})]}),u.jsxs("div",{className:"pm-stat",children:[u.jsx("span",{className:"stat-icon",children:""}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-value",children:n.externalRequests}),u.jsx("span",{className:"stat-label",children:"External Calls"})]})]}),u.jsxs("div",{className:"pm-stat",children:[u.jsx("span",{className:"stat-icon",children:""}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-value",children:o(n.storageUsed)}),u.jsx("span",{className:"stat-label",children:"Local Storage"})]})]}),u.jsxs("div",{className:"pm-stat",children:[u.jsx("span",{className:"stat-icon",children:""}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-value",children:"WebLLM"}),u.jsx("span",{className:"stat-label",children:"AI Engine"})]})]})]}),u.jsxs("div",{className:"pm-features",children:[u.jsx("h3",{children:"Privacy Features"}),u.jsxs("ul",{children:[u.jsx("li",{children:" All AI runs locally in your browser"}),u.jsx("li",{children:" No data sent to external APIs"}),u.jsx("li",{children:" Workflows stored in IndexedDB"}),u.jsx("li",{children:" No telemetry or tracking"}),u.jsx("li",{children:" Open source & auditable"})]})]}),u.jsxs("div",{className:"pm-storage",children:[u.jsx("h3",{children:"Local Data"}),u.jsx("div",{className:"storage-bar",children:u.jsx("div",{className:"storage-used",style:{width:`${Math.min(100,n.storageUsed/(n.storageQuota||1)*100)}%`}})}),u.jsxs("span",{className:"storage-text",children:[o(n.storageUsed)," /"," ",o(n.storageQuota)]})]})]})]})}):null}const g5=M.memo(m5);function y5(){const[e,t]=M.useState(!1),[n,a]=M.useState(!1),o=M.useCallback(()=>{window.dispatchEvent(new CustomEvent("toggleOverseer"))},[]);return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"ai-controls-panel",children:[u.jsxs("button",{className:"ai-btn overseer-btn",onClick:o,title:"Toggle Overseer Agent",children:[" ",u.jsx("span",{children:"Chat with Overseer"})]}),u.jsx("div",{className:"divider"}),u.jsx("button",{className:`ai-btn ${n?"active":""}`,onClick:()=>a(!0),title:"Switch Model",children:""}),u.jsx("button",{className:`ai-btn ${e?"active":""}`,onClick:()=>t(!0),title:"Privacy Monitor",children:""})]}),e&&cp.createPortal(u.jsx(g5,{onClose:()=>t(!1),isOpen:!0}),document.body),n&&cp.createPortal(u.jsx(p5,{onClose:()=>a(!1),isOpen:!0}),document.body)]})}function x5({isOpen:e,onClose:t,onSelectNode:n,insertPosition:a}){const[o,s]=M.useState(""),[c,d]=M.useState(0),h=M.useRef(null),p=M.useRef(null),m=M.useMemo(()=>Object.values(ki).map(j=>({...j,categoryName:qr[j.category]?.name||j.category,categoryColor:qr[j.category]?.color||"#666"})),[]),g=M.useMemo(()=>{if(!o.trim())return m;const j=o.toLowerCase();return m.filter(S=>S.name.toLowerCase().includes(j)||S.description?.toLowerCase().includes(j)||S.categoryName.toLowerCase().includes(j))},[m,o]),x=M.useMemo(()=>{const j={};return g.forEach(S=>{j[S.category]||(j[S.category]={name:S.categoryName,color:S.categoryColor,nodes:[]}),j[S.category].nodes.push(S)}),j},[g]),v=M.useMemo(()=>{const j=[];return Object.entries(x).forEach(([,S])=>{S.nodes.forEach(k=>j.push(k))}),j},[x]);M.useEffect(()=>{e&&h.current&&(h.current.focus(),s(""),d(0))},[e]),M.useEffect(()=>{if(p.current&&v.length>0){const j=p.current.querySelector(".node-item.selected");j&&j.scrollIntoView({block:"nearest"})}},[c,v.length]);const w=M.useCallback(j=>{switch(j.key){case"ArrowDown":j.preventDefault(),d(S=>Math.min(S+1,v.length-1));break;case"ArrowUp":j.preventDefault(),d(S=>Math.max(S-1,0));break;case"Enter":j.preventDefault(),v[c]&&(n(v[c].type,a),t());break;case"Escape":t();break}},[v,c,n,a,t]),N=M.useCallback(j=>{n(j,a),t()},[n,a,t]);return e?u.jsx("div",{className:"command-palette-overlay",onClick:t,children:u.jsxs("div",{className:"command-palette",onClick:j=>j.stopPropagation(),onKeyDown:w,children:[u.jsxs("div",{className:"palette-header",children:[u.jsx("span",{className:"search-icon",children:""}),u.jsx("input",{ref:h,type:"text",className:"palette-search",placeholder:"Search nodes... (Esc to close)",value:o,onChange:j=>{s(j.target.value),d(0)}}),u.jsx("span",{className:"shortcut-hint",children:"K"})]}),u.jsxs("div",{className:"palette-content",ref:p,children:[Object.entries(x).map(([j,S])=>u.jsxs("div",{className:"node-category",children:[u.jsx("div",{className:"category-header",style:{"--cat-color":S.color},children:S.name}),S.nodes.map(k=>{const E=v.findIndex(T=>T.type===k.type);return u.jsxs("div",{className:`node-item ${E===c?"selected":""}`,onClick:()=>N(k.type),onMouseEnter:()=>d(E),children:[u.jsx("span",{className:"node-icon",children:k.icon}),u.jsxs("div",{className:"node-info",children:[u.jsx("span",{className:"node-name",children:k.name}),u.jsx("span",{className:"node-desc",children:k.description})]})]},k.type)})]},j)),v.length===0&&u.jsxs("div",{className:"no-results",children:['No nodes match "',o,'"']})]})]})}):null}const v5=M.memo(x5);function b5({onClose:e}){const t=We(h=>h.logs),n=We(h=>h.nodeResults),[a,o]=M.useState("timeline"),s=M.useMemo(()=>{const h={},p={total:0,byNode:{}};let m=0,g=0;Object.entries(n).forEach(([v,w])=>{m++,w.executionTime&&(g+=w.executionTime,h[v]||(h[v]={times:[],avg:0,max:0,min:1/0}),h[v].times.push(w.executionTime),h[v].max=Math.max(h[v].max,w.executionTime),h[v].min=Math.min(h[v].min,w.executionTime),h[v].avg=h[v].times.reduce((N,j)=>N+j,0)/h[v].times.length),(w.error||w.success===!1)&&(p.total++,p.byNode[v]=(p.byNode[v]||0)+1)});const x=Object.entries(h).map(([v,w])=>({nodeId:v,avg:w.avg,max:w.max})).sort((v,w)=>w.avg-v.avg).slice(0,5);return{totalExecutions:m,totalTime:g,avgTime:m>0?g/m:0,errorCount:p,slowestNodes:x,nodeTimings:h}},[n]),c=M.useMemo(()=>t.slice(-50).reverse(),[t]),d=h=>h<1e3?`${Math.round(h)}ms`:`${(h/1e3).toFixed(2)}s`;return u.jsx("div",{className:"analytics-overlay",onClick:e,children:u.jsxs("div",{className:"analytics-panel",onClick:h=>h.stopPropagation(),children:[u.jsxs("div",{className:"analytics-header",children:[u.jsx("h2",{children:" Execution Analytics"}),u.jsx("button",{className:"close-btn",onClick:e,children:""})]}),u.jsxs("div",{className:"analytics-tabs",children:[u.jsx("button",{className:`tab ${a==="timeline"?"active":""}`,onClick:()=>o("timeline"),children:"Timeline"}),u.jsx("button",{className:`tab ${a==="performance"?"active":""}`,onClick:()=>o("performance"),children:"Performance"}),u.jsxs("button",{className:`tab ${a==="errors"?"active":""}`,onClick:()=>o("errors"),children:["Errors"," ",s.errorCount.total>0&&u.jsx("span",{className:"error-badge",children:s.errorCount.total})]})]}),u.jsxs("div",{className:"analytics-body",children:[u.jsxs("div",{className:"stats-grid",children:[u.jsxs("div",{className:"stat-card",children:[u.jsx("span",{className:"stat-value",children:s.totalExecutions}),u.jsx("span",{className:"stat-label",children:"Executions"})]}),u.jsxs("div",{className:"stat-card",children:[u.jsx("span",{className:"stat-value",children:d(s.avgTime)}),u.jsx("span",{className:"stat-label",children:"Avg Time"})]}),u.jsxs("div",{className:"stat-card",children:[u.jsx("span",{className:"stat-value",children:d(s.totalTime)}),u.jsx("span",{className:"stat-label",children:"Total Time"})]}),u.jsxs("div",{className:"stat-card error",children:[u.jsx("span",{className:"stat-value",children:s.errorCount.total}),u.jsx("span",{className:"stat-label",children:"Errors"})]})]}),a==="timeline"&&u.jsxs("div",{className:"timeline-section",children:[u.jsx("h3",{children:"Recent Activity"}),u.jsx("div",{className:"timeline-list",children:c.length>0?c.map((h,p)=>u.jsxs("div",{className:`timeline-item ${h.type}`,children:[u.jsx("span",{className:"timeline-icon",children:h.type==="success"?"":h.type==="error"?"":h.type==="warning"?"":""}),u.jsx("span",{className:"timeline-node",children:h.nodeName}),u.jsx("span",{className:"timeline-msg",children:h.message})]},p)):u.jsx("div",{className:"empty-state",children:"No execution history yet"})})]}),a==="performance"&&u.jsxs("div",{className:"performance-section",children:[u.jsx("h3",{children:"Slowest Nodes"}),u.jsx("div",{className:"performance-list",children:s.slowestNodes.length>0?s.slowestNodes.map((h,p)=>u.jsxs("div",{className:"performance-item",children:[u.jsxs("span",{className:"rank",children:["#",p+1]}),u.jsx("span",{className:"node-id",children:h.nodeId.split("-")[0]}),u.jsx("div",{className:"timing-bar",style:{width:`${Math.min(h.avg/(s.slowestNodes[0]?.avg||1)*100,100)}%`}}),u.jsx("span",{className:"timing-value",children:d(h.avg)})]},h.nodeId)):u.jsx("div",{className:"empty-state",children:"No performance data yet"})})]}),a==="errors"&&u.jsxs("div",{className:"errors-section",children:[u.jsx("h3",{children:"Error Log"}),u.jsx("div",{className:"errors-list",children:s.errorCount.total>0?Object.entries(s.errorCount.byNode).map(([h,p])=>u.jsxs("div",{className:"error-item",children:[u.jsxs("span",{className:"error-count",children:[p,"x"]}),u.jsx("span",{className:"error-node",children:h.split("-")[0]})]},h)):u.jsx("div",{className:"empty-state",children:" No errors!"})})]})]})]})})}const w5=M.memo(b5),S5={manualTrigger:sO,scheduleTrigger:cO,webhookTrigger:dO,errorTrigger:hO,browserEventTrigger:gO,httpRequest:kO,codeExecutor:xO,setVariable:bO,fileSystem:jO,localStorage:SO,pythonExecutor:u_,ifElse:AO,loop:MO,switchNode:OO,merge:RO,aiAgent:FO,chatModel:GO,vectorMemory:YO,waitForApproval:QO,subWorkflow:ZO,textToSpeech:o_,imageGeneration:l_,semanticRouter:e_,evaluator:n_,swarm:r_,output:B4,groupNode:LO},N5={animated:u5};function j5(){const e=M.useRef(null),{screenToFlowPosition:t,fitView:n,zoomIn:a,zoomOut:o}=pu(),[s,c]=M.useState(null),[d,h]=M.useState(null),[p,m]=M.useState(!0),[g,x]=M.useState(!1),[v,w]=M.useState(!1),{zoom:N}=Y2(),j=Ne(ie=>ie.nodes),S=Ne(ie=>ie.edges),k=Ne(ie=>ie.previewNodes),E=Ne(ie=>ie.previewEdges),T=Ne(ie=>ie.onNodesChange),_=Ne(ie=>ie.onEdgesChange),A=Ne(ie=>ie.onConnect),z=Ne(ie=>ie.addNode),G=Ne(ie=>ie.deleteNode),F=Ne(ie=>ie.setSelectedNode),L=Ne(ie=>ie.selectedNodeId),$=Ne(ie=>ie.getWorkflowData),H=Ja(),Q=We(ie=>ie.currentNodeId),D=We(ie=>ie.isRunning),q=M.useCallback(ie=>kD(ie,j,S),[j,S]),I=M.useCallback(()=>{c(null)},[]),V=M.useCallback(()=>{F(null),c(null)},[F]),W=M.useCallback((ie,te)=>{ie.preventDefault(),F(te.id),c({x:ie.clientX,y:ie.clientY,type:"node",nodeId:te.id})},[F]),J=M.useCallback(ie=>{ie.preventDefault();const te=t({x:ie.clientX,y:ie.clientY});c({x:ie.clientX,y:ie.clientY,type:"pane",position:te})},[t]),[O,R]=M.useState(null);M.useEffect(()=>{const ie=ue=>{const{edgeId:me}=ue.detail;S.find(xe=>xe.id===me)&&(Ne.getState().onEdgesChange([{id:me,type:"remove"}]),H.info("Connection deleted"))},te=ue=>{const{edgeId:me,position:ge}=ue.detail;R(me),c({x:ge.x+(e.current?.getBoundingClientRect().left||0),y:ge.y+(e.current?.getBoundingClientRect().top||0),type:"insert",position:{x:ge.x,y:ge.y}})};return window.addEventListener("deleteEdge",ie),window.addEventListener("addNodeOnEdge",te),()=>{window.removeEventListener("deleteEdge",ie),window.removeEventListener("addNodeOnEdge",te)}},[S,H]);const U=M.useCallback(ie=>{const te=j.find(me=>me.id===L),ue=me=>{if(s?.position)if(s.type==="insert"&&O){const ge=S.find(xe=>xe.id===O);if(ge){const xe=ar(me,s.position);z(xe);const we={id:`e${ge.source}-${xe.id}`,source:ge.source,sourceHandle:ge.sourceHandle,target:xe.id,targetHandle:"input-0",type:"animated"},Ce={id:`e${xe.id}-${ge.target}`,source:xe.id,sourceHandle:"output-0",target:ge.target,targetHandle:ge.targetHandle,type:"animated"};Ne.getState().onEdgesChange([{id:O,type:"remove"}]);const{edges:Ue,setEdges:$e}=Ne.getState();$e([...Ue.filter(ut=>ut.id!==O),we,Ce]),H.success("Node inserted")}R(null)}else z(ar(me,s.position))};switch(ie){case"delete":L&&(G(L),F(null),H.info("Node deleted"));break;case"duplicate":if(te){const me=ar(te.type,{x:te.position.x+50,y:te.position.y+50});me.data={...te.data,label:`${te.data.label} (copy)`},z(me),H.success("Node duplicated")}break;case"copy":te&&(h({...te}),H.info("Node copied"));break;case"cut":te&&(h({...te}),G(L),F(null),H.info("Node cut"));break;case"paste":if(d&&s?.position){const me=ar(d.type,s.position);me.data={...d.data,label:`${d.data.label} (paste)`},z(me),H.success("Node pasted")}break;case"addTrigger":ue("manualTrigger");break;case"addHTTP":ue("httpRequest");break;case"addAI":ue("aiAgent");break;case"codeExecutor":ue("codeExecutor");break;case"setVariable":ue("setVariable");break;case"ifElse":ue("ifElse");break;case"textToSpeech":ue("textToSpeech");break;case"output":ue("output");break;case"fitView":n({padding:.2});break;case"zoomIn":a();break;case"zoomOut":o();break}c(null)},[j,S,L,G,F,z,d,s,O,n,a,o,H]);M.useEffect(()=>{const ie=te=>{if(te.target.tagName==="INPUT"||te.target.tagName==="TEXTAREA")return;const ue=te.ctrlKey||te.metaKey;if(ue&&te.key==="s"){te.preventDefault();const me=$();localStorage.setItem("flownode-workflow",JSON.stringify(me)),H.success("Workflow saved")}if(ue&&te.key==="c"&&L){const me=j.find(ge=>ge.id===L);me&&(h({...me}),H.info("Node copied"))}if(ue&&te.key==="v"&&d){const me=ar(d.type,{x:d.position.x+100,y:d.position.y+100});me.data={...d.data},z(me),H.success("Node pasted")}if(ue&&te.key==="d"&&L){te.preventDefault();const me=j.find(ge=>ge.id===L);if(me){const ge=ar(me.type,{x:me.position.x+50,y:me.position.y+50});ge.data={...me.data,label:`${me.data.label} (copy)`},z(ge),F(ge.id),H.success("Node duplicated")}}ue&&(te.key==="+"||te.key==="=")&&(te.preventDefault(),a()),ue&&te.key==="-"&&(te.preventDefault(),o()),ue&&te.key==="0"&&(te.preventDefault(),n({padding:.2})),ue&&te.key==="k"&&(te.preventDefault(),x(!0)),te.shiftKey&&te.key==="A"&&(te.preventDefault(),w(me=>!me))};return window.addEventListener("keydown",ie),()=>window.removeEventListener("keydown",ie)},[j,L,d,z,F,$,n,a,o,H]);const B=M.useCallback(ie=>{ie.preventDefault(),ie.dataTransfer.dropEffect="move"},[]),re=M.useCallback(ie=>{ie.preventDefault();const te=ie.dataTransfer.getData("application/reactflow");if(!te||!ki[te])return;const ue=t({x:ie.clientX,y:ie.clientY}),me=ar(te,ue);z(me)},[t,z]),de=M.useMemo(()=>({type:"animated",style:{stroke:"var(--edge-color)",strokeWidth:2}}),[]),fe=M.useCallback(ie=>D&&ie.id===Q?"var(--color-success)":yu(ie.type),[D,Q]);return u.jsxs("div",{className:"workflow-editor",ref:e,children:[u.jsxs(F2,{nodes:[...j,...k],edges:[...S,...E],onNodesChange:T,onEdgesChange:_,onConnect:A,onNodeClick:I,onPaneClick:V,onNodeContextMenu:W,onPaneContextMenu:J,onDragOver:B,onDrop:re,nodeTypes:S5,edgeTypes:N5,isValidConnection:q,defaultEdgeOptions:de,snapToGrid:!0,snapGrid:[15,15],minZoom:.5,maxZoom:5,deleteKeyCode:["Backspace","Delete"],proOptions:{hideAttribution:!0},children:[u.jsx(K2,{variant:"dots",gap:20,size:1,color:"var(--border-color)"}),u.jsxs("div",{className:`minimap-container ${p?"expanded":"collapsed"}`,children:[u.jsx("button",{className:"minimap-toggle",onClick:()=>m(!p),title:p?"Hide minimap":"Show minimap",children:""}),p&&u.jsx(xD,{nodeColor:fe,maskColor:"rgba(10, 10, 15, 0.8)",className:"workflow-minimap",pannable:!0,zoomable:!0})]}),u.jsxs("div",{className:"view-controls-panel",children:[u.jsxs("div",{className:"zoom-controls",children:[u.jsx("button",{className:"zoom-btn",onClick:()=>o(),title:"Zoom out (Ctrl+-)",children:""}),u.jsxs("span",{className:"zoom-level",children:[Math.round(N*100),"%"]}),u.jsx("button",{className:"zoom-btn",onClick:()=>a(),title:"Zoom in (Ctrl++)",children:"+"})]}),u.jsx("button",{className:"view-btn",onClick:()=>n({padding:.2}),title:"Fit to screen (Ctrl+0)",children:""})]}),u.jsx(y5,{}),u.jsx(f5,{})]}),s&&u.jsx(TD,{x:s.x,y:s.y,type:s.type,onAction:U,onClose:()=>c(null)}),u.jsx(v5,{isOpen:g,onClose:()=>x(!1),onSelectNode:(ie,te)=>{z(ar(ie,te||{x:400,y:300}))},insertPosition:s?.position||{x:400,y:300}}),v&&u.jsx(w5,{onClose:()=>w(!1)}),j.length===0&&u.jsxs("div",{className:"workflow-empty-state",children:[u.jsx("div",{className:"empty-icon",children:""}),u.jsx("h3",{children:"Build Your Workflow"}),u.jsx("p",{children:"Drag nodes from the sidebar to get started"})]})]})}const Ep=[{id:"api-fetch",name:"API Fetch & Transform",description:"Fetch data from an API and process it with code",category:"api",icon:"",nodes:[{id:"trigger-1",type:"manualTrigger",position:{x:100,y:200},data:{label:"Start"}},{id:"http-1",type:"httpRequest",position:{x:350,y:200},data:{label:"Fetch Data",method:"GET",url:"https://jsonplaceholder.typicode.com/posts/1",timeout:3e4}},{id:"code-1",type:"codeExecutor",position:{x:600,y:200},data:{label:"Transform",code:`// Process the API response
const { data } = input;
return {
  title: data.title.toUpperCase(),
  body: data.body.substring(0, 100) + "...",
  processed: true
};`}}],edges:[{id:"e1-2",source:"trigger-1",target:"http-1",sourceHandle:"output-0",targetHandle:"input-0"},{id:"e2-3",source:"http-1",target:"code-1",sourceHandle:"output-0",targetHandle:"input-0"}]},{id:"conditional-routing",name:"Conditional Routing",description:"Route data based on conditions using If/Else",category:"logic",icon:"",nodes:[{id:"trigger-1",type:"manualTrigger",position:{x:100,y:250},data:{label:"Input"}},{id:"setvar-1",type:"setVariable",position:{x:320,y:250},data:{label:"Set Status",variableName:"status",value:"active",mode:"set"}},{id:"ifelse-1",type:"ifElse",position:{x:540,y:250},data:{label:"Check Status",condition:"status",operator:"equals",compareValue:"active"}},{id:"code-true",type:"codeExecutor",position:{x:780,y:150},data:{label:"Active Path",code:'return { ...input, message: "User is ACTIVE" };'}},{id:"code-false",type:"codeExecutor",position:{x:780,y:350},data:{label:"Inactive Path",code:'return { ...input, message: "User is INACTIVE" };'}}],edges:[{id:"e1",source:"trigger-1",target:"setvar-1",sourceHandle:"output-0",targetHandle:"input-0"},{id:"e2",source:"setvar-1",target:"ifelse-1",sourceHandle:"output-0",targetHandle:"input-0"},{id:"e3",source:"ifelse-1",target:"code-true",sourceHandle:"output-0",targetHandle:"input-0"},{id:"e4",source:"ifelse-1",target:"code-false",sourceHandle:"output-1",targetHandle:"input-0"}]},{id:"loop-processing",name:"Loop Over Items",description:"Process an array of items one by one",category:"data",icon:"",nodes:[{id:"trigger-1",type:"manualTrigger",position:{x:100,y:200},data:{label:"Start"}},{id:"setvar-1",type:"setVariable",position:{x:320,y:200},data:{label:"Create Array",variableName:"items",value:"{{ [1, 2, 3, 4, 5] }}",mode:"set"}},{id:"loop-1",type:"loop",position:{x:540,y:200},data:{label:"Loop Items",itemsPath:"items",maxIterations:100}},{id:"code-1",type:"codeExecutor",position:{x:760,y:120},data:{label:"Process Item",code:`return { 
  item: input.item,
  squared: input.item * input.item,
  index: input.index 
};`}},{id:"code-done",type:"codeExecutor",position:{x:760,y:280},data:{label:"Done",code:`return { 
  completed: true, 
  results: input.loopResults 
};`}}],edges:[{id:"e1",source:"trigger-1",target:"setvar-1",sourceHandle:"output-0",targetHandle:"input-0"},{id:"e2",source:"setvar-1",target:"loop-1",sourceHandle:"output-0",targetHandle:"input-0"},{id:"e3",source:"loop-1",target:"code-1",sourceHandle:"output-0",targetHandle:"input-0"},{id:"e4",source:"loop-1",target:"code-done",sourceHandle:"output-1",targetHandle:"input-0"}]},{id:"ai-chat",name:"AI Chat Assistant",description:"Send text to AI and get a response",category:"ai",icon:"",nodes:[{id:"trigger-1",type:"manualTrigger",position:{x:100,y:200},data:{label:"User Input"}},{id:"setvar-1",type:"setVariable",position:{x:340,y:200},data:{label:"Set Question",variableName:"question",value:"What is the capital of France?",mode:"set"}},{id:"ai-1",type:"aiAgent",position:{x:580,y:200},data:{label:"AI Assistant",systemPrompt:"You are a helpful assistant. Answer concisely.",modelId:"gemma-2-2b-it-q4f16_1-MLC",temperature:.7,maxTokens:500}}],edges:[{id:"e1",source:"trigger-1",target:"setvar-1",sourceHandle:"output-0",targetHandle:"input-0"},{id:"e2",source:"setvar-1",target:"ai-1",sourceHandle:"output-0",targetHandle:"input-0"}]},{id:"data-pipeline",name:"Data Pipeline",description:"Fetch, filter, and aggregate data",category:"data",icon:"",nodes:[{id:"trigger-1",type:"manualTrigger",position:{x:100,y:200},data:{label:"Start Pipeline"}},{id:"http-1",type:"httpRequest",position:{x:320,y:200},data:{label:"Fetch Users",method:"GET",url:"https://jsonplaceholder.typicode.com/users",timeout:3e4}},{id:"code-filter",type:"codeExecutor",position:{x:540,y:200},data:{label:"Filter & Map",code:`// Filter and transform the data
const users = input.data;
return {
  users: users.map(u => ({
    id: u.id,
    name: u.name,
    email: u.email,
    city: u.address.city
  })),
  count: users.length
};`}},{id:"code-aggregate",type:"codeExecutor",position:{x:760,y:200},data:{label:"Aggregate",code:`// Create summary
return {
  summary: \`Processed \${input.count} users\`,
  users: input.users,
  timestamp: new Date().toISOString()
};`}}],edges:[{id:"e1",source:"trigger-1",target:"http-1",sourceHandle:"output-0",targetHandle:"input-0"},{id:"e2",source:"http-1",target:"code-filter",sourceHandle:"output-0",targetHandle:"input-0"},{id:"e3",source:"code-filter",target:"code-aggregate",sourceHandle:"output-0",targetHandle:"input-0"}]},{id:"poem-speech",name:"Poem to Speech",description:"Generate a poem using AI and read it out loud",category:"ai",icon:"",nodes:[{id:"trigger-1",type:"manualTrigger",position:{x:100,y:200},data:{label:"Start",description:"Enter your poem topic",inputFields:[{name:"topic",type:"text",label:"Poem Topic",placeholder:"Enter a topic for the poem...",required:!0}]}},{id:"ai-1",type:"aiAgent",position:{x:350,y:200},data:{label:"Poem Writer",systemPrompt:"You are a creative poet. Write beautiful, evocative poems based on the given topic. Keep poems to 4-8 lines. Output ONLY the poem, no commentary.",reasoningMode:"direct",temperature:.8,maxTokens:500}},{id:"tts-1",type:"textToSpeech",position:{x:600,y:200},data:{label:"Speak Poem",provider:"webSpeech",voice:"default",speed:.9,pitch:1,autoPlay:!0}},{id:"output-1",type:"output",position:{x:850,y:200},data:{label:"Final Output",outputType:"console",formatJson:!1}}],edges:[{id:"e1",source:"trigger-1",target:"ai-1",sourceHandle:"output-0",targetHandle:"input-0",type:"animated"},{id:"e2",source:"ai-1",target:"tts-1",sourceHandle:"output-0",targetHandle:"input-0",type:"animated"},{id:"e3",source:"tts-1",target:"output-1",sourceHandle:"output-0",targetHandle:"input-0",type:"animated"}]}],rs=ED();function E5(){const[e,t]=M.useState(null),[n,a]=M.useState(""),[o,s]=M.useState(!1),c=Ne(S=>S.loadWorkflow),d=Ja(),h=e?Object.values(qr).find(S=>S.name===e):null,p=M.useMemo(()=>e?rs[e]||[]:[],[e]),m=M.useMemo(()=>{if(!n.trim())return p;const S=n.toLowerCase();return p.filter(k=>k.name.toLowerCase().includes(S)||k.description.toLowerCase().includes(S))},[p,n]),g=M.useMemo(()=>{if(!n.trim())return Object.entries(rs);const S=n.toLowerCase();return Object.entries(rs).filter(([k,E])=>k.toLowerCase().includes(S)?!0:E.some(T=>T.name.toLowerCase().includes(S)||T.description.toLowerCase().includes(S)))},[n]),x=M.useCallback(S=>{t(S),a("")},[]),v=M.useCallback(()=>{t(null),a("")},[]),w=M.useCallback((S,k)=>{S.dataTransfer.setData("application/reactflow",k),S.dataTransfer.effectAllowed="move"},[]),N=M.useCallback(S=>{c({nodes:S.nodes,edges:S.edges}),d.success(`Loaded template: ${S.name}`)},[c,d]),j=Object.values(rs).flat().length;return u.jsxs("aside",{className:"node-sidebar",children:[u.jsxs("div",{className:"sidebar-header",children:[e?u.jsxs("div",{className:"breadcrumb",children:[u.jsx("button",{className:"back-btn",onClick:v,title:"Back to folders",children:""}),u.jsxs("span",{className:"current-folder",style:{"--folder-color":h?.color},children:[" ",e]})]}):u.jsx("h2",{children:" Nodes"}),u.jsx("div",{className:"header-actions",children:u.jsx("button",{className:`templates-toggle ${o?"active":""}`,onClick:()=>s(!o),title:"Templates",children:""})})]}),o&&u.jsxs("div",{className:"templates-panel",children:[u.jsxs("div",{className:"templates-header",children:[u.jsx("h3",{children:" Templates"}),u.jsx("span",{className:"templates-count",children:Ep.length})]}),u.jsx("div",{className:"templates-list",children:Ep.map(S=>u.jsxs("button",{className:"template-item",onClick:()=>N(S),children:[u.jsx("span",{className:"template-icon",children:S.icon}),u.jsxs("div",{className:"template-info",children:[u.jsx("span",{className:"template-name",children:S.name}),u.jsx("span",{className:"template-desc",children:S.description})]})]},S.id))})]}),!o&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"sidebar-search",children:u.jsxs("div",{className:"search-wrapper",children:[u.jsx("span",{className:"search-icon",children:""}),u.jsx("input",{type:"text",placeholder:e?"Search in folder...":"Search nodes...",value:n,onChange:S=>a(S.target.value),className:"node-search-input"}),n&&u.jsx("button",{className:"search-clear",onClick:()=>a(""),children:""})]})}),u.jsxs("div",{className:"sidebar-content",children:[!e&&u.jsxs("div",{className:"folder-list",children:[g.map(([S,k])=>{const E=Object.values(qr).find(T=>T.name===S);return u.jsxs("button",{className:"folder-item",onClick:()=>x(S),style:{"--folder-color":E?.color},children:[u.jsx("span",{className:"folder-icon",children:""}),u.jsxs("div",{className:"folder-info",children:[u.jsx("span",{className:"folder-name",children:S}),u.jsx("span",{className:"folder-desc",children:E?.description})]}),u.jsx("span",{className:"folder-count",children:k.length}),u.jsx("span",{className:"folder-arrow",children:""})]},S)}),n&&g.length===0&&u.jsx("div",{className:"no-results",children:u.jsxs("p",{children:['No folders match "',n,'"']})})]}),e&&u.jsxs("div",{className:"node-list",children:[m.map(S=>u.jsxs("div",{className:"draggable-node",draggable:!0,onDragStart:k=>w(k,S.type),style:{"--node-color":h?.color},title:S.description,children:[u.jsx("span",{className:"node-icon",children:S.icon}),u.jsxs("div",{className:"node-info",children:[u.jsx("span",{className:"node-name",children:S.name}),u.jsx("span",{className:"node-description",children:S.description})]})]},S.type)),n&&m.length===0&&u.jsxs("div",{className:"no-results",children:[u.jsxs("p",{children:['No nodes match "',n,'"']}),u.jsx("button",{onClick:()=>a(""),children:"Clear"})]}),!n&&m.length===0&&u.jsx("div",{className:"no-results",children:u.jsx("p",{children:"This folder is empty"})})]})]})]}),u.jsx("div",{className:"sidebar-footer",children:u.jsx("p",{className:"tip",children:o?"Click template to load":e?`${m.length} nodes  Drag to canvas`:`${j} nodes in ${Object.keys(rs).length} folders`})})]})}const k5=M.memo(E5);function C5({onClose:e}){return u.jsx("div",{className:"modal-overlay",onClick:e,children:u.jsxs("div",{className:"modal-content",onClick:t=>t.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:" Getting Started"}),u.jsx("button",{className:"btn-close",onClick:e,children:""})]}),u.jsxs("div",{className:"modal-body",children:[u.jsxs("div",{className:"tutorial-intro",children:[u.jsxs("p",{children:["Welcome to ",u.jsx("strong",{children:"IOSANS"}),". You can learn the basics by reading below, or take an interactive tour of the interface."]}),u.jsx("button",{className:"btn-primary",style:{width:"100%",padding:"12px",margin:"16px 0",fontSize:"1.1em"},onClick:()=>{e(),window.dispatchEvent(new Event("startTour"))},children:" Start Guided Onboarding"})]}),u.jsx("hr",{style:{borderColor:"rgba(255,255,255,0.1)",margin:"20px 0"}}),u.jsx("h3",{children:" Quick Start Guide"}),u.jsxs("div",{className:"tutorial-step",children:[u.jsx("h4",{children:"1. Start with a Trigger"}),u.jsxs("p",{children:["Drag a ",u.jsx("strong",{children:"Manual Trigger"})," from the sidebar (green category). This tells the workflow when to start running."]})]}),u.jsxs("div",{className:"tutorial-step",children:[u.jsx("h4",{children:"2. Add Intelligence"}),u.jsxs("p",{children:["Add an ",u.jsx("strong",{children:"AI Agent"}),' node. Configure its system prompt to define its personality and task (e.g., "Summarize this text").']})]}),u.jsxs("div",{className:"tutorial-step",children:[u.jsx("h4",{children:"3. Connect & Flow"}),u.jsxs("p",{children:["Connect nodes by dragging from"," ",u.jsx("span",{style:{color:"var(--color-success)"},children:"Source"})," to"," ",u.jsx("span",{style:{color:"var(--text-muted)"},children:"Target"})," ","handles. Data flows along these lines."]})]}),u.jsxs("div",{className:"tutorial-step",children:[u.jsx("h4",{children:"4. View Results"}),u.jsxs("p",{children:["Add an ",u.jsx("strong",{children:"Output Node"})," to visualize the final result, or inspect the ",u.jsx("strong",{children:"Logs Panel"})," on the right for detailed execution steps."]})]}),u.jsxs("div",{className:"tip-box",children:[u.jsx("strong",{children:"Pro Tip:"})," Use the ",u.jsx("strong",{children:"Overseer Agent"})," ","(Eye icon) to help you build complex workflows automatically!"]})]})]})})}const A5=M.memo(C5),nu={manualTrigger:{id:"manualTrigger",icon:"",title:"Manual Trigger",category:"Triggers",overview:"The Manual Trigger is the starting point for on-demand workflows. When you click the Run button, this node fires first and passes its configured payload to connected nodes. It's ideal for testing, user-initiated automations, or workflows that need human activation.",technicalDetails:`
**Execution Flow:**
1. User clicks Run button or presses Ctrl+Enter
2. Manual Trigger node activates and emits its payload
3. Output data flows to all connected downstream nodes
4. Execution continues through the graph

**Output Schema:**
\`\`\`javascript
{
  timestamp: "2024-01-15T10:30:00.000Z",
  trigger: "manual",
  text: "Your default payload text",
  data: { ...formFieldValues }
}
\`\`\`
    `,config:[{name:"Label",type:"string",desc:"Display name for the node",default:"Manual Trigger"},{name:"Default Payload",type:"string (multiline)",desc:"Text content passed as 'text' field in output",default:""},{name:"Input Fields",type:"Form Builder",desc:"Dynamic form fields for user input at runtime",default:"[]"}],examples:[{title:"Simple Text Input",description:"Pass a question to an AI Agent",config:'Default Payload: "What are the benefits of renewable energy?"',output:'{ timestamp: "...", trigger: "manual", text: "What are the benefits of renewable energy?", data: {} }'},{title:"Form with Multiple Fields",description:"Collect structured data before processing",config:`Input Fields:
- name: "email" | type: "text" | label: "Email Address"
- name: "subject" | type: "text" | label: "Subject Line"  
- name: "priority" | type: "select" | options: ["low", "medium", "high"]`,output:'{ timestamp: "...", trigger: "manual", data: { email: "user@example.com", subject: "Hello", priority: "high" } }'},{title:"JSON Payload",description:"Pass structured JSON data",config:`Default Payload:
{
  "action": "process",
  "items": ["item1", "item2"],
  "config": { "verbose": true }
}`,output:`{ timestamp: "...", trigger: "manual", text: '{"action":"process",...}', data: {} }`}],tips:["Use Input Fields to create reusable workflows with variable parameters","The 'text' field is the primary data carrier - use it for simple string inputs","Form field values are accessible via input.data.fieldName in downstream nodes","Combine with AI Agent to build interactive chat interfaces"],connections:{inputs:0,outputs:1,outputLabels:["output"]}},scheduleTrigger:{id:"scheduleTrigger",icon:"",title:"Schedule Trigger",category:"Triggers",overview:"The Schedule Trigger runs workflows automatically at specified intervals using CRON expressions. Perfect for periodic tasks like data synchronization, report generation, health checks, or cleanup jobs.",technicalDetails:`
**CRON Expression Format:**
\`\`\`
 minute (0-59)
  hour (0-23)
   day of month (1-31)
    month (1-12)
     day of week (0-6, Sunday=0)
    
* * * * *
\`\`\`

**Special Characters:**
- \`*\` = any value
- \`,\` = value list (1,3,5)
- \`-\` = range (1-5)
- \`/\` = step (*/5 = every 5)

**Output Schema:**
\`\`\`javascript
{
  timestamp: "2024-01-15T10:30:00.000Z",
  trigger: "schedule",
  schedule: "*/5 * * * *",
  nextRun: "2024-01-15T10:35:00.000Z"
}
\`\`\`
    `,config:[{name:"Schedule",type:"CRON expression",desc:"When the workflow should run",default:"*/5 * * * *"},{name:"Enabled",type:"boolean",desc:"Toggle schedule on/off without deleting",default:"false"}],examples:[{title:"Every 5 Minutes",description:"Health check or monitoring",config:"Schedule: */5 * * * *",output:"Runs at: 10:00, 10:05, 10:10, 10:15..."},{title:"Daily at 9 AM",description:"Morning report generation",config:"Schedule: 0 9 * * *",output:"Runs at: 09:00 every day"},{title:"Every Monday at 8:30 AM",description:"Weekly summary email",config:"Schedule: 30 8 * * 1",output:"Runs at: 08:30 every Monday"},{title:"First Day of Month",description:"Monthly billing or reports",config:"Schedule: 0 0 1 * *",output:"Runs at: midnight on the 1st of each month"}],tips:["Schedules only run when the browser tab is open and active","Use 'Enabled' toggle to pause schedules without deleting the configuration","For more reliable scheduling, consider using browser extensions or service workers","Test your CRON expression at crontab.guru before deploying"],connections:{inputs:1,outputs:1,inputLabels:["re-trigger"],outputLabels:["output"]}},webhookTrigger:{id:"webhookTrigger",icon:"",title:"Webhook Trigger",category:"Triggers",overview:"The Webhook Trigger creates an HTTP endpoint that external services can call to start your workflow. Use it to integrate with third-party APIs, form submissions, IoT devices, or any system that can make HTTP requests.",technicalDetails:`
**Endpoint URL Format:**
\`\`\`
https://your-domain.com/webhook/{endpoint}
\`\`\`

**Supported Methods:**
- GET - Retrieve data, parameters in URL
- POST - Submit data in request body (JSON)
- PUT - Update resources
- DELETE - Remove resources

**Request Body Parsing:**
\`\`\`javascript
// JSON body is automatically parsed
{
  "event": "user.created",
  "data": { "id": 123, "email": "user@example.com" }
}
\`\`\`

**Output Schema:**
\`\`\`javascript
{
  method: "POST",
  endpoint: "/webhook/my-hook",
  headers: { "content-type": "application/json", ... },
  body: { ...requestBody },
  query: { ...urlParams },
  timestamp: "..."
}
\`\`\`
    `,config:[{name:"Method",type:"select",desc:"HTTP method to accept",default:"POST",options:["GET","POST","PUT","DELETE"]},{name:"Endpoint",type:"string",desc:"URL path for the webhook",default:"/webhook/default"},{name:"Auth Required",type:"boolean",desc:"Require authentication token",default:"false"}],examples:[{title:"Form Submission Handler",description:"Process contact form data",config:`Method: POST
Endpoint: /webhook/contact-form`,output:'{ method: "POST", body: { name: "John", email: "john@example.com", message: "Hello!" } }'},{title:"GitHub Webhook",description:"Trigger on repository events",config:`Method: POST
Endpoint: /webhook/github`,output:'{ method: "POST", body: { action: "push", repository: {...}, commits: [...] } }'},{title:"Stripe Payment Webhook",description:"Handle payment confirmations",config:`Method: POST
Endpoint: /webhook/stripe`,output:'{ method: "POST", body: { type: "payment_intent.succeeded", data: {...} } }'}],tips:["Webhooks require a publicly accessible URL - use tunneling (ngrok) for local development","Always validate incoming data before processing","Use Auth Required for sensitive webhooks to prevent unauthorized access","Connect to Code Executor to validate signatures or transform data"],connections:{inputs:0,outputs:1,outputLabels:["output"]}},errorTrigger:{id:"errorTrigger",icon:"",title:"Error Trigger",category:"Triggers",overview:"The Error Trigger catches exceptions from other nodes, enabling graceful error handling and recovery. Build resilient workflows that can log errors, send notifications, or retry failed operations.",technicalDetails:`
**Error Capture Modes:**
1. **Watch All** - Catches errors from any node in the workflow
2. **Specific Nodes** - Only watches selected nodes by ID

**Retry Logic:**
- Automatic retry with configurable count
- Exponential backoff between attempts
- Final failure triggers error output

**Output Schema:**
\`\`\`javascript
{
  error: {
    message: "Network request failed",
    nodeId: "httpRequest-abc123",
    nodeName: "API Call",
    stack: "Error: Network request failed\\n  at..."
  },
  originalInput: { ...inputThatCausedError },
  retryAttempt: 1,
  timestamp: "..."
}
\`\`\`
    `,config:[{name:"Watch All",type:"boolean",desc:"Monitor all nodes for errors",default:"true"},{name:"Specific Nodes",type:"array",desc:"Node IDs to watch (when Watch All is false)",default:"[]"},{name:"Retry Enabled",type:"boolean",desc:"Automatically retry failed nodes",default:"false"},{name:"Retry Count",type:"number",desc:"Maximum retry attempts",default:"3"}],examples:[{title:"Error Logging",description:"Log all errors to console",config:`Watch All: true
Retry Enabled: false`,flow:"Error Trigger  Code Executor (log error)  Output"},{title:"Error Notification",description:"Send Slack message on failure",config:"Watch All: true",flow:"Error Trigger  HTTP Request (Slack API)  Output"},{title:"Retry with Fallback",description:"Retry API call, then use cached data",config:`Specific Nodes: ["httpRequest-main"]
Retry Enabled: true
Retry Count: 3`,flow:"Error Trigger  If/Else (retries exhausted?)  Local Storage (get cache)"}],tips:["Place Error Trigger anywhere in your workflow - it's not connected to the main flow","Use error.nodeId to identify which node failed","Combine with AI Agent to generate human-readable error summaries","Log errors to Local Storage for debugging across sessions"],connections:{inputs:0,outputs:1,outputLabels:["error"]}},browserEventTrigger:{id:"browserEventTrigger",icon:"",title:"Browser Event",category:"Triggers",overview:"The Browser Event Trigger responds to browser and DOM events like focus, blur, URL changes, element clicks, or timed intervals. Automate based on user interactions or browser state changes.",technicalDetails:`
**Event Types:**
| Type | Description | Use Case |
|------|-------------|----------|
| focus | Tab receives focus | Resume paused workflows |
| blur | Tab loses focus | Pause background tasks |
| urlChange | URL hash or path changes | SPA navigation |
| domClick | Element is clicked | User interaction |
| timer | Interval elapses | Polling |

**Output Schema:**
\`\`\`javascript
{
  eventType: "domClick",
  target: { selector: "#submit-btn", tagName: "BUTTON" },
  timestamp: "...",
  url: "https://example.com/page"
}
\`\`\`
    `,config:[{name:"Event Type",type:"select",desc:"Browser event to listen for",default:"focus",options:["focus","blur","urlChange","domClick","timer"]},{name:"Selector",type:"CSS selector",desc:"Element selector for domClick events",default:""},{name:"URL Pattern",type:"regex",desc:"Pattern to match for urlChange events",default:""},{name:"Interval",type:"number (ms)",desc:"Milliseconds between timer events",default:"1000"}],examples:[{title:"Auto-Save on Blur",description:"Save work when user leaves tab",config:"Event Type: blur",flow:"Browser Event  Local Storage (save state)"},{title:"Click Tracking",description:"Log button clicks",config:`Event Type: domClick
Selector: .track-btn`,flow:"Browser Event  HTTP Request (analytics API)"},{title:"Polling API",description:"Check for updates every 30 seconds",config:`Event Type: timer
Interval: 30000`,flow:"Browser Event  HTTP Request  If/Else (new data?)  Output"}],tips:["Timer events only fire when the tab is active to conserve resources","Use specific CSS selectors to avoid triggering on unintended elements","Combine with If/Else to filter events before processing","URL patterns support regex for flexible matching"],connections:{inputs:0,outputs:1,outputLabels:["event"]}},output:{id:"output",icon:"",title:"Output",category:"Actions",overview:"The Output node is the terminal point of your workflow. It displays results, downloads files, sends notifications, and automatically saves all output as artifacts for future reference.",technicalDetails:`
**Output Types:**
| Type | Behavior |
|------|----------|
| console | Logs to browser console + saves artifact |
| file | Downloads file + saves artifact |
| notification | Shows browser notification + saves artifact |

**All outputs automatically save artifacts to IndexedDB.**

**Output Schema:**
\`\`\`javascript
// The output node passes through its input
{
  ...inputData,
  _outputMeta: {
    type: "console|file|notification",
    artifactId: "uuid",
    timestamp: "..."
  }
}
\`\`\`
    `,config:[{name:"Output Type",type:"select",desc:"How to display/save the output",default:"console",options:["console","file","notification"]},{name:"Filename",type:"string",desc:"Filename for file downloads",default:"output.txt"},{name:"Format JSON",type:"boolean",desc:"Pretty-print JSON with indentation",default:"false"}],examples:[{title:"Console Logging",description:"Debug workflow output",config:`Output Type: console
Format JSON: true`,result:"Opens browser DevTools console with formatted output"},{title:"Download Report",description:"Save AI-generated content to file",config:`Output Type: file
Filename: report_{{date}}.txt`,result:"Downloads file to user's Downloads folder"},{title:"Desktop Notification",description:"Alert user when workflow completes",config:"Output Type: notification",result:"Shows browser notification with output preview"}],tips:["All outputs are saved as artifacts regardless of output type","View artifacts in the Execution Panel's Artifacts tab","Use Format JSON for complex object outputs","Notification requires browser permission - prompt appears on first use"],connections:{inputs:1,outputs:0}},httpRequest:{id:"httpRequest",icon:"",title:"HTTP Request",category:"Actions",overview:"The HTTP Request node makes REST API calls to external services. Supports all HTTP methods, custom headers, request bodies, and configurable timeouts.",technicalDetails:`
**Request Configuration:**
\`\`\`javascript
{
  method: "GET|POST|PUT|PATCH|DELETE",
  url: "https://api.example.com/endpoint",
  headers: { "Authorization": "Bearer token", ... },
  body: "string or JSON object",
  timeout: 30000 // milliseconds
}
\`\`\`

**Response Schema:**
\`\`\`javascript
{
  status: 200,
  statusText: "OK",
  data: { ...responseJSON },
  headers: { "content-type": "application/json", ... }
}
\`\`\`

**Error Handling:**
- Network errors throw exceptions (catch with Error Trigger)
- 4xx/5xx responses return normally with status code
- Timeout aborts request after configured duration
    `,config:[{name:"Method",type:"select",desc:"HTTP method",default:"GET",options:["GET","POST","PUT","PATCH","DELETE"]},{name:"URL",type:"string",desc:"Full endpoint URL (supports {{expressions}})",default:""},{name:"Headers",type:"JSON",desc:"Request headers as JSON object",default:"{}"},{name:"Body",type:"string/JSON",desc:"Request body for POST/PUT/PATCH",default:""},{name:"Timeout",type:"number",desc:"Timeout in milliseconds",default:"30000"}],examples:[{title:"GET Request",description:"Fetch data from API",config:`Method: GET
URL: https://api.github.com/users/octocat
Headers: { "Accept": "application/json" }`,output:'{ status: 200, data: { login: "octocat", id: 583231, ... } }'},{title:"POST with JSON Body",description:"Create a new resource",config:`Method: POST
URL: https://api.example.com/posts
Headers: { "Content-Type": "application/json", "Authorization": "Bearer {{input.token}}" }
Body: { "title": "{{input.title}}", "content": "{{input.content}}" }`,output:'{ status: 201, data: { id: 42, title: "...", created: true } }'},{title:"Dynamic URL from Input",description:"Parameterized API call",config:`Method: GET
URL: https://api.example.com/users/{{input.userId}}/profile`,output:"Fetches profile for the user ID from previous node"},{title:"Slack Webhook",description:"Send message to Slack channel",config:`Method: POST
URL: https://hooks.slack.com/services/T00/B00/XXX
Headers: { "Content-Type": "application/json" }
Body: { "text": "Workflow completed: {{input.result}}" }`,output:'{ status: 200, data: "ok" }'}],tips:["Use {{input.field}} syntax to inject dynamic values from previous nodes","Set appropriate Content-Type header for POST/PUT requests","Handle API rate limits with retry logic via Error Trigger","CORS restrictions apply - use a proxy for cross-origin requests if needed"],connections:{inputs:1,outputs:1}},codeExecutor:{id:"codeExecutor",icon:"",title:"Code Executor",category:"Actions",overview:"The Code Executor runs custom JavaScript code with full access to input data. Transform data, implement complex logic, call APIs, or generate dynamic content. Your code runs in a sandboxed environment with async/await support.",technicalDetails:`
**Execution Context:**
\`\`\`javascript
// Available variables:
input    // Data from previous node
context  // Execution context with nodeId, addLog()

// Your code is wrapped in async IIFE:
(async () => {
  // Your code here
  return result;
})();
\`\`\`

**Return Value:**
- Use \`return\` to pass data to next node
- Returned value becomes \`output\` for downstream nodes
- Objects, arrays, strings, numbers all supported

**Available APIs:**
- fetch() for HTTP requests
- console.log() for debugging
- JSON, Math, Date, Array methods
- async/await for promises
    `,config:[{name:"Code",type:"JavaScript",desc:"Your JavaScript code to execute",default:`// Access input data via 'input'
// Return output data
return input;`}],examples:[{title:"Data Transformation",description:"Transform array of objects",code:`// Extract specific fields
const users = input.data || [];
return users.map(user => ({
  id: user.id,
  name: user.name.toUpperCase(),
  email: user.email.toLowerCase()
}));`},{title:"Filtering",description:"Filter array by condition",code:`// Keep only active items
const items = input.items || [];
return items.filter(item => 
  item.status === 'active' && 
  item.score > 50
);`},{title:"API Call with Processing",description:"Fetch and transform external data",code:`// Fetch additional data
const userId = input.userId;
const response = await fetch(
  \`https://api.example.com/users/\${userId}\`
);
const user = await response.json();

// Combine with input
return {
  ...input,
  userDetails: user,
  fetchedAt: new Date().toISOString()
};`},{title:"Generate Dynamic Content",description:"Create content based on input",code:`// Build email template
const { name, items, total } = input;

const itemList = items
  .map(i => \`- \${i.name}: $\${i.price}\`)
  .join('\\n');

return {
  subject: \`Order Confirmation for \${name}\`,
  body: \`Dear \${name},

Thank you for your order!

Items:
\${itemList}

Total: $\${total}

Best regards,
The Team\`
};`},{title:"Error Handling",description:"Graceful error handling",code:`try {
  const result = await riskyOperation(input);
  return { success: true, data: result };
} catch (error) {
  return { 
    success: false, 
    error: error.message,
    fallback: input.defaultValue 
  };
}`}],tips:["Use console.log() for debugging - output appears in browser DevTools","Always handle potential null/undefined with optional chaining (?.) or defaults","Async operations are fully supported with async/await","Complex logic is better here than chaining multiple Set Variable nodes"],connections:{inputs:1,outputs:1}},setVariable:{id:"setVariable",icon:"",title:"Set Variable",category:"Actions",overview:"The Set Variable node creates, transforms, or merges data into named variables. Use it to prepare data for downstream nodes, rename fields, or combine multiple data sources.",technicalDetails:`
**Modes:**
| Mode | Behavior |
|------|----------|
| set | Replaces value entirely |
| append | Adds to existing array |
| merge | Shallow merge with existing object |

**Template Expressions:**
\`\`\`
{{input.field}}           - Access input field
{{input.data.nested}}     - Nested access
{{input.items[0].name}}   - Array indexing
\`\`\`

**Output Schema:**
\`\`\`javascript
{
  ...input,
  [variableName]: value
}
\`\`\`
    `,config:[{name:"Variable Name",type:"string",desc:"Name of the variable to create/update",default:"data"},{name:"Value",type:"string",desc:"Value or expression (supports {{templates}})",default:""},{name:"Mode",type:"select",desc:"How to set the value",default:"set",options:["set","append","merge"]}],examples:[{title:"Extract Field",description:"Pull out specific data",config:`Variable Name: email
Value: {{input.user.email}}
Mode: set`,output:'{ ...input, email: "user@example.com" }'},{title:"Build Array",description:"Accumulate items from loop",config:`Variable Name: results
Value: {{input.currentItem}}
Mode: append`,output:"{ ...input, results: [...existing, currentItem] }"},{title:"Merge Objects",description:"Combine data sources",config:`Variable Name: combined
Value: { "timestamp": "{{now}}", "source": "workflow" }
Mode: merge`,output:'{ ...input, combined: { ...existing, timestamp: "...", source: "workflow" } }'}],tips:["Use Set Variable for simple transformations; Code Executor for complex logic","Variable names become keys in the output object","Template expressions are resolved from the input data","Append mode is useful for collecting results in loops"],connections:{inputs:1,outputs:1}},fileSystem:{id:"fileSystem",icon:"",title:"File System",category:"Actions",overview:"The File System node reads from and writes to local files using the File System Access API. Process local documents, save generated content, or build file-based workflows.",technicalDetails:`
**Read Mode:**
- Opens file picker dialog
- Returns file contents as text or base64
- Supports filtering by file extension

**Write Mode:**
- Opens save dialog
- Writes string content to selected file
- Creates new file or overwrites existing

**Output Schema (Read):**
\`\`\`javascript
{
  filename: "document.txt",
  size: 1024,
  type: "text/plain",
  content: "File contents here...",
  lastModified: 1697234567890
}
\`\`\`
    `,config:[{name:"Mode",type:"select",desc:"Read or write operation",default:"read",options:["read","write"]},{name:"Filename",type:"string",desc:"Default filename for write operations",default:""},{name:"File Types",type:"array",desc:"Accepted extensions for read (e.g., ['.txt', '.json'])",default:"[]"}],examples:[{title:"Read Text File",description:"Load document for processing",config:`Mode: read
File Types: [".txt", ".md"]`,output:'{ filename: "notes.txt", content: "Document content..." }'},{title:"Save AI Output",description:"Write generated content to file",config:`Mode: write
Filename: generated_{{date}}.txt`,flow:"AI Agent  File System (write)"},{title:"Process JSON File",description:"Load and parse JSON data",config:`Mode: read
File Types: [".json"]`,flow:"File System (read)  Code Executor (parse JSON)  Output"}],tips:["File System Access API requires user permission for each file","Works best in Chrome and Edge browsers","Combine with AI Agent to analyze document contents","Use Code Executor to parse JSON or CSV file contents"],connections:{inputs:1,outputs:1}},localStorage:{id:"localStorage",icon:"",title:"Local Storage",category:"Actions",overview:"The Local Storage node persists data between workflow runs using IndexedDB or localStorage. Store configuration, cache API responses, or maintain state across sessions.",technicalDetails:`
**Storage Types:**
| Type | Capacity | Best For |
|------|----------|----------|
| localStorage | ~5MB | Simple key-value pairs |
| indexedDB | ~50MB+ | Complex objects, large data |

**Operations:**
| Mode | Behavior |
|------|----------|
| get | Retrieve value by key |
| set | Store value at key |
| delete | Remove key and value |

**Output Schema:**
\`\`\`javascript
// Get mode
{ key: "myData", value: { ...storedData }, found: true }

// Set mode  
{ key: "myData", success: true }

// Delete mode
{ key: "myData", deleted: true }
\`\`\`
    `,config:[{name:"Mode",type:"select",desc:"Operation to perform",default:"get",options:["get","set","delete"]},{name:"Storage Type",type:"select",desc:"Which storage to use",default:"indexedDB",options:["indexedDB","localStorage"]},{name:"Key",type:"string",desc:"Storage key name",default:""}],examples:[{title:"Cache API Response",description:"Store data to avoid repeated API calls",config:`Mode: set
Storage Type: indexedDB
Key: api_cache_{{input.endpoint}}`,flow:"HTTP Request  Local Storage (set)"},{title:"Load Cached Data",description:"Retrieve previously stored data",config:`Mode: get
Storage Type: indexedDB
Key: api_cache`,output:'{ key: "api_cache", value: {...cachedData}, found: true }'},{title:"Clear Cache",description:"Remove stored data",config:`Mode: delete
Storage Type: indexedDB
Key: api_cache`,output:'{ key: "api_cache", deleted: true }'}],tips:["Use indexedDB for complex objects and larger datasets","localStorage is simpler but limited to 5MB","Keys can include template expressions for dynamic storage","Combine with If/Else to check if cache exists before fetching"],connections:{inputs:1,outputs:1}},ifElse:{id:"ifElse",icon:"",title:"If/Else",category:"Logic",overview:"The If/Else node creates conditional branches in your workflow. Route data to different paths based on comparisons, creating dynamic decision trees.",technicalDetails:`
**Operators:**
| Operator | Description | Example |
|----------|-------------|---------|
| equals | Exact match (==) | status equals "success" |
| notEquals | Not match (!=) | status notEquals "error" |
| contains | String includes | message contains "error" |
| greaterThan | Numeric > | count greaterThan 10 |
| lessThan | Numeric < | count lessThan 5 |
| exists | Not null/undefined | user.email exists |

**Output Routing:**
- Output 0 (top): Condition is TRUE
- Output 1 (bottom): Condition is FALSE

**Condition Path:**
Access nested values with dot notation:
\`\`\`
user.profile.settings.notifications
data.items[0].status
response.headers.content-type
\`\`\`
    `,config:[{name:"Condition",type:"string",desc:"Field path to evaluate (e.g., status, data.count)",default:""},{name:"Operator",type:"select",desc:"Comparison operator",default:"equals",options:["equals","notEquals","contains","greaterThan","lessThan","exists"]},{name:"Compare Value",type:"string",desc:"Value to compare against",default:""}],examples:[{title:"Check API Status",description:"Branch on response status",config:`Condition: status
Operator: equals
Compare Value: 200`,routing:"TRUE  Process data | FALSE  Error handling"},{title:"Validate Data Exists",description:"Check if field is present",config:`Condition: user.email
Operator: exists`,routing:"TRUE  Send email | FALSE  Request email"},{title:"Numeric Threshold",description:"Check if value exceeds limit",config:`Condition: items.length
Operator: greaterThan
Compare Value: 100`,routing:"TRUE  Paginate | FALSE  Process all"},{title:"String Contains",description:"Search for keyword",config:`Condition: message
Operator: contains
Compare Value: error`,routing:"TRUE  Log error | FALSE  Continue"}],tips:["Use dot notation to access deeply nested properties","The 'exists' operator checks for null, undefined, and empty strings","Numeric comparisons convert strings to numbers automatically","Chain multiple If/Else nodes for complex decision trees"],connections:{inputs:1,outputs:2,outputLabels:["true ","false "]}},loop:{id:"loop",icon:"",title:"Loop",category:"Logic",overview:"The Loop node repeats workflow sections multiple times. Use count-based iteration (repeat N times) or array-based iteration (process each item). Essential for batch processing and automated repetition.",technicalDetails:`
**Loop Modes:**
1. **Count-Based**: Repeat N times with iteration counter
2. **Array-Based**: Iterate over items in an array

**Two Outputs:**
| Output | Name | Purpose |
|--------|------|---------|
| 0 (top) | loop  | Fires for each iteration, connect back to repeat |
| 1 (bottom) | done  | Fires when all iterations complete |

**Creating the Loop:**
Connect "loop " output BACK to the node you want to repeat.
This creates a cycle that executes for each iteration.

**Iteration Data:**
\`\`\`javascript
{
  iteration: 1,          // Current iteration (1-indexed)
  totalIterations: 5,    // Total configured iterations
  previousResult: {...}, // Output from last iteration
  isLoopIteration: true
}
\`\`\`

**Completion Data:**
\`\`\`javascript
{
  results: [...],        // Array of all iteration results
  totalIterations: 5,
  lastResult: {...},     // Final iteration output
  completed: true
}
\`\`\`
    `,config:[{name:"Iterations",type:"number",desc:"Number of times to repeat (1-1000)",default:"1"},{name:"Items Path",type:"string",desc:"Path to array for item-based looping",default:"items"},{name:"Max Items",type:"number",desc:"Maximum items to process per iteration",default:"100"}],examples:[{title:"Generate 5 Stories",description:"AI generates multiple unique stories",config:"Iterations: 5",flow:`Manual Trigger  AI Agent (generate story)  Loop  Output
                                                              |
                                     loop  `},{title:"Process Array Items",description:"Handle each item in a list",config:`Iterations: 1
Items Path: data.users`,flow:"HTTP Request  Loop  Process User  Loop  Output"},{title:"Infinite Automation",description:"Continuous content generation",config:`Iterations: 100
(Set high for long-running...)`,flow:`Trigger  AI Agent  Loop  Output
                                      |
                            loop  `},{title:"Batch API Calls",description:"Call API for each item",config:"Iterations: 10",flow:"For each ID: Trigger  Set Variable  HTTP Request  Loop  Output"}],tips:["Always connect the 'loop ' output back to create the actual loop","Use 'done ' output for final processing after all iterations","Access current iteration via input.iteration in downstream nodes","Set reasonable iteration limits to prevent runaway loops"],connections:{inputs:1,outputs:2,outputLabels:["loop ","done "]}},switchNode:{id:"switchNode",icon:"",title:"Switch",category:"Logic",overview:"The Switch node routes data to different outputs based on field values. Like a multi-way If/Else, it supports up to 4 output paths plus a default.",technicalDetails:`
**Route Configuration:**
\`\`\`javascript
routes: [
  { value: "urgent", outputIndex: 0 },
  { value: "normal", outputIndex: 1 },
  { value: "low", outputIndex: 2 }
]
\`\`\`

**Outputs:**
- Outputs 0-2: Matched routes
- Output 3: Default (when no match)

**Matching:**
- Exact string match (case-sensitive)
- First matching route wins
- Unmatched values go to defaultOutput
    `,config:[{name:"Field",type:"string",desc:"Field path to switch on",default:""},{name:"Routes",type:"array",desc:"Value-to-output mappings",default:"[{value:'', outputIndex:0}]"},{name:"Default Output",type:"number",desc:"Output index when no match (0-3)",default:"3"}],examples:[{title:"Priority Routing",description:"Route tasks by priority level",config:`Field: priority
Routes:
  - value: "urgent"  Output 0
  - value: "normal"  Output 1
  - value: "low"  Output 2
Default Output: 3`,routing:"urgent  Immediate | normal  Queue | low  Archive | unknown  Review"},{title:"Content Type Handler",description:"Process different data types",config:`Field: type
Routes:
  - value: "text"  Output 0
  - value: "image"  Output 1
  - value: "video"  Output 2`,routing:"text  Text processor | image  Image handler | video  Video handler"}],tips:["Use for multiple discrete values; If/Else for binary conditions","Default output catches unexpected values - always handle it","Combine with Merge node to rejoin paths after processing","Route values are case-sensitive"],connections:{inputs:1,outputs:4,outputLabels:["0","1","2","default"]}},merge:{id:"merge",icon:"",title:"Merge",category:"Logic",overview:"The Merge node combines multiple workflow branches back into a single path. Wait for all inputs to arrive or take the first one that completes.",technicalDetails:`
**Modes:**
| Mode | Behavior |
|------|----------|
| wait | Waits for ALL inputs before proceeding |
| first | Proceeds with FIRST input to arrive |

**Output (wait mode):**
\`\`\`javascript
{
  inputs: [
    { source: 0, data: {...} },
    { source: 1, data: {...} }
  ],
  merged: { ...combinedData }
}
\`\`\`

**Output (first mode):**
\`\`\`javascript
{
  source: 0,  // Which input arrived first
  data: {...} // Data from that input
}
\`\`\`
    `,config:[{name:"Mode",type:"select",desc:"How to handle multiple inputs",default:"wait",options:["wait","first"]}],examples:[{title:"Combine API Responses",description:"Fetch from multiple APIs and merge",config:"Mode: wait",flow:` HTTP (API 1) 
Trigger                     Merge  Process
        HTTP (API 2) `},{title:"Race Condition",description:"Use fastest response",config:"Mode: first",flow:` HTTP (Primary) 
Trigger                        Merge  Use result
        HTTP (Backup) `},{title:"Rejoin After Branch",description:"Merge If/Else branches",config:"Mode: wait",flow:`If/Else  True path  
               False path  Merge  Continue`}],tips:["Use 'wait' mode when you need data from all branches","Use 'first' mode for redundancy or timeout scenarios","Merge has 2 inputs - connect both to activate","Data from both inputs is available in the merged output"],connections:{inputs:2,outputs:1}},aiAgent:{id:"aiAgent",icon:"",title:"AI Agent",category:"AI",overview:"The AI Agent is the brain of your automation. It generates text using WebLLM, a local LLM inference engine that runs entirely in your browser via WebGPU. No data ever leaves your device.",technicalDetails:`
**Execution Flow:**
1. User/System message templates are resolved with input data
2. Messages sent to local WebLLM model
3. Model generates response token by token
4. Response passed to downstream nodes

**Template Syntax:**
\`\`\`
{{input}}              - Full input object as JSON
{{input.text}}         - Specific field
{{input.data.items}}   - Nested access
\`\`\`

**Output Schema:**
\`\`\`javascript
{
  response: "AI-generated text...",
  model: "gemma-2-2b-it",
  tokens: 245,
  duration: 3.2
}
\`\`\`

**Available Models:**
| Model | Size | Best For |
|-------|------|----------|
| Gemma 2 2B | 1.4GB | Balanced quality/speed |
| Phi-3.5 Mini | 2.2GB | Reasoning tasks |
| Llama 3.2 3B | 1.8GB | General purpose |
| Qwen 2.5 1.5B | 1.0GB | Fast responses |
| SmolLM 1.7B | 1.1GB | Minimal resources |
    `,config:[{name:"System Prompt",type:"text (multiline)",desc:"Instructions for AI behavior/persona",default:""},{name:"User Message",type:"text (multiline)",desc:"Template for user input (supports {{templates}})",default:"{{input.text}}"},{name:"Temperature",type:"slider (0-1)",desc:"Creativity level. Low=factual, High=creative",default:"0.7"},{name:"Max Tokens",type:"number",desc:"Maximum response length in tokens",default:"2000"}],examples:[{title:"Story Generator",description:"Create unique stories from prompts",config:`System Prompt: You are a creative fiction writer. Write engaging short stories with vivid descriptions and compelling characters.

User Message: Write a 300-word story about: {{input.text}}

Temperature: 0.9
Max Tokens: 1000`},{title:"Data Analyzer",description:"Analyze and summarize data",config:`System Prompt: You are a data analyst. Analyze the provided data and give clear, actionable insights.

User Message: Analyze this data and provide key insights:
{{input.data}}

Temperature: 0.3
Max Tokens: 500`},{title:"Code Assistant",description:"Generate or explain code",config:`System Prompt: You are an expert programmer. Write clean, well-documented code. Explain your approach.

User Message: {{input.request}}

Language: {{input.language}}

Temperature: 0.4
Max Tokens: 1500`},{title:"Email Composer",description:"Draft professional emails",config:`System Prompt: You are a professional communication expert. Write clear, concise, and polite emails.

User Message: Write an email about: {{input.subject}}
Tone: {{input.tone}}
Key points: {{input.points}}

Temperature: 0.6
Max Tokens: 400`}],tips:["Use lower temperature (0.2-0.4) for factual/analytical tasks","Use higher temperature (0.7-0.9) for creative content","Include clear instructions in the system prompt for consistent results","Connect as a tool to other AI Agents for multi-agent workflows"],connections:{inputs:1,outputs:1}},vectorMemory:{id:"vectorMemory",icon:"",title:"Vector Memory",category:"AI",overview:"Vector Memory stores and retrieves information using semantic similarity. It converts text into embeddings (vector representations) and finds the most relevant matches. Essential for RAG (Retrieval Augmented Generation) workflows.",technicalDetails:`
**Operations:**
| Mode | Purpose |
|------|---------|
| query | Find similar content by meaning |
| upsert | Add or update memory entries |
| delete | Remove specific entries |

**Embedding Process:**
1. Text is converted to vector embeddings
2. Vectors are stored in local IndexedDB
3. Queries find closest vectors by cosine similarity

**Query Output:**
\`\`\`javascript
{
  results: [
    { id: "mem_123", text: "...", score: 0.92, metadata: {...} },
    { id: "mem_456", text: "...", score: 0.85, metadata: {...} }
  ],
  query: "original query text",
  namespace: "default"
}
\`\`\`

**Upsert Output:**
\`\`\`javascript
{
  id: "mem_789",
  success: true,
  namespace: "default"
}
\`\`\`
    `,config:[{name:"Mode",type:"select",desc:"Operation to perform",default:"query",options:["query","upsert","delete"]},{name:"Namespace",type:"string",desc:"Memory isolation (like folders)",default:"default"},{name:"Top K",type:"number",desc:"Number of results to return",default:"5"},{name:"Min Score",type:"number (0-1)",desc:"Minimum similarity threshold",default:"0.3"}],examples:[{title:"Build Knowledge Base",description:"Store documents for later retrieval",config:`Mode: upsert
Namespace: knowledge`,flow:"File System (read)  Code (split into chunks)  Loop  Vector Memory (upsert)"},{title:"RAG Query",description:"Find relevant context for AI",config:`Mode: query
Namespace: knowledge
Top K: 3
Min Score: 0.5`,flow:"Manual Trigger  Vector Memory (query)  AI Agent (answer with context)"},{title:"Conversation Memory",description:"Remember past conversations",config:`Mode: upsert
Namespace: conversations`,flow:"After AI response  Vector Memory (upsert) // stores each exchange"}],tips:["Use namespaces to separate different knowledge bases","Higher Min Score returns fewer but more relevant results","Chunk large documents into paragraphs for better retrieval","Combine with AI Agent for powerful RAG workflows"],connections:{inputs:1,outputs:1}},waitForApproval:{id:"waitForApproval",icon:"",title:"Wait for Approval",category:"AI",overview:"The Wait for Approval node pauses workflow execution until a human approves or rejects. Essential for human-in-the-loop automation where critical actions need oversight.",technicalDetails:`
**Workflow Pause:**
1. Execution reaches this node and stops
2. Approval dialog appears to user
3. User reviews data and clicks Approve/Reject
4. Execution continues on appropriate output

**Two Outputs:**
- Output 0 (top): User clicked Approve 
- Output 1 (bottom): User clicked Reject 

**Approval Data:**
\`\`\`javascript
// Passed to approved/rejected branch
{
  approved: true,
  approvedBy: "user",
  approvedAt: "2024-01-15T10:30:00.000Z",
  originalInput: {...},
  notes: "User comment if any"
}
\`\`\`
    `,config:[{name:"Title",type:"string",desc:"Dialog header",default:"Approval Required"},{name:"Message",type:"text (multiline)",desc:"Description for reviewer (supports {{templates}})",default:""},{name:"Timeout",type:"number (seconds)",desc:"Auto-reject after N seconds (0=never)",default:"0"},{name:"Notify Browser",type:"boolean",desc:"Show browser notification",default:"true"}],examples:[{title:"Review AI Output",description:"Approve before publishing",config:`Title: Review Generated Content
Message: Please review this AI-generated content before publishing:

{{input.content}}

Timeout: 0
Notify Browser: true`,flow:"AI Agent  Wait for Approval  (Approved) HTTP Post || (Rejected) Log"},{title:"Confirm API Action",description:"Approve before destructive operation",config:`Title: Confirm Delete
Message: About to delete {{input.count}} records. Are you sure?

Timeout: 300
Notify Browser: true`,flow:"Process Data  Wait for Approval  (Approved) HTTP DELETE || (Rejected) Cancel"},{title:"Review Email",description:"Approve before sending",config:`Title: Review Email
Message: To: {{input.recipient}}
Subject: {{input.subject}}

{{input.body}}`,flow:"AI Compose  Wait for Approval  (Approved) Send Email"}],tips:["Use before any irreversible actions (deletions, sends, purchases)","Set a timeout for time-sensitive workflows","Browser notification helps if you switch tabs","Include key details in the message for informed decisions"],connections:{inputs:1,outputs:2,outputLabels:["approved ","rejected "]}},subWorkflow:{id:"subWorkflow",icon:"",title:"Sub-Workflow",category:"AI",overview:"The Sub-Workflow node executes another saved workflow as a subroutine. Build modular, reusable automation by composing complex workflows from simpler building blocks.",technicalDetails:`
**Execution:**
1. Current workflow pauses
2. Selected sub-workflow executes with input
3. Sub-workflow output becomes this node's output
4. Parent workflow continues

**Input Passing:**
- If "Pass Input" enabled: full input passed to sub-workflow
- Sub-workflow receives data at its trigger node

**Output:**
\`\`\`javascript
{
  subWorkflowId: "wf_abc123",
  subWorkflowName: "Process Data",
  result: { ...subWorkflowOutput },
  duration: 1.5
}
\`\`\`
    `,config:[{name:"Workflow",type:"select",desc:"Saved workflow to execute",default:""},{name:"Pass Input",type:"boolean",desc:"Send current input to sub-workflow",default:"true"},{name:"Async",type:"boolean",desc:"Don't wait for completion (fire and forget)",default:"false"}],examples:[{title:"Reusable Data Processor",description:"Call shared processing logic",config:`Workflow: "Data Sanitizer"
Pass Input: true
Async: false`,flow:"API Response  Sub-Workflow (sanitize)  Use Clean Data"},{title:"Parallel Sub-Workflows",description:"Run multiple workflows simultaneously",config:"Async: true",flow:`Trigger  Sub-Workflow A (async)
               Sub-Workflow B (async)  
               Merge results`}],tips:["Build a library of reusable workflows for common tasks","Use async mode when you don't need the result immediately","Sub-workflows can call other sub-workflows (nested)","Great for team collaboration - share common workflows"],connections:{inputs:1,outputs:1}},textToSpeech:{id:"textToSpeech",icon:"",title:"Text to Speech",category:"AI",overview:"The Text to Speech node converts text into spoken audio using the Web Speech API. Add voice output to your workflows for accessibility, notifications, or interactive experiences.",technicalDetails:`
**Web Speech API:**
- Uses browser's built-in speech synthesis
- No external API calls or costs
- Access to system voices

**Voice Selection:**
Browser provides various voices based on OS:
- Windows: Microsoft voices
- macOS: System voices  
- Chrome: Additional Google voices

**Output:**
\`\`\`javascript
{
  spoken: true,
  text: "The spoken text...",
  voice: "Microsoft Zira",
  duration: 3.5
}
\`\`\`
    `,config:[{name:"Voice",type:"select",desc:"Voice to use for speech",default:"default"},{name:"Rate",type:"slider (0.5-2)",desc:"Speech speed",default:"1.0"},{name:"Pitch",type:"slider (0.5-2)",desc:"Voice pitch",default:"1.0"},{name:"Auto Play",type:"boolean",desc:"Play immediately when triggered",default:"true"}],examples:[{title:"Read AI Response",description:"Speak AI-generated content",config:`Voice: default
Rate: 1.0
Auto Play: true`,flow:"AI Agent  Text to Speech"},{title:"Notification Alert",description:"Voice notification for events",config:`Rate: 1.2
Voice: (select clear voice)`,flow:'HTTP Request  If/Else (important?)  Text to Speech ("Alert: {{message}}")'}],tips:["Available voices vary by browser and operating system","Higher rate (1.2-1.5) is good for notifications","Use clear, punctuated text for better pronunciation","Combine with AI Agent for voice assistant experiences"],connections:{inputs:1,outputs:1}},imageGeneration:{id:"imageGeneration",icon:"",title:"Image Generation",category:"AI",overview:"The Image Generation node creates images from text prompts using AI models. Generate visuals for content, social media, presentations, or creative projects.",technicalDetails:`
**Providers:**
| Provider | Location | Notes |
|----------|----------|-------|
| local (WebSD) | Browser | Requires powerful GPU |
| openai | API | Requires API key |
| stability | API | Requires API key |

**Output:**
\`\`\`javascript
{
  imageUrl: "blob:..." or "data:image/png;base64,...",
  artifactId: "art_123",
  prompt: "original prompt",
  size: "512x512",
  provider: "local"
}
\`\`\`
    `,config:[{name:"Provider",type:"select",desc:"Image generation service",default:"local",options:["local","openai","stability"]},{name:"Size",type:"select",desc:"Image dimensions",default:"512x512",options:["256x256","512x512","1024x1024"]},{name:"Negative Prompt",type:"text",desc:"What to avoid in the image",default:""},{name:"Seed",type:"number",desc:"Random seed for reproducibility",default:""},{name:"Steps",type:"number",desc:"Diffusion steps (quality vs speed)",default:"20"}],examples:[{title:"Blog Illustration",description:"Generate images for articles",config:`Provider: openai
Size: 1024x1024`,flow:"AI Agent (write article)  AI Agent (describe image)  Image Generation"},{title:"Product Mockup",description:"Create product visualizations",config:`Provider: stability
Negative Prompt: blurry, low quality`,flow:"Manual Trigger  Image Generation  Output"}],tips:["Local generation requires WebGPU and significant GPU resources","API providers have costs - check pricing","Use negative prompts to avoid common issues (blurry, low quality)","Set a seed for reproducible results"],connections:{inputs:1,outputs:1}},pythonExecutor:{id:"pythonExecutor",icon:"",title:"Python Executor",category:"AI",overview:"The Python Executor runs Python code directly in your browser using Pyodide. Access Python's scientific computing ecosystem including NumPy, Pandas, and moreall without a server.",technicalDetails:`
**Pyodide Runtime:**
- Full Python 3.11 interpreter in WebAssembly
- Runs entirely in the browser
- Access to many pure-Python packages

**Available Packages:**
- numpy, pandas, scipy
- matplotlib, pillow
- requests (limited), json
- And many more

**Variable Access:**
\`\`\`python
# Input is available as 'input' variable
data = input  # Dict from previous node

# Set result for output
result = {"processed": True, "data": data}
\`\`\`

**Output:**
\`\`\`javascript
{
  result: { ...pythonResult },
  stdout: "Any print() output",
  duration: 1.2
}
\`\`\`
    `,config:[{name:"Code",type:"Python",desc:"Python code to execute",default:"# Access input via 'input' variable\\nresult = input"},{name:"Packages",type:"array",desc:"Additional packages to install",default:"[]"},{name:"Timeout",type:"number (ms)",desc:"Execution timeout",default:"30000"}],examples:[{title:"Data Analysis",description:"Analyze data with Pandas",code:`import pandas as pd
import json

# Parse input data
data = input.get('data', [])
df = pd.DataFrame(data)

# Analyze
result = {
    'count': len(df),
    'columns': list(df.columns),
    'summary': df.describe().to_dict()
}`},{title:"Statistical Calculation",description:"Complex math with NumPy",code:`import numpy as np

values = input.get('values', [])
arr = np.array(values)

result = {
    'mean': float(np.mean(arr)),
    'std': float(np.std(arr)),
    'median': float(np.median(arr)),
    'percentile_95': float(np.percentile(arr, 95))
}`},{title:"Text Processing",description:"Process text with Python",code:`import re
from collections import Counter

text = input.get('text', '')

# Word frequency
words = re.findall(r'\\w+', text.lower())
freq = Counter(words).most_common(10)

result = {
    'word_count': len(words),
    'unique_words': len(set(words)),
    'top_words': freq
}`}],tips:["First execution is slow (loading Pyodide) - subsequent runs are fast","Use 'result' variable to pass data to next node","print() output appears in stdout field","Not all Python packages are available - check Pyodide compatibility"],connections:{inputs:1,outputs:1}}},T5=[{type:"welcome",nodes:["welcome","shortcuts"]},{type:"category",name:"Triggers",color:"#00c853",nodes:["manualTrigger","scheduleTrigger","webhookTrigger","errorTrigger","browserEventTrigger"]},{type:"category",name:"Actions",color:"#2979ff",nodes:["output","httpRequest","codeExecutor","setVariable","fileSystem","localStorage"]},{type:"category",name:"Logic",color:"#ffab00",nodes:["ifElse","loop","switchNode","merge"]},{type:"category",name:"AI",color:"#e040fb",nodes:["aiAgent","vectorMemory","waitForApproval","subWorkflow","textToSpeech","imageGeneration","pythonExecutor"]}],M5={welcome:{id:"welcome",icon:"",title:"Documentation"},shortcuts:{id:"shortcuts",icon:"",title:"Keyboard Shortcuts"}};function D5({onClose:e}){const[t,n]=M.useState("welcome"),a=()=>u.jsx("nav",{className:"docs-nav",children:T5.map((h,p)=>u.jsxs("div",{className:"nav-category",children:[h.type==="category"&&u.jsx("div",{className:"nav-category-title",style:{color:h.color},children:h.name}),h.nodes.map(m=>{const g=nu[m]||M5[m];return g?u.jsxs("div",{className:`nav-item ${t===m?"active":""}`,onClick:()=>n(m),children:[u.jsx("span",{className:"nav-item-icon",children:g.icon}),u.jsx("span",{children:g.title})]},m):null})]},p))}),o=()=>u.jsxs("div",{className:"welcome-content",children:[u.jsx("h1",{children:" IOSANS Documentation"}),u.jsx("p",{className:"tagline",children:"Welcome to the Infinite Open Source Automation System. Build powerful, local-first AI workflows with complete privacy and control."}),u.jsxs("div",{className:"feature-grid",children:[u.jsxs("div",{className:"feature-card",children:[u.jsx("div",{className:"feature-card-icon",children:""}),u.jsx("h4",{children:"100% Local"}),u.jsx("p",{children:"All processing happens in your browser. No data leaves your device."})]}),u.jsxs("div",{className:"feature-card",children:[u.jsx("div",{className:"feature-card-icon",children:""}),u.jsx("h4",{children:"WebLLM AI"}),u.jsx("p",{children:"Run powerful LLMs directly in your browser using WebGPU."})]}),u.jsxs("div",{className:"feature-card",children:[u.jsx("div",{className:"feature-card-icon",children:""}),u.jsx("h4",{children:"Visual Workflows"}),u.jsx("p",{children:"Drag-and-drop node editor for building complex automations."})]}),u.jsxs("div",{className:"feature-card",children:[u.jsx("div",{className:"feature-card-icon",children:""}),u.jsx("h4",{children:"Artifacts"}),u.jsx("p",{children:"All outputs are saved as artifacts for future reference."})]})]}),u.jsxs("div",{className:"article-section",style:{marginTop:32},children:[u.jsx("h3",{children:" Getting Started"}),u.jsxs("p",{children:["1. Drag a ",u.jsx("strong",{children:"Manual Trigger"})," from the sidebar to start your workflow.",u.jsx("br",{}),"2. Add nodes like ",u.jsx("strong",{children:"AI Agent"}),","," ",u.jsx("strong",{children:"Code Executor"}),", or ",u.jsx("strong",{children:"HTTP Request"}),".",u.jsx("br",{}),"3. Connect nodes by dragging from output handles (right) to input handles (left).",u.jsx("br",{}),"4. Click ",u.jsx("strong",{children:"Run"})," to execute your workflow."]})]}),u.jsxs("div",{className:"article-section",children:[u.jsx("h3",{children:" Node Categories"}),u.jsx("div",{className:"config-table",children:u.jsxs("table",{children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Category"}),u.jsx("th",{children:"Count"}),u.jsx("th",{children:"Purpose"})]})}),u.jsxs("tbody",{children:[u.jsxs("tr",{children:[u.jsx("td",{style:{color:"#00c853"},children:"Triggers"}),u.jsx("td",{children:"5"}),u.jsx("td",{children:"Start workflows (manual, schedule, webhook, error, browser)"})]}),u.jsxs("tr",{children:[u.jsx("td",{style:{color:"#2979ff"},children:"Actions"}),u.jsx("td",{children:"6"}),u.jsx("td",{children:"Perform operations (HTTP, code, files, storage)"})]}),u.jsxs("tr",{children:[u.jsx("td",{style:{color:"#ffab00"},children:"Logic"}),u.jsx("td",{children:"4"}),u.jsx("td",{children:"Control flow (if/else, loop, switch, merge)"})]}),u.jsxs("tr",{children:[u.jsx("td",{style:{color:"#e040fb"},children:"AI"}),u.jsx("td",{children:"7"}),u.jsx("td",{children:"AI capabilities (LLM, memory, TTS, images, Python)"})]})]})]})})]})]}),s=()=>u.jsxs("div",{className:"docs-article",children:[u.jsxs("div",{className:"article-header",children:[u.jsx("div",{className:"article-icon",children:""}),u.jsx("div",{children:u.jsx("h2",{className:"article-title",children:"Keyboard Shortcuts"})})]}),u.jsxs("div",{className:"article-section",children:[u.jsx("h3",{children:"General"}),u.jsxs("div",{className:"shortcuts-list",children:[u.jsxs("div",{className:"shortcut-row",children:[u.jsx("span",{children:"Save Workflow"}),u.jsx("span",{className:"shortcut-key",children:"Ctrl + S"})]}),u.jsxs("div",{className:"shortcut-row",children:[u.jsx("span",{children:"Run Workflow"}),u.jsx("span",{className:"shortcut-key",children:"Ctrl + Enter"})]}),u.jsxs("div",{className:"shortcut-row",children:[u.jsx("span",{children:"Undo"}),u.jsx("span",{className:"shortcut-key",children:"Ctrl + Z"})]}),u.jsxs("div",{className:"shortcut-row",children:[u.jsx("span",{children:"Redo"}),u.jsx("span",{className:"shortcut-key",children:"Ctrl + Shift + Z"})]})]})]}),u.jsxs("div",{className:"article-section",children:[u.jsx("h3",{children:"Node Operations"}),u.jsxs("div",{className:"shortcuts-list",children:[u.jsxs("div",{className:"shortcut-row",children:[u.jsx("span",{children:"Delete Selected"}),u.jsx("span",{className:"shortcut-key",children:"Delete / Backspace"})]}),u.jsxs("div",{className:"shortcut-row",children:[u.jsx("span",{children:"Copy Node"}),u.jsx("span",{className:"shortcut-key",children:"Ctrl + C"})]}),u.jsxs("div",{className:"shortcut-row",children:[u.jsx("span",{children:"Paste Node"}),u.jsx("span",{className:"shortcut-key",children:"Ctrl + V"})]}),u.jsxs("div",{className:"shortcut-row",children:[u.jsx("span",{children:"Duplicate Node"}),u.jsx("span",{className:"shortcut-key",children:"Ctrl + D"})]}),u.jsxs("div",{className:"shortcut-row",children:[u.jsx("span",{children:"Select All"}),u.jsx("span",{className:"shortcut-key",children:"Ctrl + A"})]})]})]}),u.jsxs("div",{className:"article-section",children:[u.jsx("h3",{children:"Canvas Navigation"}),u.jsxs("div",{className:"shortcuts-list",children:[u.jsxs("div",{className:"shortcut-row",children:[u.jsx("span",{children:"Pan Canvas"}),u.jsx("span",{className:"shortcut-key",children:"Space + Drag"})]}),u.jsxs("div",{className:"shortcut-row",children:[u.jsx("span",{children:"Zoom In/Out"}),u.jsx("span",{className:"shortcut-key",children:"Ctrl + +/-"})]}),u.jsxs("div",{className:"shortcut-row",children:[u.jsx("span",{children:"Fit to Screen"}),u.jsx("span",{className:"shortcut-key",children:"Ctrl + 0"})]}),u.jsxs("div",{className:"shortcut-row",children:[u.jsx("span",{children:"Scroll Zoom"}),u.jsx("span",{className:"shortcut-key",children:"Mouse Wheel"})]})]})]})]}),c=h=>{const p=nu[h];return p?u.jsxs("div",{className:"docs-article",children:[u.jsxs("div",{className:"article-header",children:[u.jsx("div",{className:"article-icon",children:p.icon}),u.jsxs("div",{children:[u.jsx("h2",{className:"article-title",children:p.title}),p.category&&u.jsx("div",{className:"article-category",children:p.category})]})]}),u.jsxs("div",{className:"article-section",children:[u.jsx("h3",{children:" Overview"}),u.jsx("p",{children:p.overview})]}),p.technicalDetails&&u.jsxs("div",{className:"article-section",children:[u.jsx("h3",{children:" Technical Details"}),u.jsx("div",{className:"markdown-content",children:u.jsx(cm,{remarkPlugins:[FS],children:p.technicalDetails.trim()})})]}),p.config&&p.config.length>0&&u.jsxs("div",{className:"article-section",children:[u.jsx("h3",{children:" Configuration"}),u.jsxs("table",{className:"config-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Property"}),u.jsx("th",{children:"Type"}),u.jsx("th",{children:"Description"}),u.jsx("th",{children:"Default"})]})}),u.jsx("tbody",{children:p.config.map((m,g)=>u.jsxs("tr",{children:[u.jsx("td",{children:u.jsx("strong",{children:m.name})}),u.jsx("td",{children:u.jsx("code",{children:m.type})}),u.jsx("td",{children:m.desc}),u.jsx("td",{children:u.jsx("code",{children:m.default||"-"})})]},g))})]})]}),p.examples&&p.examples.length>0&&u.jsxs("div",{className:"article-section",children:[u.jsx("h3",{children:" Examples"}),p.examples.map((m,g)=>u.jsxs("div",{className:"example-block",children:[u.jsx("h4",{children:m.title}),u.jsx("p",{className:"example-desc",children:m.description}),m.config&&u.jsxs("div",{className:"example-config",children:[u.jsx("strong",{children:"Configuration:"}),u.jsx("div",{className:"code-block",children:m.config})]}),m.code&&u.jsxs("div",{className:"example-code",children:[u.jsx("strong",{children:"Code:"}),u.jsx("div",{className:"code-block",children:m.code})]}),m.flow&&u.jsxs("div",{className:"example-flow",children:[u.jsx("strong",{children:"Workflow:"}),u.jsx("div",{className:"code-block",children:m.flow})]}),m.output&&u.jsxs("div",{className:"example-output",children:[u.jsx("strong",{children:"Output:"}),u.jsx("div",{className:"code-block",children:m.output})]}),m.routing&&u.jsxs("div",{className:"example-routing",children:[u.jsx("strong",{children:"Routing:"}),u.jsx("div",{className:"code-block",children:m.routing})]}),m.result&&u.jsxs("div",{className:"example-result",children:[u.jsx("strong",{children:"Result:"}),u.jsx("div",{className:"code-block",children:m.result})]})]},g))]}),p.connections&&u.jsxs("div",{className:"article-section",children:[u.jsx("h3",{children:" Connections"}),u.jsxs("div",{className:"connections-info",children:[u.jsxs("div",{className:"connection-item",children:[u.jsx("span",{className:"connection-label",children:"Inputs:"}),u.jsx("span",{className:"connection-value",children:p.connections.inputs})]}),u.jsxs("div",{className:"connection-item",children:[u.jsx("span",{className:"connection-label",children:"Outputs:"}),u.jsx("span",{className:"connection-value",children:p.connections.outputs})]}),p.connections.outputLabels&&u.jsxs("div",{className:"connection-item",children:[u.jsx("span",{className:"connection-label",children:"Output Labels:"}),u.jsx("span",{className:"connection-value",children:p.connections.outputLabels.join(", ")})]})]})]}),p.tips&&p.tips.length>0&&u.jsxs("div",{className:"article-section",children:[u.jsx("h3",{children:" Tips & Best Practices"}),u.jsx("ul",{className:"tips-list",children:p.tips.map((m,g)=>u.jsx("li",{children:m},g))})]})]}):null},d=()=>t==="welcome"?o():t==="shortcuts"?s():c(t);return u.jsx("div",{className:"docs-overlay",onClick:e,children:u.jsxs("div",{className:"docs-modal",onClick:h=>h.stopPropagation(),children:[u.jsxs("header",{className:"docs-header",children:[u.jsx("h2",{children:" IOSANS Documentation"}),u.jsx("button",{className:"docs-close-btn",onClick:e,children:""})]}),u.jsxs("div",{className:"docs-body",children:[a(),u.jsx("div",{className:"docs-content",children:d()})]})]})})}const O5=M.memo(D5),GS="workflow_automations";function _5(e){const t=R5(),n=e.id||Date.now().toString(),a={...e,id:n,updatedAt:new Date().toISOString(),createdAt:e.createdAt||new Date().toISOString()};return t[n]=a,localStorage.setItem(GS,JSON.stringify(t)),n}function R5(){try{const e=localStorage.getItem(GS);return e?JSON.parse(e):{}}catch(e){return console.error("Failed to load workflows:",e),{}}}function I5(e){const t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"}),a=URL.createObjectURL(n),o=document.createElement("a");o.href=a,o.download=`${e.name||"workflow"}.json`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a)}function L5(e){return new Promise((t,n)=>{const a=new FileReader;a.onload=o=>{try{const s=JSON.parse(o.target.result);if(!s.nodes||!Array.isArray(s.nodes))throw new Error("Invalid workflow: missing nodes array");if(!s.edges||!Array.isArray(s.edges))throw new Error("Invalid workflow: missing edges array");s.id=Date.now().toString(),s.name=s.name+" (Imported)",t(s)}catch(s){n(new Error("Failed to parse workflow file: "+s.message))}},a.onerror=()=>{n(new Error("Failed to read file"))},a.readAsText(e)})}function z5(){const e=M.useRef(null),t=Ja(),[n,a]=M.useState(!1),[o,s]=M.useState(!1),c=Ne(_=>_.workflowName),d=Ne(_=>_.setWorkflowName),h=Ne(_=>_.nodes),p=Ne(_=>_.clearWorkflow),m=Ne(_=>_.loadWorkflow),g=Ne(_=>_.getWorkflowData),x=We(_=>_.clearLogs),[v,w]=M.useState(!1);M.useEffect(()=>{const _=()=>w(!0),A=()=>w(!1);return window.addEventListener("audioStart",_),window.addEventListener("audioEnd",A),()=>{window.removeEventListener("audioStart",_),window.removeEventListener("audioEnd",A)}},[]);const N=M.useCallback(()=>{"speechSynthesis"in window&&(window.speechSynthesis.cancel(),window.dispatchEvent(new CustomEvent("audioEnd")))},[]),j=M.useCallback(()=>{const _=g();_5(_),t.success("Workflow saved successfully!")},[g,t]),S=M.useCallback(()=>{const _=g();I5(_),t.success(`Exported "${_.name}.json"`)},[g,t]),k=M.useCallback(()=>{e.current?.click()},[]),E=M.useCallback(async _=>{const A=_.target.files?.[0];if(A){try{const z=await L5(A);m(z),t.success(`Imported "${z.name}"`)}catch(z){console.error("Import failed:",z),t.error("Import failed: "+z.message)}_.target.value=""}},[m,t]),T=M.useCallback(()=>{h.length!==0&&(p(),x(),t.info("Workflow cleared"))},[h.length,p,x,t]);return u.jsxs("header",{className:"toolbar",children:[u.jsxs("div",{className:"toolbar-left",children:[u.jsx("button",{className:"btn-nav",onClick:()=>a(!0),children:"Tutorial"}),u.jsx("button",{className:"btn-nav",onClick:()=>s(!0),children:"Docs"})]}),u.jsxs("div",{className:"toolbar-center",children:[u.jsx("input",{type:"text",className:"workflow-name-input",value:c,onChange:_=>d(_.target.value),placeholder:"Untitled Workflow"}),v&&u.jsx("button",{className:"btn-stop-audio",onClick:N,title:"Stop all audio playback",children:" Stop Audio"})]}),u.jsxs("div",{className:"toolbar-right",children:[u.jsx("button",{onClick:j,title:"Save workflow",disabled:h.length===0,children:" Save"}),u.jsx("button",{onClick:S,title:"Export to JSON",disabled:h.length===0,children:" Export"}),u.jsx("button",{onClick:k,title:"Import from JSON",children:" Import"}),u.jsx("button",{onClick:()=>window.dispatchEvent(new CustomEvent("openWorkflowManager")),title:"Manage saved workflows",children:" Manage"}),u.jsx("button",{onClick:T,title:"Clear canvas",className:"btn-danger",disabled:h.length===0,children:" Clear"}),u.jsx("input",{type:"file",ref:e,accept:".json",onChange:E,style:{display:"none"}})]}),n&&u.jsx(A5,{onClose:()=>a(!1)}),o&&u.jsx(O5,{onClose:()=>s(!1)})]})}const B5=M.memo(z5);function kp(e){return e===null?"null":e===void 0?"undefined":Array.isArray(e)?"array":typeof e=="object"?"object":typeof e=="string"?"string":typeof e=="number"?"number":typeof e=="boolean"?"boolean":"unknown"}function Cp(e,t){switch(t){case"null":return"null";case"undefined":return"undefined";case"string":return`"${e.length>100?e.slice(0,100)+"...":e}"`;case"number":case"boolean":return String(e);case"array":return`Array(${e.length})`;case"object":return`Object{${Object.keys(e).length}}`;default:return String(e)}}function Ap({keyName:e,value:t,depth:n=0,path:a=""}){const[o,s]=M.useState(n<2),c=kp(t),d=c==="object"||c==="array",h=a?`${a}.${e}`:e,p=M.useCallback(g=>{g.stopPropagation();const x=typeof t=="string"?t:JSON.stringify(t,null,2);navigator.clipboard.writeText(x)},[t]),m=()=>{d&&s(!o)};return u.jsxs("div",{className:"tree-node",style:{paddingLeft:n*16},children:[u.jsxs("div",{className:"tree-node-header",onClick:m,children:[d&&u.jsx("span",{className:`tree-expand ${o?"expanded":""}`,children:""}),e!==void 0&&u.jsxs("span",{className:"tree-key",children:[e,":"]}),u.jsx("span",{className:`tree-value type-${c}`,children:d&&!o?Cp(t,c):c==="array"?"[":c==="object"?"{":Cp(t,c)}),u.jsx("button",{className:"tree-copy-btn",onClick:p,title:`Copy ${h||"value"}`,children:""})]}),d&&o&&u.jsxs("div",{className:"tree-children",children:[c==="array"?t.map((g,x)=>u.jsx(Ap,{keyName:x,value:g,depth:n+1,path:h},x)):Object.entries(t).map(([g,x])=>u.jsx(Ap,{keyName:g,value:x,depth:n+1,path:h},g)),u.jsx("div",{className:"tree-bracket",style:{paddingLeft:n*16},children:c==="array"?"]":"}"})]})]})}function P5({data:e}){if(!Array.isArray(e)||e.length===0)return u.jsx("div",{className:"table-empty",children:"No data to display"});const t=[...new Set(e.flatMap(n=>typeof n=="object"&&n!==null?Object.keys(n):[]))];return t.length===0?u.jsx("div",{className:"table-empty",children:"Array contains non-object values"}):u.jsxs("div",{className:"data-table-wrapper",children:[u.jsxs("table",{className:"data-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"#"}),t.map(n=>u.jsx("th",{children:n},n))]})}),u.jsx("tbody",{children:e.slice(0,100).map((n,a)=>u.jsxs("tr",{children:[u.jsx("td",{className:"row-index",children:a}),t.map(o=>u.jsx("td",{className:`type-${kp(n?.[o])}`,children:Cp(n?.[o],kp(n?.[o]))},o))]},a))})]}),e.length>100&&u.jsxs("div",{className:"table-more",children:["+ ",e.length-100," more rows"]})]})}function $5({data:e,title:t,showViewToggle:n=!0}){const[a,o]=M.useState("tree"),[s,c]=M.useState(""),d=M.useCallback(()=>{navigator.clipboard.writeText(JSON.stringify(e,null,2))},[e]),h=s?JSON.parse(JSON.stringify(e,(g,x)=>{if(typeof x=="string"&&x.toLowerCase().includes(s.toLowerCase())||typeof g=="string"&&g.toLowerCase().includes(s.toLowerCase())||typeof x=="object")return x})):e,m=Array.isArray(e)&&e.length>0&&typeof e[0]=="object";return u.jsxs("div",{className:"data-viewer",children:[u.jsxs("div",{className:"data-viewer-header",children:[t&&u.jsx("span",{className:"data-viewer-title",children:t}),u.jsxs("div",{className:"data-viewer-controls",children:[u.jsx("input",{type:"text",className:"data-search",placeholder:"Search...",value:s,onChange:g=>c(g.target.value)}),n&&u.jsxs("div",{className:"view-toggle",children:[u.jsx("button",{className:a==="tree"?"active":"",onClick:()=>o("tree"),title:"Tree view",children:""}),m&&u.jsx("button",{className:a==="table"?"active":"",onClick:()=>o("table"),title:"Table view",children:""}),u.jsx("button",{className:a==="raw"?"active":"",onClick:()=>o("raw"),title:"Raw JSON"})]}),u.jsx("button",{className:"copy-all-btn",onClick:d,title:"Copy all",children:" Copy"})]})]}),u.jsx("div",{className:"data-viewer-content",children:e==null?u.jsx("div",{className:"data-empty",children:"No data available"}):a==="tree"?u.jsx(Ap,{value:h,depth:0}):a==="table"&&m?u.jsx(P5,{data:e}):u.jsx("pre",{className:"data-raw",children:JSON.stringify(e,null,2)})})]})}const Vh=M.memo($5);function H5(){const e=M.useRef(null),[t]=M.useState(null),[n,a]=M.useState(new Set),[o,s]=M.useState(new Set),[c,d]=M.useState("logs"),[h,p]=M.useState(320),[m,g]=M.useState(!1),x=M.useRef({startX:0,startWidth:320}),v=We(D=>D.logs),w=We(D=>D.artifacts),N=We(D=>D.isRunning),j=We(D=>D.currentNodeId),S=We(D=>D.getExecutionDuration),k=We(D=>D.clearLogs);M.useEffect(()=>{c==="logs"&&e.current?.scrollIntoView({behavior:"smooth"})},[v,c]);const E=v.find(D=>D.id===t),T=v.filter(D=>D.data&&D.type!=="artifact"),_=D=>new Date(D).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3}),A=D=>{switch(D){case"info":return"";case"success":return"";case"error":return"";case"warning":return"";case"ai":return"";case"node":return"";case"artifact":return"";default:return""}},z=D=>D<1e3?`${D}ms`:`${(D/1e3).toFixed(2)}s`,G=D=>{a(q=>{const I=new Set(q);return I.has(D)?I.delete(D):I.add(D),I})},F=M.useCallback(D=>{s(q=>{const I=new Set(q);return I.has(D)?I.delete(D):I.add(D),I})},[]),L=M.useCallback(D=>{const q=D.data;let I;q instanceof Blob?I=q:typeof q=="string"?I=new Blob([q],{type:D.type||"text/plain"}):I=new Blob([JSON.stringify(q,null,2)],{type:"application/json"});const V=URL.createObjectURL(I),W=document.createElement("a");W.href=V,W.download=D.name||`artifact_${D.id}.txt`,document.body.appendChild(W),W.click(),document.body.removeChild(W),URL.revokeObjectURL(V)},[]),$=M.useCallback(D=>D?D.includes("audio")?"":D.includes("image")?"":D.includes("json")?"":D.includes("text")?"":"":"",[]),H=async()=>{const D=v.map(q=>{const I=_(q.timestamp),V=q.nodeName||q.nodeId||"",W=q.data?`
  Data: ${JSON.stringify(q.data,null,2)}`:"";return`[${I}] ${V?`[${V}] `:""}${q.message}${W}`}).join(`
`);try{await navigator.clipboard.writeText(D),alert("Logs copied to clipboard!")}catch(q){console.error("Failed to copy logs:",q)}},Q=D=>{D.preventDefault(),g(!0),x.current={startX:D.clientX,startWidth:h}};return M.useEffect(()=>{if(!m)return;const D=I=>{const V=x.current.startX-I.clientX,W=Math.max(240,Math.min(600,x.current.startWidth+V));p(W)},q=()=>{g(!1)};return document.addEventListener("mousemove",D),document.addEventListener("mouseup",q),()=>{document.removeEventListener("mousemove",D),document.removeEventListener("mouseup",q)}},[m]),u.jsxs("aside",{className:`execution-panel ${m?"resizing":""}`,style:{width:`${h}px`},children:[u.jsx("div",{className:"ep-resize-handle",onMouseDown:Q,title:"Drag to resize"}),u.jsxs("header",{className:"panel-header",children:[u.jsxs("div",{className:"panel-tabs",children:[u.jsxs("button",{className:`tab-btn ${c==="logs"?"active":""}`,onClick:()=>d("logs"),children:[" Logs",v.length>0&&u.jsx("span",{className:"tab-badge",children:v.length})]}),u.jsxs("button",{className:`tab-btn ${c==="output"?"active":""}`,onClick:()=>d("output"),children:[" Output",T.length>0&&u.jsx("span",{className:"tab-badge",children:T.length})]}),u.jsxs("button",{className:`tab-btn ${c==="artifacts"?"active":""}`,onClick:()=>d("artifacts"),children:[" Artifacts",w.length>0&&u.jsx("span",{className:"tab-badge",children:w.length})]})]}),u.jsxs("div",{className:"panel-actions",children:[N&&u.jsxs("span",{className:"running-indicator",children:[u.jsx("span",{className:"pulse-dot"}),"Running..."]}),u.jsx("button",{className:"btn-icon",onClick:H,title:"Copy all logs",disabled:v.length===0,children:""}),u.jsx("button",{className:"btn-icon",onClick:k,title:"Clear logs",disabled:v.length===0,children:""})]})]}),u.jsxs("div",{className:"panel-content",children:[c==="logs"&&u.jsx(u.Fragment,{children:v.length===0?u.jsxs("div",{className:"empty-logs",children:[u.jsx("p",{children:"No logs yet"}),u.jsx("p",{className:"hint",children:"Run a workflow to see execution logs"})]}):u.jsxs("div",{className:"logs-list",children:[v.map(D=>u.jsxs("div",{className:`log-entry log-${D.type||"info"} ${t===D.id?"selected":""} ${D.data?"has-data":""} ${n.has(D.id)?"expanded":""}`,children:[u.jsxs("div",{className:"log-main",onClick:()=>G(D.id),children:[u.jsx("span",{className:"log-icon",children:A(D.type)}),u.jsx("span",{className:"log-time",children:_(D.timestamp)}),u.jsxs("div",{className:"log-content",children:[D.nodeId&&u.jsxs("span",{className:"log-node",children:["[",D.nodeName||D.nodeId,"]"]}),u.jsx("span",{className:`log-message ${n.has(D.id)?"expanded":""}`,children:D.message}),(D.data||D.message.length>60)&&u.jsx("span",{className:"log-expand-indicator",title:"Click to expand",children:n.has(D.id)?"":""})]})]}),n.has(D.id)&&D.data&&u.jsx("div",{className:"log-data-expanded",children:u.jsx(Vh,{data:D.data})})]},D.id)),u.jsx("div",{ref:e})]})}),c==="output"&&u.jsx(u.Fragment,{children:T.length===0?u.jsxs("div",{className:"empty-logs",children:[u.jsx("p",{children:"No output data yet"}),u.jsx("p",{className:"hint",children:"Node outputs will appear here"})]}):u.jsx("div",{className:"outputs-list",children:T.map(D=>u.jsxs("div",{className:"output-item",children:[u.jsxs("div",{className:"output-header",children:[u.jsxs("span",{className:"output-node",children:[A(D.type)," ",D.nodeName||D.nodeId]}),u.jsx("span",{className:"output-time",children:_(D.timestamp)})]}),u.jsx("div",{className:"output-data",children:u.jsx(Vh,{data:D.data})})]},D.id))})}),c==="artifacts"&&u.jsx(u.Fragment,{children:w.length===0?u.jsxs("div",{className:"empty-logs",children:[u.jsx("p",{children:"No artifacts yet"}),u.jsx("p",{className:"hint",children:"Generated files and data will appear here"})]}):u.jsx("div",{className:"artifacts-list",children:w.map(D=>{const q=o.has(D.id),I=D.type?.includes("text")||D.type?.includes("json"),V=D.type?.includes("audio"),W=typeof D.data=="string"?D.data.slice(0,500):JSON.stringify(D.data,null,2).slice(0,500);return u.jsxs("div",{className:`artifact-item ${q?"expanded":""}`,children:[u.jsxs("div",{className:"artifact-header",onClick:()=>F(D.id),children:[u.jsx("span",{className:"artifact-icon",children:$(D.type)}),u.jsxs("div",{className:"artifact-info",children:[u.jsx("span",{className:"artifact-name",children:D.name||"Artifact"}),u.jsxs("span",{className:"artifact-meta",children:[D.type?.split("/")[1]||"file"," "," ",new Date(D.timestamp).toLocaleTimeString()]})]}),u.jsx("span",{className:"artifact-expand-icon",children:q?"":""})]}),q&&u.jsxs("div",{className:"artifact-content",children:[I&&D.data&&u.jsxs("pre",{className:"artifact-preview",children:[W,typeof D.data=="string"&&D.data.length>500&&u.jsx("span",{className:"preview-truncated",children:"... (truncated)"})]}),V&&D.data instanceof Blob&&u.jsx("audio",{className:"artifact-audio-player",controls:!0,src:URL.createObjectURL(D.data)}),u.jsx("button",{className:"artifact-download-btn",onClick:J=>{J.stopPropagation(),L(D)},children:" Download"})]})]},D.id)})})})]}),E?.data&&c==="logs"&&u.jsx("div",{className:"data-viewer-panel",children:u.jsx(Vh,{data:E.data,title:`Output: ${E.nodeName||E.nodeId||"Data"}`})}),u.jsx("footer",{className:"panel-footer",children:u.jsxs("span",{className:"execution-stats",children:[N&&j&&u.jsxs("span",{children:["Current: ",u.jsx("strong",{children:j})]}),!N&&v.length>0&&u.jsxs("span",{children:["Total: ",z(S())]})]})})]})}const q5=M.memo(H5);function U5({value:e,onChange:t,placeholder:n,multiline:a=!1,previewContext:o={}}){const[s,c]=M.useState(!1),[d,h]=M.useState(""),[p,m]=M.useState(0),g=M.useRef(null),v=JD().filter(A=>A.name.toLowerCase().includes(d.toLowerCase())||A.description.toLowerCase().includes(d.toLowerCase())),w=M.useCallback((A,z)=>{const G=A.slice(0,z),F=G.lastIndexOf("{{"),L=G.lastIndexOf("}}");return F>L},[]),N=A=>{const z=A.target.value,G=A.target.selectionStart;if(m(G),t(z),w(z,G)){const F=z.slice(0,G),L=F.lastIndexOf("{{"),$=F.slice(L+2).trim();h($),c(!0)}else c(!1)},j=A=>{const z=e.slice(0,p),G=e.slice(p),F=z.lastIndexOf("{{"),$=z.slice(0,F+2)+" "+A.name+" }}"+G;t($),c(!1),setTimeout(()=>{g.current?.focus()},0)},S=A=>{A.key==="Escape"&&c(!1)},k=e&&e.includes("{{"),E=k?fs(e,{input:o}):null,T=!k||!E?.includes("{{ERROR:"),_=a?"textarea":"input";return u.jsxs("div",{className:"expression-input-wrapper",children:[u.jsxs("div",{className:`expression-input-container ${T?"":"error"}`,children:[u.jsx(_,{ref:g,type:a?void 0:"text",value:e||"",onChange:N,onKeyDown:S,onBlur:()=>setTimeout(()=>c(!1),200),placeholder:n,className:`expression-input ${k?"has-expression":""}`}),k&&u.jsx("span",{className:"expression-badge",title:"Contains expressions",children:"{{ }}"})]}),s&&v.length>0&&u.jsx("div",{className:"expression-autocomplete",children:v.slice(0,10).map(A=>u.jsxs("button",{className:"autocomplete-option",onMouseDown:()=>j(A),children:[u.jsx("span",{className:"option-name",children:A.name}),u.jsx("span",{className:"option-desc",children:A.description}),u.jsx("code",{className:"option-example",children:A.example})]},A.name))}),k&&E&&u.jsxs("div",{className:`expression-preview ${T?"":"error"}`,children:[u.jsx("span",{className:"preview-label",children:"Preview:"}),u.jsx("span",{className:"preview-value",children:E.length>100?E.slice(0,100)+"...":E})]})]})}const F5=M.memo(U5),V5=["GET","POST","PUT","PATCH","DELETE","HEAD","OPTIONS"];function G5({data:e,onUpdate:t}){return u.jsxs("div",{className:"http-request-config",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Request"}),u.jsxs("div",{className:"config-row",children:[u.jsxs("div",{className:"config-field",style:{flex:"0 0 100px"},children:[u.jsx("label",{children:"Method"}),u.jsx("select",{value:e.method||"GET",onChange:n=>t({method:n.target.value}),children:V5.map(n=>u.jsx("option",{value:n,children:n},n))})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"URL"}),u.jsx(F5,{value:e.url||"",onChange:n=>t({url:n}),placeholder:"https://api.example.com/{{ $json.endpoint }}"}),u.jsxs("p",{className:"hint",children:["Use ","{{ expression }}"," for dynamic values"]})]})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Headers"}),u.jsxs("div",{className:"config-field",children:[u.jsx("textarea",{value:typeof e.headers=="object"?JSON.stringify(e.headers,null,2):e.headers||"",onChange:n=>{try{const a=JSON.parse(n.target.value);t({headers:a})}catch{t({headers:n.target.value})}},placeholder:'{"Content-Type": "application/json"}',style:{minHeight:"80px"}}),u.jsx("p",{className:"hint",children:"JSON object with header key-value pairs"})]})]}),e.method!=="GET"&&e.method!=="HEAD"&&u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Body"}),u.jsxs("div",{className:"config-field",children:[u.jsx("textarea",{value:typeof e.body=="object"?JSON.stringify(e.body,null,2):e.body||"",onChange:n=>t({body:n.target.value}),placeholder:'{"key": "value"}',style:{minHeight:"100px"}}),u.jsxs("p",{className:"hint",children:["Request body (JSON or text). Use ","{{field}}"," for templating."]})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Options & Error Handling"}),u.jsxs("div",{className:"config-row",children:[u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Timeout (ms)"}),u.jsx("input",{type:"number",value:e.timeout||3e4,onChange:n=>t({timeout:parseInt(n.target.value,10)}),min:1e3,max:3e5})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Retry Count"}),u.jsx("input",{type:"number",value:e.retries||0,onChange:n=>t({retries:parseInt(n.target.value,10)}),min:0,max:10}),u.jsx("p",{className:"hint",children:"0 = no retries"})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Retry Delay (ms)"}),u.jsx("input",{type:"number",value:e.retryDelay||1e3,onChange:n=>t({retryDelay:parseInt(n.target.value,10)}),min:100,max:3e4,disabled:!e.retries||e.retries===0}),u.jsx("p",{className:"hint",children:"Uses exponential backoff"})]})]})]})]})}const W5=M.memo(G5);function H0(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function Y5(e){if(Array.isArray(e))return e}function X5(e,t,n){return(t=nB(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q5(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,o,s,c,d=[],h=!0,p=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(h=(a=s.call(n)).done)&&(d.push(a.value),d.length!==t);h=!0);}catch(m){p=!0,o=m}finally{try{if(!h&&n.return!=null&&(c=n.return(),Object(c)!==c))return}finally{if(p)throw o}}return d}}function J5(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,a)}return n}function U0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?q0(Object(n),!0).forEach(function(a){X5(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q0(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Z5(e,t){if(e==null)return{};var n,a,o=K5(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function K5(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function eB(e,t){return Y5(e)||Q5(e,t)||iB(e,t)||J5()}function tB(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nB(e){var t=tB(e,"string");return typeof t=="symbol"?t:t+""}function iB(e,t){if(e){if(typeof e=="string")return H0(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H0(e,t):void 0}}function rB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,a)}return n}function V0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?F0(Object(n),!0).forEach(function(a){rB(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F0(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function aB(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(a){return t.reduceRight(function(o,s){return s(o)},a)}}function cs(e){return function t(){for(var n=this,a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return o.length>=e.length?e.apply(this,o):function(){for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];return t.apply(n,[].concat(o,d))}}}function iu(e){return{}.toString.call(e).includes("Object")}function oB(e){return!Object.keys(e).length}function As(e){return typeof e=="function"}function sB(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function lB(e,t){return iu(t)||ur("changeType"),Object.keys(t).some(function(n){return!sB(e,n)})&&ur("changeField"),t}function cB(e){As(e)||ur("selectorType")}function uB(e){As(e)||iu(e)||ur("handlerType"),iu(e)&&Object.values(e).some(function(t){return!As(t)})&&ur("handlersType")}function dB(e){e||ur("initialIsRequired"),iu(e)||ur("initialType"),oB(e)&&ur("initialContent")}function fB(e,t){throw new Error(e[t]||e.default)}var hB={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},ur=cs(fB)(hB),Mc={changes:lB,selector:cB,handler:uB,initial:dB};function pB(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Mc.initial(e),Mc.handler(t);var n={current:e},a=cs(yB)(n,t),o=cs(gB)(n),s=cs(Mc.changes)(e),c=cs(mB)(n);function d(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(m){return m};return Mc.selector(p),p(n.current)}function h(p){aB(a,o,s,c)(p)}return[d,h]}function mB(e,t){return As(t)?t(e.current):t}function gB(e,t){return e.current=V0(V0({},e.current),t),t}function yB(e,t,n){return As(t)?t(e.current):Object.keys(n).forEach(function(a){var o;return(o=t[a])===null||o===void 0?void 0:o.call(t,e.current[a])}),n}var xB={create:pB},vB={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function bB(e){return function t(){for(var n=this,a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return o.length>=e.length?e.apply(this,o):function(){for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];return t.apply(n,[].concat(o,d))}}}function wB(e){return{}.toString.call(e).includes("Object")}function SB(e){return e||G0("configIsRequired"),wB(e)||G0("configType"),e.urls?(NB(),{paths:{vs:e.urls.monacoBase}}):e}function NB(){console.warn(WS.deprecation)}function jB(e,t){throw new Error(e[t]||e.default)}var WS={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},G0=bB(jB)(WS),EB={config:SB},kB=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return function(o){return n.reduceRight(function(s,c){return c(s)},o)}};function YS(e,t){return Object.keys(t).forEach(function(n){t[n]instanceof Object&&e[n]&&Object.assign(t[n],YS(e[n],t[n]))}),U0(U0({},e),t)}var CB={type:"cancelation",msg:"operation is manually canceled"};function Gh(e){var t=!1,n=new Promise(function(a,o){e.then(function(s){return t?o(CB):a(s)}),e.catch(o)});return n.cancel=function(){return t=!0},n}var AB=["monaco"],TB=xB.create({config:vB,isInitialized:!1,resolve:null,reject:null,monaco:null}),XS=eB(TB,2),qs=XS[0],Eu=XS[1];function MB(e){var t=EB.config(e),n=t.monaco,a=Z5(t,AB);Eu(function(o){return{config:YS(o.config,a),monaco:n}})}function DB(){var e=qs(function(t){var n=t.monaco,a=t.isInitialized,o=t.resolve;return{monaco:n,isInitialized:a,resolve:o}});if(!e.isInitialized){if(Eu({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),Gh(Wh);if(window.monaco&&window.monaco.editor)return QS(window.monaco),e.resolve(window.monaco),Gh(Wh);kB(OB,RB)(IB)}return Gh(Wh)}function OB(e){return document.body.appendChild(e)}function _B(e){var t=document.createElement("script");return e&&(t.src=e),t}function RB(e){var t=qs(function(a){var o=a.config,s=a.reject;return{config:o,reject:s}}),n=_B("".concat(t.config.paths.vs,"/loader.js"));return n.onload=function(){return e()},n.onerror=t.reject,n}function IB(){var e=qs(function(n){var a=n.config,o=n.resolve,s=n.reject;return{config:a,resolve:o,reject:s}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(n){var a=n.m||n;QS(a),e.resolve(a)},function(n){e.reject(n)})}function QS(e){qs().monaco||Eu({monaco:e})}function LB(){return qs(function(e){var t=e.monaco;return t})}var Wh=new Promise(function(e,t){return Eu({resolve:e,reject:t})}),JS={config:MB,init:DB,__getMonacoInstance:LB},zB={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Yh=zB,BB={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},PB=BB;function $B({children:e}){return jn.createElement("div",{style:PB.container},e)}var HB=$B,qB=HB;function UB({width:e,height:t,isEditorReady:n,loading:a,_ref:o,className:s,wrapperProps:c}){return jn.createElement("section",{style:{...Yh.wrapper,width:e,height:t},...c},!n&&jn.createElement(qB,null,a),jn.createElement("div",{ref:o,style:{...Yh.fullWidth,...!n&&Yh.hide},className:s}))}var FB=UB,ZS=M.memo(FB);function VB(e){M.useEffect(e,[])}var KS=VB;function GB(e,t,n=!0){let a=M.useRef(!0);M.useEffect(a.current||!n?()=>{a.current=!1}:e,t)}var un=GB;function gs(){}function $a(e,t,n,a){return WB(e,a)||YB(e,t,n,a)}function WB(e,t){return e.editor.getModel(eN(e,t))}function YB(e,t,n,a){return e.editor.createModel(t,n,a?eN(e,a):void 0)}function eN(e,t){return e.Uri.parse(t)}function XB({original:e,modified:t,language:n,originalLanguage:a,modifiedLanguage:o,originalModelPath:s,modifiedModelPath:c,keepCurrentOriginalModel:d=!1,keepCurrentModifiedModel:h=!1,theme:p="light",loading:m="Loading...",options:g={},height:x="100%",width:v="100%",className:w,wrapperProps:N={},beforeMount:j=gs,onMount:S=gs}){let[k,E]=M.useState(!1),[T,_]=M.useState(!0),A=M.useRef(null),z=M.useRef(null),G=M.useRef(null),F=M.useRef(S),L=M.useRef(j),$=M.useRef(!1);KS(()=>{let q=JS.init();return q.then(I=>(z.current=I)&&_(!1)).catch(I=>I?.type!=="cancelation"&&console.error("Monaco initialization: error:",I)),()=>A.current?D():q.cancel()}),un(()=>{if(A.current&&z.current){let q=A.current.getOriginalEditor(),I=$a(z.current,e||"",a||n||"text",s||"");I!==q.getModel()&&q.setModel(I)}},[s],k),un(()=>{if(A.current&&z.current){let q=A.current.getModifiedEditor(),I=$a(z.current,t||"",o||n||"text",c||"");I!==q.getModel()&&q.setModel(I)}},[c],k),un(()=>{let q=A.current.getModifiedEditor();q.getOption(z.current.editor.EditorOption.readOnly)?q.setValue(t||""):t!==q.getValue()&&(q.executeEdits("",[{range:q.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),q.pushUndoStop())},[t],k),un(()=>{A.current?.getModel()?.original.setValue(e||"")},[e],k),un(()=>{let{original:q,modified:I}=A.current.getModel();z.current.editor.setModelLanguage(q,a||n||"text"),z.current.editor.setModelLanguage(I,o||n||"text")},[n,a,o],k),un(()=>{z.current?.editor.setTheme(p)},[p],k),un(()=>{A.current?.updateOptions(g)},[g],k);let H=M.useCallback(()=>{if(!z.current)return;L.current(z.current);let q=$a(z.current,e||"",a||n||"text",s||""),I=$a(z.current,t||"",o||n||"text",c||"");A.current?.setModel({original:q,modified:I})},[n,t,o,e,a,s,c]),Q=M.useCallback(()=>{!$.current&&G.current&&(A.current=z.current.editor.createDiffEditor(G.current,{automaticLayout:!0,...g}),H(),z.current?.editor.setTheme(p),E(!0),$.current=!0)},[g,p,H]);M.useEffect(()=>{k&&F.current(A.current,z.current)},[k]),M.useEffect(()=>{!T&&!k&&Q()},[T,k,Q]);function D(){let q=A.current?.getModel();d||q?.original?.dispose(),h||q?.modified?.dispose(),A.current?.dispose()}return jn.createElement(ZS,{width:v,height:x,isEditorReady:k,loading:m,_ref:G,className:w,wrapperProps:N})}var QB=XB;M.memo(QB);function JB(e){let t=M.useRef();return M.useEffect(()=>{t.current=e},[e]),t.current}var ZB=JB,Dc=new Map;function KB({defaultValue:e,defaultLanguage:t,defaultPath:n,value:a,language:o,path:s,theme:c="light",line:d,loading:h="Loading...",options:p={},overrideServices:m={},saveViewState:g=!0,keepCurrentModel:x=!1,width:v="100%",height:w="100%",className:N,wrapperProps:j={},beforeMount:S=gs,onMount:k=gs,onChange:E,onValidate:T=gs}){let[_,A]=M.useState(!1),[z,G]=M.useState(!0),F=M.useRef(null),L=M.useRef(null),$=M.useRef(null),H=M.useRef(k),Q=M.useRef(S),D=M.useRef(),q=M.useRef(a),I=ZB(s),V=M.useRef(!1),W=M.useRef(!1);KS(()=>{let R=JS.init();return R.then(U=>(F.current=U)&&G(!1)).catch(U=>U?.type!=="cancelation"&&console.error("Monaco initialization: error:",U)),()=>L.current?O():R.cancel()}),un(()=>{let R=$a(F.current,e||a||"",t||o||"",s||n||"");R!==L.current?.getModel()&&(g&&Dc.set(I,L.current?.saveViewState()),L.current?.setModel(R),g&&L.current?.restoreViewState(Dc.get(s)))},[s],_),un(()=>{L.current?.updateOptions(p)},[p],_),un(()=>{!L.current||a===void 0||(L.current.getOption(F.current.editor.EditorOption.readOnly)?L.current.setValue(a):a!==L.current.getValue()&&(W.current=!0,L.current.executeEdits("",[{range:L.current.getModel().getFullModelRange(),text:a,forceMoveMarkers:!0}]),L.current.pushUndoStop(),W.current=!1))},[a],_),un(()=>{let R=L.current?.getModel();R&&o&&F.current?.editor.setModelLanguage(R,o)},[o],_),un(()=>{d!==void 0&&L.current?.revealLine(d)},[d],_),un(()=>{F.current?.editor.setTheme(c)},[c],_);let J=M.useCallback(()=>{if(!(!$.current||!F.current)&&!V.current){Q.current(F.current);let R=s||n,U=$a(F.current,a||e||"",t||o||"",R||"");L.current=F.current?.editor.create($.current,{model:U,automaticLayout:!0,...p},m),g&&L.current.restoreViewState(Dc.get(R)),F.current.editor.setTheme(c),d!==void 0&&L.current.revealLine(d),A(!0),V.current=!0}},[e,t,n,a,o,s,p,m,g,c,d]);M.useEffect(()=>{_&&H.current(L.current,F.current)},[_]),M.useEffect(()=>{!z&&!_&&J()},[z,_,J]),q.current=a,M.useEffect(()=>{_&&E&&(D.current?.dispose(),D.current=L.current?.onDidChangeModelContent(R=>{W.current||E(L.current.getValue(),R)}))},[_,E]),M.useEffect(()=>{if(_){let R=F.current.editor.onDidChangeMarkers(U=>{let B=L.current.getModel()?.uri;if(B&&U.find(re=>re.path===B.path)){let re=F.current.editor.getModelMarkers({resource:B});T?.(re)}});return()=>{R?.dispose()}}return()=>{}},[_,T]);function O(){D.current?.dispose(),x?g&&Dc.set(s,L.current.saveViewState()):L.current.getModel()?.dispose(),L.current.dispose()}return jn.createElement(ZS,{width:v,height:w,isEditorReady:_,loading:h,_ref:$,className:N,wrapperProps:j})}var eP=KB,tP=M.memo(eP),tN=tP;const Xh=new Map,as=new Map;async function nP(e,t=null){if(Xh.has(e))return Xh.get(e);if(as.has(e))return as.get(e);const n=new Promise((a,o)=>{if(!iP(e)){o(new Error(`Invalid CDN URL: ${e}`));return}const s=document.createElement("script");s.src=e,s.async=!0,s.onload=()=>{const c=t?window[t]:!0;Xh.set(e,c),as.delete(e),a(c)},s.onerror=()=>{as.delete(e),o(new Error(`Failed to load library from: ${e}`))},document.head.appendChild(s)});return as.set(e,n),n}function iP(e){try{const t=new URL(e);return t.protocol!=="https:"?!1:["unpkg.com","cdn.jsdelivr.net","cdnjs.cloudflare.com","esm.sh","esm.run","cdn.skypack.dev","cdn.pika.dev","ga.jspm.io"].some(a=>t.hostname===a||t.hostname.endsWith(`.${a}`))}catch{return!1}}const Tp=[{name:"Lodash",url:"https://cdn.jsdelivr.net/npm/lodash@4/lodash.min.js",globalName:"_"},{name:"Axios",url:"https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js",globalName:"axios"},{name:"Day.js",url:"https://cdn.jsdelivr.net/npm/dayjs@1/dayjs.min.js",globalName:"dayjs"},{name:"UUID",url:"https://cdn.jsdelivr.net/npm/uuid@8/dist/umd/uuid.min.js",globalName:"uuid"},{name:"Marked (Markdown)",url:"https://cdn.jsdelivr.net/npm/marked/marked.min.js",globalName:"marked"}],rP=Object.freeze(Object.defineProperty({__proto__:null,CDN_EXAMPLES:Tp,loadFromCDN:nP},Symbol.toStringTag,{value:"Module"}));function aP({data:e,onUpdate:t}){const[n,a]=M.useState(!1),o=M.useCallback(p=>{t({code:p||""})},[t]),s=M.useCallback(p=>{const m=e.cdnUrls||[];m.includes(p)||t({cdnUrls:[...m,p]}),a(!1)},[e.cdnUrls,t]),c=M.useCallback(p=>{const m=e.cdnUrls||[];t({cdnUrls:m.filter(g=>g!==p)})},[e.cdnUrls,t]),d="// Access input data via `input`\n// Return output data\nreturn input;",h=e.cdnUrls||[];return u.jsxs("div",{className:"code-executor-config",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"JavaScript Code"}),u.jsx("div",{className:"config-field monaco-container",children:u.jsx(tN,{height:"200px",language:"javascript",theme:"vs-dark",value:e.code||d,onChange:o,options:{minimap:{enabled:!1},fontSize:12,lineNumbers:"on",scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:2,wordWrap:"on",padding:{top:8,bottom:8},renderLineHighlight:"gutter",scrollbar:{verticalScrollbarSize:8,horizontalScrollbarSize:8}}})}),u.jsx("div",{className:"code-help",children:u.jsxs("p",{className:"hint",children:[u.jsx("strong",{children:"Available:"})," ",u.jsx("code",{children:"input"}),", ",u.jsx("code",{children:"context"})]})})]}),u.jsxs("div",{className:"config-section",children:[u.jsxs("div",{className:"config-section-title",children:[" CDN Libraries",u.jsx("button",{className:"add-cdn-btn",onClick:()=>a(!n),title:"Add library",children:"+"})]}),n&&u.jsxs("div",{className:"cdn-picker",children:[Tp.map(p=>u.jsxs("button",{className:"cdn-option",onClick:()=>s(p.url),children:[u.jsx("strong",{children:p.name}),u.jsxs("span",{className:"cdn-global",children:["window.",p.globalName]})]},p.name)),u.jsx("div",{className:"cdn-custom",children:u.jsx("input",{type:"text",placeholder:"https://cdn.jsdelivr.net/npm/...",onKeyDown:p=>{p.key==="Enter"&&p.target.value.trim()&&(s(p.target.value.trim()),p.target.value="")}})})]}),h.length>0?u.jsx("div",{className:"cdn-list",children:h.map(p=>{const m=Tp.find(g=>g.url===p);return u.jsxs("div",{className:"cdn-item",children:[u.jsx("span",{className:"cdn-name",children:m?.name||p.split("/").pop()}),u.jsx("button",{className:"cdn-remove",onClick:()=>c(p),children:""})]},p)})}):u.jsx("p",{className:"hint",style:{marginTop:"8px"},children:"No libraries loaded. Click + to add."})]})]})}const oP=M.memo(aP),sP=[{value:"set",label:"Set (replace)"},{value:"append",label:"Append (to array)"},{value:"merge",label:"Merge (objects)"}];function lP({data:e,onUpdate:t}){return u.jsxs("div",{className:"set-variable-config",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Variable"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Variable Name"}),u.jsx("input",{type:"text",value:e.variableName||"",onChange:n=>t({variableName:n.target.value}),placeholder:"data"}),u.jsx("p",{className:"hint",children:"The key to set on the output object"})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Mode"}),u.jsx("select",{value:e.mode||"set",onChange:n=>t({mode:n.target.value}),children:sP.map(n=>u.jsx("option",{value:n.value,children:n.label},n.value))})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Value"}),u.jsxs("div",{className:"config-field",children:[u.jsx("textarea",{value:e.value||"",onChange:n=>t({value:n.target.value}),placeholder:"Value or expression",style:{minHeight:"80px"}}),u.jsxs("p",{className:"hint",children:["Use ","{{field.path}}"," to reference input data. Leave empty to use entire input."]})]})]})]})}const cP=M.memo(lP),uP=[{value:"equals",label:"Equals (==)"},{value:"notEquals",label:"Not Equals (!=)"},{value:"contains",label:"Contains"},{value:"greaterThan",label:"Greater Than (>)"},{value:"lessThan",label:"Less Than (<)"},{value:"isEmpty",label:"Is Empty"},{value:"isNotEmpty",label:"Is Not Empty"},{value:"isTrue",label:"Is Truthy"},{value:"isFalse",label:"Is Falsy"}];function dP({data:e,onUpdate:t}){const n=!["isEmpty","isNotEmpty","isTrue","isFalse"].includes(e.operator);return u.jsxs("div",{className:"if-else-config",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Condition"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Field Path"}),u.jsx("input",{type:"text",value:e.condition||"",onChange:a=>t({condition:a.target.value}),placeholder:"data.status"}),u.jsx("p",{className:"hint",children:"Path to the field to check (e.g., response.status)"})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Operator"}),u.jsx("select",{value:e.operator||"equals",onChange:a=>t({operator:a.target.value}),children:uP.map(a=>u.jsx("option",{value:a.value,children:a.label},a.value))})]}),n&&u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Compare Value"}),u.jsx("input",{type:"text",value:e.compareValue||"",onChange:a=>t({compareValue:a.target.value}),placeholder:"value to compare"})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Outputs"}),u.jsxs("div",{className:"output-info",children:[u.jsxs("div",{className:"output-row",children:[u.jsx("span",{className:"output-badge true",children:"Output 1"}),u.jsx("span",{children:"Condition is TRUE"})]}),u.jsxs("div",{className:"output-row",children:[u.jsx("span",{className:"output-badge false",children:"Output 2"}),u.jsx("span",{children:"Condition is FALSE"})]})]})]})]})}const fP=M.memo(dP);function hP({data:e,onUpdate:t}){return u.jsxs("div",{className:"loop-config",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Loop Settings"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Iterations (repeat count)"}),u.jsx("input",{type:"number",value:e.iterations||1,onChange:n=>t({iterations:parseInt(n.target.value,10)||1}),min:1,max:1e3}),u.jsx("p",{className:"hint",children:"How many times the loop will repeat the workflow"})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Items Path (optional)"}),u.jsx("input",{type:"text",value:e.itemsPath||"",onChange:n=>t({itemsPath:n.target.value}),placeholder:"items"}),u.jsx("p",{className:"hint",children:"Path to array in input data for item-based looping"})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Max Items"}),u.jsx("input",{type:"number",value:e.maxIterations||100,onChange:n=>t({maxIterations:parseInt(n.target.value,10)}),min:1,max:1e4}),u.jsx("p",{className:"hint",children:"Maximum array items to process per iteration"})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Outputs"}),u.jsxs("div",{className:"output-info",children:[u.jsxs("div",{className:"output-row",children:[u.jsx("span",{className:"output-badge loop",children:"loop "}),u.jsx("span",{children:"Connect back to repeat the workflow"})]}),u.jsxs("div",{className:"output-row",children:[u.jsx("span",{className:"output-badge done",children:"done "}),u.jsx("span",{children:"Fires when all iterations complete"})]})]})]})]})}const pP=M.memo(hP);function mP({data:e,onUpdate:t}){const n=M.useMemo(()=>e.routes||[],[e.routes]),a=M.useCallback(()=>{const c=[...n,{value:"",outputIndex:n.length}];t({routes:c})},[n,t]),o=M.useCallback((c,d,h)=>{const p=n.map((m,g)=>g===c?{...m,[d]:h}:m);t({routes:p})},[n,t]),s=M.useCallback(c=>{const d=n.filter((h,p)=>p!==c);t({routes:d})},[n,t]);return u.jsxs("div",{className:"switch-config",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Switch Field"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Field Path"}),u.jsx("input",{type:"text",value:e.field||"",onChange:c=>t({field:c.target.value}),placeholder:"status"}),u.jsx("p",{className:"hint",children:"Path to the field to switch on"})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Routes"}),n.map((c,d)=>u.jsxs("div",{className:"route-row",children:[u.jsx("input",{type:"text",value:c.value,onChange:h=>o(d,"value",h.target.value),placeholder:`Value for output ${d+1}`,className:"route-value"}),u.jsxs("span",{className:"route-output",children:[" Output ",c.outputIndex+1]}),u.jsx("button",{className:"btn-icon btn-small",onClick:()=>s(d),title:"Remove route",children:""})]},d)),u.jsx("button",{className:"btn-add-route",onClick:a,children:"+ Add Route"}),u.jsx("p",{className:"hint",style:{marginTop:"8px",marginBottom:"8px"},children:"Routes map values to dynamic output handles"}),u.jsxs("div",{className:"config-field",style:{marginTop:"12px"},children:[u.jsx("label",{children:"Default Output"}),u.jsx("p",{className:"hint",children:'When no routes match, data flows to the "default" output handle'})]})]})]})}const gP=M.memo(mP),yP=[{value:"* * * * *",label:"Every minute"},{value:"*/5 * * * *",label:"Every 5 minutes"},{value:"*/15 * * * *",label:"Every 15 minutes"},{value:"0 * * * *",label:"Every hour"},{value:"0 0 * * *",label:"Every day at midnight"},{value:"0 9 * * 1-5",label:"Weekdays at 9 AM"},{value:"0 0 * * 0",label:"Every Sunday at midnight"}];function xP({data:e,onUpdate:t}){return u.jsxs("div",{className:"schedule-trigger-config",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Schedule"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Cron Expression"}),u.jsx("input",{type:"text",value:e.schedule||"*/5 * * * *",onChange:n=>t({schedule:n.target.value}),placeholder:"*/5 * * * *"}),u.jsx("p",{className:"hint",children:"Format: minute hour day month weekday"})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Quick Presets"}),u.jsxs("select",{value:"",onChange:n=>{n.target.value&&t({schedule:n.target.value})},children:[u.jsx("option",{value:"",children:"Select a preset..."}),yP.map(n=>u.jsx("option",{value:n.value,children:n.label},n.value))]})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Status"}),u.jsxs("div",{className:"config-toggle",children:[u.jsx("label",{children:"Enable Schedule"}),u.jsx("div",{className:`toggle-switch ${e.enabled?"active":""}`,onClick:()=>t({enabled:!e.enabled})})]}),u.jsx("p",{className:"hint",style:{marginTop:"8px"},children:"Note: Browser schedules use setInterval simulation. For production, use a proper scheduler."})]})]})}const vP=M.memo(xP),bP={recommended:" Recommended",qwen:" Qwen Models",medium:" Medium Models",tiny:" Tiny Models"};function wP({data:e,onUpdate:t}){const n=Ge(h=>h.availableModels),a=Ge(h=>h.downloadedModels),o=Ge(h=>h.status),s=Ge(h=>h.currentModelId),c=M.useMemo(()=>n.filter(h=>a.includes(h.id)),[n,a]),d=M.useMemo(()=>{const h={};for(const p of c){const m=p.category||"other";h[m]||(h[m]=[]),h[m].push(p)}return h},[c]);return u.jsxs("div",{className:"ai-agent-config",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Model"}),u.jsxs("div",{className:"config-field",children:[u.jsxs("label",{children:["AI Model ",c.length===0&&"(No models downloaded)"]}),c.length>0?u.jsx("select",{value:e.modelId||s||String(c[0]?.id),onChange:h=>t({modelId:h.target.value}),children:Object.entries(d).map(([h,p])=>u.jsx("optgroup",{label:bP[h]||h,children:p.map(m=>u.jsxs("option",{value:m.id,children:[m.name," (",m.size,")"]},m.id))},h))}):u.jsx("div",{className:"warning-box",style:{padding:"8px",background:"rgba(239, 68, 68, 0.1)",borderRadius:"4px",fontSize:"13px",color:"#fca5a5"},children:"Please download a model using the Model Switcher () in the AI Control Panel."}),u.jsxs("p",{className:"hint",children:["Status:"," ",u.jsx("span",{style:{color:o==="ready"?"var(--color-success)":"var(--color-warning)"},children:o==="ready"?" Ready":o==="loading"?" Loading...":" Not loaded"})]})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"System Prompt"}),u.jsxs("div",{className:"config-field",children:[u.jsx("textarea",{value:e.systemPrompt||"",onChange:h=>t({systemPrompt:h.target.value}),placeholder:"You are a helpful AI assistant...",style:{minHeight:"150px"}}),u.jsx("p",{className:"hint",children:"Define the agent's behavior and personality"})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Reasoning Mode"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Strategy"}),u.jsxs("select",{value:e.reasoningMode||"auto",onChange:h=>t({reasoningMode:h.target.value}),children:[u.jsx("option",{value:"auto",children:" Auto (Smart Selection)"}),u.jsx("option",{value:"cot",children:" Chain-of-Thought (Step-by-Step)"}),u.jsx("option",{value:"tot",children:" Tree-of-Thoughts (Branching)"}),u.jsx("option",{value:"react",children:" ReAct (Tool Calling)"})]}),u.jsx("p",{className:"hint",children:e.reasoningMode==="cot"?"Linear step-by-step reasoning with audit trail":e.reasoningMode==="tot"?"Explores multiple branches, picks the best path":e.reasoningMode==="react"?"Thought  Action  Observation loop with tools":"Automatically selects based on task complexity"})]}),e.reasoningMode==="tot"&&u.jsx("div",{className:"config-row",children:u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Branch Count"}),u.jsx("input",{type:"number",value:e.branchCount||3,onChange:h=>t({branchCount:parseInt(h.target.value,10)}),min:2,max:5}),u.jsx("p",{className:"hint",children:"Number of reasoning paths to explore"})]})}),u.jsxs("div",{className:"config-field",children:[u.jsxs("label",{className:"toggle-label",children:[u.jsx("input",{type:"checkbox",checked:e.enableSelfCorrection||!1,onChange:h=>t({enableSelfCorrection:h.target.checked})}),"Enable Self-Correction (Critic)"]}),u.jsx("p",{className:"hint",children:"Second-pass verification to detect and fix errors before output"})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Parameters"}),u.jsxs("div",{className:"config-row",children:[u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Temperature"}),u.jsx("input",{type:"number",value:e.temperature??.7,onChange:h=>t({temperature:parseFloat(h.target.value)}),min:0,max:2,step:.1}),u.jsx("p",{className:"hint",children:"0 = focused, 2 = creative"})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Max Tokens"}),u.jsx("input",{type:"number",value:e.maxTokens||2e3,onChange:h=>t({maxTokens:parseInt(h.target.value,10)}),min:100,max:8e3,step:100})]})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Tool Calling (ReAct)"}),u.jsxs("div",{className:"config-field",children:[u.jsxs("label",{className:"toggle-label",children:[u.jsx("input",{type:"checkbox",checked:e.enableToolCalling!==!1,onChange:h=>t({enableToolCalling:h.target.checked})}),"Enable Tool Calling"]}),u.jsx("p",{className:"hint",children:"When enabled, the agent can call connected nodes as tools during reasoning"})]}),e.enableToolCalling!==!1&&u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Max Iterations"}),u.jsx("input",{type:"number",value:e.maxIterations||10,onChange:h=>t({maxIterations:parseInt(h.target.value,10)}),min:1,max:20}),u.jsx("p",{className:"hint",children:"Maximum ReAct loop iterations (prevents infinite loops)"})]}),u.jsxs("div",{className:"tools-info",children:[u.jsx("h4",{style:{margin:"0 0 8px",fontSize:"13px"},children:"Connected Tools"}),e.tools&&e.tools.length>0?u.jsx("ul",{className:"tools-list",children:e.tools.map((h,p)=>u.jsxs("li",{children:[u.jsx("span",{className:"tool-icon",children:""}),u.jsx("span",{className:"tool-name",children:h.name||h.nodeId}),u.jsx("span",{className:"tool-type",children:h.type})]},p))}):u.jsx("p",{className:"hint",style:{fontStyle:"italic"},children:"No tools connected. Connect nodes to this agent to use them as tools."})]})]})]})}const SP=M.memo(wP),W0=[{value:"text",label:"Text",icon:""},{value:"number",label:"Number",icon:""},{value:"dropdown",label:"Dropdown",icon:""},{value:"toggle",label:"Toggle",icon:""},{value:"textarea",label:"Text Area",icon:""},{value:"json",label:"JSON",icon:"{ }"}];function NP({data:e,onUpdate:t}){const[n,a]=M.useState(""),[o,s]=M.useState("text"),c=e.inputFields||[],d=e.inputValues||{},h=()=>{if(!n.trim())return;const N=`field_${crypto.randomUUID()}`,j={id:N,name:n.trim(),type:o,options:o==="dropdown"?["Option 1","Option 2"]:void 0,defaultValue:p(o)};t({inputFields:[...c,j],inputValues:{...d,[N]:j.defaultValue}}),a("")},p=N=>{switch(N){case"number":return 0;case"toggle":return!1;case"json":return"{}";default:return""}},m=N=>{const j={...d};delete j[N],t({inputFields:c.filter(S=>S.id!==N),inputValues:j})},g=(N,j)=>{t({inputValues:{...d,[N]:j}})},x=(N,j)=>{const S=j.split(",").map(k=>k.trim()).filter(Boolean);t({inputFields:c.map(k=>k.id===N?{...k,options:S}:k)})},v=(N,j)=>{const S=[...c],k=j==="up"?N-1:N+1;k<0||k>=c.length||([S[N],S[k]]=[S[k],S[N]],t({inputFields:S}))},w=N=>{const j=d[N.id]??N.defaultValue;switch(N.type){case"number":return u.jsx("input",{type:"number",value:j,onChange:S=>g(N.id,parseFloat(S.target.value)||0)});case"toggle":return u.jsxs("label",{className:"toggle-switch",children:[u.jsx("input",{type:"checkbox",checked:j,onChange:S=>g(N.id,S.target.checked)}),u.jsx("span",{className:"toggle-slider"}),u.jsx("span",{className:"toggle-label",children:j?"On":"Off"})]});case"dropdown":return u.jsxs("select",{value:j,onChange:S=>g(N.id,S.target.value),children:[u.jsx("option",{value:"",children:"Select..."}),(N.options||[]).map((S,k)=>u.jsx("option",{value:S,children:S},k))]});case"textarea":return u.jsx("textarea",{value:j,onChange:S=>g(N.id,S.target.value),rows:3});case"json":return u.jsx("textarea",{value:j,onChange:S=>g(N.id,S.target.value),className:"json-input",rows:4,placeholder:'{"key": "value"}'});default:return u.jsx("input",{type:"text",value:j,onChange:S=>g(N.id,S.target.value)})}};return u.jsxs("div",{className:"manual-trigger-config",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Trigger Settings"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Trigger Name"}),u.jsx("input",{type:"text",value:e.label||"Manual Trigger",onChange:N=>t({label:N.target.value}),placeholder:"Start Workflow"})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsxs("div",{className:"config-section-title",children:["Input Fields",u.jsx("span",{className:"field-count",children:c.length})]}),u.jsx("p",{className:"hint",children:"Define input fields that users will fill when running this workflow"}),u.jsxs("div",{className:"fields-list",children:[c.map((N,j)=>u.jsxs("div",{className:"field-item",children:[u.jsxs("div",{className:"field-header",children:[u.jsx("span",{className:"field-icon",children:W0.find(S=>S.value===N.type)?.icon||""}),u.jsx("span",{className:"field-name",children:N.name}),u.jsx("span",{className:"field-type",children:N.type}),u.jsxs("div",{className:"field-actions",children:[u.jsx("button",{className:"action-btn",onClick:()=>v(j,"up"),disabled:j===0,title:"Move up",children:""}),u.jsx("button",{className:"action-btn",onClick:()=>v(j,"down"),disabled:j===c.length-1,title:"Move down",children:""}),u.jsx("button",{className:"action-btn delete",onClick:()=>m(N.id),title:"Remove field",children:""})]})]}),u.jsx("div",{className:"field-input",children:w(N)}),N.type==="dropdown"&&u.jsxs("div",{className:"field-options",children:[u.jsx("label",{children:"Options (comma-separated)"}),u.jsx("input",{type:"text",value:(N.options||[]).join(", "),onChange:S=>x(N.id,S.target.value),placeholder:"Option 1, Option 2, Option 3"})]})]},N.id)),c.length===0&&u.jsxs("div",{className:"empty-fields",children:[u.jsx("p",{children:"No input fields defined"}),u.jsx("p",{className:"hint",children:"Add fields below to create a form"})]})]}),u.jsx("div",{className:"add-field-form",children:u.jsxs("div",{className:"add-field-row",children:[u.jsx("input",{type:"text",value:n,onChange:N=>a(N.target.value),placeholder:"Field name...",className:"field-name-input",onKeyDown:N=>N.key==="Enter"&&h()}),u.jsx("select",{value:o,onChange:N=>s(N.target.value),className:"field-type-select",children:W0.map(N=>u.jsxs("option",{value:N.value,children:[N.icon," ",N.label]},N.value))}),u.jsx("button",{className:"add-field-btn",onClick:h,disabled:!n.trim(),children:"+ Add"})]})})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Output Preview"}),u.jsx("div",{className:"output-preview",children:u.jsx("pre",{children:JSON.stringify(d,null,2)})}),u.jsx("p",{className:"hint",children:"This data will be passed to connected nodes"})]})]})}const jP=M.memo(NP);function EP({data:e,onUpdate:t}){return u.jsx("div",{className:"config-sections",children:u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Voice Settings"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Provider"}),u.jsxs("select",{value:e.provider||"webSpeech",onChange:n=>t({provider:n.target.value}),children:[u.jsx("option",{value:"webSpeech",children:"Web Speech API (Local)"}),u.jsx("option",{value:"elevenlabs",children:"ElevenLabs (API Key Required)"})]})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Voice"}),u.jsxs("select",{value:e.voice||"default",onChange:n=>t({voice:n.target.value}),children:[u.jsx("option",{value:"default",children:"Default"}),u.jsx("option",{value:"Microsoft David",children:"Microsoft David"}),u.jsx("option",{value:"Microsoft Zira",children:"Microsoft Zira"}),u.jsx("option",{value:"Google US English",children:"Google US English"})]}),u.jsx("p",{className:"hint",children:"Available voices depend on your browser"})]}),u.jsxs("div",{className:"config-row",children:[u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Speed"}),u.jsx("input",{type:"range",min:"0.5",max:"2",step:"0.1",value:e.speed||1,onChange:n=>t({speed:parseFloat(n.target.value)})}),u.jsxs("span",{className:"hint",children:[e.speed||1,"x"]})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Pitch"}),u.jsx("input",{type:"range",min:"0.5",max:"2",step:"0.1",value:e.pitch||1,onChange:n=>t({pitch:parseFloat(n.target.value)})}),u.jsx("span",{className:"hint",children:e.pitch||1})]})]}),u.jsxs("div",{className:"config-toggle",children:[u.jsx("label",{children:"Auto-play audio"}),u.jsx("div",{className:`toggle-switch ${e.autoPlay!==!1?"active":""}`,onClick:()=>t({autoPlay:e.autoPlay===!1})})]})]})})}const kP=M.memo(EP);function CP({data:e,onUpdate:t}){const n=M.useCallback(o=>{t({code:o||""})},[t]);return u.jsxs("div",{className:"config-sections",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Python Code"}),u.jsxs("div",{className:"config-field monaco-container",children:[u.jsx(tN,{height:"250px",language:"python",theme:"vs-dark",value:e.code||`# Access input via 'input' variable
# Set 'result' to output data
result = input`,onChange:n,options:{minimap:{enabled:!1},fontSize:12,lineNumbers:"on",scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:4,wordWrap:"on",padding:{top:8,bottom:8},renderLineHighlight:"gutter",scrollbar:{verticalScrollbarSize:8,horizontalScrollbarSize:8}}}),u.jsx("p",{className:"hint",children:"Use 'input' to access incoming data. Set 'result' for output."})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Required Packages"}),u.jsx("input",{type:"text",value:(e.packages||[]).join(", "),onChange:o=>t({packages:o.target.value.split(",").map(s=>s.trim()).filter(Boolean)}),placeholder:"numpy, pandas, matplotlib"}),u.jsx("p",{className:"hint",children:"Comma-separated list of pip packages"})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Timeout (ms)"}),u.jsx("input",{type:"number",value:e.timeout||3e4,onChange:o=>t({timeout:parseInt(o.target.value)}),min:1e3,max:3e5})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:" Tips"}),u.jsxs("ul",{className:"hint-list",children:[u.jsx("li",{children:"First run downloads Pyodide (~15MB)"}),u.jsx("li",{children:"Supports numpy, pandas, scipy, matplotlib"}),u.jsx("li",{children:"All execution happens locally"})]})]})]})}const AP=M.memo(CP);function TP({data:e,onUpdate:t}){return u.jsx("div",{className:"config-sections",children:u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Memory Settings"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Mode"}),u.jsxs("select",{value:e.mode||"query",onChange:n=>t({mode:n.target.value}),children:[u.jsx("option",{value:"query",children:"Query (Search)"}),u.jsx("option",{value:"upsert",children:"Upsert (Add/Update)"}),u.jsx("option",{value:"delete",children:"Delete"})]})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Namespace"}),u.jsx("input",{type:"text",value:e.namespace||"default",onChange:n=>t({namespace:n.target.value}),placeholder:"default"}),u.jsx("p",{className:"hint",children:"Group related memories together"})]}),e.mode==="query"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Top K Results"}),u.jsx("input",{type:"number",value:e.topK||5,onChange:n=>t({topK:parseInt(n.target.value)}),min:1,max:50})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Min Score"}),u.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:e.minScore||.3,onChange:n=>t({minScore:parseFloat(n.target.value)})}),u.jsx("span",{className:"hint",children:e.minScore||.3})]})]})]})})}const MP=M.memo(TP);function DP({data:e,onUpdate:t}){return u.jsxs("div",{className:"config-sections",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"File Operation"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Mode"}),u.jsxs("select",{value:e.mode||"read",onChange:n=>t({mode:n.target.value}),children:[u.jsx("option",{value:"read",children:"Read File"}),u.jsx("option",{value:"write",children:"Write File"})]})]}),e.mode==="write"&&u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Suggested Filename"}),u.jsx("input",{type:"text",value:e.filename||"",onChange:n=>t({filename:n.target.value}),placeholder:"output.txt"})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:" Info"}),u.jsx("p",{className:"hint",children:"Uses the File System Access API. A file picker will open when the node runs."})]})]})}const OP=M.memo(DP);function _P({data:e,onUpdate:t}){return u.jsx("div",{className:"config-sections",children:u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Storage Settings"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Storage Type"}),u.jsxs("select",{value:e.storageType||"localStorage",onChange:n=>t({storageType:n.target.value}),children:[u.jsx("option",{value:"localStorage",children:"LocalStorage"}),u.jsx("option",{value:"indexedDB",children:"IndexedDB"})]})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Operation"}),u.jsxs("select",{value:e.mode||"get",onChange:n=>t({mode:n.target.value}),children:[u.jsx("option",{value:"get",children:"Get"}),u.jsx("option",{value:"set",children:"Set"}),u.jsx("option",{value:"delete",children:"Delete"})]})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Key"}),u.jsx("input",{type:"text",value:e.key||"",onChange:n=>t({key:n.target.value}),placeholder:"my_data_key"})]})]})})}const RP=M.memo(_P),IP=[{value:"auto",label:"Auto-detect",category:"Auto"},{value:"text/plain",label:"Text (.txt)",category:"Text"},{value:"text/markdown",label:"Markdown (.md)",category:"Text"},{value:"text/html",label:"HTML (.html)",category:"Text"},{value:"text/css",label:"CSS (.css)",category:"Text"},{value:"text/javascript",label:"JavaScript (.js)",category:"Text"},{value:"application/json",label:"JSON (.json)",category:"Data"},{value:"text/csv",label:"CSV (.csv)",category:"Data"},{value:"application/xml",label:"XML (.xml)",category:"Data"},{value:"application/yaml",label:"YAML (.yaml)",category:"Data"},{value:"application/pdf",label:"PDF (.pdf)",category:"Document"},{value:"application/msword",label:"Word (.doc)",category:"Document"},{value:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",label:"Word (.docx)",category:"Document"},{value:"application/vnd.ms-excel",label:"Excel (.xls)",category:"Document"},{value:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",label:"Excel (.xlsx)",category:"Document"},{value:"application/vnd.ms-powerpoint",label:"PowerPoint (.ppt)",category:"Document"},{value:"application/vnd.openxmlformats-officedocument.presentationml.presentation",label:"PowerPoint (.pptx)",category:"Document"},{value:"audio/wav",label:"WAV Audio (.wav)",category:"Audio"},{value:"audio/mpeg",label:"MP3 Audio (.mp3)",category:"Audio"},{value:"audio/ogg",label:"OGG Audio (.ogg)",category:"Audio"},{value:"audio/webm",label:"WebM Audio (.webm)",category:"Audio"},{value:"audio/flac",label:"FLAC Audio (.flac)",category:"Audio"},{value:"audio/aac",label:"AAC Audio (.aac)",category:"Audio"},{value:"video/mp4",label:"MP4 Video (.mp4)",category:"Video"},{value:"video/webm",label:"WebM Video (.webm)",category:"Video"},{value:"video/ogg",label:"OGG Video (.ogv)",category:"Video"},{value:"video/quicktime",label:"QuickTime (.mov)",category:"Video"},{value:"video/x-msvideo",label:"AVI Video (.avi)",category:"Video"},{value:"image/png",label:"PNG Image (.png)",category:"Image"},{value:"image/jpeg",label:"JPEG Image (.jpg)",category:"Image"},{value:"image/gif",label:"GIF Image (.gif)",category:"Image"},{value:"image/webp",label:"WebP Image (.webp)",category:"Image"},{value:"image/svg+xml",label:"SVG Image (.svg)",category:"Image"},{value:"image/bmp",label:"Bitmap Image (.bmp)",category:"Image"},{value:"application/zip",label:"ZIP Archive (.zip)",category:"Archive"},{value:"application/x-tar",label:"TAR Archive (.tar)",category:"Archive"},{value:"application/gzip",label:"GZIP Archive (.gz)",category:"Archive"},{value:"application/x-7z-compressed",label:"7-Zip Archive (.7z)",category:"Archive"},{value:"application/octet-stream",label:"Binary (.bin)",category:"Binary"}],LP=IP.reduce((e,t)=>(e[t.category]||(e[t.category]=[]),e[t.category].push(t),e),{});function zP({data:e,onUpdate:t}){return u.jsx("div",{className:"config-sections",children:u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Output Settings"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Output Type"}),u.jsxs("select",{value:e.outputType||"console",onChange:n=>t({outputType:n.target.value}),children:[u.jsx("option",{value:"console",children:"Console Log"}),u.jsx("option",{value:"file",children:"Save to File"}),u.jsx("option",{value:"notification",children:"Show Notification"}),u.jsx("option",{value:"artifact",children:"Save as Artifact"})]})]}),e.outputType==="file"&&u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Filename"}),u.jsx("input",{type:"text",value:e.filename||"output.txt",onChange:n=>t({filename:n.target.value}),placeholder:"output.txt"})]}),e.outputType==="artifact"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Artifact Type"}),u.jsx("select",{value:e.artifactType||"auto",onChange:n=>t({artifactType:n.target.value}),children:Object.entries(LP).map(([n,a])=>u.jsx("optgroup",{label:n,children:a.map(o=>u.jsx("option",{value:o.value,children:o.label},o.value))},n))})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Artifact Name"}),u.jsx("input",{type:"text",value:e.artifactName||"",onChange:n=>t({artifactName:n.target.value}),placeholder:"Auto-generated if empty"})]})]}),e.outputType==="notification"&&u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Notification Title"}),u.jsx("input",{type:"text",value:e.notificationTitle||"Workflow Complete",onChange:n=>t({notificationTitle:n.target.value})})]}),u.jsxs("div",{className:"config-toggle",children:[u.jsx("label",{children:"Format as JSON"}),u.jsx("div",{className:`toggle-switch ${e.formatJson?"active":""}`,onClick:()=>t({formatJson:!e.formatJson})})]})]})})}const BP=M.memo(zP);function PP({data:e,onUpdate:t}){const n=Ge(d=>d.availableModels),a=Ge(d=>d.status),o=Ge(d=>d.loadModel),s=d=>{const h=n.find(p=>p.id===d);t({modelId:d,modelName:h?.name||d})},c=async()=>{e.modelId&&await o(e.modelId)};return u.jsxs("div",{className:"chat-model-config",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Model Selection"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Provider"}),u.jsxs("select",{value:e.provider||"webllm",onChange:d=>t({provider:d.target.value}),children:[u.jsx("option",{value:"webllm",children:"WebLLM (Local Browser)"}),u.jsx("option",{value:"openai",children:"OpenAI API"}),u.jsx("option",{value:"anthropic",children:"Anthropic API"}),u.jsx("option",{value:"local",children:"Local Ollama"})]})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Model"}),u.jsxs("select",{value:e.modelId||"",onChange:d=>s(d.target.value),children:[u.jsx("option",{value:"",children:"Select a model..."}),n.map(d=>u.jsxs("option",{value:d.id,children:[d.name," (",d.size,")"]},d.id))]}),u.jsx("p",{className:"hint",children:"Choose the AI model for text generation"})]}),e.provider==="webllm"&&u.jsxs("div",{className:"model-status-section",children:[u.jsxs("div",{className:`status-badge ${a}`,children:[a==="ready"&&" Model Ready",a==="loading"&&" Loading...",a==="idle"&&" Not Loaded",a==="error"&&" Error"]}),a!=="ready"&&a!=="loading"&&u.jsx("button",{className:"load-model-btn",onClick:c,disabled:!e.modelId,children:"Load Model"})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Generation Settings"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Temperature"}),u.jsxs("div",{className:"slider-row",children:[u.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",value:e.temperature||.7,onChange:d=>t({temperature:parseFloat(d.target.value)})}),u.jsx("span",{className:"slider-value",children:e.temperature||.7})]}),u.jsx("p",{className:"hint",children:"Higher = more creative, Lower = more focused"})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Max Tokens"}),u.jsx("input",{type:"number",value:e.maxTokens||2e3,onChange:d=>t({maxTokens:parseInt(d.target.value,10)||2e3}),min:100,max:8e3}),u.jsx("p",{className:"hint",children:"Maximum response length"})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Connection"}),u.jsx("div",{className:"connection-info",children:u.jsxs("p",{children:["Connect the ",u.jsx("strong",{children:"Model "})," output (top) to an AI Agent's Model input slot."]})})]})]})}const $P=M.memo(PP);function HP({data:e,onUpdate:t}){return u.jsxs("div",{className:"config-sections",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Swarm Size"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Agent Count"}),u.jsx("input",{type:"number",value:e.agentCount||3,onChange:n=>t({agentCount:parseInt(n.target.value)}),min:2,max:10,step:1}),u.jsx("p",{className:"hint",children:"Number of parallel agents to spawn (2-10)"})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Execution"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Aggregation Mode"}),u.jsxs("select",{value:e.aggregationMode||"consensus",onChange:n=>t({aggregationMode:n.target.value}),children:[u.jsx("option",{value:"consensus",children:"Consensus (Vote)"}),u.jsx("option",{value:"first",children:"First to Finish"}),u.jsx("option",{value:"all",children:"Return All Results"})]}),u.jsx("p",{className:"hint",children:e.aggregationMode==="consensus"?"Agents vote on the best answer":e.aggregationMode==="first"?"Fastest response wins (race)":"Collect responses from all agents"})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Timeout (ms)"}),u.jsx("input",{type:"number",value:e.timeout||3e4,onChange:n=>t({timeout:parseInt(n.target.value)}),min:1e3,max:3e5,step:1e3})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Shared Context"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"System Prompt"}),u.jsx("textarea",{value:e.systemPrompt||"",onChange:n=>t({systemPrompt:n.target.value}),placeholder:"You are a swarm of experts solving a problem...",style:{minHeight:"120px"}}),u.jsx("p",{className:"hint",children:"Shared instruction for all agents in the swarm"})]})]})]})}const qP=M.memo(HP);function UP({data:e,onUpdate:t}){const n=M.useCallback(()=>{const s=e.routes||[],d={id:`route-${Date.now()}`,label:`Route ${s.length+1}`,keywords:[]};t({routes:[...s,d]})},[e.routes,t]),a=M.useCallback(s=>{const c=[...e.routes||[]];c.splice(s,1),t({routes:c})},[e.routes,t]),o=M.useCallback((s,c,d)=>{const h=[...e.routes||[]];if(c==="keywords"){const p=d.split(",").map(m=>m.trim()).filter(m=>m);h[s]={...h[s],keywords:p}}else h[s]={...h[s],[c]:d};t({routes:h})},[e.routes,t]);return u.jsxs("div",{className:"config-sections",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Routing Logic"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Classification Mode"}),u.jsxs("select",{value:e.classificationMode||"keyword",onChange:s=>t({classificationMode:s.target.value}),children:[u.jsx("option",{value:"keyword",children:"Keyword Matching (Exact)"}),u.jsx("option",{value:"embedding",children:"Neural Embeddings (Semantic)"}),u.jsx("option",{value:"llm",children:"LLM (Generative)"})]}),u.jsx("p",{className:"hint",children:e.classificationMode==="keyword"?"Matches exact words in the input text":e.classificationMode==="embedding"?"Routes based on semantic meaning (requires Vector Memory)":"Uses AI model to determine intent (slowest but smartest)"})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsxs("div",{className:"config-header-row",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[u.jsx("div",{className:"config-section-title",style:{marginBottom:0},children:"Routes"}),u.jsx("button",{className:"btn-small",onClick:n,style:{padding:"4px 8px",fontSize:"11px",background:"var(--color-primary-light)",border:"none",borderRadius:"4px",cursor:"pointer"},children:"+ Add Route"})]}),u.jsxs("div",{className:"routes-list",style:{display:"flex",flexDirection:"column",gap:"12px"},children:[(e.routes||[]).map((s,c)=>u.jsxs("div",{className:"route-item",style:{background:"var(--bg-depth-1)",padding:"10px",borderRadius:"6px",border:"1px solid var(--border-color)",position:"relative"},children:[u.jsx("button",{className:"btn-remove-route",onClick:()=>a(c),style:{position:"absolute",top:"5px",right:"5px",background:"none",border:"none",color:"var(--color-error)",cursor:"pointer",opacity:.7},title:"Remove Route",children:""}),u.jsxs("div",{className:"config-field",style:{marginBottom:"8px"},children:[u.jsx("label",{style:{fontSize:"11px"},children:"Label (Output Name)"}),u.jsx("input",{type:"text",value:s.label,onChange:d=>o(c,"label",d.target.value),placeholder:"e.g., Technical Question"})]}),u.jsxs("div",{className:"config-field",style:{marginBottom:0},children:[u.jsx("label",{style:{fontSize:"11px"},children:e.classificationMode==="keyword"?"Keywords (comma separated)":"Description/Topic"}),u.jsx("input",{type:"text",value:(s.keywords||[]).join(", "),onChange:d=>o(c,"keywords",d.target.value),placeholder:e.classificationMode==="keyword"?"bug, code, error":"User is asking for code or technical help"})]})]},s.id||c)),(e.routes||[]).length===0&&u.jsx("div",{className:"empty-state",style:{padding:"20px",textAlign:"center",color:"var(--text-secondary)",fontSize:"12px",fontStyle:"italic"},children:'No routes defined. All traffic will go to "Other".'})]})]})]})}const FP=M.memo(UP);function VP({data:e,onUpdate:t}){const[n,a]=M.useState(null),[o,s]=M.useState("");M.useEffect(()=>{if(e.schema)try{const d=JSON.stringify(e.schema,null,2);s(h=>h!==d?d:h)}catch{}},[e.schema]);const c=d=>{s(d);try{if(!d.trim()){t({schema:null}),a(null);return}const h=JSON.parse(d);t({schema:h}),a(null)}catch(h){a(h.message)}};return u.jsxs("div",{className:"config-sections",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Validation Rule"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Evaluation Type"}),u.jsxs("select",{value:e.evaluationType||"schema",onChange:d=>t({evaluationType:d.target.value}),children:[u.jsx("option",{value:"schema",children:"JSON Schema (Structure)"}),u.jsx("option",{value:"regex",children:"Regex (Pattern)"}),u.jsx("option",{value:"llm",children:"AI Evaluator (Semantic)"})]})]}),e.evaluationType==="schema"&&u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Validation Schema (JSON)"}),u.jsx("textarea",{value:o,onChange:d=>c(d.target.value),placeholder:'{ "type": "object", "properties": { ... } }',style:{minHeight:"200px",fontFamily:"monospace",fontSize:"12px",borderColor:n?"var(--color-error)":void 0}}),n&&u.jsxs("p",{className:"error-message",style:{color:"var(--color-error)",fontSize:"11px",marginTop:"4px"},children:["Invalid JSON: ",n]}),u.jsx("p",{className:"hint",children:"Standard JSON Schema validation"})]}),e.evaluationType==="regex"&&u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Regex Pattern"}),u.jsx("input",{type:"text",value:e.regexPattern||"",onChange:d=>t({regexPattern:d.target.value}),placeholder:"e.g., ^[a-z0-9]+$"})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Correction Loop"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Max Retries"}),u.jsx("input",{type:"number",value:e.maxRetries||3,onChange:d=>t({maxRetries:parseInt(d.target.value)}),min:1,max:10}),u.jsx("p",{className:"hint",children:"How many times to feed errors back to the generator"})]})]})]})}const GP=M.memo(VP);function WP({data:e,onUpdate:t}){return u.jsxs("div",{className:"config-sections",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Model Settings"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Provider"}),u.jsxs("select",{value:e.provider||"local",onChange:n=>t({provider:n.target.value}),children:[u.jsx("option",{value:"local",children:"Local (WebSD / Browser)"}),u.jsx("option",{value:"openai",children:"OpenAI (DALL-E)"}),u.jsx("option",{value:"stability",children:"Stability AI"})]})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Model"}),u.jsx("input",{type:"text",value:e.model||"stable-diffusion",onChange:n=>t({model:n.target.value}),placeholder:"Model ID or Name"})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Generation Parameters"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Size"}),u.jsxs("select",{value:e.size||"512x512",onChange:n=>t({size:n.target.value}),children:[u.jsx("option",{value:"256x256",children:"256x256 (Fastest)"}),u.jsx("option",{value:"512x512",children:"512x512 (Standard)"}),u.jsx("option",{value:"1024x1024",children:"1024x1024 (HD)"})]})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Negative Prompt"}),u.jsx("textarea",{value:e.negativePrompt||"",onChange:n=>t({negativePrompt:n.target.value}),placeholder:"blurry, bad anatomy, text, watermark...",style:{minHeight:"80px"}}),u.jsx("p",{className:"hint",children:"What to exclude from the image"})]}),u.jsxs("div",{className:"config-row",children:[u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Steps"}),u.jsx("input",{type:"number",value:e.steps||20,onChange:n=>t({steps:parseInt(n.target.value)}),min:1,max:50})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Seed"}),u.jsx("input",{type:"number",value:e.seed||"",onChange:n=>t({seed:n.target.value?parseInt(n.target.value):null}),placeholder:"Random"})]})]})]})]})}const YP=M.memo(WP);function XP({data:e,onUpdate:t}){return u.jsxs("div",{className:"config-sections",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Synchronization"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Wait Mode"}),u.jsxs("select",{value:e.mode||"wait",onChange:n=>t({mode:n.target.value}),children:[u.jsx("option",{value:"wait",children:"Wait for ALL Inputs"}),u.jsx("option",{value:"first",children:"Proceed on FIRST Input"})]}),u.jsx("p",{className:"hint",children:e.mode==="wait"?"Acts as a barrier. Waits until all connected branches finish.":"Race condition. Continues as soon as one branch finishes."})]}),e.mode==="wait"&&u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Input Count (Manual Override)"}),u.jsx("input",{type:"number",value:e.inputCount||2,onChange:n=>t({inputCount:parseInt(n.target.value)}),min:2,max:10}),u.jsx("p",{className:"hint",children:"Usually auto-detected, but can be forced."})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Data Aggregation"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Result Format"}),u.jsxs("select",{value:e.aggregator||"array",onChange:n=>t({aggregator:n.target.value}),children:[u.jsx("option",{value:"array",children:"Array of Results [A, B]"}),u.jsxs("option",{value:"object",children:["Merged Object ","{ ...A, ...B }"]}),u.jsx("option",{value:"concat",children:"String Concatenation"})]})]})]})]})}const QP=M.memo(XP);function JP({data:e,onUpdate:t}){return u.jsxs("div",{className:"config-sections",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Target Workflow"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Workflow ID"}),u.jsx("input",{type:"text",value:e.workflowId||"",onChange:n=>t({workflowId:n.target.value}),placeholder:"UUID of target workflow"}),u.jsx("p",{className:"hint",children:"The ID of the workflow to execute. (Future: Dropdown selection)"})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Execution Mode"}),u.jsxs("div",{className:"config-field",children:[u.jsxs("label",{className:"toggle-label",children:[u.jsx("input",{type:"checkbox",checked:e.passInput!==!1,onChange:n=>t({passInput:n.target.checked})}),"Pass Input Data"]}),u.jsx("p",{className:"hint",children:"Forward input from this node to the start of the sub-workflow"})]}),u.jsxs("div",{className:"config-field",children:[u.jsxs("label",{className:"toggle-label",children:[u.jsx("input",{type:"checkbox",checked:e.async||!1,onChange:n=>t({async:n.target.checked})}),"Run Asynchronously (Fire & Forget)"]}),u.jsx("p",{className:"hint",children:"If checked, this node completes immediately without waiting for result"})]})]})]})}const ZP=M.memo(JP);function KP({data:e,onUpdate:t}){return u.jsxs("div",{className:"config-sections",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Approval Request"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Title"}),u.jsx("input",{type:"text",value:e.title||"Approval Required",onChange:n=>t({title:n.target.value}),placeholder:"Action Header"})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Message / Description"}),u.jsx("textarea",{value:e.message||"",onChange:n=>t({message:n.target.value}),placeholder:"Please review the data before proceeding...",style:{minHeight:"80px"}}),u.jsx("p",{className:"hint",children:"Explain what needs to be approved"})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Settings"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Timeout (seconds)"}),u.jsx("input",{type:"number",value:e.timeout||0,onChange:n=>t({timeout:parseInt(n.target.value)}),min:0,placeholder:"0 = No timeout"}),u.jsx("p",{className:"hint",children:"Auto-reject after N seconds (0 to disable)"})]}),u.jsx("div",{className:"config-field",children:u.jsxs("label",{className:"toggle-label",children:[u.jsx("input",{type:"checkbox",checked:e.notifyBrowser!==!1,onChange:n=>t({notifyBrowser:n.target.checked})}),"Browser Notification"]})})]})]})}const e6=M.memo(KP);function t6({data:e,onUpdate:t}){return u.jsx("div",{className:"config-sections",children:u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Event Listener"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Event Type"}),u.jsxs("select",{value:e.eventType||"focus",onChange:n=>t({eventType:n.target.value}),children:[u.jsx("option",{value:"focus",children:"Window Focus"}),u.jsx("option",{value:"blur",children:"Window Blur"}),u.jsx("option",{value:"urlChange",children:"URL Change (Navigation)"}),u.jsx("option",{value:"domClick",children:"Element Click"}),u.jsx("option",{value:"domChange",children:"DOM Change (Observer)"})]})]}),e.eventType==="domClick"&&u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"CSS Selector"}),u.jsx("input",{type:"text",value:e.selector||"",onChange:n=>t({selector:n.target.value}),placeholder:"#submit-button, .link"})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"URL Pattern (Optional)"}),u.jsx("input",{type:"text",value:e.urlPattern||"",onChange:n=>t({urlPattern:n.target.value}),placeholder:"example.com/*"}),u.jsx("p",{className:"hint",children:"Only trigger on specific pages"})]})]})})}const n6=M.memo(t6);function i6({data:e,onUpdate:t}){return u.jsxs("div",{className:"config-sections",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Endpoint Settings"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"HTTP Method"}),u.jsxs("select",{value:e.method||"POST",onChange:n=>t({method:n.target.value}),children:[u.jsx("option",{value:"POST",children:"POST"}),u.jsx("option",{value:"GET",children:"GET"}),u.jsx("option",{value:"PUT",children:"PUT"})]})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Endpoint URL path"}),u.jsx("input",{type:"text",value:e.endpoint||"/webhook/default",onChange:n=>t({endpoint:n.target.value}),placeholder:"/webhook/my-trigger"}),u.jsx("p",{className:"hint",children:"Relative path from server root"})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Security"}),u.jsxs("div",{className:"config-field",children:[u.jsxs("label",{className:"toggle-label",children:[u.jsx("input",{type:"checkbox",checked:e.authRequired||!1,onChange:n=>t({authRequired:n.target.checked})}),"Require Authentication"]}),u.jsx("p",{className:"hint",children:'Validates "Authorization" header'})]})]})]})}const r6=M.memo(i6);function a6({data:e,onUpdate:t}){return u.jsxs("div",{className:"config-sections",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Error Scope"}),u.jsxs("div",{className:"config-field",children:[u.jsxs("label",{className:"toggle-label",children:[u.jsx("input",{type:"checkbox",checked:e.watchAll!==!1,onChange:n=>t({watchAll:n.target.checked})}),"Watch All Nodes (Global Handler)"]}),u.jsx("p",{className:"hint",children:"Catches errors from any node in the workflow"})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Recovery"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Auto-Retry"}),u.jsxs("select",{value:e.retryEnabled?"yes":"no",onChange:n=>t({retryEnabled:n.target.value==="yes"}),children:[u.jsx("option",{value:"no",children:"Disabled"}),u.jsx("option",{value:"yes",children:"Attempt Retry"})]})]}),e.retryEnabled&&u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Max Retries"}),u.jsx("input",{type:"number",value:e.retryCount||3,onChange:n=>t({retryCount:parseInt(n.target.value)}),min:1,max:10})]})]})]})}const o6=M.memo(a6),s6={httpRequest:W5,codeExecutor:oP,setVariable:cP,ifElse:fP,loop:pP,switchNode:gP,scheduleTrigger:vP,aiAgent:SP,manualTrigger:jP,textToSpeech:kP,pythonExecutor:AP,vectorMemory:MP,fileSystem:OP,localStorage:RP,output:BP,chatModel:$P,swarm:qP,semanticRouter:FP,evaluator:GP,imageGeneration:YP,merge:QP,subWorkflow:ZP,waitForApproval:e6,browserEventTrigger:n6,webhookTrigger:r6,errorTrigger:o6};function l6(){const e=Ne($=>$.nodes),t=Ne($=>$.selectedNodeId),n=Ne($=>$.configOpen),a=Ne($=>$.updateNode),o=Ne($=>$.deleteNode),s=Ne($=>$.setSelectedNode),c=Ne($=>$.closeConfig),[d,h]=M.useState({x:0,y:0}),[p,m]=M.useState(!1),g=M.useRef({startX:0,startY:0,startPosX:0,startPosY:0}),x=M.useRef(null),[v,w]=M.useState(380),[N,j]=M.useState(!1),S=M.useRef({startX:0,startWidth:380}),k=M.useCallback($=>{$.target.tagName==="INPUT"||$.target.tagName==="BUTTON"||(m(!0),g.current={startX:$.clientX,startY:$.clientY,startPosX:d.x,startPosY:d.y},$.preventDefault())},[d]);M.useEffect(()=>{if(!p)return;const $=Q=>{const D=Q.clientX-g.current.startX,q=Q.clientY-g.current.startY;h({x:g.current.startPosX+D,y:g.current.startPosY+q})},H=()=>{m(!1)};return document.addEventListener("mousemove",$),document.addEventListener("mouseup",H),()=>{document.removeEventListener("mousemove",$),document.removeEventListener("mouseup",H)}},[p]);const E=M.useCallback($=>{$.preventDefault(),j(!0),S.current={startX:$.clientX,startWidth:v}},[v]);M.useEffect(()=>{if(!N)return;const $=Q=>{const D=S.current.startX-Q.clientX,q=Math.max(280,Math.min(800,S.current.startWidth+D));w(q)},H=()=>{j(!1)};return document.addEventListener("mousemove",$),document.addEventListener("mouseup",H),()=>{document.removeEventListener("mousemove",$),document.removeEventListener("mouseup",H)}},[N]);const T=e.find($=>$.id===t),_=M.useCallback($=>{t&&a(t,$)},[t,a]),A=M.useCallback(()=>{t&&(o(t),s(null),c())},[t,o,s,c]),z=M.useCallback(()=>{c()},[c]);if(!n||!T)return null;const G=ki[T.type],F=s6[T.type],L=yu(T.type);return u.jsxs("div",{ref:x,className:`node-config-panel ${p?"dragging":""} ${N?"resizing":""}`,style:{"--node-color":L,width:`${v}px`,transform:`translate(${d.x}px, ${d.y}px)`},children:[u.jsx("div",{className:"resize-handle",onMouseDown:E,title:"Drag to resize"}),u.jsxs("header",{className:"config-header draggable",onMouseDown:k,children:[u.jsx("div",{className:"drag-handle",title:"Drag to move",children:""}),u.jsxs("div",{className:"config-title",children:[u.jsx("span",{className:"node-icon",children:G?.icon||""}),u.jsx("input",{type:"text",className:"node-label-input",value:T.data.label||"",onChange:$=>_({label:$.target.value}),placeholder:G?.name||"Node"})]}),u.jsxs("div",{className:"config-actions",children:[u.jsx("button",{type:"button",className:"btn-icon btn-delete",onClick:$=>{$.stopPropagation(),$.preventDefault(),A()},title:"Delete node",children:""}),u.jsx("button",{type:"button",className:"btn-icon",onClick:$=>{$.stopPropagation(),z()},title:"Close",children:""})]})]}),u.jsx("div",{className:"config-body",children:F?u.jsx(F,{data:T.data,onUpdate:_,nodeId:T.id}):u.jsx("div",{className:"config-empty",children:u.jsx("p",{children:"No configuration available for this node type."})})}),u.jsxs("footer",{className:"config-footer",children:[u.jsx("span",{className:"node-type-label",children:G?.name||T.type}),u.jsxs("span",{className:"node-id",children:[T.id.slice(0,12),"..."]})]})]})}const c6=M.memo(l6);function u6({message:e,type:t,onClose:n}){const a={success:"",error:"",warning:"",info:""};return u.jsxs("div",{className:`toast toast-${t}`,role:"alert",children:[u.jsx("span",{className:"toast-icon",children:a[t]}),u.jsx("span",{className:"toast-message",children:e}),u.jsx("button",{className:"toast-close",onClick:n,children:""})]})}function d6(){const e=Ja(n=>n.toasts),t=Ja(n=>n.removeToast);return e.length===0?null:u.jsx("div",{className:"toast-container",children:e.map(n=>u.jsx(u6,{...n,onClose:()=>t(n.id)},n.id))})}const f6=M.memo(d6);function h6(){const e=Ge(s=>s.status),t=Ge(s=>s.loadProgress),n=Ge(s=>s.currentModel),a=Ge(s=>s.availableModels);if(e!=="loading")return null;const o=a.find(s=>s.id===n);return u.jsx("div",{className:"loading-overlay",children:u.jsxs("div",{className:"loading-content",children:[u.jsxs("div",{className:"loading-header",children:[u.jsx("h1",{className:"brand-title",children:"IOSANS"}),u.jsx("span",{className:"brand-tagline",children:"Infinite Open Source Automation System"})]}),u.jsxs("div",{className:"loading-spinner",children:[u.jsx("div",{className:"spinner-ring"}),u.jsx("span",{className:"spinner-icon",children:""})]}),u.jsx("h2",{className:"loading-title",children:"Preparing Your Sovereign AI"}),u.jsxs("div",{className:"loading-model-info",children:[u.jsx("span",{className:"model-name",children:o?.name||n}),o?.size&&u.jsx("span",{className:"model-size",children:o.size})]}),u.jsxs("div",{className:"progress-container",children:[u.jsx("div",{className:"progress-bar",children:u.jsx("div",{className:"progress-fill",style:{width:`${Math.round((t||0)*100)}%`}})}),u.jsxs("span",{className:"progress-text",children:[Math.round((t||0)*100),"%"]})]}),u.jsxs("p",{className:"loading-hint",children:["Your AI runs locally. No cloud. No data harvesting.",u.jsx("br",{}),u.jsx("strong",{children:"You own your intelligence."})]})]})})}const p6=M.memo(h6),Y0="flownode-workflows";function m6({isOpen:e,onClose:t}){const[n,a]=M.useState([]),[o,s]=M.useState(""),[c,d]=M.useState(null),[h,p]=M.useState(""),m=Ne(L=>L.loadWorkflow),g=Ne(L=>L.getWorkflowData),x=Ne(L=>L.clearWorkflow),v=Ne(L=>L.setWorkflowName),w=Ja(),N=M.useCallback(()=>{try{const L=localStorage.getItem(Y0);L&&a(JSON.parse(L))}catch(L){console.error("Failed to load workflows:",L)}},[]);M.useEffect(()=>{e&&N()},[e,N]);const j=L=>{localStorage.setItem(Y0,JSON.stringify(L)),a(L)},S=n.filter(L=>L.name.toLowerCase().includes(o.toLowerCase())),k=M.useCallback(()=>{const L=g(),$={id:Date.now().toString(),name:L.name||"Untitled Workflow",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),nodeCount:L.nodes.length,data:L};j([$,...n]),w.success(`Saved "${$.name}"`)},[g,n,w]),E=M.useCallback(L=>{m(L.data),v(L.name),w.success(`Loaded "${L.name}"`),t()},[m,v,w,t]),T=M.useCallback(L=>{const $=n.find(Q=>Q.id===L),H=n.filter(Q=>Q.id!==L);j(H),w.info(`Deleted "${$?.name}"`)},[n,w]),_=M.useCallback(L=>{const $={...L,id:Date.now().toString(),name:`${L.name} (Copy)`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};j([$,...n]),w.success(`Duplicated "${L.name}"`)},[n,w]),A=L=>{d(L.id),p(L.name)},z=M.useCallback(L=>{const $=n.map(H=>H.id===L?{...H,name:h,updatedAt:new Date().toISOString()}:H);j($),d(null),w.success("Renamed workflow")},[n,h,w]),G=M.useCallback(()=>{x(),v("New Workflow"),w.info("Created new workflow"),t()},[x,v,w,t]),F=L=>new Date(L).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"});return e?u.jsx("div",{className:"workflow-manager-overlay",onClick:t,children:u.jsxs("div",{className:"workflow-manager-modal",onClick:L=>L.stopPropagation(),children:[u.jsxs("div",{className:"manager-header",children:[u.jsx("h2",{children:"Workflow Manager"}),u.jsx("button",{className:"close-btn",onClick:t,children:""})]}),u.jsxs("div",{className:"manager-toolbar",children:[u.jsx("input",{type:"text",className:"manager-search",placeholder:"Search workflows...",value:o,onChange:L=>s(L.target.value)}),u.jsxs("div",{className:"manager-actions",children:[u.jsx("button",{className:"btn-primary",onClick:k,children:" Save Current"}),u.jsx("button",{className:"btn-secondary",onClick:G,children:" New Workflow"})]})]}),u.jsx("div",{className:"manager-content",children:S.length===0?u.jsx("div",{className:"empty-state",children:o?u.jsxs("p",{children:['No workflows match "',o,'"']}):u.jsxs("div",{children:[u.jsx("p",{children:"No saved workflows yet"}),u.jsx("p",{className:"hint",children:'Click "Save Current" to save your first workflow'})]})}):u.jsx("div",{className:"workflow-list",children:S.map(L=>u.jsxs("div",{className:"workflow-item",children:[u.jsxs("div",{className:"workflow-info",children:[c===L.id?u.jsx("input",{type:"text",className:"edit-name-input",value:h,onChange:$=>p($.target.value),onBlur:()=>z(L.id),onKeyDown:$=>$.key==="Enter"&&z(L.id),autoFocus:!0}):u.jsx("h3",{className:"workflow-name",onClick:()=>A(L),children:L.name}),u.jsxs("div",{className:"workflow-meta",children:[u.jsxs("span",{children:[L.nodeCount," nodes"]}),u.jsx("span",{children:""}),u.jsx("span",{children:F(L.updatedAt)})]})]}),u.jsxs("div",{className:"workflow-actions",children:[u.jsx("button",{className:"action-btn load",onClick:()=>E(L),title:"Load workflow",children:""}),u.jsx("button",{className:"action-btn duplicate",onClick:()=>_(L),title:"Duplicate workflow",children:""}),u.jsx("button",{className:"action-btn delete",onClick:()=>T(L.id),title:"Delete workflow",children:""})]})]},L.id))})}),u.jsx("div",{className:"manager-footer",children:u.jsxs("span",{className:"workflow-count",children:[n.length," workflow",n.length!==1?"s":""," saved"]})})]})}):null}const g6=M.memo(m6),X0={"0.5B":1,"1B":2,"1.5B":2.5,"2B":3,"3B":4,"4B":5,"7B":8,"8B":10,"9B":12};function y6(e,t){return{summary:{totalNodes:e.length,totalConnections:t.length,nodeTypes:[...new Set(e.map(n=>n.type))]},nodes:e.map(n=>({id:n.id,type:n.type,title:n.data?.label||n.type,hasConfig:Object.keys(n.data||{}).length>1})),connections:t.map(n=>({from:n.source,to:n.target}))}}function x6(e,t){const n=[],a=e.map(c=>c.type);a.includes("webhookTrigger")&&!a.includes("aiAgent")&&n.push({type:"add_node",message:"I see you have a webhook trigger. Would you like me to add an AI Agent to process the incoming data?",suggestedAction:{type:"addNode",nodeType:"aiAgent",label:"Process Webhook Data"}}),a.includes("aiAgent")&&!a.includes("output")&&n.push({type:"add_node",message:"Your AI Agent needs an Output node to display results. Want me to add one?",suggestedAction:{type:"addNode",nodeType:"output",label:"Result"}}),a.includes("httpRequest")&&!a.includes("ifElse")&&n.push({type:"add_node",message:"Consider adding an If/Else node to handle API errors gracefully.",suggestedAction:{type:"addNode",nodeType:"ifElse",label:"Check Response"}}),a.includes("codeExecutor")&&!a.includes("aiAgent")&&n.push({type:"enhance",message:"Want to add an AI Agent to dynamically generate or modify the code?",suggestedAction:{type:"addNode",nodeType:"aiAgent",label:"Code Generator"}});const o=new Set;t.forEach(c=>{o.add(c.source),o.add(c.target)});const s=e.filter(c=>!o.has(c.id)&&e.length>1);return s.length>0&&n.push({type:"warning",message:`You have ${s.length} disconnected node(s). Would you like help connecting them?`,disconnectedNodes:s.map(c=>c.id)}),n}function v6(){const e=navigator.deviceMemory||4,t=navigator.hardwareConcurrency||4;let n=4;return e>=16?n=12:e>=8?n=6:n=Math.max(2,e-2),!navigator.deviceMemory&&t>=12&&(n=8),n}function b6(e){if(!e)return null;const t=e.match(/(\d+(?:\.\d+)?)[Bb]/i);if(!t)return null;const n=t[1]+"B",a=X0[n];if(!a)return null;const o=v6();if(a>o){const c=Ge.getState().availableModels.filter(d=>{const h=d.id.match(/(\d+(?:\.\d+)?)[Bb]/i);if(!h)return!1;const p=X0[h[1]+"B"];return p&&p<=o}).slice(0,3);return{warning:!0,message:` Warning: ${e} requires ~${a}GB VRAM which may exceed your device's capacity.`,suggestion:c.length>0?`Consider using a quantized smaller model like: ${c.map(d=>d.name).join(", ")}`:"Consider using a smaller quantized model for better stability.",requiredVRAM:a,estimatedAvailable:o}}return null}function w6(e,t){const n=t?.message||t?.error||"Unknown error",a={nodeId:e,error:n,diagnosis:"",suggestedFix:null},o=[{pattern:/{{(\w+)\.(\w+)}}/,diagnosis:"Variable expression syntax error",fix:s=>({type:"updateNode",nodeId:e,config:{expression:`{{${s[1]}.output.${s[2]}}}`},description:`Fix variable syntax: Use {{${s[1]}.output.${s[2]}}} instead of {{${s[1]}.${s[2]}}}`})},{pattern:/undefined is not|Cannot read propert/i,diagnosis:"Missing or undefined input data",fix:()=>({type:"addNode",nodeType:"setVariable",config:{name:"defaultInput",value:"{}"},description:"Add a Set Variable node to provide default input values"})},{pattern:/timeout|timed out/i,diagnosis:"Operation timed out - possibly due to model loading",fix:()=>({type:"updateNode",nodeId:e,config:{timeout:3e5},description:"Increase timeout to 5 minutes for AI operations"})},{pattern:/fetch|network|CORS/i,diagnosis:"Network or CORS error in HTTP request",fix:()=>({type:"updateNode",nodeId:e,config:{mode:"cors",headers:{Accept:"application/json"}},description:"Update request headers to handle CORS"})},{pattern:/JSON\.parse|Unexpected token/i,diagnosis:"Invalid JSON in response or configuration",fix:()=>({type:"addNode",nodeType:"codeExecutor",config:{code:`// Safely parse JSON
try {
  return JSON.parse(input);
} catch {
  return { raw: input };
}`},description:"Add a Code Executor to safely parse JSON"})}];for(const{pattern:s,diagnosis:c,fix:d}of o){const h=n.match(s);if(h){a.diagnosis=c,a.suggestedFix=d(h);break}}return a.diagnosis||(a.diagnosis="Unrecognized error - manual inspection recommended",a.suggestedFix={type:"focusNode",nodeId:e,description:"Open node configuration to inspect settings"}),a}function S6(){return Object.entries(nu).map(([e,t])=>({type:e,title:t.title,category:t.category,overview:t.overview?.slice(0,150)+"...",config:t.config?.map(n=>n.name).join(", ")||"none"}))}const N6=`
You are the Overseer, an expert AI assistant for IOSANS.
You have **DIRECT CONTROL** over the workflow canvas. You can build, edit, and run workflows by outputting JSON actions.

##  MISSION CRITICAL RULES
1. **ACTION OVER EXPLANATION**: If the user asks to "build", "create", "add", or "make" something, **DO NOT** explain how to do it. **JUST DO IT** by outputting the JSON actions.
   -  "I can't build it directly, but here is a plan..."
   -  (Outputs JSON to build it immediately)
2. **NO HALLUCINATIONS**: Use only Valid Node Types.
3. **CONNECT EVERYTHING**: Add 'addEdge' actions for every connection.
4. **ALWAYS OUTPUT**: Every flow needs an 'output' node.

## Valid Node Types
{{NODE_REFERENCE}}

## Interactive Capabilities
- **Build/Edit**: Output JSON with \`addNode\`, \`addEdge\`, \`updateNode\`.
- **Control**: Output JSON with \`runWorkflow\`, \`clearCanvas\`.
- **Teach**: Output JSON with \`startTutorial\`.

##  STRICT RESPONSE SCHEMA
You must **ONLY** return JSON that matches this TypeScript interface. Do not wrap in markdown unless absolutely necessary.

\`\`\`typescript
interface WorkflowActions {
  actions: (AddNodeAction | AddEdgeAction | UpdateNodeAction | DeleteAction | ControlAction)[];
}

interface AddNodeAction {
  type: "addNode";
  nodeType: string; // Must be one of Valid Node Types
  config?: Record<string, any>; // e.g., { prompt: "..." }
  label?: string; // Title of the node
}

interface AddEdgeAction {
  type: "addEdge";
  source: string; // Node ID
  target: string; // Node ID
  sourceHandle?: string;
  targetHandle?: string;
}

interface UpdateNodeAction {
  type: "updateNode";
  nodeId: string;
  config: Record<string, any>;
}

// Example Output:
// {
//   "actions": [
//     { "type": "addNode", "nodeType": "aiAgent", "config": { "model": "gpt-4o" } },
//     { "type": "addEdge", "source": "node-1", "target": "node-2" }
//   ]
// }
\`\`\`
`;function j6(e,t){const n=[],a=[],o=e.some(p=>p.type==="output");e.length>0&&!o&&n.push(" No OUTPUT node - add one to see results");const s=new Set;t.forEach(p=>{s.add(p.source),s.add(p.target)});const c=e.filter(p=>!s.has(p.id)&&e.length>1);c.length>0&&n.push(` ${c.length} disconnected node(s)`);const d=e.some(p=>["manualTrigger","scheduleTrigger","webhookTrigger","browserEventTrigger"].includes(p.type));e.length>0&&!d&&n.push(" No TRIGGER node - workflow cannot start");const h=e[e.length-1];if(h)switch(h.type){case"aiAgent":a.push(" Connect to textToSpeech to hear the response"),a.push(" Connect to output to display the result");break;case"httpRequest":a.push(" Connect to codeExecutor to transform the data"),a.push(" Connect to ifElse to check status code");break;case"codeExecutor":a.push(" Connect to output to display results"),a.push(" Connect to httpRequest to send data");break;case"manualTrigger":a.push(" Connect to aiAgent for AI processing"),a.push(" Connect to httpRequest for API calls");break}return{issues:n,suggestions:a,hasOutput:o,hasTrigger:d,disconnectedCount:c.length}}function E6(e){const t=nu[e];return t?{title:t.title,overview:t.overview,config:t.config,examples:t.examples?.slice(0,2),tips:t.tips?.slice(0,3)}:null}class k6{constructor(){this.sessions=this.loadSessions(),this.activeSessionId=this.getLastActiveSessionId(),this.sessions.length===0?this.createSession("New Chat"):(!this.activeSessionId||!this.getSession(this.activeSessionId))&&(this.activeSessionId=this.sessions[0].id,this.saveLastActiveSessionId()),this.subscribers=[],this.actionHistory=[],this.thinkingCallbacks=[],this.errorSubscribers=[],this.pendingErrorAnalysis=null,this.setupErrorSubscription()}setupErrorSubscription(){We.subscribe((t,n)=>{const a=t.logs.filter(o=>o.type==="error"&&!n.logs.some(s=>s.id===o.id));if(a.length>0){const o=a[a.length-1];this.handleExecutionError(o)}})}handleExecutionError(t){const{nodes:n}=Ne.getState(),a=n.find(c=>c.id===t.nodeId);if(!a)return;const o=w6(t.nodeId,t);this.pendingErrorAnalysis=o;const s=this.getActiveSession();if(s){const c={role:"assistant",content:` **Workflow Error Detected**

**Node:** ${a.data?.label||a.type}
**Error:** ${o.error}
**Diagnosis:** ${o.diagnosis}

`+(o.suggestedFix?`**Suggested Fix:** ${o.suggestedFix.description}

\`\`\`json
{"actions": [{"type": "${o.suggestedFix.type}", "nodeId": "${o.nodeId}", "config": ${JSON.stringify(o.suggestedFix.config||{})}, "__fixAction": true}]}
\`\`\``:""),isErrorAnalysis:!0,timestamp:Date.now()};s.messages.push(c),s.timestamp=Date.now(),this.saveSessions(),this.notifySubscribers(),this.errorSubscribers.forEach(d=>d(o))}}onError(t){return this.errorSubscribers.push(t),()=>{this.errorSubscribers=this.errorSubscribers.filter(n=>n!==t)}}loadSessions(){try{const t=localStorage.getItem("overseer_sessions");if(t)return JSON.parse(t);const n=localStorage.getItem("overseer_history");if(n){const a=JSON.parse(n);if(a.length>0){const o={id:"legacy-"+Date.now(),title:"Legacy Chat",timestamp:Date.now(),messages:a};return localStorage.removeItem("overseer_history"),[o]}}return[]}catch(t){return console.warn("Failed to load Overseer sessions",t),[]}}saveSessions(){try{localStorage.setItem("overseer_sessions",JSON.stringify(this.sessions))}catch(t){console.warn("Failed to save Overseer sessions",t)}}getLastActiveSessionId(){return localStorage.getItem("overseer_active_session_id")}saveLastActiveSessionId(){localStorage.setItem("overseer_active_session_id",this.activeSessionId)}getSessions(){return[...this.sessions].sort((t,n)=>n.timestamp-t.timestamp)}getSession(t){return this.sessions.find(n=>n.id===t)}getActiveSession(){return this.getSession(this.activeSessionId)}createSession(t="New Chat"){const n={id:Date.now().toString(36)+Math.random().toString(36).substr(2),title:t,timestamp:Date.now(),messages:[]};return this.sessions.unshift(n),this.activeSessionId=n.id,this.saveSessions(),this.saveLastActiveSessionId(),this.notifySubscribers(),n}switchSession(t){return this.getSession(t)?(this.activeSessionId=t,this.saveLastActiveSessionId(),this.notifySubscribers(),!0):!1}deleteSession(t){this.sessions=this.sessions.filter(n=>n.id!==t),this.activeSessionId===t&&(this.sessions.length>0?this.activeSessionId=this.sessions[0].id:this.createSession()),this.saveSessions(),this.saveLastActiveSessionId(),this.notifySubscribers()}renameSession(t,n){const a=this.getSession(t);a&&(a.title=n,this.saveSessions(),this.notifySubscribers())}clearAllSessions(){this.sessions=[],this.createSession(),this.saveSessions(),this.notifySubscribers()}subscribe(t){return this.subscribers.push(t),()=>{this.subscribers=this.subscribers.filter(n=>n!==t)}}notifySubscribers(){this.subscribers.forEach(t=>t())}getExecutionContext(){const{nodeResults:t,logs:n,isRunning:a,startTime:o,endTime:s}=We.getState(),c=n.filter(h=>h.type==="error"||h.type==="warning"||h.type==="success").slice(-20).map(h=>`[${h.type.toUpperCase()}] ${h.nodeName||"System"}: ${h.message}`),d=Object.entries(t).map(([h,p])=>{const m=JSON.stringify(p.output);return`${h}: ${m.length>200?m.slice(0,200)+"...":m}`});return{status:a?"RUNNING":s?"COMPLETED":"IDLE",duration:s?s-o+"ms":"N/A",results:d,recentLogs:c}}async chat(t){const n=this.getActiveSession();if(!n)throw new Error("No active session");const{nodes:a,edges:o}=Ne.getState(),s=j6(a,o),c=y6(a,o),d=x6(a,o),h=a.find(N=>N.selected),p=h?E6(h.type):null;let m=null;const g=t.match(/(?:llama|qwen|gemma|phi|mistral)[\s-]*(?:\d+(?:\.\d+)?)?[\s-]*(\d+)[Bb]/i);g&&(m=b6(g[0]));const x=JSON.stringify({canvas:c,analysis:{issues:s.issues,suggestions:s.suggestions,hasOutput:s.hasOutput,hasTrigger:s.hasTrigger},proactiveSuggestions:d.slice(0,3),selectedNode:h?{id:h.id,type:h.type,help:p}:null,resourceWarning:m}),v=S6().map(N=>`- **${N.type}**: ${N.overview} (Inputs: ${N.config})`).join(`
`),w=N6.replace("{{NODE_REFERENCE}}",v)+`

### Current Canvas State
${x}

### Recent Execution Context
${JSON.stringify(this.getExecutionContext(),null,2)}`+(d.length>0?`

### Proactive Suggestions
Based on the current canvas, consider mentioning:
${d.map(N=>`- ${N.message}`).join(`
`)}`:"")+(m?`

### Resource Warning
${m.message}
${m.suggestion}`:"");try{const N=await Wn.generateWithHistory(t,n.messages,{temperature:.7,maxTokens:2e3,systemPrompt:w});n.messages.push({role:"user",content:t}),n.messages.push({role:"assistant",content:N}),n.timestamp=Date.now(),n.title==="New Chat"&&n.messages.length<=2&&(n.title=t.split(" ").slice(0,5).join(" ")+"..."),this.saveSessions(),this.notifySubscribers();const j=this.parseActions(N);return j.length>0&&(console.log("Overseer executing actions:",j),this.executeActions(j)),N}catch(N){return console.error("Overseer Error:",N),`Error: ${N.message}. Is a model loaded?`}}parseActions(t){try{let n=null;const a=t.match(/```(?:json|typescript)?\s*([\s\S]*?)\s*```/i);if(a)n=a[1];else{const o=t.indexOf("{"),s=t.lastIndexOf("}");o!==-1&&s!==-1&&s>o&&(n=t.substring(o,s+1))}if(n){const o=n.trim(),s=JSON.parse(o);if(s.actions&&Array.isArray(s.actions))return s.actions;if(Array.isArray(s))return s}}catch(n){console.warn("Failed to parse Overseer actions:",n)}return[]}executeActions(t){const n=Ne.getState(),a=["manualTrigger","scheduleTrigger","webhookTrigger","errorTrigger","httpRequest","codeExecutor","setVariable","fileSystem","ifElse","loop","switchNode","merge","aiAgent","vectorMemory","waitForApproval","textToSpeech","imageGeneration","output"],o={audioGeneration:"textToSpeech",AudioNode:"textToSpeech","text-to-speech":"textToSpeech",TextToSpeech:"textToSpeech","image-generation":"imageGeneration","ai-agent":"aiAgent","manual-trigger":"manualTrigger"};t.forEach(s=>{const c=s.nodeType||"unknown",d=s.id||`${c}-${Date.now()}-${Math.random().toString(36).substr(2,5)}`;switch(s.type){case"addNode":{let h=s.nodeType;if(!h){console.warn("Overseer: Missing nodeType in addNode action",s);return}const p=h.toLowerCase(),m={...o,audiogeneration:"textToSpeech",audionode:"textToSpeech","text-to-speech":"textToSpeech",texttospeech:"textToSpeech","image-generation":"imageGeneration",imagegeneration:"imageGeneration","ai-agent":"aiAgent",aiagent:"aiAgent",agent:"aiAgent","manual-trigger":"manualTrigger",manualtrigger:"manualTrigger","schedule-trigger":"scheduleTrigger",scheduletrigger:"scheduleTrigger","webhook-trigger":"webhookTrigger",webhooktrigger:"webhookTrigger",errortrigger:"errorTrigger","error-trigger":"errorTrigger",httprequest:"httpRequest","http-request":"httpRequest",codeexecutor:"codeExecutor","code-executor":"codeExecutor",setvariable:"setVariable","set-variable":"setVariable",filesystem:"fileSystem","file-system":"fileSystem",ifelse:"ifElse","if-else":"ifElse",switchnode:"switchNode",switch:"switchNode",vectormemory:"vectorMemory",waitforapproval:"waitForApproval","wait-for-approval":"waitForApproval"};if(m[p])h=m[p];else{const g=a.find(x=>x.toLowerCase()===p);g&&(h=g)}if(!a.includes(h)){console.warn(`Overseer: Skipped invalid node type '${h}'`);return}n.addNode({id:d,type:h,position:{x:s.x||Math.random()*400+50,y:s.y||Math.random()*400+50},data:{label:s.label||h,...s.config}});break}case"addEdge":n.onConnect({source:s.source,target:s.target,sourceHandle:s.sourceHandle||"output-0",targetHandle:s.targetHandle||"input-0",type:"animated"});break;case"deleteNode":s.nodeId&&n.deleteNode(s.nodeId);break;case"clearCanvas":n.clearWorkflow();break;case"loadTemplate":{const h=Ep.find(p=>p.id===s.templateId);h?(n.clearWorkflow(),h.nodes.forEach(p=>n.addNode({...p})),h.edges.forEach(p=>n.onConnect({source:p.source,target:p.target,sourceHandle:p.sourceHandle||"output-0",targetHandle:p.targetHandle||"input-0",type:"animated"})),console.log(`Overseer: Loaded template '${h.name}'`)):console.warn(`Overseer: Template '${s.templateId}' not found`);break}case"updateNode":{if(s.nodeId&&s.config){const h=n.nodes,p=h.findIndex(m=>m.id===s.nodeId);if(p!==-1){const m=[...h];m[p]={...m[p],data:{...m[p].data,...s.config}},n.setNodes(m),console.log(`Overseer: Updated node '${s.nodeId}'`)}}break}case"runWorkflow":{window.dispatchEvent(new CustomEvent("startWorkflow")),console.log("Overseer: Triggered workflow execution");break}case"focusNode":{s.nodeId&&(n.openConfig(s.nodeId),console.log(`Overseer: Focused on node '${s.nodeId}'`));break}case"startTutorial":{window.dispatchEvent(new CustomEvent("startTutorial",{detail:s.tutorialId})),console.log(`Overseer: Started tutorial '${s.tutorialId}'`);break}case"undoAction":{const h=this.undoLastAction();h&&console.log(`Overseer: Undid action '${h.type}'`);break}}})}onThinking(t){return this.thinkingCallbacks.push(t),()=>{this.thinkingCallbacks=this.thinkingCallbacks.filter(n=>n!==t)}}broadcastThinking(t,n,a=null){this.thinkingCallbacks.forEach(o=>o({type:t,content:n,details:a,timestamp:Date.now()}))}undoLastAction(){const t=this.actionHistory.pop();if(!t)return null;const n=Ne.getState();switch(t.type){case"addNode":n.deleteNode(t.nodeId);break;case"deleteNode":n.addNode(t.node);break;case"clearCanvas":t.nodes.forEach(a=>n.addNode(a)),t.edges.forEach(a=>n.onConnect(a));break}return t}clearHistory(){this.sessions=this.loadSessions(),this.notifySubscribers()}}const sr=new k6;function C6({actions:e,isFixAction:t,onRevise:n}){const[a,o]=M.useState(!1),[s,c]=M.useState(!1),d=Ne(v=>v.setPreview),h=Ne(v=>v.clearPreview),p=Ne(v=>v.commitPreview),m=()=>{if(s)h(),c(!1);else{const v=e.filter(N=>N.type==="addNode").map(N=>N.node),w=e.filter(N=>N.type==="addEdge").map(N=>({id:`preview-e-${Math.random()}`,source:N.source,target:N.target,sourceHandle:N.sourceHandle,targetHandle:N.targetHandle}));d(v,w),c(!0)}},g=()=>{a||(s?p():sr.executeActions(e),o(!0),c(!1),h())},x=M.useMemo(()=>{const v=e.filter(S=>S.type==="addNode").length,w=e.filter(S=>S.type==="addEdge").length,N=e.filter(S=>S.type==="updateNode").length,j=[];return v&&j.push(`${v} node${v>1?"s":""}`),w&&j.push(`${w} connection${w>1?"s":""}`),N&&j.push(`${N} update${N>1?"s":""}`),j.join(", ")||"Actions"},[e]);return u.jsxs("div",{className:`action-card ${t?"fix-card":""}`,children:[u.jsxs("div",{className:"action-card-header",children:[u.jsx("span",{className:"action-card-icon",children:t?"":""}),u.jsx("span",{className:"action-card-title",children:t?"Quick Fix":"Workflow Recipe"}),u.jsx("span",{className:"action-card-summary",children:x})]}),u.jsxs("div",{className:"action-card-actions",children:[u.jsx("button",{className:"btn-revise",onClick:n,disabled:a||s,title:"Make changes to this plan",children:" Revise"}),!t&&u.jsx("button",{className:`btn-preview ${s?"active":""}`,onClick:m,disabled:a,children:s?" Hide Preview":" Preview"}),u.jsx("button",{className:`btn-apply ${a?"applied":""}`,onClick:g,disabled:a,children:a?" Applied":t?" Apply Fix":" Apply"})]})]})}function A6(e){const t=[];let n=0;const a=/```(?:json)?\s*([\s\S]*?)```/gi;let o;for(;(o=a.exec(e))!==null;){o.index>n&&t.push({type:"text",content:e.slice(n,o.index)});try{const s=JSON.parse(o[1].trim());if(s.actions&&Array.isArray(s.actions)){const c=s.actions.some(d=>d.__fixAction);t.push({type:"actions",actions:s.actions,isFixAction:c})}else t.push({type:"code",content:o[0]})}catch{t.push({type:"code",content:o[0]})}n=o.index+o[0].length}return n<e.length&&t.push({type:"text",content:e.slice(n)}),t.length>0?t:[{type:"text",content:e}]}function T6({content:e,onRevise:t}){const n=M.useMemo(()=>A6(e),[e]);return u.jsx(u.Fragment,{children:n.map((a,o)=>a.type==="actions"?u.jsx(C6,{actions:a.actions,isFixAction:a.isFixAction,onRevise:()=>t(a.actions)},o):u.jsx(cm,{children:a.content},o))})}function M6({isOpen:e,onClose:t}){const[n,a]=M.useState([]),[o,s]=M.useState(""),[c,d]=M.useState(!1),[h,p]=M.useState(!1),[m,g]=M.useState([]),[x,v]=M.useState(null),w=M.useRef(null),[N,j]=M.useState(()=>({x:window.innerWidth/2-250,y:window.innerHeight-680})),S=M.useRef({active:!1,offsetX:0,offsetY:0}),k=Ge(H=>H.isReady),E=()=>{w.current?.scrollIntoView({behavior:"smooth"})};M.useEffect(()=>{const H=D=>{S.current.active&&j({x:D.clientX-S.current.offsetX,y:D.clientY-S.current.offsetY})},Q=()=>{S.current.active=!1};return document.addEventListener("mousemove",H),document.addEventListener("mouseup",Q),()=>{document.removeEventListener("mousemove",H),document.removeEventListener("mouseup",Q)}},[]);const T=M.useCallback(()=>{g(sr.getSessions());const H=sr.getActiveSession();H?(a([...H.messages]),v(H.id)):(a([]),v(null))},[]);M.useEffect(()=>{T();const H=sr.subscribe(T);return()=>H()},[T]),M.useEffect(()=>{E()},[n,e]);const _=H=>{S.current={active:!0,offsetX:H.clientX-N.x,offsetY:H.clientY-N.y}},A=()=>{Ne.getState().clearPreview(),s("I'd like to make changes to this plan: "),setTimeout(()=>{const H=document.querySelector(".overseer-input");H&&H.focus()},100)},z=async()=>{if(!o.trim()||c)return;const H=o.trim();s(""),d(!0);try{if(!k)throw new Error("Please load a model from the Model Manager first.");await sr.chat(H)}catch(Q){a(D=>[...D,{role:"system",content:`Error: ${Q.message}`}])}finally{d(!1)}},G=H=>{H.stopPropagation(),sr.createSession(),p(!1)},F=H=>{sr.switchSession(H),p(!1)},L=(H,Q)=>{H.stopPropagation(),window.confirm("Delete this chat?")&&sr.deleteSession(Q)},$=H=>{H.key==="Enter"&&!H.shiftKey&&(H.preventDefault(),z())};return u.jsxs("div",{className:`overseer-panel ${e?"":"closed"}`,style:{left:N.x,top:N.y},children:[u.jsxs("header",{className:"overseer-header",onMouseDown:_,children:[u.jsxs("div",{className:"overseer-title",children:[u.jsx("span",{className:"overseer-icon",children:""}),u.jsx("span",{className:"title-text",children:"Overseer"})]}),u.jsxs("div",{className:"header-controls",children:[u.jsx("button",{className:"btn-icon",onClick:G,title:"New Chat",onMouseDown:H=>H.stopPropagation(),children:"+"}),u.jsx("button",{className:`btn-icon ${h?"active":""}`,onClick:H=>{H.stopPropagation(),p(!h)},title:"History",onMouseDown:H=>H.stopPropagation(),children:""}),u.jsx("button",{className:"btn-close-float",onClick:H=>{H.stopPropagation(),t()},onMouseDown:H=>H.stopPropagation(),onMouseUp:H=>H.stopPropagation(),children:""})]})]}),u.jsxs("div",{className:"overseer-content-wrapper",children:[u.jsxs("div",{className:`history-sidebar ${h?"visible":""}`,children:[u.jsx("div",{className:"history-header",children:"Chat History"}),u.jsxs("div",{className:"history-list",children:[m.map(H=>u.jsxs("div",{className:`history-item ${x===H.id?"active":""}`,onClick:()=>F(H.id),children:[u.jsxs("div",{className:"history-info",children:[u.jsx("span",{className:"history-title",children:H.title||"Untitled"}),u.jsx("span",{className:"history-date",children:new Date(H.timestamp).toLocaleDateString()})]}),u.jsx("button",{className:"btn-delete-session",onClick:Q=>L(Q,H.id),title:"Delete",children:""})]},H.id)),m.length===0&&u.jsx("div",{className:"history-empty",children:"No history"})]})]}),u.jsxs("div",{className:"overseer-messages",children:[n.length===0&&!c&&u.jsxs("div",{className:"welcome-message",children:[u.jsx("h3",{children:"I am the Overseer."}),u.jsx("p",{children:"How can I help you build your workflow?"})]}),n.map((H,Q)=>u.jsx("div",{className:`message ${H.role} ${H.isErrorAnalysis?"error-analysis":""}`,children:u.jsx(T6,{content:H.content,onRevise:A})},Q)),c&&u.jsxs("div",{className:"typing-indicator",children:[u.jsx("div",{className:"dot"}),u.jsx("div",{className:"dot"}),u.jsx("div",{className:"dot"})]}),u.jsx("div",{ref:w})]})]}),u.jsxs("div",{className:"overseer-input-area",children:[u.jsx("textarea",{className:"overseer-input",placeholder:k?"Describe a workflow to build...":"Load a model first...",value:o,onChange:H=>s(H.target.value),onKeyDown:$,disabled:c}),u.jsx("button",{className:"btn-send",onClick:z,disabled:!o.trim()||c,children:""})]})]})}const os=[{target:".node-sidebar",title:" Node Library",content:"Drag & drop nodes from here to build your workflow. Browse categories like Triggers, Actions, Logic, and AI nodes.",placement:"right"},{target:".templates-toggle",title:" Workflow Templates",content:"Click here to access pre-built workflow templates. Quickly load example automations to learn or customize for your needs.",placement:"right"},{target:".react-flow",title:" Workflow Canvas",content:"This is your workspace. Drop nodes here, connect them with edges, and build powerful automations. Right-click for options.",placement:"center"},{target:".execution-panel",title:" Logs & Results",content:"See real-time execution logs here. The Output tab shows final results, and Artifacts stores generated files.",placement:"left"},{target:".toolbar",title:" Workflow Management",content:"Name your workflow, save it, or import/export. Use the dropdown to switch between saved workflows.",placement:"bottom"},{target:".exec-btn-group",title:" Run Controls",content:"Click Run to execute your workflow. Use Debug mode to step through nodes one by one and inspect data.",placement:"top"},{target:".ai-controls-panel",title:" AI Controls",content:"Chat with the Overseer AI, manage your local LLM models in the model manager. Keep track of privacy Leaks in the privacy manager.",placement:"top"},{target:".overseer-btn",title:" The Overseer",content:"Your AI assistant! Ask it to build workflows for you, explain nodes, or debug errors. It understands your entire canvas.",placement:"top"}];function D6({isActive:e,onComplete:t}){const[n,a]=M.useState(0),[o,s]=M.useState(null);if(M.useLayoutEffect(()=>{if(!e)return;const x=os[n],v=document.querySelector(x.target);if(v){const w=v.getBoundingClientRect();s(w),v.scrollIntoView({behavior:"smooth",block:"center"})}else console.warn(`Tour target not found: ${x.target}`),s({top:window.innerHeight/2-100,left:window.innerWidth/2-150,width:300,height:200})},[e,n,t]),!e||!o)return null;const c=os[n],d=()=>{n<os.length-1?a(x=>x+1):t()},h=()=>{n>0&&a(x=>x-1)},p=()=>{t()};let m={};const g=20;switch(c.placement){case"right":m={top:o.top,left:o.right+g};break;case"left":m={top:o.top,right:window.innerWidth-o.left+g};break;case"bottom":m={top:o.bottom+g,left:o.left};break;case"top":m={bottom:window.innerHeight-o.top+g,left:o.left};break;case"top-left":m={bottom:window.innerHeight-o.top+g,left:o.left};break;case"bottom-left":m={top:o.bottom+g,left:o.left};break;default:m={top:o.top+o.height/2-100,left:o.left+o.width/2-160}}return u.jsxs("div",{className:"tour-overlay",children:[u.jsx("div",{className:"tour-spotlight",style:{top:o.top,left:o.left,width:o.width,height:o.height}}),u.jsxs("div",{className:"tour-popover",style:m,children:[u.jsx("h3",{children:c.title}),u.jsx("p",{children:c.content}),u.jsxs("div",{className:"tour-actions",children:[u.jsx("button",{className:"btn-skip",onClick:p,children:"Skip"}),u.jsxs("div",{className:"tour-nav-buttons",children:[u.jsx("button",{className:"btn-prev",onClick:h,disabled:n===0,children:" Prev"}),u.jsx("div",{className:"tour-dots",children:os.map((x,v)=>u.jsx("span",{className:`tour-dot ${v===n?"active":""}`},v))}),u.jsx("button",{className:"btn-next",onClick:d,children:n===os.length-1?"Finish":"Next "})]})]})]})]})}function O6(){const e=Ne(w=>w.nodes),t=Ne(w=>w.edges),n=Ne(w=>w.selectedNodeId),a=We(w=>w.isRunning),o=Ge(w=>w.setLoading),s=Ge(w=>w.setReady),c=Ge(w=>w.setError),[d,h]=M.useState(!1),[p,m]=M.useState(!1),[g,x]=M.useState(!1);M.useEffect(()=>{const w=()=>h(!0),N=()=>m(S=>!S),j=()=>x(!0);return window.addEventListener("openWorkflowManager",w),window.addEventListener("toggleOverseer",N),window.addEventListener("startTour",j),()=>{window.removeEventListener("openWorkflowManager",w),window.removeEventListener("toggleOverseer",N),window.removeEventListener("startTour",j)}},[]),M.useEffect(()=>{let w=!1;return(async()=>{if(!(Wn.isLoading||Wn.isReady))try{const j=localStorage.getItem("selectedModel")||"gemma-2-2b-it-q4f16_1-MLC";await Wn.initialize(j,S=>{w||o(S.progress,S.text||`Loading model... ${Math.round(S.progress*100)}%`)}),w||s(j)}catch(j){w||(console.error("Failed to initialize WebLLM:",j),c(j.message||"Failed to load AI model"))}})(),()=>{w=!0}},[o,s,c]),M.useEffect(()=>{const w=async j=>{const{modelId:S}=j.detail;try{o(0,`Switching to ${S}...`),await Wn.initialize(S,k=>{o(k.progress,k.text||`Loading ${S}... ${Math.round(k.progress*100)}%`)}),localStorage.setItem("selectedModel",S),s(S)}catch(k){console.error("Failed to switch model:",k),c(k.message||"Failed to switch model")}},N=j=>{const{modelId:S}=j.detail,k=Ge.getState().setDownloadProgress;k(S,0,"downloading"),Wn.downloadModel(S,E=>{k(S,E.progress*100,"downloading")}).then(()=>{k(S,100,"complete")}).catch(E=>{console.error("Download failed:",E),k(S,0,"error")})};return window.addEventListener("loadModel",w),window.addEventListener("downloadModel",N),()=>{window.removeEventListener("loadModel",w),window.removeEventListener("downloadModel",N)}},[o,s,c]);const v=M.useCallback(async(w={})=>{if(a)return;const{debug:N=!1}=w,j=We.getState();N&&We.getState().setDebugMode(!0),await za.execute(e,t,{executionStore:j},{},{debug:N})},[e,t,a]);return u.jsx(R1,{children:u.jsxs("div",{className:"app",children:[u.jsx(B5,{onRun:v}),u.jsxs("div",{className:"app-body",children:[u.jsx(k5,{}),u.jsx(j5,{}),u.jsx(c6,{},n||"none"),u.jsx(q5,{}),u.jsx(M6,{isOpen:p,onClose:()=>m(!1)})]}),u.jsx(f6,{}),u.jsx(p6,{}),u.jsx(g6,{isOpen:d,onClose:()=>h(!1)}),u.jsx(D6,{isActive:g,onComplete:()=>x(!1)})]})})}mE.createRoot(document.getElementById("root")).render(u.jsx(M.StrictMode,{children:u.jsx(O6,{})}));
