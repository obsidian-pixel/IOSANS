(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function i(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(a){if(a.ep)return;a.ep=!0;const l=i(a);fetch(a.href,l)}})();function Wc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Mf={exports:{}},Ga={};var mx;function JN(){if(mx)return Ga;mx=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(o,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var f in a)f!=="key"&&(l[f]=a[f])}else l=a;return a=l.ref,{$$typeof:e,type:o,key:c,ref:a!==void 0?a:null,props:l}}return Ga.Fragment=t,Ga.jsx=i,Ga.jsxs=i,Ga}var gx;function KN(){return gx||(gx=1,Mf.exports=JN()),Mf.exports}var u=KN(),Df={exports:{}},ke={};var yx;function eE(){if(yx)return ke;yx=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),v=Symbol.iterator;function b(B){return B===null||typeof B!="object"?null:(B=v&&B[v]||B["@@iterator"],typeof B=="function"?B:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,j={};function N(B,F,I){this.props=B,this.context=F,this.refs=j,this.updater=I||w}N.prototype.isReactComponent={},N.prototype.setState=function(B,F){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,F,"setState")},N.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function k(){}k.prototype=N.prototype;function C(B,F,I){this.props=B,this.context=F,this.refs=j,this.updater=I||w}var _=C.prototype=new k;_.constructor=C,S(_,N.prototype),_.isPureReactComponent=!0;var H=Array.isArray;function A(){}var $={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function G(B,F,I){var ie=I.ref;return{$$typeof:e,type:B,key:F,ref:ie!==void 0?ie:null,props:I}}function z(B,F){return G(B.type,F,B.props)}function L(B){return typeof B=="object"&&B!==null&&B.$$typeof===e}function U(B){var F={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(I){return F[I]})}var Z=/\/+/g;function M(B,F){return typeof B=="object"&&B!==null&&B.key!=null?U(""+B.key):F.toString(36)}function P(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(A,A):(B.status="pending",B.then(function(F){B.status==="pending"&&(B.status="fulfilled",B.value=F)},function(F){B.status==="pending"&&(B.status="rejected",B.reason=F)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function O(B,F,I,ie,te){var re=typeof B;(re==="undefined"||re==="boolean")&&(B=null);var de=!1;if(B===null)de=!0;else switch(re){case"bigint":case"string":case"number":de=!0;break;case"object":switch(B.$$typeof){case e:case t:de=!0;break;case m:return de=B._init,O(de(B._payload),F,I,ie,te)}}if(de)return te=te(B),de=ie===""?"."+M(B,0):ie,H(te)?(I="",de!=null&&(I=de.replace(Z,"$&/")+"/"),O(te,F,I,"",function(xe){return xe})):te!=null&&(L(te)&&(te=z(te,I+(te.key==null||B&&B.key===te.key?"":(""+te.key).replace(Z,"$&/")+"/")+de)),F.push(te)),1;de=0;var ae=ie===""?".":ie+":";if(H(B))for(var fe=0;fe<B.length;fe++)ie=B[fe],re=ae+M(ie,fe),de+=O(ie,F,I,re,te);else if(fe=b(B),typeof fe=="function")for(B=fe.call(B),fe=0;!(ie=B.next()).done;)ie=ie.value,re=ae+M(ie,fe++),de+=O(ie,F,I,re,te);else if(re==="object"){if(typeof B.then=="function")return O(P(B),F,I,ie,te);throw F=String(B),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return de}function q(B,F,I){if(B==null)return B;var ie=[],te=0;return O(B,ie,"","",function(re){return F.call(I,re,te++)}),ie}function Y(B){if(B._status===-1){var F=B._result;F=F(),F.then(function(I){(B._status===0||B._status===-1)&&(B._status=1,B._result=I)},function(I){(B._status===0||B._status===-1)&&(B._status=2,B._result=I)}),B._status===-1&&(B._status=0,B._result=F)}if(B._status===1)return B._result.default;throw B._result}var Q=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},D={map:q,forEach:function(B,F,I){q(B,function(){F.apply(this,arguments)},I)},count:function(B){var F=0;return q(B,function(){F++}),F},toArray:function(B){return q(B,function(F){return F})||[]},only:function(B){if(!L(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return ke.Activity=g,ke.Children=D,ke.Component=N,ke.Fragment=i,ke.Profiler=a,ke.PureComponent=C,ke.StrictMode=o,ke.Suspense=h,ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$,ke.__COMPILER_RUNTIME={__proto__:null,c:function(B){return $.H.useMemoCache(B)}},ke.cache=function(B){return function(){return B.apply(null,arguments)}},ke.cacheSignal=function(){return null},ke.cloneElement=function(B,F,I){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var ie=S({},B.props),te=B.key;if(F!=null)for(re in F.key!==void 0&&(te=""+F.key),F)!V.call(F,re)||re==="key"||re==="__self"||re==="__source"||re==="ref"&&F.ref===void 0||(ie[re]=F[re]);var re=arguments.length-2;if(re===1)ie.children=I;else if(1<re){for(var de=Array(re),ae=0;ae<re;ae++)de[ae]=arguments[ae+2];ie.children=de}return G(B.type,te,ie)},ke.createContext=function(B){return B={$$typeof:c,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:l,_context:B},B},ke.createElement=function(B,F,I){var ie,te={},re=null;if(F!=null)for(ie in F.key!==void 0&&(re=""+F.key),F)V.call(F,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(te[ie]=F[ie]);var de=arguments.length-2;if(de===1)te.children=I;else if(1<de){for(var ae=Array(de),fe=0;fe<de;fe++)ae[fe]=arguments[fe+2];te.children=ae}if(B&&B.defaultProps)for(ie in de=B.defaultProps,de)te[ie]===void 0&&(te[ie]=de[ie]);return G(B,re,te)},ke.createRef=function(){return{current:null}},ke.forwardRef=function(B){return{$$typeof:f,render:B}},ke.isValidElement=L,ke.lazy=function(B){return{$$typeof:m,_payload:{_status:-1,_result:B},_init:Y}},ke.memo=function(B,F){return{$$typeof:p,type:B,compare:F===void 0?null:F}},ke.startTransition=function(B){var F=$.T,I={};$.T=I;try{var ie=B(),te=$.S;te!==null&&te(I,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(A,Q)}catch(re){Q(re)}finally{F!==null&&I.types!==null&&(F.types=I.types),$.T=F}},ke.unstable_useCacheRefresh=function(){return $.H.useCacheRefresh()},ke.use=function(B){return $.H.use(B)},ke.useActionState=function(B,F,I){return $.H.useActionState(B,F,I)},ke.useCallback=function(B,F){return $.H.useCallback(B,F)},ke.useContext=function(B){return $.H.useContext(B)},ke.useDebugValue=function(){},ke.useDeferredValue=function(B,F){return $.H.useDeferredValue(B,F)},ke.useEffect=function(B,F){return $.H.useEffect(B,F)},ke.useEffectEvent=function(B){return $.H.useEffectEvent(B)},ke.useId=function(){return $.H.useId()},ke.useImperativeHandle=function(B,F,I){return $.H.useImperativeHandle(B,F,I)},ke.useInsertionEffect=function(B,F){return $.H.useInsertionEffect(B,F)},ke.useLayoutEffect=function(B,F){return $.H.useLayoutEffect(B,F)},ke.useMemo=function(B,F){return $.H.useMemo(B,F)},ke.useOptimistic=function(B,F){return $.H.useOptimistic(B,F)},ke.useReducer=function(B,F,I){return $.H.useReducer(B,F,I)},ke.useRef=function(B){return $.H.useRef(B)},ke.useState=function(B){return $.H.useState(B)},ke.useSyncExternalStore=function(B,F,I){return $.H.useSyncExternalStore(B,F,I)},ke.useTransition=function(){return $.H.useTransition()},ke.version="19.2.3",ke}var xx;function Cs(){return xx||(xx=1,Df.exports=eE()),Df.exports}var T=Cs();const Nn=Wc(T);var _f={exports:{}},Ya={},Of={exports:{}},Rf={};var vx;function tE(){return vx||(vx=1,(function(e){function t(O,q){var Y=O.length;O.push(q);e:for(;0<Y;){var Q=Y-1>>>1,D=O[Q];if(0<a(D,q))O[Q]=q,O[Y]=D,Y=Q;else break e}}function i(O){return O.length===0?null:O[0]}function o(O){if(O.length===0)return null;var q=O[0],Y=O.pop();if(Y!==q){O[0]=Y;e:for(var Q=0,D=O.length,B=D>>>1;Q<B;){var F=2*(Q+1)-1,I=O[F],ie=F+1,te=O[ie];if(0>a(I,Y))ie<D&&0>a(te,I)?(O[Q]=te,O[ie]=Y,Q=ie):(O[Q]=I,O[F]=Y,Q=F);else if(ie<D&&0>a(te,Y))O[Q]=te,O[ie]=Y,Q=ie;else break e}}return q}function a(O,q){var Y=O.sortIndex-q.sortIndex;return Y!==0?Y:O.id-q.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();e.unstable_now=function(){return c.now()-f}}var h=[],p=[],m=1,g=null,v=3,b=!1,w=!1,S=!1,j=!1,N=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function _(O){for(var q=i(p);q!==null;){if(q.callback===null)o(p);else if(q.startTime<=O)o(p),q.sortIndex=q.expirationTime,t(h,q);else break;q=i(p)}}function H(O){if(S=!1,_(O),!w)if(i(h)!==null)w=!0,A||(A=!0,U());else{var q=i(p);q!==null&&P(H,q.startTime-O)}}var A=!1,$=-1,V=5,G=-1;function z(){return j?!0:!(e.unstable_now()-G<V)}function L(){if(j=!1,A){var O=e.unstable_now();G=O;var q=!0;try{e:{w=!1,S&&(S=!1,k($),$=-1),b=!0;var Y=v;try{t:{for(_(O),g=i(h);g!==null&&!(g.expirationTime>O&&z());){var Q=g.callback;if(typeof Q=="function"){g.callback=null,v=g.priorityLevel;var D=Q(g.expirationTime<=O);if(O=e.unstable_now(),typeof D=="function"){g.callback=D,_(O),q=!0;break t}g===i(h)&&o(h),_(O)}else o(h);g=i(h)}if(g!==null)q=!0;else{var B=i(p);B!==null&&P(H,B.startTime-O),q=!1}}break e}finally{g=null,v=Y,b=!1}q=void 0}}finally{q?U():A=!1}}}var U;if(typeof C=="function")U=function(){C(L)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,M=Z.port2;Z.port1.onmessage=L,U=function(){M.postMessage(null)}}else U=function(){N(L,0)};function P(O,q){$=N(function(){O(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_next=function(O){switch(v){case 1:case 2:case 3:var q=3;break;default:q=v}var Y=v;v=q;try{return O()}finally{v=Y}},e.unstable_requestPaint=function(){j=!0},e.unstable_runWithPriority=function(O,q){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var Y=v;v=O;try{return q()}finally{v=Y}},e.unstable_scheduleCallback=function(O,q,Y){var Q=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?Q+Y:Q):Y=Q,O){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=Y+D,O={id:m++,callback:q,priorityLevel:O,startTime:Y,expirationTime:D,sortIndex:-1},Y>Q?(O.sortIndex=Y,t(p,O),i(h)===null&&O===i(p)&&(S?(k($),$=-1):S=!0,P(H,Y-Q))):(O.sortIndex=D,t(h,O),w||b||(w=!0,A||(A=!0,U()))),O},e.unstable_shouldYield=z,e.unstable_wrapCallback=function(O){var q=v;return function(){var Y=v;v=q;try{return O.apply(this,arguments)}finally{v=Y}}}})(Rf)),Rf}var bx;function nE(){return bx||(bx=1,Of.exports=tE()),Of.exports}var If={exports:{}},It={};var wx;function iE(){if(wx)return It;wx=1;var e=Cs();function t(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)p+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(h,p,m){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:g==null?null:""+g,children:h,containerInfo:p,implementation:m}}var c=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(h,p){if(h==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return It.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,It.createPortal=function(h,p){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return l(h,p,null,m)},It.flushSync=function(h){var p=c.T,m=o.p;try{if(c.T=null,o.p=2,h)return h()}finally{c.T=p,o.p=m,o.d.f()}},It.preconnect=function(h,p){typeof h=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,o.d.C(h,p))},It.prefetchDNS=function(h){typeof h=="string"&&o.d.D(h)},It.preinit=function(h,p){if(typeof h=="string"&&p&&typeof p.as=="string"){var m=p.as,g=f(m,p.crossOrigin),v=typeof p.integrity=="string"?p.integrity:void 0,b=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;m==="style"?o.d.S(h,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:g,integrity:v,fetchPriority:b}):m==="script"&&o.d.X(h,{crossOrigin:g,integrity:v,fetchPriority:b,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},It.preinitModule=function(h,p){if(typeof h=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var m=f(p.as,p.crossOrigin);o.d.M(h,{crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&o.d.M(h)},It.preload=function(h,p){if(typeof h=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var m=p.as,g=f(m,p.crossOrigin);o.d.L(h,m,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},It.preloadModule=function(h,p){if(typeof h=="string")if(p){var m=f(p.as,p.crossOrigin);o.d.m(h,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else o.d.m(h)},It.requestFormReset=function(h){o.d.r(h)},It.unstable_batchedUpdates=function(h,p){return h(p)},It.useFormState=function(h,p,m){return c.H.useFormState(h,p,m)},It.useFormStatus=function(){return c.H.useHostTransitionStatus()},It.version="19.2.3",It}var Sx;function qb(){if(Sx)return If.exports;Sx=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),If.exports=iE(),If.exports}var Nx;function rE(){if(Nx)return Ya;Nx=1;var e=nE(),t=Cs(),i=qb();function o(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)r+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var r=n,s=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(s=r.return),n=r.return;while(n)}return r.tag===3?s:null}function c(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function f(n){if(n.tag===31){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function h(n){if(l(n)!==n)throw Error(o(188))}function p(n){var r=n.alternate;if(!r){if(r=l(n),r===null)throw Error(o(188));return r!==n?null:n}for(var s=n,d=r;;){var y=s.return;if(y===null)break;var x=y.alternate;if(x===null){if(d=y.return,d!==null){s=d;continue}break}if(y.child===x.child){for(x=y.child;x;){if(x===s)return h(y),n;if(x===d)return h(y),r;x=x.sibling}throw Error(o(188))}if(s.return!==d.return)s=y,d=x;else{for(var E=!1,R=y.child;R;){if(R===s){E=!0,s=y,d=x;break}if(R===d){E=!0,d=y,s=x;break}R=R.sibling}if(!E){for(R=x.child;R;){if(R===s){E=!0,s=x,d=y;break}if(R===d){E=!0,d=x,s=y;break}R=R.sibling}if(!E)throw Error(o(189))}}if(s.alternate!==d)throw Error(o(190))}if(s.tag!==3)throw Error(o(188));return s.stateNode.current===s?n:r}function m(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=m(n),r!==null)return r;n=n.sibling}return null}var g=Object.assign,v=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),C=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),G=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function U(n){return n===null||typeof n!="object"?null:(n=L&&n[L]||n["@@iterator"],typeof n=="function"?n:null)}var Z=Symbol.for("react.client.reference");function M(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===Z?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case S:return"Fragment";case N:return"Profiler";case j:return"StrictMode";case H:return"Suspense";case A:return"SuspenseList";case G:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case w:return"Portal";case C:return n.displayName||"Context";case k:return(n._context.displayName||"Context")+".Consumer";case _:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case $:return r=n.displayName||null,r!==null?r:M(n.type)||"Memo";case V:r=n._payload,n=n._init;try{return M(n(r))}catch{}}return null}var P=Array.isArray,O=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},Q=[],D=-1;function B(n){return{current:n}}function F(n){0>D||(n.current=Q[D],Q[D]=null,D--)}function I(n,r){D++,Q[D]=n.current,n.current=r}var ie=B(null),te=B(null),re=B(null),de=B(null);function ae(n,r){switch(I(re,r),I(te,n),I(ie,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?By(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=By(r),n=$y(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}F(ie),I(ie,n)}function fe(){F(ie),F(te),F(re)}function xe(n){n.memoizedState!==null&&I(de,n);var r=ie.current,s=$y(r,n.type);r!==s&&(I(te,n),I(ie,s))}function je(n){te.current===n&&(F(ie),F(te)),de.current===n&&(F(de),qa._currentValue=Y)}var ve,Ee;function De(n){if(ve===void 0)try{throw Error()}catch(s){var r=s.stack.trim().match(/\n( *(at )?)/);ve=r&&r[1]||"",Ee=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ve+n+Ee}var qe=!1;function Ue(n,r){if(!n||qe)return"";qe=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(r){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(oe){var ne=oe}Reflect.construct(n,[],ue)}else{try{ue.call()}catch(oe){ne=oe}n.call(ue.prototype)}}else{try{throw Error()}catch(oe){ne=oe}(ue=n())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(oe){if(oe&&ne&&typeof oe.stack=="string")return[oe.stack,ne.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=d.DetermineComponentFrameRoot(),E=x[0],R=x[1];if(E&&R){var X=E.split(`
`),ee=R.split(`
`);for(y=d=0;d<X.length&&!X[d].includes("DetermineComponentFrameRoot");)d++;for(;y<ee.length&&!ee[y].includes("DetermineComponentFrameRoot");)y++;if(d===X.length||y===ee.length)for(d=X.length-1,y=ee.length-1;1<=d&&0<=y&&X[d]!==ee[y];)y--;for(;1<=d&&0<=y;d--,y--)if(X[d]!==ee[y]){if(d!==1||y!==1)do if(d--,y--,0>y||X[d]!==ee[y]){var le=`
`+X[d].replace(" at new "," at ");return n.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",n.displayName)),le}while(1<=d&&0<=y);break}}}finally{qe=!1,Error.prepareStackTrace=s}return(s=n?n.displayName||n.name:"")?De(s):""}function ft(n,r){switch(n.tag){case 26:case 27:case 5:return De(n.type);case 16:return De("Lazy");case 13:return n.child!==r&&r!==null?De("Suspense Fallback"):De("Suspense");case 19:return De("SuspenseList");case 0:case 15:return Ue(n.type,!1);case 11:return Ue(n.type.render,!1);case 1:return Ue(n.type,!0);case 31:return De("Activity");default:return""}}function Kt(n){try{var r="",s=null;do r+=ft(n,s),s=n,n=n.return;while(n);return r}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var _t=Object.prototype.hasOwnProperty,Pt=e.unstable_scheduleCallback,En=e.unstable_cancelCallback,Zn=e.unstable_shouldYield,Jn=e.unstable_requestPaint,Nt=e.unstable_now,Ci=e.unstable_getCurrentPriorityLevel,se=e.unstable_ImmediatePriority,pe=e.unstable_UserBlockingPriority,Se=e.unstable_NormalPriority,_e=e.unstable_LowPriority,He=e.unstable_IdlePriority,Bt=e.log,jn=e.unstable_setDisableYieldValue,kt=null,ht=null;function Ot(n){if(typeof Bt=="function"&&jn(n),ht&&typeof ht.setStrictMode=="function")try{ht.setStrictMode(kt,n)}catch{}}var Qe=Math.clz32?Math.clz32:yu,zn=Math.log,en=Math.LN2;function yu(n){return n>>>=0,n===0?32:31-(zn(n)/en|0)|0}var Vr=256,Fr=262144,Gr=4194304;function Kn(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Yr(n,r,s){var d=n.pendingLanes;if(d===0)return 0;var y=0,x=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var R=d&134217727;return R!==0?(d=R&~x,d!==0?y=Kn(d):(E&=R,E!==0?y=Kn(E):s||(s=R&~n,s!==0&&(y=Kn(s))))):(R=d&~x,R!==0?y=Kn(R):E!==0?y=Kn(E):s||(s=d&~n,s!==0&&(y=Kn(s)))),y===0?0:r!==0&&r!==y&&(r&x)===0&&(x=y&-y,s=r&-r,x>=s||x===32&&(s&4194048)!==0)?r:y}function ur(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function xu(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bs(){var n=Gr;return Gr<<=1,(Gr&62914560)===0&&(Gr=4194304),n}function Ko(n){for(var r=[],s=0;31>s;s++)r.push(n);return r}function dr(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function vu(n,r,s,d,y,x){var E=n.pendingLanes;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=s,n.entangledLanes&=s,n.errorRecoveryDisabledLanes&=s,n.shellSuspendCounter=0;var R=n.entanglements,X=n.expirationTimes,ee=n.hiddenUpdates;for(s=E&~s;0<s;){var le=31-Qe(s),ue=1<<le;R[le]=0,X[le]=-1;var ne=ee[le];if(ne!==null)for(ee[le]=null,le=0;le<ne.length;le++){var oe=ne[le];oe!==null&&(oe.lane&=-536870913)}s&=~ue}d!==0&&$s(n,d,0),x!==0&&y===0&&n.tag!==0&&(n.suspendedLanes|=x&~(E&~r))}function $s(n,r,s){n.pendingLanes|=r,n.suspendedLanes&=~r;var d=31-Qe(r);n.entangledLanes|=r,n.entanglements[d]=n.entanglements[d]|1073741824|s&261930}function Hs(n,r){var s=n.entangledLanes|=r;for(n=n.entanglements;s;){var d=31-Qe(s),y=1<<d;y&r|n[d]&r&&(n[d]|=r),s&=~y}}function Ps(n,r){var s=r&-r;return s=(s&42)!==0?1:ea(s),(s&(n.suspendedLanes|r))!==0?0:s}function ea(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function ta(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function qs(){var n=q.p;return n!==0?n:(n=window.event,n===void 0?32:lx(n.type))}function Us(n,r){var s=q.p;try{return q.p=n,r()}finally{q.p=s}}var Bn=Math.random().toString(36).slice(2),Et="__reactFiber$"+Bn,Rt="__reactProps$"+Bn,ei="__reactContainer$"+Bn,Xr="__reactEvents$"+Bn,Vs="__reactListeners$"+Bn,bu="__reactHandles$"+Bn,Fs="__reactResources$"+Bn,fr="__reactMarker$"+Bn;function na(n){delete n[Et],delete n[Rt],delete n[Xr],delete n[Vs],delete n[bu]}function ki(n){var r=n[Et];if(r)return r;for(var s=n.parentNode;s;){if(r=s[ei]||s[Et]){if(s=r.alternate,r.child!==null||s!==null&&s.child!==null)for(n=Gy(n);n!==null;){if(s=n[Et])return s;n=Gy(n)}return r}n=s,s=n.parentNode}return null}function Ti(n){if(n=n[Et]||n[ei]){var r=n.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return n}return null}function Ai(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(o(33))}function Mi(n){var r=n[Fs];return r||(r=n[Fs]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function gt(n){n[fr]=!0}var Gs=new Set,Ys={};function ti(n,r){Di(n,r),Di(n+"Capture",r)}function Di(n,r){for(Ys[n]=r,n=0;n<r.length;n++)Gs.add(r[n])}var wu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ia={},Xs={};function Su(n){return _t.call(Xs,n)?!0:_t.call(ia,n)?!1:wu.test(n)?Xs[n]=!0:(ia[n]=!0,!1)}function Qr(n,r,s){if(Su(r))if(s===null)n.removeAttribute(r);else{switch(typeof s){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var d=r.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+s)}}function Wr(n,r,s){if(s===null)n.removeAttribute(r);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+s)}}function Cn(n,r,s,d){if(d===null)n.removeAttribute(s);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttributeNS(r,s,""+d)}}function qt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Qs(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Nu(n,r,s){var d=Object.getOwnPropertyDescriptor(n.constructor.prototype,r);if(!n.hasOwnProperty(r)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var y=d.get,x=d.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return y.call(this)},set:function(E){s=""+E,x.call(this,E)}}),Object.defineProperty(n,r,{enumerable:d.enumerable}),{getValue:function(){return s},setValue:function(E){s=""+E},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Zr(n){if(!n._valueTracker){var r=Qs(n)?"checked":"value";n._valueTracker=Nu(n,r,""+n[r])}}function Ws(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var s=r.getValue(),d="";return n&&(d=Qs(n)?n.checked?"true":"false":n.value),n=d,n!==s?(r.setValue(n),!0):!1}function hr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Eu=/[\n"\\]/g;function Ut(n){return n.replace(Eu,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function pr(n,r,s,d,y,x,E,R){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),r!=null?E==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+qt(r)):n.value!==""+qt(r)&&(n.value=""+qt(r)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),r!=null?ra(n,E,qt(r)):s!=null?ra(n,E,qt(s)):d!=null&&n.removeAttribute("value"),y==null&&x!=null&&(n.defaultChecked=!!x),y!=null&&(n.checked=y&&typeof y!="function"&&typeof y!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?n.name=""+qt(R):n.removeAttribute("name")}function Zs(n,r,s,d,y,x,E,R){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(n.type=x),r!=null||s!=null){if(!(x!=="submit"&&x!=="reset"||r!=null)){Zr(n);return}s=s!=null?""+qt(s):"",r=r!=null?""+qt(r):s,R||r===n.value||(n.value=r),n.defaultValue=r}d=d??y,d=typeof d!="function"&&typeof d!="symbol"&&!!d,n.checked=R?n.checked:!!d,n.defaultChecked=!!d,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E),Zr(n)}function ra(n,r,s){r==="number"&&hr(n.ownerDocument)===n||n.defaultValue===""+s||(n.defaultValue=""+s)}function ni(n,r,s,d){if(n=n.options,r){r={};for(var y=0;y<s.length;y++)r["$"+s[y]]=!0;for(s=0;s<n.length;s++)y=r.hasOwnProperty("$"+n[s].value),n[s].selected!==y&&(n[s].selected=y),y&&d&&(n[s].defaultSelected=!0)}else{for(s=""+qt(s),r=null,y=0;y<n.length;y++){if(n[y].value===s){n[y].selected=!0,d&&(n[y].defaultSelected=!0);return}r!==null||n[y].disabled||(r=n[y])}r!==null&&(r.selected=!0)}}function Op(n,r,s){if(r!=null&&(r=""+qt(r),r!==n.value&&(n.value=r),s==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=s!=null?""+qt(s):""}function Rp(n,r,s,d){if(r==null){if(d!=null){if(s!=null)throw Error(o(92));if(P(d)){if(1<d.length)throw Error(o(93));d=d[0]}s=d}s==null&&(s=""),r=s}s=qt(r),n.defaultValue=s,d=n.textContent,d===s&&d!==""&&d!==null&&(n.value=d),Zr(n)}function Jr(n,r){if(r){var s=n.firstChild;if(s&&s===n.lastChild&&s.nodeType===3){s.nodeValue=r;return}}n.textContent=r}var Y1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ip(n,r,s){var d=r.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?d?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":d?n.setProperty(r,s):typeof s!="number"||s===0||Y1.has(r)?r==="float"?n.cssFloat=s:n[r]=(""+s).trim():n[r]=s+"px"}function Lp(n,r,s){if(r!=null&&typeof r!="object")throw Error(o(62));if(n=n.style,s!=null){for(var d in s)!s.hasOwnProperty(d)||r!=null&&r.hasOwnProperty(d)||(d.indexOf("--")===0?n.setProperty(d,""):d==="float"?n.cssFloat="":n[d]="");for(var y in r)d=r[y],r.hasOwnProperty(y)&&s[y]!==d&&Ip(n,y,d)}else for(var x in r)r.hasOwnProperty(x)&&Ip(n,x,r[x])}function ju(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var X1=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Q1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Js(n){return Q1.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function ii(){}var Cu=null;function ku(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Kr=null,eo=null;function zp(n){var r=Ti(n);if(r&&(n=r.stateNode)){var s=n[Rt]||null;e:switch(n=r.stateNode,r.type){case"input":if(pr(n,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),r=s.name,s.type==="radio"&&r!=null){for(s=n;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Ut(""+r)+'"][type="radio"]'),r=0;r<s.length;r++){var d=s[r];if(d!==n&&d.form===n.form){var y=d[Rt]||null;if(!y)throw Error(o(90));pr(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<s.length;r++)d=s[r],d.form===n.form&&Ws(d)}break e;case"textarea":Op(n,s.value,s.defaultValue);break e;case"select":r=s.value,r!=null&&ni(n,!!s.multiple,r,!1)}}}var Tu=!1;function Bp(n,r,s){if(Tu)return n(r,s);Tu=!0;try{var d=n(r);return d}finally{if(Tu=!1,(Kr!==null||eo!==null)&&($l(),Kr&&(r=Kr,n=eo,eo=Kr=null,zp(r),n)))for(r=0;r<n.length;r++)zp(n[r])}}function oa(n,r){var s=n.stateNode;if(s===null)return null;var d=s[Rt]||null;if(d===null)return null;s=d[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(n=n.type,d=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!d;break e;default:n=!1}if(n)return null;if(s&&typeof s!="function")throw Error(o(231,r,typeof s));return s}var ri=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Au=!1;if(ri)try{var aa={};Object.defineProperty(aa,"passive",{get:function(){Au=!0}}),window.addEventListener("test",aa,aa),window.removeEventListener("test",aa,aa)}catch{Au=!1}var _i=null,Mu=null,Ks=null;function $p(){if(Ks)return Ks;var n,r=Mu,s=r.length,d,y="value"in _i?_i.value:_i.textContent,x=y.length;for(n=0;n<s&&r[n]===y[n];n++);var E=s-n;for(d=1;d<=E&&r[s-d]===y[x-d];d++);return Ks=y.slice(n,1<d?1-d:void 0)}function el(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function tl(){return!0}function Hp(){return!1}function Vt(n){function r(s,d,y,x,E){this._reactName=s,this._targetInst=y,this.type=d,this.nativeEvent=x,this.target=E,this.currentTarget=null;for(var R in n)n.hasOwnProperty(R)&&(s=n[R],this[R]=s?s(x):x[R]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?tl:Hp,this.isPropagationStopped=Hp,this}return g(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=tl)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=tl)},persist:function(){},isPersistent:tl}),r}var mr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nl=Vt(mr),sa=g({},mr,{view:0,detail:0}),W1=Vt(sa),Du,_u,la,il=g({},sa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ru,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==la&&(la&&n.type==="mousemove"?(Du=n.screenX-la.screenX,_u=n.screenY-la.screenY):_u=Du=0,la=n),Du)},movementY:function(n){return"movementY"in n?n.movementY:_u}}),Pp=Vt(il),Z1=g({},il,{dataTransfer:0}),J1=Vt(Z1),K1=g({},sa,{relatedTarget:0}),Ou=Vt(K1),eS=g({},mr,{animationName:0,elapsedTime:0,pseudoElement:0}),tS=Vt(eS),nS=g({},mr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),iS=Vt(nS),rS=g({},mr,{data:0}),qp=Vt(rS),oS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lS(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=sS[n])?!!r[n]:!1}function Ru(){return lS}var cS=g({},sa,{key:function(n){if(n.key){var r=oS[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=el(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?aS[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ru,charCode:function(n){return n.type==="keypress"?el(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?el(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),uS=Vt(cS),dS=g({},il,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Up=Vt(dS),fS=g({},sa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ru}),hS=Vt(fS),pS=g({},mr,{propertyName:0,elapsedTime:0,pseudoElement:0}),mS=Vt(pS),gS=g({},il,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),yS=Vt(gS),xS=g({},mr,{newState:0,oldState:0}),vS=Vt(xS),bS=[9,13,27,32],Iu=ri&&"CompositionEvent"in window,ca=null;ri&&"documentMode"in document&&(ca=document.documentMode);var wS=ri&&"TextEvent"in window&&!ca,Vp=ri&&(!Iu||ca&&8<ca&&11>=ca),Fp=" ",Gp=!1;function Yp(n,r){switch(n){case"keyup":return bS.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var to=!1;function SS(n,r){switch(n){case"compositionend":return Xp(r);case"keypress":return r.which!==32?null:(Gp=!0,Fp);case"textInput":return n=r.data,n===Fp&&Gp?null:n;default:return null}}function NS(n,r){if(to)return n==="compositionend"||!Iu&&Yp(n,r)?(n=$p(),Ks=Mu=_i=null,to=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Vp&&r.locale!=="ko"?null:r.data;default:return null}}var ES={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qp(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!ES[n.type]:r==="textarea"}function Wp(n,r,s,d){Kr?eo?eo.push(d):eo=[d]:Kr=d,r=Gl(r,"onChange"),0<r.length&&(s=new nl("onChange","change",null,s,d),n.push({event:s,listeners:r}))}var ua=null,da=null;function jS(n){_y(n,0)}function rl(n){var r=Ai(n);if(Ws(r))return n}function Zp(n,r){if(n==="change")return r}var Jp=!1;if(ri){var Lu;if(ri){var zu="oninput"in document;if(!zu){var Kp=document.createElement("div");Kp.setAttribute("oninput","return;"),zu=typeof Kp.oninput=="function"}Lu=zu}else Lu=!1;Jp=Lu&&(!document.documentMode||9<document.documentMode)}function em(){ua&&(ua.detachEvent("onpropertychange",tm),da=ua=null)}function tm(n){if(n.propertyName==="value"&&rl(da)){var r=[];Wp(r,da,n,ku(n)),Bp(jS,r)}}function CS(n,r,s){n==="focusin"?(em(),ua=r,da=s,ua.attachEvent("onpropertychange",tm)):n==="focusout"&&em()}function kS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return rl(da)}function TS(n,r){if(n==="click")return rl(r)}function AS(n,r){if(n==="input"||n==="change")return rl(r)}function MS(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var tn=typeof Object.is=="function"?Object.is:MS;function fa(n,r){if(tn(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var s=Object.keys(n),d=Object.keys(r);if(s.length!==d.length)return!1;for(d=0;d<s.length;d++){var y=s[d];if(!_t.call(r,y)||!tn(n[y],r[y]))return!1}return!0}function nm(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function im(n,r){var s=nm(n);n=0;for(var d;s;){if(s.nodeType===3){if(d=n+s.textContent.length,n<=r&&d>=r)return{node:s,offset:r-n};n=d}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=nm(s)}}function rm(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?rm(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function om(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=hr(n.document);r instanceof n.HTMLIFrameElement;){try{var s=typeof r.contentWindow.location.href=="string"}catch{s=!1}if(s)n=r.contentWindow;else break;r=hr(n.document)}return r}function Bu(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var DS=ri&&"documentMode"in document&&11>=document.documentMode,no=null,$u=null,ha=null,Hu=!1;function am(n,r,s){var d=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Hu||no==null||no!==hr(d)||(d=no,"selectionStart"in d&&Bu(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),ha&&fa(ha,d)||(ha=d,d=Gl($u,"onSelect"),0<d.length&&(r=new nl("onSelect","select",null,r,s),n.push({event:r,listeners:d}),r.target=no)))}function gr(n,r){var s={};return s[n.toLowerCase()]=r.toLowerCase(),s["Webkit"+n]="webkit"+r,s["Moz"+n]="moz"+r,s}var io={animationend:gr("Animation","AnimationEnd"),animationiteration:gr("Animation","AnimationIteration"),animationstart:gr("Animation","AnimationStart"),transitionrun:gr("Transition","TransitionRun"),transitionstart:gr("Transition","TransitionStart"),transitioncancel:gr("Transition","TransitionCancel"),transitionend:gr("Transition","TransitionEnd")},Pu={},sm={};ri&&(sm=document.createElement("div").style,"AnimationEvent"in window||(delete io.animationend.animation,delete io.animationiteration.animation,delete io.animationstart.animation),"TransitionEvent"in window||delete io.transitionend.transition);function yr(n){if(Pu[n])return Pu[n];if(!io[n])return n;var r=io[n],s;for(s in r)if(r.hasOwnProperty(s)&&s in sm)return Pu[n]=r[s];return n}var lm=yr("animationend"),cm=yr("animationiteration"),um=yr("animationstart"),_S=yr("transitionrun"),OS=yr("transitionstart"),RS=yr("transitioncancel"),dm=yr("transitionend"),fm=new Map,qu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");qu.push("scrollEnd");function kn(n,r){fm.set(n,r),ti(r,[n])}var ol=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},pn=[],ro=0,Uu=0;function al(){for(var n=ro,r=Uu=ro=0;r<n;){var s=pn[r];pn[r++]=null;var d=pn[r];pn[r++]=null;var y=pn[r];pn[r++]=null;var x=pn[r];if(pn[r++]=null,d!==null&&y!==null){var E=d.pending;E===null?y.next=y:(y.next=E.next,E.next=y),d.pending=y}x!==0&&hm(s,y,x)}}function sl(n,r,s,d){pn[ro++]=n,pn[ro++]=r,pn[ro++]=s,pn[ro++]=d,Uu|=d,n.lanes|=d,n=n.alternate,n!==null&&(n.lanes|=d)}function Vu(n,r,s,d){return sl(n,r,s,d),ll(n)}function xr(n,r){return sl(n,null,null,r),ll(n)}function hm(n,r,s){n.lanes|=s;var d=n.alternate;d!==null&&(d.lanes|=s);for(var y=!1,x=n.return;x!==null;)x.childLanes|=s,d=x.alternate,d!==null&&(d.childLanes|=s),x.tag===22&&(n=x.stateNode,n===null||n._visibility&1||(y=!0)),n=x,x=x.return;return n.tag===3?(x=n.stateNode,y&&r!==null&&(y=31-Qe(s),n=x.hiddenUpdates,d=n[y],d===null?n[y]=[r]:d.push(r),r.lane=s|536870912),x):null}function ll(n){if(50<Ia)throw Ia=0,Kd=null,Error(o(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var oo={};function IS(n,r,s,d){this.tag=n,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nn(n,r,s,d){return new IS(n,r,s,d)}function Fu(n){return n=n.prototype,!(!n||!n.isReactComponent)}function oi(n,r){var s=n.alternate;return s===null?(s=nn(n.tag,r,n.key,n.mode),s.elementType=n.elementType,s.type=n.type,s.stateNode=n.stateNode,s.alternate=n,n.alternate=s):(s.pendingProps=r,s.type=n.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=n.flags&65011712,s.childLanes=n.childLanes,s.lanes=n.lanes,s.child=n.child,s.memoizedProps=n.memoizedProps,s.memoizedState=n.memoizedState,s.updateQueue=n.updateQueue,r=n.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},s.sibling=n.sibling,s.index=n.index,s.ref=n.ref,s.refCleanup=n.refCleanup,s}function pm(n,r){n.flags&=65011714;var s=n.alternate;return s===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=s.childLanes,n.lanes=s.lanes,n.child=s.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=s.memoizedProps,n.memoizedState=s.memoizedState,n.updateQueue=s.updateQueue,n.type=s.type,r=s.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function cl(n,r,s,d,y,x){var E=0;if(d=n,typeof n=="function")Fu(n)&&(E=1);else if(typeof n=="string")E=HN(n,s,ie.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case G:return n=nn(31,s,r,y),n.elementType=G,n.lanes=x,n;case S:return vr(s.children,y,x,r);case j:E=8,y|=24;break;case N:return n=nn(12,s,r,y|2),n.elementType=N,n.lanes=x,n;case H:return n=nn(13,s,r,y),n.elementType=H,n.lanes=x,n;case A:return n=nn(19,s,r,y),n.elementType=A,n.lanes=x,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case C:E=10;break e;case k:E=9;break e;case _:E=11;break e;case $:E=14;break e;case V:E=16,d=null;break e}E=29,s=Error(o(130,n===null?"null":typeof n,"")),d=null}return r=nn(E,s,r,y),r.elementType=n,r.type=d,r.lanes=x,r}function vr(n,r,s,d){return n=nn(7,n,d,r),n.lanes=s,n}function Gu(n,r,s){return n=nn(6,n,null,r),n.lanes=s,n}function mm(n){var r=nn(18,null,null,0);return r.stateNode=n,r}function Yu(n,r,s){return r=nn(4,n.children!==null?n.children:[],n.key,r),r.lanes=s,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var gm=new WeakMap;function mn(n,r){if(typeof n=="object"&&n!==null){var s=gm.get(n);return s!==void 0?s:(r={value:n,source:r,stack:Kt(r)},gm.set(n,r),r)}return{value:n,source:r,stack:Kt(r)}}var ao=[],so=0,ul=null,pa=0,gn=[],yn=0,Oi=null,$n=1,Hn="";function ai(n,r){ao[so++]=pa,ao[so++]=ul,ul=n,pa=r}function ym(n,r,s){gn[yn++]=$n,gn[yn++]=Hn,gn[yn++]=Oi,Oi=n;var d=$n;n=Hn;var y=32-Qe(d)-1;d&=~(1<<y),s+=1;var x=32-Qe(r)+y;if(30<x){var E=y-y%5;x=(d&(1<<E)-1).toString(32),d>>=E,y-=E,$n=1<<32-Qe(r)+y|s<<y|d,Hn=x+n}else $n=1<<x|s<<y|d,Hn=n}function Xu(n){n.return!==null&&(ai(n,1),ym(n,1,0))}function Qu(n){for(;n===ul;)ul=ao[--so],ao[so]=null,pa=ao[--so],ao[so]=null;for(;n===Oi;)Oi=gn[--yn],gn[yn]=null,Hn=gn[--yn],gn[yn]=null,$n=gn[--yn],gn[yn]=null}function xm(n,r){gn[yn++]=$n,gn[yn++]=Hn,gn[yn++]=Oi,$n=r.id,Hn=r.overflow,Oi=n}var Tt=null,rt=null,$e=!1,Ri=null,xn=!1,Wu=Error(o(519));function Ii(n){var r=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ma(mn(r,n)),Wu}function vm(n){var r=n.stateNode,s=n.type,d=n.memoizedProps;switch(r[Et]=n,r[Rt]=d,s){case"dialog":Re("cancel",r),Re("close",r);break;case"iframe":case"object":case"embed":Re("load",r);break;case"video":case"audio":for(s=0;s<za.length;s++)Re(za[s],r);break;case"source":Re("error",r);break;case"img":case"image":case"link":Re("error",r),Re("load",r);break;case"details":Re("toggle",r);break;case"input":Re("invalid",r),Zs(r,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Re("invalid",r);break;case"textarea":Re("invalid",r),Rp(r,d.value,d.defaultValue,d.children)}s=d.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||r.textContent===""+s||d.suppressHydrationWarning===!0||Ly(r.textContent,s)?(d.popover!=null&&(Re("beforetoggle",r),Re("toggle",r)),d.onScroll!=null&&Re("scroll",r),d.onScrollEnd!=null&&Re("scrollend",r),d.onClick!=null&&(r.onclick=ii),r=!0):r=!1,r||Ii(n,!0)}function bm(n){for(Tt=n.return;Tt;)switch(Tt.tag){case 5:case 31:case 13:xn=!1;return;case 27:case 3:xn=!0;return;default:Tt=Tt.return}}function lo(n){if(n!==Tt)return!1;if(!$e)return bm(n),$e=!0,!1;var r=n.tag,s;if((s=r!==3&&r!==27)&&((s=r===5)&&(s=n.type,s=!(s!=="form"&&s!=="button")||mf(n.type,n.memoizedProps)),s=!s),s&&rt&&Ii(n),bm(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));rt=Fy(n)}else if(r===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));rt=Fy(n)}else r===27?(r=rt,Qi(n.type)?(n=bf,bf=null,rt=n):rt=r):rt=Tt?bn(n.stateNode.nextSibling):null;return!0}function br(){rt=Tt=null,$e=!1}function Zu(){var n=Ri;return n!==null&&(Xt===null?Xt=n:Xt.push.apply(Xt,n),Ri=null),n}function ma(n){Ri===null?Ri=[n]:Ri.push(n)}var Ju=B(null),wr=null,si=null;function Li(n,r,s){I(Ju,r._currentValue),r._currentValue=s}function li(n){n._currentValue=Ju.current,F(Ju)}function Ku(n,r,s){for(;n!==null;){var d=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,d!==null&&(d.childLanes|=r)):d!==null&&(d.childLanes&r)!==r&&(d.childLanes|=r),n===s)break;n=n.return}}function ed(n,r,s,d){var y=n.child;for(y!==null&&(y.return=n);y!==null;){var x=y.dependencies;if(x!==null){var E=y.child;x=x.firstContext;e:for(;x!==null;){var R=x;x=y;for(var X=0;X<r.length;X++)if(R.context===r[X]){x.lanes|=s,R=x.alternate,R!==null&&(R.lanes|=s),Ku(x.return,s,n),d||(E=null);break e}x=R.next}}else if(y.tag===18){if(E=y.return,E===null)throw Error(o(341));E.lanes|=s,x=E.alternate,x!==null&&(x.lanes|=s),Ku(E,s,n),E=null}else E=y.child;if(E!==null)E.return=y;else for(E=y;E!==null;){if(E===n){E=null;break}if(y=E.sibling,y!==null){y.return=E.return,E=y;break}E=E.return}y=E}}function co(n,r,s,d){n=null;for(var y=r,x=!1;y!==null;){if(!x){if((y.flags&524288)!==0)x=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var E=y.alternate;if(E===null)throw Error(o(387));if(E=E.memoizedProps,E!==null){var R=y.type;tn(y.pendingProps.value,E.value)||(n!==null?n.push(R):n=[R])}}else if(y===de.current){if(E=y.alternate,E===null)throw Error(o(387));E.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(n!==null?n.push(qa):n=[qa])}y=y.return}n!==null&&ed(r,n,s,d),r.flags|=262144}function dl(n){for(n=n.firstContext;n!==null;){if(!tn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Sr(n){wr=n,si=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function At(n){return wm(wr,n)}function fl(n,r){return wr===null&&Sr(n),wm(n,r)}function wm(n,r){var s=r._currentValue;if(r={context:r,memoizedValue:s,next:null},si===null){if(n===null)throw Error(o(308));si=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else si=si.next=r;return s}var LS=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(s,d){n.push(d)}};this.abort=function(){r.aborted=!0,n.forEach(function(s){return s()})}},zS=e.unstable_scheduleCallback,BS=e.unstable_NormalPriority,yt={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function td(){return{controller:new LS,data:new Map,refCount:0}}function ga(n){n.refCount--,n.refCount===0&&zS(BS,function(){n.controller.abort()})}var ya=null,nd=0,uo=0,fo=null;function $S(n,r){if(ya===null){var s=ya=[];nd=0,uo=af(),fo={status:"pending",value:void 0,then:function(d){s.push(d)}}}return nd++,r.then(Sm,Sm),r}function Sm(){if(--nd===0&&ya!==null){fo!==null&&(fo.status="fulfilled");var n=ya;ya=null,uo=0,fo=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function HS(n,r){var s=[],d={status:"pending",value:null,reason:null,then:function(y){s.push(y)}};return n.then(function(){d.status="fulfilled",d.value=r;for(var y=0;y<s.length;y++)(0,s[y])(r)},function(y){for(d.status="rejected",d.reason=y,y=0;y<s.length;y++)(0,s[y])(void 0)}),d}var Nm=O.S;O.S=function(n,r){ay=Nt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&$S(n,r),Nm!==null&&Nm(n,r)};var Nr=B(null);function id(){var n=Nr.current;return n!==null?n:tt.pooledCache}function hl(n,r){r===null?I(Nr,Nr.current):I(Nr,r.pool)}function Em(){var n=id();return n===null?null:{parent:yt._currentValue,pool:n}}var ho=Error(o(460)),rd=Error(o(474)),pl=Error(o(542)),ml={then:function(){}};function jm(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Cm(n,r,s){switch(s=n[s],s===void 0?n.push(r):s!==r&&(r.then(ii,ii),r=s),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Tm(n),n;default:if(typeof r.status=="string")r.then(ii,ii);else{if(n=tt,n!==null&&100<n.shellSuspendCounter)throw Error(o(482));n=r,n.status="pending",n.then(function(d){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=d}},function(d){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=d}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Tm(n),n}throw jr=r,ho}}function Er(n){try{var r=n._init;return r(n._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(jr=s,ho):s}}var jr=null;function km(){if(jr===null)throw Error(o(459));var n=jr;return jr=null,n}function Tm(n){if(n===ho||n===pl)throw Error(o(483))}var po=null,xa=0;function gl(n){var r=xa;return xa+=1,po===null&&(po=[]),Cm(po,n,r)}function va(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function yl(n,r){throw r.$$typeof===v?Error(o(525)):(n=Object.prototype.toString.call(r),Error(o(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function Am(n){function r(J,W){if(n){var K=J.deletions;K===null?(J.deletions=[W],J.flags|=16):K.push(W)}}function s(J,W){if(!n)return null;for(;W!==null;)r(J,W),W=W.sibling;return null}function d(J){for(var W=new Map;J!==null;)J.key!==null?W.set(J.key,J):W.set(J.index,J),J=J.sibling;return W}function y(J,W){return J=oi(J,W),J.index=0,J.sibling=null,J}function x(J,W,K){return J.index=K,n?(K=J.alternate,K!==null?(K=K.index,K<W?(J.flags|=67108866,W):K):(J.flags|=67108866,W)):(J.flags|=1048576,W)}function E(J){return n&&J.alternate===null&&(J.flags|=67108866),J}function R(J,W,K,ce){return W===null||W.tag!==6?(W=Gu(K,J.mode,ce),W.return=J,W):(W=y(W,K),W.return=J,W)}function X(J,W,K,ce){var be=K.type;return be===S?le(J,W,K.props.children,ce,K.key):W!==null&&(W.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===V&&Er(be)===W.type)?(W=y(W,K.props),va(W,K),W.return=J,W):(W=cl(K.type,K.key,K.props,null,J.mode,ce),va(W,K),W.return=J,W)}function ee(J,W,K,ce){return W===null||W.tag!==4||W.stateNode.containerInfo!==K.containerInfo||W.stateNode.implementation!==K.implementation?(W=Yu(K,J.mode,ce),W.return=J,W):(W=y(W,K.children||[]),W.return=J,W)}function le(J,W,K,ce,be){return W===null||W.tag!==7?(W=vr(K,J.mode,ce,be),W.return=J,W):(W=y(W,K),W.return=J,W)}function ue(J,W,K){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=Gu(""+W,J.mode,K),W.return=J,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case b:return K=cl(W.type,W.key,W.props,null,J.mode,K),va(K,W),K.return=J,K;case w:return W=Yu(W,J.mode,K),W.return=J,W;case V:return W=Er(W),ue(J,W,K)}if(P(W)||U(W))return W=vr(W,J.mode,K,null),W.return=J,W;if(typeof W.then=="function")return ue(J,gl(W),K);if(W.$$typeof===C)return ue(J,fl(J,W),K);yl(J,W)}return null}function ne(J,W,K,ce){var be=W!==null?W.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return be!==null?null:R(J,W,""+K,ce);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case b:return K.key===be?X(J,W,K,ce):null;case w:return K.key===be?ee(J,W,K,ce):null;case V:return K=Er(K),ne(J,W,K,ce)}if(P(K)||U(K))return be!==null?null:le(J,W,K,ce,null);if(typeof K.then=="function")return ne(J,W,gl(K),ce);if(K.$$typeof===C)return ne(J,W,fl(J,K),ce);yl(J,K)}return null}function oe(J,W,K,ce,be){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return J=J.get(K)||null,R(W,J,""+ce,be);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case b:return J=J.get(ce.key===null?K:ce.key)||null,X(W,J,ce,be);case w:return J=J.get(ce.key===null?K:ce.key)||null,ee(W,J,ce,be);case V:return ce=Er(ce),oe(J,W,K,ce,be)}if(P(ce)||U(ce))return J=J.get(K)||null,le(W,J,ce,be,null);if(typeof ce.then=="function")return oe(J,W,K,gl(ce),be);if(ce.$$typeof===C)return oe(J,W,K,fl(W,ce),be);yl(W,ce)}return null}function me(J,W,K,ce){for(var be=null,Ve=null,ye=W,Ae=W=0,ze=null;ye!==null&&Ae<K.length;Ae++){ye.index>Ae?(ze=ye,ye=null):ze=ye.sibling;var Fe=ne(J,ye,K[Ae],ce);if(Fe===null){ye===null&&(ye=ze);break}n&&ye&&Fe.alternate===null&&r(J,ye),W=x(Fe,W,Ae),Ve===null?be=Fe:Ve.sibling=Fe,Ve=Fe,ye=ze}if(Ae===K.length)return s(J,ye),$e&&ai(J,Ae),be;if(ye===null){for(;Ae<K.length;Ae++)ye=ue(J,K[Ae],ce),ye!==null&&(W=x(ye,W,Ae),Ve===null?be=ye:Ve.sibling=ye,Ve=ye);return $e&&ai(J,Ae),be}for(ye=d(ye);Ae<K.length;Ae++)ze=oe(ye,J,Ae,K[Ae],ce),ze!==null&&(n&&ze.alternate!==null&&ye.delete(ze.key===null?Ae:ze.key),W=x(ze,W,Ae),Ve===null?be=ze:Ve.sibling=ze,Ve=ze);return n&&ye.forEach(function(er){return r(J,er)}),$e&&ai(J,Ae),be}function Ne(J,W,K,ce){if(K==null)throw Error(o(151));for(var be=null,Ve=null,ye=W,Ae=W=0,ze=null,Fe=K.next();ye!==null&&!Fe.done;Ae++,Fe=K.next()){ye.index>Ae?(ze=ye,ye=null):ze=ye.sibling;var er=ne(J,ye,Fe.value,ce);if(er===null){ye===null&&(ye=ze);break}n&&ye&&er.alternate===null&&r(J,ye),W=x(er,W,Ae),Ve===null?be=er:Ve.sibling=er,Ve=er,ye=ze}if(Fe.done)return s(J,ye),$e&&ai(J,Ae),be;if(ye===null){for(;!Fe.done;Ae++,Fe=K.next())Fe=ue(J,Fe.value,ce),Fe!==null&&(W=x(Fe,W,Ae),Ve===null?be=Fe:Ve.sibling=Fe,Ve=Fe);return $e&&ai(J,Ae),be}for(ye=d(ye);!Fe.done;Ae++,Fe=K.next())Fe=oe(ye,J,Ae,Fe.value,ce),Fe!==null&&(n&&Fe.alternate!==null&&ye.delete(Fe.key===null?Ae:Fe.key),W=x(Fe,W,Ae),Ve===null?be=Fe:Ve.sibling=Fe,Ve=Fe);return n&&ye.forEach(function(ZN){return r(J,ZN)}),$e&&ai(J,Ae),be}function et(J,W,K,ce){if(typeof K=="object"&&K!==null&&K.type===S&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case b:e:{for(var be=K.key;W!==null;){if(W.key===be){if(be=K.type,be===S){if(W.tag===7){s(J,W.sibling),ce=y(W,K.props.children),ce.return=J,J=ce;break e}}else if(W.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===V&&Er(be)===W.type){s(J,W.sibling),ce=y(W,K.props),va(ce,K),ce.return=J,J=ce;break e}s(J,W);break}else r(J,W);W=W.sibling}K.type===S?(ce=vr(K.props.children,J.mode,ce,K.key),ce.return=J,J=ce):(ce=cl(K.type,K.key,K.props,null,J.mode,ce),va(ce,K),ce.return=J,J=ce)}return E(J);case w:e:{for(be=K.key;W!==null;){if(W.key===be)if(W.tag===4&&W.stateNode.containerInfo===K.containerInfo&&W.stateNode.implementation===K.implementation){s(J,W.sibling),ce=y(W,K.children||[]),ce.return=J,J=ce;break e}else{s(J,W);break}else r(J,W);W=W.sibling}ce=Yu(K,J.mode,ce),ce.return=J,J=ce}return E(J);case V:return K=Er(K),et(J,W,K,ce)}if(P(K))return me(J,W,K,ce);if(U(K)){if(be=U(K),typeof be!="function")throw Error(o(150));return K=be.call(K),Ne(J,W,K,ce)}if(typeof K.then=="function")return et(J,W,gl(K),ce);if(K.$$typeof===C)return et(J,W,fl(J,K),ce);yl(J,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,W!==null&&W.tag===6?(s(J,W.sibling),ce=y(W,K),ce.return=J,J=ce):(s(J,W),ce=Gu(K,J.mode,ce),ce.return=J,J=ce),E(J)):s(J,W)}return function(J,W,K,ce){try{xa=0;var be=et(J,W,K,ce);return po=null,be}catch(ye){if(ye===ho||ye===pl)throw ye;var Ve=nn(29,ye,null,J.mode);return Ve.lanes=ce,Ve.return=J,Ve}}}var Cr=Am(!0),Mm=Am(!1),zi=!1;function od(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ad(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Bi(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function $i(n,r,s){var d=n.updateQueue;if(d===null)return null;if(d=d.shared,(Ye&2)!==0){var y=d.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),d.pending=r,r=ll(n),hm(n,null,s),r}return sl(n,d,r,s),ll(n)}function ba(n,r,s){if(r=r.updateQueue,r!==null&&(r=r.shared,(s&4194048)!==0)){var d=r.lanes;d&=n.pendingLanes,s|=d,r.lanes=s,Hs(n,s)}}function sd(n,r){var s=n.updateQueue,d=n.alternate;if(d!==null&&(d=d.updateQueue,s===d)){var y=null,x=null;if(s=s.firstBaseUpdate,s!==null){do{var E={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};x===null?y=x=E:x=x.next=E,s=s.next}while(s!==null);x===null?y=x=r:x=x.next=r}else y=x=r;s={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:x,shared:d.shared,callbacks:d.callbacks},n.updateQueue=s;return}n=s.lastBaseUpdate,n===null?s.firstBaseUpdate=r:n.next=r,s.lastBaseUpdate=r}var ld=!1;function wa(){if(ld){var n=fo;if(n!==null)throw n}}function Sa(n,r,s,d){ld=!1;var y=n.updateQueue;zi=!1;var x=y.firstBaseUpdate,E=y.lastBaseUpdate,R=y.shared.pending;if(R!==null){y.shared.pending=null;var X=R,ee=X.next;X.next=null,E===null?x=ee:E.next=ee,E=X;var le=n.alternate;le!==null&&(le=le.updateQueue,R=le.lastBaseUpdate,R!==E&&(R===null?le.firstBaseUpdate=ee:R.next=ee,le.lastBaseUpdate=X))}if(x!==null){var ue=y.baseState;E=0,le=ee=X=null,R=x;do{var ne=R.lane&-536870913,oe=ne!==R.lane;if(oe?(Le&ne)===ne:(d&ne)===ne){ne!==0&&ne===uo&&(ld=!0),le!==null&&(le=le.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var me=n,Ne=R;ne=r;var et=s;switch(Ne.tag){case 1:if(me=Ne.payload,typeof me=="function"){ue=me.call(et,ue,ne);break e}ue=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=Ne.payload,ne=typeof me=="function"?me.call(et,ue,ne):me,ne==null)break e;ue=g({},ue,ne);break e;case 2:zi=!0}}ne=R.callback,ne!==null&&(n.flags|=64,oe&&(n.flags|=8192),oe=y.callbacks,oe===null?y.callbacks=[ne]:oe.push(ne))}else oe={lane:ne,tag:R.tag,payload:R.payload,callback:R.callback,next:null},le===null?(ee=le=oe,X=ue):le=le.next=oe,E|=ne;if(R=R.next,R===null){if(R=y.shared.pending,R===null)break;oe=R,R=oe.next,oe.next=null,y.lastBaseUpdate=oe,y.shared.pending=null}}while(!0);le===null&&(X=ue),y.baseState=X,y.firstBaseUpdate=ee,y.lastBaseUpdate=le,x===null&&(y.shared.lanes=0),Vi|=E,n.lanes=E,n.memoizedState=ue}}function Dm(n,r){if(typeof n!="function")throw Error(o(191,n));n.call(r)}function _m(n,r){var s=n.callbacks;if(s!==null)for(n.callbacks=null,n=0;n<s.length;n++)Dm(s[n],r)}var mo=B(null),xl=B(0);function Om(n,r){n=yi,I(xl,n),I(mo,r),yi=n|r.baseLanes}function cd(){I(xl,yi),I(mo,mo.current)}function ud(){yi=xl.current,F(mo),F(xl)}var rn=B(null),vn=null;function Hi(n){var r=n.alternate;I(pt,pt.current&1),I(rn,n),vn===null&&(r===null||mo.current!==null||r.memoizedState!==null)&&(vn=n)}function dd(n){I(pt,pt.current),I(rn,n),vn===null&&(vn=n)}function Rm(n){n.tag===22?(I(pt,pt.current),I(rn,n),vn===null&&(vn=n)):Pi()}function Pi(){I(pt,pt.current),I(rn,rn.current)}function on(n){F(rn),vn===n&&(vn=null),F(pt)}var pt=B(0);function vl(n){for(var r=n;r!==null;){if(r.tag===13){var s=r.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||xf(s)||vf(s)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ci=0,Te=null,Je=null,xt=null,bl=!1,go=!1,kr=!1,wl=0,Na=0,yo=null,PS=0;function ut(){throw Error(o(321))}function fd(n,r){if(r===null)return!1;for(var s=0;s<r.length&&s<n.length;s++)if(!tn(n[s],r[s]))return!1;return!0}function hd(n,r,s,d,y,x){return ci=x,Te=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,O.H=n===null||n.memoizedState===null?yg:Td,kr=!1,x=s(d,y),kr=!1,go&&(x=Lm(r,s,d,y)),Im(n),x}function Im(n){O.H=Ca;var r=Je!==null&&Je.next!==null;if(ci=0,xt=Je=Te=null,bl=!1,Na=0,yo=null,r)throw Error(o(300));n===null||vt||(n=n.dependencies,n!==null&&dl(n)&&(vt=!0))}function Lm(n,r,s,d){Te=n;var y=0;do{if(go&&(yo=null),Na=0,go=!1,25<=y)throw Error(o(301));if(y+=1,xt=Je=null,n.updateQueue!=null){var x=n.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}O.H=xg,x=r(s,d)}while(go);return x}function qS(){var n=O.H,r=n.useState()[0];return r=typeof r.then=="function"?Ea(r):r,n=n.useState()[0],(Je!==null?Je.memoizedState:null)!==n&&(Te.flags|=1024),r}function pd(){var n=wl!==0;return wl=0,n}function md(n,r,s){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~s}function gd(n){if(bl){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}bl=!1}ci=0,xt=Je=Te=null,go=!1,Na=wl=0,yo=null}function $t(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?Te.memoizedState=xt=n:xt=xt.next=n,xt}function mt(){if(Je===null){var n=Te.alternate;n=n!==null?n.memoizedState:null}else n=Je.next;var r=xt===null?Te.memoizedState:xt.next;if(r!==null)xt=r,Je=n;else{if(n===null)throw Te.alternate===null?Error(o(467)):Error(o(310));Je=n,n={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},xt===null?Te.memoizedState=xt=n:xt=xt.next=n}return xt}function Sl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ea(n){var r=Na;return Na+=1,yo===null&&(yo=[]),n=Cm(yo,n,r),r=Te,(xt===null?r.memoizedState:xt.next)===null&&(r=r.alternate,O.H=r===null||r.memoizedState===null?yg:Td),n}function Nl(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Ea(n);if(n.$$typeof===C)return At(n)}throw Error(o(438,String(n)))}function yd(n){var r=null,s=Te.updateQueue;if(s!==null&&(r=s.memoCache),r==null){var d=Te.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(r={data:d.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),s===null&&(s=Sl(),Te.updateQueue=s),s.memoCache=r,s=r.data[r.index],s===void 0)for(s=r.data[r.index]=Array(n),d=0;d<n;d++)s[d]=z;return r.index++,s}function ui(n,r){return typeof r=="function"?r(n):r}function El(n){var r=mt();return xd(r,Je,n)}function xd(n,r,s){var d=n.queue;if(d===null)throw Error(o(311));d.lastRenderedReducer=s;var y=n.baseQueue,x=d.pending;if(x!==null){if(y!==null){var E=y.next;y.next=x.next,x.next=E}r.baseQueue=y=x,d.pending=null}if(x=n.baseState,y===null)n.memoizedState=x;else{r=y.next;var R=E=null,X=null,ee=r,le=!1;do{var ue=ee.lane&-536870913;if(ue!==ee.lane?(Le&ue)===ue:(ci&ue)===ue){var ne=ee.revertLane;if(ne===0)X!==null&&(X=X.next={lane:0,revertLane:0,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),ue===uo&&(le=!0);else if((ci&ne)===ne){ee=ee.next,ne===uo&&(le=!0);continue}else ue={lane:0,revertLane:ee.revertLane,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},X===null?(R=X=ue,E=x):X=X.next=ue,Te.lanes|=ne,Vi|=ne;ue=ee.action,kr&&s(x,ue),x=ee.hasEagerState?ee.eagerState:s(x,ue)}else ne={lane:ue,revertLane:ee.revertLane,gesture:ee.gesture,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},X===null?(R=X=ne,E=x):X=X.next=ne,Te.lanes|=ue,Vi|=ue;ee=ee.next}while(ee!==null&&ee!==r);if(X===null?E=x:X.next=R,!tn(x,n.memoizedState)&&(vt=!0,le&&(s=fo,s!==null)))throw s;n.memoizedState=x,n.baseState=E,n.baseQueue=X,d.lastRenderedState=x}return y===null&&(d.lanes=0),[n.memoizedState,d.dispatch]}function vd(n){var r=mt(),s=r.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=n;var d=s.dispatch,y=s.pending,x=r.memoizedState;if(y!==null){s.pending=null;var E=y=y.next;do x=n(x,E.action),E=E.next;while(E!==y);tn(x,r.memoizedState)||(vt=!0),r.memoizedState=x,r.baseQueue===null&&(r.baseState=x),s.lastRenderedState=x}return[x,d]}function zm(n,r,s){var d=Te,y=mt(),x=$e;if(x){if(s===void 0)throw Error(o(407));s=s()}else s=r();var E=!tn((Je||y).memoizedState,s);if(E&&(y.memoizedState=s,vt=!0),y=y.queue,Sd(Hm.bind(null,d,y,n),[n]),y.getSnapshot!==r||E||xt!==null&&xt.memoizedState.tag&1){if(d.flags|=2048,xo(9,{destroy:void 0},$m.bind(null,d,y,s,r),null),tt===null)throw Error(o(349));x||(ci&127)!==0||Bm(d,r,s)}return s}function Bm(n,r,s){n.flags|=16384,n={getSnapshot:r,value:s},r=Te.updateQueue,r===null?(r=Sl(),Te.updateQueue=r,r.stores=[n]):(s=r.stores,s===null?r.stores=[n]:s.push(n))}function $m(n,r,s,d){r.value=s,r.getSnapshot=d,Pm(r)&&qm(n)}function Hm(n,r,s){return s(function(){Pm(r)&&qm(n)})}function Pm(n){var r=n.getSnapshot;n=n.value;try{var s=r();return!tn(n,s)}catch{return!0}}function qm(n){var r=xr(n,2);r!==null&&Qt(r,n,2)}function bd(n){var r=$t();if(typeof n=="function"){var s=n;if(n=s(),kr){Ot(!0);try{s()}finally{Ot(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ui,lastRenderedState:n},r}function Um(n,r,s,d){return n.baseState=s,xd(n,Je,typeof d=="function"?d:ui)}function US(n,r,s,d,y){if(kl(n))throw Error(o(485));if(n=r.action,n!==null){var x={payload:y,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){x.listeners.push(E)}};O.T!==null?s(!0):x.isTransition=!1,d(x),s=r.pending,s===null?(x.next=r.pending=x,Vm(r,x)):(x.next=s.next,r.pending=s.next=x)}}function Vm(n,r){var s=r.action,d=r.payload,y=n.state;if(r.isTransition){var x=O.T,E={};O.T=E;try{var R=s(y,d),X=O.S;X!==null&&X(E,R),Fm(n,r,R)}catch(ee){wd(n,r,ee)}finally{x!==null&&E.types!==null&&(x.types=E.types),O.T=x}}else try{x=s(y,d),Fm(n,r,x)}catch(ee){wd(n,r,ee)}}function Fm(n,r,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(d){Gm(n,r,d)},function(d){return wd(n,r,d)}):Gm(n,r,s)}function Gm(n,r,s){r.status="fulfilled",r.value=s,Ym(r),n.state=s,r=n.pending,r!==null&&(s=r.next,s===r?n.pending=null:(s=s.next,r.next=s,Vm(n,s)))}function wd(n,r,s){var d=n.pending;if(n.pending=null,d!==null){d=d.next;do r.status="rejected",r.reason=s,Ym(r),r=r.next;while(r!==d)}n.action=null}function Ym(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function Xm(n,r){return r}function Qm(n,r){if($e){var s=tt.formState;if(s!==null){e:{var d=Te;if($e){if(rt){t:{for(var y=rt,x=xn;y.nodeType!==8;){if(!x){y=null;break t}if(y=bn(y.nextSibling),y===null){y=null;break t}}x=y.data,y=x==="F!"||x==="F"?y:null}if(y){rt=bn(y.nextSibling),d=y.data==="F!";break e}}Ii(d)}d=!1}d&&(r=s[0])}}return s=$t(),s.memoizedState=s.baseState=r,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xm,lastRenderedState:r},s.queue=d,s=pg.bind(null,Te,d),d.dispatch=s,d=bd(!1),x=kd.bind(null,Te,!1,d.queue),d=$t(),y={state:r,dispatch:null,action:n,pending:null},d.queue=y,s=US.bind(null,Te,y,x,s),y.dispatch=s,d.memoizedState=n,[r,s,!1]}function Wm(n){var r=mt();return Zm(r,Je,n)}function Zm(n,r,s){if(r=xd(n,r,Xm)[0],n=El(ui)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var d=Ea(r)}catch(E){throw E===ho?pl:E}else d=r;r=mt();var y=r.queue,x=y.dispatch;return s!==r.memoizedState&&(Te.flags|=2048,xo(9,{destroy:void 0},VS.bind(null,y,s),null)),[d,x,n]}function VS(n,r){n.action=r}function Jm(n){var r=mt(),s=Je;if(s!==null)return Zm(r,s,n);mt(),r=r.memoizedState,s=mt();var d=s.queue.dispatch;return s.memoizedState=n,[r,d,!1]}function xo(n,r,s,d){return n={tag:n,create:s,deps:d,inst:r,next:null},r=Te.updateQueue,r===null&&(r=Sl(),Te.updateQueue=r),s=r.lastEffect,s===null?r.lastEffect=n.next=n:(d=s.next,s.next=n,n.next=d,r.lastEffect=n),n}function Km(){return mt().memoizedState}function jl(n,r,s,d){var y=$t();Te.flags|=n,y.memoizedState=xo(1|r,{destroy:void 0},s,d===void 0?null:d)}function Cl(n,r,s,d){var y=mt();d=d===void 0?null:d;var x=y.memoizedState.inst;Je!==null&&d!==null&&fd(d,Je.memoizedState.deps)?y.memoizedState=xo(r,x,s,d):(Te.flags|=n,y.memoizedState=xo(1|r,x,s,d))}function eg(n,r){jl(8390656,8,n,r)}function Sd(n,r){Cl(2048,8,n,r)}function FS(n){Te.flags|=4;var r=Te.updateQueue;if(r===null)r=Sl(),Te.updateQueue=r,r.events=[n];else{var s=r.events;s===null?r.events=[n]:s.push(n)}}function tg(n){var r=mt().memoizedState;return FS({ref:r,nextImpl:n}),function(){if((Ye&2)!==0)throw Error(o(440));return r.impl.apply(void 0,arguments)}}function ng(n,r){return Cl(4,2,n,r)}function ig(n,r){return Cl(4,4,n,r)}function rg(n,r){if(typeof r=="function"){n=n();var s=r(n);return function(){typeof s=="function"?s():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function og(n,r,s){s=s!=null?s.concat([n]):null,Cl(4,4,rg.bind(null,r,n),s)}function Nd(){}function ag(n,r){var s=mt();r=r===void 0?null:r;var d=s.memoizedState;return r!==null&&fd(r,d[1])?d[0]:(s.memoizedState=[n,r],n)}function sg(n,r){var s=mt();r=r===void 0?null:r;var d=s.memoizedState;if(r!==null&&fd(r,d[1]))return d[0];if(d=n(),kr){Ot(!0);try{n()}finally{Ot(!1)}}return s.memoizedState=[d,r],d}function Ed(n,r,s){return s===void 0||(ci&1073741824)!==0&&(Le&261930)===0?n.memoizedState=r:(n.memoizedState=s,n=ly(),Te.lanes|=n,Vi|=n,s)}function lg(n,r,s,d){return tn(s,r)?s:mo.current!==null?(n=Ed(n,s,d),tn(n,r)||(vt=!0),n):(ci&42)===0||(ci&1073741824)!==0&&(Le&261930)===0?(vt=!0,n.memoizedState=s):(n=ly(),Te.lanes|=n,Vi|=n,r)}function cg(n,r,s,d,y){var x=q.p;q.p=x!==0&&8>x?x:8;var E=O.T,R={};O.T=R,kd(n,!1,r,s);try{var X=y(),ee=O.S;if(ee!==null&&ee(R,X),X!==null&&typeof X=="object"&&typeof X.then=="function"){var le=HS(X,d);ja(n,r,le,ln(n))}else ja(n,r,d,ln(n))}catch(ue){ja(n,r,{then:function(){},status:"rejected",reason:ue},ln())}finally{q.p=x,E!==null&&R.types!==null&&(E.types=R.types),O.T=E}}function GS(){}function jd(n,r,s,d){if(n.tag!==5)throw Error(o(476));var y=ug(n).queue;cg(n,y,r,Y,s===null?GS:function(){return dg(n),s(d)})}function ug(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ui,lastRenderedState:Y},next:null};var s={};return r.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ui,lastRenderedState:s},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function dg(n){var r=ug(n);r.next===null&&(r=n.alternate.memoizedState),ja(n,r.next.queue,{},ln())}function Cd(){return At(qa)}function fg(){return mt().memoizedState}function hg(){return mt().memoizedState}function YS(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var s=ln();n=Bi(s);var d=$i(r,n,s);d!==null&&(Qt(d,r,s),ba(d,r,s)),r={cache:td()},n.payload=r;return}r=r.return}}function XS(n,r,s){var d=ln();s={lane:d,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},kl(n)?mg(r,s):(s=Vu(n,r,s,d),s!==null&&(Qt(s,n,d),gg(s,r,d)))}function pg(n,r,s){var d=ln();ja(n,r,s,d)}function ja(n,r,s,d){var y={lane:d,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(kl(n))mg(r,y);else{var x=n.alternate;if(n.lanes===0&&(x===null||x.lanes===0)&&(x=r.lastRenderedReducer,x!==null))try{var E=r.lastRenderedState,R=x(E,s);if(y.hasEagerState=!0,y.eagerState=R,tn(R,E))return sl(n,r,y,0),tt===null&&al(),!1}catch{}if(s=Vu(n,r,y,d),s!==null)return Qt(s,n,d),gg(s,r,d),!0}return!1}function kd(n,r,s,d){if(d={lane:2,revertLane:af(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},kl(n)){if(r)throw Error(o(479))}else r=Vu(n,s,d,2),r!==null&&Qt(r,n,2)}function kl(n){var r=n.alternate;return n===Te||r!==null&&r===Te}function mg(n,r){go=bl=!0;var s=n.pending;s===null?r.next=r:(r.next=s.next,s.next=r),n.pending=r}function gg(n,r,s){if((s&4194048)!==0){var d=r.lanes;d&=n.pendingLanes,s|=d,r.lanes=s,Hs(n,s)}}var Ca={readContext:At,use:Nl,useCallback:ut,useContext:ut,useEffect:ut,useImperativeHandle:ut,useLayoutEffect:ut,useInsertionEffect:ut,useMemo:ut,useReducer:ut,useRef:ut,useState:ut,useDebugValue:ut,useDeferredValue:ut,useTransition:ut,useSyncExternalStore:ut,useId:ut,useHostTransitionStatus:ut,useFormState:ut,useActionState:ut,useOptimistic:ut,useMemoCache:ut,useCacheRefresh:ut};Ca.useEffectEvent=ut;var yg={readContext:At,use:Nl,useCallback:function(n,r){return $t().memoizedState=[n,r===void 0?null:r],n},useContext:At,useEffect:eg,useImperativeHandle:function(n,r,s){s=s!=null?s.concat([n]):null,jl(4194308,4,rg.bind(null,r,n),s)},useLayoutEffect:function(n,r){return jl(4194308,4,n,r)},useInsertionEffect:function(n,r){jl(4,2,n,r)},useMemo:function(n,r){var s=$t();r=r===void 0?null:r;var d=n();if(kr){Ot(!0);try{n()}finally{Ot(!1)}}return s.memoizedState=[d,r],d},useReducer:function(n,r,s){var d=$t();if(s!==void 0){var y=s(r);if(kr){Ot(!0);try{s(r)}finally{Ot(!1)}}}else y=r;return d.memoizedState=d.baseState=y,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:y},d.queue=n,n=n.dispatch=XS.bind(null,Te,n),[d.memoizedState,n]},useRef:function(n){var r=$t();return n={current:n},r.memoizedState=n},useState:function(n){n=bd(n);var r=n.queue,s=pg.bind(null,Te,r);return r.dispatch=s,[n.memoizedState,s]},useDebugValue:Nd,useDeferredValue:function(n,r){var s=$t();return Ed(s,n,r)},useTransition:function(){var n=bd(!1);return n=cg.bind(null,Te,n.queue,!0,!1),$t().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,s){var d=Te,y=$t();if($e){if(s===void 0)throw Error(o(407));s=s()}else{if(s=r(),tt===null)throw Error(o(349));(Le&127)!==0||Bm(d,r,s)}y.memoizedState=s;var x={value:s,getSnapshot:r};return y.queue=x,eg(Hm.bind(null,d,x,n),[n]),d.flags|=2048,xo(9,{destroy:void 0},$m.bind(null,d,x,s,r),null),s},useId:function(){var n=$t(),r=tt.identifierPrefix;if($e){var s=Hn,d=$n;s=(d&~(1<<32-Qe(d)-1)).toString(32)+s,r="_"+r+"R_"+s,s=wl++,0<s&&(r+="H"+s.toString(32)),r+="_"}else s=PS++,r="_"+r+"r_"+s.toString(32)+"_";return n.memoizedState=r},useHostTransitionStatus:Cd,useFormState:Qm,useActionState:Qm,useOptimistic:function(n){var r=$t();r.memoizedState=r.baseState=n;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=s,r=kd.bind(null,Te,!0,s),s.dispatch=r,[n,r]},useMemoCache:yd,useCacheRefresh:function(){return $t().memoizedState=YS.bind(null,Te)},useEffectEvent:function(n){var r=$t(),s={impl:n};return r.memoizedState=s,function(){if((Ye&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}},Td={readContext:At,use:Nl,useCallback:ag,useContext:At,useEffect:Sd,useImperativeHandle:og,useInsertionEffect:ng,useLayoutEffect:ig,useMemo:sg,useReducer:El,useRef:Km,useState:function(){return El(ui)},useDebugValue:Nd,useDeferredValue:function(n,r){var s=mt();return lg(s,Je.memoizedState,n,r)},useTransition:function(){var n=El(ui)[0],r=mt().memoizedState;return[typeof n=="boolean"?n:Ea(n),r]},useSyncExternalStore:zm,useId:fg,useHostTransitionStatus:Cd,useFormState:Wm,useActionState:Wm,useOptimistic:function(n,r){var s=mt();return Um(s,Je,n,r)},useMemoCache:yd,useCacheRefresh:hg};Td.useEffectEvent=tg;var xg={readContext:At,use:Nl,useCallback:ag,useContext:At,useEffect:Sd,useImperativeHandle:og,useInsertionEffect:ng,useLayoutEffect:ig,useMemo:sg,useReducer:vd,useRef:Km,useState:function(){return vd(ui)},useDebugValue:Nd,useDeferredValue:function(n,r){var s=mt();return Je===null?Ed(s,n,r):lg(s,Je.memoizedState,n,r)},useTransition:function(){var n=vd(ui)[0],r=mt().memoizedState;return[typeof n=="boolean"?n:Ea(n),r]},useSyncExternalStore:zm,useId:fg,useHostTransitionStatus:Cd,useFormState:Jm,useActionState:Jm,useOptimistic:function(n,r){var s=mt();return Je!==null?Um(s,Je,n,r):(s.baseState=n,[n,s.queue.dispatch])},useMemoCache:yd,useCacheRefresh:hg};xg.useEffectEvent=tg;function Ad(n,r,s,d){r=n.memoizedState,s=s(d,r),s=s==null?r:g({},r,s),n.memoizedState=s,n.lanes===0&&(n.updateQueue.baseState=s)}var Md={enqueueSetState:function(n,r,s){n=n._reactInternals;var d=ln(),y=Bi(d);y.payload=r,s!=null&&(y.callback=s),r=$i(n,y,d),r!==null&&(Qt(r,n,d),ba(r,n,d))},enqueueReplaceState:function(n,r,s){n=n._reactInternals;var d=ln(),y=Bi(d);y.tag=1,y.payload=r,s!=null&&(y.callback=s),r=$i(n,y,d),r!==null&&(Qt(r,n,d),ba(r,n,d))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var s=ln(),d=Bi(s);d.tag=2,r!=null&&(d.callback=r),r=$i(n,d,s),r!==null&&(Qt(r,n,s),ba(r,n,s))}};function vg(n,r,s,d,y,x,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(d,x,E):r.prototype&&r.prototype.isPureReactComponent?!fa(s,d)||!fa(y,x):!0}function bg(n,r,s,d){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(s,d),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(s,d),r.state!==n&&Md.enqueueReplaceState(r,r.state,null)}function Tr(n,r){var s=r;if("ref"in r){s={};for(var d in r)d!=="ref"&&(s[d]=r[d])}if(n=n.defaultProps){s===r&&(s=g({},s));for(var y in n)s[y]===void 0&&(s[y]=n[y])}return s}function wg(n){ol(n)}function Sg(n){console.error(n)}function Ng(n){ol(n)}function Tl(n,r){try{var s=n.onUncaughtError;s(r.value,{componentStack:r.stack})}catch(d){setTimeout(function(){throw d})}}function Eg(n,r,s){try{var d=n.onCaughtError;d(s.value,{componentStack:s.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Dd(n,r,s){return s=Bi(s),s.tag=3,s.payload={element:null},s.callback=function(){Tl(n,r)},s}function jg(n){return n=Bi(n),n.tag=3,n}function Cg(n,r,s,d){var y=s.type.getDerivedStateFromError;if(typeof y=="function"){var x=d.value;n.payload=function(){return y(x)},n.callback=function(){Eg(r,s,d)}}var E=s.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){Eg(r,s,d),typeof y!="function"&&(Fi===null?Fi=new Set([this]):Fi.add(this));var R=d.stack;this.componentDidCatch(d.value,{componentStack:R!==null?R:""})})}function QS(n,r,s,d,y){if(s.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(r=s.alternate,r!==null&&co(r,s,y,!0),s=rn.current,s!==null){switch(s.tag){case 31:case 13:return vn===null?Hl():s.alternate===null&&dt===0&&(dt=3),s.flags&=-257,s.flags|=65536,s.lanes=y,d===ml?s.flags|=16384:(r=s.updateQueue,r===null?s.updateQueue=new Set([d]):r.add(d),nf(n,d,y)),!1;case 22:return s.flags|=65536,d===ml?s.flags|=16384:(r=s.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([d])},s.updateQueue=r):(s=r.retryQueue,s===null?r.retryQueue=new Set([d]):s.add(d)),nf(n,d,y)),!1}throw Error(o(435,s.tag))}return nf(n,d,y),Hl(),!1}if($e)return r=rn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,d!==Wu&&(n=Error(o(422),{cause:d}),ma(mn(n,s)))):(d!==Wu&&(r=Error(o(423),{cause:d}),ma(mn(r,s))),n=n.current.alternate,n.flags|=65536,y&=-y,n.lanes|=y,d=mn(d,s),y=Dd(n.stateNode,d,y),sd(n,y),dt!==4&&(dt=2)),!1;var x=Error(o(520),{cause:d});if(x=mn(x,s),Ra===null?Ra=[x]:Ra.push(x),dt!==4&&(dt=2),r===null)return!0;d=mn(d,s),s=r;do{switch(s.tag){case 3:return s.flags|=65536,n=y&-y,s.lanes|=n,n=Dd(s.stateNode,d,n),sd(s,n),!1;case 1:if(r=s.type,x=s.stateNode,(s.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Fi===null||!Fi.has(x))))return s.flags|=65536,y&=-y,s.lanes|=y,y=jg(y),Cg(y,n,s,d),sd(s,y),!1}s=s.return}while(s!==null);return!1}var _d=Error(o(461)),vt=!1;function Mt(n,r,s,d){r.child=n===null?Mm(r,null,s,d):Cr(r,n.child,s,d)}function kg(n,r,s,d,y){s=s.render;var x=r.ref;if("ref"in d){var E={};for(var R in d)R!=="ref"&&(E[R]=d[R])}else E=d;return Sr(r),d=hd(n,r,s,E,x,y),R=pd(),n!==null&&!vt?(md(n,r,y),di(n,r,y)):($e&&R&&Xu(r),r.flags|=1,Mt(n,r,d,y),r.child)}function Tg(n,r,s,d,y){if(n===null){var x=s.type;return typeof x=="function"&&!Fu(x)&&x.defaultProps===void 0&&s.compare===null?(r.tag=15,r.type=x,Ag(n,r,x,d,y)):(n=cl(s.type,null,d,r,r.mode,y),n.ref=r.ref,n.return=r,r.child=n)}if(x=n.child,!Hd(n,y)){var E=x.memoizedProps;if(s=s.compare,s=s!==null?s:fa,s(E,d)&&n.ref===r.ref)return di(n,r,y)}return r.flags|=1,n=oi(x,d),n.ref=r.ref,n.return=r,r.child=n}function Ag(n,r,s,d,y){if(n!==null){var x=n.memoizedProps;if(fa(x,d)&&n.ref===r.ref)if(vt=!1,r.pendingProps=d=x,Hd(n,y))(n.flags&131072)!==0&&(vt=!0);else return r.lanes=n.lanes,di(n,r,y)}return Od(n,r,s,d,y)}function Mg(n,r,s,d){var y=d.children,x=n!==null?n.memoizedState:null;if(n===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((r.flags&128)!==0){if(x=x!==null?x.baseLanes|s:s,n!==null){for(d=r.child=n.child,y=0;d!==null;)y=y|d.lanes|d.childLanes,d=d.sibling;d=y&~x}else d=0,r.child=null;return Dg(n,r,x,s,d)}if((s&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&hl(r,x!==null?x.cachePool:null),x!==null?Om(r,x):cd(),Rm(r);else return d=r.lanes=536870912,Dg(n,r,x!==null?x.baseLanes|s:s,s,d)}else x!==null?(hl(r,x.cachePool),Om(r,x),Pi(),r.memoizedState=null):(n!==null&&hl(r,null),cd(),Pi());return Mt(n,r,y,s),r.child}function ka(n,r){return n!==null&&n.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Dg(n,r,s,d,y){var x=id();return x=x===null?null:{parent:yt._currentValue,pool:x},r.memoizedState={baseLanes:s,cachePool:x},n!==null&&hl(r,null),cd(),Rm(r),n!==null&&co(n,r,d,!0),r.childLanes=y,null}function Al(n,r){return r=Dl({mode:r.mode,children:r.children},n.mode),r.ref=n.ref,n.child=r,r.return=n,r}function _g(n,r,s){return Cr(r,n.child,null,s),n=Al(r,r.pendingProps),n.flags|=2,on(r),r.memoizedState=null,n}function WS(n,r,s){var d=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,n===null){if($e){if(d.mode==="hidden")return n=Al(r,d),r.lanes=536870912,ka(null,n);if(dd(r),(n=rt)?(n=Vy(n,xn),n=n!==null&&n.data==="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:Oi!==null?{id:$n,overflow:Hn}:null,retryLane:536870912,hydrationErrors:null},s=mm(n),s.return=r,r.child=s,Tt=r,rt=null)):n=null,n===null)throw Ii(r);return r.lanes=536870912,null}return Al(r,d)}var x=n.memoizedState;if(x!==null){var E=x.dehydrated;if(dd(r),y)if(r.flags&256)r.flags&=-257,r=_g(n,r,s);else if(r.memoizedState!==null)r.child=n.child,r.flags|=128,r=null;else throw Error(o(558));else if(vt||co(n,r,s,!1),y=(s&n.childLanes)!==0,vt||y){if(d=tt,d!==null&&(E=Ps(d,s),E!==0&&E!==x.retryLane))throw x.retryLane=E,xr(n,E),Qt(d,n,E),_d;Hl(),r=_g(n,r,s)}else n=x.treeContext,rt=bn(E.nextSibling),Tt=r,$e=!0,Ri=null,xn=!1,n!==null&&xm(r,n),r=Al(r,d),r.flags|=4096;return r}return n=oi(n.child,{mode:d.mode,children:d.children}),n.ref=r.ref,r.child=n,n.return=r,n}function Ml(n,r){var s=r.ref;if(s===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(o(284));(n===null||n.ref!==s)&&(r.flags|=4194816)}}function Od(n,r,s,d,y){return Sr(r),s=hd(n,r,s,d,void 0,y),d=pd(),n!==null&&!vt?(md(n,r,y),di(n,r,y)):($e&&d&&Xu(r),r.flags|=1,Mt(n,r,s,y),r.child)}function Og(n,r,s,d,y,x){return Sr(r),r.updateQueue=null,s=Lm(r,d,s,y),Im(n),d=pd(),n!==null&&!vt?(md(n,r,x),di(n,r,x)):($e&&d&&Xu(r),r.flags|=1,Mt(n,r,s,x),r.child)}function Rg(n,r,s,d,y){if(Sr(r),r.stateNode===null){var x=oo,E=s.contextType;typeof E=="object"&&E!==null&&(x=At(E)),x=new s(d,x),r.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=Md,r.stateNode=x,x._reactInternals=r,x=r.stateNode,x.props=d,x.state=r.memoizedState,x.refs={},od(r),E=s.contextType,x.context=typeof E=="object"&&E!==null?At(E):oo,x.state=r.memoizedState,E=s.getDerivedStateFromProps,typeof E=="function"&&(Ad(r,s,E,d),x.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(E=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),E!==x.state&&Md.enqueueReplaceState(x,x.state,null),Sa(r,d,x,y),wa(),x.state=r.memoizedState),typeof x.componentDidMount=="function"&&(r.flags|=4194308),d=!0}else if(n===null){x=r.stateNode;var R=r.memoizedProps,X=Tr(s,R);x.props=X;var ee=x.context,le=s.contextType;E=oo,typeof le=="object"&&le!==null&&(E=At(le));var ue=s.getDerivedStateFromProps;le=typeof ue=="function"||typeof x.getSnapshotBeforeUpdate=="function",R=r.pendingProps!==R,le||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(R||ee!==E)&&bg(r,x,d,E),zi=!1;var ne=r.memoizedState;x.state=ne,Sa(r,d,x,y),wa(),ee=r.memoizedState,R||ne!==ee||zi?(typeof ue=="function"&&(Ad(r,s,ue,d),ee=r.memoizedState),(X=zi||vg(r,s,X,d,ne,ee,E))?(le||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(r.flags|=4194308)):(typeof x.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=d,r.memoizedState=ee),x.props=d,x.state=ee,x.context=E,d=X):(typeof x.componentDidMount=="function"&&(r.flags|=4194308),d=!1)}else{x=r.stateNode,ad(n,r),E=r.memoizedProps,le=Tr(s,E),x.props=le,ue=r.pendingProps,ne=x.context,ee=s.contextType,X=oo,typeof ee=="object"&&ee!==null&&(X=At(ee)),R=s.getDerivedStateFromProps,(ee=typeof R=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(E!==ue||ne!==X)&&bg(r,x,d,X),zi=!1,ne=r.memoizedState,x.state=ne,Sa(r,d,x,y),wa();var oe=r.memoizedState;E!==ue||ne!==oe||zi||n!==null&&n.dependencies!==null&&dl(n.dependencies)?(typeof R=="function"&&(Ad(r,s,R,d),oe=r.memoizedState),(le=zi||vg(r,s,le,d,ne,oe,X)||n!==null&&n.dependencies!==null&&dl(n.dependencies))?(ee||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(d,oe,X),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(d,oe,X)),typeof x.componentDidUpdate=="function"&&(r.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof x.componentDidUpdate!="function"||E===n.memoizedProps&&ne===n.memoizedState||(r.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&ne===n.memoizedState||(r.flags|=1024),r.memoizedProps=d,r.memoizedState=oe),x.props=d,x.state=oe,x.context=X,d=le):(typeof x.componentDidUpdate!="function"||E===n.memoizedProps&&ne===n.memoizedState||(r.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&ne===n.memoizedState||(r.flags|=1024),d=!1)}return x=d,Ml(n,r),d=(r.flags&128)!==0,x||d?(x=r.stateNode,s=d&&typeof s.getDerivedStateFromError!="function"?null:x.render(),r.flags|=1,n!==null&&d?(r.child=Cr(r,n.child,null,y),r.child=Cr(r,null,s,y)):Mt(n,r,s,y),r.memoizedState=x.state,n=r.child):n=di(n,r,y),n}function Ig(n,r,s,d){return br(),r.flags|=256,Mt(n,r,s,d),r.child}var Rd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Id(n){return{baseLanes:n,cachePool:Em()}}function Ld(n,r,s){return n=n!==null?n.childLanes&~s:0,r&&(n|=sn),n}function Lg(n,r,s){var d=r.pendingProps,y=!1,x=(r.flags&128)!==0,E;if((E=x)||(E=n!==null&&n.memoizedState===null?!1:(pt.current&2)!==0),E&&(y=!0,r.flags&=-129),E=(r.flags&32)!==0,r.flags&=-33,n===null){if($e){if(y?Hi(r):Pi(),(n=rt)?(n=Vy(n,xn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:Oi!==null?{id:$n,overflow:Hn}:null,retryLane:536870912,hydrationErrors:null},s=mm(n),s.return=r,r.child=s,Tt=r,rt=null)):n=null,n===null)throw Ii(r);return vf(n)?r.lanes=32:r.lanes=536870912,null}var R=d.children;return d=d.fallback,y?(Pi(),y=r.mode,R=Dl({mode:"hidden",children:R},y),d=vr(d,y,s,null),R.return=r,d.return=r,R.sibling=d,r.child=R,d=r.child,d.memoizedState=Id(s),d.childLanes=Ld(n,E,s),r.memoizedState=Rd,ka(null,d)):(Hi(r),zd(r,R))}var X=n.memoizedState;if(X!==null&&(R=X.dehydrated,R!==null)){if(x)r.flags&256?(Hi(r),r.flags&=-257,r=Bd(n,r,s)):r.memoizedState!==null?(Pi(),r.child=n.child,r.flags|=128,r=null):(Pi(),R=d.fallback,y=r.mode,d=Dl({mode:"visible",children:d.children},y),R=vr(R,y,s,null),R.flags|=2,d.return=r,R.return=r,d.sibling=R,r.child=d,Cr(r,n.child,null,s),d=r.child,d.memoizedState=Id(s),d.childLanes=Ld(n,E,s),r.memoizedState=Rd,r=ka(null,d));else if(Hi(r),vf(R)){if(E=R.nextSibling&&R.nextSibling.dataset,E)var ee=E.dgst;E=ee,d=Error(o(419)),d.stack="",d.digest=E,ma({value:d,source:null,stack:null}),r=Bd(n,r,s)}else if(vt||co(n,r,s,!1),E=(s&n.childLanes)!==0,vt||E){if(E=tt,E!==null&&(d=Ps(E,s),d!==0&&d!==X.retryLane))throw X.retryLane=d,xr(n,d),Qt(E,n,d),_d;xf(R)||Hl(),r=Bd(n,r,s)}else xf(R)?(r.flags|=192,r.child=n.child,r=null):(n=X.treeContext,rt=bn(R.nextSibling),Tt=r,$e=!0,Ri=null,xn=!1,n!==null&&xm(r,n),r=zd(r,d.children),r.flags|=4096);return r}return y?(Pi(),R=d.fallback,y=r.mode,X=n.child,ee=X.sibling,d=oi(X,{mode:"hidden",children:d.children}),d.subtreeFlags=X.subtreeFlags&65011712,ee!==null?R=oi(ee,R):(R=vr(R,y,s,null),R.flags|=2),R.return=r,d.return=r,d.sibling=R,r.child=d,ka(null,d),d=r.child,R=n.child.memoizedState,R===null?R=Id(s):(y=R.cachePool,y!==null?(X=yt._currentValue,y=y.parent!==X?{parent:X,pool:X}:y):y=Em(),R={baseLanes:R.baseLanes|s,cachePool:y}),d.memoizedState=R,d.childLanes=Ld(n,E,s),r.memoizedState=Rd,ka(n.child,d)):(Hi(r),s=n.child,n=s.sibling,s=oi(s,{mode:"visible",children:d.children}),s.return=r,s.sibling=null,n!==null&&(E=r.deletions,E===null?(r.deletions=[n],r.flags|=16):E.push(n)),r.child=s,r.memoizedState=null,s)}function zd(n,r){return r=Dl({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function Dl(n,r){return n=nn(22,n,null,r),n.lanes=0,n}function Bd(n,r,s){return Cr(r,n.child,null,s),n=zd(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function zg(n,r,s){n.lanes|=r;var d=n.alternate;d!==null&&(d.lanes|=r),Ku(n.return,r,s)}function $d(n,r,s,d,y,x){var E=n.memoizedState;E===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:d,tail:s,tailMode:y,treeForkCount:x}:(E.isBackwards=r,E.rendering=null,E.renderingStartTime=0,E.last=d,E.tail=s,E.tailMode=y,E.treeForkCount=x)}function Bg(n,r,s){var d=r.pendingProps,y=d.revealOrder,x=d.tail;d=d.children;var E=pt.current,R=(E&2)!==0;if(R?(E=E&1|2,r.flags|=128):E&=1,I(pt,E),Mt(n,r,d,s),d=$e?pa:0,!R&&n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&zg(n,s,r);else if(n.tag===19)zg(n,s,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(y){case"forwards":for(s=r.child,y=null;s!==null;)n=s.alternate,n!==null&&vl(n)===null&&(y=s),s=s.sibling;s=y,s===null?(y=r.child,r.child=null):(y=s.sibling,s.sibling=null),$d(r,!1,y,s,x,d);break;case"backwards":case"unstable_legacy-backwards":for(s=null,y=r.child,r.child=null;y!==null;){if(n=y.alternate,n!==null&&vl(n)===null){r.child=y;break}n=y.sibling,y.sibling=s,s=y,y=n}$d(r,!0,s,null,x,d);break;case"together":$d(r,!1,null,null,void 0,d);break;default:r.memoizedState=null}return r.child}function di(n,r,s){if(n!==null&&(r.dependencies=n.dependencies),Vi|=r.lanes,(s&r.childLanes)===0)if(n!==null){if(co(n,r,s,!1),(s&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(o(153));if(r.child!==null){for(n=r.child,s=oi(n,n.pendingProps),r.child=s,s.return=r;n.sibling!==null;)n=n.sibling,s=s.sibling=oi(n,n.pendingProps),s.return=r;s.sibling=null}return r.child}function Hd(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&dl(n)))}function ZS(n,r,s){switch(r.tag){case 3:ae(r,r.stateNode.containerInfo),Li(r,yt,n.memoizedState.cache),br();break;case 27:case 5:xe(r);break;case 4:ae(r,r.stateNode.containerInfo);break;case 10:Li(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,dd(r),null;break;case 13:var d=r.memoizedState;if(d!==null)return d.dehydrated!==null?(Hi(r),r.flags|=128,null):(s&r.child.childLanes)!==0?Lg(n,r,s):(Hi(r),n=di(n,r,s),n!==null?n.sibling:null);Hi(r);break;case 19:var y=(n.flags&128)!==0;if(d=(s&r.childLanes)!==0,d||(co(n,r,s,!1),d=(s&r.childLanes)!==0),y){if(d)return Bg(n,r,s);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),I(pt,pt.current),d)break;return null;case 22:return r.lanes=0,Mg(n,r,s,r.pendingProps);case 24:Li(r,yt,n.memoizedState.cache)}return di(n,r,s)}function $g(n,r,s){if(n!==null)if(n.memoizedProps!==r.pendingProps)vt=!0;else{if(!Hd(n,s)&&(r.flags&128)===0)return vt=!1,ZS(n,r,s);vt=(n.flags&131072)!==0}else vt=!1,$e&&(r.flags&1048576)!==0&&ym(r,pa,r.index);switch(r.lanes=0,r.tag){case 16:e:{var d=r.pendingProps;if(n=Er(r.elementType),r.type=n,typeof n=="function")Fu(n)?(d=Tr(n,d),r.tag=1,r=Rg(null,r,n,d,s)):(r.tag=0,r=Od(null,r,n,d,s));else{if(n!=null){var y=n.$$typeof;if(y===_){r.tag=11,r=kg(null,r,n,d,s);break e}else if(y===$){r.tag=14,r=Tg(null,r,n,d,s);break e}}throw r=M(n)||n,Error(o(306,r,""))}}return r;case 0:return Od(n,r,r.type,r.pendingProps,s);case 1:return d=r.type,y=Tr(d,r.pendingProps),Rg(n,r,d,y,s);case 3:e:{if(ae(r,r.stateNode.containerInfo),n===null)throw Error(o(387));d=r.pendingProps;var x=r.memoizedState;y=x.element,ad(n,r),Sa(r,d,null,s);var E=r.memoizedState;if(d=E.cache,Li(r,yt,d),d!==x.cache&&ed(r,[yt],s,!0),wa(),d=E.element,x.isDehydrated)if(x={element:d,isDehydrated:!1,cache:E.cache},r.updateQueue.baseState=x,r.memoizedState=x,r.flags&256){r=Ig(n,r,d,s);break e}else if(d!==y){y=mn(Error(o(424)),r),ma(y),r=Ig(n,r,d,s);break e}else{switch(n=r.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(rt=bn(n.firstChild),Tt=r,$e=!0,Ri=null,xn=!0,s=Mm(r,null,d,s),r.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(br(),d===y){r=di(n,r,s);break e}Mt(n,r,d,s)}r=r.child}return r;case 26:return Ml(n,r),n===null?(s=Wy(r.type,null,r.pendingProps,null))?r.memoizedState=s:$e||(s=r.type,n=r.pendingProps,d=Yl(re.current).createElement(s),d[Et]=r,d[Rt]=n,Dt(d,s,n),gt(d),r.stateNode=d):r.memoizedState=Wy(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return xe(r),n===null&&$e&&(d=r.stateNode=Yy(r.type,r.pendingProps,re.current),Tt=r,xn=!0,y=rt,Qi(r.type)?(bf=y,rt=bn(d.firstChild)):rt=y),Mt(n,r,r.pendingProps.children,s),Ml(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&$e&&((y=d=rt)&&(d=kN(d,r.type,r.pendingProps,xn),d!==null?(r.stateNode=d,Tt=r,rt=bn(d.firstChild),xn=!1,y=!0):y=!1),y||Ii(r)),xe(r),y=r.type,x=r.pendingProps,E=n!==null?n.memoizedProps:null,d=x.children,mf(y,x)?d=null:E!==null&&mf(y,E)&&(r.flags|=32),r.memoizedState!==null&&(y=hd(n,r,qS,null,null,s),qa._currentValue=y),Ml(n,r),Mt(n,r,d,s),r.child;case 6:return n===null&&$e&&((n=s=rt)&&(s=TN(s,r.pendingProps,xn),s!==null?(r.stateNode=s,Tt=r,rt=null,n=!0):n=!1),n||Ii(r)),null;case 13:return Lg(n,r,s);case 4:return ae(r,r.stateNode.containerInfo),d=r.pendingProps,n===null?r.child=Cr(r,null,d,s):Mt(n,r,d,s),r.child;case 11:return kg(n,r,r.type,r.pendingProps,s);case 7:return Mt(n,r,r.pendingProps,s),r.child;case 8:return Mt(n,r,r.pendingProps.children,s),r.child;case 12:return Mt(n,r,r.pendingProps.children,s),r.child;case 10:return d=r.pendingProps,Li(r,r.type,d.value),Mt(n,r,d.children,s),r.child;case 9:return y=r.type._context,d=r.pendingProps.children,Sr(r),y=At(y),d=d(y),r.flags|=1,Mt(n,r,d,s),r.child;case 14:return Tg(n,r,r.type,r.pendingProps,s);case 15:return Ag(n,r,r.type,r.pendingProps,s);case 19:return Bg(n,r,s);case 31:return WS(n,r,s);case 22:return Mg(n,r,s,r.pendingProps);case 24:return Sr(r),d=At(yt),n===null?(y=id(),y===null&&(y=tt,x=td(),y.pooledCache=x,x.refCount++,x!==null&&(y.pooledCacheLanes|=s),y=x),r.memoizedState={parent:d,cache:y},od(r),Li(r,yt,y)):((n.lanes&s)!==0&&(ad(n,r),Sa(r,null,null,s),wa()),y=n.memoizedState,x=r.memoizedState,y.parent!==d?(y={parent:d,cache:d},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),Li(r,yt,d)):(d=x.cache,Li(r,yt,d),d!==y.cache&&ed(r,[yt],s,!0))),Mt(n,r,r.pendingProps.children,s),r.child;case 29:throw r.pendingProps}throw Error(o(156,r.tag))}function fi(n){n.flags|=4}function Pd(n,r,s,d,y){if((r=(n.mode&32)!==0)&&(r=!1),r){if(n.flags|=16777216,(y&335544128)===y)if(n.stateNode.complete)n.flags|=8192;else if(fy())n.flags|=8192;else throw jr=ml,rd}else n.flags&=-16777217}function Hg(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!tx(r))if(fy())n.flags|=8192;else throw jr=ml,rd}function _l(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?Bs():536870912,n.lanes|=r,So|=r)}function Ta(n,r){if(!$e)switch(n.tailMode){case"hidden":r=n.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?n.tail=null:s.sibling=null;break;case"collapsed":s=n.tail;for(var d=null;s!==null;)s.alternate!==null&&(d=s),s=s.sibling;d===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:d.sibling=null}}function ot(n){var r=n.alternate!==null&&n.alternate.child===n.child,s=0,d=0;if(r)for(var y=n.child;y!==null;)s|=y.lanes|y.childLanes,d|=y.subtreeFlags&65011712,d|=y.flags&65011712,y.return=n,y=y.sibling;else for(y=n.child;y!==null;)s|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=n,y=y.sibling;return n.subtreeFlags|=d,n.childLanes=s,r}function JS(n,r,s){var d=r.pendingProps;switch(Qu(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(r),null;case 1:return ot(r),null;case 3:return s=r.stateNode,d=null,n!==null&&(d=n.memoizedState.cache),r.memoizedState.cache!==d&&(r.flags|=2048),li(yt),fe(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(n===null||n.child===null)&&(lo(r)?fi(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Zu())),ot(r),null;case 26:var y=r.type,x=r.memoizedState;return n===null?(fi(r),x!==null?(ot(r),Hg(r,x)):(ot(r),Pd(r,y,null,d,s))):x?x!==n.memoizedState?(fi(r),ot(r),Hg(r,x)):(ot(r),r.flags&=-16777217):(n=n.memoizedProps,n!==d&&fi(r),ot(r),Pd(r,y,n,d,s)),null;case 27:if(je(r),s=re.current,y=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==d&&fi(r);else{if(!d){if(r.stateNode===null)throw Error(o(166));return ot(r),null}n=ie.current,lo(r)?vm(r):(n=Yy(y,d,s),r.stateNode=n,fi(r))}return ot(r),null;case 5:if(je(r),y=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==d&&fi(r);else{if(!d){if(r.stateNode===null)throw Error(o(166));return ot(r),null}if(x=ie.current,lo(r))vm(r);else{var E=Yl(re.current);switch(x){case 1:x=E.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:x=E.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":x=E.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":x=E.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":x=E.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof d.is=="string"?E.createElement("select",{is:d.is}):E.createElement("select"),d.multiple?x.multiple=!0:d.size&&(x.size=d.size);break;default:x=typeof d.is=="string"?E.createElement(y,{is:d.is}):E.createElement(y)}}x[Et]=r,x[Rt]=d;e:for(E=r.child;E!==null;){if(E.tag===5||E.tag===6)x.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===r)break e;for(;E.sibling===null;){if(E.return===null||E.return===r)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}r.stateNode=x;e:switch(Dt(x,y,d),y){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&fi(r)}}return ot(r),Pd(r,r.type,n===null?null:n.memoizedProps,r.pendingProps,s),null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==d&&fi(r);else{if(typeof d!="string"&&r.stateNode===null)throw Error(o(166));if(n=re.current,lo(r)){if(n=r.stateNode,s=r.memoizedProps,d=null,y=Tt,y!==null)switch(y.tag){case 27:case 5:d=y.memoizedProps}n[Et]=r,n=!!(n.nodeValue===s||d!==null&&d.suppressHydrationWarning===!0||Ly(n.nodeValue,s)),n||Ii(r,!0)}else n=Yl(n).createTextNode(d),n[Et]=r,r.stateNode=n}return ot(r),null;case 31:if(s=r.memoizedState,n===null||n.memoizedState!==null){if(d=lo(r),s!==null){if(n===null){if(!d)throw Error(o(318));if(n=r.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(557));n[Et]=r}else br(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ot(r),n=!1}else s=Zu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=s),n=!0;if(!n)return r.flags&256?(on(r),r):(on(r),null);if((r.flags&128)!==0)throw Error(o(558))}return ot(r),null;case 13:if(d=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(y=lo(r),d!==null&&d.dehydrated!==null){if(n===null){if(!y)throw Error(o(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(o(317));y[Et]=r}else br(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ot(r),y=!1}else y=Zu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(on(r),r):(on(r),null)}return on(r),(r.flags&128)!==0?(r.lanes=s,r):(s=d!==null,n=n!==null&&n.memoizedState!==null,s&&(d=r.child,y=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(y=d.alternate.memoizedState.cachePool.pool),x=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(x=d.memoizedState.cachePool.pool),x!==y&&(d.flags|=2048)),s!==n&&s&&(r.child.flags|=8192),_l(r,r.updateQueue),ot(r),null);case 4:return fe(),n===null&&uf(r.stateNode.containerInfo),ot(r),null;case 10:return li(r.type),ot(r),null;case 19:if(F(pt),d=r.memoizedState,d===null)return ot(r),null;if(y=(r.flags&128)!==0,x=d.rendering,x===null)if(y)Ta(d,!1);else{if(dt!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(x=vl(n),x!==null){for(r.flags|=128,Ta(d,!1),n=x.updateQueue,r.updateQueue=n,_l(r,n),r.subtreeFlags=0,n=s,s=r.child;s!==null;)pm(s,n),s=s.sibling;return I(pt,pt.current&1|2),$e&&ai(r,d.treeForkCount),r.child}n=n.sibling}d.tail!==null&&Nt()>zl&&(r.flags|=128,y=!0,Ta(d,!1),r.lanes=4194304)}else{if(!y)if(n=vl(x),n!==null){if(r.flags|=128,y=!0,n=n.updateQueue,r.updateQueue=n,_l(r,n),Ta(d,!0),d.tail===null&&d.tailMode==="hidden"&&!x.alternate&&!$e)return ot(r),null}else 2*Nt()-d.renderingStartTime>zl&&s!==536870912&&(r.flags|=128,y=!0,Ta(d,!1),r.lanes=4194304);d.isBackwards?(x.sibling=r.child,r.child=x):(n=d.last,n!==null?n.sibling=x:r.child=x,d.last=x)}return d.tail!==null?(n=d.tail,d.rendering=n,d.tail=n.sibling,d.renderingStartTime=Nt(),n.sibling=null,s=pt.current,I(pt,y?s&1|2:s&1),$e&&ai(r,d.treeForkCount),n):(ot(r),null);case 22:case 23:return on(r),ud(),d=r.memoizedState!==null,n!==null?n.memoizedState!==null!==d&&(r.flags|=8192):d&&(r.flags|=8192),d?(s&536870912)!==0&&(r.flags&128)===0&&(ot(r),r.subtreeFlags&6&&(r.flags|=8192)):ot(r),s=r.updateQueue,s!==null&&_l(r,s.retryQueue),s=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(s=n.memoizedState.cachePool.pool),d=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(d=r.memoizedState.cachePool.pool),d!==s&&(r.flags|=2048),n!==null&&F(Nr),null;case 24:return s=null,n!==null&&(s=n.memoizedState.cache),r.memoizedState.cache!==s&&(r.flags|=2048),li(yt),ot(r),null;case 25:return null;case 30:return null}throw Error(o(156,r.tag))}function KS(n,r){switch(Qu(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return li(yt),fe(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return je(r),null;case 31:if(r.memoizedState!==null){if(on(r),r.alternate===null)throw Error(o(340));br()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 13:if(on(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(o(340));br()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return F(pt),null;case 4:return fe(),null;case 10:return li(r.type),null;case 22:case 23:return on(r),ud(),n!==null&&F(Nr),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return li(yt),null;case 25:return null;default:return null}}function Pg(n,r){switch(Qu(r),r.tag){case 3:li(yt),fe();break;case 26:case 27:case 5:je(r);break;case 4:fe();break;case 31:r.memoizedState!==null&&on(r);break;case 13:on(r);break;case 19:F(pt);break;case 10:li(r.type);break;case 22:case 23:on(r),ud(),n!==null&&F(Nr);break;case 24:li(yt)}}function Aa(n,r){try{var s=r.updateQueue,d=s!==null?s.lastEffect:null;if(d!==null){var y=d.next;s=y;do{if((s.tag&n)===n){d=void 0;var x=s.create,E=s.inst;d=x(),E.destroy=d}s=s.next}while(s!==y)}}catch(R){Ze(r,r.return,R)}}function qi(n,r,s){try{var d=r.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var x=y.next;d=x;do{if((d.tag&n)===n){var E=d.inst,R=E.destroy;if(R!==void 0){E.destroy=void 0,y=r;var X=s,ee=R;try{ee()}catch(le){Ze(y,X,le)}}}d=d.next}while(d!==x)}}catch(le){Ze(r,r.return,le)}}function qg(n){var r=n.updateQueue;if(r!==null){var s=n.stateNode;try{_m(r,s)}catch(d){Ze(n,n.return,d)}}}function Ug(n,r,s){s.props=Tr(n.type,n.memoizedProps),s.state=n.memoizedState;try{s.componentWillUnmount()}catch(d){Ze(n,r,d)}}function Ma(n,r){try{var s=n.ref;if(s!==null){switch(n.tag){case 26:case 27:case 5:var d=n.stateNode;break;case 30:d=n.stateNode;break;default:d=n.stateNode}typeof s=="function"?n.refCleanup=s(d):s.current=d}}catch(y){Ze(n,r,y)}}function Pn(n,r){var s=n.ref,d=n.refCleanup;if(s!==null)if(typeof d=="function")try{d()}catch(y){Ze(n,r,y)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(y){Ze(n,r,y)}else s.current=null}function Vg(n){var r=n.type,s=n.memoizedProps,d=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":s.autoFocus&&d.focus();break e;case"img":s.src?d.src=s.src:s.srcSet&&(d.srcset=s.srcSet)}}catch(y){Ze(n,n.return,y)}}function qd(n,r,s){try{var d=n.stateNode;wN(d,n.type,s,r),d[Rt]=r}catch(y){Ze(n,n.return,y)}}function Fg(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Qi(n.type)||n.tag===4}function Ud(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Fg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Qi(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Vd(n,r,s){var d=n.tag;if(d===5||d===6)n=n.stateNode,r?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(n,r):(r=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,r.appendChild(n),s=s._reactRootContainer,s!=null||r.onclick!==null||(r.onclick=ii));else if(d!==4&&(d===27&&Qi(n.type)&&(s=n.stateNode,r=null),n=n.child,n!==null))for(Vd(n,r,s),n=n.sibling;n!==null;)Vd(n,r,s),n=n.sibling}function Ol(n,r,s){var d=n.tag;if(d===5||d===6)n=n.stateNode,r?s.insertBefore(n,r):s.appendChild(n);else if(d!==4&&(d===27&&Qi(n.type)&&(s=n.stateNode),n=n.child,n!==null))for(Ol(n,r,s),n=n.sibling;n!==null;)Ol(n,r,s),n=n.sibling}function Gg(n){var r=n.stateNode,s=n.memoizedProps;try{for(var d=n.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);Dt(r,d,s),r[Et]=n,r[Rt]=s}catch(x){Ze(n,n.return,x)}}var hi=!1,bt=!1,Fd=!1,Yg=typeof WeakSet=="function"?WeakSet:Set,Ct=null;function eN(n,r){if(n=n.containerInfo,hf=ec,n=om(n),Bu(n)){if("selectionStart"in n)var s={start:n.selectionStart,end:n.selectionEnd};else e:{s=(s=n.ownerDocument)&&s.defaultView||window;var d=s.getSelection&&s.getSelection();if(d&&d.rangeCount!==0){s=d.anchorNode;var y=d.anchorOffset,x=d.focusNode;d=d.focusOffset;try{s.nodeType,x.nodeType}catch{s=null;break e}var E=0,R=-1,X=-1,ee=0,le=0,ue=n,ne=null;t:for(;;){for(var oe;ue!==s||y!==0&&ue.nodeType!==3||(R=E+y),ue!==x||d!==0&&ue.nodeType!==3||(X=E+d),ue.nodeType===3&&(E+=ue.nodeValue.length),(oe=ue.firstChild)!==null;)ne=ue,ue=oe;for(;;){if(ue===n)break t;if(ne===s&&++ee===y&&(R=E),ne===x&&++le===d&&(X=E),(oe=ue.nextSibling)!==null)break;ue=ne,ne=ue.parentNode}ue=oe}s=R===-1||X===-1?null:{start:R,end:X}}else s=null}s=s||{start:0,end:0}}else s=null;for(pf={focusedElem:n,selectionRange:s},ec=!1,Ct=r;Ct!==null;)if(r=Ct,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,Ct=n;else for(;Ct!==null;){switch(r=Ct,x=r.alternate,n=r.flags,r.tag){case 0:if((n&4)!==0&&(n=r.updateQueue,n=n!==null?n.events:null,n!==null))for(s=0;s<n.length;s++)y=n[s],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&x!==null){n=void 0,s=r,y=x.memoizedProps,x=x.memoizedState,d=s.stateNode;try{var me=Tr(s.type,y);n=d.getSnapshotBeforeUpdate(me,x),d.__reactInternalSnapshotBeforeUpdate=n}catch(Ne){Ze(s,s.return,Ne)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,s=n.nodeType,s===9)yf(n);else if(s===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":yf(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(o(163))}if(n=r.sibling,n!==null){n.return=r.return,Ct=n;break}Ct=r.return}}function Xg(n,r,s){var d=s.flags;switch(s.tag){case 0:case 11:case 15:mi(n,s),d&4&&Aa(5,s);break;case 1:if(mi(n,s),d&4)if(n=s.stateNode,r===null)try{n.componentDidMount()}catch(E){Ze(s,s.return,E)}else{var y=Tr(s.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(y,r,n.__reactInternalSnapshotBeforeUpdate)}catch(E){Ze(s,s.return,E)}}d&64&&qg(s),d&512&&Ma(s,s.return);break;case 3:if(mi(n,s),d&64&&(n=s.updateQueue,n!==null)){if(r=null,s.child!==null)switch(s.child.tag){case 27:case 5:r=s.child.stateNode;break;case 1:r=s.child.stateNode}try{_m(n,r)}catch(E){Ze(s,s.return,E)}}break;case 27:r===null&&d&4&&Gg(s);case 26:case 5:mi(n,s),r===null&&d&4&&Vg(s),d&512&&Ma(s,s.return);break;case 12:mi(n,s);break;case 31:mi(n,s),d&4&&Zg(n,s);break;case 13:mi(n,s),d&4&&Jg(n,s),d&64&&(n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(s=cN.bind(null,s),AN(n,s))));break;case 22:if(d=s.memoizedState!==null||hi,!d){r=r!==null&&r.memoizedState!==null||bt,y=hi;var x=bt;hi=d,(bt=r)&&!x?gi(n,s,(s.subtreeFlags&8772)!==0):mi(n,s),hi=y,bt=x}break;case 30:break;default:mi(n,s)}}function Qg(n){var r=n.alternate;r!==null&&(n.alternate=null,Qg(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&na(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ct=null,Ft=!1;function pi(n,r,s){for(s=s.child;s!==null;)Wg(n,r,s),s=s.sibling}function Wg(n,r,s){if(ht&&typeof ht.onCommitFiberUnmount=="function")try{ht.onCommitFiberUnmount(kt,s)}catch{}switch(s.tag){case 26:bt||Pn(s,r),pi(n,r,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:bt||Pn(s,r);var d=ct,y=Ft;Qi(s.type)&&(ct=s.stateNode,Ft=!1),pi(n,r,s),$a(s.stateNode),ct=d,Ft=y;break;case 5:bt||Pn(s,r);case 6:if(d=ct,y=Ft,ct=null,pi(n,r,s),ct=d,Ft=y,ct!==null)if(Ft)try{(ct.nodeType===9?ct.body:ct.nodeName==="HTML"?ct.ownerDocument.body:ct).removeChild(s.stateNode)}catch(x){Ze(s,r,x)}else try{ct.removeChild(s.stateNode)}catch(x){Ze(s,r,x)}break;case 18:ct!==null&&(Ft?(n=ct,qy(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,s.stateNode),Mo(n)):qy(ct,s.stateNode));break;case 4:d=ct,y=Ft,ct=s.stateNode.containerInfo,Ft=!0,pi(n,r,s),ct=d,Ft=y;break;case 0:case 11:case 14:case 15:qi(2,s,r),bt||qi(4,s,r),pi(n,r,s);break;case 1:bt||(Pn(s,r),d=s.stateNode,typeof d.componentWillUnmount=="function"&&Ug(s,r,d)),pi(n,r,s);break;case 21:pi(n,r,s);break;case 22:bt=(d=bt)||s.memoizedState!==null,pi(n,r,s),bt=d;break;default:pi(n,r,s)}}function Zg(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Mo(n)}catch(s){Ze(r,r.return,s)}}}function Jg(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Mo(n)}catch(s){Ze(r,r.return,s)}}function tN(n){switch(n.tag){case 31:case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new Yg),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new Yg),r;default:throw Error(o(435,n.tag))}}function Rl(n,r){var s=tN(n);r.forEach(function(d){if(!s.has(d)){s.add(d);var y=uN.bind(null,n,d);d.then(y,y)}})}function Gt(n,r){var s=r.deletions;if(s!==null)for(var d=0;d<s.length;d++){var y=s[d],x=n,E=r,R=E;e:for(;R!==null;){switch(R.tag){case 27:if(Qi(R.type)){ct=R.stateNode,Ft=!1;break e}break;case 5:ct=R.stateNode,Ft=!1;break e;case 3:case 4:ct=R.stateNode.containerInfo,Ft=!0;break e}R=R.return}if(ct===null)throw Error(o(160));Wg(x,E,y),ct=null,Ft=!1,x=y.alternate,x!==null&&(x.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Kg(r,n),r=r.sibling}var Tn=null;function Kg(n,r){var s=n.alternate,d=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Gt(r,n),Yt(n),d&4&&(qi(3,n,n.return),Aa(3,n),qi(5,n,n.return));break;case 1:Gt(r,n),Yt(n),d&512&&(bt||s===null||Pn(s,s.return)),d&64&&hi&&(n=n.updateQueue,n!==null&&(d=n.callbacks,d!==null&&(s=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=s===null?d:s.concat(d))));break;case 26:var y=Tn;if(Gt(r,n),Yt(n),d&512&&(bt||s===null||Pn(s,s.return)),d&4){var x=s!==null?s.memoizedState:null;if(d=n.memoizedState,s===null)if(d===null)if(n.stateNode===null){e:{d=n.type,s=n.memoizedProps,y=y.ownerDocument||y;t:switch(d){case"title":x=y.getElementsByTagName("title")[0],(!x||x[fr]||x[Et]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=y.createElement(d),y.head.insertBefore(x,y.querySelector("head > title"))),Dt(x,d,s),x[Et]=n,gt(x),d=x;break e;case"link":var E=Ky("link","href",y).get(d+(s.href||""));if(E){for(var R=0;R<E.length;R++)if(x=E[R],x.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&x.getAttribute("rel")===(s.rel==null?null:s.rel)&&x.getAttribute("title")===(s.title==null?null:s.title)&&x.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){E.splice(R,1);break t}}x=y.createElement(d),Dt(x,d,s),y.head.appendChild(x);break;case"meta":if(E=Ky("meta","content",y).get(d+(s.content||""))){for(R=0;R<E.length;R++)if(x=E[R],x.getAttribute("content")===(s.content==null?null:""+s.content)&&x.getAttribute("name")===(s.name==null?null:s.name)&&x.getAttribute("property")===(s.property==null?null:s.property)&&x.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&x.getAttribute("charset")===(s.charSet==null?null:s.charSet)){E.splice(R,1);break t}}x=y.createElement(d),Dt(x,d,s),y.head.appendChild(x);break;default:throw Error(o(468,d))}x[Et]=n,gt(x),d=x}n.stateNode=d}else ex(y,n.type,n.stateNode);else n.stateNode=Jy(y,d,n.memoizedProps);else x!==d?(x===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):x.count--,d===null?ex(y,n.type,n.stateNode):Jy(y,d,n.memoizedProps)):d===null&&n.stateNode!==null&&qd(n,n.memoizedProps,s.memoizedProps)}break;case 27:Gt(r,n),Yt(n),d&512&&(bt||s===null||Pn(s,s.return)),s!==null&&d&4&&qd(n,n.memoizedProps,s.memoizedProps);break;case 5:if(Gt(r,n),Yt(n),d&512&&(bt||s===null||Pn(s,s.return)),n.flags&32){y=n.stateNode;try{Jr(y,"")}catch(me){Ze(n,n.return,me)}}d&4&&n.stateNode!=null&&(y=n.memoizedProps,qd(n,y,s!==null?s.memoizedProps:y)),d&1024&&(Fd=!0);break;case 6:if(Gt(r,n),Yt(n),d&4){if(n.stateNode===null)throw Error(o(162));d=n.memoizedProps,s=n.stateNode;try{s.nodeValue=d}catch(me){Ze(n,n.return,me)}}break;case 3:if(Wl=null,y=Tn,Tn=Xl(r.containerInfo),Gt(r,n),Tn=y,Yt(n),d&4&&s!==null&&s.memoizedState.isDehydrated)try{Mo(r.containerInfo)}catch(me){Ze(n,n.return,me)}Fd&&(Fd=!1,ey(n));break;case 4:d=Tn,Tn=Xl(n.stateNode.containerInfo),Gt(r,n),Yt(n),Tn=d;break;case 12:Gt(r,n),Yt(n);break;case 31:Gt(r,n),Yt(n),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,Rl(n,d)));break;case 13:Gt(r,n),Yt(n),n.child.flags&8192&&n.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Ll=Nt()),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,Rl(n,d)));break;case 22:y=n.memoizedState!==null;var X=s!==null&&s.memoizedState!==null,ee=hi,le=bt;if(hi=ee||y,bt=le||X,Gt(r,n),bt=le,hi=ee,Yt(n),d&8192)e:for(r=n.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(s===null||X||hi||bt||Ar(n)),s=null,r=n;;){if(r.tag===5||r.tag===26){if(s===null){X=s=r;try{if(x=X.stateNode,y)E=x.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{R=X.stateNode;var ue=X.memoizedProps.style,ne=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;R.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(me){Ze(X,X.return,me)}}}else if(r.tag===6){if(s===null){X=r;try{X.stateNode.nodeValue=y?"":X.memoizedProps}catch(me){Ze(X,X.return,me)}}}else if(r.tag===18){if(s===null){X=r;try{var oe=X.stateNode;y?Uy(oe,!0):Uy(X.stateNode,!1)}catch(me){Ze(X,X.return,me)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;s===r&&(s=null),r=r.return}s===r&&(s=null),r.sibling.return=r.return,r=r.sibling}d&4&&(d=n.updateQueue,d!==null&&(s=d.retryQueue,s!==null&&(d.retryQueue=null,Rl(n,s))));break;case 19:Gt(r,n),Yt(n),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,Rl(n,d)));break;case 30:break;case 21:break;default:Gt(r,n),Yt(n)}}function Yt(n){var r=n.flags;if(r&2){try{for(var s,d=n.return;d!==null;){if(Fg(d)){s=d;break}d=d.return}if(s==null)throw Error(o(160));switch(s.tag){case 27:var y=s.stateNode,x=Ud(n);Ol(n,x,y);break;case 5:var E=s.stateNode;s.flags&32&&(Jr(E,""),s.flags&=-33);var R=Ud(n);Ol(n,R,E);break;case 3:case 4:var X=s.stateNode.containerInfo,ee=Ud(n);Vd(n,ee,X);break;default:throw Error(o(161))}}catch(le){Ze(n,n.return,le)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function ey(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;ey(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function mi(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Xg(n,r.alternate,r),r=r.sibling}function Ar(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:qi(4,r,r.return),Ar(r);break;case 1:Pn(r,r.return);var s=r.stateNode;typeof s.componentWillUnmount=="function"&&Ug(r,r.return,s),Ar(r);break;case 27:$a(r.stateNode);case 26:case 5:Pn(r,r.return),Ar(r);break;case 22:r.memoizedState===null&&Ar(r);break;case 30:Ar(r);break;default:Ar(r)}n=n.sibling}}function gi(n,r,s){for(s=s&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var d=r.alternate,y=n,x=r,E=x.flags;switch(x.tag){case 0:case 11:case 15:gi(y,x,s),Aa(4,x);break;case 1:if(gi(y,x,s),d=x,y=d.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(ee){Ze(d,d.return,ee)}if(d=x,y=d.updateQueue,y!==null){var R=d.stateNode;try{var X=y.shared.hiddenCallbacks;if(X!==null)for(y.shared.hiddenCallbacks=null,y=0;y<X.length;y++)Dm(X[y],R)}catch(ee){Ze(d,d.return,ee)}}s&&E&64&&qg(x),Ma(x,x.return);break;case 27:Gg(x);case 26:case 5:gi(y,x,s),s&&d===null&&E&4&&Vg(x),Ma(x,x.return);break;case 12:gi(y,x,s);break;case 31:gi(y,x,s),s&&E&4&&Zg(y,x);break;case 13:gi(y,x,s),s&&E&4&&Jg(y,x);break;case 22:x.memoizedState===null&&gi(y,x,s),Ma(x,x.return);break;case 30:break;default:gi(y,x,s)}r=r.sibling}}function Gd(n,r){var s=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(s=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==s&&(n!=null&&n.refCount++,s!=null&&ga(s))}function Yd(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&ga(n))}function An(n,r,s,d){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)ty(n,r,s,d),r=r.sibling}function ty(n,r,s,d){var y=r.flags;switch(r.tag){case 0:case 11:case 15:An(n,r,s,d),y&2048&&Aa(9,r);break;case 1:An(n,r,s,d);break;case 3:An(n,r,s,d),y&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&ga(n)));break;case 12:if(y&2048){An(n,r,s,d),n=r.stateNode;try{var x=r.memoizedProps,E=x.id,R=x.onPostCommit;typeof R=="function"&&R(E,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(X){Ze(r,r.return,X)}}else An(n,r,s,d);break;case 31:An(n,r,s,d);break;case 13:An(n,r,s,d);break;case 23:break;case 22:x=r.stateNode,E=r.alternate,r.memoizedState!==null?x._visibility&2?An(n,r,s,d):Da(n,r):x._visibility&2?An(n,r,s,d):(x._visibility|=2,vo(n,r,s,d,(r.subtreeFlags&10256)!==0||!1)),y&2048&&Gd(E,r);break;case 24:An(n,r,s,d),y&2048&&Yd(r.alternate,r);break;default:An(n,r,s,d)}}function vo(n,r,s,d,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var x=n,E=r,R=s,X=d,ee=E.flags;switch(E.tag){case 0:case 11:case 15:vo(x,E,R,X,y),Aa(8,E);break;case 23:break;case 22:var le=E.stateNode;E.memoizedState!==null?le._visibility&2?vo(x,E,R,X,y):Da(x,E):(le._visibility|=2,vo(x,E,R,X,y)),y&&ee&2048&&Gd(E.alternate,E);break;case 24:vo(x,E,R,X,y),y&&ee&2048&&Yd(E.alternate,E);break;default:vo(x,E,R,X,y)}r=r.sibling}}function Da(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var s=n,d=r,y=d.flags;switch(d.tag){case 22:Da(s,d),y&2048&&Gd(d.alternate,d);break;case 24:Da(s,d),y&2048&&Yd(d.alternate,d);break;default:Da(s,d)}r=r.sibling}}var _a=8192;function bo(n,r,s){if(n.subtreeFlags&_a)for(n=n.child;n!==null;)ny(n,r,s),n=n.sibling}function ny(n,r,s){switch(n.tag){case 26:bo(n,r,s),n.flags&_a&&n.memoizedState!==null&&PN(s,Tn,n.memoizedState,n.memoizedProps);break;case 5:bo(n,r,s);break;case 3:case 4:var d=Tn;Tn=Xl(n.stateNode.containerInfo),bo(n,r,s),Tn=d;break;case 22:n.memoizedState===null&&(d=n.alternate,d!==null&&d.memoizedState!==null?(d=_a,_a=16777216,bo(n,r,s),_a=d):bo(n,r,s));break;default:bo(n,r,s)}}function iy(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function Oa(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var s=0;s<r.length;s++){var d=r[s];Ct=d,oy(d,n)}iy(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)ry(n),n=n.sibling}function ry(n){switch(n.tag){case 0:case 11:case 15:Oa(n),n.flags&2048&&qi(9,n,n.return);break;case 3:Oa(n);break;case 12:Oa(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,Il(n)):Oa(n);break;default:Oa(n)}}function Il(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var s=0;s<r.length;s++){var d=r[s];Ct=d,oy(d,n)}iy(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:qi(8,r,r.return),Il(r);break;case 22:s=r.stateNode,s._visibility&2&&(s._visibility&=-3,Il(r));break;default:Il(r)}n=n.sibling}}function oy(n,r){for(;Ct!==null;){var s=Ct;switch(s.tag){case 0:case 11:case 15:qi(8,s,r);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var d=s.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:ga(s.memoizedState.cache)}if(d=s.child,d!==null)d.return=s,Ct=d;else e:for(s=n;Ct!==null;){d=Ct;var y=d.sibling,x=d.return;if(Qg(d),d===s){Ct=null;break e}if(y!==null){y.return=x,Ct=y;break e}Ct=x}}}var nN={getCacheForType:function(n){var r=At(yt),s=r.data.get(n);return s===void 0&&(s=n(),r.data.set(n,s)),s},cacheSignal:function(){return At(yt).controller.signal}},iN=typeof WeakMap=="function"?WeakMap:Map,Ye=0,tt=null,Oe=null,Le=0,We=0,an=null,Ui=!1,wo=!1,Xd=!1,yi=0,dt=0,Vi=0,Mr=0,Qd=0,sn=0,So=0,Ra=null,Xt=null,Wd=!1,Ll=0,ay=0,zl=1/0,Bl=null,Fi=null,jt=0,Gi=null,No=null,xi=0,Zd=0,Jd=null,sy=null,Ia=0,Kd=null;function ln(){return(Ye&2)!==0&&Le!==0?Le&-Le:O.T!==null?af():qs()}function ly(){if(sn===0)if((Le&536870912)===0||$e){var n=Fr;Fr<<=1,(Fr&3932160)===0&&(Fr=262144),sn=n}else sn=536870912;return n=rn.current,n!==null&&(n.flags|=32),sn}function Qt(n,r,s){(n===tt&&(We===2||We===9)||n.cancelPendingCommit!==null)&&(Eo(n,0),Yi(n,Le,sn,!1)),dr(n,s),((Ye&2)===0||n!==tt)&&(n===tt&&((Ye&2)===0&&(Mr|=s),dt===4&&Yi(n,Le,sn,!1)),qn(n))}function cy(n,r,s){if((Ye&6)!==0)throw Error(o(327));var d=!s&&(r&127)===0&&(r&n.expiredLanes)===0||ur(n,r),y=d?aN(n,r):tf(n,r,!0),x=d;do{if(y===0){wo&&!d&&Yi(n,r,0,!1);break}else{if(s=n.current.alternate,x&&!rN(s)){y=tf(n,r,!1),x=!1;continue}if(y===2){if(x=r,n.errorRecoveryDisabledLanes&x)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){r=E;e:{var R=n;y=Ra;var X=R.current.memoizedState.isDehydrated;if(X&&(Eo(R,E).flags|=256),E=tf(R,E,!1),E!==2){if(Xd&&!X){R.errorRecoveryDisabledLanes|=x,Mr|=x,y=4;break e}x=Xt,Xt=y,x!==null&&(Xt===null?Xt=x:Xt.push.apply(Xt,x))}y=E}if(x=!1,y!==2)continue}}if(y===1){Eo(n,0),Yi(n,r,0,!0);break}e:{switch(d=n,x=y,x){case 0:case 1:throw Error(o(345));case 4:if((r&4194048)!==r)break;case 6:Yi(d,r,sn,!Ui);break e;case 2:Xt=null;break;case 3:case 5:break;default:throw Error(o(329))}if((r&62914560)===r&&(y=Ll+300-Nt(),10<y)){if(Yi(d,r,sn,!Ui),Yr(d,0,!0)!==0)break e;xi=r,d.timeoutHandle=Hy(uy.bind(null,d,s,Xt,Bl,Wd,r,sn,Mr,So,Ui,x,"Throttled",-0,0),y);break e}uy(d,s,Xt,Bl,Wd,r,sn,Mr,So,Ui,x,null,-0,0)}}break}while(!0);qn(n)}function uy(n,r,s,d,y,x,E,R,X,ee,le,ue,ne,oe){if(n.timeoutHandle=-1,ue=r.subtreeFlags,ue&8192||(ue&16785408)===16785408){ue={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ii},ny(r,x,ue);var me=(x&62914560)===x?Ll-Nt():(x&4194048)===x?ay-Nt():0;if(me=qN(ue,me),me!==null){xi=x,n.cancelPendingCommit=me(xy.bind(null,n,r,x,s,d,y,E,R,X,le,ue,null,ne,oe)),Yi(n,x,E,!ee);return}}xy(n,r,x,s,d,y,E,R,X)}function rN(n){for(var r=n;;){var s=r.tag;if((s===0||s===11||s===15)&&r.flags&16384&&(s=r.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var d=0;d<s.length;d++){var y=s[d],x=y.getSnapshot;y=y.value;try{if(!tn(x(),y))return!1}catch{return!1}}if(s=r.child,r.subtreeFlags&16384&&s!==null)s.return=r,r=s;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Yi(n,r,s,d){r&=~Qd,r&=~Mr,n.suspendedLanes|=r,n.pingedLanes&=~r,d&&(n.warmLanes|=r),d=n.expirationTimes;for(var y=r;0<y;){var x=31-Qe(y),E=1<<x;d[x]=-1,y&=~E}s!==0&&$s(n,s,r)}function $l(){return(Ye&6)===0?(La(0),!1):!0}function ef(){if(Oe!==null){if(We===0)var n=Oe.return;else n=Oe,si=wr=null,gd(n),po=null,xa=0,n=Oe;for(;n!==null;)Pg(n.alternate,n),n=n.return;Oe=null}}function Eo(n,r){var s=n.timeoutHandle;s!==-1&&(n.timeoutHandle=-1,EN(s)),s=n.cancelPendingCommit,s!==null&&(n.cancelPendingCommit=null,s()),xi=0,ef(),tt=n,Oe=s=oi(n.current,null),Le=r,We=0,an=null,Ui=!1,wo=ur(n,r),Xd=!1,So=sn=Qd=Mr=Vi=dt=0,Xt=Ra=null,Wd=!1,(r&8)!==0&&(r|=r&32);var d=n.entangledLanes;if(d!==0)for(n=n.entanglements,d&=r;0<d;){var y=31-Qe(d),x=1<<y;r|=n[y],d&=~x}return yi=r,al(),s}function dy(n,r){Te=null,O.H=Ca,r===ho||r===pl?(r=km(),We=3):r===rd?(r=km(),We=4):We=r===_d?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,an=r,Oe===null&&(dt=1,Tl(n,mn(r,n.current)))}function fy(){var n=rn.current;return n===null?!0:(Le&4194048)===Le?vn===null:(Le&62914560)===Le||(Le&536870912)!==0?n===vn:!1}function hy(){var n=O.H;return O.H=Ca,n===null?Ca:n}function py(){var n=O.A;return O.A=nN,n}function Hl(){dt=4,Ui||(Le&4194048)!==Le&&rn.current!==null||(wo=!0),(Vi&134217727)===0&&(Mr&134217727)===0||tt===null||Yi(tt,Le,sn,!1)}function tf(n,r,s){var d=Ye;Ye|=2;var y=hy(),x=py();(tt!==n||Le!==r)&&(Bl=null,Eo(n,r)),r=!1;var E=dt;e:do try{if(We!==0&&Oe!==null){var R=Oe,X=an;switch(We){case 8:ef(),E=6;break e;case 3:case 2:case 9:case 6:rn.current===null&&(r=!0);var ee=We;if(We=0,an=null,jo(n,R,X,ee),s&&wo){E=0;break e}break;default:ee=We,We=0,an=null,jo(n,R,X,ee)}}oN(),E=dt;break}catch(le){dy(n,le)}while(!0);return r&&n.shellSuspendCounter++,si=wr=null,Ye=d,O.H=y,O.A=x,Oe===null&&(tt=null,Le=0,al()),E}function oN(){for(;Oe!==null;)my(Oe)}function aN(n,r){var s=Ye;Ye|=2;var d=hy(),y=py();tt!==n||Le!==r?(Bl=null,zl=Nt()+500,Eo(n,r)):wo=ur(n,r);e:do try{if(We!==0&&Oe!==null){r=Oe;var x=an;t:switch(We){case 1:We=0,an=null,jo(n,r,x,1);break;case 2:case 9:if(jm(x)){We=0,an=null,gy(r);break}r=function(){We!==2&&We!==9||tt!==n||(We=7),qn(n)},x.then(r,r);break e;case 3:We=7;break e;case 4:We=5;break e;case 7:jm(x)?(We=0,an=null,gy(r)):(We=0,an=null,jo(n,r,x,7));break;case 5:var E=null;switch(Oe.tag){case 26:E=Oe.memoizedState;case 5:case 27:var R=Oe;if(E?tx(E):R.stateNode.complete){We=0,an=null;var X=R.sibling;if(X!==null)Oe=X;else{var ee=R.return;ee!==null?(Oe=ee,Pl(ee)):Oe=null}break t}}We=0,an=null,jo(n,r,x,5);break;case 6:We=0,an=null,jo(n,r,x,6);break;case 8:ef(),dt=6;break e;default:throw Error(o(462))}}sN();break}catch(le){dy(n,le)}while(!0);return si=wr=null,O.H=d,O.A=y,Ye=s,Oe!==null?0:(tt=null,Le=0,al(),dt)}function sN(){for(;Oe!==null&&!Zn();)my(Oe)}function my(n){var r=$g(n.alternate,n,yi);n.memoizedProps=n.pendingProps,r===null?Pl(n):Oe=r}function gy(n){var r=n,s=r.alternate;switch(r.tag){case 15:case 0:r=Og(s,r,r.pendingProps,r.type,void 0,Le);break;case 11:r=Og(s,r,r.pendingProps,r.type.render,r.ref,Le);break;case 5:gd(r);default:Pg(s,r),r=Oe=pm(r,yi),r=$g(s,r,yi)}n.memoizedProps=n.pendingProps,r===null?Pl(n):Oe=r}function jo(n,r,s,d){si=wr=null,gd(r),po=null,xa=0;var y=r.return;try{if(QS(n,y,r,s,Le)){dt=1,Tl(n,mn(s,n.current)),Oe=null;return}}catch(x){if(y!==null)throw Oe=y,x;dt=1,Tl(n,mn(s,n.current)),Oe=null;return}r.flags&32768?($e||d===1?n=!0:wo||(Le&536870912)!==0?n=!1:(Ui=n=!0,(d===2||d===9||d===3||d===6)&&(d=rn.current,d!==null&&d.tag===13&&(d.flags|=16384))),yy(r,n)):Pl(r)}function Pl(n){var r=n;do{if((r.flags&32768)!==0){yy(r,Ui);return}n=r.return;var s=JS(r.alternate,r,yi);if(s!==null){Oe=s;return}if(r=r.sibling,r!==null){Oe=r;return}Oe=r=n}while(r!==null);dt===0&&(dt=5)}function yy(n,r){do{var s=KS(n.alternate,n);if(s!==null){s.flags&=32767,Oe=s;return}if(s=n.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!r&&(n=n.sibling,n!==null)){Oe=n;return}Oe=n=s}while(n!==null);dt=6,Oe=null}function xy(n,r,s,d,y,x,E,R,X){n.cancelPendingCommit=null;do ql();while(jt!==0);if((Ye&6)!==0)throw Error(o(327));if(r!==null){if(r===n.current)throw Error(o(177));if(x=r.lanes|r.childLanes,x|=Uu,vu(n,s,x,E,R,X),n===tt&&(Oe=tt=null,Le=0),No=r,Gi=n,xi=s,Zd=x,Jd=y,sy=d,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,dN(Se,function(){return Ny(),null})):(n.callbackNode=null,n.callbackPriority=0),d=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||d){d=O.T,O.T=null,y=q.p,q.p=2,E=Ye,Ye|=4;try{eN(n,r,s)}finally{Ye=E,q.p=y,O.T=d}}jt=1,vy(),by(),wy()}}function vy(){if(jt===1){jt=0;var n=Gi,r=No,s=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||s){s=O.T,O.T=null;var d=q.p;q.p=2;var y=Ye;Ye|=4;try{Kg(r,n);var x=pf,E=om(n.containerInfo),R=x.focusedElem,X=x.selectionRange;if(E!==R&&R&&R.ownerDocument&&rm(R.ownerDocument.documentElement,R)){if(X!==null&&Bu(R)){var ee=X.start,le=X.end;if(le===void 0&&(le=ee),"selectionStart"in R)R.selectionStart=ee,R.selectionEnd=Math.min(le,R.value.length);else{var ue=R.ownerDocument||document,ne=ue&&ue.defaultView||window;if(ne.getSelection){var oe=ne.getSelection(),me=R.textContent.length,Ne=Math.min(X.start,me),et=X.end===void 0?Ne:Math.min(X.end,me);!oe.extend&&Ne>et&&(E=et,et=Ne,Ne=E);var J=im(R,Ne),W=im(R,et);if(J&&W&&(oe.rangeCount!==1||oe.anchorNode!==J.node||oe.anchorOffset!==J.offset||oe.focusNode!==W.node||oe.focusOffset!==W.offset)){var K=ue.createRange();K.setStart(J.node,J.offset),oe.removeAllRanges(),Ne>et?(oe.addRange(K),oe.extend(W.node,W.offset)):(K.setEnd(W.node,W.offset),oe.addRange(K))}}}}for(ue=[],oe=R;oe=oe.parentNode;)oe.nodeType===1&&ue.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<ue.length;R++){var ce=ue[R];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}ec=!!hf,pf=hf=null}finally{Ye=y,q.p=d,O.T=s}}n.current=r,jt=2}}function by(){if(jt===2){jt=0;var n=Gi,r=No,s=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||s){s=O.T,O.T=null;var d=q.p;q.p=2;var y=Ye;Ye|=4;try{Xg(n,r.alternate,r)}finally{Ye=y,q.p=d,O.T=s}}jt=3}}function wy(){if(jt===4||jt===3){jt=0,Jn();var n=Gi,r=No,s=xi,d=sy;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?jt=5:(jt=0,No=Gi=null,Sy(n,n.pendingLanes));var y=n.pendingLanes;if(y===0&&(Fi=null),ta(s),r=r.stateNode,ht&&typeof ht.onCommitFiberRoot=="function")try{ht.onCommitFiberRoot(kt,r,void 0,(r.current.flags&128)===128)}catch{}if(d!==null){r=O.T,y=q.p,q.p=2,O.T=null;try{for(var x=n.onRecoverableError,E=0;E<d.length;E++){var R=d[E];x(R.value,{componentStack:R.stack})}}finally{O.T=r,q.p=y}}(xi&3)!==0&&ql(),qn(n),y=n.pendingLanes,(s&261930)!==0&&(y&42)!==0?n===Kd?Ia++:(Ia=0,Kd=n):Ia=0,La(0)}}function Sy(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,ga(r)))}function ql(){return vy(),by(),wy(),Ny()}function Ny(){if(jt!==5)return!1;var n=Gi,r=Zd;Zd=0;var s=ta(xi),d=O.T,y=q.p;try{q.p=32>s?32:s,O.T=null,s=Jd,Jd=null;var x=Gi,E=xi;if(jt=0,No=Gi=null,xi=0,(Ye&6)!==0)throw Error(o(331));var R=Ye;if(Ye|=4,ry(x.current),ty(x,x.current,E,s),Ye=R,La(0,!1),ht&&typeof ht.onPostCommitFiberRoot=="function")try{ht.onPostCommitFiberRoot(kt,x)}catch{}return!0}finally{q.p=y,O.T=d,Sy(n,r)}}function Ey(n,r,s){r=mn(s,r),r=Dd(n.stateNode,r,2),n=$i(n,r,2),n!==null&&(dr(n,2),qn(n))}function Ze(n,r,s){if(n.tag===3)Ey(n,n,s);else for(;r!==null;){if(r.tag===3){Ey(r,n,s);break}else if(r.tag===1){var d=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Fi===null||!Fi.has(d))){n=mn(s,n),s=jg(2),d=$i(r,s,2),d!==null&&(Cg(s,d,r,n),dr(d,2),qn(d));break}}r=r.return}}function nf(n,r,s){var d=n.pingCache;if(d===null){d=n.pingCache=new iN;var y=new Set;d.set(r,y)}else y=d.get(r),y===void 0&&(y=new Set,d.set(r,y));y.has(s)||(Xd=!0,y.add(s),n=lN.bind(null,n,r,s),r.then(n,n))}function lN(n,r,s){var d=n.pingCache;d!==null&&d.delete(r),n.pingedLanes|=n.suspendedLanes&s,n.warmLanes&=~s,tt===n&&(Le&s)===s&&(dt===4||dt===3&&(Le&62914560)===Le&&300>Nt()-Ll?(Ye&2)===0&&Eo(n,0):Qd|=s,So===Le&&(So=0)),qn(n)}function jy(n,r){r===0&&(r=Bs()),n=xr(n,r),n!==null&&(dr(n,r),qn(n))}function cN(n){var r=n.memoizedState,s=0;r!==null&&(s=r.retryLane),jy(n,s)}function uN(n,r){var s=0;switch(n.tag){case 31:case 13:var d=n.stateNode,y=n.memoizedState;y!==null&&(s=y.retryLane);break;case 19:d=n.stateNode;break;case 22:d=n.stateNode._retryCache;break;default:throw Error(o(314))}d!==null&&d.delete(r),jy(n,s)}function dN(n,r){return Pt(n,r)}var Ul=null,Co=null,rf=!1,Vl=!1,of=!1,Xi=0;function qn(n){n!==Co&&n.next===null&&(Co===null?Ul=Co=n:Co=Co.next=n),Vl=!0,rf||(rf=!0,hN())}function La(n,r){if(!of&&Vl){of=!0;do for(var s=!1,d=Ul;d!==null;){if(n!==0){var y=d.pendingLanes;if(y===0)var x=0;else{var E=d.suspendedLanes,R=d.pingedLanes;x=(1<<31-Qe(42|n)+1)-1,x&=y&~(E&~R),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(s=!0,Ay(d,x))}else x=Le,x=Yr(d,d===tt?x:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(x&3)===0||ur(d,x)||(s=!0,Ay(d,x));d=d.next}while(s);of=!1}}function fN(){Cy()}function Cy(){Vl=rf=!1;var n=0;Xi!==0&&NN()&&(n=Xi);for(var r=Nt(),s=null,d=Ul;d!==null;){var y=d.next,x=ky(d,r);x===0?(d.next=null,s===null?Ul=y:s.next=y,y===null&&(Co=s)):(s=d,(n!==0||(x&3)!==0)&&(Vl=!0)),d=y}jt!==0&&jt!==5||La(n),Xi!==0&&(Xi=0)}function ky(n,r){for(var s=n.suspendedLanes,d=n.pingedLanes,y=n.expirationTimes,x=n.pendingLanes&-62914561;0<x;){var E=31-Qe(x),R=1<<E,X=y[E];X===-1?((R&s)===0||(R&d)!==0)&&(y[E]=xu(R,r)):X<=r&&(n.expiredLanes|=R),x&=~R}if(r=tt,s=Le,s=Yr(n,n===r?s:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),d=n.callbackNode,s===0||n===r&&(We===2||We===9)||n.cancelPendingCommit!==null)return d!==null&&d!==null&&En(d),n.callbackNode=null,n.callbackPriority=0;if((s&3)===0||ur(n,s)){if(r=s&-s,r===n.callbackPriority)return r;switch(d!==null&&En(d),ta(s)){case 2:case 8:s=pe;break;case 32:s=Se;break;case 268435456:s=He;break;default:s=Se}return d=Ty.bind(null,n),s=Pt(s,d),n.callbackPriority=r,n.callbackNode=s,r}return d!==null&&d!==null&&En(d),n.callbackPriority=2,n.callbackNode=null,2}function Ty(n,r){if(jt!==0&&jt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var s=n.callbackNode;if(ql()&&n.callbackNode!==s)return null;var d=Le;return d=Yr(n,n===tt?d:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),d===0?null:(cy(n,d,r),ky(n,Nt()),n.callbackNode!=null&&n.callbackNode===s?Ty.bind(null,n):null)}function Ay(n,r){if(ql())return null;cy(n,r,!0)}function hN(){jN(function(){(Ye&6)!==0?Pt(se,fN):Cy()})}function af(){if(Xi===0){var n=uo;n===0&&(n=Vr,Vr<<=1,(Vr&261888)===0&&(Vr=256)),Xi=n}return Xi}function My(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Js(""+n)}function Dy(n,r){var s=r.ownerDocument.createElement("input");return s.name=r.name,s.value=r.value,n.id&&s.setAttribute("form",n.id),r.parentNode.insertBefore(s,r),n=new FormData(n),s.parentNode.removeChild(s),n}function pN(n,r,s,d,y){if(r==="submit"&&s&&s.stateNode===y){var x=My((y[Rt]||null).action),E=d.submitter;E&&(r=(r=E[Rt]||null)?My(r.formAction):E.getAttribute("formAction"),r!==null&&(x=r,E=null));var R=new nl("action","action",null,d,y);n.push({event:R,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Xi!==0){var X=E?Dy(y,E):new FormData(y);jd(s,{pending:!0,data:X,method:y.method,action:x},null,X)}}else typeof x=="function"&&(R.preventDefault(),X=E?Dy(y,E):new FormData(y),jd(s,{pending:!0,data:X,method:y.method,action:x},x,X))},currentTarget:y}]})}}for(var sf=0;sf<qu.length;sf++){var lf=qu[sf],mN=lf.toLowerCase(),gN=lf[0].toUpperCase()+lf.slice(1);kn(mN,"on"+gN)}kn(lm,"onAnimationEnd"),kn(cm,"onAnimationIteration"),kn(um,"onAnimationStart"),kn("dblclick","onDoubleClick"),kn("focusin","onFocus"),kn("focusout","onBlur"),kn(_S,"onTransitionRun"),kn(OS,"onTransitionStart"),kn(RS,"onTransitionCancel"),kn(dm,"onTransitionEnd"),Di("onMouseEnter",["mouseout","mouseover"]),Di("onMouseLeave",["mouseout","mouseover"]),Di("onPointerEnter",["pointerout","pointerover"]),Di("onPointerLeave",["pointerout","pointerover"]),ti("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ti("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ti("onBeforeInput",["compositionend","keypress","textInput","paste"]),ti("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ti("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ti("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var za="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(za));function _y(n,r){r=(r&4)!==0;for(var s=0;s<n.length;s++){var d=n[s],y=d.event;d=d.listeners;e:{var x=void 0;if(r)for(var E=d.length-1;0<=E;E--){var R=d[E],X=R.instance,ee=R.currentTarget;if(R=R.listener,X!==x&&y.isPropagationStopped())break e;x=R,y.currentTarget=ee;try{x(y)}catch(le){ol(le)}y.currentTarget=null,x=X}else for(E=0;E<d.length;E++){if(R=d[E],X=R.instance,ee=R.currentTarget,R=R.listener,X!==x&&y.isPropagationStopped())break e;x=R,y.currentTarget=ee;try{x(y)}catch(le){ol(le)}y.currentTarget=null,x=X}}}}function Re(n,r){var s=r[Xr];s===void 0&&(s=r[Xr]=new Set);var d=n+"__bubble";s.has(d)||(Oy(r,n,2,!1),s.add(d))}function cf(n,r,s){var d=0;r&&(d|=4),Oy(s,n,d,r)}var Fl="_reactListening"+Math.random().toString(36).slice(2);function uf(n){if(!n[Fl]){n[Fl]=!0,Gs.forEach(function(s){s!=="selectionchange"&&(yN.has(s)||cf(s,!1,n),cf(s,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Fl]||(r[Fl]=!0,cf("selectionchange",!1,r))}}function Oy(n,r,s,d){switch(lx(r)){case 2:var y=FN;break;case 8:y=GN;break;default:y=jf}s=y.bind(null,r,s,n),y=void 0,!Au||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),d?y!==void 0?n.addEventListener(r,s,{capture:!0,passive:y}):n.addEventListener(r,s,!0):y!==void 0?n.addEventListener(r,s,{passive:y}):n.addEventListener(r,s,!1)}function df(n,r,s,d,y){var x=d;if((r&1)===0&&(r&2)===0&&d!==null)e:for(;;){if(d===null)return;var E=d.tag;if(E===3||E===4){var R=d.stateNode.containerInfo;if(R===y)break;if(E===4)for(E=d.return;E!==null;){var X=E.tag;if((X===3||X===4)&&E.stateNode.containerInfo===y)return;E=E.return}for(;R!==null;){if(E=ki(R),E===null)return;if(X=E.tag,X===5||X===6||X===26||X===27){d=x=E;continue e}R=R.parentNode}}d=d.return}Bp(function(){var ee=x,le=ku(s),ue=[];e:{var ne=fm.get(n);if(ne!==void 0){var oe=nl,me=n;switch(n){case"keypress":if(el(s)===0)break e;case"keydown":case"keyup":oe=uS;break;case"focusin":me="focus",oe=Ou;break;case"focusout":me="blur",oe=Ou;break;case"beforeblur":case"afterblur":oe=Ou;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=Pp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=J1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=hS;break;case lm:case cm:case um:oe=tS;break;case dm:oe=mS;break;case"scroll":case"scrollend":oe=W1;break;case"wheel":oe=yS;break;case"copy":case"cut":case"paste":oe=iS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=Up;break;case"toggle":case"beforetoggle":oe=vS}var Ne=(r&4)!==0,et=!Ne&&(n==="scroll"||n==="scrollend"),J=Ne?ne!==null?ne+"Capture":null:ne;Ne=[];for(var W=ee,K;W!==null;){var ce=W;if(K=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||K===null||J===null||(ce=oa(W,J),ce!=null&&Ne.push(Ba(W,ce,K))),et)break;W=W.return}0<Ne.length&&(ne=new oe(ne,me,null,s,le),ue.push({event:ne,listeners:Ne}))}}if((r&7)===0){e:{if(ne=n==="mouseover"||n==="pointerover",oe=n==="mouseout"||n==="pointerout",ne&&s!==Cu&&(me=s.relatedTarget||s.fromElement)&&(ki(me)||me[ei]))break e;if((oe||ne)&&(ne=le.window===le?le:(ne=le.ownerDocument)?ne.defaultView||ne.parentWindow:window,oe?(me=s.relatedTarget||s.toElement,oe=ee,me=me?ki(me):null,me!==null&&(et=l(me),Ne=me.tag,me!==et||Ne!==5&&Ne!==27&&Ne!==6)&&(me=null)):(oe=null,me=ee),oe!==me)){if(Ne=Pp,ce="onMouseLeave",J="onMouseEnter",W="mouse",(n==="pointerout"||n==="pointerover")&&(Ne=Up,ce="onPointerLeave",J="onPointerEnter",W="pointer"),et=oe==null?ne:Ai(oe),K=me==null?ne:Ai(me),ne=new Ne(ce,W+"leave",oe,s,le),ne.target=et,ne.relatedTarget=K,ce=null,ki(le)===ee&&(Ne=new Ne(J,W+"enter",me,s,le),Ne.target=K,Ne.relatedTarget=et,ce=Ne),et=ce,oe&&me)t:{for(Ne=xN,J=oe,W=me,K=0,ce=J;ce;ce=Ne(ce))K++;ce=0;for(var be=W;be;be=Ne(be))ce++;for(;0<K-ce;)J=Ne(J),K--;for(;0<ce-K;)W=Ne(W),ce--;for(;K--;){if(J===W||W!==null&&J===W.alternate){Ne=J;break t}J=Ne(J),W=Ne(W)}Ne=null}else Ne=null;oe!==null&&Ry(ue,ne,oe,Ne,!1),me!==null&&et!==null&&Ry(ue,et,me,Ne,!0)}}e:{if(ne=ee?Ai(ee):window,oe=ne.nodeName&&ne.nodeName.toLowerCase(),oe==="select"||oe==="input"&&ne.type==="file")var Ve=Zp;else if(Qp(ne))if(Jp)Ve=AS;else{Ve=kS;var ye=CS}else oe=ne.nodeName,!oe||oe.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?ee&&ju(ee.elementType)&&(Ve=Zp):Ve=TS;if(Ve&&(Ve=Ve(n,ee))){Wp(ue,Ve,s,le);break e}ye&&ye(n,ne,ee),n==="focusout"&&ee&&ne.type==="number"&&ee.memoizedProps.value!=null&&ra(ne,"number",ne.value)}switch(ye=ee?Ai(ee):window,n){case"focusin":(Qp(ye)||ye.contentEditable==="true")&&(no=ye,$u=ee,ha=null);break;case"focusout":ha=$u=no=null;break;case"mousedown":Hu=!0;break;case"contextmenu":case"mouseup":case"dragend":Hu=!1,am(ue,s,le);break;case"selectionchange":if(DS)break;case"keydown":case"keyup":am(ue,s,le)}var Ae;if(Iu)e:{switch(n){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else to?Yp(n,s)&&(ze="onCompositionEnd"):n==="keydown"&&s.keyCode===229&&(ze="onCompositionStart");ze&&(Vp&&s.locale!=="ko"&&(to||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&to&&(Ae=$p()):(_i=le,Mu="value"in _i?_i.value:_i.textContent,to=!0)),ye=Gl(ee,ze),0<ye.length&&(ze=new qp(ze,n,null,s,le),ue.push({event:ze,listeners:ye}),Ae?ze.data=Ae:(Ae=Xp(s),Ae!==null&&(ze.data=Ae)))),(Ae=wS?SS(n,s):NS(n,s))&&(ze=Gl(ee,"onBeforeInput"),0<ze.length&&(ye=new qp("onBeforeInput","beforeinput",null,s,le),ue.push({event:ye,listeners:ze}),ye.data=Ae)),pN(ue,n,ee,s,le)}_y(ue,r)})}function Ba(n,r,s){return{instance:n,listener:r,currentTarget:s}}function Gl(n,r){for(var s=r+"Capture",d=[];n!==null;){var y=n,x=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||x===null||(y=oa(n,s),y!=null&&d.unshift(Ba(n,y,x)),y=oa(n,r),y!=null&&d.push(Ba(n,y,x))),n.tag===3)return d;n=n.return}return[]}function xN(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Ry(n,r,s,d,y){for(var x=r._reactName,E=[];s!==null&&s!==d;){var R=s,X=R.alternate,ee=R.stateNode;if(R=R.tag,X!==null&&X===d)break;R!==5&&R!==26&&R!==27||ee===null||(X=ee,y?(ee=oa(s,x),ee!=null&&E.unshift(Ba(s,ee,X))):y||(ee=oa(s,x),ee!=null&&E.push(Ba(s,ee,X)))),s=s.return}E.length!==0&&n.push({event:r,listeners:E})}var vN=/\r\n?/g,bN=/\u0000|\uFFFD/g;function Iy(n){return(typeof n=="string"?n:""+n).replace(vN,`
`).replace(bN,"")}function Ly(n,r){return r=Iy(r),Iy(n)===r}function Ke(n,r,s,d,y,x){switch(s){case"children":typeof d=="string"?r==="body"||r==="textarea"&&d===""||Jr(n,d):(typeof d=="number"||typeof d=="bigint")&&r!=="body"&&Jr(n,""+d);break;case"className":Wr(n,"class",d);break;case"tabIndex":Wr(n,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Wr(n,s,d);break;case"style":Lp(n,d,x);break;case"data":if(r!=="object"){Wr(n,"data",d);break}case"src":case"href":if(d===""&&(r!=="a"||s!=="href")){n.removeAttribute(s);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){n.removeAttribute(s);break}d=Js(""+d),n.setAttribute(s,d);break;case"action":case"formAction":if(typeof d=="function"){n.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(s==="formAction"?(r!=="input"&&Ke(n,r,"name",y.name,y,null),Ke(n,r,"formEncType",y.formEncType,y,null),Ke(n,r,"formMethod",y.formMethod,y,null),Ke(n,r,"formTarget",y.formTarget,y,null)):(Ke(n,r,"encType",y.encType,y,null),Ke(n,r,"method",y.method,y,null),Ke(n,r,"target",y.target,y,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){n.removeAttribute(s);break}d=Js(""+d),n.setAttribute(s,d);break;case"onClick":d!=null&&(n.onclick=ii);break;case"onScroll":d!=null&&Re("scroll",n);break;case"onScrollEnd":d!=null&&Re("scrollend",n);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(o(61));if(s=d.__html,s!=null){if(y.children!=null)throw Error(o(60));n.innerHTML=s}}break;case"multiple":n.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":n.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){n.removeAttribute("xlink:href");break}s=Js(""+d),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(s,""+d):n.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(s,""):n.removeAttribute(s);break;case"capture":case"download":d===!0?n.setAttribute(s,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(s,d):n.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?n.setAttribute(s,d):n.removeAttribute(s);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?n.removeAttribute(s):n.setAttribute(s,d);break;case"popover":Re("beforetoggle",n),Re("toggle",n),Qr(n,"popover",d);break;case"xlinkActuate":Cn(n,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Cn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Cn(n,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Cn(n,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Cn(n,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Cn(n,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Cn(n,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Cn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Cn(n,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Qr(n,"is",d);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=X1.get(s)||s,Qr(n,s,d))}}function ff(n,r,s,d,y,x){switch(s){case"style":Lp(n,d,x);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(o(61));if(s=d.__html,s!=null){if(y.children!=null)throw Error(o(60));n.innerHTML=s}}break;case"children":typeof d=="string"?Jr(n,d):(typeof d=="number"||typeof d=="bigint")&&Jr(n,""+d);break;case"onScroll":d!=null&&Re("scroll",n);break;case"onScrollEnd":d!=null&&Re("scrollend",n);break;case"onClick":d!=null&&(n.onclick=ii);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ys.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(y=s.endsWith("Capture"),r=s.slice(2,y?s.length-7:void 0),x=n[Rt]||null,x=x!=null?x[s]:null,typeof x=="function"&&n.removeEventListener(r,x,y),typeof d=="function")){typeof x!="function"&&x!==null&&(s in n?n[s]=null:n.hasAttribute(s)&&n.removeAttribute(s)),n.addEventListener(r,d,y);break e}s in n?n[s]=d:d===!0?n.setAttribute(s,""):Qr(n,s,d)}}}function Dt(n,r,s){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Re("error",n),Re("load",n);var d=!1,y=!1,x;for(x in s)if(s.hasOwnProperty(x)){var E=s[x];if(E!=null)switch(x){case"src":d=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,r));default:Ke(n,r,x,E,s,null)}}y&&Ke(n,r,"srcSet",s.srcSet,s,null),d&&Ke(n,r,"src",s.src,s,null);return;case"input":Re("invalid",n);var R=x=E=y=null,X=null,ee=null;for(d in s)if(s.hasOwnProperty(d)){var le=s[d];if(le!=null)switch(d){case"name":y=le;break;case"type":E=le;break;case"checked":X=le;break;case"defaultChecked":ee=le;break;case"value":x=le;break;case"defaultValue":R=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(o(137,r));break;default:Ke(n,r,d,le,s,null)}}Zs(n,x,R,X,ee,E,y,!1);return;case"select":Re("invalid",n),d=E=x=null;for(y in s)if(s.hasOwnProperty(y)&&(R=s[y],R!=null))switch(y){case"value":x=R;break;case"defaultValue":E=R;break;case"multiple":d=R;default:Ke(n,r,y,R,s,null)}r=x,s=E,n.multiple=!!d,r!=null?ni(n,!!d,r,!1):s!=null&&ni(n,!!d,s,!0);return;case"textarea":Re("invalid",n),x=y=d=null;for(E in s)if(s.hasOwnProperty(E)&&(R=s[E],R!=null))switch(E){case"value":d=R;break;case"defaultValue":y=R;break;case"children":x=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(o(91));break;default:Ke(n,r,E,R,s,null)}Rp(n,d,y,x);return;case"option":for(X in s)if(s.hasOwnProperty(X)&&(d=s[X],d!=null))switch(X){case"selected":n.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Ke(n,r,X,d,s,null)}return;case"dialog":Re("beforetoggle",n),Re("toggle",n),Re("cancel",n),Re("close",n);break;case"iframe":case"object":Re("load",n);break;case"video":case"audio":for(d=0;d<za.length;d++)Re(za[d],n);break;case"image":Re("error",n),Re("load",n);break;case"details":Re("toggle",n);break;case"embed":case"source":case"link":Re("error",n),Re("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in s)if(s.hasOwnProperty(ee)&&(d=s[ee],d!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,r));default:Ke(n,r,ee,d,s,null)}return;default:if(ju(r)){for(le in s)s.hasOwnProperty(le)&&(d=s[le],d!==void 0&&ff(n,r,le,d,s,void 0));return}}for(R in s)s.hasOwnProperty(R)&&(d=s[R],d!=null&&Ke(n,r,R,d,s,null))}function wN(n,r,s,d){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,x=null,E=null,R=null,X=null,ee=null,le=null;for(oe in s){var ue=s[oe];if(s.hasOwnProperty(oe)&&ue!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":X=ue;default:d.hasOwnProperty(oe)||Ke(n,r,oe,null,d,ue)}}for(var ne in d){var oe=d[ne];if(ue=s[ne],d.hasOwnProperty(ne)&&(oe!=null||ue!=null))switch(ne){case"type":x=oe;break;case"name":y=oe;break;case"checked":ee=oe;break;case"defaultChecked":le=oe;break;case"value":E=oe;break;case"defaultValue":R=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(o(137,r));break;default:oe!==ue&&Ke(n,r,ne,oe,d,ue)}}pr(n,E,R,X,ee,le,x,y);return;case"select":oe=E=R=ne=null;for(x in s)if(X=s[x],s.hasOwnProperty(x)&&X!=null)switch(x){case"value":break;case"multiple":oe=X;default:d.hasOwnProperty(x)||Ke(n,r,x,null,d,X)}for(y in d)if(x=d[y],X=s[y],d.hasOwnProperty(y)&&(x!=null||X!=null))switch(y){case"value":ne=x;break;case"defaultValue":R=x;break;case"multiple":E=x;default:x!==X&&Ke(n,r,y,x,d,X)}r=R,s=E,d=oe,ne!=null?ni(n,!!s,ne,!1):!!d!=!!s&&(r!=null?ni(n,!!s,r,!0):ni(n,!!s,s?[]:"",!1));return;case"textarea":oe=ne=null;for(R in s)if(y=s[R],s.hasOwnProperty(R)&&y!=null&&!d.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:Ke(n,r,R,null,d,y)}for(E in d)if(y=d[E],x=s[E],d.hasOwnProperty(E)&&(y!=null||x!=null))switch(E){case"value":ne=y;break;case"defaultValue":oe=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(o(91));break;default:y!==x&&Ke(n,r,E,y,d,x)}Op(n,ne,oe);return;case"option":for(var me in s)if(ne=s[me],s.hasOwnProperty(me)&&ne!=null&&!d.hasOwnProperty(me))switch(me){case"selected":n.selected=!1;break;default:Ke(n,r,me,null,d,ne)}for(X in d)if(ne=d[X],oe=s[X],d.hasOwnProperty(X)&&ne!==oe&&(ne!=null||oe!=null))switch(X){case"selected":n.selected=ne&&typeof ne!="function"&&typeof ne!="symbol";break;default:Ke(n,r,X,ne,d,oe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in s)ne=s[Ne],s.hasOwnProperty(Ne)&&ne!=null&&!d.hasOwnProperty(Ne)&&Ke(n,r,Ne,null,d,ne);for(ee in d)if(ne=d[ee],oe=s[ee],d.hasOwnProperty(ee)&&ne!==oe&&(ne!=null||oe!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(o(137,r));break;default:Ke(n,r,ee,ne,d,oe)}return;default:if(ju(r)){for(var et in s)ne=s[et],s.hasOwnProperty(et)&&ne!==void 0&&!d.hasOwnProperty(et)&&ff(n,r,et,void 0,d,ne);for(le in d)ne=d[le],oe=s[le],!d.hasOwnProperty(le)||ne===oe||ne===void 0&&oe===void 0||ff(n,r,le,ne,d,oe);return}}for(var J in s)ne=s[J],s.hasOwnProperty(J)&&ne!=null&&!d.hasOwnProperty(J)&&Ke(n,r,J,null,d,ne);for(ue in d)ne=d[ue],oe=s[ue],!d.hasOwnProperty(ue)||ne===oe||ne==null&&oe==null||Ke(n,r,ue,ne,d,oe)}function zy(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function SN(){if(typeof performance.getEntriesByType=="function"){for(var n=0,r=0,s=performance.getEntriesByType("resource"),d=0;d<s.length;d++){var y=s[d],x=y.transferSize,E=y.initiatorType,R=y.duration;if(x&&R&&zy(E)){for(E=0,R=y.responseEnd,d+=1;d<s.length;d++){var X=s[d],ee=X.startTime;if(ee>R)break;var le=X.transferSize,ue=X.initiatorType;le&&zy(ue)&&(X=X.responseEnd,E+=le*(X<R?1:(R-ee)/(X-ee)))}if(--d,r+=8*(x+E)/(y.duration/1e3),n++,10<n)break}}if(0<n)return r/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var hf=null,pf=null;function Yl(n){return n.nodeType===9?n:n.ownerDocument}function By(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function $y(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function mf(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var gf=null;function NN(){var n=window.event;return n&&n.type==="popstate"?n===gf?!1:(gf=n,!0):(gf=null,!1)}var Hy=typeof setTimeout=="function"?setTimeout:void 0,EN=typeof clearTimeout=="function"?clearTimeout:void 0,Py=typeof Promise=="function"?Promise:void 0,jN=typeof queueMicrotask=="function"?queueMicrotask:typeof Py<"u"?function(n){return Py.resolve(null).then(n).catch(CN)}:Hy;function CN(n){setTimeout(function(){throw n})}function Qi(n){return n==="head"}function qy(n,r){var s=r,d=0;do{var y=s.nextSibling;if(n.removeChild(s),y&&y.nodeType===8)if(s=y.data,s==="/$"||s==="/&"){if(d===0){n.removeChild(y),Mo(r);return}d--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")d++;else if(s==="html")$a(n.ownerDocument.documentElement);else if(s==="head"){s=n.ownerDocument.head,$a(s);for(var x=s.firstChild;x;){var E=x.nextSibling,R=x.nodeName;x[fr]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&x.rel.toLowerCase()==="stylesheet"||s.removeChild(x),x=E}}else s==="body"&&$a(n.ownerDocument.body);s=y}while(s);Mo(r)}function Uy(n,r){var s=n;n=0;do{var d=s.nextSibling;if(s.nodeType===1?r?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(r?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),d&&d.nodeType===8)if(s=d.data,s==="/$"){if(n===0)break;n--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||n++;s=d}while(s)}function yf(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var s=r;switch(r=r.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":yf(s),na(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}n.removeChild(s)}}function kN(n,r,s,d){for(;n.nodeType===1;){var y=s;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!d&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(d){if(!n[fr])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(x=n.getAttribute("rel"),x==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(x!==y.rel||n.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||n.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||n.getAttribute("title")!==(y.title==null?null:y.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(x=n.getAttribute("src"),(x!==(y.src==null?null:y.src)||n.getAttribute("type")!==(y.type==null?null:y.type)||n.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&x&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var x=y.name==null?null:""+y.name;if(y.type==="hidden"&&n.getAttribute("name")===x)return n}else return n;if(n=bn(n.nextSibling),n===null)break}return null}function TN(n,r,s){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=bn(n.nextSibling),n===null))return null;return n}function Vy(n,r){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=bn(n.nextSibling),n===null))return null;return n}function xf(n){return n.data==="$?"||n.data==="$~"}function vf(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function AN(n,r){var s=n.ownerDocument;if(n.data==="$~")n._reactRetry=r;else if(n.data!=="$?"||s.readyState!=="loading")r();else{var d=function(){r(),s.removeEventListener("DOMContentLoaded",d)};s.addEventListener("DOMContentLoaded",d),n._reactRetry=d}}function bn(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return n}var bf=null;function Fy(n){n=n.nextSibling;for(var r=0;n;){if(n.nodeType===8){var s=n.data;if(s==="/$"||s==="/&"){if(r===0)return bn(n.nextSibling);r--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||r++}n=n.nextSibling}return null}function Gy(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var s=n.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(r===0)return n;r--}else s!=="/$"&&s!=="/&"||r++}n=n.previousSibling}return null}function Yy(n,r,s){switch(r=Yl(s),n){case"html":if(n=r.documentElement,!n)throw Error(o(452));return n;case"head":if(n=r.head,!n)throw Error(o(453));return n;case"body":if(n=r.body,!n)throw Error(o(454));return n;default:throw Error(o(451))}}function $a(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);na(n)}var wn=new Map,Xy=new Set;function Xl(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var vi=q.d;q.d={f:MN,r:DN,D:_N,C:ON,L:RN,m:IN,X:zN,S:LN,M:BN};function MN(){var n=vi.f(),r=$l();return n||r}function DN(n){var r=Ti(n);r!==null&&r.tag===5&&r.type==="form"?dg(r):vi.r(n)}var ko=typeof document>"u"?null:document;function Qy(n,r,s){var d=ko;if(d&&typeof r=="string"&&r){var y=Ut(r);y='link[rel="'+n+'"][href="'+y+'"]',typeof s=="string"&&(y+='[crossorigin="'+s+'"]'),Xy.has(y)||(Xy.add(y),n={rel:n,crossOrigin:s,href:r},d.querySelector(y)===null&&(r=d.createElement("link"),Dt(r,"link",n),gt(r),d.head.appendChild(r)))}}function _N(n){vi.D(n),Qy("dns-prefetch",n,null)}function ON(n,r){vi.C(n,r),Qy("preconnect",n,r)}function RN(n,r,s){vi.L(n,r,s);var d=ko;if(d&&n&&r){var y='link[rel="preload"][as="'+Ut(r)+'"]';r==="image"&&s&&s.imageSrcSet?(y+='[imagesrcset="'+Ut(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(y+='[imagesizes="'+Ut(s.imageSizes)+'"]')):y+='[href="'+Ut(n)+'"]';var x=y;switch(r){case"style":x=To(n);break;case"script":x=Ao(n)}wn.has(x)||(n=g({rel:"preload",href:r==="image"&&s&&s.imageSrcSet?void 0:n,as:r},s),wn.set(x,n),d.querySelector(y)!==null||r==="style"&&d.querySelector(Ha(x))||r==="script"&&d.querySelector(Pa(x))||(r=d.createElement("link"),Dt(r,"link",n),gt(r),d.head.appendChild(r)))}}function IN(n,r){vi.m(n,r);var s=ko;if(s&&n){var d=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+Ut(d)+'"][href="'+Ut(n)+'"]',x=y;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=Ao(n)}if(!wn.has(x)&&(n=g({rel:"modulepreload",href:n},r),wn.set(x,n),s.querySelector(y)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Pa(x)))return}d=s.createElement("link"),Dt(d,"link",n),gt(d),s.head.appendChild(d)}}}function LN(n,r,s){vi.S(n,r,s);var d=ko;if(d&&n){var y=Mi(d).hoistableStyles,x=To(n);r=r||"default";var E=y.get(x);if(!E){var R={loading:0,preload:null};if(E=d.querySelector(Ha(x)))R.loading=5;else{n=g({rel:"stylesheet",href:n,"data-precedence":r},s),(s=wn.get(x))&&wf(n,s);var X=E=d.createElement("link");gt(X),Dt(X,"link",n),X._p=new Promise(function(ee,le){X.onload=ee,X.onerror=le}),X.addEventListener("load",function(){R.loading|=1}),X.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Ql(E,r,d)}E={type:"stylesheet",instance:E,count:1,state:R},y.set(x,E)}}}function zN(n,r){vi.X(n,r);var s=ko;if(s&&n){var d=Mi(s).hoistableScripts,y=Ao(n),x=d.get(y);x||(x=s.querySelector(Pa(y)),x||(n=g({src:n,async:!0},r),(r=wn.get(y))&&Sf(n,r),x=s.createElement("script"),gt(x),Dt(x,"link",n),s.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},d.set(y,x))}}function BN(n,r){vi.M(n,r);var s=ko;if(s&&n){var d=Mi(s).hoistableScripts,y=Ao(n),x=d.get(y);x||(x=s.querySelector(Pa(y)),x||(n=g({src:n,async:!0,type:"module"},r),(r=wn.get(y))&&Sf(n,r),x=s.createElement("script"),gt(x),Dt(x,"link",n),s.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},d.set(y,x))}}function Wy(n,r,s,d){var y=(y=re.current)?Xl(y):null;if(!y)throw Error(o(446));switch(n){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(r=To(s.href),s=Mi(y).hoistableStyles,d=s.get(r),d||(d={type:"style",instance:null,count:0,state:null},s.set(r,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){n=To(s.href);var x=Mi(y).hoistableStyles,E=x.get(n);if(E||(y=y.ownerDocument||y,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(n,E),(x=y.querySelector(Ha(n)))&&!x._p&&(E.instance=x,E.state.loading=5),wn.has(n)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},wn.set(n,s),x||$N(y,n,s,E.state))),r&&d===null)throw Error(o(528,""));return E}if(r&&d!==null)throw Error(o(529,""));return null;case"script":return r=s.async,s=s.src,typeof s=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Ao(s),s=Mi(y).hoistableScripts,d=s.get(r),d||(d={type:"script",instance:null,count:0,state:null},s.set(r,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,n))}}function To(n){return'href="'+Ut(n)+'"'}function Ha(n){return'link[rel="stylesheet"]['+n+"]"}function Zy(n){return g({},n,{"data-precedence":n.precedence,precedence:null})}function $N(n,r,s,d){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?d.loading=1:(r=n.createElement("link"),d.preload=r,r.addEventListener("load",function(){return d.loading|=1}),r.addEventListener("error",function(){return d.loading|=2}),Dt(r,"link",s),gt(r),n.head.appendChild(r))}function Ao(n){return'[src="'+Ut(n)+'"]'}function Pa(n){return"script[async]"+n}function Jy(n,r,s){if(r.count++,r.instance===null)switch(r.type){case"style":var d=n.querySelector('style[data-href~="'+Ut(s.href)+'"]');if(d)return r.instance=d,gt(d),d;var y=g({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return d=(n.ownerDocument||n).createElement("style"),gt(d),Dt(d,"style",y),Ql(d,s.precedence,n),r.instance=d;case"stylesheet":y=To(s.href);var x=n.querySelector(Ha(y));if(x)return r.state.loading|=4,r.instance=x,gt(x),x;d=Zy(s),(y=wn.get(y))&&wf(d,y),x=(n.ownerDocument||n).createElement("link"),gt(x);var E=x;return E._p=new Promise(function(R,X){E.onload=R,E.onerror=X}),Dt(x,"link",d),r.state.loading|=4,Ql(x,s.precedence,n),r.instance=x;case"script":return x=Ao(s.src),(y=n.querySelector(Pa(x)))?(r.instance=y,gt(y),y):(d=s,(y=wn.get(x))&&(d=g({},s),Sf(d,y)),n=n.ownerDocument||n,y=n.createElement("script"),gt(y),Dt(y,"link",d),n.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(o(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(d=r.instance,r.state.loading|=4,Ql(d,s.precedence,n));return r.instance}function Ql(n,r,s){for(var d=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=d.length?d[d.length-1]:null,x=y,E=0;E<d.length;E++){var R=d[E];if(R.dataset.precedence===r)x=R;else if(x!==y)break}x?x.parentNode.insertBefore(n,x.nextSibling):(r=s.nodeType===9?s.head:s,r.insertBefore(n,r.firstChild))}function wf(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function Sf(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var Wl=null;function Ky(n,r,s){if(Wl===null){var d=new Map,y=Wl=new Map;y.set(s,d)}else y=Wl,d=y.get(s),d||(d=new Map,y.set(s,d));if(d.has(n))return d;for(d.set(n,null),s=s.getElementsByTagName(n),y=0;y<s.length;y++){var x=s[y];if(!(x[fr]||x[Et]||n==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var E=x.getAttribute(r)||"";E=n+E;var R=d.get(E);R?R.push(x):d.set(E,[x])}}return d}function ex(n,r,s){n=n.ownerDocument||n,n.head.insertBefore(s,r==="title"?n.querySelector("head > title"):null)}function HN(n,r,s){if(s===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return n=r.disabled,typeof r.precedence=="string"&&n==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function tx(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function PN(n,r,s,d){if(s.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var y=To(d.href),x=r.querySelector(Ha(y));if(x){r=x._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(n.count++,n=Zl.bind(n),r.then(n,n)),s.state.loading|=4,s.instance=x,gt(x);return}x=r.ownerDocument||r,d=Zy(d),(y=wn.get(y))&&wf(d,y),x=x.createElement("link"),gt(x);var E=x;E._p=new Promise(function(R,X){E.onload=R,E.onerror=X}),Dt(x,"link",d),s.instance=x}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(n.count++,s=Zl.bind(n),r.addEventListener("load",s),r.addEventListener("error",s))}}var Nf=0;function qN(n,r){return n.stylesheets&&n.count===0&&Kl(n,n.stylesheets),0<n.count||0<n.imgCount?function(s){var d=setTimeout(function(){if(n.stylesheets&&Kl(n,n.stylesheets),n.unsuspend){var x=n.unsuspend;n.unsuspend=null,x()}},6e4+r);0<n.imgBytes&&Nf===0&&(Nf=62500*SN());var y=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Kl(n,n.stylesheets),n.unsuspend)){var x=n.unsuspend;n.unsuspend=null,x()}},(n.imgBytes>Nf?50:800)+r);return n.unsuspend=s,function(){n.unsuspend=null,clearTimeout(d),clearTimeout(y)}}:null}function Zl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Kl(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Jl=null;function Kl(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Jl=new Map,r.forEach(UN,n),Jl=null,Zl.call(n))}function UN(n,r){if(!(r.state.loading&4)){var s=Jl.get(n);if(s)var d=s.get(null);else{s=new Map,Jl.set(n,s);for(var y=n.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<y.length;x++){var E=y[x];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(s.set(E.dataset.precedence,E),d=E)}d&&s.set(null,d)}y=r.instance,E=y.getAttribute("data-precedence"),x=s.get(E)||d,x===d&&s.set(null,y),s.set(E,y),this.count++,d=Zl.bind(this),y.addEventListener("load",d),y.addEventListener("error",d),x?x.parentNode.insertBefore(y,x.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(y,n.firstChild)),r.state.loading|=4}}var qa={$$typeof:C,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function VN(n,r,s,d,y,x,E,R,X){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ko(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ko(0),this.hiddenUpdates=Ko(null),this.identifierPrefix=d,this.onUncaughtError=y,this.onCaughtError=x,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=X,this.incompleteTransitions=new Map}function nx(n,r,s,d,y,x,E,R,X,ee,le,ue){return n=new VN(n,r,s,E,X,ee,le,ue,R),r=1,x===!0&&(r|=24),x=nn(3,null,null,r),n.current=x,x.stateNode=n,r=td(),r.refCount++,n.pooledCache=r,r.refCount++,x.memoizedState={element:d,isDehydrated:s,cache:r},od(x),n}function ix(n){return n?(n=oo,n):oo}function rx(n,r,s,d,y,x){y=ix(y),d.context===null?d.context=y:d.pendingContext=y,d=Bi(r),d.payload={element:s},x=x===void 0?null:x,x!==null&&(d.callback=x),s=$i(n,d,r),s!==null&&(Qt(s,n,r),ba(s,n,r))}function ox(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var s=n.retryLane;n.retryLane=s!==0&&s<r?s:r}}function Ef(n,r){ox(n,r),(n=n.alternate)&&ox(n,r)}function ax(n){if(n.tag===13||n.tag===31){var r=xr(n,67108864);r!==null&&Qt(r,n,67108864),Ef(n,67108864)}}function sx(n){if(n.tag===13||n.tag===31){var r=ln();r=ea(r);var s=xr(n,r);s!==null&&Qt(s,n,r),Ef(n,r)}}var ec=!0;function FN(n,r,s,d){var y=O.T;O.T=null;var x=q.p;try{q.p=2,jf(n,r,s,d)}finally{q.p=x,O.T=y}}function GN(n,r,s,d){var y=O.T;O.T=null;var x=q.p;try{q.p=8,jf(n,r,s,d)}finally{q.p=x,O.T=y}}function jf(n,r,s,d){if(ec){var y=Cf(d);if(y===null)df(n,r,d,tc,s),cx(n,d);else if(XN(y,n,r,s,d))d.stopPropagation();else if(cx(n,d),r&4&&-1<YN.indexOf(n)){for(;y!==null;){var x=Ti(y);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var E=Kn(x.pendingLanes);if(E!==0){var R=x;for(R.pendingLanes|=2,R.entangledLanes|=2;E;){var X=1<<31-Qe(E);R.entanglements[1]|=X,E&=~X}qn(x),(Ye&6)===0&&(zl=Nt()+500,La(0))}}break;case 31:case 13:R=xr(x,2),R!==null&&Qt(R,x,2),$l(),Ef(x,2)}if(x=Cf(d),x===null&&df(n,r,d,tc,s),x===y)break;y=x}y!==null&&d.stopPropagation()}else df(n,r,d,null,s)}}function Cf(n){return n=ku(n),kf(n)}var tc=null;function kf(n){if(tc=null,n=ki(n),n!==null){var r=l(n);if(r===null)n=null;else{var s=r.tag;if(s===13){if(n=c(r),n!==null)return n;n=null}else if(s===31){if(n=f(r),n!==null)return n;n=null}else if(s===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return tc=n,null}function lx(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ci()){case se:return 2;case pe:return 8;case Se:case _e:return 32;case He:return 268435456;default:return 32}default:return 32}}var Tf=!1,Wi=null,Zi=null,Ji=null,Ua=new Map,Va=new Map,Ki=[],YN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function cx(n,r){switch(n){case"focusin":case"focusout":Wi=null;break;case"dragenter":case"dragleave":Zi=null;break;case"mouseover":case"mouseout":Ji=null;break;case"pointerover":case"pointerout":Ua.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Va.delete(r.pointerId)}}function Fa(n,r,s,d,y,x){return n===null||n.nativeEvent!==x?(n={blockedOn:r,domEventName:s,eventSystemFlags:d,nativeEvent:x,targetContainers:[y]},r!==null&&(r=Ti(r),r!==null&&ax(r)),n):(n.eventSystemFlags|=d,r=n.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),n)}function XN(n,r,s,d,y){switch(r){case"focusin":return Wi=Fa(Wi,n,r,s,d,y),!0;case"dragenter":return Zi=Fa(Zi,n,r,s,d,y),!0;case"mouseover":return Ji=Fa(Ji,n,r,s,d,y),!0;case"pointerover":var x=y.pointerId;return Ua.set(x,Fa(Ua.get(x)||null,n,r,s,d,y)),!0;case"gotpointercapture":return x=y.pointerId,Va.set(x,Fa(Va.get(x)||null,n,r,s,d,y)),!0}return!1}function ux(n){var r=ki(n.target);if(r!==null){var s=l(r);if(s!==null){if(r=s.tag,r===13){if(r=c(s),r!==null){n.blockedOn=r,Us(n.priority,function(){sx(s)});return}}else if(r===31){if(r=f(s),r!==null){n.blockedOn=r,Us(n.priority,function(){sx(s)});return}}else if(r===3&&s.stateNode.current.memoizedState.isDehydrated){n.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}n.blockedOn=null}function nc(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var s=Cf(n.nativeEvent);if(s===null){s=n.nativeEvent;var d=new s.constructor(s.type,s);Cu=d,s.target.dispatchEvent(d),Cu=null}else return r=Ti(s),r!==null&&ax(r),n.blockedOn=s,!1;r.shift()}return!0}function dx(n,r,s){nc(n)&&s.delete(r)}function QN(){Tf=!1,Wi!==null&&nc(Wi)&&(Wi=null),Zi!==null&&nc(Zi)&&(Zi=null),Ji!==null&&nc(Ji)&&(Ji=null),Ua.forEach(dx),Va.forEach(dx)}function ic(n,r){n.blockedOn===r&&(n.blockedOn=null,Tf||(Tf=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,QN)))}var rc=null;function fx(n){rc!==n&&(rc=n,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){rc===n&&(rc=null);for(var r=0;r<n.length;r+=3){var s=n[r],d=n[r+1],y=n[r+2];if(typeof d!="function"){if(kf(d||s)===null)continue;break}var x=Ti(s);x!==null&&(n.splice(r,3),r-=3,jd(x,{pending:!0,data:y,method:s.method,action:d},d,y))}}))}function Mo(n){function r(X){return ic(X,n)}Wi!==null&&ic(Wi,n),Zi!==null&&ic(Zi,n),Ji!==null&&ic(Ji,n),Ua.forEach(r),Va.forEach(r);for(var s=0;s<Ki.length;s++){var d=Ki[s];d.blockedOn===n&&(d.blockedOn=null)}for(;0<Ki.length&&(s=Ki[0],s.blockedOn===null);)ux(s),s.blockedOn===null&&Ki.shift();if(s=(n.ownerDocument||n).$$reactFormReplay,s!=null)for(d=0;d<s.length;d+=3){var y=s[d],x=s[d+1],E=y[Rt]||null;if(typeof x=="function")E||fx(s);else if(E){var R=null;if(x&&x.hasAttribute("formAction")){if(y=x,E=x[Rt]||null)R=E.formAction;else if(kf(y)!==null)continue}else R=E.action;typeof R=="function"?s[d+1]=R:(s.splice(d,3),d-=3),fx(s)}}}function hx(){function n(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(E){return y=E})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),d||setTimeout(s,20)}function s(){if(!d&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,y=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(s,100),function(){d=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function Af(n){this._internalRoot=n}oc.prototype.render=Af.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(o(409));var s=r.current,d=ln();rx(s,d,n,r,null,null)},oc.prototype.unmount=Af.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;rx(n.current,2,null,n,null,null),$l(),r[ei]=null}};function oc(n){this._internalRoot=n}oc.prototype.unstable_scheduleHydration=function(n){if(n){var r=qs();n={blockedOn:null,target:n,priority:r};for(var s=0;s<Ki.length&&r!==0&&r<Ki[s].priority;s++);Ki.splice(s,0,n),s===0&&ux(n)}};var px=t.version;if(px!=="19.2.3")throw Error(o(527,px,"19.2.3"));q.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(o(188)):(n=Object.keys(n).join(","),Error(o(268,n)));return n=p(r),n=n!==null?m(n):null,n=n===null?null:n.stateNode,n};var WN={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ac.isDisabled&&ac.supportsFiber)try{kt=ac.inject(WN),ht=ac}catch{}}return Ya.createRoot=function(n,r){if(!a(n))throw Error(o(299));var s=!1,d="",y=wg,x=Sg,E=Ng;return r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(x=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError)),r=nx(n,1,!1,null,null,s,d,null,y,x,E,hx),n[ei]=r.current,uf(n),new Af(r)},Ya.hydrateRoot=function(n,r,s){if(!a(n))throw Error(o(299));var d=!1,y="",x=wg,E=Sg,R=Ng,X=null;return s!=null&&(s.unstable_strictMode===!0&&(d=!0),s.identifierPrefix!==void 0&&(y=s.identifierPrefix),s.onUncaughtError!==void 0&&(x=s.onUncaughtError),s.onCaughtError!==void 0&&(E=s.onCaughtError),s.onRecoverableError!==void 0&&(R=s.onRecoverableError),s.formState!==void 0&&(X=s.formState)),r=nx(n,1,!0,r,s??null,d,y,X,x,E,R,hx),r.context=ix(null),s=r.current,d=ln(),d=ea(d),y=Bi(d),y.callback=null,$i(s,y,d),s=d,r.current.lanes=s,dr(r,s),qn(r),n[ei]=r.current,uf(n),new oc(r)},Ya.version="19.2.3",Ya}var Ex;function oE(){if(Ex)return _f.exports;Ex=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),_f.exports=rE(),_f.exports}var aE=oE();function St(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let i=0,o;i<e.length;i++)(o=St(e[i]))!==""&&(t+=(t&&" ")+o);else for(let i in e)e[i]&&(t+=(t&&" ")+i);return t}var sE={value:()=>{}};function Zc(){for(var e=0,t=arguments.length,i={},o;e<t;++e){if(!(o=arguments[e]+"")||o in i||/[\s.]/.test(o))throw new Error("illegal type: "+o);i[o]=[]}return new jc(i)}function jc(e){this._=e}function lE(e,t){return e.trim().split(/^|\s+/).map(function(i){var o="",a=i.indexOf(".");if(a>=0&&(o=i.slice(a+1),i=i.slice(0,a)),i&&!t.hasOwnProperty(i))throw new Error("unknown type: "+i);return{type:i,name:o}})}jc.prototype=Zc.prototype={constructor:jc,on:function(e,t){var i=this._,o=lE(e+"",i),a,l=-1,c=o.length;if(arguments.length<2){for(;++l<c;)if((a=(e=o[l]).type)&&(a=cE(i[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++l<c;)if(a=(e=o[l]).type)i[a]=jx(i[a],e.name,t);else if(t==null)for(a in i)i[a]=jx(i[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var i in t)e[i]=t[i].slice();return new jc(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var i=new Array(a),o=0,a,l;o<a;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(l=this._[e],o=0,a=l.length;o<a;++o)l[o].value.apply(t,i)},apply:function(e,t,i){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],a=0,l=o.length;a<l;++a)o[a].value.apply(t,i)}};function cE(e,t){for(var i=0,o=e.length,a;i<o;++i)if((a=e[i]).name===t)return a.value}function jx(e,t,i){for(var o=0,a=e.length;o<a;++o)if(e[o].name===t){e[o]=sE,e=e.slice(0,o).concat(e.slice(o+1));break}return i!=null&&e.push({name:t,value:i}),e}var vh="http://www.w3.org/1999/xhtml";const Cx={svg:"http://www.w3.org/2000/svg",xhtml:vh,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Jc(e){var t=e+="",i=t.indexOf(":");return i>=0&&(t=e.slice(0,i))!=="xmlns"&&(e=e.slice(i+1)),Cx.hasOwnProperty(t)?{space:Cx[t],local:e}:e}function uE(e){return function(){var t=this.ownerDocument,i=this.namespaceURI;return i===vh&&t.documentElement.namespaceURI===vh?t.createElement(e):t.createElementNS(i,e)}}function dE(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ub(e){var t=Jc(e);return(t.local?dE:uE)(t)}function fE(){}function Zh(e){return e==null?fE:function(){return this.querySelector(e)}}function hE(e){typeof e!="function"&&(e=Zh(e));for(var t=this._groups,i=t.length,o=new Array(i),a=0;a<i;++a)for(var l=t[a],c=l.length,f=o[a]=new Array(c),h,p,m=0;m<c;++m)(h=l[m])&&(p=e.call(h,h.__data__,m,l))&&("__data__"in h&&(p.__data__=h.__data__),f[m]=p);return new hn(o,this._parents)}function pE(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function mE(){return[]}function Vb(e){return e==null?mE:function(){return this.querySelectorAll(e)}}function gE(e){return function(){return pE(e.apply(this,arguments))}}function yE(e){typeof e=="function"?e=gE(e):e=Vb(e);for(var t=this._groups,i=t.length,o=[],a=[],l=0;l<i;++l)for(var c=t[l],f=c.length,h,p=0;p<f;++p)(h=c[p])&&(o.push(e.call(h,h.__data__,p,c)),a.push(h));return new hn(o,a)}function Fb(e){return function(){return this.matches(e)}}function Gb(e){return function(t){return t.matches(e)}}var xE=Array.prototype.find;function vE(e){return function(){return xE.call(this.children,e)}}function bE(){return this.firstElementChild}function wE(e){return this.select(e==null?bE:vE(typeof e=="function"?e:Gb(e)))}var SE=Array.prototype.filter;function NE(){return Array.from(this.children)}function EE(e){return function(){return SE.call(this.children,e)}}function jE(e){return this.selectAll(e==null?NE:EE(typeof e=="function"?e:Gb(e)))}function CE(e){typeof e!="function"&&(e=Fb(e));for(var t=this._groups,i=t.length,o=new Array(i),a=0;a<i;++a)for(var l=t[a],c=l.length,f=o[a]=[],h,p=0;p<c;++p)(h=l[p])&&e.call(h,h.__data__,p,l)&&f.push(h);return new hn(o,this._parents)}function Yb(e){return new Array(e.length)}function kE(){return new hn(this._enter||this._groups.map(Yb),this._parents)}function Dc(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Dc.prototype={constructor:Dc,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function TE(e){return function(){return e}}function AE(e,t,i,o,a,l){for(var c=0,f,h=t.length,p=l.length;c<p;++c)(f=t[c])?(f.__data__=l[c],o[c]=f):i[c]=new Dc(e,l[c]);for(;c<h;++c)(f=t[c])&&(a[c]=f)}function ME(e,t,i,o,a,l,c){var f,h,p=new Map,m=t.length,g=l.length,v=new Array(m),b;for(f=0;f<m;++f)(h=t[f])&&(v[f]=b=c.call(h,h.__data__,f,t)+"",p.has(b)?a[f]=h:p.set(b,h));for(f=0;f<g;++f)b=c.call(e,l[f],f,l)+"",(h=p.get(b))?(o[f]=h,h.__data__=l[f],p.delete(b)):i[f]=new Dc(e,l[f]);for(f=0;f<m;++f)(h=t[f])&&p.get(v[f])===h&&(a[f]=h)}function DE(e){return e.__data__}function _E(e,t){if(!arguments.length)return Array.from(this,DE);var i=t?ME:AE,o=this._parents,a=this._groups;typeof e!="function"&&(e=TE(e));for(var l=a.length,c=new Array(l),f=new Array(l),h=new Array(l),p=0;p<l;++p){var m=o[p],g=a[p],v=g.length,b=OE(e.call(m,m&&m.__data__,p,o)),w=b.length,S=f[p]=new Array(w),j=c[p]=new Array(w),N=h[p]=new Array(v);i(m,g,S,j,N,b,t);for(var k=0,C=0,_,H;k<w;++k)if(_=S[k]){for(k>=C&&(C=k+1);!(H=j[C])&&++C<w;);_._next=H||null}}return c=new hn(c,o),c._enter=f,c._exit=h,c}function OE(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function RE(){return new hn(this._exit||this._groups.map(Yb),this._parents)}function IE(e,t,i){var o=this.enter(),a=this,l=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),i==null?l.remove():i(l),o&&a?o.merge(a).order():a}function LE(e){for(var t=e.selection?e.selection():e,i=this._groups,o=t._groups,a=i.length,l=o.length,c=Math.min(a,l),f=new Array(a),h=0;h<c;++h)for(var p=i[h],m=o[h],g=p.length,v=f[h]=new Array(g),b,w=0;w<g;++w)(b=p[w]||m[w])&&(v[w]=b);for(;h<a;++h)f[h]=i[h];return new hn(f,this._parents)}function zE(){for(var e=this._groups,t=-1,i=e.length;++t<i;)for(var o=e[t],a=o.length-1,l=o[a],c;--a>=0;)(c=o[a])&&(l&&c.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(c,l),l=c);return this}function BE(e){e||(e=$E);function t(g,v){return g&&v?e(g.__data__,v.__data__):!g-!v}for(var i=this._groups,o=i.length,a=new Array(o),l=0;l<o;++l){for(var c=i[l],f=c.length,h=a[l]=new Array(f),p,m=0;m<f;++m)(p=c[m])&&(h[m]=p);h.sort(t)}return new hn(a,this._parents).order()}function $E(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function HE(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function PE(){return Array.from(this)}function qE(){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var o=e[t],a=0,l=o.length;a<l;++a){var c=o[a];if(c)return c}return null}function UE(){let e=0;for(const t of this)++e;return e}function VE(){return!this.node()}function FE(e){for(var t=this._groups,i=0,o=t.length;i<o;++i)for(var a=t[i],l=0,c=a.length,f;l<c;++l)(f=a[l])&&e.call(f,f.__data__,l,a);return this}function GE(e){return function(){this.removeAttribute(e)}}function YE(e){return function(){this.removeAttributeNS(e.space,e.local)}}function XE(e,t){return function(){this.setAttribute(e,t)}}function QE(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function WE(e,t){return function(){var i=t.apply(this,arguments);i==null?this.removeAttribute(e):this.setAttribute(e,i)}}function ZE(e,t){return function(){var i=t.apply(this,arguments);i==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,i)}}function JE(e,t){var i=Jc(e);if(arguments.length<2){var o=this.node();return i.local?o.getAttributeNS(i.space,i.local):o.getAttribute(i)}return this.each((t==null?i.local?YE:GE:typeof t=="function"?i.local?ZE:WE:i.local?QE:XE)(i,t))}function Xb(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function KE(e){return function(){this.style.removeProperty(e)}}function ej(e,t,i){return function(){this.style.setProperty(e,t,i)}}function tj(e,t,i){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,i)}}function nj(e,t,i){return arguments.length>1?this.each((t==null?KE:typeof t=="function"?tj:ej)(e,t,i??"")):qo(this.node(),e)}function qo(e,t){return e.style.getPropertyValue(t)||Xb(e).getComputedStyle(e,null).getPropertyValue(t)}function ij(e){return function(){delete this[e]}}function rj(e,t){return function(){this[e]=t}}function oj(e,t){return function(){var i=t.apply(this,arguments);i==null?delete this[e]:this[e]=i}}function aj(e,t){return arguments.length>1?this.each((t==null?ij:typeof t=="function"?oj:rj)(e,t)):this.node()[e]}function Qb(e){return e.trim().split(/^|\s+/)}function Jh(e){return e.classList||new Wb(e)}function Wb(e){this._node=e,this._names=Qb(e.getAttribute("class")||"")}Wb.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Zb(e,t){for(var i=Jh(e),o=-1,a=t.length;++o<a;)i.add(t[o])}function Jb(e,t){for(var i=Jh(e),o=-1,a=t.length;++o<a;)i.remove(t[o])}function sj(e){return function(){Zb(this,e)}}function lj(e){return function(){Jb(this,e)}}function cj(e,t){return function(){(t.apply(this,arguments)?Zb:Jb)(this,e)}}function uj(e,t){var i=Qb(e+"");if(arguments.length<2){for(var o=Jh(this.node()),a=-1,l=i.length;++a<l;)if(!o.contains(i[a]))return!1;return!0}return this.each((typeof t=="function"?cj:t?sj:lj)(i,t))}function dj(){this.textContent=""}function fj(e){return function(){this.textContent=e}}function hj(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function pj(e){return arguments.length?this.each(e==null?dj:(typeof e=="function"?hj:fj)(e)):this.node().textContent}function mj(){this.innerHTML=""}function gj(e){return function(){this.innerHTML=e}}function yj(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function xj(e){return arguments.length?this.each(e==null?mj:(typeof e=="function"?yj:gj)(e)):this.node().innerHTML}function vj(){this.nextSibling&&this.parentNode.appendChild(this)}function bj(){return this.each(vj)}function wj(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Sj(){return this.each(wj)}function Nj(e){var t=typeof e=="function"?e:Ub(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Ej(){return null}function jj(e,t){var i=typeof e=="function"?e:Ub(e),o=t==null?Ej:typeof t=="function"?t:Zh(t);return this.select(function(){return this.insertBefore(i.apply(this,arguments),o.apply(this,arguments)||null)})}function Cj(){var e=this.parentNode;e&&e.removeChild(this)}function kj(){return this.each(Cj)}function Tj(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Aj(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Mj(e){return this.select(e?Aj:Tj)}function Dj(e){return arguments.length?this.property("__data__",e):this.node().__data__}function _j(e){return function(t){e.call(this,t,this.__data__)}}function Oj(e){return e.trim().split(/^|\s+/).map(function(t){var i="",o=t.indexOf(".");return o>=0&&(i=t.slice(o+1),t=t.slice(0,o)),{type:t,name:i}})}function Rj(e){return function(){var t=this.__on;if(t){for(var i=0,o=-1,a=t.length,l;i<a;++i)l=t[i],(!e.type||l.type===e.type)&&l.name===e.name?this.removeEventListener(l.type,l.listener,l.options):t[++o]=l;++o?t.length=o:delete this.__on}}}function Ij(e,t,i){return function(){var o=this.__on,a,l=_j(t);if(o){for(var c=0,f=o.length;c<f;++c)if((a=o[c]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=l,a.options=i),a.value=t;return}}this.addEventListener(e.type,l,i),a={type:e.type,name:e.name,value:t,listener:l,options:i},o?o.push(a):this.__on=[a]}}function Lj(e,t,i){var o=Oj(e+""),a,l=o.length,c;if(arguments.length<2){var f=this.node().__on;if(f){for(var h=0,p=f.length,m;h<p;++h)for(a=0,m=f[h];a<l;++a)if((c=o[a]).type===m.type&&c.name===m.name)return m.value}return}for(f=t?Ij:Rj,a=0;a<l;++a)this.each(f(o[a],t,i));return this}function Kb(e,t,i){var o=Xb(e),a=o.CustomEvent;typeof a=="function"?a=new a(t,i):(a=o.document.createEvent("Event"),i?(a.initEvent(t,i.bubbles,i.cancelable),a.detail=i.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function zj(e,t){return function(){return Kb(this,e,t)}}function Bj(e,t){return function(){return Kb(this,e,t.apply(this,arguments))}}function $j(e,t){return this.each((typeof t=="function"?Bj:zj)(e,t))}function*Hj(){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var o=e[t],a=0,l=o.length,c;a<l;++a)(c=o[a])&&(yield c)}var e0=[null];function hn(e,t){this._groups=e,this._parents=t}function ks(){return new hn([[document.documentElement]],e0)}function Pj(){return this}hn.prototype=ks.prototype={constructor:hn,select:hE,selectAll:yE,selectChild:wE,selectChildren:jE,filter:CE,data:_E,enter:kE,exit:RE,join:IE,merge:LE,selection:Pj,order:zE,sort:BE,call:HE,nodes:PE,node:qE,size:UE,empty:VE,each:FE,attr:JE,style:nj,property:aj,classed:uj,text:pj,html:xj,raise:bj,lower:Sj,append:Nj,insert:jj,remove:kj,clone:Mj,datum:Dj,on:Lj,dispatch:$j,[Symbol.iterator]:Hj};function dn(e){return typeof e=="string"?new hn([[document.querySelector(e)]],[document.documentElement]):new hn([[e]],e0)}function qj(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Mn(e,t){if(e=qj(e),t===void 0&&(t=e.currentTarget),t){var i=t.ownerSVGElement||t;if(i.createSVGPoint){var o=i.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const Uj={passive:!1},ps={capture:!0,passive:!1};function Lf(e){e.stopImmediatePropagation()}function $o(e){e.preventDefault(),e.stopImmediatePropagation()}function t0(e){var t=e.document.documentElement,i=dn(e).on("dragstart.drag",$o,ps);"onselectstart"in t?i.on("selectstart.drag",$o,ps):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function n0(e,t){var i=e.document.documentElement,o=dn(e).on("dragstart.drag",null);t&&(o.on("click.drag",$o,ps),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in i?o.on("selectstart.drag",null):(i.style.MozUserSelect=i.__noselect,delete i.__noselect)}const sc=e=>()=>e;function bh(e,{sourceEvent:t,subject:i,target:o,identifier:a,active:l,x:c,y:f,dx:h,dy:p,dispatch:m}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:i,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:f,enumerable:!0,configurable:!0},dx:{value:h,enumerable:!0,configurable:!0},dy:{value:p,enumerable:!0,configurable:!0},_:{value:m}})}bh.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Vj(e){return!e.ctrlKey&&!e.button}function Fj(){return this.parentNode}function Gj(e,t){return t??{x:e.x,y:e.y}}function Yj(){return navigator.maxTouchPoints||"ontouchstart"in this}function i0(){var e=Vj,t=Fj,i=Gj,o=Yj,a={},l=Zc("start","drag","end"),c=0,f,h,p,m,g=0;function v(_){_.on("mousedown.drag",b).filter(o).on("touchstart.drag",j).on("touchmove.drag",N,Uj).on("touchend.drag touchcancel.drag",k).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(_,H){if(!(m||!e.call(this,_,H))){var A=C(this,t.call(this,_,H),_,H,"mouse");A&&(dn(_.view).on("mousemove.drag",w,ps).on("mouseup.drag",S,ps),t0(_.view),Lf(_),p=!1,f=_.clientX,h=_.clientY,A("start",_))}}function w(_){if($o(_),!p){var H=_.clientX-f,A=_.clientY-h;p=H*H+A*A>g}a.mouse("drag",_)}function S(_){dn(_.view).on("mousemove.drag mouseup.drag",null),n0(_.view,p),$o(_),a.mouse("end",_)}function j(_,H){if(e.call(this,_,H)){var A=_.changedTouches,$=t.call(this,_,H),V=A.length,G,z;for(G=0;G<V;++G)(z=C(this,$,_,H,A[G].identifier,A[G]))&&(Lf(_),z("start",_,A[G]))}}function N(_){var H=_.changedTouches,A=H.length,$,V;for($=0;$<A;++$)(V=a[H[$].identifier])&&($o(_),V("drag",_,H[$]))}function k(_){var H=_.changedTouches,A=H.length,$,V;for(m&&clearTimeout(m),m=setTimeout(function(){m=null},500),$=0;$<A;++$)(V=a[H[$].identifier])&&(Lf(_),V("end",_,H[$]))}function C(_,H,A,$,V,G){var z=l.copy(),L=Mn(G||A,H),U,Z,M;if((M=i.call(_,new bh("beforestart",{sourceEvent:A,target:v,identifier:V,active:c,x:L[0],y:L[1],dx:0,dy:0,dispatch:z}),$))!=null)return U=M.x-L[0]||0,Z=M.y-L[1]||0,function P(O,q,Y){var Q=L,D;switch(O){case"start":a[V]=P,D=c++;break;case"end":delete a[V],--c;case"drag":L=Mn(Y||q,H),D=c;break}z.call(O,_,new bh(O,{sourceEvent:q,subject:M,target:v,identifier:V,active:D,x:L[0]+U,y:L[1]+Z,dx:L[0]-Q[0],dy:L[1]-Q[1],dispatch:z}),$)}}return v.filter=function(_){return arguments.length?(e=typeof _=="function"?_:sc(!!_),v):e},v.container=function(_){return arguments.length?(t=typeof _=="function"?_:sc(_),v):t},v.subject=function(_){return arguments.length?(i=typeof _=="function"?_:sc(_),v):i},v.touchable=function(_){return arguments.length?(o=typeof _=="function"?_:sc(!!_),v):o},v.on=function(){var _=l.on.apply(l,arguments);return _===l?v:_},v.clickDistance=function(_){return arguments.length?(g=(_=+_)*_,v):Math.sqrt(g)},v}function Kh(e,t,i){e.prototype=t.prototype=i,i.constructor=e}function r0(e,t){var i=Object.create(e.prototype);for(var o in t)i[o]=t[o];return i}function Ts(){}var ms=.7,_c=1/ms,Ho="\\s*([+-]?\\d+)\\s*",gs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Yn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Xj=/^#([0-9a-f]{3,8})$/,Qj=new RegExp(`^rgb\\(${Ho},${Ho},${Ho}\\)$`),Wj=new RegExp(`^rgb\\(${Yn},${Yn},${Yn}\\)$`),Zj=new RegExp(`^rgba\\(${Ho},${Ho},${Ho},${gs}\\)$`),Jj=new RegExp(`^rgba\\(${Yn},${Yn},${Yn},${gs}\\)$`),Kj=new RegExp(`^hsl\\(${gs},${Yn},${Yn}\\)$`),eC=new RegExp(`^hsla\\(${gs},${Yn},${Yn},${gs}\\)$`),kx={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Kh(Ts,Lr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Tx,formatHex:Tx,formatHex8:tC,formatHsl:nC,formatRgb:Ax,toString:Ax});function Tx(){return this.rgb().formatHex()}function tC(){return this.rgb().formatHex8()}function nC(){return o0(this).formatHsl()}function Ax(){return this.rgb().formatRgb()}function Lr(e){var t,i;return e=(e+"").trim().toLowerCase(),(t=Xj.exec(e))?(i=t[1].length,t=parseInt(t[1],16),i===6?Mx(t):i===3?new Zt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):i===8?lc(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):i===4?lc(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Qj.exec(e))?new Zt(t[1],t[2],t[3],1):(t=Wj.exec(e))?new Zt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Zj.exec(e))?lc(t[1],t[2],t[3],t[4]):(t=Jj.exec(e))?lc(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Kj.exec(e))?Ox(t[1],t[2]/100,t[3]/100,1):(t=eC.exec(e))?Ox(t[1],t[2]/100,t[3]/100,t[4]):kx.hasOwnProperty(e)?Mx(kx[e]):e==="transparent"?new Zt(NaN,NaN,NaN,0):null}function Mx(e){return new Zt(e>>16&255,e>>8&255,e&255,1)}function lc(e,t,i,o){return o<=0&&(e=t=i=NaN),new Zt(e,t,i,o)}function iC(e){return e instanceof Ts||(e=Lr(e)),e?(e=e.rgb(),new Zt(e.r,e.g,e.b,e.opacity)):new Zt}function wh(e,t,i,o){return arguments.length===1?iC(e):new Zt(e,t,i,o??1)}function Zt(e,t,i,o){this.r=+e,this.g=+t,this.b=+i,this.opacity=+o}Kh(Zt,wh,r0(Ts,{brighter(e){return e=e==null?_c:Math.pow(_c,e),new Zt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ms:Math.pow(ms,e),new Zt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Zt(Rr(this.r),Rr(this.g),Rr(this.b),Oc(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Dx,formatHex:Dx,formatHex8:rC,formatRgb:_x,toString:_x}));function Dx(){return`#${Or(this.r)}${Or(this.g)}${Or(this.b)}`}function rC(){return`#${Or(this.r)}${Or(this.g)}${Or(this.b)}${Or((isNaN(this.opacity)?1:this.opacity)*255)}`}function _x(){const e=Oc(this.opacity);return`${e===1?"rgb(":"rgba("}${Rr(this.r)}, ${Rr(this.g)}, ${Rr(this.b)}${e===1?")":`, ${e})`}`}function Oc(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Rr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Or(e){return e=Rr(e),(e<16?"0":"")+e.toString(16)}function Ox(e,t,i,o){return o<=0?e=t=i=NaN:i<=0||i>=1?e=t=NaN:t<=0&&(e=NaN),new Dn(e,t,i,o)}function o0(e){if(e instanceof Dn)return new Dn(e.h,e.s,e.l,e.opacity);if(e instanceof Ts||(e=Lr(e)),!e)return new Dn;if(e instanceof Dn)return e;e=e.rgb();var t=e.r/255,i=e.g/255,o=e.b/255,a=Math.min(t,i,o),l=Math.max(t,i,o),c=NaN,f=l-a,h=(l+a)/2;return f?(t===l?c=(i-o)/f+(i<o)*6:i===l?c=(o-t)/f+2:c=(t-i)/f+4,f/=h<.5?l+a:2-l-a,c*=60):f=h>0&&h<1?0:c,new Dn(c,f,h,e.opacity)}function oC(e,t,i,o){return arguments.length===1?o0(e):new Dn(e,t,i,o??1)}function Dn(e,t,i,o){this.h=+e,this.s=+t,this.l=+i,this.opacity=+o}Kh(Dn,oC,r0(Ts,{brighter(e){return e=e==null?_c:Math.pow(_c,e),new Dn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ms:Math.pow(ms,e),new Dn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,i=this.l,o=i+(i<.5?i:1-i)*t,a=2*i-o;return new Zt(zf(e>=240?e-240:e+120,a,o),zf(e,a,o),zf(e<120?e+240:e-120,a,o),this.opacity)},clamp(){return new Dn(Rx(this.h),cc(this.s),cc(this.l),Oc(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Oc(this.opacity);return`${e===1?"hsl(":"hsla("}${Rx(this.h)}, ${cc(this.s)*100}%, ${cc(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Rx(e){return e=(e||0)%360,e<0?e+360:e}function cc(e){return Math.max(0,Math.min(1,e||0))}function zf(e,t,i){return(e<60?t+(i-t)*e/60:e<180?i:e<240?t+(i-t)*(240-e)/60:t)*255}const ep=e=>()=>e;function aC(e,t){return function(i){return e+i*t}}function sC(e,t,i){return e=Math.pow(e,i),t=Math.pow(t,i)-e,i=1/i,function(o){return Math.pow(e+o*t,i)}}function lC(e){return(e=+e)==1?a0:function(t,i){return i-t?sC(t,i,e):ep(isNaN(t)?i:t)}}function a0(e,t){var i=t-e;return i?aC(e,i):ep(isNaN(e)?t:e)}const Rc=(function e(t){var i=lC(t);function o(a,l){var c=i((a=wh(a)).r,(l=wh(l)).r),f=i(a.g,l.g),h=i(a.b,l.b),p=a0(a.opacity,l.opacity);return function(m){return a.r=c(m),a.g=f(m),a.b=h(m),a.opacity=p(m),a+""}}return o.gamma=e,o})(1);function cC(e,t){t||(t=[]);var i=e?Math.min(t.length,e.length):0,o=t.slice(),a;return function(l){for(a=0;a<i;++a)o[a]=e[a]*(1-l)+t[a]*l;return o}}function uC(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function dC(e,t){var i=t?t.length:0,o=e?Math.min(i,e.length):0,a=new Array(o),l=new Array(i),c;for(c=0;c<o;++c)a[c]=ss(e[c],t[c]);for(;c<i;++c)l[c]=t[c];return function(f){for(c=0;c<o;++c)l[c]=a[c](f);return l}}function fC(e,t){var i=new Date;return e=+e,t=+t,function(o){return i.setTime(e*(1-o)+t*o),i}}function Fn(e,t){return e=+e,t=+t,function(i){return e*(1-i)+t*i}}function hC(e,t){var i={},o={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?i[a]=ss(e[a],t[a]):o[a]=t[a];return function(l){for(a in i)o[a]=i[a](l);return o}}var Sh=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Bf=new RegExp(Sh.source,"g");function pC(e){return function(){return e}}function mC(e){return function(t){return e(t)+""}}function s0(e,t){var i=Sh.lastIndex=Bf.lastIndex=0,o,a,l,c=-1,f=[],h=[];for(e=e+"",t=t+"";(o=Sh.exec(e))&&(a=Bf.exec(t));)(l=a.index)>i&&(l=t.slice(i,l),f[c]?f[c]+=l:f[++c]=l),(o=o[0])===(a=a[0])?f[c]?f[c]+=a:f[++c]=a:(f[++c]=null,h.push({i:c,x:Fn(o,a)})),i=Bf.lastIndex;return i<t.length&&(l=t.slice(i),f[c]?f[c]+=l:f[++c]=l),f.length<2?h[0]?mC(h[0].x):pC(t):(t=h.length,function(p){for(var m=0,g;m<t;++m)f[(g=h[m]).i]=g.x(p);return f.join("")})}function ss(e,t){var i=typeof t,o;return t==null||i==="boolean"?ep(t):(i==="number"?Fn:i==="string"?(o=Lr(t))?(t=o,Rc):s0:t instanceof Lr?Rc:t instanceof Date?fC:uC(t)?cC:Array.isArray(t)?dC:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?hC:Fn)(e,t)}var Ix=180/Math.PI,Nh={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function l0(e,t,i,o,a,l){var c,f,h;return(c=Math.sqrt(e*e+t*t))&&(e/=c,t/=c),(h=e*i+t*o)&&(i-=e*h,o-=t*h),(f=Math.sqrt(i*i+o*o))&&(i/=f,o/=f,h/=f),e*o<t*i&&(e=-e,t=-t,h=-h,c=-c),{translateX:a,translateY:l,rotate:Math.atan2(t,e)*Ix,skewX:Math.atan(h)*Ix,scaleX:c,scaleY:f}}var uc;function gC(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Nh:l0(t.a,t.b,t.c,t.d,t.e,t.f)}function yC(e){return e==null||(uc||(uc=document.createElementNS("http://www.w3.org/2000/svg","g")),uc.setAttribute("transform",e),!(e=uc.transform.baseVal.consolidate()))?Nh:(e=e.matrix,l0(e.a,e.b,e.c,e.d,e.e,e.f))}function c0(e,t,i,o){function a(p){return p.length?p.pop()+" ":""}function l(p,m,g,v,b,w){if(p!==g||m!==v){var S=b.push("translate(",null,t,null,i);w.push({i:S-4,x:Fn(p,g)},{i:S-2,x:Fn(m,v)})}else(g||v)&&b.push("translate("+g+t+v+i)}function c(p,m,g,v){p!==m?(p-m>180?m+=360:m-p>180&&(p+=360),v.push({i:g.push(a(g)+"rotate(",null,o)-2,x:Fn(p,m)})):m&&g.push(a(g)+"rotate("+m+o)}function f(p,m,g,v){p!==m?v.push({i:g.push(a(g)+"skewX(",null,o)-2,x:Fn(p,m)}):m&&g.push(a(g)+"skewX("+m+o)}function h(p,m,g,v,b,w){if(p!==g||m!==v){var S=b.push(a(b)+"scale(",null,",",null,")");w.push({i:S-4,x:Fn(p,g)},{i:S-2,x:Fn(m,v)})}else(g!==1||v!==1)&&b.push(a(b)+"scale("+g+","+v+")")}return function(p,m){var g=[],v=[];return p=e(p),m=e(m),l(p.translateX,p.translateY,m.translateX,m.translateY,g,v),c(p.rotate,m.rotate,g,v),f(p.skewX,m.skewX,g,v),h(p.scaleX,p.scaleY,m.scaleX,m.scaleY,g,v),p=m=null,function(b){for(var w=-1,S=v.length,j;++w<S;)g[(j=v[w]).i]=j.x(b);return g.join("")}}}var xC=c0(gC,"px, ","px)","deg)"),vC=c0(yC,", ",")",")"),bC=1e-12;function Lx(e){return((e=Math.exp(e))+1/e)/2}function wC(e){return((e=Math.exp(e))-1/e)/2}function SC(e){return((e=Math.exp(2*e))-1)/(e+1)}const Cc=(function e(t,i,o){function a(l,c){var f=l[0],h=l[1],p=l[2],m=c[0],g=c[1],v=c[2],b=m-f,w=g-h,S=b*b+w*w,j,N;if(S<bC)N=Math.log(v/p)/t,j=function($){return[f+$*b,h+$*w,p*Math.exp(t*$*N)]};else{var k=Math.sqrt(S),C=(v*v-p*p+o*S)/(2*p*i*k),_=(v*v-p*p-o*S)/(2*v*i*k),H=Math.log(Math.sqrt(C*C+1)-C),A=Math.log(Math.sqrt(_*_+1)-_);N=(A-H)/t,j=function($){var V=$*N,G=Lx(H),z=p/(i*k)*(G*SC(t*V+H)-wC(H));return[f+z*b,h+z*w,p*G/Lx(t*V+H)]}}return j.duration=N*1e3*t/Math.SQRT2,j}return a.rho=function(l){var c=Math.max(.001,+l),f=c*c,h=f*f;return e(c,f,h)},a})(Math.SQRT2,2,4);var Uo=0,rs=0,Xa=0,u0=1e3,Ic,os,Lc=0,zr=0,Kc=0,ys=typeof performance=="object"&&performance.now?performance:Date,d0=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function tp(){return zr||(d0(NC),zr=ys.now()+Kc)}function NC(){zr=0}function zc(){this._call=this._time=this._next=null}zc.prototype=f0.prototype={constructor:zc,restart:function(e,t,i){if(typeof e!="function")throw new TypeError("callback is not a function");i=(i==null?tp():+i)+(t==null?0:+t),!this._next&&os!==this&&(os?os._next=this:Ic=this,os=this),this._call=e,this._time=i,Eh()},stop:function(){this._call&&(this._call=null,this._time=1/0,Eh())}};function f0(e,t,i){var o=new zc;return o.restart(e,t,i),o}function EC(){tp(),++Uo;for(var e=Ic,t;e;)(t=zr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Uo}function zx(){zr=(Lc=ys.now())+Kc,Uo=rs=0;try{EC()}finally{Uo=0,CC(),zr=0}}function jC(){var e=ys.now(),t=e-Lc;t>u0&&(Kc-=t,Lc=e)}function CC(){for(var e,t=Ic,i,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(i=t._next,t._next=null,t=e?e._next=i:Ic=i);os=e,Eh(o)}function Eh(e){if(!Uo){rs&&(rs=clearTimeout(rs));var t=e-zr;t>24?(e<1/0&&(rs=setTimeout(zx,e-ys.now()-Kc)),Xa&&(Xa=clearInterval(Xa))):(Xa||(Lc=ys.now(),Xa=setInterval(jC,u0)),Uo=1,d0(zx))}}function Bx(e,t,i){var o=new zc;return t=t==null?0:+t,o.restart(a=>{o.stop(),e(a+t)},t,i),o}var kC=Zc("start","end","cancel","interrupt"),TC=[],h0=0,$x=1,jh=2,kc=3,Hx=4,Ch=5,Tc=6;function eu(e,t,i,o,a,l){var c=e.__transition;if(!c)e.__transition={};else if(i in c)return;AC(e,i,{name:t,index:o,group:a,on:kC,tween:TC,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:h0})}function np(e,t){var i=Ln(e,t);if(i.state>h0)throw new Error("too late; already scheduled");return i}function Qn(e,t){var i=Ln(e,t);if(i.state>kc)throw new Error("too late; already running");return i}function Ln(e,t){var i=e.__transition;if(!i||!(i=i[t]))throw new Error("transition not found");return i}function AC(e,t,i){var o=e.__transition,a;o[t]=i,i.timer=f0(l,0,i.time);function l(p){i.state=$x,i.timer.restart(c,i.delay,i.time),i.delay<=p&&c(p-i.delay)}function c(p){var m,g,v,b;if(i.state!==$x)return h();for(m in o)if(b=o[m],b.name===i.name){if(b.state===kc)return Bx(c);b.state===Hx?(b.state=Tc,b.timer.stop(),b.on.call("interrupt",e,e.__data__,b.index,b.group),delete o[m]):+m<t&&(b.state=Tc,b.timer.stop(),b.on.call("cancel",e,e.__data__,b.index,b.group),delete o[m])}if(Bx(function(){i.state===kc&&(i.state=Hx,i.timer.restart(f,i.delay,i.time),f(p))}),i.state=jh,i.on.call("start",e,e.__data__,i.index,i.group),i.state===jh){for(i.state=kc,a=new Array(v=i.tween.length),m=0,g=-1;m<v;++m)(b=i.tween[m].value.call(e,e.__data__,i.index,i.group))&&(a[++g]=b);a.length=g+1}}function f(p){for(var m=p<i.duration?i.ease.call(null,p/i.duration):(i.timer.restart(h),i.state=Ch,1),g=-1,v=a.length;++g<v;)a[g].call(e,m);i.state===Ch&&(i.on.call("end",e,e.__data__,i.index,i.group),h())}function h(){i.state=Tc,i.timer.stop(),delete o[t];for(var p in o)return;delete e.__transition}}function Ac(e,t){var i=e.__transition,o,a,l=!0,c;if(i){t=t==null?null:t+"";for(c in i){if((o=i[c]).name!==t){l=!1;continue}a=o.state>jh&&o.state<Ch,o.state=Tc,o.timer.stop(),o.on.call(a?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete i[c]}l&&delete e.__transition}}function MC(e){return this.each(function(){Ac(this,e)})}function DC(e,t){var i,o;return function(){var a=Qn(this,e),l=a.tween;if(l!==i){o=i=l;for(var c=0,f=o.length;c<f;++c)if(o[c].name===t){o=o.slice(),o.splice(c,1);break}}a.tween=o}}function _C(e,t,i){var o,a;if(typeof i!="function")throw new Error;return function(){var l=Qn(this,e),c=l.tween;if(c!==o){a=(o=c).slice();for(var f={name:t,value:i},h=0,p=a.length;h<p;++h)if(a[h].name===t){a[h]=f;break}h===p&&a.push(f)}l.tween=a}}function OC(e,t){var i=this._id;if(e+="",arguments.length<2){for(var o=Ln(this.node(),i).tween,a=0,l=o.length,c;a<l;++a)if((c=o[a]).name===e)return c.value;return null}return this.each((t==null?DC:_C)(i,e,t))}function ip(e,t,i){var o=e._id;return e.each(function(){var a=Qn(this,o);(a.value||(a.value={}))[t]=i.apply(this,arguments)}),function(a){return Ln(a,o).value[t]}}function p0(e,t){var i;return(typeof t=="number"?Fn:t instanceof Lr?Rc:(i=Lr(t))?(t=i,Rc):s0)(e,t)}function RC(e){return function(){this.removeAttribute(e)}}function IC(e){return function(){this.removeAttributeNS(e.space,e.local)}}function LC(e,t,i){var o,a=i+"",l;return function(){var c=this.getAttribute(e);return c===a?null:c===o?l:l=t(o=c,i)}}function zC(e,t,i){var o,a=i+"",l;return function(){var c=this.getAttributeNS(e.space,e.local);return c===a?null:c===o?l:l=t(o=c,i)}}function BC(e,t,i){var o,a,l;return function(){var c,f=i(this),h;return f==null?void this.removeAttribute(e):(c=this.getAttribute(e),h=f+"",c===h?null:c===o&&h===a?l:(a=h,l=t(o=c,f)))}}function $C(e,t,i){var o,a,l;return function(){var c,f=i(this),h;return f==null?void this.removeAttributeNS(e.space,e.local):(c=this.getAttributeNS(e.space,e.local),h=f+"",c===h?null:c===o&&h===a?l:(a=h,l=t(o=c,f)))}}function HC(e,t){var i=Jc(e),o=i==="transform"?vC:p0;return this.attrTween(e,typeof t=="function"?(i.local?$C:BC)(i,o,ip(this,"attr."+e,t)):t==null?(i.local?IC:RC)(i):(i.local?zC:LC)(i,o,t))}function PC(e,t){return function(i){this.setAttribute(e,t.call(this,i))}}function qC(e,t){return function(i){this.setAttributeNS(e.space,e.local,t.call(this,i))}}function UC(e,t){var i,o;function a(){var l=t.apply(this,arguments);return l!==o&&(i=(o=l)&&qC(e,l)),i}return a._value=t,a}function VC(e,t){var i,o;function a(){var l=t.apply(this,arguments);return l!==o&&(i=(o=l)&&PC(e,l)),i}return a._value=t,a}function FC(e,t){var i="attr."+e;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;var o=Jc(e);return this.tween(i,(o.local?UC:VC)(o,t))}function GC(e,t){return function(){np(this,e).delay=+t.apply(this,arguments)}}function YC(e,t){return t=+t,function(){np(this,e).delay=t}}function XC(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?GC:YC)(t,e)):Ln(this.node(),t).delay}function QC(e,t){return function(){Qn(this,e).duration=+t.apply(this,arguments)}}function WC(e,t){return t=+t,function(){Qn(this,e).duration=t}}function ZC(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?QC:WC)(t,e)):Ln(this.node(),t).duration}function JC(e,t){if(typeof t!="function")throw new Error;return function(){Qn(this,e).ease=t}}function KC(e){var t=this._id;return arguments.length?this.each(JC(t,e)):Ln(this.node(),t).ease}function ek(e,t){return function(){var i=t.apply(this,arguments);if(typeof i!="function")throw new Error;Qn(this,e).ease=i}}function tk(e){if(typeof e!="function")throw new Error;return this.each(ek(this._id,e))}function nk(e){typeof e!="function"&&(e=Fb(e));for(var t=this._groups,i=t.length,o=new Array(i),a=0;a<i;++a)for(var l=t[a],c=l.length,f=o[a]=[],h,p=0;p<c;++p)(h=l[p])&&e.call(h,h.__data__,p,l)&&f.push(h);return new Si(o,this._parents,this._name,this._id)}function ik(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,i=e._groups,o=t.length,a=i.length,l=Math.min(o,a),c=new Array(o),f=0;f<l;++f)for(var h=t[f],p=i[f],m=h.length,g=c[f]=new Array(m),v,b=0;b<m;++b)(v=h[b]||p[b])&&(g[b]=v);for(;f<o;++f)c[f]=t[f];return new Si(c,this._parents,this._name,this._id)}function rk(e){return(e+"").trim().split(/^|\s+/).every(function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||t==="start"})}function ok(e,t,i){var o,a,l=rk(t)?np:Qn;return function(){var c=l(this,e),f=c.on;f!==o&&(a=(o=f).copy()).on(t,i),c.on=a}}function ak(e,t){var i=this._id;return arguments.length<2?Ln(this.node(),i).on.on(e):this.each(ok(i,e,t))}function sk(e){return function(){var t=this.parentNode;for(var i in this.__transition)if(+i!==e)return;t&&t.removeChild(this)}}function lk(){return this.on("end.remove",sk(this._id))}function ck(e){var t=this._name,i=this._id;typeof e!="function"&&(e=Zh(e));for(var o=this._groups,a=o.length,l=new Array(a),c=0;c<a;++c)for(var f=o[c],h=f.length,p=l[c]=new Array(h),m,g,v=0;v<h;++v)(m=f[v])&&(g=e.call(m,m.__data__,v,f))&&("__data__"in m&&(g.__data__=m.__data__),p[v]=g,eu(p[v],t,i,v,p,Ln(m,i)));return new Si(l,this._parents,t,i)}function uk(e){var t=this._name,i=this._id;typeof e!="function"&&(e=Vb(e));for(var o=this._groups,a=o.length,l=[],c=[],f=0;f<a;++f)for(var h=o[f],p=h.length,m,g=0;g<p;++g)if(m=h[g]){for(var v=e.call(m,m.__data__,g,h),b,w=Ln(m,i),S=0,j=v.length;S<j;++S)(b=v[S])&&eu(b,t,i,S,v,w);l.push(v),c.push(m)}return new Si(l,c,t,i)}var dk=ks.prototype.constructor;function fk(){return new dk(this._groups,this._parents)}function hk(e,t){var i,o,a;return function(){var l=qo(this,e),c=(this.style.removeProperty(e),qo(this,e));return l===c?null:l===i&&c===o?a:a=t(i=l,o=c)}}function m0(e){return function(){this.style.removeProperty(e)}}function pk(e,t,i){var o,a=i+"",l;return function(){var c=qo(this,e);return c===a?null:c===o?l:l=t(o=c,i)}}function mk(e,t,i){var o,a,l;return function(){var c=qo(this,e),f=i(this),h=f+"";return f==null&&(h=f=(this.style.removeProperty(e),qo(this,e))),c===h?null:c===o&&h===a?l:(a=h,l=t(o=c,f))}}function gk(e,t){var i,o,a,l="style."+t,c="end."+l,f;return function(){var h=Qn(this,e),p=h.on,m=h.value[l]==null?f||(f=m0(t)):void 0;(p!==i||a!==m)&&(o=(i=p).copy()).on(c,a=m),h.on=o}}function yk(e,t,i){var o=(e+="")=="transform"?xC:p0;return t==null?this.styleTween(e,hk(e,o)).on("end.style."+e,m0(e)):typeof t=="function"?this.styleTween(e,mk(e,o,ip(this,"style."+e,t))).each(gk(this._id,e)):this.styleTween(e,pk(e,o,t),i).on("end.style."+e,null)}function xk(e,t,i){return function(o){this.style.setProperty(e,t.call(this,o),i)}}function vk(e,t,i){var o,a;function l(){var c=t.apply(this,arguments);return c!==a&&(o=(a=c)&&xk(e,c,i)),o}return l._value=t,l}function bk(e,t,i){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,vk(e,t,i??""))}function wk(e){return function(){this.textContent=e}}function Sk(e){return function(){var t=e(this);this.textContent=t??""}}function Nk(e){return this.tween("text",typeof e=="function"?Sk(ip(this,"text",e)):wk(e==null?"":e+""))}function Ek(e){return function(t){this.textContent=e.call(this,t)}}function jk(e){var t,i;function o(){var a=e.apply(this,arguments);return a!==i&&(t=(i=a)&&Ek(a)),t}return o._value=e,o}function Ck(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,jk(e))}function kk(){for(var e=this._name,t=this._id,i=g0(),o=this._groups,a=o.length,l=0;l<a;++l)for(var c=o[l],f=c.length,h,p=0;p<f;++p)if(h=c[p]){var m=Ln(h,t);eu(h,e,i,p,c,{time:m.time+m.delay+m.duration,delay:0,duration:m.duration,ease:m.ease})}return new Si(o,this._parents,e,i)}function Tk(){var e,t,i=this,o=i._id,a=i.size();return new Promise(function(l,c){var f={value:c},h={value:function(){--a===0&&l()}};i.each(function(){var p=Qn(this,o),m=p.on;m!==e&&(t=(e=m).copy(),t._.cancel.push(f),t._.interrupt.push(f),t._.end.push(h)),p.on=t}),a===0&&l()})}var Ak=0;function Si(e,t,i,o){this._groups=e,this._parents=t,this._name=i,this._id=o}function g0(){return++Ak}var bi=ks.prototype;Si.prototype={constructor:Si,select:ck,selectAll:uk,selectChild:bi.selectChild,selectChildren:bi.selectChildren,filter:nk,merge:ik,selection:fk,transition:kk,call:bi.call,nodes:bi.nodes,node:bi.node,size:bi.size,empty:bi.empty,each:bi.each,on:ak,attr:HC,attrTween:FC,style:yk,styleTween:bk,text:Nk,textTween:Ck,remove:lk,tween:OC,delay:XC,duration:ZC,ease:KC,easeVarying:tk,end:Tk,[Symbol.iterator]:bi[Symbol.iterator]};function Mk(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Dk={time:null,delay:0,duration:250,ease:Mk};function _k(e,t){for(var i;!(i=e.__transition)||!(i=i[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return i}function Ok(e){var t,i;e instanceof Si?(t=e._id,e=e._name):(t=g0(),(i=Dk).time=tp(),e=e==null?null:e+"");for(var o=this._groups,a=o.length,l=0;l<a;++l)for(var c=o[l],f=c.length,h,p=0;p<f;++p)(h=c[p])&&eu(h,e,t,p,c,i||_k(h,t));return new Si(o,this._parents,e,t)}ks.prototype.interrupt=MC;ks.prototype.transition=Ok;const dc=e=>()=>e;function Rk(e,{sourceEvent:t,target:i,transform:o,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:a}})}function wi(e,t,i){this.k=e,this.x=t,this.y=i}wi.prototype={constructor:wi,scale:function(e){return e===1?this:new wi(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new wi(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var tu=new wi(1,0,0);y0.prototype=wi.prototype;function y0(e){for(;!e.__zoom;)if(!(e=e.parentNode))return tu;return e.__zoom}function $f(e){e.stopImmediatePropagation()}function Qa(e){e.preventDefault(),e.stopImmediatePropagation()}function Ik(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Lk(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Px(){return this.__zoom||tu}function zk(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Bk(){return navigator.maxTouchPoints||"ontouchstart"in this}function $k(e,t,i){var o=e.invertX(t[0][0])-i[0][0],a=e.invertX(t[1][0])-i[1][0],l=e.invertY(t[0][1])-i[0][1],c=e.invertY(t[1][1])-i[1][1];return e.translate(a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a),c>l?(l+c)/2:Math.min(0,l)||Math.max(0,c))}function x0(){var e=Ik,t=Lk,i=$k,o=zk,a=Bk,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],f=250,h=Cc,p=Zc("start","zoom","end"),m,g,v,b=500,w=150,S=0,j=10;function N(M){M.property("__zoom",Px).on("wheel.zoom",V,{passive:!1}).on("mousedown.zoom",G).on("dblclick.zoom",z).filter(a).on("touchstart.zoom",L).on("touchmove.zoom",U).on("touchend.zoom touchcancel.zoom",Z).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}N.transform=function(M,P,O,q){var Y=M.selection?M.selection():M;Y.property("__zoom",Px),M!==Y?H(M,P,O,q):Y.interrupt().each(function(){A(this,arguments).event(q).start().zoom(null,typeof P=="function"?P.apply(this,arguments):P).end()})},N.scaleBy=function(M,P,O,q){N.scaleTo(M,function(){var Y=this.__zoom.k,Q=typeof P=="function"?P.apply(this,arguments):P;return Y*Q},O,q)},N.scaleTo=function(M,P,O,q){N.transform(M,function(){var Y=t.apply(this,arguments),Q=this.__zoom,D=O==null?_(Y):typeof O=="function"?O.apply(this,arguments):O,B=Q.invert(D),F=typeof P=="function"?P.apply(this,arguments):P;return i(C(k(Q,F),D,B),Y,c)},O,q)},N.translateBy=function(M,P,O,q){N.transform(M,function(){return i(this.__zoom.translate(typeof P=="function"?P.apply(this,arguments):P,typeof O=="function"?O.apply(this,arguments):O),t.apply(this,arguments),c)},null,q)},N.translateTo=function(M,P,O,q,Y){N.transform(M,function(){var Q=t.apply(this,arguments),D=this.__zoom,B=q==null?_(Q):typeof q=="function"?q.apply(this,arguments):q;return i(tu.translate(B[0],B[1]).scale(D.k).translate(typeof P=="function"?-P.apply(this,arguments):-P,typeof O=="function"?-O.apply(this,arguments):-O),Q,c)},q,Y)};function k(M,P){return P=Math.max(l[0],Math.min(l[1],P)),P===M.k?M:new wi(P,M.x,M.y)}function C(M,P,O){var q=P[0]-O[0]*M.k,Y=P[1]-O[1]*M.k;return q===M.x&&Y===M.y?M:new wi(M.k,q,Y)}function _(M){return[(+M[0][0]+ +M[1][0])/2,(+M[0][1]+ +M[1][1])/2]}function H(M,P,O,q){M.on("start.zoom",function(){A(this,arguments).event(q).start()}).on("interrupt.zoom end.zoom",function(){A(this,arguments).event(q).end()}).tween("zoom",function(){var Y=this,Q=arguments,D=A(Y,Q).event(q),B=t.apply(Y,Q),F=O==null?_(B):typeof O=="function"?O.apply(Y,Q):O,I=Math.max(B[1][0]-B[0][0],B[1][1]-B[0][1]),ie=Y.__zoom,te=typeof P=="function"?P.apply(Y,Q):P,re=h(ie.invert(F).concat(I/ie.k),te.invert(F).concat(I/te.k));return function(de){if(de===1)de=te;else{var ae=re(de),fe=I/ae[2];de=new wi(fe,F[0]-ae[0]*fe,F[1]-ae[1]*fe)}D.zoom(null,de)}})}function A(M,P,O){return!O&&M.__zooming||new $(M,P)}function $(M,P){this.that=M,this.args=P,this.active=0,this.sourceEvent=null,this.extent=t.apply(M,P),this.taps=0}$.prototype={event:function(M){return M&&(this.sourceEvent=M),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(M,P){return this.mouse&&M!=="mouse"&&(this.mouse[1]=P.invert(this.mouse[0])),this.touch0&&M!=="touch"&&(this.touch0[1]=P.invert(this.touch0[0])),this.touch1&&M!=="touch"&&(this.touch1[1]=P.invert(this.touch1[0])),this.that.__zoom=P,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(M){var P=dn(this.that).datum();p.call(M,this.that,new Rk(M,{sourceEvent:this.sourceEvent,target:N,transform:this.that.__zoom,dispatch:p}),P)}};function V(M,...P){if(!e.apply(this,arguments))return;var O=A(this,P).event(M),q=this.__zoom,Y=Math.max(l[0],Math.min(l[1],q.k*Math.pow(2,o.apply(this,arguments)))),Q=Mn(M);if(O.wheel)(O.mouse[0][0]!==Q[0]||O.mouse[0][1]!==Q[1])&&(O.mouse[1]=q.invert(O.mouse[0]=Q)),clearTimeout(O.wheel);else{if(q.k===Y)return;O.mouse=[Q,q.invert(Q)],Ac(this),O.start()}Qa(M),O.wheel=setTimeout(D,w),O.zoom("mouse",i(C(k(q,Y),O.mouse[0],O.mouse[1]),O.extent,c));function D(){O.wheel=null,O.end()}}function G(M,...P){if(v||!e.apply(this,arguments))return;var O=M.currentTarget,q=A(this,P,!0).event(M),Y=dn(M.view).on("mousemove.zoom",F,!0).on("mouseup.zoom",I,!0),Q=Mn(M,O),D=M.clientX,B=M.clientY;t0(M.view),$f(M),q.mouse=[Q,this.__zoom.invert(Q)],Ac(this),q.start();function F(ie){if(Qa(ie),!q.moved){var te=ie.clientX-D,re=ie.clientY-B;q.moved=te*te+re*re>S}q.event(ie).zoom("mouse",i(C(q.that.__zoom,q.mouse[0]=Mn(ie,O),q.mouse[1]),q.extent,c))}function I(ie){Y.on("mousemove.zoom mouseup.zoom",null),n0(ie.view,q.moved),Qa(ie),q.event(ie).end()}}function z(M,...P){if(e.apply(this,arguments)){var O=this.__zoom,q=Mn(M.changedTouches?M.changedTouches[0]:M,this),Y=O.invert(q),Q=O.k*(M.shiftKey?.5:2),D=i(C(k(O,Q),q,Y),t.apply(this,P),c);Qa(M),f>0?dn(this).transition().duration(f).call(H,D,q,M):dn(this).call(N.transform,D,q,M)}}function L(M,...P){if(e.apply(this,arguments)){var O=M.touches,q=O.length,Y=A(this,P,M.changedTouches.length===q).event(M),Q,D,B,F;for($f(M),D=0;D<q;++D)B=O[D],F=Mn(B,this),F=[F,this.__zoom.invert(F),B.identifier],Y.touch0?!Y.touch1&&Y.touch0[2]!==F[2]&&(Y.touch1=F,Y.taps=0):(Y.touch0=F,Q=!0,Y.taps=1+!!m);m&&(m=clearTimeout(m)),Q&&(Y.taps<2&&(g=F[0],m=setTimeout(function(){m=null},b)),Ac(this),Y.start())}}function U(M,...P){if(this.__zooming){var O=A(this,P).event(M),q=M.changedTouches,Y=q.length,Q,D,B,F;for(Qa(M),Q=0;Q<Y;++Q)D=q[Q],B=Mn(D,this),O.touch0&&O.touch0[2]===D.identifier?O.touch0[0]=B:O.touch1&&O.touch1[2]===D.identifier&&(O.touch1[0]=B);if(D=O.that.__zoom,O.touch1){var I=O.touch0[0],ie=O.touch0[1],te=O.touch1[0],re=O.touch1[1],de=(de=te[0]-I[0])*de+(de=te[1]-I[1])*de,ae=(ae=re[0]-ie[0])*ae+(ae=re[1]-ie[1])*ae;D=k(D,Math.sqrt(de/ae)),B=[(I[0]+te[0])/2,(I[1]+te[1])/2],F=[(ie[0]+re[0])/2,(ie[1]+re[1])/2]}else if(O.touch0)B=O.touch0[0],F=O.touch0[1];else return;O.zoom("touch",i(C(D,B,F),O.extent,c))}}function Z(M,...P){if(this.__zooming){var O=A(this,P).event(M),q=M.changedTouches,Y=q.length,Q,D;for($f(M),v&&clearTimeout(v),v=setTimeout(function(){v=null},b),Q=0;Q<Y;++Q)D=q[Q],O.touch0&&O.touch0[2]===D.identifier?delete O.touch0:O.touch1&&O.touch1[2]===D.identifier&&delete O.touch1;if(O.touch1&&!O.touch0&&(O.touch0=O.touch1,delete O.touch1),O.touch0)O.touch0[1]=this.__zoom.invert(O.touch0[0]);else if(O.end(),O.taps===2&&(D=Mn(D,this),Math.hypot(g[0]-D[0],g[1]-D[1])<j)){var B=dn(this).on("dblclick.zoom");B&&B.apply(this,arguments)}}}return N.wheelDelta=function(M){return arguments.length?(o=typeof M=="function"?M:dc(+M),N):o},N.filter=function(M){return arguments.length?(e=typeof M=="function"?M:dc(!!M),N):e},N.touchable=function(M){return arguments.length?(a=typeof M=="function"?M:dc(!!M),N):a},N.extent=function(M){return arguments.length?(t=typeof M=="function"?M:dc([[+M[0][0],+M[0][1]],[+M[1][0],+M[1][1]]]),N):t},N.scaleExtent=function(M){return arguments.length?(l[0]=+M[0],l[1]=+M[1],N):[l[0],l[1]]},N.translateExtent=function(M){return arguments.length?(c[0][0]=+M[0][0],c[1][0]=+M[1][0],c[0][1]=+M[0][1],c[1][1]=+M[1][1],N):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},N.constrain=function(M){return arguments.length?(i=M,N):i},N.duration=function(M){return arguments.length?(f=+M,N):f},N.interpolate=function(M){return arguments.length?(h=M,N):h},N.on=function(){var M=p.on.apply(p,arguments);return M===p?N:M},N.clickDistance=function(M){return arguments.length?(S=(M=+M)*M,N):Math.sqrt(S)},N.tapDistance=function(M){return arguments.length?(j=+M,N):j},N}const Xn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:i,targetHandle:o})=>`Couldn't create edge for ${e} handle id: "${e==="source"?i:o}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},xs=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],v0=["Enter"," ","Escape"],b0={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:i})=>`Moved selected node ${e}. New position, x: ${t}, y: ${i}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Vo;(function(e){e.Strict="strict",e.Loose="loose"})(Vo||(Vo={}));var Ir;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Ir||(Ir={}));var vs;(function(e){e.Partial="partial",e.Full="full"})(vs||(vs={}));const w0={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var ar;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(ar||(ar={}));var Bc;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Bc||(Bc={}));var ge;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(ge||(ge={}));const qx={[ge.Left]:ge.Right,[ge.Right]:ge.Left,[ge.Top]:ge.Bottom,[ge.Bottom]:ge.Top};function S0(e){return e===null?null:e?"valid":"invalid"}const N0=e=>"id"in e&&"source"in e&&"target"in e,Hk=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),rp=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),As=(e,t=[0,0])=>{const{width:i,height:o}=Ni(e),a=e.origin??t,l=i*a[0],c=o*a[1];return{x:e.position.x-l,y:e.position.y-c}},Pk=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const i=e.reduce((o,a)=>{const l=typeof a=="string";let c=!t.nodeLookup&&!l?a:void 0;t.nodeLookup&&(c=l?t.nodeLookup.get(a):rp(a)?a:t.nodeLookup.get(a.id));const f=c?$c(c,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return nu(o,f)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return iu(i)},Ms=(e,t={})=>{let i={x:1/0,y:1/0,x2:-1/0,y2:-1/0},o=!1;return e.forEach(a=>{(t.filter===void 0||t.filter(a))&&(i=nu(i,$c(a)),o=!0)}),o?iu(i):{x:0,y:0,width:0,height:0}},op=(e,t,[i,o,a]=[0,0,1],l=!1,c=!1)=>{const f={..._s(t,[i,o,a]),width:t.width/a,height:t.height/a},h=[];for(const p of e.values()){const{measured:m,selectable:g=!0,hidden:v=!1}=p;if(c&&!g||v)continue;const b=m.width??p.width??p.initialWidth??null,w=m.height??p.height??p.initialHeight??null,S=bs(f,Go(p)),j=(b??0)*(w??0),N=l&&S>0;(!p.internals.handleBounds||N||S>=j||p.dragging)&&h.push(p)}return h},qk=(e,t)=>{const i=new Set;return e.forEach(o=>{i.add(o.id)}),t.filter(o=>i.has(o.source)||i.has(o.target))};function Uk(e,t){const i=new Map,o=t?.nodes?new Set(t.nodes.map(a=>a.id)):null;return e.forEach(a=>{a.measured.width&&a.measured.height&&(t?.includeHiddenNodes||!a.hidden)&&(!o||o.has(a.id))&&i.set(a.id,a)}),i}async function Vk({nodes:e,width:t,height:i,panZoom:o,minZoom:a,maxZoom:l},c){if(e.size===0)return Promise.resolve(!0);const f=Uk(e,c),h=Ms(f),p=ap(h,t,i,c?.minZoom??a,c?.maxZoom??l,c?.padding??.1);return await o.setViewport(p,{duration:c?.duration,ease:c?.ease,interpolate:c?.interpolate}),Promise.resolve(!0)}function E0({nodeId:e,nextPosition:t,nodeLookup:i,nodeOrigin:o=[0,0],nodeExtent:a,onError:l}){const c=i.get(e),f=c.parentId?i.get(c.parentId):void 0,{x:h,y:p}=f?f.internals.positionAbsolute:{x:0,y:0},m=c.origin??o;let g=c.extent||a;if(c.extent==="parent"&&!c.expandParent)if(!f)l?.("005",Xn.error005());else{const b=f.measured.width,w=f.measured.height;b&&w&&(g=[[h,p],[h+b,p+w]])}else f&&Yo(c.extent)&&(g=[[c.extent[0][0]+h,c.extent[0][1]+p],[c.extent[1][0]+h,c.extent[1][1]+p]]);const v=Yo(g)?Br(t,g,c.measured):t;return(c.measured.width===void 0||c.measured.height===void 0)&&l?.("015",Xn.error015()),{position:{x:v.x-h+(c.measured.width??0)*m[0],y:v.y-p+(c.measured.height??0)*m[1]},positionAbsolute:v}}async function Fk({nodesToRemove:e=[],edgesToRemove:t=[],nodes:i,edges:o,onBeforeDelete:a}){const l=new Set(e.map(v=>v.id)),c=[];for(const v of i){if(v.deletable===!1)continue;const b=l.has(v.id),w=!b&&v.parentId&&c.find(S=>S.id===v.parentId);(b||w)&&c.push(v)}const f=new Set(t.map(v=>v.id)),h=o.filter(v=>v.deletable!==!1),m=qk(c,h);for(const v of h)f.has(v.id)&&!m.find(w=>w.id===v.id)&&m.push(v);if(!a)return{edges:m,nodes:c};const g=await a({nodes:c,edges:m});return typeof g=="boolean"?g?{edges:m,nodes:c}:{edges:[],nodes:[]}:g}const Fo=(e,t=0,i=1)=>Math.min(Math.max(e,t),i),Br=(e={x:0,y:0},t,i)=>({x:Fo(e.x,t[0][0],t[1][0]-(i?.width??0)),y:Fo(e.y,t[0][1],t[1][1]-(i?.height??0))});function j0(e,t,i){const{width:o,height:a}=Ni(i),{x:l,y:c}=i.internals.positionAbsolute;return Br(e,[[l,c],[l+o,c+a]],t)}const Ux=(e,t,i)=>e<t?Fo(Math.abs(e-t),1,t)/t:e>i?-Fo(Math.abs(e-i),1,t)/t:0,C0=(e,t,i=15,o=40)=>{const a=Ux(e.x,o,t.width-o)*i,l=Ux(e.y,o,t.height-o)*i;return[a,l]},nu=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),kh=({x:e,y:t,width:i,height:o})=>({x:e,y:t,x2:e+i,y2:t+o}),iu=({x:e,y:t,x2:i,y2:o})=>({x:e,y:t,width:i-e,height:o-t}),Go=(e,t=[0,0])=>{const{x:i,y:o}=rp(e)?e.internals.positionAbsolute:As(e,t);return{x:i,y:o,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},$c=(e,t=[0,0])=>{const{x:i,y:o}=rp(e)?e.internals.positionAbsolute:As(e,t);return{x:i,y:o,x2:i+(e.measured?.width??e.width??e.initialWidth??0),y2:o+(e.measured?.height??e.height??e.initialHeight??0)}},k0=(e,t)=>iu(nu(kh(e),kh(t))),bs=(e,t)=>{const i=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(i*o)},Vx=e=>_n(e.width)&&_n(e.height)&&_n(e.x)&&_n(e.y),_n=e=>!isNaN(e)&&isFinite(e),Gk=(e,t)=>{},Ds=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),_s=({x:e,y:t},[i,o,a],l=!1,c=[1,1])=>{const f={x:(e-i)/a,y:(t-o)/a};return l?Ds(f,c):f},Hc=({x:e,y:t},[i,o,a])=>({x:e*a+i,y:t*a+o});function Do(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const i=parseFloat(e);if(!Number.isNaN(i))return Math.floor(i)}if(typeof e=="string"&&e.endsWith("%")){const i=parseFloat(e);if(!Number.isNaN(i))return Math.floor(t*i*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function Yk(e,t,i){if(typeof e=="string"||typeof e=="number"){const o=Do(e,i),a=Do(e,t);return{top:o,right:a,bottom:o,left:a,x:a*2,y:o*2}}if(typeof e=="object"){const o=Do(e.top??e.y??0,i),a=Do(e.bottom??e.y??0,i),l=Do(e.left??e.x??0,t),c=Do(e.right??e.x??0,t);return{top:o,right:c,bottom:a,left:l,x:l+c,y:o+a}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function Xk(e,t,i,o,a,l){const{x:c,y:f}=Hc(e,[t,i,o]),{x:h,y:p}=Hc({x:e.x+e.width,y:e.y+e.height},[t,i,o]),m=a-h,g=l-p;return{left:Math.floor(c),top:Math.floor(f),right:Math.floor(m),bottom:Math.floor(g)}}const ap=(e,t,i,o,a,l)=>{const c=Yk(l,t,i),f=(t-c.x)/e.width,h=(i-c.y)/e.height,p=Math.min(f,h),m=Fo(p,o,a),g=e.x+e.width/2,v=e.y+e.height/2,b=t/2-g*m,w=i/2-v*m,S=Xk(e,b,w,m,t,i),j={left:Math.min(S.left-c.left,0),top:Math.min(S.top-c.top,0),right:Math.min(S.right-c.right,0),bottom:Math.min(S.bottom-c.bottom,0)};return{x:b-j.left+j.right,y:w-j.top+j.bottom,zoom:m}},ws=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Yo(e){return e!=null&&e!=="parent"}function Ni(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function T0(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function A0(e,t={width:0,height:0},i,o,a){const l={...e},c=o.get(i);if(c){const f=c.origin||a;l.x+=c.internals.positionAbsolute.x-(t.width??0)*f[0],l.y+=c.internals.positionAbsolute.y-(t.height??0)*f[1]}return l}function Fx(e,t){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}function Qk(){let e,t;return{promise:new Promise((o,a)=>{e=o,t=a}),resolve:e,reject:t}}function Wk(e){return{...b0,...e||{}}}function ls(e,{snapGrid:t=[0,0],snapToGrid:i=!1,transform:o,containerBounds:a}){const{x:l,y:c}=On(e),f=_s({x:l-(a?.left??0),y:c-(a?.top??0)},o),{x:h,y:p}=i?Ds(f,t):f;return{xSnapped:h,ySnapped:p,...f}}const sp=e=>({width:e.offsetWidth,height:e.offsetHeight}),M0=e=>e?.getRootNode?.()||window?.document,Zk=["INPUT","SELECT","TEXTAREA"];function D0(e){const t=e.composedPath?.()?.[0]||e.target;return t?.nodeType!==1?!1:Zk.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const _0=e=>"clientX"in e,On=(e,t)=>{const i=_0(e),o=i?e.clientX:e.touches?.[0].clientX,a=i?e.clientY:e.touches?.[0].clientY;return{x:o-(t?.left??0),y:a-(t?.top??0)}},Gx=(e,t,i,o,a)=>{const l=t.querySelectorAll(`.${e}`);return!l||!l.length?null:Array.from(l).map(c=>{const f=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),type:e,nodeId:a,position:c.getAttribute("data-handlepos"),x:(f.left-i.left)/o,y:(f.top-i.top)/o,...sp(c)}})};function O0({sourceX:e,sourceY:t,targetX:i,targetY:o,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:f}){const h=e*.125+a*.375+c*.375+i*.125,p=t*.125+l*.375+f*.375+o*.125,m=Math.abs(h-e),g=Math.abs(p-t);return[h,p,m,g]}function fc(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Yx({pos:e,x1:t,y1:i,x2:o,y2:a,c:l}){switch(e){case ge.Left:return[t-fc(t-o,l),i];case ge.Right:return[t+fc(o-t,l),i];case ge.Top:return[t,i-fc(i-a,l)];case ge.Bottom:return[t,i+fc(a-i,l)]}}function R0({sourceX:e,sourceY:t,sourcePosition:i=ge.Bottom,targetX:o,targetY:a,targetPosition:l=ge.Top,curvature:c=.25}){const[f,h]=Yx({pos:i,x1:e,y1:t,x2:o,y2:a,c}),[p,m]=Yx({pos:l,x1:o,y1:a,x2:e,y2:t,c}),[g,v,b,w]=O0({sourceX:e,sourceY:t,targetX:o,targetY:a,sourceControlX:f,sourceControlY:h,targetControlX:p,targetControlY:m});return[`M${e},${t} C${f},${h} ${p},${m} ${o},${a}`,g,v,b,w]}function I0({sourceX:e,sourceY:t,targetX:i,targetY:o}){const a=Math.abs(i-e)/2,l=i<e?i+a:i-a,c=Math.abs(o-t)/2,f=o<t?o+c:o-c;return[l,f,a,c]}function Jk({sourceNode:e,targetNode:t,selected:i=!1,zIndex:o=0,elevateOnSelect:a=!1,zIndexMode:l="basic"}){if(l==="manual")return o;const c=a&&i?o+1e3:o,f=Math.max(e.parentId||a&&e.selected?e.internals.z:0,t.parentId||a&&t.selected?t.internals.z:0);return c+f}function Kk({sourceNode:e,targetNode:t,width:i,height:o,transform:a}){const l=nu($c(e),$c(t));l.x===l.x2&&(l.x2+=1),l.y===l.y2&&(l.y2+=1);const c={x:-a[0]/a[2],y:-a[1]/a[2],width:i/a[2],height:o/a[2]};return bs(c,iu(l))>0}const eT=({source:e,sourceHandle:t,target:i,targetHandle:o})=>`xy-edge__${e}${t||""}-${i}${o||""}`,tT=(e,t)=>t.some(i=>i.source===e.source&&i.target===e.target&&(i.sourceHandle===e.sourceHandle||!i.sourceHandle&&!e.sourceHandle)&&(i.targetHandle===e.targetHandle||!i.targetHandle&&!e.targetHandle)),L0=(e,t,i={})=>{if(!e.source||!e.target)return t;const o=i.getEdgeId||eT;let a;return N0(e)?a={...e}:a={...e,id:o(e)},tT(a,t)?t:(a.sourceHandle===null&&delete a.sourceHandle,a.targetHandle===null&&delete a.targetHandle,t.concat(a))};function z0({sourceX:e,sourceY:t,targetX:i,targetY:o}){const[a,l,c,f]=I0({sourceX:e,sourceY:t,targetX:i,targetY:o});return[`M ${e},${t}L ${i},${o}`,a,l,c,f]}const Xx={[ge.Left]:{x:-1,y:0},[ge.Right]:{x:1,y:0},[ge.Top]:{x:0,y:-1},[ge.Bottom]:{x:0,y:1}},nT=({source:e,sourcePosition:t=ge.Bottom,target:i})=>t===ge.Left||t===ge.Right?e.x<i.x?{x:1,y:0}:{x:-1,y:0}:e.y<i.y?{x:0,y:1}:{x:0,y:-1},Qx=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function iT({source:e,sourcePosition:t=ge.Bottom,target:i,targetPosition:o=ge.Top,center:a,offset:l,stepPosition:c}){const f=Xx[t],h=Xx[o],p={x:e.x+f.x*l,y:e.y+f.y*l},m={x:i.x+h.x*l,y:i.y+h.y*l},g=nT({source:p,sourcePosition:t,target:m}),v=g.x!==0?"x":"y",b=g[v];let w=[],S,j;const N={x:0,y:0},k={x:0,y:0},[,,C,_]=I0({sourceX:e.x,sourceY:e.y,targetX:i.x,targetY:i.y});if(f[v]*h[v]===-1){v==="x"?(S=a.x??p.x+(m.x-p.x)*c,j=a.y??(p.y+m.y)/2):(S=a.x??(p.x+m.x)/2,j=a.y??p.y+(m.y-p.y)*c);const A=[{x:S,y:p.y},{x:S,y:m.y}],$=[{x:p.x,y:j},{x:m.x,y:j}];f[v]===b?w=v==="x"?A:$:w=v==="x"?$:A}else{const A=[{x:p.x,y:m.y}],$=[{x:m.x,y:p.y}];if(v==="x"?w=f.x===b?$:A:w=f.y===b?A:$,t===o){const U=Math.abs(e[v]-i[v]);if(U<=l){const Z=Math.min(l-1,l-U);f[v]===b?N[v]=(p[v]>e[v]?-1:1)*Z:k[v]=(m[v]>i[v]?-1:1)*Z}}if(t!==o){const U=v==="x"?"y":"x",Z=f[v]===h[U],M=p[U]>m[U],P=p[U]<m[U];(f[v]===1&&(!Z&&M||Z&&P)||f[v]!==1&&(!Z&&P||Z&&M))&&(w=v==="x"?A:$)}const V={x:p.x+N.x,y:p.y+N.y},G={x:m.x+k.x,y:m.y+k.y},z=Math.max(Math.abs(V.x-w[0].x),Math.abs(G.x-w[0].x)),L=Math.max(Math.abs(V.y-w[0].y),Math.abs(G.y-w[0].y));z>=L?(S=(V.x+G.x)/2,j=w[0].y):(S=w[0].x,j=(V.y+G.y)/2)}return[[e,{x:p.x+N.x,y:p.y+N.y},...w,{x:m.x+k.x,y:m.y+k.y},i],S,j,C,_]}function rT(e,t,i,o){const a=Math.min(Qx(e,t)/2,Qx(t,i)/2,o),{x:l,y:c}=t;if(e.x===l&&l===i.x||e.y===c&&c===i.y)return`L${l} ${c}`;if(e.y===c){const p=e.x<i.x?-1:1,m=e.y<i.y?1:-1;return`L ${l+a*p},${c}Q ${l},${c} ${l},${c+a*m}`}const f=e.x<i.x?1:-1,h=e.y<i.y?-1:1;return`L ${l},${c+a*h}Q ${l},${c} ${l+a*f},${c}`}function Pc({sourceX:e,sourceY:t,sourcePosition:i=ge.Bottom,targetX:o,targetY:a,targetPosition:l=ge.Top,borderRadius:c=5,centerX:f,centerY:h,offset:p=20,stepPosition:m=.5}){const[g,v,b,w,S]=iT({source:{x:e,y:t},sourcePosition:i,target:{x:o,y:a},targetPosition:l,center:{x:f,y:h},offset:p,stepPosition:m});return[g.reduce((N,k,C)=>{let _="";return C>0&&C<g.length-1?_=rT(g[C-1],k,g[C+1],c):_=`${C===0?"M":"L"}${k.x} ${k.y}`,N+=_,N},""),v,b,w,S]}function Wx(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function oT(e){const{sourceNode:t,targetNode:i}=e;if(!Wx(t)||!Wx(i))return null;const o=t.internals.handleBounds||Zx(t.handles),a=i.internals.handleBounds||Zx(i.handles),l=Jx(o?.source??[],e.sourceHandle),c=Jx(e.connectionMode===Vo.Strict?a?.target??[]:(a?.target??[]).concat(a?.source??[]),e.targetHandle);if(!l||!c)return e.onError?.("008",Xn.error008(l?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const f=l?.position||ge.Bottom,h=c?.position||ge.Top,p=$r(t,l,f),m=$r(i,c,h);return{sourceX:p.x,sourceY:p.y,targetX:m.x,targetY:m.y,sourcePosition:f,targetPosition:h}}function Zx(e){if(!e)return null;const t=[],i=[];for(const o of e)o.width=o.width??1,o.height=o.height??1,o.type==="source"?t.push(o):o.type==="target"&&i.push(o);return{source:t,target:i}}function $r(e,t,i=ge.Left,o=!1){const a=(t?.x??0)+e.internals.positionAbsolute.x,l=(t?.y??0)+e.internals.positionAbsolute.y,{width:c,height:f}=t??Ni(e);if(o)return{x:a+c/2,y:l+f/2};switch(t?.position??i){case ge.Top:return{x:a+c/2,y:l};case ge.Right:return{x:a+c,y:l+f/2};case ge.Bottom:return{x:a+c/2,y:l+f};case ge.Left:return{x:a,y:l+f/2}}}function Jx(e,t){return e&&(t?e.find(i=>i.id===t):e[0])||null}function Th(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`:""}function aT(e,{id:t,defaultColor:i,defaultMarkerStart:o,defaultMarkerEnd:a}){const l=new Set;return e.reduce((c,f)=>([f.markerStart||o,f.markerEnd||a].forEach(h=>{if(h&&typeof h=="object"){const p=Th(h,t);l.has(p)||(c.push({id:p,color:h.color||i,...h}),l.add(p))}}),c),[]).sort((c,f)=>c.id.localeCompare(f.id))}const B0=1e3,sT=10,lp={nodeOrigin:[0,0],nodeExtent:xs,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},lT={...lp,checkEquality:!0};function cp(e,t){const i={...e};for(const o in t)t[o]!==void 0&&(i[o]=t[o]);return i}function cT(e,t,i){const o=cp(lp,i);for(const a of e.values())if(a.parentId)dp(a,e,t,o);else{const l=As(a,o.nodeOrigin),c=Yo(a.extent)?a.extent:o.nodeExtent,f=Br(l,c,Ni(a));a.internals.positionAbsolute=f}}function uT(e,t){if(!e.handles)return e.measured?t?.internals.handleBounds:void 0;const i=[],o=[];for(const a of e.handles){const l={id:a.id,width:a.width??1,height:a.height??1,nodeId:e.id,x:a.x,y:a.y,position:a.position,type:a.type};a.type==="source"?i.push(l):a.type==="target"&&o.push(l)}return{source:i,target:o}}function up(e){return e==="manual"}function Ah(e,t,i,o={}){const a=cp(lT,o),l={i:0},c=new Map(t),f=a?.elevateNodesOnSelect&&!up(a.zIndexMode)?B0:0;let h=e.length>0;t.clear(),i.clear();for(const p of e){let m=c.get(p.id);if(a.checkEquality&&p===m?.internals.userNode)t.set(p.id,m);else{const g=As(p,a.nodeOrigin),v=Yo(p.extent)?p.extent:a.nodeExtent,b=Br(g,v,Ni(p));m={...a.defaults,...p,measured:{width:p.measured?.width,height:p.measured?.height},internals:{positionAbsolute:b,handleBounds:uT(p,m),z:$0(p,f,a.zIndexMode),userNode:p}},t.set(p.id,m)}(m.measured===void 0||m.measured.width===void 0||m.measured.height===void 0)&&!m.hidden&&(h=!1),p.parentId&&dp(m,t,i,o,l)}return h}function dT(e,t){if(!e.parentId)return;const i=t.get(e.parentId);i?i.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function dp(e,t,i,o,a){const{elevateNodesOnSelect:l,nodeOrigin:c,nodeExtent:f,zIndexMode:h}=cp(lp,o),p=e.parentId,m=t.get(p);if(!m){console.warn(`Parent node ${p} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}dT(e,i),a&&!m.parentId&&m.internals.rootParentIndex===void 0&&h==="auto"&&(m.internals.rootParentIndex=++a.i,m.internals.z=m.internals.z+a.i*sT),a&&m.internals.rootParentIndex!==void 0&&(a.i=m.internals.rootParentIndex);const g=l&&!up(h)?B0:0,{x:v,y:b,z:w}=fT(e,m,c,f,g,h),{positionAbsolute:S}=e.internals,j=v!==S.x||b!==S.y;(j||w!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:j?{x:v,y:b}:S,z:w}})}function $0(e,t,i){const o=_n(e.zIndex)?e.zIndex:0;return up(i)?o:o+(e.selected?t:0)}function fT(e,t,i,o,a,l){const{x:c,y:f}=t.internals.positionAbsolute,h=Ni(e),p=As(e,i),m=Yo(e.extent)?Br(p,e.extent,h):p;let g=Br({x:c+m.x,y:f+m.y},o,h);e.extent==="parent"&&(g=j0(g,h,t));const v=$0(e,a,l),b=t.internals.z??0;return{x:g.x,y:g.y,z:b>=v?b+1:v}}function fp(e,t,i,o=[0,0]){const a=[],l=new Map;for(const c of e){const f=t.get(c.parentId);if(!f)continue;const h=l.get(c.parentId)?.expandedRect??Go(f),p=k0(h,c.rect);l.set(c.parentId,{expandedRect:p,parent:f})}return l.size>0&&l.forEach(({expandedRect:c,parent:f},h)=>{const p=f.internals.positionAbsolute,m=Ni(f),g=f.origin??o,v=c.x<p.x?Math.round(Math.abs(p.x-c.x)):0,b=c.y<p.y?Math.round(Math.abs(p.y-c.y)):0,w=Math.max(m.width,Math.round(c.width)),S=Math.max(m.height,Math.round(c.height)),j=(w-m.width)*g[0],N=(S-m.height)*g[1];(v>0||b>0||j||N)&&(a.push({id:h,type:"position",position:{x:f.position.x-v+j,y:f.position.y-b+N}}),i.get(h)?.forEach(k=>{e.some(C=>C.id===k.id)||a.push({id:k.id,type:"position",position:{x:k.position.x+v,y:k.position.y+b}})})),(m.width<c.width||m.height<c.height||v||b)&&a.push({id:h,type:"dimensions",setAttributes:!0,dimensions:{width:w+(v?g[0]*v-j:0),height:S+(b?g[1]*b-N:0)}})}),a}function hT(e,t,i,o,a,l,c){const f=o?.querySelector(".xyflow__viewport");let h=!1;if(!f)return{changes:[],updatedInternals:h};const p=[],m=window.getComputedStyle(f),{m22:g}=new window.DOMMatrixReadOnly(m.transform),v=[];for(const b of e.values()){const w=t.get(b.id);if(!w)continue;if(w.hidden){t.set(w.id,{...w,internals:{...w.internals,handleBounds:void 0}}),h=!0;continue}const S=sp(b.nodeElement),j=w.measured.width!==S.width||w.measured.height!==S.height;if(!!(S.width&&S.height&&(j||!w.internals.handleBounds||b.force))){const k=b.nodeElement.getBoundingClientRect(),C=Yo(w.extent)?w.extent:l;let{positionAbsolute:_}=w.internals;w.parentId&&w.extent==="parent"?_=j0(_,S,t.get(w.parentId)):C&&(_=Br(_,C,S));const H={...w,measured:S,internals:{...w.internals,positionAbsolute:_,handleBounds:{source:Gx("source",b.nodeElement,k,g,w.id),target:Gx("target",b.nodeElement,k,g,w.id)}}};t.set(w.id,H),w.parentId&&dp(H,t,i,{nodeOrigin:a,zIndexMode:c}),h=!0,j&&(p.push({id:w.id,type:"dimensions",dimensions:S}),w.expandParent&&w.parentId&&v.push({id:w.id,parentId:w.parentId,rect:Go(H,a)}))}}if(v.length>0){const b=fp(v,t,i,a);p.push(...b)}return{changes:p,updatedInternals:h}}async function pT({delta:e,panZoom:t,transform:i,translateExtent:o,width:a,height:l}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const c=await t.setViewportConstrained({x:i[0]+e.x,y:i[1]+e.y,zoom:i[2]},[[0,0],[a,l]],o),f=!!c&&(c.x!==i[0]||c.y!==i[1]||c.k!==i[2]);return Promise.resolve(f)}function Kx(e,t,i,o,a,l){let c=a;const f=o.get(c)||new Map;o.set(c,f.set(i,t)),c=`${a}-${e}`;const h=o.get(c)||new Map;if(o.set(c,h.set(i,t)),l){c=`${a}-${e}-${l}`;const p=o.get(c)||new Map;o.set(c,p.set(i,t))}}function H0(e,t,i){e.clear(),t.clear();for(const o of i){const{source:a,target:l,sourceHandle:c=null,targetHandle:f=null}=o,h={edgeId:o.id,source:a,target:l,sourceHandle:c,targetHandle:f},p=`${a}-${c}--${l}-${f}`,m=`${l}-${f}--${a}-${c}`;Kx("source",h,m,e,a,c),Kx("target",h,p,e,l,f),t.set(o.id,o)}}function P0(e,t){if(!e.parentId)return!1;const i=t.get(e.parentId);return i?i.selected?!0:P0(i,t):!1}function ev(e,t,i){let o=e;do{if(o?.matches?.(t))return!0;if(o===i)return!1;o=o?.parentElement}while(o);return!1}function mT(e,t,i,o){const a=new Map;for(const[l,c]of e)if((c.selected||c.id===o)&&(!c.parentId||!P0(c,e))&&(c.draggable||t&&typeof c.draggable>"u")){const f=e.get(l);f&&a.set(l,{id:l,position:f.position||{x:0,y:0},distance:{x:i.x-f.internals.positionAbsolute.x,y:i.y-f.internals.positionAbsolute.y},extent:f.extent,parentId:f.parentId,origin:f.origin,expandParent:f.expandParent,internals:{positionAbsolute:f.internals.positionAbsolute||{x:0,y:0}},measured:{width:f.measured.width??0,height:f.measured.height??0}})}return a}function Hf({nodeId:e,dragItems:t,nodeLookup:i,dragging:o=!0}){const a=[];for(const[c,f]of t){const h=i.get(c)?.internals.userNode;h&&a.push({...h,position:f.position,dragging:o})}if(!e)return[a[0],a];const l=i.get(e)?.internals.userNode;return[l?{...l,position:t.get(e)?.position||l.position,dragging:o}:a[0],a]}function gT({dragItems:e,snapGrid:t,x:i,y:o}){const a=e.values().next().value;if(!a)return null;const l={x:i-a.distance.x,y:o-a.distance.y},c=Ds(l,t);return{x:c.x-l.x,y:c.y-l.y}}function yT({onNodeMouseDown:e,getStoreItems:t,onDragStart:i,onDrag:o,onDragStop:a}){let l={x:null,y:null},c=0,f=new Map,h=!1,p={x:0,y:0},m=null,g=!1,v=null,b=!1,w=!1,S=null;function j({noDragClassName:k,handleSelector:C,domNode:_,isSelectable:H,nodeId:A,nodeClickDistance:$=0}){v=dn(_);function V({x:U,y:Z}){const{nodeLookup:M,nodeExtent:P,snapGrid:O,snapToGrid:q,nodeOrigin:Y,onNodeDrag:Q,onSelectionDrag:D,onError:B,updateNodePositions:F}=t();l={x:U,y:Z};let I=!1;const ie=f.size>1,te=ie&&P?kh(Ms(f)):null,re=ie&&q?gT({dragItems:f,snapGrid:O,x:U,y:Z}):null;for(const[de,ae]of f){if(!M.has(de))continue;let fe={x:U-ae.distance.x,y:Z-ae.distance.y};q&&(fe=re?{x:Math.round(fe.x+re.x),y:Math.round(fe.y+re.y)}:Ds(fe,O));let xe=null;if(ie&&P&&!ae.extent&&te){const{positionAbsolute:Ee}=ae.internals,De=Ee.x-te.x+P[0][0],qe=Ee.x+ae.measured.width-te.x2+P[1][0],Ue=Ee.y-te.y+P[0][1],ft=Ee.y+ae.measured.height-te.y2+P[1][1];xe=[[De,Ue],[qe,ft]]}const{position:je,positionAbsolute:ve}=E0({nodeId:de,nextPosition:fe,nodeLookup:M,nodeExtent:xe||P,nodeOrigin:Y,onError:B});I=I||ae.position.x!==je.x||ae.position.y!==je.y,ae.position=je,ae.internals.positionAbsolute=ve}if(w=w||I,!!I&&(F(f,!0),S&&(o||Q||!A&&D))){const[de,ae]=Hf({nodeId:A,dragItems:f,nodeLookup:M});o?.(S,f,de,ae),Q?.(S,de,ae),A||D?.(S,ae)}}async function G(){if(!m)return;const{transform:U,panBy:Z,autoPanSpeed:M,autoPanOnNodeDrag:P}=t();if(!P){h=!1,cancelAnimationFrame(c);return}const[O,q]=C0(p,m,M);(O!==0||q!==0)&&(l.x=(l.x??0)-O/U[2],l.y=(l.y??0)-q/U[2],await Z({x:O,y:q})&&V(l)),c=requestAnimationFrame(G)}function z(U){const{nodeLookup:Z,multiSelectionActive:M,nodesDraggable:P,transform:O,snapGrid:q,snapToGrid:Y,selectNodesOnDrag:Q,onNodeDragStart:D,onSelectionDragStart:B,unselectNodesAndEdges:F}=t();g=!0,(!Q||!H)&&!M&&A&&(Z.get(A)?.selected||F()),H&&Q&&A&&e?.(A);const I=ls(U.sourceEvent,{transform:O,snapGrid:q,snapToGrid:Y,containerBounds:m});if(l=I,f=mT(Z,P,I,A),f.size>0&&(i||D||!A&&B)){const[ie,te]=Hf({nodeId:A,dragItems:f,nodeLookup:Z});i?.(U.sourceEvent,f,ie,te),D?.(U.sourceEvent,ie,te),A||B?.(U.sourceEvent,te)}}const L=i0().clickDistance($).on("start",U=>{const{domNode:Z,nodeDragThreshold:M,transform:P,snapGrid:O,snapToGrid:q}=t();m=Z?.getBoundingClientRect()||null,b=!1,w=!1,S=U.sourceEvent,M===0&&z(U),l=ls(U.sourceEvent,{transform:P,snapGrid:O,snapToGrid:q,containerBounds:m}),p=On(U.sourceEvent,m)}).on("drag",U=>{const{autoPanOnNodeDrag:Z,transform:M,snapGrid:P,snapToGrid:O,nodeDragThreshold:q,nodeLookup:Y}=t(),Q=ls(U.sourceEvent,{transform:M,snapGrid:P,snapToGrid:O,containerBounds:m});if(S=U.sourceEvent,(U.sourceEvent.type==="touchmove"&&U.sourceEvent.touches.length>1||A&&!Y.has(A))&&(b=!0),!b){if(!h&&Z&&g&&(h=!0,G()),!g){const D=On(U.sourceEvent,m),B=D.x-p.x,F=D.y-p.y;Math.sqrt(B*B+F*F)>q&&z(U)}(l.x!==Q.xSnapped||l.y!==Q.ySnapped)&&f&&g&&(p=On(U.sourceEvent,m),V(Q))}}).on("end",U=>{if(!(!g||b)&&(h=!1,g=!1,cancelAnimationFrame(c),f.size>0)){const{nodeLookup:Z,updateNodePositions:M,onNodeDragStop:P,onSelectionDragStop:O}=t();if(w&&(M(f,!1),w=!1),a||P||!A&&O){const[q,Y]=Hf({nodeId:A,dragItems:f,nodeLookup:Z,dragging:!1});a?.(U.sourceEvent,f,q,Y),P?.(U.sourceEvent,q,Y),A||O?.(U.sourceEvent,Y)}}}).filter(U=>{const Z=U.target;return!U.button&&(!k||!ev(Z,`.${k}`,_))&&(!C||ev(Z,C,_))});v.call(L)}function N(){v?.on(".drag",null)}return{update:j,destroy:N}}function xT(e,t,i){const o=[],a={x:e.x-i,y:e.y-i,width:i*2,height:i*2};for(const l of t.values())bs(a,Go(l))>0&&o.push(l);return o}const vT=250;function bT(e,t,i,o){let a=[],l=1/0;const c=xT(e,i,t+vT);for(const f of c){const h=[...f.internals.handleBounds?.source??[],...f.internals.handleBounds?.target??[]];for(const p of h){if(o.nodeId===p.nodeId&&o.type===p.type&&o.id===p.id)continue;const{x:m,y:g}=$r(f,p,p.position,!0),v=Math.sqrt(Math.pow(m-e.x,2)+Math.pow(g-e.y,2));v>t||(v<l?(a=[{...p,x:m,y:g}],l=v):v===l&&a.push({...p,x:m,y:g}))}}if(!a.length)return null;if(a.length>1){const f=o.type==="source"?"target":"source";return a.find(h=>h.type===f)??a[0]}return a[0]}function q0(e,t,i,o,a,l=!1){const c=o.get(e);if(!c)return null;const f=a==="strict"?c.internals.handleBounds?.[t]:[...c.internals.handleBounds?.source??[],...c.internals.handleBounds?.target??[]],h=(i?f?.find(p=>p.id===i):f?.[0])??null;return h&&l?{...h,...$r(c,h,h.position,!0)}:h}function U0(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function wT(e,t){let i=null;return t?i=!0:e&&!t&&(i=!1),i}const V0=()=>!0;function ST(e,{connectionMode:t,connectionRadius:i,handleId:o,nodeId:a,edgeUpdaterType:l,isTarget:c,domNode:f,nodeLookup:h,lib:p,autoPanOnConnect:m,flowId:g,panBy:v,cancelConnection:b,onConnectStart:w,onConnect:S,onConnectEnd:j,isValidConnection:N=V0,onReconnectEnd:k,updateConnection:C,getTransform:_,getFromHandle:H,autoPanSpeed:A,dragThreshold:$=1,handleDomNode:V}){const G=M0(e.target);let z=0,L;const{x:U,y:Z}=On(e),M=U0(l,V),P=f?.getBoundingClientRect();let O=!1;if(!P||!M)return;const q=q0(a,M,o,h,t);if(!q)return;let Y=On(e,P),Q=!1,D=null,B=!1,F=null;function I(){if(!m||!P)return;const[je,ve]=C0(Y,P,A);v({x:je,y:ve}),z=requestAnimationFrame(I)}const ie={...q,nodeId:a,type:M,position:q.position},te=h.get(a);let de={inProgress:!0,isValid:null,from:$r(te,ie,ge.Left,!0),fromHandle:ie,fromPosition:ie.position,fromNode:te,to:Y,toHandle:null,toPosition:qx[ie.position],toNode:null,pointer:Y};function ae(){O=!0,C(de),w?.(e,{nodeId:a,handleId:o,handleType:M})}$===0&&ae();function fe(je){if(!O){const{x:ft,y:Kt}=On(je),_t=ft-U,Pt=Kt-Z;if(!(_t*_t+Pt*Pt>$*$))return;ae()}if(!H()||!ie){xe(je);return}const ve=_();Y=On(je,P),L=bT(_s(Y,ve,!1,[1,1]),i,h,ie),Q||(I(),Q=!0);const Ee=F0(je,{handle:L,connectionMode:t,fromNodeId:a,fromHandleId:o,fromType:c?"target":"source",isValidConnection:N,doc:G,lib:p,flowId:g,nodeLookup:h});F=Ee.handleDomNode,D=Ee.connection,B=wT(!!L,Ee.isValid);const De=h.get(a),qe=De?$r(De,ie,ge.Left,!0):de.from,Ue={...de,from:qe,isValid:B,to:Ee.toHandle&&B?Hc({x:Ee.toHandle.x,y:Ee.toHandle.y},ve):Y,toHandle:Ee.toHandle,toPosition:B&&Ee.toHandle?Ee.toHandle.position:qx[ie.position],toNode:Ee.toHandle?h.get(Ee.toHandle.nodeId):null,pointer:Y};C(Ue),de=Ue}function xe(je){if(!("touches"in je&&je.touches.length>0)){if(O){(L||F)&&D&&B&&S?.(D);const{inProgress:ve,...Ee}=de,De={...Ee,toPosition:de.toHandle?de.toPosition:null};j?.(je,De),l&&k?.(je,De)}b(),cancelAnimationFrame(z),Q=!1,B=!1,D=null,F=null,G.removeEventListener("mousemove",fe),G.removeEventListener("mouseup",xe),G.removeEventListener("touchmove",fe),G.removeEventListener("touchend",xe)}}G.addEventListener("mousemove",fe),G.addEventListener("mouseup",xe),G.addEventListener("touchmove",fe),G.addEventListener("touchend",xe)}function F0(e,{handle:t,connectionMode:i,fromNodeId:o,fromHandleId:a,fromType:l,doc:c,lib:f,flowId:h,isValidConnection:p=V0,nodeLookup:m}){const g=l==="target",v=t?c.querySelector(`.${f}-flow__handle[data-id="${h}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:b,y:w}=On(e),S=c.elementFromPoint(b,w),j=S?.classList.contains(`${f}-flow__handle`)?S:v,N={handleDomNode:j,isValid:!1,connection:null,toHandle:null};if(j){const k=U0(void 0,j),C=j.getAttribute("data-nodeid"),_=j.getAttribute("data-handleid"),H=j.classList.contains("connectable"),A=j.classList.contains("connectableend");if(!C||!k)return N;const $={source:g?C:o,sourceHandle:g?_:a,target:g?o:C,targetHandle:g?a:_};N.connection=$;const G=H&&A&&(i===Vo.Strict?g&&k==="source"||!g&&k==="target":C!==o||_!==a);N.isValid=G&&p($),N.toHandle=q0(C,k,_,m,i,!0)}return N}const Mh={onPointerDown:ST,isValid:F0};function NT({domNode:e,panZoom:t,getTransform:i,getViewScale:o}){const a=dn(e);function l({translateExtent:f,width:h,height:p,zoomStep:m=1,pannable:g=!0,zoomable:v=!0,inversePan:b=!1}){const w=C=>{if(C.sourceEvent.type!=="wheel"||!t)return;const _=i(),H=C.sourceEvent.ctrlKey&&ws()?10:1,A=-C.sourceEvent.deltaY*(C.sourceEvent.deltaMode===1?.05:C.sourceEvent.deltaMode?1:.002)*m,$=_[2]*Math.pow(2,A*H);t.scaleTo($)};let S=[0,0];const j=C=>{(C.sourceEvent.type==="mousedown"||C.sourceEvent.type==="touchstart")&&(S=[C.sourceEvent.clientX??C.sourceEvent.touches[0].clientX,C.sourceEvent.clientY??C.sourceEvent.touches[0].clientY])},N=C=>{const _=i();if(C.sourceEvent.type!=="mousemove"&&C.sourceEvent.type!=="touchmove"||!t)return;const H=[C.sourceEvent.clientX??C.sourceEvent.touches[0].clientX,C.sourceEvent.clientY??C.sourceEvent.touches[0].clientY],A=[H[0]-S[0],H[1]-S[1]];S=H;const $=o()*Math.max(_[2],Math.log(_[2]))*(b?-1:1),V={x:_[0]-A[0]*$,y:_[1]-A[1]*$},G=[[0,0],[h,p]];t.setViewportConstrained({x:V.x,y:V.y,zoom:_[2]},G,f)},k=x0().on("start",j).on("zoom",g?N:null).on("zoom.wheel",v?w:null);a.call(k,{})}function c(){a.on("zoom",null)}return{update:l,destroy:c,pointer:Mn}}const ru=e=>({x:e.x,y:e.y,zoom:e.k}),Pf=({x:e,y:t,zoom:i})=>tu.translate(e,t).scale(i),Lo=(e,t)=>e.target.closest(`.${t}`),G0=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),ET=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,qf=(e,t=0,i=ET,o=()=>{})=>{const a=typeof t=="number"&&t>0;return a||o(),a?e.transition().duration(t).ease(i).on("end",o):e},Y0=e=>{const t=e.ctrlKey&&ws()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function jT({zoomPanValues:e,noWheelClassName:t,d3Selection:i,d3Zoom:o,panOnScrollMode:a,panOnScrollSpeed:l,zoomOnPinch:c,onPanZoomStart:f,onPanZoom:h,onPanZoomEnd:p}){return m=>{if(Lo(m,t))return m.ctrlKey&&m.preventDefault(),!1;m.preventDefault(),m.stopImmediatePropagation();const g=i.property("__zoom").k||1;if(m.ctrlKey&&c){const j=Mn(m),N=Y0(m),k=g*Math.pow(2,N);o.scaleTo(i,k,j,m);return}const v=m.deltaMode===1?20:1;let b=a===Ir.Vertical?0:m.deltaX*v,w=a===Ir.Horizontal?0:m.deltaY*v;!ws()&&m.shiftKey&&a!==Ir.Vertical&&(b=m.deltaY*v,w=0),o.translateBy(i,-(b/g)*l,-(w/g)*l,{internal:!0});const S=ru(i.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(h?.(m,S),e.panScrollTimeout=setTimeout(()=>{p?.(m,S),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,f?.(m,S))}}function CT({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:i}){return function(o,a){const l=o.type==="wheel",c=!t&&l&&!o.ctrlKey,f=Lo(o,e);if(o.ctrlKey&&l&&f&&o.preventDefault(),c||f)return null;o.preventDefault(),i.call(this,o,a)}}function kT({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:i}){return o=>{if(o.sourceEvent?.internal)return;const a=ru(o.transform);e.mouseButton=o.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=a,o.sourceEvent?.type==="mousedown"&&t(!0),i&&i?.(o.sourceEvent,a)}}function TT({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:i,onTransformChange:o,onPanZoom:a}){return l=>{e.usedRightMouseButton=!!(i&&G0(t,e.mouseButton??0)),l.sourceEvent?.sync||o([l.transform.x,l.transform.y,l.transform.k]),a&&!l.sourceEvent?.internal&&a?.(l.sourceEvent,ru(l.transform))}}function AT({zoomPanValues:e,panOnDrag:t,panOnScroll:i,onDraggingChange:o,onPanZoomEnd:a,onPaneContextMenu:l}){return c=>{if(!c.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,l&&G0(t,e.mouseButton??0)&&!e.usedRightMouseButton&&c.sourceEvent&&l(c.sourceEvent),e.usedRightMouseButton=!1,o(!1),a)){const f=ru(c.transform);e.prevViewport=f,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{a?.(c.sourceEvent,f)},i?150:0)}}}function MT({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:i,panOnDrag:o,panOnScroll:a,zoomOnDoubleClick:l,userSelectionActive:c,noWheelClassName:f,noPanClassName:h,lib:p,connectionInProgress:m}){return g=>{const v=e||t,b=i&&g.ctrlKey,w=g.type==="wheel";if(g.button===1&&g.type==="mousedown"&&(Lo(g,`${p}-flow__node`)||Lo(g,`${p}-flow__edge`)))return!0;if(!o&&!v&&!a&&!l&&!i||c||m&&!w||Lo(g,f)&&w||Lo(g,h)&&(!w||a&&w&&!e)||!i&&g.ctrlKey&&w)return!1;if(!i&&g.type==="touchstart"&&g.touches?.length>1)return g.preventDefault(),!1;if(!v&&!a&&!b&&w||!o&&(g.type==="mousedown"||g.type==="touchstart")||Array.isArray(o)&&!o.includes(g.button)&&g.type==="mousedown")return!1;const S=Array.isArray(o)&&o.includes(g.button)||!g.button||g.button<=1;return(!g.ctrlKey||w)&&S}}function DT({domNode:e,minZoom:t,maxZoom:i,translateExtent:o,viewport:a,onPanZoom:l,onPanZoomStart:c,onPanZoomEnd:f,onDraggingChange:h}){const p={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},m=e.getBoundingClientRect(),g=x0().scaleExtent([t,i]).translateExtent(o),v=dn(e).call(g);k({x:a.x,y:a.y,zoom:Fo(a.zoom,t,i)},[[0,0],[m.width,m.height]],o);const b=v.on("wheel.zoom"),w=v.on("dblclick.zoom");g.wheelDelta(Y0);function S(L,U){return v?new Promise(Z=>{g?.interpolate(U?.interpolate==="linear"?ss:Cc).transform(qf(v,U?.duration,U?.ease,()=>Z(!0)),L)}):Promise.resolve(!1)}function j({noWheelClassName:L,noPanClassName:U,onPaneContextMenu:Z,userSelectionActive:M,panOnScroll:P,panOnDrag:O,panOnScrollMode:q,panOnScrollSpeed:Y,preventScrolling:Q,zoomOnPinch:D,zoomOnScroll:B,zoomOnDoubleClick:F,zoomActivationKeyPressed:I,lib:ie,onTransformChange:te,connectionInProgress:re,paneClickDistance:de,selectionOnDrag:ae}){M&&!p.isZoomingOrPanning&&N();const fe=P&&!I&&!M;g.clickDistance(ae?1/0:!_n(de)||de<0?0:de);const xe=fe?jT({zoomPanValues:p,noWheelClassName:L,d3Selection:v,d3Zoom:g,panOnScrollMode:q,panOnScrollSpeed:Y,zoomOnPinch:D,onPanZoomStart:c,onPanZoom:l,onPanZoomEnd:f}):CT({noWheelClassName:L,preventScrolling:Q,d3ZoomHandler:b});if(v.on("wheel.zoom",xe,{passive:!1}),!M){const ve=kT({zoomPanValues:p,onDraggingChange:h,onPanZoomStart:c});g.on("start",ve);const Ee=TT({zoomPanValues:p,panOnDrag:O,onPaneContextMenu:!!Z,onPanZoom:l,onTransformChange:te});g.on("zoom",Ee);const De=AT({zoomPanValues:p,panOnDrag:O,panOnScroll:P,onPaneContextMenu:Z,onPanZoomEnd:f,onDraggingChange:h});g.on("end",De)}const je=MT({zoomActivationKeyPressed:I,panOnDrag:O,zoomOnScroll:B,panOnScroll:P,zoomOnDoubleClick:F,zoomOnPinch:D,userSelectionActive:M,noPanClassName:U,noWheelClassName:L,lib:ie,connectionInProgress:re});g.filter(je),F?v.on("dblclick.zoom",w):v.on("dblclick.zoom",null)}function N(){g.on("zoom",null)}async function k(L,U,Z){const M=Pf(L),P=g?.constrain()(M,U,Z);return P&&await S(P),new Promise(O=>O(P))}async function C(L,U){const Z=Pf(L);return await S(Z,U),new Promise(M=>M(Z))}function _(L){if(v){const U=Pf(L),Z=v.property("__zoom");(Z.k!==L.zoom||Z.x!==L.x||Z.y!==L.y)&&g?.transform(v,U,null,{sync:!0})}}function H(){const L=v?y0(v.node()):{x:0,y:0,k:1};return{x:L.x,y:L.y,zoom:L.k}}function A(L,U){return v?new Promise(Z=>{g?.interpolate(U?.interpolate==="linear"?ss:Cc).scaleTo(qf(v,U?.duration,U?.ease,()=>Z(!0)),L)}):Promise.resolve(!1)}function $(L,U){return v?new Promise(Z=>{g?.interpolate(U?.interpolate==="linear"?ss:Cc).scaleBy(qf(v,U?.duration,U?.ease,()=>Z(!0)),L)}):Promise.resolve(!1)}function V(L){g?.scaleExtent(L)}function G(L){g?.translateExtent(L)}function z(L){const U=!_n(L)||L<0?0:L;g?.clickDistance(U)}return{update:j,destroy:N,setViewport:C,setViewportConstrained:k,getViewport:H,scaleTo:A,scaleBy:$,setScaleExtent:V,setTranslateExtent:G,syncViewport:_,setClickDistance:z}}var Xo;(function(e){e.Line="line",e.Handle="handle"})(Xo||(Xo={}));function _T({width:e,prevWidth:t,height:i,prevHeight:o,affectsX:a,affectsY:l}){const c=e-t,f=i-o,h=[c>0?1:c<0?-1:0,f>0?1:f<0?-1:0];return c&&a&&(h[0]=h[0]*-1),f&&l&&(h[1]=h[1]*-1),h}function tv(e){const t=e.includes("right")||e.includes("left"),i=e.includes("bottom")||e.includes("top"),o=e.includes("left"),a=e.includes("top");return{isHorizontal:t,isVertical:i,affectsX:o,affectsY:a}}function tr(e,t){return Math.max(0,t-e)}function nr(e,t){return Math.max(0,e-t)}function hc(e,t,i){return Math.max(0,t-e,e-i)}function nv(e,t){return e?!t:t}function OT(e,t,i,o,a,l,c,f){let{affectsX:h,affectsY:p}=t;const{isHorizontal:m,isVertical:g}=t,v=m&&g,{xSnapped:b,ySnapped:w}=i,{minWidth:S,maxWidth:j,minHeight:N,maxHeight:k}=o,{x:C,y:_,width:H,height:A,aspectRatio:$}=e;let V=Math.floor(m?b-e.pointerX:0),G=Math.floor(g?w-e.pointerY:0);const z=H+(h?-V:V),L=A+(p?-G:G),U=-l[0]*H,Z=-l[1]*A;let M=hc(z,S,j),P=hc(L,N,k);if(c){let Y=0,Q=0;h&&V<0?Y=tr(C+V+U,c[0][0]):!h&&V>0&&(Y=nr(C+z+U,c[1][0])),p&&G<0?Q=tr(_+G+Z,c[0][1]):!p&&G>0&&(Q=nr(_+L+Z,c[1][1])),M=Math.max(M,Y),P=Math.max(P,Q)}if(f){let Y=0,Q=0;h&&V>0?Y=nr(C+V,f[0][0]):!h&&V<0&&(Y=tr(C+z,f[1][0])),p&&G>0?Q=nr(_+G,f[0][1]):!p&&G<0&&(Q=tr(_+L,f[1][1])),M=Math.max(M,Y),P=Math.max(P,Q)}if(a){if(m){const Y=hc(z/$,N,k)*$;if(M=Math.max(M,Y),c){let Q=0;!h&&!p||h&&!p&&v?Q=nr(_+Z+z/$,c[1][1])*$:Q=tr(_+Z+(h?V:-V)/$,c[0][1])*$,M=Math.max(M,Q)}if(f){let Q=0;!h&&!p||h&&!p&&v?Q=tr(_+z/$,f[1][1])*$:Q=nr(_+(h?V:-V)/$,f[0][1])*$,M=Math.max(M,Q)}}if(g){const Y=hc(L*$,S,j)/$;if(P=Math.max(P,Y),c){let Q=0;!h&&!p||p&&!h&&v?Q=nr(C+L*$+U,c[1][0])/$:Q=tr(C+(p?G:-G)*$+U,c[0][0])/$,P=Math.max(P,Q)}if(f){let Q=0;!h&&!p||p&&!h&&v?Q=tr(C+L*$,f[1][0])/$:Q=nr(C+(p?G:-G)*$,f[0][0])/$,P=Math.max(P,Q)}}}G=G+(G<0?P:-P),V=V+(V<0?M:-M),a&&(v?z>L*$?G=(nv(h,p)?-V:V)/$:V=(nv(h,p)?-G:G)*$:m?(G=V/$,p=h):(V=G*$,h=p));const O=h?C+V:C,q=p?_+G:_;return{width:H+(h?-V:V),height:A+(p?-G:G),x:l[0]*V*(h?-1:1)+O,y:l[1]*G*(p?-1:1)+q}}const X0={width:0,height:0,x:0,y:0},RT={...X0,pointerX:0,pointerY:0,aspectRatio:1};function IT(e){return[[0,0],[e.measured.width,e.measured.height]]}function LT(e,t,i){const o=t.position.x+e.position.x,a=t.position.y+e.position.y,l=e.measured.width??0,c=e.measured.height??0,f=i[0]*l,h=i[1]*c;return[[o-f,a-h],[o+l-f,a+c-h]]}function zT({domNode:e,nodeId:t,getStoreItems:i,onChange:o,onEnd:a}){const l=dn(e);let c={controlDirection:tv("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function f({controlPosition:p,boundaries:m,keepAspectRatio:g,resizeDirection:v,onResizeStart:b,onResize:w,onResizeEnd:S,shouldResize:j}){let N={...X0},k={...RT};c={boundaries:m,resizeDirection:v,keepAspectRatio:g,controlDirection:tv(p)};let C,_=null,H=[],A,$,V,G=!1;const z=i0().on("start",L=>{const{nodeLookup:U,transform:Z,snapGrid:M,snapToGrid:P,nodeOrigin:O,paneDomNode:q}=i();if(C=U.get(t),!C)return;_=q?.getBoundingClientRect()??null;const{xSnapped:Y,ySnapped:Q}=ls(L.sourceEvent,{transform:Z,snapGrid:M,snapToGrid:P,containerBounds:_});N={width:C.measured.width??0,height:C.measured.height??0,x:C.position.x??0,y:C.position.y??0},k={...N,pointerX:Y,pointerY:Q,aspectRatio:N.width/N.height},A=void 0,C.parentId&&(C.extent==="parent"||C.expandParent)&&(A=U.get(C.parentId),$=A&&C.extent==="parent"?IT(A):void 0),H=[],V=void 0;for(const[D,B]of U)if(B.parentId===t&&(H.push({id:D,position:{...B.position},extent:B.extent}),B.extent==="parent"||B.expandParent)){const F=LT(B,C,B.origin??O);V?V=[[Math.min(F[0][0],V[0][0]),Math.min(F[0][1],V[0][1])],[Math.max(F[1][0],V[1][0]),Math.max(F[1][1],V[1][1])]]:V=F}b?.(L,{...N})}).on("drag",L=>{const{transform:U,snapGrid:Z,snapToGrid:M,nodeOrigin:P}=i(),O=ls(L.sourceEvent,{transform:U,snapGrid:Z,snapToGrid:M,containerBounds:_}),q=[];if(!C)return;const{x:Y,y:Q,width:D,height:B}=N,F={},I=C.origin??P,{width:ie,height:te,x:re,y:de}=OT(k,c.controlDirection,O,c.boundaries,c.keepAspectRatio,I,$,V),ae=ie!==D,fe=te!==B,xe=re!==Y&&ae,je=de!==Q&&fe;if(!xe&&!je&&!ae&&!fe)return;if((xe||je||I[0]===1||I[1]===1)&&(F.x=xe?re:N.x,F.y=je?de:N.y,N.x=F.x,N.y=F.y,H.length>0)){const qe=re-Y,Ue=de-Q;for(const ft of H)ft.position={x:ft.position.x-qe+I[0]*(ie-D),y:ft.position.y-Ue+I[1]*(te-B)},q.push(ft)}if((ae||fe)&&(F.width=ae&&(!c.resizeDirection||c.resizeDirection==="horizontal")?ie:N.width,F.height=fe&&(!c.resizeDirection||c.resizeDirection==="vertical")?te:N.height,N.width=F.width,N.height=F.height),A&&C.expandParent){const qe=I[0]*(F.width??0);F.x&&F.x<qe&&(N.x=qe,k.x=k.x-(F.x-qe));const Ue=I[1]*(F.height??0);F.y&&F.y<Ue&&(N.y=Ue,k.y=k.y-(F.y-Ue))}const ve=_T({width:N.width,prevWidth:D,height:N.height,prevHeight:B,affectsX:c.controlDirection.affectsX,affectsY:c.controlDirection.affectsY}),Ee={...N,direction:ve};j?.(L,Ee)!==!1&&(G=!0,w?.(L,Ee),o(F,q))}).on("end",L=>{G&&(S?.(L,{...N}),a?.({...N}),G=!1)});l.call(z)}function h(){l.on(".drag",null)}return{update:f,destroy:h}}var Uf={exports:{}},Vf={},Ff={exports:{}},Gf={};var iv;function BT(){if(iv)return Gf;iv=1;var e=Cs();function t(g,v){return g===v&&(g!==0||1/g===1/v)||g!==g&&v!==v}var i=typeof Object.is=="function"?Object.is:t,o=e.useState,a=e.useEffect,l=e.useLayoutEffect,c=e.useDebugValue;function f(g,v){var b=v(),w=o({inst:{value:b,getSnapshot:v}}),S=w[0].inst,j=w[1];return l(function(){S.value=b,S.getSnapshot=v,h(S)&&j({inst:S})},[g,b,v]),a(function(){return h(S)&&j({inst:S}),g(function(){h(S)&&j({inst:S})})},[g]),c(b),b}function h(g){var v=g.getSnapshot;g=g.value;try{var b=v();return!i(g,b)}catch{return!0}}function p(g,v){return v()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:f;return Gf.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:m,Gf}var rv;function $T(){return rv||(rv=1,Ff.exports=BT()),Ff.exports}var ov;function HT(){if(ov)return Vf;ov=1;var e=Cs(),t=$T();function i(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var o=typeof Object.is=="function"?Object.is:i,a=t.useSyncExternalStore,l=e.useRef,c=e.useEffect,f=e.useMemo,h=e.useDebugValue;return Vf.useSyncExternalStoreWithSelector=function(p,m,g,v,b){var w=l(null);if(w.current===null){var S={hasValue:!1,value:null};w.current=S}else S=w.current;w=f(function(){function N(A){if(!k){if(k=!0,C=A,A=v(A),b!==void 0&&S.hasValue){var $=S.value;if(b($,A))return _=$}return _=A}if($=_,o(C,A))return $;var V=v(A);return b!==void 0&&b($,V)?(C=A,$):(C=A,_=V)}var k=!1,C,_,H=g===void 0?null:g;return[function(){return N(m())},H===null?void 0:function(){return N(H())}]},[m,g,v,b]);var j=a(p,w[0],w[1]);return c(function(){S.hasValue=!0,S.value=j},[j]),h(j),j},Vf}var av;function PT(){return av||(av=1,Uf.exports=HT()),Uf.exports}var qT=PT();const UT=Wc(qT),VT={},sv=e=>{let t;const i=new Set,o=(m,g)=>{const v=typeof m=="function"?m(t):m;if(!Object.is(v,t)){const b=t;t=g??(typeof v!="object"||v===null)?v:Object.assign({},t,v),i.forEach(w=>w(t,b))}},a=()=>t,h={setState:o,getState:a,getInitialState:()=>p,subscribe:m=>(i.add(m),()=>i.delete(m)),destroy:()=>{(VT?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),i.clear()}},p=t=e(o,a,h);return h},FT=e=>e?sv(e):sv,{useDebugValue:GT}=Nn,{useSyncExternalStoreWithSelector:YT}=UT,XT=e=>e;function Q0(e,t=XT,i){const o=YT(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,i);return GT(o),o}const lv=(e,t)=>{const i=FT(e),o=(a,l=t)=>Q0(i,a,l);return Object.assign(o,i),o},QT=(e,t)=>e?lv(e,t):lv;function at(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[o,a]of e)if(!Object.is(a,t.get(o)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e)if(!t.has(o))return!1;return!0}const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!1;for(const o of i)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return!1;return!0}var Dh=qb();const ou=T.createContext(null),WT=ou.Provider,W0=Xn.error001();function Be(e,t){const i=T.useContext(ou);if(i===null)throw new Error(W0);return Q0(i,e,t)}function st(){const e=T.useContext(ou);if(e===null)throw new Error(W0);return T.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const cv={display:"none"},ZT={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Z0="react-flow__node-desc",J0="react-flow__edge-desc",JT="react-flow__aria-live",KT=e=>e.ariaLiveMessage,eA=e=>e.ariaLabelConfig;function tA({rfId:e}){const t=Be(KT);return u.jsx("div",{id:`${JT}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:ZT,children:t})}function nA({rfId:e,disableKeyboardA11y:t}){const i=Be(eA);return u.jsxs(u.Fragment,{children:[u.jsx("div",{id:`${Z0}-${e}`,style:cv,children:t?i["node.a11yDescription.default"]:i["node.a11yDescription.keyboardDisabled"]}),u.jsx("div",{id:`${J0}-${e}`,style:cv,children:i["edge.a11yDescription.default"]}),!t&&u.jsx(tA,{rfId:e})]})}const au=T.forwardRef(({position:e="top-left",children:t,className:i,style:o,...a},l)=>{const c=`${e}`.split("-");return u.jsx("div",{className:St(["react-flow__panel",i,...c]),style:o,ref:l,...a,children:t})});au.displayName="Panel";function iA({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:u.jsx(au,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:u.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const rA=e=>{const t=[],i=[];for(const[,o]of e.nodeLookup)o.selected&&t.push(o.internals.userNode);for(const[,o]of e.edgeLookup)o.selected&&i.push(o);return{selectedNodes:t,selectedEdges:i}},pc=e=>e.id;function oA(e,t){return at(e.selectedNodes.map(pc),t.selectedNodes.map(pc))&&at(e.selectedEdges.map(pc),t.selectedEdges.map(pc))}function aA({onSelectionChange:e}){const t=st(),{selectedNodes:i,selectedEdges:o}=Be(rA,oA);return T.useEffect(()=>{const a={nodes:i,edges:o};e?.(a),t.getState().onSelectionChangeHandlers.forEach(l=>l(a))},[i,o,e]),null}const sA=e=>!!e.onSelectionChangeHandlers;function lA({onSelectionChange:e}){const t=Be(sA);return e||t?u.jsx(aA,{onSelectionChange:e}):null}const K0=[0,0],cA={x:0,y:0,zoom:1},uA=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],uv=[...uA,"rfId"],dA=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),dv={translateExtent:xs,nodeOrigin:K0,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function fA(e){const{setNodes:t,setEdges:i,setMinZoom:o,setMaxZoom:a,setTranslateExtent:l,setNodeExtent:c,reset:f,setDefaultNodesAndEdges:h}=Be(dA,at),p=st();T.useEffect(()=>(h(e.defaultNodes,e.defaultEdges),()=>{m.current=dv,f()}),[]);const m=T.useRef(dv);return T.useEffect(()=>{for(const g of uv){const v=e[g],b=m.current[g];v!==b&&(typeof e[g]>"u"||(g==="nodes"?t(v):g==="edges"?i(v):g==="minZoom"?o(v):g==="maxZoom"?a(v):g==="translateExtent"?l(v):g==="nodeExtent"?c(v):g==="ariaLabelConfig"?p.setState({ariaLabelConfig:Wk(v)}):g==="fitView"?p.setState({fitViewQueued:v}):g==="fitViewOptions"?p.setState({fitViewOptions:v}):p.setState({[g]:v})))}m.current=e},uv.map(g=>e[g])),null}function fv(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function hA(e){const[t,i]=T.useState(e==="system"?null:e);return T.useEffect(()=>{if(e!=="system"){i(e);return}const o=fv(),a=()=>i(o?.matches?"dark":"light");return a(),o?.addEventListener("change",a),()=>{o?.removeEventListener("change",a)}},[e]),t!==null?t:fv()?.matches?"dark":"light"}const hv=typeof document<"u"?document:null;function Ss(e=null,t={target:hv,actInsideInputWithModifier:!0}){const[i,o]=T.useState(!1),a=T.useRef(!1),l=T.useRef(new Set([])),[c,f]=T.useMemo(()=>{if(e!==null){const p=(Array.isArray(e)?e:[e]).filter(g=>typeof g=="string").map(g=>g.replace("+",`
`).replace(`

`,`
+`).split(`
`)),m=p.reduce((g,v)=>g.concat(...v),[]);return[p,m]}return[[],[]]},[e]);return T.useEffect(()=>{const h=t?.target??hv,p=t?.actInsideInputWithModifier??!0;if(e!==null){const m=b=>{if(a.current=b.ctrlKey||b.metaKey||b.shiftKey||b.altKey,(!a.current||a.current&&!p)&&D0(b))return!1;const S=mv(b.code,f);if(l.current.add(b[S]),pv(c,l.current,!1)){const j=b.composedPath?.()?.[0]||b.target,N=j?.nodeName==="BUTTON"||j?.nodeName==="A";t.preventDefault!==!1&&(a.current||!N)&&b.preventDefault(),o(!0)}},g=b=>{const w=mv(b.code,f);pv(c,l.current,!0)?(o(!1),l.current.clear()):l.current.delete(b[w]),b.key==="Meta"&&l.current.clear(),a.current=!1},v=()=>{l.current.clear(),o(!1)};return h?.addEventListener("keydown",m),h?.addEventListener("keyup",g),window.addEventListener("blur",v),window.addEventListener("contextmenu",v),()=>{h?.removeEventListener("keydown",m),h?.removeEventListener("keyup",g),window.removeEventListener("blur",v),window.removeEventListener("contextmenu",v)}}},[e,o]),i}function pv(e,t,i){return e.filter(o=>i||o.length===t.size).some(o=>o.every(a=>t.has(a)))}function mv(e,t){return t.includes(e)?"code":"key"}const pA=()=>{const e=st();return T.useMemo(()=>({zoomIn:t=>{const{panZoom:i}=e.getState();return i?i.scaleBy(1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:i}=e.getState();return i?i.scaleBy(1/1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomTo:(t,i)=>{const{panZoom:o}=e.getState();return o?o.scaleTo(t,{duration:i?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,i)=>{const{transform:[o,a,l],panZoom:c}=e.getState();return c?(await c.setViewport({x:t.x??o,y:t.y??a,zoom:t.zoom??l},i),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,i,o]=e.getState().transform;return{x:t,y:i,zoom:o}},setCenter:async(t,i,o)=>e.getState().setCenter(t,i,o),fitBounds:async(t,i)=>{const{width:o,height:a,minZoom:l,maxZoom:c,panZoom:f}=e.getState(),h=ap(t,o,a,l,c,i?.padding??.1);return f?(await f.setViewport(h,{duration:i?.duration,ease:i?.ease,interpolate:i?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,i={})=>{const{transform:o,snapGrid:a,snapToGrid:l,domNode:c}=e.getState();if(!c)return t;const{x:f,y:h}=c.getBoundingClientRect(),p={x:t.x-f,y:t.y-h},m=i.snapGrid??a,g=i.snapToGrid??l;return _s(p,o,g,m)},flowToScreenPosition:t=>{const{transform:i,domNode:o}=e.getState();if(!o)return t;const{x:a,y:l}=o.getBoundingClientRect(),c=Hc(t,i);return{x:c.x+a,y:c.y+l}}}),[])};function ew(e,t){const i=[],o=new Map,a=[];for(const l of e)if(l.type==="add"){a.push(l);continue}else if(l.type==="remove"||l.type==="replace")o.set(l.id,[l]);else{const c=o.get(l.id);c?c.push(l):o.set(l.id,[l])}for(const l of t){const c=o.get(l.id);if(!c){i.push(l);continue}if(c[0].type==="remove")continue;if(c[0].type==="replace"){i.push({...c[0].item});continue}const f={...l};for(const h of c)mA(h,f);i.push(f)}return a.length&&a.forEach(l=>{l.index!==void 0?i.splice(l.index,0,{...l.item}):i.push({...l.item})}),i}function mA(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured={...e.dimensions},e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function tw(e,t){return ew(e,t)}function nw(e,t){return ew(e,t)}function _r(e,t){return{id:e,type:"select",selected:t}}function zo(e,t=new Set,i=!1){const o=[];for(const[a,l]of e){const c=t.has(a);!(l.selected===void 0&&!c)&&l.selected!==c&&(i&&(l.selected=c),o.push(_r(l.id,c)))}return o}function gv({items:e=[],lookup:t}){const i=[],o=new Map(e.map(a=>[a.id,a]));for(const[a,l]of e.entries()){const c=t.get(l.id),f=c?.internals?.userNode??c;f!==void 0&&f!==l&&i.push({id:l.id,item:l,type:"replace"}),f===void 0&&i.push({item:l,type:"add",index:a})}for(const[a]of t)o.get(a)===void 0&&i.push({id:a,type:"remove"});return i}function yv(e){return{id:e.id,type:"remove"}}const xv=e=>Hk(e),gA=e=>N0(e);function iw(e){return T.forwardRef(e)}const yA=typeof window<"u"?T.useLayoutEffect:T.useEffect;function vv(e){const[t,i]=T.useState(BigInt(0)),[o]=T.useState(()=>xA(()=>i(a=>a+BigInt(1))));return yA(()=>{const a=o.get();a.length&&(e(a),o.reset())},[t]),o}function xA(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:i=>{t.push(i),e()}}}const rw=T.createContext(null);function vA({children:e}){const t=st(),i=T.useCallback(f=>{const{nodes:h=[],setNodes:p,hasDefaultNodes:m,onNodesChange:g,nodeLookup:v,fitViewQueued:b,onNodesChangeMiddlewareMap:w}=t.getState();let S=h;for(const N of f)S=typeof N=="function"?N(S):N;let j=gv({items:S,lookup:v});for(const N of w.values())j=N(j);m&&p(S),j.length>0?g?.(j):b&&window.requestAnimationFrame(()=>{const{fitViewQueued:N,nodes:k,setNodes:C}=t.getState();N&&C(k)})},[]),o=vv(i),a=T.useCallback(f=>{const{edges:h=[],setEdges:p,hasDefaultEdges:m,onEdgesChange:g,edgeLookup:v}=t.getState();let b=h;for(const w of f)b=typeof w=="function"?w(b):w;m?p(b):g&&g(gv({items:b,lookup:v}))},[]),l=vv(a),c=T.useMemo(()=>({nodeQueue:o,edgeQueue:l}),[]);return u.jsx(rw.Provider,{value:c,children:e})}function bA(){const e=T.useContext(rw);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const wA=e=>!!e.panZoom;function su(){const e=pA(),t=st(),i=bA(),o=Be(wA),a=T.useMemo(()=>{const l=g=>t.getState().nodeLookup.get(g),c=g=>{i.nodeQueue.push(g)},f=g=>{i.edgeQueue.push(g)},h=g=>{const{nodeLookup:v,nodeOrigin:b}=t.getState(),w=xv(g)?g:v.get(g.id),S=w.parentId?A0(w.position,w.measured,w.parentId,v,b):w.position,j={...w,position:S,width:w.measured?.width??w.width,height:w.measured?.height??w.height};return Go(j)},p=(g,v,b={replace:!1})=>{c(w=>w.map(S=>{if(S.id===g){const j=typeof v=="function"?v(S):v;return b.replace&&xv(j)?j:{...S,...j}}return S}))},m=(g,v,b={replace:!1})=>{f(w=>w.map(S=>{if(S.id===g){const j=typeof v=="function"?v(S):v;return b.replace&&gA(j)?j:{...S,...j}}return S}))};return{getNodes:()=>t.getState().nodes.map(g=>({...g})),getNode:g=>l(g)?.internals.userNode,getInternalNode:l,getEdges:()=>{const{edges:g=[]}=t.getState();return g.map(v=>({...v}))},getEdge:g=>t.getState().edgeLookup.get(g),setNodes:c,setEdges:f,addNodes:g=>{const v=Array.isArray(g)?g:[g];i.nodeQueue.push(b=>[...b,...v])},addEdges:g=>{const v=Array.isArray(g)?g:[g];i.edgeQueue.push(b=>[...b,...v])},toObject:()=>{const{nodes:g=[],edges:v=[],transform:b}=t.getState(),[w,S,j]=b;return{nodes:g.map(N=>({...N})),edges:v.map(N=>({...N})),viewport:{x:w,y:S,zoom:j}}},deleteElements:async({nodes:g=[],edges:v=[]})=>{const{nodes:b,edges:w,onNodesDelete:S,onEdgesDelete:j,triggerNodeChanges:N,triggerEdgeChanges:k,onDelete:C,onBeforeDelete:_}=t.getState(),{nodes:H,edges:A}=await Fk({nodesToRemove:g,edgesToRemove:v,nodes:b,edges:w,onBeforeDelete:_}),$=A.length>0,V=H.length>0;if($){const G=A.map(yv);j?.(A),k(G)}if(V){const G=H.map(yv);S?.(H),N(G)}return(V||$)&&C?.({nodes:H,edges:A}),{deletedNodes:H,deletedEdges:A}},getIntersectingNodes:(g,v=!0,b)=>{const w=Vx(g),S=w?g:h(g),j=b!==void 0;return S?(b||t.getState().nodes).filter(N=>{const k=t.getState().nodeLookup.get(N.id);if(k&&!w&&(N.id===g.id||!k.internals.positionAbsolute))return!1;const C=Go(j?N:k),_=bs(C,S);return v&&_>0||_>=C.width*C.height||_>=S.width*S.height}):[]},isNodeIntersecting:(g,v,b=!0)=>{const S=Vx(g)?g:h(g);if(!S)return!1;const j=bs(S,v);return b&&j>0||j>=v.width*v.height||j>=S.width*S.height},updateNode:p,updateNodeData:(g,v,b={replace:!1})=>{p(g,w=>{const S=typeof v=="function"?v(w):v;return b.replace?{...w,data:S}:{...w,data:{...w.data,...S}}},b)},updateEdge:m,updateEdgeData:(g,v,b={replace:!1})=>{m(g,w=>{const S=typeof v=="function"?v(w):v;return b.replace?{...w,data:S}:{...w,data:{...w.data,...S}}},b)},getNodesBounds:g=>{const{nodeLookup:v,nodeOrigin:b}=t.getState();return Pk(g,{nodeLookup:v,nodeOrigin:b})},getHandleConnections:({type:g,id:v,nodeId:b})=>Array.from(t.getState().connectionLookup.get(`${b}-${g}${v?`-${v}`:""}`)?.values()??[]),getNodeConnections:({type:g,handleId:v,nodeId:b})=>Array.from(t.getState().connectionLookup.get(`${b}${g?v?`-${g}-${v}`:`-${g}`:""}`)?.values()??[]),fitView:async g=>{const v=t.getState().fitViewResolver??Qk();return t.setState({fitViewQueued:!0,fitViewOptions:g,fitViewResolver:v}),i.nodeQueue.push(b=>[...b]),v.promise}}},[]);return T.useMemo(()=>({...a,...e,viewportInitialized:o}),[o])}const bv=e=>e.selected,SA=typeof window<"u"?window:void 0;function NA({deleteKeyCode:e,multiSelectionKeyCode:t}){const i=st(),{deleteElements:o}=su(),a=Ss(e,{actInsideInputWithModifier:!1}),l=Ss(t,{target:SA});T.useEffect(()=>{if(a){const{edges:c,nodes:f}=i.getState();o({nodes:f.filter(bv),edges:c.filter(bv)}),i.setState({nodesSelectionActive:!1})}},[a]),T.useEffect(()=>{i.setState({multiSelectionActive:l})},[l])}function EA(e){const t=st();T.useEffect(()=>{const i=()=>{if(!e.current||!(e.current.checkVisibility?.()??!0))return!1;const o=sp(e.current);(o.height===0||o.width===0)&&t.getState().onError?.("004",Xn.error004()),t.setState({width:o.width||500,height:o.height||500})};if(e.current){i(),window.addEventListener("resize",i);const o=new ResizeObserver(()=>i());return o.observe(e.current),()=>{window.removeEventListener("resize",i),o&&e.current&&o.unobserve(e.current)}}},[])}const lu={position:"absolute",width:"100%",height:"100%",top:0,left:0},jA=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function CA({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:i=!0,panOnScroll:o=!1,panOnScrollSpeed:a=.5,panOnScrollMode:l=Ir.Free,zoomOnDoubleClick:c=!0,panOnDrag:f=!0,defaultViewport:h,translateExtent:p,minZoom:m,maxZoom:g,zoomActivationKeyCode:v,preventScrolling:b=!0,children:w,noWheelClassName:S,noPanClassName:j,onViewportChange:N,isControlledViewport:k,paneClickDistance:C,selectionOnDrag:_}){const H=st(),A=T.useRef(null),{userSelectionActive:$,lib:V,connectionInProgress:G}=Be(jA,at),z=Ss(v),L=T.useRef();EA(A);const U=T.useCallback(Z=>{N?.({x:Z[0],y:Z[1],zoom:Z[2]}),k||H.setState({transform:Z})},[N,k]);return T.useEffect(()=>{if(A.current){L.current=DT({domNode:A.current,minZoom:m,maxZoom:g,translateExtent:p,viewport:h,onDraggingChange:O=>H.setState({paneDragging:O}),onPanZoomStart:(O,q)=>{const{onViewportChangeStart:Y,onMoveStart:Q}=H.getState();Q?.(O,q),Y?.(q)},onPanZoom:(O,q)=>{const{onViewportChange:Y,onMove:Q}=H.getState();Q?.(O,q),Y?.(q)},onPanZoomEnd:(O,q)=>{const{onViewportChangeEnd:Y,onMoveEnd:Q}=H.getState();Q?.(O,q),Y?.(q)}});const{x:Z,y:M,zoom:P}=L.current.getViewport();return H.setState({panZoom:L.current,transform:[Z,M,P],domNode:A.current.closest(".react-flow")}),()=>{L.current?.destroy()}}},[]),T.useEffect(()=>{L.current?.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:i,panOnScroll:o,panOnScrollSpeed:a,panOnScrollMode:l,zoomOnDoubleClick:c,panOnDrag:f,zoomActivationKeyPressed:z,preventScrolling:b,noPanClassName:j,userSelectionActive:$,noWheelClassName:S,lib:V,onTransformChange:U,connectionInProgress:G,selectionOnDrag:_,paneClickDistance:C})},[e,t,i,o,a,l,c,f,z,b,j,$,S,V,U,G,_,C]),u.jsx("div",{className:"react-flow__renderer",ref:A,style:lu,children:w})}const kA=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function TA(){const{userSelectionActive:e,userSelectionRect:t}=Be(kA,at);return e&&t?u.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const Yf=(e,t)=>i=>{i.target===t.current&&e?.(i)},AA=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function MA({isSelecting:e,selectionKeyPressed:t,selectionMode:i=vs.Full,panOnDrag:o,paneClickDistance:a,selectionOnDrag:l,onSelectionStart:c,onSelectionEnd:f,onPaneClick:h,onPaneContextMenu:p,onPaneScroll:m,onPaneMouseEnter:g,onPaneMouseMove:v,onPaneMouseLeave:b,children:w}){const S=st(),{userSelectionActive:j,elementsSelectable:N,dragging:k,connectionInProgress:C}=Be(AA,at),_=N&&(e||j),H=T.useRef(null),A=T.useRef(),$=T.useRef(new Set),V=T.useRef(new Set),G=T.useRef(!1),z=Y=>{if(G.current||C){G.current=!1;return}h?.(Y),S.getState().resetSelectedElements(),S.setState({nodesSelectionActive:!1})},L=Y=>{if(Array.isArray(o)&&o?.includes(2)){Y.preventDefault();return}p?.(Y)},U=m?Y=>m(Y):void 0,Z=Y=>{G.current&&(Y.stopPropagation(),G.current=!1)},M=Y=>{const{domNode:Q}=S.getState();if(A.current=Q?.getBoundingClientRect(),!A.current)return;const D=Y.target===H.current;if(!D&&!!Y.target.closest(".nokey")||!e||!(l&&D||t)||Y.button!==0||!Y.isPrimary)return;Y.target?.setPointerCapture?.(Y.pointerId),G.current=!1;const{x:I,y:ie}=On(Y.nativeEvent,A.current);S.setState({userSelectionRect:{width:0,height:0,startX:I,startY:ie,x:I,y:ie}}),D||(Y.stopPropagation(),Y.preventDefault())},P=Y=>{const{userSelectionRect:Q,transform:D,nodeLookup:B,edgeLookup:F,connectionLookup:I,triggerNodeChanges:ie,triggerEdgeChanges:te,defaultEdgeOptions:re,resetSelectedElements:de}=S.getState();if(!A.current||!Q)return;const{x:ae,y:fe}=On(Y.nativeEvent,A.current),{startX:xe,startY:je}=Q;if(!G.current){const Ue=t?0:a;if(Math.hypot(ae-xe,fe-je)<=Ue)return;de(),c?.(Y)}G.current=!0;const ve={startX:xe,startY:je,x:ae<xe?ae:xe,y:fe<je?fe:je,width:Math.abs(ae-xe),height:Math.abs(fe-je)},Ee=$.current,De=V.current;$.current=new Set(op(B,ve,D,i===vs.Partial,!0).map(Ue=>Ue.id)),V.current=new Set;const qe=re?.selectable??!0;for(const Ue of $.current){const ft=I.get(Ue);if(ft)for(const{edgeId:Kt}of ft.values()){const _t=F.get(Kt);_t&&(_t.selectable??qe)&&V.current.add(Kt)}}if(!Fx(Ee,$.current)){const Ue=zo(B,$.current,!0);ie(Ue)}if(!Fx(De,V.current)){const Ue=zo(F,V.current);te(Ue)}S.setState({userSelectionRect:ve,userSelectionActive:!0,nodesSelectionActive:!1})},O=Y=>{Y.button===0&&(Y.target?.releasePointerCapture?.(Y.pointerId),!j&&Y.target===H.current&&S.getState().userSelectionRect&&z?.(Y),S.setState({userSelectionActive:!1,userSelectionRect:null}),G.current&&(f?.(Y),S.setState({nodesSelectionActive:$.current.size>0})))},q=o===!0||Array.isArray(o)&&o.includes(0);return u.jsxs("div",{className:St(["react-flow__pane",{draggable:q,dragging:k,selection:e}]),onClick:_?void 0:Yf(z,H),onContextMenu:Yf(L,H),onWheel:Yf(U,H),onPointerEnter:_?void 0:g,onPointerMove:_?P:v,onPointerUp:_?O:void 0,onPointerDownCapture:_?M:void 0,onClickCapture:_?Z:void 0,onPointerLeave:b,ref:H,style:lu,children:[w,u.jsx(TA,{})]})}function _h({id:e,store:t,unselect:i=!1,nodeRef:o}){const{addSelectedNodes:a,unselectNodesAndEdges:l,multiSelectionActive:c,nodeLookup:f,onError:h}=t.getState(),p=f.get(e);if(!p){h?.("012",Xn.error012(e));return}t.setState({nodesSelectionActive:!1}),p.selected?(i||p.selected&&c)&&(l({nodes:[p],edges:[]}),requestAnimationFrame(()=>o?.current?.blur())):a([e])}function ow({nodeRef:e,disabled:t=!1,noDragClassName:i,handleSelector:o,nodeId:a,isSelectable:l,nodeClickDistance:c}){const f=st(),[h,p]=T.useState(!1),m=T.useRef();return T.useEffect(()=>{m.current=yT({getStoreItems:()=>f.getState(),onNodeMouseDown:g=>{_h({id:g,store:f,nodeRef:e})},onDragStart:()=>{p(!0)},onDragStop:()=>{p(!1)}})},[]),T.useEffect(()=>{if(t)m.current?.destroy();else if(e.current)return m.current?.update({noDragClassName:i,handleSelector:o,domNode:e.current,isSelectable:l,nodeId:a,nodeClickDistance:c}),()=>{m.current?.destroy()}},[i,o,t,l,e,a]),h}const DA=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function aw(){const e=st();return T.useCallback(i=>{const{nodeExtent:o,snapToGrid:a,snapGrid:l,nodesDraggable:c,onError:f,updateNodePositions:h,nodeLookup:p,nodeOrigin:m}=e.getState(),g=new Map,v=DA(c),b=a?l[0]:5,w=a?l[1]:5,S=i.direction.x*b*i.factor,j=i.direction.y*w*i.factor;for(const[,N]of p){if(!v(N))continue;let k={x:N.internals.positionAbsolute.x+S,y:N.internals.positionAbsolute.y+j};a&&(k=Ds(k,l));const{position:C,positionAbsolute:_}=E0({nodeId:N.id,nextPosition:k,nodeLookup:p,nodeExtent:o,nodeOrigin:m,onError:f});N.position=C,N.internals.positionAbsolute=_,g.set(N.id,N)}h(g)},[])}const hp=T.createContext(null),_A=hp.Provider;hp.Consumer;const qr=()=>T.useContext(hp),OA=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),RA=(e,t,i)=>o=>{const{connectionClickStartHandle:a,connectionMode:l,connection:c}=o,{fromHandle:f,toHandle:h,isValid:p}=c,m=h?.nodeId===e&&h?.id===t&&h?.type===i;return{connectingFrom:f?.nodeId===e&&f?.id===t&&f?.type===i,connectingTo:m,clickConnecting:a?.nodeId===e&&a?.id===t&&a?.type===i,isPossibleEndHandle:l===Vo.Strict?f?.type!==i:e!==f?.nodeId||t!==f?.id,connectionInProcess:!!f,clickConnectionInProcess:!!a,valid:m&&p}};function IA({type:e="source",position:t=ge.Top,isValidConnection:i,isConnectable:o=!0,isConnectableStart:a=!0,isConnectableEnd:l=!0,id:c,onConnect:f,children:h,className:p,onMouseDown:m,onTouchStart:g,...v},b){const w=c||null,S=e==="target",j=st(),N=qr(),{connectOnClick:k,noPanClassName:C,rfId:_}=Be(OA,at),{connectingFrom:H,connectingTo:A,clickConnecting:$,isPossibleEndHandle:V,connectionInProcess:G,clickConnectionInProcess:z,valid:L}=Be(RA(N,w,e),at);N||j.getState().onError?.("010",Xn.error010());const U=P=>{const{defaultEdgeOptions:O,onConnect:q,hasDefaultEdges:Y}=j.getState(),Q={...O,...P};if(Y){const{edges:D,setEdges:B}=j.getState();B(L0(Q,D))}q?.(Q),f?.(Q)},Z=P=>{if(!N)return;const O=_0(P.nativeEvent);if(a&&(O&&P.button===0||!O)){const q=j.getState();Mh.onPointerDown(P.nativeEvent,{handleDomNode:P.currentTarget,autoPanOnConnect:q.autoPanOnConnect,connectionMode:q.connectionMode,connectionRadius:q.connectionRadius,domNode:q.domNode,nodeLookup:q.nodeLookup,lib:q.lib,isTarget:S,handleId:w,nodeId:N,flowId:q.rfId,panBy:q.panBy,cancelConnection:q.cancelConnection,onConnectStart:q.onConnectStart,onConnectEnd:q.onConnectEnd,updateConnection:q.updateConnection,onConnect:U,isValidConnection:i||q.isValidConnection,getTransform:()=>j.getState().transform,getFromHandle:()=>j.getState().connection.fromHandle,autoPanSpeed:q.autoPanSpeed,dragThreshold:q.connectionDragThreshold})}O?m?.(P):g?.(P)},M=P=>{const{onClickConnectStart:O,onClickConnectEnd:q,connectionClickStartHandle:Y,connectionMode:Q,isValidConnection:D,lib:B,rfId:F,nodeLookup:I,connection:ie}=j.getState();if(!N||!Y&&!a)return;if(!Y){O?.(P.nativeEvent,{nodeId:N,handleId:w,handleType:e}),j.setState({connectionClickStartHandle:{nodeId:N,type:e,id:w}});return}const te=M0(P.target),re=i||D,{connection:de,isValid:ae}=Mh.isValid(P.nativeEvent,{handle:{nodeId:N,id:w,type:e},connectionMode:Q,fromNodeId:Y.nodeId,fromHandleId:Y.id||null,fromType:Y.type,isValidConnection:re,flowId:F,doc:te,lib:B,nodeLookup:I});ae&&de&&U(de);const fe=structuredClone(ie);delete fe.inProgress,fe.toPosition=fe.toHandle?fe.toHandle.position:null,q?.(P,fe),j.setState({connectionClickStartHandle:null})};return u.jsx("div",{"data-handleid":w,"data-nodeid":N,"data-handlepos":t,"data-id":`${_}-${N}-${w}-${e}`,className:St(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",C,p,{source:!S,target:S,connectable:o,connectablestart:a,connectableend:l,clickconnecting:$,connectingfrom:H,connectingto:A,valid:L,connectionindicator:o&&(!G||V)&&(G||z?l:a)}]),onMouseDown:Z,onTouchStart:Z,onClick:k?M:void 0,ref:b,...v,children:h})}const In=T.memo(iw(IA));function LA({data:e,isConnectable:t,sourcePosition:i=ge.Bottom}){return u.jsxs(u.Fragment,{children:[e?.label,u.jsx(In,{type:"source",position:i,isConnectable:t})]})}function zA({data:e,isConnectable:t,targetPosition:i=ge.Top,sourcePosition:o=ge.Bottom}){return u.jsxs(u.Fragment,{children:[u.jsx(In,{type:"target",position:i,isConnectable:t}),e?.label,u.jsx(In,{type:"source",position:o,isConnectable:t})]})}function BA(){return null}function $A({data:e,isConnectable:t,targetPosition:i=ge.Top}){return u.jsxs(u.Fragment,{children:[u.jsx(In,{type:"target",position:i,isConnectable:t}),e?.label]})}const qc={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},wv={input:LA,default:zA,output:$A,group:BA};function HA(e){return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}const PA=e=>{const{width:t,height:i,x:o,y:a}=Ms(e.nodeLookup,{filter:l=>!!l.selected});return{width:_n(t)?t:null,height:_n(i)?i:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${o}px,${a}px)`}};function qA({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:i}){const o=st(),{width:a,height:l,transformString:c,userSelectionActive:f}=Be(PA,at),h=aw(),p=T.useRef(null);if(T.useEffect(()=>{i||p.current?.focus({preventScroll:!0})},[i]),ow({nodeRef:p}),f||!a||!l)return null;const m=e?v=>{const b=o.getState().nodes.filter(w=>w.selected);e(v,b)}:void 0,g=v=>{Object.prototype.hasOwnProperty.call(qc,v.key)&&(v.preventDefault(),h({direction:qc[v.key],factor:v.shiftKey?4:1}))};return u.jsx("div",{className:St(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c},children:u.jsx("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:i?void 0:-1,onKeyDown:i?void 0:g,style:{width:a,height:l}})})}const Sv=typeof window<"u"?window:void 0,UA=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function sw({children:e,onPaneClick:t,onPaneMouseEnter:i,onPaneMouseMove:o,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,paneClickDistance:f,deleteKeyCode:h,selectionKeyCode:p,selectionOnDrag:m,selectionMode:g,onSelectionStart:v,onSelectionEnd:b,multiSelectionKeyCode:w,panActivationKeyCode:S,zoomActivationKeyCode:j,elementsSelectable:N,zoomOnScroll:k,zoomOnPinch:C,panOnScroll:_,panOnScrollSpeed:H,panOnScrollMode:A,zoomOnDoubleClick:$,panOnDrag:V,defaultViewport:G,translateExtent:z,minZoom:L,maxZoom:U,preventScrolling:Z,onSelectionContextMenu:M,noWheelClassName:P,noPanClassName:O,disableKeyboardA11y:q,onViewportChange:Y,isControlledViewport:Q}){const{nodesSelectionActive:D,userSelectionActive:B}=Be(UA,at),F=Ss(p,{target:Sv}),I=Ss(S,{target:Sv}),ie=I||V,te=I||_,re=m&&ie!==!0,de=F||B||re;return NA({deleteKeyCode:h,multiSelectionKeyCode:w}),u.jsx(CA,{onPaneContextMenu:l,elementsSelectable:N,zoomOnScroll:k,zoomOnPinch:C,panOnScroll:te,panOnScrollSpeed:H,panOnScrollMode:A,zoomOnDoubleClick:$,panOnDrag:!F&&ie,defaultViewport:G,translateExtent:z,minZoom:L,maxZoom:U,zoomActivationKeyCode:j,preventScrolling:Z,noWheelClassName:P,noPanClassName:O,onViewportChange:Y,isControlledViewport:Q,paneClickDistance:f,selectionOnDrag:re,children:u.jsxs(MA,{onSelectionStart:v,onSelectionEnd:b,onPaneClick:t,onPaneMouseEnter:i,onPaneMouseMove:o,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,panOnDrag:ie,isSelecting:!!de,selectionMode:g,selectionKeyPressed:F,paneClickDistance:f,selectionOnDrag:re,children:[e,D&&u.jsx(qA,{onSelectionContextMenu:M,noPanClassName:O,disableKeyboardA11y:q})]})})}sw.displayName="FlowRenderer";const VA=T.memo(sw),FA=e=>t=>e?op(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(i=>i.id):Array.from(t.nodeLookup.keys());function GA(e){return Be(T.useCallback(FA(e),[e]),at)}const YA=e=>e.updateNodeInternals;function XA(){const e=Be(YA),[t]=T.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(i=>{const o=new Map;i.forEach(a=>{const l=a.target.getAttribute("data-id");o.set(l,{id:l,nodeElement:a.target,force:!0})}),e(o)}));return T.useEffect(()=>()=>{t?.disconnect()},[t]),t}function QA({node:e,nodeType:t,hasDimensions:i,resizeObserver:o}){const a=st(),l=T.useRef(null),c=T.useRef(null),f=T.useRef(e.sourcePosition),h=T.useRef(e.targetPosition),p=T.useRef(t),m=i&&!!e.internals.handleBounds;return T.useEffect(()=>{l.current&&!e.hidden&&(!m||c.current!==l.current)&&(c.current&&o?.unobserve(c.current),o?.observe(l.current),c.current=l.current)},[m,e.hidden]),T.useEffect(()=>()=>{c.current&&(o?.unobserve(c.current),c.current=null)},[]),T.useEffect(()=>{if(l.current){const g=p.current!==t,v=f.current!==e.sourcePosition,b=h.current!==e.targetPosition;(g||v||b)&&(p.current=t,f.current=e.sourcePosition,h.current=e.targetPosition,a.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:l.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),l}function WA({id:e,onClick:t,onMouseEnter:i,onMouseMove:o,onMouseLeave:a,onContextMenu:l,onDoubleClick:c,nodesDraggable:f,elementsSelectable:h,nodesConnectable:p,nodesFocusable:m,resizeObserver:g,noDragClassName:v,noPanClassName:b,disableKeyboardA11y:w,rfId:S,nodeTypes:j,nodeClickDistance:N,onError:k}){const{node:C,internals:_,isParent:H}=Be(ae=>{const fe=ae.nodeLookup.get(e),xe=ae.parentLookup.has(e);return{node:fe,internals:fe.internals,isParent:xe}},at);let A=C.type||"default",$=j?.[A]||wv[A];$===void 0&&(k?.("003",Xn.error003(A)),A="default",$=j?.default||wv.default);const V=!!(C.draggable||f&&typeof C.draggable>"u"),G=!!(C.selectable||h&&typeof C.selectable>"u"),z=!!(C.connectable||p&&typeof C.connectable>"u"),L=!!(C.focusable||m&&typeof C.focusable>"u"),U=st(),Z=T0(C),M=QA({node:C,nodeType:A,hasDimensions:Z,resizeObserver:g}),P=ow({nodeRef:M,disabled:C.hidden||!V,noDragClassName:v,handleSelector:C.dragHandle,nodeId:e,isSelectable:G,nodeClickDistance:N}),O=aw();if(C.hidden)return null;const q=Ni(C),Y=HA(C),Q=G||V||t||i||o||a,D=i?ae=>i(ae,{..._.userNode}):void 0,B=o?ae=>o(ae,{..._.userNode}):void 0,F=a?ae=>a(ae,{..._.userNode}):void 0,I=l?ae=>l(ae,{..._.userNode}):void 0,ie=c?ae=>c(ae,{..._.userNode}):void 0,te=ae=>{const{selectNodesOnDrag:fe,nodeDragThreshold:xe}=U.getState();G&&(!fe||!V||xe>0)&&_h({id:e,store:U,nodeRef:M}),t&&t(ae,{..._.userNode})},re=ae=>{if(!(D0(ae.nativeEvent)||w)){if(v0.includes(ae.key)&&G){const fe=ae.key==="Escape";_h({id:e,store:U,unselect:fe,nodeRef:M})}else if(V&&C.selected&&Object.prototype.hasOwnProperty.call(qc,ae.key)){ae.preventDefault();const{ariaLabelConfig:fe}=U.getState();U.setState({ariaLiveMessage:fe["node.a11yDescription.ariaLiveMessage"]({direction:ae.key.replace("Arrow","").toLowerCase(),x:~~_.positionAbsolute.x,y:~~_.positionAbsolute.y})}),O({direction:qc[ae.key],factor:ae.shiftKey?4:1})}}},de=()=>{if(w||!M.current?.matches(":focus-visible"))return;const{transform:ae,width:fe,height:xe,autoPanOnNodeFocus:je,setCenter:ve}=U.getState();if(!je)return;op(new Map([[e,C]]),{x:0,y:0,width:fe,height:xe},ae,!0).length>0||ve(C.position.x+q.width/2,C.position.y+q.height/2,{zoom:ae[2]})};return u.jsx("div",{className:St(["react-flow__node",`react-flow__node-${A}`,{[b]:V},C.className,{selected:C.selected,selectable:G,parent:H,draggable:V,dragging:P}]),ref:M,style:{zIndex:_.z,transform:`translate(${_.positionAbsolute.x}px,${_.positionAbsolute.y}px)`,pointerEvents:Q?"all":"none",visibility:Z?"visible":"hidden",...C.style,...Y},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:D,onMouseMove:B,onMouseLeave:F,onContextMenu:I,onClick:te,onDoubleClick:ie,onKeyDown:L?re:void 0,tabIndex:L?0:void 0,onFocus:L?de:void 0,role:C.ariaRole??(L?"group":void 0),"aria-roledescription":"node","aria-describedby":w?void 0:`${Z0}-${S}`,"aria-label":C.ariaLabel,...C.domAttributes,children:u.jsx(_A,{value:e,children:u.jsx($,{id:e,data:C.data,type:A,positionAbsoluteX:_.positionAbsolute.x,positionAbsoluteY:_.positionAbsolute.y,selected:C.selected??!1,selectable:G,draggable:V,deletable:C.deletable??!0,isConnectable:z,sourcePosition:C.sourcePosition,targetPosition:C.targetPosition,dragging:P,dragHandle:C.dragHandle,zIndex:_.z,parentId:C.parentId,...q})})})}var ZA=T.memo(WA);const JA=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function lw(e){const{nodesDraggable:t,nodesConnectable:i,nodesFocusable:o,elementsSelectable:a,onError:l}=Be(JA,at),c=GA(e.onlyRenderVisibleElements),f=XA();return u.jsx("div",{className:"react-flow__nodes",style:lu,children:c.map(h=>u.jsx(ZA,{id:h,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:f,nodesDraggable:t,nodesConnectable:i,nodesFocusable:o,elementsSelectable:a,nodeClickDistance:e.nodeClickDistance,onError:l},h))})}lw.displayName="NodeRenderer";const KA=T.memo(lw);function eM(e){return Be(T.useCallback(i=>{if(!e)return i.edges.map(a=>a.id);const o=[];if(i.width&&i.height)for(const a of i.edges){const l=i.nodeLookup.get(a.source),c=i.nodeLookup.get(a.target);l&&c&&Kk({sourceNode:l,targetNode:c,width:i.width,height:i.height,transform:i.transform})&&o.push(a.id)}return o},[e]),at)}const tM=({color:e="none",strokeWidth:t=1})=>{const i={strokeWidth:t,...e&&{stroke:e}};return u.jsx("polyline",{className:"arrow",style:i,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},nM=({color:e="none",strokeWidth:t=1})=>{const i={strokeWidth:t,...e&&{stroke:e,fill:e}};return u.jsx("polyline",{className:"arrowclosed",style:i,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},Nv={[Bc.Arrow]:tM,[Bc.ArrowClosed]:nM};function iM(e){const t=st();return T.useMemo(()=>Object.prototype.hasOwnProperty.call(Nv,e)?Nv[e]:(t.getState().onError?.("009",Xn.error009(e)),null),[e])}const rM=({id:e,type:t,color:i,width:o=12.5,height:a=12.5,markerUnits:l="strokeWidth",strokeWidth:c,orient:f="auto-start-reverse"})=>{const h=iM(t);return h?u.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${o}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:l,orient:f,refX:"0",refY:"0",children:u.jsx(h,{color:i,strokeWidth:c})}):null},cw=({defaultColor:e,rfId:t})=>{const i=Be(l=>l.edges),o=Be(l=>l.defaultEdgeOptions),a=T.useMemo(()=>aT(i,{id:t,defaultColor:e,defaultMarkerStart:o?.markerStart,defaultMarkerEnd:o?.markerEnd}),[i,o,t,e]);return a.length?u.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:u.jsx("defs",{children:a.map(l=>u.jsx(rM,{id:l.id,type:l.type,color:l.color,width:l.width,height:l.height,markerUnits:l.markerUnits,strokeWidth:l.strokeWidth,orient:l.orient},l.id))})}):null};cw.displayName="MarkerDefinitions";var oM=T.memo(cw);function uw({x:e,y:t,label:i,labelStyle:o,labelShowBg:a=!0,labelBgStyle:l,labelBgPadding:c=[2,4],labelBgBorderRadius:f=2,children:h,className:p,...m}){const[g,v]=T.useState({x:1,y:0,width:0,height:0}),b=St(["react-flow__edge-textwrapper",p]),w=T.useRef(null);return T.useEffect(()=>{if(w.current){const S=w.current.getBBox();v({x:S.x,y:S.y,width:S.width,height:S.height})}},[i]),i?u.jsxs("g",{transform:`translate(${e-g.width/2} ${t-g.height/2})`,className:b,visibility:g.width?"visible":"hidden",...m,children:[a&&u.jsx("rect",{width:g.width+2*c[0],x:-c[0],y:-c[1],height:g.height+2*c[1],className:"react-flow__edge-textbg",style:l,rx:f,ry:f}),u.jsx("text",{className:"react-flow__edge-text",y:g.height/2,dy:"0.3em",ref:w,style:o,children:i}),h]}):null}uw.displayName="EdgeText";const aM=T.memo(uw);function Os({path:e,labelX:t,labelY:i,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h,interactionWidth:p=20,...m}){return u.jsxs(u.Fragment,{children:[u.jsx("path",{...m,d:e,fill:"none",className:St(["react-flow__edge-path",m.className])}),p?u.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}):null,o&&_n(t)&&_n(i)?u.jsx(aM,{x:t,y:i,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h}):null]})}function Ev({pos:e,x1:t,y1:i,x2:o,y2:a}){return e===ge.Left||e===ge.Right?[.5*(t+o),i]:[t,.5*(i+a)]}function dw({sourceX:e,sourceY:t,sourcePosition:i=ge.Bottom,targetX:o,targetY:a,targetPosition:l=ge.Top}){const[c,f]=Ev({pos:i,x1:e,y1:t,x2:o,y2:a}),[h,p]=Ev({pos:l,x1:o,y1:a,x2:e,y2:t}),[m,g,v,b]=O0({sourceX:e,sourceY:t,targetX:o,targetY:a,sourceControlX:c,sourceControlY:f,targetControlX:h,targetControlY:p});return[`M${e},${t} C${c},${f} ${h},${p} ${o},${a}`,m,g,v,b]}function fw(e){return T.memo(({id:t,sourceX:i,sourceY:o,targetX:a,targetY:l,sourcePosition:c,targetPosition:f,label:h,labelStyle:p,labelShowBg:m,labelBgStyle:g,labelBgPadding:v,labelBgBorderRadius:b,style:w,markerEnd:S,markerStart:j,interactionWidth:N})=>{const[k,C,_]=dw({sourceX:i,sourceY:o,sourcePosition:c,targetX:a,targetY:l,targetPosition:f}),H=e.isInternal?void 0:t;return u.jsx(Os,{id:H,path:k,labelX:C,labelY:_,label:h,labelStyle:p,labelShowBg:m,labelBgStyle:g,labelBgPadding:v,labelBgBorderRadius:b,style:w,markerEnd:S,markerStart:j,interactionWidth:N})})}const sM=fw({isInternal:!1}),hw=fw({isInternal:!0});sM.displayName="SimpleBezierEdge";hw.displayName="SimpleBezierEdgeInternal";function pw(e){return T.memo(({id:t,sourceX:i,sourceY:o,targetX:a,targetY:l,label:c,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:g,style:v,sourcePosition:b=ge.Bottom,targetPosition:w=ge.Top,markerEnd:S,markerStart:j,pathOptions:N,interactionWidth:k})=>{const[C,_,H]=Pc({sourceX:i,sourceY:o,sourcePosition:b,targetX:a,targetY:l,targetPosition:w,borderRadius:N?.borderRadius,offset:N?.offset,stepPosition:N?.stepPosition}),A=e.isInternal?void 0:t;return u.jsx(Os,{id:A,path:C,labelX:_,labelY:H,label:c,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:g,style:v,markerEnd:S,markerStart:j,interactionWidth:k})})}const mw=pw({isInternal:!1}),gw=pw({isInternal:!0});mw.displayName="SmoothStepEdge";gw.displayName="SmoothStepEdgeInternal";function yw(e){return T.memo(({id:t,...i})=>{const o=e.isInternal?void 0:t;return u.jsx(mw,{...i,id:o,pathOptions:T.useMemo(()=>({borderRadius:0,offset:i.pathOptions?.offset}),[i.pathOptions?.offset])})})}const lM=yw({isInternal:!1}),xw=yw({isInternal:!0});lM.displayName="StepEdge";xw.displayName="StepEdgeInternal";function vw(e){return T.memo(({id:t,sourceX:i,sourceY:o,targetX:a,targetY:l,label:c,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:g,style:v,markerEnd:b,markerStart:w,interactionWidth:S})=>{const[j,N,k]=z0({sourceX:i,sourceY:o,targetX:a,targetY:l}),C=e.isInternal?void 0:t;return u.jsx(Os,{id:C,path:j,labelX:N,labelY:k,label:c,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:g,style:v,markerEnd:b,markerStart:w,interactionWidth:S})})}const cM=vw({isInternal:!1}),bw=vw({isInternal:!0});cM.displayName="StraightEdge";bw.displayName="StraightEdgeInternal";function ww(e){return T.memo(({id:t,sourceX:i,sourceY:o,targetX:a,targetY:l,sourcePosition:c=ge.Bottom,targetPosition:f=ge.Top,label:h,labelStyle:p,labelShowBg:m,labelBgStyle:g,labelBgPadding:v,labelBgBorderRadius:b,style:w,markerEnd:S,markerStart:j,pathOptions:N,interactionWidth:k})=>{const[C,_,H]=R0({sourceX:i,sourceY:o,sourcePosition:c,targetX:a,targetY:l,targetPosition:f,curvature:N?.curvature}),A=e.isInternal?void 0:t;return u.jsx(Os,{id:A,path:C,labelX:_,labelY:H,label:h,labelStyle:p,labelShowBg:m,labelBgStyle:g,labelBgPadding:v,labelBgBorderRadius:b,style:w,markerEnd:S,markerStart:j,interactionWidth:k})})}const uM=ww({isInternal:!1}),Sw=ww({isInternal:!0});uM.displayName="BezierEdge";Sw.displayName="BezierEdgeInternal";const jv={default:Sw,straight:bw,step:xw,smoothstep:gw,simplebezier:hw},Cv={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},dM=(e,t,i)=>i===ge.Left?e-t:i===ge.Right?e+t:e,fM=(e,t,i)=>i===ge.Top?e-t:i===ge.Bottom?e+t:e,kv="react-flow__edgeupdater";function Tv({position:e,centerX:t,centerY:i,radius:o=10,onMouseDown:a,onMouseEnter:l,onMouseOut:c,type:f}){return u.jsx("circle",{onMouseDown:a,onMouseEnter:l,onMouseOut:c,className:St([kv,`${kv}-${f}`]),cx:dM(t,o,e),cy:fM(i,o,e),r:o,stroke:"transparent",fill:"transparent"})}function hM({isReconnectable:e,reconnectRadius:t,edge:i,sourceX:o,sourceY:a,targetX:l,targetY:c,sourcePosition:f,targetPosition:h,onReconnect:p,onReconnectStart:m,onReconnectEnd:g,setReconnecting:v,setUpdateHover:b}){const w=st(),S=(_,H)=>{if(_.button!==0)return;const{autoPanOnConnect:A,domNode:$,isValidConnection:V,connectionMode:G,connectionRadius:z,lib:L,onConnectStart:U,onConnectEnd:Z,cancelConnection:M,nodeLookup:P,rfId:O,panBy:q,updateConnection:Y}=w.getState(),Q=H.type==="target",D=(I,ie)=>{v(!1),g?.(I,i,H.type,ie)},B=I=>p?.(i,I),F=(I,ie)=>{v(!0),m?.(_,i,H.type),U?.(I,ie)};Mh.onPointerDown(_.nativeEvent,{autoPanOnConnect:A,connectionMode:G,connectionRadius:z,domNode:$,handleId:H.id,nodeId:H.nodeId,nodeLookup:P,isTarget:Q,edgeUpdaterType:H.type,lib:L,flowId:O,cancelConnection:M,panBy:q,isValidConnection:V,onConnect:B,onConnectStart:F,onConnectEnd:Z,onReconnectEnd:D,updateConnection:Y,getTransform:()=>w.getState().transform,getFromHandle:()=>w.getState().connection.fromHandle,dragThreshold:w.getState().connectionDragThreshold,handleDomNode:_.currentTarget})},j=_=>S(_,{nodeId:i.target,id:i.targetHandle??null,type:"target"}),N=_=>S(_,{nodeId:i.source,id:i.sourceHandle??null,type:"source"}),k=()=>b(!0),C=()=>b(!1);return u.jsxs(u.Fragment,{children:[(e===!0||e==="source")&&u.jsx(Tv,{position:f,centerX:o,centerY:a,radius:t,onMouseDown:j,onMouseEnter:k,onMouseOut:C,type:"source"}),(e===!0||e==="target")&&u.jsx(Tv,{position:h,centerX:l,centerY:c,radius:t,onMouseDown:N,onMouseEnter:k,onMouseOut:C,type:"target"})]})}function pM({id:e,edgesFocusable:t,edgesReconnectable:i,elementsSelectable:o,onClick:a,onDoubleClick:l,onContextMenu:c,onMouseEnter:f,onMouseMove:h,onMouseLeave:p,reconnectRadius:m,onReconnect:g,onReconnectStart:v,onReconnectEnd:b,rfId:w,edgeTypes:S,noPanClassName:j,onError:N,disableKeyboardA11y:k}){let C=Be(ve=>ve.edgeLookup.get(e));const _=Be(ve=>ve.defaultEdgeOptions);C=_?{..._,...C}:C;let H=C.type||"default",A=S?.[H]||jv[H];A===void 0&&(N?.("011",Xn.error011(H)),H="default",A=S?.default||jv.default);const $=!!(C.focusable||t&&typeof C.focusable>"u"),V=typeof g<"u"&&(C.reconnectable||i&&typeof C.reconnectable>"u"),G=!!(C.selectable||o&&typeof C.selectable>"u"),z=T.useRef(null),[L,U]=T.useState(!1),[Z,M]=T.useState(!1),P=st(),{zIndex:O,sourceX:q,sourceY:Y,targetX:Q,targetY:D,sourcePosition:B,targetPosition:F}=Be(T.useCallback(ve=>{const Ee=ve.nodeLookup.get(C.source),De=ve.nodeLookup.get(C.target);if(!Ee||!De)return{zIndex:C.zIndex,...Cv};const qe=oT({id:e,sourceNode:Ee,targetNode:De,sourceHandle:C.sourceHandle||null,targetHandle:C.targetHandle||null,connectionMode:ve.connectionMode,onError:N});return{zIndex:Jk({selected:C.selected,zIndex:C.zIndex,sourceNode:Ee,targetNode:De,elevateOnSelect:ve.elevateEdgesOnSelect,zIndexMode:ve.zIndexMode}),...qe||Cv}},[C.source,C.target,C.sourceHandle,C.targetHandle,C.selected,C.zIndex]),at),I=T.useMemo(()=>C.markerStart?`url('#${Th(C.markerStart,w)}')`:void 0,[C.markerStart,w]),ie=T.useMemo(()=>C.markerEnd?`url('#${Th(C.markerEnd,w)}')`:void 0,[C.markerEnd,w]);if(C.hidden||q===null||Y===null||Q===null||D===null)return null;const te=ve=>{const{addSelectedEdges:Ee,unselectNodesAndEdges:De,multiSelectionActive:qe}=P.getState();G&&(P.setState({nodesSelectionActive:!1}),C.selected&&qe?(De({nodes:[],edges:[C]}),z.current?.blur()):Ee([e])),a&&a(ve,C)},re=l?ve=>{l(ve,{...C})}:void 0,de=c?ve=>{c(ve,{...C})}:void 0,ae=f?ve=>{f(ve,{...C})}:void 0,fe=h?ve=>{h(ve,{...C})}:void 0,xe=p?ve=>{p(ve,{...C})}:void 0,je=ve=>{if(!k&&v0.includes(ve.key)&&G){const{unselectNodesAndEdges:Ee,addSelectedEdges:De}=P.getState();ve.key==="Escape"?(z.current?.blur(),Ee({edges:[C]})):De([e])}};return u.jsx("svg",{style:{zIndex:O},children:u.jsxs("g",{className:St(["react-flow__edge",`react-flow__edge-${H}`,C.className,j,{selected:C.selected,animated:C.animated,inactive:!G&&!a,updating:L,selectable:G}]),onClick:te,onDoubleClick:re,onContextMenu:de,onMouseEnter:ae,onMouseMove:fe,onMouseLeave:xe,onKeyDown:$?je:void 0,tabIndex:$?0:void 0,role:C.ariaRole??($?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":C.ariaLabel===null?void 0:C.ariaLabel||`Edge from ${C.source} to ${C.target}`,"aria-describedby":$?`${J0}-${w}`:void 0,ref:z,...C.domAttributes,children:[!Z&&u.jsx(A,{id:e,source:C.source,target:C.target,type:C.type,selected:C.selected,animated:C.animated,selectable:G,deletable:C.deletable??!0,label:C.label,labelStyle:C.labelStyle,labelShowBg:C.labelShowBg,labelBgStyle:C.labelBgStyle,labelBgPadding:C.labelBgPadding,labelBgBorderRadius:C.labelBgBorderRadius,sourceX:q,sourceY:Y,targetX:Q,targetY:D,sourcePosition:B,targetPosition:F,data:C.data,style:C.style,sourceHandleId:C.sourceHandle,targetHandleId:C.targetHandle,markerStart:I,markerEnd:ie,pathOptions:"pathOptions"in C?C.pathOptions:void 0,interactionWidth:C.interactionWidth}),V&&u.jsx(hM,{edge:C,isReconnectable:V,reconnectRadius:m,onReconnect:g,onReconnectStart:v,onReconnectEnd:b,sourceX:q,sourceY:Y,targetX:Q,targetY:D,sourcePosition:B,targetPosition:F,setUpdateHover:U,setReconnecting:M})]})})}var mM=T.memo(pM);const gM=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function Nw({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:i,edgeTypes:o,noPanClassName:a,onReconnect:l,onEdgeContextMenu:c,onEdgeMouseEnter:f,onEdgeMouseMove:h,onEdgeMouseLeave:p,onEdgeClick:m,reconnectRadius:g,onEdgeDoubleClick:v,onReconnectStart:b,onReconnectEnd:w,disableKeyboardA11y:S}){const{edgesFocusable:j,edgesReconnectable:N,elementsSelectable:k,onError:C}=Be(gM,at),_=eM(t);return u.jsxs("div",{className:"react-flow__edges",children:[u.jsx(oM,{defaultColor:e,rfId:i}),_.map(H=>u.jsx(mM,{id:H,edgesFocusable:j,edgesReconnectable:N,elementsSelectable:k,noPanClassName:a,onReconnect:l,onContextMenu:c,onMouseEnter:f,onMouseMove:h,onMouseLeave:p,onClick:m,reconnectRadius:g,onDoubleClick:v,onReconnectStart:b,onReconnectEnd:w,rfId:i,onError:C,edgeTypes:o,disableKeyboardA11y:S},H))]})}Nw.displayName="EdgeRenderer";const yM=T.memo(Nw),xM=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function vM({children:e}){const t=Be(xM);return u.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function bM(e){const t=su(),i=T.useRef(!1);T.useEffect(()=>{!i.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),i.current=!0)},[e,t.viewportInitialized])}const wM=e=>e.panZoom?.syncViewport;function SM(e){const t=Be(wM),i=st();return T.useEffect(()=>{e&&(t?.(e),i.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function NM(e){return e.connection.inProgress?{...e.connection,to:_s(e.connection.to,e.transform)}:{...e.connection}}function EM(e){return NM}function jM(e){const t=EM();return Be(t,at)}const CM=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function kM({containerStyle:e,style:t,type:i,component:o}){const{nodesConnectable:a,width:l,height:c,isValid:f,inProgress:h}=Be(CM,at);return!(l&&a&&h)?null:u.jsx("svg",{style:e,width:l,height:c,className:"react-flow__connectionline react-flow__container",children:u.jsx("g",{className:St(["react-flow__connection",S0(f)]),children:u.jsx(Ew,{style:t,type:i,CustomComponent:o,isValid:f})})})}const Ew=({style:e,type:t=ar.Bezier,CustomComponent:i,isValid:o})=>{const{inProgress:a,from:l,fromNode:c,fromHandle:f,fromPosition:h,to:p,toNode:m,toHandle:g,toPosition:v,pointer:b}=jM();if(!a)return;if(i)return u.jsx(i,{connectionLineType:t,connectionLineStyle:e,fromNode:c,fromHandle:f,fromX:l.x,fromY:l.y,toX:p.x,toY:p.y,fromPosition:h,toPosition:v,connectionStatus:S0(o),toNode:m,toHandle:g,pointer:b});let w="";const S={sourceX:l.x,sourceY:l.y,sourcePosition:h,targetX:p.x,targetY:p.y,targetPosition:v};switch(t){case ar.Bezier:[w]=R0(S);break;case ar.SimpleBezier:[w]=dw(S);break;case ar.Step:[w]=Pc({...S,borderRadius:0});break;case ar.SmoothStep:[w]=Pc(S);break;default:[w]=z0(S)}return u.jsx("path",{d:w,fill:"none",className:"react-flow__connection-path",style:e})};Ew.displayName="ConnectionLine";const TM={};function Av(e=TM){T.useRef(e),st(),T.useEffect(()=>{},[e])}function AM(){st(),T.useRef(!1),T.useEffect(()=>{},[])}function jw({nodeTypes:e,edgeTypes:t,onInit:i,onNodeClick:o,onEdgeClick:a,onNodeDoubleClick:l,onEdgeDoubleClick:c,onNodeMouseEnter:f,onNodeMouseMove:h,onNodeMouseLeave:p,onNodeContextMenu:m,onSelectionContextMenu:g,onSelectionStart:v,onSelectionEnd:b,connectionLineType:w,connectionLineStyle:S,connectionLineComponent:j,connectionLineContainerStyle:N,selectionKeyCode:k,selectionOnDrag:C,selectionMode:_,multiSelectionKeyCode:H,panActivationKeyCode:A,zoomActivationKeyCode:$,deleteKeyCode:V,onlyRenderVisibleElements:G,elementsSelectable:z,defaultViewport:L,translateExtent:U,minZoom:Z,maxZoom:M,preventScrolling:P,defaultMarkerColor:O,zoomOnScroll:q,zoomOnPinch:Y,panOnScroll:Q,panOnScrollSpeed:D,panOnScrollMode:B,zoomOnDoubleClick:F,panOnDrag:I,onPaneClick:ie,onPaneMouseEnter:te,onPaneMouseMove:re,onPaneMouseLeave:de,onPaneScroll:ae,onPaneContextMenu:fe,paneClickDistance:xe,nodeClickDistance:je,onEdgeContextMenu:ve,onEdgeMouseEnter:Ee,onEdgeMouseMove:De,onEdgeMouseLeave:qe,reconnectRadius:Ue,onReconnect:ft,onReconnectStart:Kt,onReconnectEnd:_t,noDragClassName:Pt,noWheelClassName:En,noPanClassName:Zn,disableKeyboardA11y:Jn,nodeExtent:Nt,rfId:Ci,viewport:se,onViewportChange:pe}){return Av(e),Av(t),AM(),bM(i),SM(se),u.jsx(VA,{onPaneClick:ie,onPaneMouseEnter:te,onPaneMouseMove:re,onPaneMouseLeave:de,onPaneContextMenu:fe,onPaneScroll:ae,paneClickDistance:xe,deleteKeyCode:V,selectionKeyCode:k,selectionOnDrag:C,selectionMode:_,onSelectionStart:v,onSelectionEnd:b,multiSelectionKeyCode:H,panActivationKeyCode:A,zoomActivationKeyCode:$,elementsSelectable:z,zoomOnScroll:q,zoomOnPinch:Y,zoomOnDoubleClick:F,panOnScroll:Q,panOnScrollSpeed:D,panOnScrollMode:B,panOnDrag:I,defaultViewport:L,translateExtent:U,minZoom:Z,maxZoom:M,onSelectionContextMenu:g,preventScrolling:P,noDragClassName:Pt,noWheelClassName:En,noPanClassName:Zn,disableKeyboardA11y:Jn,onViewportChange:pe,isControlledViewport:!!se,children:u.jsxs(vM,{children:[u.jsx(yM,{edgeTypes:t,onEdgeClick:a,onEdgeDoubleClick:c,onReconnect:ft,onReconnectStart:Kt,onReconnectEnd:_t,onlyRenderVisibleElements:G,onEdgeContextMenu:ve,onEdgeMouseEnter:Ee,onEdgeMouseMove:De,onEdgeMouseLeave:qe,reconnectRadius:Ue,defaultMarkerColor:O,noPanClassName:Zn,disableKeyboardA11y:Jn,rfId:Ci}),u.jsx(kM,{style:S,type:w,component:j,containerStyle:N}),u.jsx("div",{className:"react-flow__edgelabel-renderer"}),u.jsx(KA,{nodeTypes:e,onNodeClick:o,onNodeDoubleClick:l,onNodeMouseEnter:f,onNodeMouseMove:h,onNodeMouseLeave:p,onNodeContextMenu:m,nodeClickDistance:je,onlyRenderVisibleElements:G,noPanClassName:Zn,noDragClassName:Pt,disableKeyboardA11y:Jn,nodeExtent:Nt,rfId:Ci}),u.jsx("div",{className:"react-flow__viewport-portal"})]})})}jw.displayName="GraphView";const MM=T.memo(jw),Mv=({nodes:e,edges:t,defaultNodes:i,defaultEdges:o,width:a,height:l,fitView:c,fitViewOptions:f,minZoom:h=.5,maxZoom:p=2,nodeOrigin:m,nodeExtent:g,zIndexMode:v="basic"}={})=>{const b=new Map,w=new Map,S=new Map,j=new Map,N=o??t??[],k=i??e??[],C=m??[0,0],_=g??xs;H0(S,j,N);const H=Ah(k,b,w,{nodeOrigin:C,nodeExtent:_,zIndexMode:v});let A=[0,0,1];if(c&&a&&l){const $=Ms(b,{filter:L=>!!((L.width||L.initialWidth)&&(L.height||L.initialHeight))}),{x:V,y:G,zoom:z}=ap($,a,l,h,p,f?.padding??.1);A=[V,G,z]}return{rfId:"1",width:a??0,height:l??0,transform:A,nodes:k,nodesInitialized:H,nodeLookup:b,parentLookup:w,edges:N,edgeLookup:j,connectionLookup:S,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:i!==void 0,hasDefaultEdges:o!==void 0,panZoom:null,minZoom:h,maxZoom:p,translateExtent:xs,nodeExtent:_,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Vo.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:C,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:c??!1,fitViewOptions:f,fitViewResolver:null,connection:{...w0},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:Gk,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:b0,zIndexMode:v,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},DM=({nodes:e,edges:t,defaultNodes:i,defaultEdges:o,width:a,height:l,fitView:c,fitViewOptions:f,minZoom:h,maxZoom:p,nodeOrigin:m,nodeExtent:g,zIndexMode:v})=>QT((b,w)=>{async function S(){const{nodeLookup:j,panZoom:N,fitViewOptions:k,fitViewResolver:C,width:_,height:H,minZoom:A,maxZoom:$}=w();N&&(await Vk({nodes:j,width:_,height:H,panZoom:N,minZoom:A,maxZoom:$},k),C?.resolve(!0),b({fitViewResolver:null}))}return{...Mv({nodes:e,edges:t,width:a,height:l,fitView:c,fitViewOptions:f,minZoom:h,maxZoom:p,nodeOrigin:m,nodeExtent:g,defaultNodes:i,defaultEdges:o,zIndexMode:v}),setNodes:j=>{const{nodeLookup:N,parentLookup:k,nodeOrigin:C,elevateNodesOnSelect:_,fitViewQueued:H,zIndexMode:A}=w(),$=Ah(j,N,k,{nodeOrigin:C,nodeExtent:g,elevateNodesOnSelect:_,checkEquality:!0,zIndexMode:A});H&&$?(S(),b({nodes:j,nodesInitialized:$,fitViewQueued:!1,fitViewOptions:void 0})):b({nodes:j,nodesInitialized:$})},setEdges:j=>{const{connectionLookup:N,edgeLookup:k}=w();H0(N,k,j),b({edges:j})},setDefaultNodesAndEdges:(j,N)=>{if(j){const{setNodes:k}=w();k(j),b({hasDefaultNodes:!0})}if(N){const{setEdges:k}=w();k(N),b({hasDefaultEdges:!0})}},updateNodeInternals:j=>{const{triggerNodeChanges:N,nodeLookup:k,parentLookup:C,domNode:_,nodeOrigin:H,nodeExtent:A,debug:$,fitViewQueued:V,zIndexMode:G}=w(),{changes:z,updatedInternals:L}=hT(j,k,C,_,H,A,G);L&&(cT(k,C,{nodeOrigin:H,nodeExtent:A,zIndexMode:G}),V?(S(),b({fitViewQueued:!1,fitViewOptions:void 0})):b({}),z?.length>0&&($&&console.log("React Flow: trigger node changes",z),N?.(z)))},updateNodePositions:(j,N=!1)=>{const k=[];let C=[];const{nodeLookup:_,triggerNodeChanges:H,connection:A,updateConnection:$,onNodesChangeMiddlewareMap:V}=w();for(const[G,z]of j){const L=_.get(G),U=!!(L?.expandParent&&L?.parentId&&z?.position),Z={id:G,type:"position",position:U?{x:Math.max(0,z.position.x),y:Math.max(0,z.position.y)}:z.position,dragging:N};if(L&&A.inProgress&&A.fromNode.id===L.id){const M=$r(L,A.fromHandle,ge.Left,!0);$({...A,from:M})}U&&L.parentId&&k.push({id:G,parentId:L.parentId,rect:{...z.internals.positionAbsolute,width:z.measured.width??0,height:z.measured.height??0}}),C.push(Z)}if(k.length>0){const{parentLookup:G,nodeOrigin:z}=w(),L=fp(k,_,G,z);C.push(...L)}for(const G of V.values())C=G(C);H(C)},triggerNodeChanges:j=>{const{onNodesChange:N,setNodes:k,nodes:C,hasDefaultNodes:_,debug:H}=w();if(j?.length){if(_){const A=tw(j,C);k(A)}H&&console.log("React Flow: trigger node changes",j),N?.(j)}},triggerEdgeChanges:j=>{const{onEdgesChange:N,setEdges:k,edges:C,hasDefaultEdges:_,debug:H}=w();if(j?.length){if(_){const A=nw(j,C);k(A)}H&&console.log("React Flow: trigger edge changes",j),N?.(j)}},addSelectedNodes:j=>{const{multiSelectionActive:N,edgeLookup:k,nodeLookup:C,triggerNodeChanges:_,triggerEdgeChanges:H}=w();if(N){const A=j.map($=>_r($,!0));_(A);return}_(zo(C,new Set([...j]),!0)),H(zo(k))},addSelectedEdges:j=>{const{multiSelectionActive:N,edgeLookup:k,nodeLookup:C,triggerNodeChanges:_,triggerEdgeChanges:H}=w();if(N){const A=j.map($=>_r($,!0));H(A);return}H(zo(k,new Set([...j]))),_(zo(C,new Set,!0))},unselectNodesAndEdges:({nodes:j,edges:N}={})=>{const{edges:k,nodes:C,nodeLookup:_,triggerNodeChanges:H,triggerEdgeChanges:A}=w(),$=j||C,V=N||k,G=$.map(L=>{const U=_.get(L.id);return U&&(U.selected=!1),_r(L.id,!1)}),z=V.map(L=>_r(L.id,!1));H(G),A(z)},setMinZoom:j=>{const{panZoom:N,maxZoom:k}=w();N?.setScaleExtent([j,k]),b({minZoom:j})},setMaxZoom:j=>{const{panZoom:N,minZoom:k}=w();N?.setScaleExtent([k,j]),b({maxZoom:j})},setTranslateExtent:j=>{w().panZoom?.setTranslateExtent(j),b({translateExtent:j})},resetSelectedElements:()=>{const{edges:j,nodes:N,triggerNodeChanges:k,triggerEdgeChanges:C,elementsSelectable:_}=w();if(!_)return;const H=N.reduce(($,V)=>V.selected?[...$,_r(V.id,!1)]:$,[]),A=j.reduce(($,V)=>V.selected?[...$,_r(V.id,!1)]:$,[]);k(H),C(A)},setNodeExtent:j=>{const{nodes:N,nodeLookup:k,parentLookup:C,nodeOrigin:_,elevateNodesOnSelect:H,nodeExtent:A,zIndexMode:$}=w();j[0][0]===A[0][0]&&j[0][1]===A[0][1]&&j[1][0]===A[1][0]&&j[1][1]===A[1][1]||(Ah(N,k,C,{nodeOrigin:_,nodeExtent:j,elevateNodesOnSelect:H,checkEquality:!1,zIndexMode:$}),b({nodeExtent:j}))},panBy:j=>{const{transform:N,width:k,height:C,panZoom:_,translateExtent:H}=w();return pT({delta:j,panZoom:_,transform:N,translateExtent:H,width:k,height:C})},setCenter:async(j,N,k)=>{const{width:C,height:_,maxZoom:H,panZoom:A}=w();if(!A)return Promise.resolve(!1);const $=typeof k?.zoom<"u"?k.zoom:H;return await A.setViewport({x:C/2-j*$,y:_/2-N*$,zoom:$},{duration:k?.duration,ease:k?.ease,interpolate:k?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{b({connection:{...w0}})},updateConnection:j=>{b({connection:j})},reset:()=>b({...Mv()})}},Object.is);function Cw({initialNodes:e,initialEdges:t,defaultNodes:i,defaultEdges:o,initialWidth:a,initialHeight:l,initialMinZoom:c,initialMaxZoom:f,initialFitViewOptions:h,fitView:p,nodeOrigin:m,nodeExtent:g,zIndexMode:v,children:b}){const[w]=T.useState(()=>DM({nodes:e,edges:t,defaultNodes:i,defaultEdges:o,width:a,height:l,fitView:p,minZoom:c,maxZoom:f,fitViewOptions:h,nodeOrigin:m,nodeExtent:g,zIndexMode:v}));return u.jsx(WT,{value:w,children:u.jsx(vA,{children:b})})}function _M({children:e,nodes:t,edges:i,defaultNodes:o,defaultEdges:a,width:l,height:c,fitView:f,fitViewOptions:h,minZoom:p,maxZoom:m,nodeOrigin:g,nodeExtent:v,zIndexMode:b}){return T.useContext(ou)?u.jsx(u.Fragment,{children:e}):u.jsx(Cw,{initialNodes:t,initialEdges:i,defaultNodes:o,defaultEdges:a,initialWidth:l,initialHeight:c,fitView:f,initialFitViewOptions:h,initialMinZoom:p,initialMaxZoom:m,nodeOrigin:g,nodeExtent:v,zIndexMode:b,children:e})}const OM={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function RM({nodes:e,edges:t,defaultNodes:i,defaultEdges:o,className:a,nodeTypes:l,edgeTypes:c,onNodeClick:f,onEdgeClick:h,onInit:p,onMove:m,onMoveStart:g,onMoveEnd:v,onConnect:b,onConnectStart:w,onConnectEnd:S,onClickConnectStart:j,onClickConnectEnd:N,onNodeMouseEnter:k,onNodeMouseMove:C,onNodeMouseLeave:_,onNodeContextMenu:H,onNodeDoubleClick:A,onNodeDragStart:$,onNodeDrag:V,onNodeDragStop:G,onNodesDelete:z,onEdgesDelete:L,onDelete:U,onSelectionChange:Z,onSelectionDragStart:M,onSelectionDrag:P,onSelectionDragStop:O,onSelectionContextMenu:q,onSelectionStart:Y,onSelectionEnd:Q,onBeforeDelete:D,connectionMode:B,connectionLineType:F=ar.Bezier,connectionLineStyle:I,connectionLineComponent:ie,connectionLineContainerStyle:te,deleteKeyCode:re="Backspace",selectionKeyCode:de="Shift",selectionOnDrag:ae=!1,selectionMode:fe=vs.Full,panActivationKeyCode:xe="Space",multiSelectionKeyCode:je=ws()?"Meta":"Control",zoomActivationKeyCode:ve=ws()?"Meta":"Control",snapToGrid:Ee,snapGrid:De,onlyRenderVisibleElements:qe=!1,selectNodesOnDrag:Ue,nodesDraggable:ft,autoPanOnNodeFocus:Kt,nodesConnectable:_t,nodesFocusable:Pt,nodeOrigin:En=K0,edgesFocusable:Zn,edgesReconnectable:Jn,elementsSelectable:Nt=!0,defaultViewport:Ci=cA,minZoom:se=.5,maxZoom:pe=2,translateExtent:Se=xs,preventScrolling:_e=!0,nodeExtent:He,defaultMarkerColor:Bt="#b1b1b7",zoomOnScroll:jn=!0,zoomOnPinch:kt=!0,panOnScroll:ht=!1,panOnScrollSpeed:Ot=.5,panOnScrollMode:Qe=Ir.Free,zoomOnDoubleClick:zn=!0,panOnDrag:en=!0,onPaneClick:yu,onPaneMouseEnter:Vr,onPaneMouseMove:Fr,onPaneMouseLeave:Gr,onPaneScroll:Kn,onPaneContextMenu:Yr,paneClickDistance:ur=1,nodeClickDistance:xu=0,children:Bs,onReconnect:Ko,onReconnectStart:dr,onReconnectEnd:vu,onEdgeContextMenu:$s,onEdgeDoubleClick:Hs,onEdgeMouseEnter:Ps,onEdgeMouseMove:ea,onEdgeMouseLeave:ta,reconnectRadius:qs=10,onNodesChange:Us,onEdgesChange:Bn,noDragClassName:Et="nodrag",noWheelClassName:Rt="nowheel",noPanClassName:ei="nopan",fitView:Xr,fitViewOptions:Vs,connectOnClick:bu,attributionPosition:Fs,proOptions:fr,defaultEdgeOptions:na,elevateNodesOnSelect:ki=!0,elevateEdgesOnSelect:Ti=!1,disableKeyboardA11y:Ai=!1,autoPanOnConnect:Mi,autoPanOnNodeDrag:gt,autoPanSpeed:Gs,connectionRadius:Ys,isValidConnection:ti,onError:Di,style:wu,id:ia,nodeDragThreshold:Xs,connectionDragThreshold:Su,viewport:Qr,onViewportChange:Wr,width:Cn,height:qt,colorMode:Qs="light",debug:Nu,onScroll:Zr,ariaLabelConfig:Ws,zIndexMode:hr="basic",...Eu},Ut){const pr=ia||"1",Zs=hA(Qs),ra=T.useCallback(ni=>{ni.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Zr?.(ni)},[Zr]);return u.jsx("div",{"data-testid":"rf__wrapper",...Eu,onScroll:ra,style:{...wu,...OM},ref:Ut,className:St(["react-flow",a,Zs]),id:ia,role:"application",children:u.jsxs(_M,{nodes:e,edges:t,width:Cn,height:qt,fitView:Xr,fitViewOptions:Vs,minZoom:se,maxZoom:pe,nodeOrigin:En,nodeExtent:He,zIndexMode:hr,children:[u.jsx(MM,{onInit:p,onNodeClick:f,onEdgeClick:h,onNodeMouseEnter:k,onNodeMouseMove:C,onNodeMouseLeave:_,onNodeContextMenu:H,onNodeDoubleClick:A,nodeTypes:l,edgeTypes:c,connectionLineType:F,connectionLineStyle:I,connectionLineComponent:ie,connectionLineContainerStyle:te,selectionKeyCode:de,selectionOnDrag:ae,selectionMode:fe,deleteKeyCode:re,multiSelectionKeyCode:je,panActivationKeyCode:xe,zoomActivationKeyCode:ve,onlyRenderVisibleElements:qe,defaultViewport:Ci,translateExtent:Se,minZoom:se,maxZoom:pe,preventScrolling:_e,zoomOnScroll:jn,zoomOnPinch:kt,zoomOnDoubleClick:zn,panOnScroll:ht,panOnScrollSpeed:Ot,panOnScrollMode:Qe,panOnDrag:en,onPaneClick:yu,onPaneMouseEnter:Vr,onPaneMouseMove:Fr,onPaneMouseLeave:Gr,onPaneScroll:Kn,onPaneContextMenu:Yr,paneClickDistance:ur,nodeClickDistance:xu,onSelectionContextMenu:q,onSelectionStart:Y,onSelectionEnd:Q,onReconnect:Ko,onReconnectStart:dr,onReconnectEnd:vu,onEdgeContextMenu:$s,onEdgeDoubleClick:Hs,onEdgeMouseEnter:Ps,onEdgeMouseMove:ea,onEdgeMouseLeave:ta,reconnectRadius:qs,defaultMarkerColor:Bt,noDragClassName:Et,noWheelClassName:Rt,noPanClassName:ei,rfId:pr,disableKeyboardA11y:Ai,nodeExtent:He,viewport:Qr,onViewportChange:Wr}),u.jsx(fA,{nodes:e,edges:t,defaultNodes:i,defaultEdges:o,onConnect:b,onConnectStart:w,onConnectEnd:S,onClickConnectStart:j,onClickConnectEnd:N,nodesDraggable:ft,autoPanOnNodeFocus:Kt,nodesConnectable:_t,nodesFocusable:Pt,edgesFocusable:Zn,edgesReconnectable:Jn,elementsSelectable:Nt,elevateNodesOnSelect:ki,elevateEdgesOnSelect:Ti,minZoom:se,maxZoom:pe,nodeExtent:He,onNodesChange:Us,onEdgesChange:Bn,snapToGrid:Ee,snapGrid:De,connectionMode:B,translateExtent:Se,connectOnClick:bu,defaultEdgeOptions:na,fitView:Xr,fitViewOptions:Vs,onNodesDelete:z,onEdgesDelete:L,onDelete:U,onNodeDragStart:$,onNodeDrag:V,onNodeDragStop:G,onSelectionDrag:P,onSelectionDragStart:M,onSelectionDragStop:O,onMove:m,onMoveStart:g,onMoveEnd:v,noPanClassName:ei,nodeOrigin:En,rfId:pr,autoPanOnConnect:Mi,autoPanOnNodeDrag:gt,autoPanSpeed:Gs,onError:Di,connectionRadius:Ys,isValidConnection:ti,selectNodesOnDrag:Ue,nodeDragThreshold:Xs,connectionDragThreshold:Su,onBeforeDelete:D,debug:Nu,ariaLabelConfig:Ws,zIndexMode:hr}),u.jsx(lA,{onSelectionChange:Z}),Bs,u.jsx(iA,{proOptions:fr,position:Fs}),u.jsx(nA,{rfId:pr,disableKeyboardA11y:Ai})]})})}var IM=iw(RM);const LM=e=>e.domNode?.querySelector(".react-flow__edgelabel-renderer");function zM({children:e}){const t=Be(LM);return t?Dh.createPortal(e,t):null}function kw(){const e=st();return T.useCallback(t=>{const{domNode:i,updateNodeInternals:o}=e.getState(),a=Array.isArray(t)?t:[t],l=new Map;a.forEach(c=>{const f=i?.querySelector(`.react-flow__node[data-id="${c}"]`);f&&l.set(c,{id:c,nodeElement:f,force:!0})}),requestAnimationFrame(()=>o(l,{triggerFitView:!1}))},[])}const BM=e=>({x:e.transform[0],y:e.transform[1],zoom:e.transform[2]});function $M(){return Be(BM,at)}function HM({dimensions:e,lineWidth:t,variant:i,className:o}){return u.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:St(["react-flow__background-pattern",i,o])})}function PM({radius:e,className:t}){return u.jsx("circle",{cx:e,cy:e,r:e,className:St(["react-flow__background-pattern","dots",t])})}var sr;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(sr||(sr={}));const qM={[sr.Dots]:1,[sr.Lines]:1,[sr.Cross]:6},UM=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Tw({id:e,variant:t=sr.Dots,gap:i=20,size:o,lineWidth:a=1,offset:l=0,color:c,bgColor:f,style:h,className:p,patternClassName:m}){const g=T.useRef(null),{transform:v,patternId:b}=Be(UM,at),w=o||qM[t],S=t===sr.Dots,j=t===sr.Cross,N=Array.isArray(i)?i:[i,i],k=[N[0]*v[2]||1,N[1]*v[2]||1],C=w*v[2],_=Array.isArray(l)?l:[l,l],H=j?[C,C]:k,A=[_[0]*v[2]||1+H[0]/2,_[1]*v[2]||1+H[1]/2],$=`${b}${e||""}`;return u.jsxs("svg",{className:St(["react-flow__background",p]),style:{...h,...lu,"--xy-background-color-props":f,"--xy-background-pattern-color-props":c},ref:g,"data-testid":"rf__background",children:[u.jsx("pattern",{id:$,x:v[0]%k[0],y:v[1]%k[1],width:k[0],height:k[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${A[0]},-${A[1]})`,children:S?u.jsx(PM,{radius:C/2,className:m}):u.jsx(HM,{dimensions:H,lineWidth:a,variant:t,className:m})}),u.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${$})`})]})}Tw.displayName="Background";const VM=T.memo(Tw);function FM(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:u.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function GM(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:u.jsx("path",{d:"M0 0h32v4.2H0z"})})}function YM(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:u.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function XM(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:u.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function QM(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:u.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function mc({children:e,className:t,...i}){return u.jsx("button",{type:"button",className:St(["react-flow__controls-button",t]),...i,children:e})}const WM=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function Aw({style:e,showZoom:t=!0,showFitView:i=!0,showInteractive:o=!0,fitViewOptions:a,onZoomIn:l,onZoomOut:c,onFitView:f,onInteractiveChange:h,className:p,children:m,position:g="bottom-left",orientation:v="vertical","aria-label":b}){const w=st(),{isInteractive:S,minZoomReached:j,maxZoomReached:N,ariaLabelConfig:k}=Be(WM,at),{zoomIn:C,zoomOut:_,fitView:H}=su(),A=()=>{C(),l?.()},$=()=>{_(),c?.()},V=()=>{H(a),f?.()},G=()=>{w.setState({nodesDraggable:!S,nodesConnectable:!S,elementsSelectable:!S}),h?.(!S)},z=v==="horizontal"?"horizontal":"vertical";return u.jsxs(au,{className:St(["react-flow__controls",z,p]),position:g,style:e,"data-testid":"rf__controls","aria-label":b??k["controls.ariaLabel"],children:[t&&u.jsxs(u.Fragment,{children:[u.jsx(mc,{onClick:A,className:"react-flow__controls-zoomin",title:k["controls.zoomIn.ariaLabel"],"aria-label":k["controls.zoomIn.ariaLabel"],disabled:N,children:u.jsx(FM,{})}),u.jsx(mc,{onClick:$,className:"react-flow__controls-zoomout",title:k["controls.zoomOut.ariaLabel"],"aria-label":k["controls.zoomOut.ariaLabel"],disabled:j,children:u.jsx(GM,{})})]}),i&&u.jsx(mc,{className:"react-flow__controls-fitview",onClick:V,title:k["controls.fitView.ariaLabel"],"aria-label":k["controls.fitView.ariaLabel"],children:u.jsx(YM,{})}),o&&u.jsx(mc,{className:"react-flow__controls-interactive",onClick:G,title:k["controls.interactive.ariaLabel"],"aria-label":k["controls.interactive.ariaLabel"],children:S?u.jsx(QM,{}):u.jsx(XM,{})}),m]})}Aw.displayName="Controls";T.memo(Aw);function ZM({id:e,x:t,y:i,width:o,height:a,style:l,color:c,strokeColor:f,strokeWidth:h,className:p,borderRadius:m,shapeRendering:g,selected:v,onClick:b}){const{background:w,backgroundColor:S}=l||{},j=c||w||S;return u.jsx("rect",{className:St(["react-flow__minimap-node",{selected:v},p]),x:t,y:i,rx:m,ry:m,width:o,height:a,style:{fill:j,stroke:f,strokeWidth:h},shapeRendering:g,onClick:b?N=>b(N,e):void 0})}const JM=T.memo(ZM),KM=e=>e.nodes.map(t=>t.id),Xf=e=>e instanceof Function?e:()=>e;function e2({nodeStrokeColor:e,nodeColor:t,nodeClassName:i="",nodeBorderRadius:o=5,nodeStrokeWidth:a,nodeComponent:l=JM,onClick:c}){const f=Be(KM,at),h=Xf(t),p=Xf(e),m=Xf(i),g=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return u.jsx(u.Fragment,{children:f.map(v=>u.jsx(n2,{id:v,nodeColorFunc:h,nodeStrokeColorFunc:p,nodeClassNameFunc:m,nodeBorderRadius:o,nodeStrokeWidth:a,NodeComponent:l,onClick:c,shapeRendering:g},v))})}function t2({id:e,nodeColorFunc:t,nodeStrokeColorFunc:i,nodeClassNameFunc:o,nodeBorderRadius:a,nodeStrokeWidth:l,shapeRendering:c,NodeComponent:f,onClick:h}){const{node:p,x:m,y:g,width:v,height:b}=Be(w=>{const{internals:S}=w.nodeLookup.get(e),j=S.userNode,{x:N,y:k}=S.positionAbsolute,{width:C,height:_}=Ni(j);return{node:j,x:N,y:k,width:C,height:_}},at);return!p||p.hidden||!T0(p)?null:u.jsx(f,{x:m,y:g,width:v,height:b,style:p.style,selected:!!p.selected,className:o(p),color:t(p),borderRadius:a,strokeColor:i(p),strokeWidth:l,shapeRendering:c,onClick:h,id:p.id})}const n2=T.memo(t2);var i2=T.memo(e2);const r2=200,o2=150,a2=e=>!e.hidden,s2=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?k0(Ms(e.nodeLookup,{filter:a2}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},l2="react-flow__minimap-desc";function Mw({style:e,className:t,nodeStrokeColor:i,nodeColor:o,nodeClassName:a="",nodeBorderRadius:l=5,nodeStrokeWidth:c,nodeComponent:f,bgColor:h,maskColor:p,maskStrokeColor:m,maskStrokeWidth:g,position:v="bottom-right",onClick:b,onNodeClick:w,pannable:S=!1,zoomable:j=!1,ariaLabel:N,inversePan:k,zoomStep:C=1,offsetScale:_=5}){const H=st(),A=T.useRef(null),{boundingRect:$,viewBB:V,rfId:G,panZoom:z,translateExtent:L,flowWidth:U,flowHeight:Z,ariaLabelConfig:M}=Be(s2,at),P=e?.width??r2,O=e?.height??o2,q=$.width/P,Y=$.height/O,Q=Math.max(q,Y),D=Q*P,B=Q*O,F=_*Q,I=$.x-(D-$.width)/2-F,ie=$.y-(B-$.height)/2-F,te=D+F*2,re=B+F*2,de=`${l2}-${G}`,ae=T.useRef(0),fe=T.useRef();ae.current=Q,T.useEffect(()=>{if(A.current&&z)return fe.current=NT({domNode:A.current,panZoom:z,getTransform:()=>H.getState().transform,getViewScale:()=>ae.current}),()=>{fe.current?.destroy()}},[z]),T.useEffect(()=>{fe.current?.update({translateExtent:L,width:U,height:Z,inversePan:k,pannable:S,zoomStep:C,zoomable:j})},[S,j,k,C,L,U,Z]);const xe=b?Ee=>{const[De,qe]=fe.current?.pointer(Ee)||[0,0];b(Ee,{x:De,y:qe})}:void 0,je=w?T.useCallback((Ee,De)=>{const qe=H.getState().nodeLookup.get(De).internals.userNode;w(Ee,qe)},[]):void 0,ve=N??M["minimap.ariaLabel"];return u.jsx(au,{position:v,style:{...e,"--xy-minimap-background-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-background-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-stroke-color-props":typeof m=="string"?m:void 0,"--xy-minimap-mask-stroke-width-props":typeof g=="number"?g*Q:void 0,"--xy-minimap-node-background-color-props":typeof o=="string"?o:void 0,"--xy-minimap-node-stroke-color-props":typeof i=="string"?i:void 0,"--xy-minimap-node-stroke-width-props":typeof c=="number"?c:void 0},className:St(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:u.jsxs("svg",{width:P,height:O,viewBox:`${I} ${ie} ${te} ${re}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":de,ref:A,onClick:xe,children:[ve&&u.jsx("title",{id:de,children:ve}),u.jsx(i2,{onClick:je,nodeColor:o,nodeStrokeColor:i,nodeBorderRadius:l,nodeClassName:a,nodeStrokeWidth:c,nodeComponent:f}),u.jsx("path",{className:"react-flow__minimap-mask",d:`M${I-F},${ie-F}h${te+F*2}v${re+F*2}h${-te-F*2}z
        M${V.x},${V.y}h${V.width}v${V.height}h${-V.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}Mw.displayName="MiniMap";const c2=T.memo(Mw),u2=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,d2={[Xo.Line]:"right",[Xo.Handle]:"bottom-right"};function f2({nodeId:e,position:t,variant:i=Xo.Handle,className:o,style:a=void 0,children:l,color:c,minWidth:f=10,minHeight:h=10,maxWidth:p=Number.MAX_VALUE,maxHeight:m=Number.MAX_VALUE,keepAspectRatio:g=!1,resizeDirection:v,autoScale:b=!0,shouldResize:w,onResizeStart:S,onResize:j,onResizeEnd:N}){const k=qr(),C=typeof e=="string"?e:k,_=st(),H=T.useRef(null),A=i===Xo.Handle,$=Be(T.useCallback(u2(A&&b),[A,b]),at),V=T.useRef(null),G=t??d2[i];T.useEffect(()=>{if(!(!H.current||!C))return V.current||(V.current=zT({domNode:H.current,nodeId:C,getStoreItems:()=>{const{nodeLookup:L,transform:U,snapGrid:Z,snapToGrid:M,nodeOrigin:P,domNode:O}=_.getState();return{nodeLookup:L,transform:U,snapGrid:Z,snapToGrid:M,nodeOrigin:P,paneDomNode:O}},onChange:(L,U)=>{const{triggerNodeChanges:Z,nodeLookup:M,parentLookup:P,nodeOrigin:O}=_.getState(),q=[],Y={x:L.x,y:L.y},Q=M.get(C);if(Q&&Q.expandParent&&Q.parentId){const D=Q.origin??O,B=L.width??Q.measured.width??0,F=L.height??Q.measured.height??0,I={id:Q.id,parentId:Q.parentId,rect:{width:B,height:F,...A0({x:L.x??Q.position.x,y:L.y??Q.position.y},{width:B,height:F},Q.parentId,M,D)}},ie=fp([I],M,P,O);q.push(...ie),Y.x=L.x?Math.max(D[0]*B,L.x):void 0,Y.y=L.y?Math.max(D[1]*F,L.y):void 0}if(Y.x!==void 0&&Y.y!==void 0){const D={id:C,type:"position",position:{...Y}};q.push(D)}if(L.width!==void 0&&L.height!==void 0){const B={id:C,type:"dimensions",resizing:!0,setAttributes:v?v==="horizontal"?"width":"height":!0,dimensions:{width:L.width,height:L.height}};q.push(B)}for(const D of U){const B={...D,type:"position"};q.push(B)}Z(q)},onEnd:({width:L,height:U})=>{const Z={id:C,type:"dimensions",resizing:!1,dimensions:{width:L,height:U}};_.getState().triggerNodeChanges([Z])}})),V.current.update({controlPosition:G,boundaries:{minWidth:f,minHeight:h,maxWidth:p,maxHeight:m},keepAspectRatio:g,resizeDirection:v,onResizeStart:S,onResize:j,onResizeEnd:N,shouldResize:w}),()=>{V.current?.destroy()}},[G,f,h,p,m,g,S,j,N,w]);const z=G.split("-");return u.jsx("div",{className:St(["react-flow__resize-control","nodrag",...z,i,o]),ref:H,style:{...a,scale:$,...c&&{[A?"backgroundColor":"borderColor"]:c}},children:l})}T.memo(f2);const Dv=e=>{let t;const i=new Set,o=(p,m)=>{const g=typeof p=="function"?p(t):p;if(!Object.is(g,t)){const v=t;t=m??(typeof g!="object"||g===null)?g:Object.assign({},t,g),i.forEach(b=>b(t,v))}},a=()=>t,f={setState:o,getState:a,getInitialState:()=>h,subscribe:p=>(i.add(p),()=>i.delete(p))},h=t=e(o,a,f);return f},h2=(e=>e?Dv(e):Dv),p2=e=>e;function m2(e,t=p2){const i=Nn.useSyncExternalStore(e.subscribe,Nn.useCallback(()=>t(e.getState()),[e,t]),Nn.useCallback(()=>t(e.getInitialState()),[e,t]));return Nn.useDebugValue(i),i}const _v=e=>{const t=h2(e),i=o=>m2(t,o);return Object.assign(i,t),i},cu=(e=>e?_v(e):_v),Ce=cu((e,t)=>({workflowId:null,workflowName:"Untitled Workflow",nodes:[],edges:[],selectedNodeId:null,configOpen:!1,setNodes:i=>e({nodes:i}),setEdges:i=>e({edges:i}),onNodesChange:i=>{e({nodes:tw(i,t().nodes)})},onEdgesChange:i=>{e({edges:nw(i,t().edges)})},onConnect:i=>{const o={...i,type:"animated"};e({edges:L0(o,t().edges)})},addNode:i=>{e({nodes:[...t().nodes,i]})},updateNode:(i,o)=>{e({nodes:t().nodes.map(a=>a.id===i?{...a,data:{...a.data,...o}}:a)})},deleteNode:i=>{e({nodes:t().nodes.filter(o=>o.id!==i),edges:t().edges.filter(o=>o.source!==i&&o.target!==i)})},setSelectedNode:i=>e({selectedNodeId:i}),setConfigOpen:i=>e({configOpen:i}),openConfig:i=>e({selectedNodeId:i,configOpen:!0}),closeConfig:()=>e({configOpen:!1}),clearWorkflow:()=>e({nodes:[],edges:[],selectedNodeId:null,configOpen:!1}),setWorkflowName:i=>e({workflowName:i}),getWorkflowData:()=>({id:t().workflowId,name:t().workflowName,nodes:t().nodes,edges:t().edges}),loadWorkflow:i=>{e({workflowId:i.id||Date.now().toString(),workflowName:i.name||"Untitled Workflow",nodes:i.nodes||[],edges:i.edges||[],selectedNodeId:null})}})),Xe=cu((e,t)=>({isRunning:!1,isPaused:!1,isDebugMode:!1,currentNodeId:null,activeSupportingNodeIds:[],executionPath:[],logs:[],nodeResults:{},edgeSnapshots:{},artifacts:[],startTime:null,endTime:null,startExecution:()=>{e({isRunning:!0,isPaused:!1,startTime:Date.now(),endTime:null,logs:[],nodeResults:{},executionPath:[],currentNodeId:null,activeSupportingNodeIds:[]})},stopExecution:()=>{e({isRunning:!1,isPaused:!1,endTime:Date.now(),currentNodeId:null,activeSupportingNodeIds:[]})},setCurrentNode:i=>{const o=t().executionPath;e({currentNodeId:i,executionPath:i?[...o,i]:o,activeSupportingNodeIds:[]})},setActiveSupportingNodes:i=>{e({activeSupportingNodeIds:i||[]})},setNodeResult:(i,o)=>{e({nodeResults:{...t().nodeResults,[i]:o}})},addEdgeSnapshot:(i,o)=>{const a=t().edgeSnapshots,l=a[i]||[],c={timestamp:Date.now(),data:o,preview:JSON.stringify(o,null,2).slice(0,500)},f=[...l,c].slice(-5);e({edgeSnapshots:{...a,[i]:f}})},getEdgeSnapshots:i=>t().edgeSnapshots[i]||[],getLastEdgeSnapshot:i=>{const o=t().edgeSnapshots[i];return o?.[o.length-1]||null},clearEdgeSnapshots:()=>e({edgeSnapshots:{}}),addLog:i=>{const o={id:Date.now().toString()+Math.random().toString(36).slice(2,9),timestamp:new Date().toISOString(),...i};e({logs:[...t().logs,o]})},addArtifact:i=>{e({artifacts:[...t().artifacts,i]})},clearLogs:()=>e({logs:[]}),setDebugMode:i=>e({isDebugMode:i}),getExecutionDuration:()=>{const{startTime:i,endTime:o,isRunning:a}=t();return i?(a?Date.now():o||Date.now())-i:0},reset:()=>{e({isRunning:!1,isPaused:!1,isDebugMode:!1,currentNodeId:null,executionPath:[],logs:[],nodeResults:{},edgeSnapshots:{},artifacts:[],startTime:null,endTime:null})}})),Qo=cu((e,t)=>({toasts:[],addToast:(i,o="info",a=3e3)=>{const l=Date.now().toString()+Math.random().toString(36).slice(2,6),c={id:l,message:i,type:o,duration:a};return e({toasts:[...t().toasts,c]}),a>0&&setTimeout(()=>{t().removeToast(l)},a),l},removeToast:i=>{e({toasts:t().toasts.filter(o=>o.id!==i)})},success:(i,o)=>t().addToast(i,"success",o),error:(i,o)=>t().addToast(i,"error",o??5e3),warning:(i,o)=>t().addToast(i,"warning",o),info:(i,o)=>t().addToast(i,"info",o)})),Hr={trigger:{name:"Triggers",color:"#00c853",description:"Start a workflow execution"},action:{name:"Actions",color:"#2979ff",description:"Perform operations on data"},logic:{name:"Logic",color:"#ffab00",description:"Control workflow flow"},ai:{name:"AI",color:"#e040fb",description:"AI-powered operations"},aiTool:{name:"AI Tools",color:"#f59e0b",description:"Tools callable by AI Agents"}},Ei={manualTrigger:{type:"manualTrigger",category:"trigger",name:"Manual Trigger",description:"Manually start the workflow",icon:"",inputs:0,outputs:1,defaultData:{label:"Manual Trigger"}},scheduleTrigger:{type:"scheduleTrigger",category:"trigger",name:"Schedule Trigger",description:"Run on a schedule (cron-like)",icon:"",inputs:1,outputs:1,defaultData:{label:"Schedule",schedule:"*/5 * * * *",enabled:!1}},webhookTrigger:{type:"webhookTrigger",category:"trigger",name:"Webhook Trigger",description:"Receive external HTTP triggers",icon:"",inputs:0,outputs:1,defaultData:{label:"Webhook",method:"POST",endpoint:"/webhook/default",authRequired:!1}},errorTrigger:{type:"errorTrigger",category:"trigger",name:"Error Trigger",description:"Trigger when any node fails",icon:"",inputs:0,outputs:1,defaultData:{label:"On Error",watchAll:!0,specificNodes:[],retryEnabled:!1,retryCount:3}},browserEventTrigger:{type:"browserEventTrigger",category:"trigger",name:"Browser Event",description:"Trigger on browser events",icon:"",inputs:0,outputs:1,defaultData:{label:"Browser Event",eventType:"focus",selector:"",urlPattern:"",interval:1e3}},output:{type:"output",category:"trigger",name:"Output",description:"Workflow output - displays or saves result",icon:"",inputs:1,outputs:0,defaultData:{label:"Output",outputType:"console",filename:"output.txt",formatJson:!1}},codeExecutor:{type:"codeExecutor",category:"action",name:"Code",description:"Execute JavaScript code",icon:"",inputs:1,outputs:1,defaultData:{label:"Code",code:"// Access input data via `input`\n// Return output data\nreturn input;"}},setVariable:{type:"setVariable",category:"action",name:"Set Variable",description:"Set or transform data",icon:"",inputs:1,outputs:1,defaultData:{label:"Set Variable",variableName:"data",value:"",mode:"set"}},httpRequest:{type:"httpRequest",category:"aiTool",name:"HTTP Request",description:"Make HTTP requests to APIs",icon:"",inputs:0,outputs:0,isProvider:!0,defaultData:{label:"HTTP Request",method:"GET",url:"",headers:{},body:"",timeout:3e4,description:"Perform HTTP request. Args: { url, method, body }"}},fileSystem:{type:"fileSystem",category:"aiTool",name:"File System",description:"Read/write local files (FSA API)",icon:"",inputs:0,outputs:0,isProvider:!0,defaultData:{label:"File",mode:"read",filename:"",fileTypes:[],description:"Read or write files. Args: { filename, content, mode }"}},localStorage:{type:"localStorage",category:"action",name:"Local Storage",description:"Read/write to IndexedDB or LocalStorage",icon:"",inputs:1,outputs:1,defaultData:{label:"Storage",mode:"get",storageType:"indexedDB",key:""}},ifElse:{type:"ifElse",category:"logic",name:"If/Else",description:"Branch based on conditions",icon:"",inputs:1,outputs:2,defaultData:{label:"If/Else",condition:"",operator:"equals",compareValue:""}},loop:{type:"loop",category:"logic",name:"Loop",description:"Iterate over array items or repeat N times",icon:"",inputs:1,outputs:2,defaultData:{label:"Loop",iterations:1,itemsPath:"items",maxIterations:100}},switchNode:{type:"switchNode",category:"logic",name:"Switch",description:"Route to different outputs",icon:"",inputs:1,outputs:4,defaultData:{label:"Switch",field:"",routes:[{value:"",outputIndex:0},{value:"",outputIndex:1}],defaultOutput:3}},merge:{type:"merge",category:"logic",name:"Merge",description:"Combine multiple inputs (wait for all or first)",icon:"",inputs:2,outputs:1,defaultData:{label:"Merge",mode:"wait",inputCount:2,aggregator:"array"}},semanticRouter:{type:"semanticRouter",category:"ai",name:"Semantic Router",description:"Route input to outputs based on semantic classification",icon:"",inputs:1,outputs:4,defaultData:{label:"Router",classificationMode:"keyword",routes:[{id:"route-0",label:"General",keywords:["general","other"]},{id:"route-1",label:"Technical",keywords:["code","programming","bug"]},{id:"route-2",label:"Creative",keywords:["story","write","creative"]}]}},evaluator:{type:"evaluator",category:"ai",name:"Evaluator",description:"Validate output against schema for self-correction loops",icon:"",inputs:1,outputs:2,defaultData:{label:"Evaluator",evaluationType:"schema",maxRetries:3,schema:null,regexPattern:""}},swarm:{type:"swarm",category:"ai",name:"Swarm",description:"Execute multiple AI agents in parallel and aggregate results",icon:"",inputs:1,outputs:2,defaultData:{label:"Swarm",agentCount:3,aggregationMode:"consensus",timeout:3e4,systemPrompt:""}},groupNode:{type:"groupNode",category:"logic",name:"Group",description:"Collapsible container for grouping nodes",icon:"",inputs:1,outputs:1,defaultData:{label:"Node Group",collapsed:!1,childNodeIds:[],width:300,height:200,color:"#6366f1"}},chatModel:{type:"chatModel",category:"ai",name:"Chat Model",description:"AI model provider for agents",icon:"",inputs:0,outputs:0,isProvider:!0,defaultData:{label:"Chat Model",provider:"webllm",modelId:"gemma-2-2b-it-q4f16_1-MLC",modelName:"Gemma 2 2B",temperature:.7,maxTokens:2e3}},aiAgent:{type:"aiAgent",category:"ai",name:"AI Agent",description:"WebLLM-powered AI agent with ReAct",icon:"",inputs:1,outputs:1,defaultData:{label:"AI Agent",systemPrompt:"",modelId:"gemma-2-2b-it-q4f16_1-MLC",temperature:.7,maxTokens:2e3,tools:[]}},vectorMemory:{type:"vectorMemory",category:"ai",name:"Vector Memory",description:"Store and query local vector memory",icon:"",inputs:1,outputs:1,isProvider:!0,defaultData:{label:"Memory",mode:"query",namespace:"default",topK:5,minScore:.3}},waitForApproval:{type:"waitForApproval",category:"ai",name:"Wait for Approval",description:"Pause workflow for human approval",icon:"",inputs:1,outputs:2,defaultData:{label:"Approval",title:"Approval Required",message:"",timeout:0,notifyBrowser:!0}},subWorkflow:{type:"subWorkflow",category:"ai",name:"Sub-Workflow",description:"Execute another workflow as subroutine",icon:"",inputs:1,outputs:1,defaultData:{label:"Sub-Workflow",workflowId:"",workflowName:"",passInput:!0,async:!1}},textToSpeech:{type:"textToSpeech",category:"aiTool",name:"Text to Speech",description:"Convert text to audio using Web Speech API",icon:"",inputs:0,outputs:0,isProvider:!0,defaultData:{label:"Text to Speech",provider:"webSpeech",voice:"default",speed:1,pitch:1,autoPlay:!0}},imageGeneration:{type:"imageGeneration",category:"aiTool",name:"Image Generation",description:"Generate images using AI models",icon:"",inputs:1,outputs:1,defaultData:{label:"Generate Image",provider:"local",model:"stable-diffusion",size:"512x512",negativePrompt:"",seed:null,steps:20}},pythonExecutor:{type:"pythonExecutor",category:"aiTool",name:"Python Executor",description:"Run Python code locally using Pyodide",icon:"",inputs:1,outputs:1,defaultData:{label:"Python",code:`# Access input via 'input' variable
result = input`,packages:[],timeout:3e4}}};function g2(){const e={};return Object.values(Hr).forEach(t=>{e[t.name]=[]}),Object.values(Ei).forEach(t=>{const i=Hr[t.category];i&&e[i.name].push(t)}),e}function ir(e,t){const i=Ei[e];if(!i)throw new Error(`Unknown node type: ${e}`);return{id:`${e}-${Date.now()}-${Math.random().toString(36).slice(2,9)}`,type:e,position:t,data:{...i.defaultData}}}function uu(e){const t=Ei[e];if(!t)return"#666666";const i=Hr[t.category];return i?i.color:"#666666"}function y2(e,t,i){const{source:o,target:a}=e;if(o===a)return!1;const l=t.find(v=>v.id===o),c=t.find(v=>v.id===a);if(!l||!c||Ei[c.type]?.category==="trigger"&&c.type!=="scheduleTrigger"&&c.type!=="output"||i.find(v=>v.source===o&&v.target===a))return!1;const p=l.type==="loop";if(i.find(v=>v.source===a&&v.target===o)&&!p)return!1;const{targetHandle:g}=e;return!(g==="model-slot"&&l.type!=="chatModel"||g==="memory-slot"&&l.type!=="vectorMemory"||g==="tool-slot"&&!["codeExecutor","pythonExecutor","httpRequest","pythonTool","textToSpeech","imageGeneration","aiAgent","fileSystem"].includes(l.type))}function x2(e){return e.filter(t=>Ei[t.type]?.category==="trigger")}function v2({x:e,y:t,type:i,onClose:o,onAction:a}){const l=i==="node"?[{id:"duplicate",label:"Duplicate",icon:"",shortcut:"Ctrl+D"},{id:"copy",label:"Copy",icon:"",shortcut:"Ctrl+C"},{id:"cut",label:"Cut",icon:"",shortcut:"Ctrl+X"},{id:"divider1",divider:!0},{id:"delete",label:"Delete",icon:"",shortcut:"Del",danger:!0}]:i==="insert"?[{id:"addTrigger",label:"Add Trigger",icon:""},{id:"addHTTP",label:"Add HTTP Request",icon:""},{id:"addAI",label:"Add AI Agent",icon:""},{id:"codeExecutor",label:"Add Code Executor",icon:""},{id:"setVariable",label:"Add Set Variable",icon:""},{id:"divider1",divider:!0},{id:"ifElse",label:"Add If/Else",icon:""},{id:"textToSpeech",label:"Add Text to Speech",icon:""},{id:"output",label:"Add Output",icon:""}]:[{id:"addTrigger",label:"Add Trigger",icon:""},{id:"addHTTP",label:"Add HTTP Request",icon:""},{id:"addAI",label:"Add AI Agent",icon:""},{id:"divider1",divider:!0},{id:"paste",label:"Paste",icon:"",shortcut:"Ctrl+V"},{id:"selectAll",label:"Select All",icon:"",shortcut:"Ctrl+A"},{id:"divider2",divider:!0},{id:"fitView",label:"Fit View",icon:""},{id:"zoomIn",label:"Zoom In",icon:"",shortcut:"Ctrl++"},{id:"zoomOut",label:"Zoom Out",icon:"",shortcut:"Ctrl+-"}],c=f=>{a(f),o()};return u.jsx("div",{className:"context-menu",style:{left:e,top:t},onClick:f=>f.stopPropagation(),children:l.map(f=>f.divider?u.jsx("div",{className:"context-menu-divider"},f.id):u.jsxs("button",{className:`context-menu-item ${f.danger?"danger":""}`,onClick:()=>c(f.id),children:[u.jsx("span",{className:"menu-icon",children:f.icon}),u.jsx("span",{className:"menu-label",children:f.label}),f.shortcut&&u.jsx("span",{className:"menu-shortcut",children:f.shortcut})]},f.id))})}const b2=T.memo(v2),gc={circle:"circle",diamond:"diamond"},Ov={workflow:{id:"workflow",label:"Data",color:"#888",strokeDasharray:"none",shape:gc.circle,description:"Standard data flow connection"},model:{id:"model",label:"Chat Model",color:"#6366f1",strokeDasharray:"5,5",shape:gc.diamond,description:"AI model provider connection",required:!0,warningColor:"#ef4444"},memory:{id:"memory",label:"Memory",color:"#10b981",strokeDasharray:"5,5",shape:gc.diamond,description:"Memory/context connection",required:!1},tool:{id:"tool",label:"Tool",color:"#f59e0b",strokeDasharray:"5,5",shape:gc.diamond,description:"Tool/function connection",multiple:!0,required:!1}},w2={resourceSlots:[{id:"model-slot",type:"model",position:"bottom",label:"Model",shape:"diamond",required:!0},{id:"memory-slot",type:"memory",position:"bottom",label:"Memory",shape:"diamond",required:!1},{id:"tool-slot",type:"tool",position:"bottom",label:"Tools",shape:"diamond",multiple:!0,required:!1}]},S2="modulepreload",N2=function(e){return"/"+e},Rv={},E2=function(t,i,o){let a=Promise.resolve();if(i&&i.length>0){let h=function(p){return Promise.all(p.map(m=>Promise.resolve(m).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),f=c?.nonce||c?.getAttribute("nonce");a=h(i.map(p=>{if(p=N2(p),p in Rv)return;Rv[p]=!0;const m=p.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${g}`))return;const v=document.createElement("link");if(v.rel=m?"stylesheet":S2,m||(v.as="script"),v.crossOrigin="",v.href=p,f&&v.setAttribute("nonce",f),document.head.appendChild(v),m)return new Promise((b,w)=>{v.addEventListener("load",b),v.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(c){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=c,window.dispatchEvent(f),!f.defaultPrevented)throw c}return a.then(c=>{for(const f of c||[])f.status==="rejected"&&l(f.reason);return t().catch(l)})},j2=[{id:"gemma-2-2b-it-q4f16_1-MLC",name:"Gemma 2 2B",size:"~1.4GB",description:"Google's fast, lightweight model (Recommended)",category:"recommended"},{id:"Qwen2.5-1.5B-Instruct-q4f16_1-MLC",name:"Qwen 2.5 1.5B",size:"~1GB",description:"Alibaba's efficient small model",category:"recommended"},{id:"SmolLM2-1.7B-Instruct-q4f16_1-MLC",name:"SmolLM2 1.7B",size:"~1.1GB",description:"HuggingFace's compact model",category:"recommended"},{id:"Qwen2.5-0.5B-Instruct-q4f16_1-MLC",name:"Qwen 2.5 0.5B",size:"~350MB",description:"Ultra-light Qwen for basic tasks",category:"qwen"},{id:"Qwen2.5-3B-Instruct-q4f16_1-MLC",name:"Qwen 2.5 3B",size:"~2GB",description:"Balanced Qwen with good reasoning",category:"qwen"},{id:"Qwen2.5-7B-Instruct-q4f16_1-MLC",name:"Qwen 2.5 7B",size:"~4.5GB",description:"Powerful Qwen for complex tasks",category:"qwen"},{id:"Qwen2.5-Coder-1.5B-Instruct-q4f16_1-MLC",name:"Qwen 2.5 Coder 1.5B",size:"~1GB",description:"Optimized for code generation",category:"qwen"},{id:"Qwen2.5-Coder-7B-Instruct-q4f16_1-MLC",name:"Qwen 2.5 Coder 7B",size:"~4.5GB",description:"Advanced coding assistant",category:"qwen"},{id:"Phi-3.5-mini-instruct-q4f16_1-MLC",name:"Phi-3.5 Mini",size:"~2.4GB",description:"Microsoft's balanced 3.8B model",category:"medium"},{id:"Llama-3.2-3B-Instruct-q4f16_1-MLC",name:"Llama 3.2 3B",size:"~2GB",description:"Meta's capable small model",category:"medium"},{id:"Mistral-7B-Instruct-v0.3-q4f16_1-MLC",name:"Mistral 7B v0.3",size:"~4.5GB",description:"Mistral AI's flagship model",category:"medium"},{id:"TinyLlama-1.1B-Chat-v1.0-q4f16_1-MLC",name:"TinyLlama 1.1B",size:"~700MB",description:"Ultra-fast for simple tasks",category:"tiny"},{id:"SmolLM2-360M-Instruct-q4f16_1-MLC",name:"SmolLM2 360M",size:"~250MB",description:"Smallest practical model",category:"tiny"}];class C2{constructor(){this.worker=null,this.isLoading=!1,this.isReady=!1,this.currentModel=null,this.messageId=0,this.pendingRequests=new Map}static async checkWebGPUSupport(){if(!navigator.gpu)return{supported:!1,reason:"WebGPU not available in this browser"};try{const t=await navigator.gpu.requestAdapter();return t?{supported:!0,adapter:t}:{supported:!1,reason:"No WebGPU adapter found"}}catch(t){return{supported:!1,reason:t.message}}}async downloadModel(t,i=null){return new Promise((o,a)=>{const l=new Worker(new URL("/assets/webllm.worker-Ch0B_N4r.js",import.meta.url),{type:"module"}),c=this.getNextMessageId();l.onmessage=f=>{const{type:h,id:p,progress:m,text:g,error:v}=f.data;if(!(p!==c&&h!=="INIT_PROGRESS"))switch(h){case"INIT_PROGRESS":i&&i({progress:m,text:g});break;case"INIT_COMPLETE":l.terminate(),o(!0);break;case"ERROR":l.terminate(),a(new Error(v));break}},l.onerror=f=>{l.terminate(),a(f)},l.postMessage({type:"INIT",id:c,payload:{modelId:t}})})}async initialize(t=j2[0].id,i=null){if(this.isLoading)throw new Error("Model is already loading");return this.isLoading=!0,new Promise((o,a)=>{this.worker=new Worker(new URL("/assets/webllm.worker-Ch0B_N4r.js",import.meta.url),{type:"module"});const l=this.getNextMessageId();this.worker.onmessage=c=>{const{type:f,id:h,progress:p,text:m,timeElapsed:g,error:v}=c.data;if(!(h!==l&&f!=="INIT_PROGRESS"))switch(f){case"INIT_PROGRESS":i&&i({progress:p,text:m,timeElapsed:g});break;case"INIT_COMPLETE":this.isReady=!0,this.isLoading=!1,this.currentModel=t,o(!0);break;case"ERROR":this.isLoading=!1,a(new Error(v));break}},this.worker.onerror=c=>{this.isLoading=!1,a(c)},this.worker.postMessage({type:"INIT",id:l,payload:{modelId:t}})})}async generateWithHistory(t,i=[],o={},a=null){if(!this.isReady||!this.worker)throw new Error("Model not loaded");const{maxTokens:l=4096,temperature:c=1,systemPrompt:f=""}=o,h=this.getNextMessageId(),p=!!a;return new Promise((m,g)=>{const v=setTimeout(()=>{this.worker.removeEventListener("message",b),g(new Error("Model generation timed out (worker unresponsive)"))},6e4),b=w=>{const{type:S,id:j,text:N,token:k,error:C}=w.data;if(j===h)switch((S==="GENERATE_TOKEN"||S==="GENERATE_COMPLETE")&&clearTimeout(v),S){case"GENERATE_TOKEN":a&&a(k,N);break;case"GENERATE_COMPLETE":this.worker.removeEventListener("message",b),m(N);break;case"ERROR":this.worker.removeEventListener("message",b),clearTimeout(v),g(new Error(C));break}};this.worker.addEventListener("message",b),this.worker.postMessage({type:"GENERATE",id:h,payload:{userMessage:t,history:i,maxTokens:l,temperature:c,systemPrompt:f,streaming:p}})})}async resetChat(){if(!this.worker)return;const t=this.getNextMessageId();this.worker.postMessage({type:"RESET",id:t})}async unload(){this.worker&&(this.worker.terminate(),this.worker=null,this.isReady=!1,this.currentModel=null)}getNextMessageId(){return++this.messageId}}const Gn=new C2,k2="VectorMemoryDB",T2=1,Un="vectors",A2=10;class M2{constructor(){this.name="VectorMemory",this.db=null,this.embeddingDimension=384,this.worker=null,this.workerReady=!1}async initialize(){return this.worker||(this.worker=new Worker(new URL("/assets/EmbeddingWorker-BNxhFdi_.js",import.meta.url),{type:"module"}),this.worker.onmessage=t=>{t.data.type==="ready"&&(this.workerReady=!0,console.log(" Embedding Worker ready"))},this.worker.postMessage({type:"load"})),this.db?this.db:new Promise((t,i)=>{const o=indexedDB.open(k2,T2);o.onerror=()=>i(o.error),o.onsuccess=()=>{this.db=o.result,t(this.db)},o.onupgradeneeded=a=>{const l=a.target.result;if(!l.objectStoreNames.contains(Un)){const c=l.createObjectStore(Un,{keyPath:"id",autoIncrement:!0});c.createIndex("namespace","namespace",{unique:!1}),c.createIndex("timestamp","timestamp",{unique:!1})}}})}async upsert(t,i={}){await this.initialize();const o={text:t.text,embedding:t.embedding,metadata:t.metadata||{},namespace:t.namespace||"default",timestamp:Date.now()};return new Promise((a,l)=>{const f=this.db.transaction(Un,"readwrite").objectStore(Un),h=t.id?f.put({...o,id:t.id}):f.add(o);h.onsuccess=()=>{this.log(i,"success",` Vector stored: ${t.text.slice(0,30)}...`),a({id:h.result,...o})},h.onerror=()=>l(h.error)})}async query(t,i={},o={}){await this.initialize();const{namespace:a,limit:l=A2,minScore:c=0}=i;return new Promise((f,h)=>{const m=this.db.transaction(Un,"readonly").objectStore(Un);let g;a?g=m.index("namespace").getAll(a):g=m.getAll(),g.onsuccess=()=>{const v=g.result.map(b=>({...b,score:this.cosineSimilarity(t,b.embedding)})).filter(b=>b.score>=c).sort((b,w)=>w.score-b.score).slice(0,l);this.log(o,"info",` Found ${v.length} similar vectors`),f(v)},g.onerror=()=>h(g.error)})}async delete(t,i={}){return await this.initialize(),new Promise((o,a)=>{const f=this.db.transaction(Un,"readwrite").objectStore(Un).delete(t);f.onsuccess=()=>{this.log(i,"info",` Vector ${t} deleted`),o(!0)},f.onerror=()=>a(f.error)})}async getAll(t=null){return await this.initialize(),new Promise((i,o)=>{const l=this.db.transaction(Un,"readonly").objectStore(Un);let c;t?c=l.index("namespace").getAll(t):c=l.getAll(),c.onsuccess=()=>i(c.result),c.onerror=()=>o(c.error)})}async clearNamespace(t,i={}){const o=await this.getAll(t);for(const a of o)await this.delete(a.id,i);return this.log(i,"info",` Cleared ${o.length} vectors from "${t}"`),o.length}async getStats(){await this.initialize();const t=await this.getAll(),i={};for(const o of t){const a=o.namespace||"default";i[a]=(i[a]||0)+1}return{totalVectors:t.length,namespaces:i,embeddingDimension:this.embeddingDimension}}cosineSimilarity(t,i){if(!t||!i||t.length!==i.length)return 0;let o=0,a=0,l=0;for(let f=0;f<t.length;f++)o+=t[f]*i[f],a+=t[f]*t[f],l+=i[f]*i[f];const c=Math.sqrt(a)*Math.sqrt(l);return c===0?0:o/c}async generateEmbedding(t){await this.initialize();const i=Math.random().toString(36).substring(7);return new Promise((o,a)=>{const l=c=>{c.data.id===i&&(this.worker.removeEventListener("message",l),c.data.type==="result"?o(c.data.embedding):c.data.type==="error"&&a(new Error(c.data.error)))};this.worker.addEventListener("message",l),this.worker.postMessage({type:"extract",text:t,id:i}),setTimeout(()=>{this.worker.removeEventListener("message",l),a(new Error("Embedding generation timed out"))},3e4)})}log(t,i,o,a=null){t.addLog&&t.addLog({type:i,nodeId:t.nodeId,nodeName:t.nodeName||"VectorMemory",message:o,data:a})}}const Qf=new M2,D2="EchoesArtifactsDB",Uc="artifacts",_2=1,O2=()=>new Promise((e,t)=>{const i=indexedDB.open(D2,_2);i.onerror=o=>t("IndexedDB error: "+o.target.error),i.onsuccess=o=>e(o.target.result),i.onupgradeneeded=o=>{const a=o.target.result;if(!a.objectStoreNames.contains(Uc)){const l=a.createObjectStore(Uc,{keyPath:"id"});l.createIndex("executionId","executionId",{unique:!1}),l.createIndex("nodeId","nodeId",{unique:!1}),l.createIndex("timestamp","timestamp",{unique:!1})}}}),R2=async e=>{const t=await O2();return new Promise((i,o)=>{const c=t.transaction([Uc],"readwrite").objectStore(Uc).put(e);c.onsuccess=()=>i(e),c.onerror=f=>o(f.target.error)})};class I2{constructor(){this.storagePrefix="echoes_memory_"}_getKey(t){return`${this.storagePrefix}${t}`}_load(t){try{const i=localStorage.getItem(this._getKey(t));return i?JSON.parse(i):[]}catch(i){return console.error("Memory load error:",i),[]}}_save(t,i){try{localStorage.setItem(this._getKey(t),JSON.stringify(i))}catch(o){console.error("Memory save error:",o)}}_tokenize(t){return t?new Set(t.toLowerCase().replace(/[^\w\s]/g,"").split(/\s+/).filter(i=>i.length>2)):new Set}_similarity(t,i){const o=this._tokenize(t),a=this._tokenize(i);if(o.size===0||a.size===0)return 0;const l=new Set([...o].filter(f=>a.has(f))),c=new Set([...o,...a]);return l.size/c.size}async upsert(t="default",i){const o=this._load(t),a=Date.now(),l=Array.isArray(i)?i:[i];let c=0,f=0;return l.forEach(h=>{h.id||(h.id=`mem_${a}_${Math.random().toString(36).substr(2,9)}`);const p=o.findIndex(g=>g.id===h.id),m={id:h.id,text:h.text||JSON.stringify(h),metadata:h.metadata||{},timestamp:a};p>=0?(o[p]=m,f++):(o.push(m),c++)}),this._save(t,o),{status:"success",added:c,updated:f,total:o.length}}async query(t="default",i,o=5,a=.1){const c=this._load(t).map(f=>{const h=this._similarity(i,f.text);return{...f,score:h}}).filter(f=>f.score>=a).sort((f,h)=>h.score-f.score).slice(0,o);return{matches:c,count:c.length}}async delete(t="default",i=[],o=!1){if(o)return localStorage.removeItem(this._getKey(t)),{status:"success",deleted:"all"};const a=this._load(t),l=a.length,c=new Set(Array.isArray(i)?i:[i]),f=a.filter(h=>!c.has(h.id));return this._save(t,f),{status:"success",deleted:l-f.length,remaining:f.length}}}const yc=new I2,L2=["window","document","location","navigator","fetch","XMLHttpRequest","WebSocket","EventSource","Worker","SharedWorker","ServiceWorker","importScripts","eval","Function","localStorage","sessionStorage","indexedDB","caches","cookieStore","crypto","Notification","alert","confirm","prompt","open","close","postMessage","parent","top","frames","opener","self","globalThis"],z2={Math,Array,Object,String,Number,Boolean,Date,RegExp,Map,Set,WeakMap,WeakSet,JSON,Promise,Error,TypeError,RangeError,SyntaxError,parseInt,parseFloat,isNaN,isFinite,encodeURI,decodeURI,encodeURIComponent,decodeURIComponent,console:{log:(...e)=>console.log("[Sandbox]",...e),info:(...e)=>console.info("[Sandbox]",...e),warn:(...e)=>console.warn("[Sandbox]",...e),error:(...e)=>console.error("[Sandbox]",...e)},setTimeout:(e,t)=>setTimeout(e,Math.min(t,3e4)),undefined:void 0,NaN:NaN,Infinity:1/0};async function B2(e,t,i={},o={}){const{timeout:a=3e4}=o;if(typeof e!="string")throw new Error("Code must be a string");const l=[/\beval\s*\(/gi,/\bFunction\s*\(/gi,/\bimport\s*\(/gi,/\bimport\s+/gi,/\brequire\s*\(/gi,/\b__proto__\b/gi,/\bconstructor\s*\[/gi,/\bprototype\b/gi];for(const m of l)if(m.test(e))throw new Error(`Potentially dangerous code pattern detected: ${m.source}`);const c={...z2,input:t,context:{nodeId:i.nodeId}};for(const m of L2)c[m]=new Proxy({},{get(){throw new Error(`Access to '${m}' is not allowed in sandboxed code`)},set(){throw new Error(`Cannot modify '${m}' in sandboxed code`)},apply(){throw new Error(`Cannot call '${m}' in sandboxed code`)}});const f=Object.keys(c),h=Object.values(c),p=`
    "use strict";
    return (async () => {
      ${e}
    })();
  `;try{const m=new Function(...f,p);return await Promise.race([m(...h),new Promise((v,b)=>setTimeout(()=>b(new Error(`Execution timeout after ${a}ms`)),a))])}catch(m){const g=m.message.replace(/at\s+.*?:\d+:\d+/g,"").replace(/\n\s+at\s+.*/g,"").trim();throw new Error(`Sandbox execution error: ${g}`)}}function Dw(e){if(e==null)return{mimeType:"text/plain",extension:".txt",data:"",isBlob:!1};if(e instanceof Blob)return{mimeType:e.type||"application/octet-stream",extension:Wa(e.type),data:e,isBlob:!0};if(e instanceof ArrayBuffer||ArrayBuffer.isView(e))return{mimeType:"application/octet-stream",extension:".bin",data:new Blob([e]),isBlob:!0};if(typeof e=="object"&&e!==null){if(e.audioBlob instanceof Blob)return{mimeType:e.audioBlob.type||"audio/wav",extension:".wav",data:e.audioBlob,isBlob:!0};if(e.imageBlob instanceof Blob)return{mimeType:e.imageBlob.type||"image/png",extension:".png",data:e.imageBlob,isBlob:!0};if(e.videoBlob instanceof Blob)return{mimeType:e.videoBlob.type||"video/mp4",extension:".mp4",data:e.videoBlob,isBlob:!0};if(typeof e.url=="string"&&e.url.startsWith("blob:")){const t=e.type||e.mimeType||"application/octet-stream";return{mimeType:t,extension:Wa(t),data:e.url,isBlob:!1,isBlobUrl:!0}}return{mimeType:"application/json",extension:".json",data:JSON.stringify(e,null,2),isBlob:!1}}if(typeof e=="string"){if(e.startsWith("data:audio/")){const t=e.match(/^data:(audio\/[^;]+)/),i=t?t[1]:"audio/wav";return{mimeType:i,extension:Wa(i),data:e,isBlob:!1,isDataUri:!0}}if(e.startsWith("data:image/")){const t=e.match(/^data:(image\/[^;]+)/),i=t?t[1]:"image/png";return{mimeType:i,extension:Wa(i),data:e,isBlob:!1,isDataUri:!0}}if(e.startsWith("data:video/")){const t=e.match(/^data:(video\/[^;]+)/),i=t?t[1]:"video/mp4";return{mimeType:i,extension:Wa(i),data:e,isBlob:!1,isDataUri:!0}}if(/<[a-z][\s\S]*>/i.test(e)&&(e.includes("<html")||e.includes("<div")||e.includes("<p>")))return{mimeType:"text/html",extension:".html",data:e,isBlob:!1};if(e.startsWith("{")&&e.endsWith("}")||e.startsWith("[")&&e.endsWith("]"))try{return JSON.parse(e),{mimeType:"application/json",extension:".json",data:e,isBlob:!1}}catch{}return e.includes("# ")||e.includes("## ")||e.includes("```")||e.includes("**")?{mimeType:"text/markdown",extension:".md",data:e,isBlob:!1}:e.includes(",")&&e.split(`
`).every(t=>t.split(",").length>1)?{mimeType:"text/csv",extension:".csv",data:e,isBlob:!1}:{mimeType:"text/plain",extension:".txt",data:e,isBlob:!1}}return{mimeType:"text/plain",extension:".txt",data:String(e),isBlob:!1}}function Wa(e){return{"audio/wav":".wav","audio/wave":".wav","audio/x-wav":".wav","audio/mpeg":".mp3","audio/mp3":".mp3","audio/ogg":".ogg","audio/webm":".webm","audio/flac":".flac","audio/aac":".aac","audio/mp4":".m4a","video/mp4":".mp4","video/webm":".webm","video/ogg":".ogv","video/quicktime":".mov","video/x-msvideo":".avi","image/png":".png","image/jpeg":".jpg","image/jpg":".jpg","image/gif":".gif","image/webp":".webp","image/svg+xml":".svg","image/bmp":".bmp","text/plain":".txt","text/markdown":".md","text/html":".html","text/css":".css","text/javascript":".js","text/csv":".csv","application/json":".json","application/xml":".xml","application/yaml":".yaml","application/pdf":".pdf","application/octet-stream":".bin"}[e]||".bin"}function $2(e){try{const[t,i]=e.split(","),o=t.match(/data:([^;]+)/),a=o?o[1]:"application/octet-stream",l=atob(i),c=new Array(l.length);for(let f=0;f<l.length;f++)c[f]=l.charCodeAt(f);return new Blob([new Uint8Array(c)],{type:a})}catch{return null}}const H2={$now:()=>new Date().toISOString(),$uuid:()=>crypto.randomUUID?.()||"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)}),$formatDate:(e,t="yyyy-MM-dd")=>{const i=new Date(e),o=a=>String(a).padStart(2,"0");return t.replace("yyyy",i.getFullYear()).replace("MM",o(i.getMonth()+1)).replace("dd",o(i.getDate())).replace("HH",o(i.getHours())).replace("mm",o(i.getMinutes())).replace("ss",o(i.getSeconds()))},$upper:e=>String(e).toUpperCase(),$lower:e=>String(e).toLowerCase(),$trim:e=>String(e).trim(),$replace:(e,t,i)=>String(e).replace(t,i),$split:(e,t)=>String(e).split(t),$join:(e,t=",")=>Array.isArray(e)?e.join(t):String(e),$round:(e,t=0)=>Number(Number(e).toFixed(t)),$floor:e=>Math.floor(Number(e)),$ceil:e=>Math.ceil(Number(e)),$abs:e=>Math.abs(Number(e)),$min:(...e)=>Math.min(...e.map(Number)),$max:(...e)=>Math.max(...e.map(Number)),$length:e=>Array.isArray(e)?e.length:String(e).length,$first:e=>Array.isArray(e)?e[0]:e,$last:e=>Array.isArray(e)?e[e.length-1]:e,$reverse:e=>Array.isArray(e)?[...e].reverse():e,$keys:e=>typeof e=="object"&&e!==null?Object.keys(e):[],$values:e=>typeof e=="object"&&e!==null?Object.values(e):[],$pick:(e,...t)=>typeof e!="object"||e===null?{}:t.reduce((i,o)=>(o in e&&(i[o]=e[o]),i),{}),$stringify:(e,t=!1)=>JSON.stringify(e,null,t?2:void 0),$parse:e=>{try{return JSON.parse(e)}catch{return e}},$if:(e,t,i)=>e?t:i,$default:(e,t)=>e??t,$isEmpty:e=>e==null||e===""||Array.isArray(e)&&e.length===0||typeof e=="object"&&Object.keys(e).length===0};function P2(e,t={}){const i=e.trim(),o=[/\beval\b/i,/\bFunction\b/,/\bimport\b/i,/\brequire\b/i,/\b__proto__\b/,/\bconstructor\b/,/\bprototype\b/,/\bwindow\b/i,/\bdocument\b/i,/\bfetch\b/i,/\bglobalThis\b/i];for(const l of o)if(l.test(i))return console.warn(`Blocked dangerous expression: ${l.source}`),"{{BLOCKED: unsafe pattern}}";const a={...H2,$json:t.input||{},$input:t.input||{},$index:t.index??0,$item:t.item??null,$node:t.nodeData||{},$workflow:t.workflowData||{},...t.variables};try{const l=Object.keys(a),c=Object.values(a),f=`"use strict"; return (${i});`;return new Function(...l,f)(...c)}catch(l){return console.warn(`Expression error: ${l.message}`,{expr:e,context:t}),`{{ERROR: ${l.message}}}`}}function cs(e,t={}){if(typeof e!="string")return e;const i=/\{\{\s*((?:[^{}]|\{[^{}]*\})*)\s*\}\}/g;return e.replace(i,(o,a)=>{const l=P2(a,t);return l==null?"":typeof l=="object"?JSON.stringify(l):String(l)})}function q2(){return[{name:"$json",description:"Input data object",example:"$json.fieldName"},{name:"$input",description:"Full input object",example:"$input"},{name:"$index",description:"Current loop index",example:"$index"},{name:"$item",description:"Current loop item",example:"$item"},{name:"$node",description:"Current node data",example:"$node.label"},{name:"$now",description:"Current timestamp",example:"$now"},{name:"$uuid",description:"Generate UUID",example:"$uuid"},{name:"$formatDate",description:"Format date",example:'$formatDate($now, "yyyy-MM-dd")'},{name:"$upper",description:"Uppercase string",example:"$upper($json.name)"},{name:"$lower",description:"Lowercase string",example:"$lower($json.name)"},{name:"$trim",description:"Trim whitespace",example:"$trim($json.text)"},{name:"$replace",description:"Replace text",example:'$replace($json.text, "old", "new")'},{name:"$split",description:"Split string",example:'$split($json.csv, ",")'},{name:"$join",description:"Join array",example:'$join($json.items, ", ")'},{name:"$round",description:"Round number",example:"$round($json.price, 2)"},{name:"$floor",description:"Floor number",example:"$floor($json.value)"},{name:"$ceil",description:"Ceiling number",example:"$ceil($json.value)"},{name:"$min",description:"Minimum value",example:"$min($json.a, $json.b)"},{name:"$max",description:"Maximum value",example:"$max($json.a, $json.b)"},{name:"$length",description:"Array/string length",example:"$length($json.items)"},{name:"$first",description:"First array item",example:"$first($json.items)"},{name:"$last",description:"Last array item",example:"$last($json.items)"},{name:"$keys",description:"Object keys",example:"$keys($json)"},{name:"$values",description:"Object values",example:"$values($json)"},{name:"$stringify",description:"JSON stringify",example:"$stringify($json, true)"},{name:"$if",description:"Conditional value",example:'$if($json.active, "Yes", "No")'},{name:"$default",description:"Default value",example:'$default($json.name, "Unknown")'},{name:"$isEmpty",description:"Check if empty",example:"$isEmpty($json.items)"}]}async function pp(e,t,i){const o=G2[e.type];if(!o)throw new Error(`No executor found for node type: ${e.type}`);try{return{success:!0,...await o(e.data,t,i)}}catch(a){return{success:!1,error:a.message||"Node execution failed",output:null}}}const U2=e=>{try{return JSON.parse(e)}catch{return null}},V2=e=>{if(e instanceof Blob){const t=Oh(e.type);return{mimeType:e.type||"application/octet-stream",extension:t,data:e,isBlob:!0}}if(e?.audioBlob instanceof Blob)return{mimeType:e.audioBlob.type||"audio/wav",extension:".wav",data:e.audioBlob,isBlob:!0};if(e?.imageBlob instanceof Blob)return{mimeType:e.imageBlob.type||"image/png",extension:".png",data:e.imageBlob,isBlob:!0};if(typeof e?.audioBase64=="string")return{mimeType:"audio/wav",extension:".wav",data:F2(e.audioBase64,"audio/wav"),isBlob:!0};if(typeof e?.url=="string"&&e.url.startsWith("blob:")){const t=e.type||"application/octet-stream";return{mimeType:t,extension:Oh(t),data:e.url,isBlob:!1}}return typeof e=="string"?{mimeType:"text/plain",extension:".txt",data:e,isBlob:!1}:typeof e=="object"&&e!==null?{mimeType:"application/json",extension:".json",data:JSON.stringify(e,null,2),isBlob:!1}:{mimeType:"text/plain",extension:".txt",data:String(e),isBlob:!1}},Oh=e=>({"audio/wav":".wav","audio/mpeg":".mp3","audio/mp3":".mp3","audio/ogg":".ogg","audio/webm":".webm","audio/flac":".flac","audio/aac":".aac","video/mp4":".mp4","video/webm":".webm","video/ogg":".ogv","video/quicktime":".mov","video/x-msvideo":".avi","image/png":".png","image/jpeg":".jpg","image/jpg":".jpg","image/gif":".gif","image/webp":".webp","image/svg+xml":".svg","image/bmp":".bmp","text/plain":".txt","text/markdown":".md","text/html":".html","text/css":".css","text/javascript":".js","text/csv":".csv","application/json":".json","application/xml":".xml","application/yaml":".yaml","application/pdf":".pdf","application/msword":".doc","application/vnd.openxmlformats-officedocument.wordprocessingml.document":".docx","application/vnd.ms-excel":".xls","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":".xlsx","application/vnd.ms-powerpoint":".ppt","application/vnd.openxmlformats-officedocument.presentationml.presentation":".pptx","application/zip":".zip","application/x-tar":".tar","application/gzip":".gz","application/x-7z-compressed":".7z","application/octet-stream":".bin"})[e]||".bin",F2=(e,t="application/octet-stream")=>{try{const i=atob(e.replace(/^data:[^;]+;base64,/,"")),o=new Array(i.length);for(let a=0;a<i.length;a++)o[a]=i.charCodeAt(a);return new Blob([new Uint8Array(o)],{type:t})}catch{return null}},xc=async(e,t,i,o)=>{try{const a={id:crypto.randomUUID(),nodeId:e.nodeId,executionId:e.executionId||"manual",name:t,type:i,data:o,timestamp:Date.now()};return await R2(a),e.executionStore?.addArtifact&&e.executionStore.addArtifact(a),e.addLog({type:"success",nodeId:e.nodeId,nodeName:"System",message:` Saved artifact: ${t}`}),a}catch(a){return console.error("Failed to save artifact:",a),e.addLog({type:"error",nodeId:e.nodeId,nodeName:"System",message:`Failed to save artifact: ${a.message}`}),null}},G2={manualTrigger:async(e,t,i)=>{const o=e.defaultPayload||"",a=e.inputValues||{},l={timestamp:new Date().toISOString(),trigger:"manual",...a,text:o,data:t||{...a,text:o}};return i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Manual Trigger",message:" Workflow started manually"}),{output:l}},scheduleTrigger:async(e,t,i)=>(i.addLog({type:"info",nodeId:i.nodeId,nodeName:"Schedule",message:" Rescheduling next run... (Simulated)"}),{output:t}),aiAgent:async(e,t,i)=>{const o={...e};typeof t=="object"&&t!==null&&!Array.isArray(t)&&["model","temperature","maxTokens","systemMessage"].forEach(b=>{t[b]!==void 0&&(o[b]=t[b])});const a=o.connectedModel;a&&(a.temperature!==void 0&&(o.temperature=a.temperature),a.maxTokens!==void 0&&(o.maxTokens=a.maxTokens),a.modelId&&(o.modelId=a.modelId));const{systemMessage:l,userMessage:c,temperature:f=.7,maxTokens:h=1e3}=o;let p=[],m="",g=l||"";if(Array.isArray(t)&&t.length>0){m=t[t.length-1].content,p=t.slice(0,-1);const w=p.find(S=>S.role==="system");w&&(g=w.content,p=p.filter(S=>S.role!=="system"))}else g&&g.includes("{{")&&(g=cs(g,{input:t})),c?c.includes("{{")?m=cs(c,{input:t}):m=c:m=typeof t=="string"?t:JSON.stringify(t);i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"AI Agent",message:" AI processing..."});const v=o.connectedMemory;if(v){i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"AI Agent",message:` Retrieving memories from ${v.namespace}...`});try{const b=await yc.query(v.namespace,m,v.topK||5);if(b&&b.matches&&b.matches.length>0){const w=b.matches.map(S=>`- ${typeof S.text=="string"?S.text:JSON.stringify(S.text)}`).join(`
`);g=`${g}

[CONTEXT FROM MEMORY]
Use the following retrieved context to answer the user:
${w}
[/CONTEXT]`.trim(),i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"AI Agent",message:` Found ${b.matches.length} relevant memories`})}}catch(b){i.addLog({type:"warning",nodeId:i.nodeId,nodeName:e.label||"AI Agent",message:` Memory retrieval failed: ${b.message}`})}i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"AI Agent",message:" Context prep complete. Starting generation..."})}try{const b=o.modelId||"gemma-2-2b-it";(!Gn.isReady||Gn.currentModel!==b)&&(i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"AI Agent",message:` Loading AI Model: ${b}... (This may take a moment)`}),await Gn.initialize(b,()=>{i.heartbeat&&i.heartbeat()}),i.addLog({type:"success",nodeId:i.nodeId,nodeName:e.label||"AI Agent",message:` Model loaded: ${b}`}));const w=o.tools||[];let S="";w.length>0&&(S=`

You have access to these tools:
${w.map(A=>`- ${A.name}: ${A.description||"Execute "+A.type+" node"}`).join(`
`)}

IMPORTANT: When you need to use a tool, respond ONLY with this JSON format:
{"action": "tool", "tool": "tool_name", "input": "your input for the tool"}

When you have the final answer (after tool results or if no tool needed), respond with:
{"action": "answer", "content": "your final response to the user"}

Always respond with valid JSON. Do not include any text outside the JSON object.`);const j=g+S,N=5;let k=0,C=[...p],_=m,H=null;for(;k<N;){k++,i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"AI Agent",message:k===1?" Generating response...":` Processing tool result (iteration ${k})...`});let $=(await Gn.generateWithHistory(_,C,{temperature:f,maxTokens:h,systemPrompt:j},()=>{i.heartbeat&&i.heartbeat()})).trim();i.addLog({type:"success",nodeId:i.nodeId,nodeName:e.label||"AI Agent",message:" Generation complete"});let V=null;try{let G=$;const z=$.match(/```(?:json)?\s*([\s\S]*?)```/);z&&(G=z[1].trim());const L=$.match(/\{[\s\S]*\}/);!z&&L&&(G=L[0]),V=JSON.parse(G)}catch{i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"AI Agent",message:" Response is not JSON, treating as direct answer"}),H=$;break}if(V.action==="answer"){H=V.content||$;break}else if(V.action==="tool"&&V.tool){const G=V.tool,z=V.input;i.addLog({type:"warning",nodeId:i.nodeId,nodeName:e.label||"AI Agent",message:` Agent calling tool: ${G}`,data:{tool:G,input:z}});const L=w.find(U=>U.name.toLowerCase()===G.toLowerCase());if(L){const U=i.nodes.find(Z=>Z.id===L.nodeId);if(U){i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"AI Agent",message:` Executing tool: ${G}...`});const Z=await pp(U,z,i);Z.success?(i.addLog({type:"success",nodeId:i.nodeId,nodeName:e.label||"AI Agent",message:` Tool '${G}' executed successfully`}),C.push({role:"assistant",content:$},{role:"user",content:`Tool "${G}" returned: ${typeof Z.output=="object"?JSON.stringify(Z.output):String(Z.output)}

Please provide your final answer using: {"action": "answer", "content": "..."}`}),_="",k===N&&(H=Z.output)):(i.addLog({type:"error",nodeId:i.nodeId,nodeName:e.label||"AI Agent",message:` Tool '${G}' failed: ${Z.error}`}),C.push({role:"assistant",content:$},{role:"user",content:`Tool "${G}" failed with error: ${Z.error}

Please handle this error and provide your final answer.`}),_="")}else{i.addLog({type:"error",nodeId:i.nodeId,nodeName:e.label||"AI Agent",message:` Tool node not found: ${L.nodeId}`}),H=`Error: Tool node "${G}" not found in workflow`;break}}else i.addLog({type:"error",nodeId:i.nodeId,nodeName:e.label||"AI Agent",message:` Tool '${G}' not connected. Available: ${w.map(U=>U.name).join(", ")||"none"}`}),C.push({role:"assistant",content:$},{role:"user",content:`Tool "${G}" is not available. Available tools: ${w.map(U=>U.name).join(", ")||"none"}.

Please provide your answer without using that tool.`}),_=""}else{H=V.content||$;break}}return k>=N&&!H&&i.addLog({type:"warning",nodeId:i.nodeId,nodeName:e.label||"AI Agent",message:` Max tool iterations reached (${N})`}),{output:H}}catch(b){throw new Error(`AI generation failed: ${b.message}`)}},codeExecutor:async(e,t,i)=>{const{code:o,language:a="javascript",cdnUrls:l=[]}=e;if(i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Code Executor",message:` Executing ${a} code (sandboxed)...`}),a==="javascript")try{if(l.length>0){i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Code Executor",message:` Loading ${l.length} CDN libraries...`});const{loadFromCDN:f}=await E2(async()=>{const{loadFromCDN:h}=await Promise.resolve().then(()=>T5);return{loadFromCDN:h}},void 0);for(const h of l)try{await f(h)}catch{i.addLog({type:"warning",nodeId:i.nodeId,nodeName:e.label||"Code Executor",message:` Failed to load: ${h.split("/").pop()}`})}}return{output:await B2(o,t,{nodeId:i.nodeId},{timeout:3e4})}}catch(c){throw new Error(`Execution error: ${c.message}`)}else throw a==="python"&&window.pyodide?new Error("Python execution not ready pending Pyodide load"):new Error(`Unsupported language: ${a}`)},imageGeneration:async(e,t,i)=>{const o={...e};typeof t=="object"&&t!==null&&["model","size","negativePrompt","seed","steps"].forEach(f=>{t[f]!==void 0&&(o[f]=t[f])});const{seed:a=null}=o;i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Image Generation",message:" Generating image (Simulated)..."}),await new Promise(f=>setTimeout(f,2e3));const l=document.createElement("canvas");l.width=512,l.height=512;const c=l.getContext("2d");return c.fillStyle="#ff4444",c.fillRect(0,0,512,512),c.fillStyle="white",c.font="30px Arial",c.fillText("AI Generated Image",100,256),new Promise(f=>{l.toBlob(async h=>{const p=`image_${Date.now()}_${crypto.randomUUID().slice(0,8)}`;await xc(i,`${p}.png`,"image/png",h),f({output:{artifactId:p,type:"image",mimeType:"image/png",url:URL.createObjectURL(h),prompt:t,seed:a||12345,_executed:!0}})})})},httpRequest:async(e,t,i)=>{const{method:o="GET",url:a,headers:l,body:c,timeout:f=5e3}=e;i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"HTTP Request",message:` ${o} ${a}`});try{const h=new AbortController,p=setTimeout(()=>h.abort(),f),m=await fetch(a,{method:o,headers:U2(l)||{},body:["GET","HEAD"].includes(o)?void 0:typeof c=="string"?c:JSON.stringify(c),signal:h.signal});clearTimeout(p);const g=await m.json().catch(()=>({}));return{output:{status:m.status,statusText:m.statusText,data:g,headers:Object.fromEntries(m.headers.entries())}}}catch(h){throw new Error(`HTTP Request failed: ${h.message}`)}},setVariable:async(e,t,i)=>{const{variableName:o,value:a}=e;let l=a;return typeof t=="object"&&t!==null&&(t[o]!==void 0?l=t[o]:t.value!==void 0?l=t.value:t.text!==void 0&&(l=t.text)),typeof l=="string"&&l.includes("{{")&&(l=Iv(l,{input:t})),i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Set Variable",message:` Set ${o} = ${typeof l=="string"?l.slice(0,50):"..."}`}),{output:{...t,[o]:l}}},ifElse:async(e,t,i)=>{const{condition:o,operator:a="equals",compareValue:l}=e,c=Lv(t,o);let f=!1;switch(a){case"equals":f=c==l;break;case"notEquals":f=c!=l;break;case"contains":f=String(c).includes(l);break;case"greaterThan":f=Number(c)>Number(l);break;case"lessThan":f=Number(c)<Number(l);break;case"exists":f=c!=null;break}return i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"If/Else",message:` Check: ${o} ${a} ${l} -> ${f}`}),{output:t,outputIndex:f?0:1}},merge:async(e,t,i)=>{const{mode:o="wait",inputCount:a=2,aggregator:l="array"}=e;i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Merge",message:` Merge node (mode: ${o})`});let c;if(Array.isArray(t))switch(l){case"object":c=t.reduce((f,h,p)=>({...f,[`input${p}`]:h}),{});break;case"concat":c=t.flat();break;case"array":default:c=t}else c=t;return{output:c}},semanticRouter:async(e,t,i)=>{const{routes:o=[],classificationMode:a="keyword"}=e,l=typeof t=="string"?t:t?.text||t?.content||JSON.stringify(t);i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Router",message:` Classifying input (${a} mode)...`});let c=-1;if(a==="keyword"){const p=l.toLowerCase();for(let m=0;m<o.length;m++){const v=o[m].keywords||[];for(const b of v)if(p.includes(b.toLowerCase())){c=m;break}if(c>=0)break}}else if(a==="embedding")try{i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Router",message:" Generating embeddings for input..."});const p=await Qf.generateEmbedding(l);let m=-1;for(let g=0;g<o.length;g++){const v=o[g],b=(v.keywords||[]).join(" ")||v.label;if(!b)continue;const w=await Qf.generateEmbedding(b),S=Qf.cosineSimilarity(p,w);i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Router",message:`Route "${v.label}" score: ${S.toFixed(4)}`}),S>m&&S>.3&&(m=S,c=g)}}catch(p){i.addLog({type:"error",nodeId:i.nodeId,nodeName:e.label||"Router",message:`Embedding error: ${p.message}`})}const f=c>=0?c:o.length,h=f<o.length?o[f].label:"Other";return i.addLog({type:"success",nodeId:i.nodeId,nodeName:e.label||"Router",message:` Routed to: ${h} (output ${f+1})`}),{output:t,outputIndex:f}},evaluator:async(e,t,i)=>{const{evaluationType:o="schema",schema:a=null,regexPattern:l="",maxRetries:c=3}=e,f=i.retryCount||0;i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Evaluator",message:` Evaluating output (${o}, attempt ${f+1}/${c+1})...`});let h=!1,p=null;try{switch(o){case"schema":if(a&&typeof a=="object"){const m=Object.keys(a),g=typeof t=="object"?t:JSON.parse(t),v=m.filter(b=>!(b in g));h=v.length===0,h||(p=`Missing required keys: ${v.join(", ")}`)}else h=!0;break;case"regex":if(l){const m=new RegExp(l),g=typeof t=="string"?t:JSON.stringify(t);h=m.test(g),h||(p=`Pattern not matched: ${l}`)}else h=!0;break;case"llm":h=!0;break;default:h=!0}}catch(m){h=!1,p=m.message}return h?(i.addLog({type:"success",nodeId:i.nodeId,nodeName:e.label||"Evaluator",message:" Validation passed"}),{output:t,outputIndex:0}):f<c?(i.addLog({type:"warning",nodeId:i.nodeId,nodeName:e.label||"Evaluator",message:` Validation failed: ${p}. Retrying...`}),{output:{originalInput:t,error:p,retryCount:f+1,feedback:`Your output was invalid: ${p}. Please try again.`},outputIndex:1,retryCount:f+1}):(i.addLog({type:"error",nodeId:i.nodeId,nodeName:e.label||"Evaluator",message:` Max retries reached. Validation failed: ${p}`}),{output:{...t,_validationFailed:!0,_validationError:p},outputIndex:0})},loop:async(e,t,i)=>{const{iterations:o=1}=e,a=i.loopState||{currentIteration:0,totalIterations:o,results:[]};return a.currentIteration>0&&t&&a.results.push(t),a.currentIteration++,a.currentIteration<=a.totalIterations?(i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Loop",message:` Iteration ${a.currentIteration} of ${a.totalIterations}`}),{output:{iteration:a.currentIteration,totalIterations:a.totalIterations,previousResult:t,isLoopIteration:!0},outputIndex:0,loopState:a}):(i.addLog({type:"success",nodeId:i.nodeId,nodeName:e.label||"Loop",message:` Loop complete: ${a.results.length} iterations processed`}),{output:{results:a.results,totalIterations:a.totalIterations,lastResult:t,completed:!0},outputIndex:1,loopState:null})},toolCall:async(e,t,i)=>{const{toolName:o,args:a}=e;return i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Tool Call",message:` Executing tool: ${o}`,data:a||t}),{output:{tool:o,status:"success",result:`Executed ${o} successfully`,args:a||t}}},vectorMemory:async(e,t,i)=>{const o={...e};typeof t=="object"&&t!==null&&["mode","namespace","topK","minScore"].forEach(p=>{t[p]!==void 0&&(o[p]=t[p])});const{mode:a="upsert",namespace:l="default",topK:c=5,minScore:f=.1}=o;i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Vector Store",message:` Vector Store Operation: ${a} (${l})`});let h;try{if(a==="upsert"){let p=[];Array.isArray(t)?p=t.map(m=>typeof m=="string"?{text:m}:m):typeof t=="object"&&t!==null?t.text?p=[t]:t.content?p=[{text:t.content,...t}]:p=[{text:JSON.stringify(t),metadata:t}]:p=[{text:String(t)}],h=await yc.upsert(l,p),i.addLog({type:"success",nodeId:i.nodeId,nodeName:e.label||"Vector Store",message:` Memorized ${h.added} new items, updated ${h.updated}`})}else if(a==="query"){const p=typeof t=="string"?t:JSON.stringify(t);h=await yc.query(l,p,c,f),i.addLog({type:"success",nodeId:i.nodeId,nodeName:e.label||"Vector Store",message:` Found ${h.count} matches`})}else if(a==="delete"){const p=Array.isArray(t)?t:t.id||t;h=await yc.delete(l,p),i.addLog({type:"success",nodeId:i.nodeId,nodeName:e.label||"Vector Store",message:` Deleted ${h.deleted} items`})}}catch(p){throw new Error(`Memory operation failed: ${p.message}`)}return{output:h}},output:async(e,t,i)=>{const o={...e};typeof t=="object"&&t!==null&&["outputType","filename","notificationTitle","artifactType","artifactName"].forEach(S=>{t[S]!==void 0&&(o[S]=t[S])});const{outputType:a="console",filename:l,formatJson:c,notificationTitle:f,artifactType:h="auto",artifactName:p=""}=o,m=c?JSON.stringify(t,null,2):t;switch(i.addLog({type:"success",nodeId:i.nodeId,nodeName:e.label||"Output",message:` Workflow output (${a})`,data:m}),a){case"console":console.log(" Workflow Output:",m),i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Output",message:`Console: ${String(m).slice(0,150)}${String(m).length>150?"...":""}`});break;case"file":{const S=Dw(t);let j=S.data,N=S.mimeType,k=S.extension;if(S.isDataUri&&typeof j=="string"){const $=$2(j);$&&(j=$)}const C=j instanceof Blob?j:new Blob([j],{type:N}),_=URL.createObjectURL(C),H=document.createElement("a");H.href=_;let A=l;A?A.includes(".")||(A+=k):A=`output_${Date.now()}${k}`,H.download=A,document.body.appendChild(H),H.click(),document.body.removeChild(H),URL.revokeObjectURL(_),i.addLog({type:"success",nodeId:i.nodeId,nodeName:e.label||"Output",message:` Downloaded: ${A} (${N})`});break}case"notification":{if("Notification"in window){let S=Notification.permission;S==="default"&&(S=await Notification.requestPermission()),S==="granted"&&new Notification(f||"Workflow Complete",{body:typeof m=="string"?m.slice(0,200):"Data ready"})}typeof window<"u"&&window.dispatchEvent(new CustomEvent("workflow-toast",{detail:{type:"success",message:f||"Workflow Complete"}})),i.addLog({type:"success",nodeId:i.nodeId,nodeName:e.label||"Output",message:` Notification: ${f||"Workflow Complete"}`});break}case"artifact":i.addLog({type:"success",nodeId:i.nodeId,nodeName:e.label||"Output",message:" Artifact saved"});break;default:console.log(" Output:",m)}let g,v,b;if(h&&h!=="auto")if(g=h,v=Oh(h),t instanceof Blob)b=t;else if(typeof t=="object"&&t!==null)if(h==="application/json")b=JSON.stringify(t,null,2);else if(h==="text/csv")if(Array.isArray(t)&&t.length>0&&typeof t[0]=="object"){const S=Object.keys(t[0]);b=[S.join(","),...t.map(N=>S.map(k=>JSON.stringify(N[k]??"")).join(","))].join(`
`)}else b=JSON.stringify(t,null,2);else b=JSON.stringify(t,null,2);else b=String(t);else{const S=V2(t);g=S.mimeType,v=S.extension,b=S.data}let w=p||l;return w?w.includes(".")?h&&h!=="auto"&&(w=w.replace(/\.[^.]+$/,v)):w+=v:w=`output_${Date.now()}`+v,await xc(i,w,g,b),{output:m}},webhookTrigger:async(e,t,i)=>(i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Webhook",message:` Webhook endpoint ready: ${e.endpoint||"/webhook/default"}`}),{output:{timestamp:new Date().toISOString(),trigger:"webhook",method:e.method||"POST",endpoint:e.endpoint||"/webhook/default",body:t||{},query:{}}}),errorTrigger:async(e,t,i)=>(i.addLog({type:"warning",nodeId:i.nodeId,nodeName:e.label||"Error Trigger",message:" Error trigger activated",data:t}),{output:{timestamp:new Date().toISOString(),trigger:"error",error:t?.error||null,originalInput:t}}),browserEventTrigger:async(e,t,i)=>{const{eventType:o="focus"}=e;return i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Browser Event",message:` Browser event: ${o}`}),{output:{timestamp:new Date().toISOString(),trigger:"browserEvent",eventType:o,url:typeof window<"u"?window.location.href:"",...t}}},fileSystem:async(e,t,i)=>{const o={...e};typeof t=="object"&&t!==null&&(t.mode&&(o.mode=t.mode),t.filename&&(o.filename=t.filename),t.content&&(o.content=t.content));const{mode:a="read"}=o;if(a==="read")try{if(typeof window<"u"&&"showOpenFilePicker"in window){const[l]=await window.showOpenFilePicker({types:o.fileTypes?.length?[{accept:{"text/*":o.fileTypes}}]:void 0}),c=await l.getFile(),f=await c.text();return i.addLog({type:"success",nodeId:i.nodeId,nodeName:e.label||"File System",message:` Read file: ${c.name} (${c.size} bytes)`}),{output:{filename:c.name,size:c.size,type:c.type,content:f,lastModified:c.lastModified}}}else throw new Error("File System Access API not supported")}catch(l){return i.addLog({type:"error",nodeId:i.nodeId,nodeName:e.label||"File System",message:` File read failed: ${l.message}`}),{output:{error:l.message}}}else if(a==="write")try{const l=typeof t=="string"?t:t?.text||JSON.stringify(t,null,2);if(typeof window<"u"&&"showSaveFilePicker"in window){const c=await window.showSaveFilePicker({suggestedName:e.filename||"output.txt"}),f=await c.createWritable();return await f.write(l),await f.close(),i.addLog({type:"success",nodeId:i.nodeId,nodeName:e.label||"File System",message:" File written successfully"}),{output:{success:!0,filename:c.name}}}else{const c=new Blob([l],{type:"text/plain"}),f=URL.createObjectURL(c),h=document.createElement("a");return h.href=f,h.download=e.filename||"output.txt",h.click(),URL.revokeObjectURL(f),{output:{success:!0,downloaded:!0}}}}catch(l){return{output:{error:l.message}}}return{output:t}},localStorage:async(e,t,i)=>{const{mode:o="get",storageType:a="localStorage",key:l}=e;if(!l)return{output:{error:"No key specified"}};try{if(a==="localStorage")switch(o){case"get":{const c=window.localStorage.getItem(l),f=c?JSON.parse(c):null;return i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Storage",message:` Retrieved: ${l}`}),{output:{key:l,value:f,found:c!==null}}}case"set":{const c=typeof t=="string"?t:JSON.stringify(t);return window.localStorage.setItem(l,c),i.addLog({type:"success",nodeId:i.nodeId,nodeName:e.label||"Storage",message:` Stored: ${l}`}),{output:{key:l,success:!0}}}case"delete":return window.localStorage.removeItem(l),i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Storage",message:` Deleted: ${l}`}),{output:{key:l,deleted:!0}}}else{const c="iosans-storage",f="keyvalue",p=await new Promise((m,g)=>{const v=indexedDB.open(c,1);v.onerror=()=>g(v.error),v.onsuccess=()=>m(v.result),v.onupgradeneeded=b=>{const w=b.target.result;w.objectStoreNames.contains(f)||w.createObjectStore(f)}});switch(o){case"get":return new Promise(m=>{const b=p.transaction(f,"readonly").objectStore(f).get(l);b.onsuccess=()=>{i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Storage",message:` Retrieved (IndexedDB): ${l}`}),m({output:{key:l,value:b.result,found:b.result!==void 0}})},b.onerror=()=>m({output:{error:b.error.message}})});case"set":return new Promise(m=>{const b=p.transaction(f,"readwrite").objectStore(f).put(t,l);b.onsuccess=()=>{i.addLog({type:"success",nodeId:i.nodeId,nodeName:e.label||"Storage",message:` Stored (IndexedDB): ${l}`}),m({output:{key:l,success:!0}})},b.onerror=()=>m({output:{error:b.error.message}})});case"delete":return new Promise(m=>{const b=p.transaction(f,"readwrite").objectStore(f).delete(l);b.onsuccess=()=>{i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Storage",message:` Deleted (IndexedDB): ${l}`}),m({output:{key:l,deleted:!0}})},b.onerror=()=>m({output:{error:b.error.message}})})}}}catch(c){return{output:{error:c.message}}}return{output:t}},switchNode:async(e,t,i)=>{const{field:o,routes:a=[],defaultOutput:l=3}=e,c=Lv(t,o);i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Switch",message:` Switch on "${o}": value = "${c}"`});for(const f of a)if(String(f.value)===String(c))return{output:t,outputIndex:f.outputIndex};return{output:t,outputIndex:l}},waitForApproval:async(e,t,i)=>{const{title:o="Approval Required",message:a=""}=e;return i.addLog({type:"warning",nodeId:i.nodeId,nodeName:e.label||"Approval",message:` Waiting for approval: ${o}`,data:t}),new Promise(l=>{const c=Iv(a,t);window.confirm(`${o}

${c}

Click OK to approve, Cancel to reject.`)?(i.addLog({type:"success",nodeId:i.nodeId,nodeName:e.label||"Approval",message:" Approved"}),l({output:{approved:!0,approvedAt:new Date().toISOString(),originalInput:t},outputIndex:0})):(i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Approval",message:" Rejected"}),l({output:{approved:!1,rejectedAt:new Date().toISOString(),originalInput:t},outputIndex:1}))})},subWorkflow:async(e,t,i)=>{const{workflowId:o,passInput:a=!0}=e;return i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Sub-Workflow",message:` Executing sub-workflow: ${o||"none selected"}`}),o?(i.addLog({type:"warning",nodeId:i.nodeId,nodeName:e.label||"Sub-Workflow",message:" Sub-workflow execution not yet implemented"}),{output:{subWorkflowId:o,result:a?t:{},duration:0,note:"Sub-workflow execution coming soon"}}):{output:{error:"No workflow selected"}}},textToSpeech:async(e,t,i)=>{let o="";typeof t=="object"&&t!==null?o=t.text||t.data||JSON.stringify(t):o=String(t||"");const a=cs(o,{input:t});if(!a||a.trim()==="")throw new Error("No text provided for speech synthesis");if(i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Text to Speech",message:` Generating audio for: "${a.substring(0,50)}${a.length>50?"...":""}"`}),!("speechSynthesis"in window))throw new Error("Web Speech API not supported in this browser");const l=e.voice||"default",c=e.speed||1,f=e.pitch||1,h=new SpeechSynthesisUtterance(a);if(h.rate=c,h.pitch=f,l!=="default"){const v=window.speechSynthesis.getVoices().find(b=>b.name.toLowerCase().includes(l.toLowerCase()));v&&(h.voice=v)}const p=`tts_${Date.now()}_${crypto.randomUUID().slice(0,8)}`,m={type:"speech",text:a,voice:l,speed:c,pitch:f,mimeType:"audio/speech",canPlay:!0};return await xc(i,`${p}.speech.json`,"application/json",JSON.stringify(m,null,2)),await new Promise((g,v)=>{h.onend=g,h.onerror=b=>v(new Error(`Speech failed: ${b.error}`)),window.speechSynthesis.speak(h)}),i.addLog({type:"success",nodeId:i.nodeId,nodeName:e.label||"Text to Speech",message:" Audio played successfully"}),{output:{artifactId:p,type:"audio",mimeType:"audio/speech",text:a,voice:l,speed:c,pitch:f,played:!0,_executed:!0}}},pythonExecutor:async(e,t,i)=>{const{code:o="",packages:a=[]}=e;if(i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Python",message:" Executing Python code..."}),typeof window>"u"||!window.loadPyodide)try{i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Python",message:" Loading Pyodide runtime..."}),window.pyodideLoading||(window.pyodideLoading=(async()=>{const c=document.createElement("script");return c.src="https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.js",document.head.appendChild(c),await new Promise(f=>{c.onload=f}),window.pyodide=await window.loadPyodide(),window.pyodide})()),await window.pyodideLoading}catch(c){return i.addLog({type:"error",nodeId:i.nodeId,nodeName:e.label||"Python",message:` Failed to load Pyodide: ${c.message}`}),{output:{error:`Failed to load Pyodide: ${c.message}`}}}const l=window.pyodide;try{a.length>0&&(i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Python",message:` Installing packages: ${a.join(", ")}`}),await l.loadPackagesFromImports(a.join(`
`))),l.globals.set("input",l.toPy(t));let c="";l.setStdout({batched:v=>{c+=v}});const f=Date.now(),h=await l.runPythonAsync(`
${o}
result if 'result' in dir() else None
`),p=(Date.now()-f)/1e3,m=h?.toJs?h.toJs():h;i.addLog({type:"success",nodeId:i.nodeId,nodeName:e.label||"Python",message:` Python executed in ${p.toFixed(2)}s`,data:m});const g=`python_${Date.now()}_${crypto.randomUUID().slice(0,8)}`;return m!=null&&await xc(i,`${g}.json`,"application/json",JSON.stringify({result:m,stdout:c},null,2)),{output:{artifactId:g,result:m,stdout:c,duration:p,_executed:!0}}}catch(c){return i.addLog({type:"error",nodeId:i.nodeId,nodeName:e.label||"Python",message:` Python error: ${c.message}`}),{output:{error:c.message}}}}};function Iv(e,t){return cs(e,{input:t})}function Lv(e,t){return!t||!e?e:t.split(".").reduce((i,o)=>i&&i[o]!==void 0?i[o]:void 0,e)}async function Y2(e,t=null){const i=Xe.getState();let o=t;if(!o){const c=i.nodeResults[e.id];c?.input?o=c.input:o=X2(e.type)}const a={nodeId:e.id,nodes:[],edges:[],addLog:c=>{i.addLog({...c,nodeId:e.id})}};i.addLog({type:"info",nodeId:e.id,nodeName:e.data?.label||e.type,message:` Running step: ${e.data?.label||e.type}`});const l=Date.now();try{const c=await pp(e,o,a),f=Date.now()-l;return i.setNodeResult(e.id,{...c,executionTime:f,input:o,stepExecution:!0}),i.addLog({type:"success",nodeId:e.id,nodeName:e.data?.label||e.type,message:` Step completed in ${f}ms`,data:{preview:Q2(c.output)}}),{success:!0,output:c.output,executionTime:f}}catch(c){const f=Date.now()-l;return i.setNodeResult(e.id,{success:!1,error:c.message,executionTime:f,input:o,stepExecution:!0}),i.addLog({type:"error",nodeId:e.id,nodeName:e.data?.label||e.type,message:` Step failed: ${c.message}`}),{success:!1,error:c.message,executionTime:f}}}function X2(e){return{manualTrigger:{timestamp:new Date().toISOString(),trigger:"manual",test:!0},httpRequest:{url:"https://api.example.com/data",method:"GET"},codeExecutor:{message:"Hello from step execution",value:42,items:[1,2,3]},pythonExecutor:{data:[1,2,3,4,5],text:"Sample Python input"},aiAgent:{prompt:"Test prompt for AI agent",context:"Running in step mode"},ifElse:{value:!0,status:"active"},loop:{items:["item1","item2","item3"]},switchNode:{value:"case1",status:"pending"},setVariable:{key:"testVar",value:"testValue"},textToSpeech:{text:"This is a test message for text to speech."},output:{result:"Test output data",status:"complete"}}[e]||{input:"default mock data",timestamp:new Date().toISOString()}}function Q2(e){if(typeof e=="string")return e.slice(0,100)+(e.length>100?"...":"");if(typeof e=="object"){const t=JSON.stringify(e);return t.slice(0,100)+(t.length>100?"...":"")}return String(e)}function zv({id:e,type:t,position:i,label:o,isConnected:a,isRequired:l}){const c=Ov[t]||Ov.workflow,f=l&&!a?"#ef4444":c.color;return u.jsxs("div",{className:"diamond-handle-wrapper",children:[o&&u.jsx("span",{className:"diamond-handle-label",style:{color:f},children:o}),u.jsx(In,{type:i===ge.Top?"source":"target",position:i,id:e,isConnectable:!0,className:`diamond-handle handle-${t} ${l&&!a?"required":""} ${a?"connected":""}`,style:{"--handle-color":f}})]})}function W2({type:e,data:t,children:i,inputs:o=1,outputs:a=1,outputLabels:l=[],resourceSlots:c=null,providerOutput:f=null}){const h=qr(),p=Ei[e],m=uu(e),[g,v]=T.useState(!1),[b,w]=T.useState(!1),S=Xe(D=>D.currentNodeId),j=Xe(D=>D.activeSupportingNodeIds||[]),N=Xe(D=>D.isRunning),k=Xe(D=>D.nodeResults),C=Ce(D=>D.selectedNodeId),_=Ce(D=>D.configOpen),H=Ce(D=>D.openConfig),A=Ce(D=>D.closeConfig),$=Ce(D=>D.edges),V=Ce(D=>D.nodes),G=N&&S===h,z=N&&j.includes(h),L=C===h,U=k[h]!==void 0,Z=k[h]?.error,M=k[h],P=T.useCallback(D=>{D.stopPropagation(),L&&_?A():H(h)},[h,L,_,H,A]),O=T.useCallback(async D=>{if(D.stopPropagation(),!(g||N)){v(!0),w(!0);try{const B=V.find(F=>F.id===h);B&&await Y2(B)}finally{v(!1)}}},[h,V,g,N]),q=T.useMemo(()=>{const D=new Set;return $.forEach(B=>{B.source===h&&B.sourceHandle&&D.add(B.sourceHandle),B.target===h&&B.targetHandle&&D.add(B.targetHandle)}),D},[$,h]),Y=c||(e==="aiAgent"?w2.resourceSlots:null),Q=()=>{if(!M?.output)return null;const D=M.output;if(typeof D=="string")return D.slice(0,80)+(D.length>80?"...":"");const B=JSON.stringify(D,null,2);return B.slice(0,120)+(B.length>120?"...":"")};return u.jsxs("div",{className:`base-node ${G?"active":""} ${z?"supporting-active":""} ${L?"selected":""} ${Z?"error":""} ${Y?"has-resource-slots":""} ${g?"step-running":""}
      }`,style:{"--node-color":m},children:[f&&u.jsx(zv,{id:f.id,type:f.type,position:ge.Top,label:f.label,isConnected:q.has(f.id),isRequired:!1}),o>0&&Array.from({length:o},(D,B)=>{const F=`input-${B}`,I=q.has(F);return u.jsx(In,{type:"target",position:ge.Left,id:F,isConnectable:!0,className:`node-handle input-handle circle-handle ${I?"connected":""}`,style:o>1?{top:`${(B+1)/(o+1)*100}%`}:{}},F)}),u.jsxs("div",{className:"node-header",children:[u.jsx("span",{className:"node-icon",children:p?.icon||""}),u.jsx("span",{className:"node-label",children:t.label||p?.name||e}),G&&u.jsx("span",{className:"running-indicator",children:""}),g&&u.jsx("span",{className:"running-indicator step",children:""}),U&&!G&&!g&&!Z&&u.jsx("span",{className:"success-indicator",children:""}),Z&&u.jsx("span",{className:"error-indicator",title:"Node failed - click to see error",children:""})]}),u.jsx("div",{className:"node-body",children:i}),u.jsxs("div",{className:"node-action-toolbar",children:[u.jsx("button",{className:`action-btn config-btn ${L?"active":""}`,onClick:P,title:L?"Close config":"Open config",children:""}),!N&&u.jsx("button",{className:`action-btn run-btn ${g?"running":""}`,onClick:O,disabled:g,title:"Run this step",children:g?"":""})]}),b&&M&&u.jsxs("div",{className:`step-result-preview ${Z?"error":"success"}`,children:[u.jsxs("div",{className:"step-result-header",children:[u.jsx("span",{children:Z?" Error":" Result"}),u.jsxs("span",{className:"step-time",children:[M.executionTime,"ms"]}),u.jsx("button",{className:"step-close-btn",onClick:D=>{D.stopPropagation(),w(!1)},children:""})]}),u.jsx("pre",{className:"step-result-body",children:Z?M.error:Q()})]}),Y&&Y.length>0&&u.jsx("div",{className:"resource-slots-container",children:Y.map(D=>u.jsx(zv,{id:D.id,type:D.type,position:ge.Bottom,label:D.label,isConnected:q.has(D.id),isRequired:D.required},D.id))}),a>0&&Array.from({length:a},(D,B)=>{const F=`output-${B}`,I=q.has(F);return u.jsx(In,{type:"source",position:ge.Right,id:F,isConnectable:!0,className:`node-handle output-handle circle-handle ${I?"connected":""}`,style:a>1?{top:`${(B+1)/(a+1)*100}%`}:{},children:l[B]&&u.jsx("span",{className:"handle-label",children:l[B]})},F)})]})}const lt=T.memo(W2);function Z2({data:e}){const t=qr(),i=Ce(a=>a.updateNode),o=T.useCallback(a=>{i(t,{defaultPayload:a.target.value})},[t,i]);return u.jsx(lt,{type:"manualTrigger",data:e,inputs:0,outputs:1,children:u.jsxs("div",{className:"node-field",children:[u.jsx("label",{children:"Default Payload"}),u.jsx("textarea",{className:"node-input nodrag",placeholder:"Enter text to start flow...",value:e.defaultPayload||"",onChange:o,rows:3,style:{width:"100%",resize:"vertical"}})]})})}const J2=T.memo(Z2);function K2({data:e}){return u.jsxs(lt,{type:"scheduleTrigger",data:e,inputs:1,outputs:1,children:[u.jsxs("div",{className:"node-field",children:[u.jsx("label",{children:"Schedule (cron)"}),u.jsx("div",{className:"node-preview",children:e.schedule||"*/5 * * * *"})]}),u.jsx("div",{className:"node-preview",children:e.enabled?" Enabled":" Disabled"})]})}const eD=T.memo(K2);function tD({data:e}){const[t,i]=T.useState(!1),o=e.endpoint||`/webhook/${e.id||"default"}`,a=e.method||"POST",l=()=>{navigator.clipboard.writeText(`${window.location.origin}${o}`),i(!0),setTimeout(()=>i(!1),2e3)};return u.jsx(lt,{type:"webhookTrigger",data:e,inputs:0,outputs:1,children:u.jsxs("div",{className:"webhook-content",children:[u.jsx("div",{className:"method-badge",children:a}),u.jsxs("div",{className:"endpoint-display",onClick:l,children:[u.jsx("span",{className:"endpoint-path",children:o}),u.jsx("span",{className:"copy-hint",children:t?"":""})]}),e.authRequired&&u.jsx("div",{className:"auth-badge",children:" Auth Required"})]})})}const nD=T.memo(tD);function iD({data:e}){const t=e.watchAll!==!1,i=e.specificNodes||[];return u.jsx(lt,{type:"errorTrigger",data:e,inputs:0,outputs:1,children:u.jsxs("div",{className:"error-trigger-content",children:[u.jsx("div",{className:"error-icon",children:""}),u.jsx("div",{className:"watch-mode",children:t?u.jsx("span",{className:"watch-all",children:"Watching all nodes"}):u.jsxs("span",{className:"watch-specific",children:["Watching ",i.length," node(s)"]})}),e.retryEnabled&&u.jsxs("div",{className:"retry-badge",children:[" Auto-retry: ",e.retryCount||3,"x"]})]})})}const rD=T.memo(iD),oD={focus:"Tab Focus",blur:"Tab Blur",urlChange:"URL Change",domClick:"DOM Click",domChange:"DOM Change",keypress:"Key Press",timer:"Timer"};function aD({data:e}){const t=e.eventType||"focus",i=oD[t]||t;return u.jsx(lt,{type:"browserEventTrigger",data:e,inputs:0,outputs:1,children:u.jsxs("div",{className:"browser-event-content",children:[u.jsx("div",{className:"event-icon",children:""}),u.jsx("div",{className:"event-type",children:i}),t==="domClick"&&e.selector&&u.jsx("div",{className:"selector-preview",children:u.jsx("code",{children:e.selector})}),t==="timer"&&e.interval&&u.jsxs("div",{className:"timer-preview",children:["Every ",e.interval,"ms"]}),t==="urlChange"&&e.urlPattern&&u.jsxs("div",{className:"pattern-preview",children:[e.urlPattern.slice(0,30),"..."]})]})})}const sD=T.memo(aD),Bv="https://cdn.jsdelivr.net/npm/monaco-editor@0.45.0/min/vs";function lD({data:e}){const[t,i]=T.useState(!1),[o,a]=T.useState(!!window.monaco),l=T.useRef(null),c=T.useRef(null),f=(e.code||"").split(`
`)[0].slice(0,40);return T.useEffect(()=>{if(!t||o)return;if(window.monaco){a(!0);return}let h=!0;const p=document.createElement("script");return p.src=`${Bv}/loader.js`,p.async=!0,p.onload=()=>{window.require.config({paths:{vs:Bv}}),window.require(["vs/editor/editor.main"],()=>{h&&a(!0)})},document.body.appendChild(p),()=>{h=!1}},[t,o]),T.useEffect(()=>{o&&t&&c.current&&!l.current&&(l.current=window.monaco.editor.create(c.current,{value:e.code||`// JavaScript code
return input;`,language:"javascript",theme:"vs-dark",minimap:{enabled:!1},fontSize:12,lineNumbers:"on",scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:2}))},[o,t,e.code]),T.useEffect(()=>(!t&&l.current&&(l.current.dispose(),l.current=null),()=>{l.current&&(l.current.dispose(),l.current=null)}),[t]),u.jsxs(lt,{type:"codeExecutor",data:e,inputs:1,outputs:1,children:[u.jsxs("div",{className:"code-executor-content",children:[u.jsxs("div",{className:"node-preview code-preview",onClick:()=>i(!0),title:"Click to edit code",children:[u.jsxs("span",{className:"code-text",children:[f||"// JavaScript code",f&&f.length>=40&&"..."]}),u.jsx("span",{className:"edit-hint",children:""})]}),e.cdnUrls?.length>0&&u.jsxs("div",{className:"cdn-badge",children:[" ",e.cdnUrls.length," CDN",e.cdnUrls.length>1?"s":""]})]}),t&&u.jsx("div",{className:"monaco-modal-overlay",onClick:h=>{h.target===h.currentTarget&&i(!1)},children:u.jsxs("div",{className:"monaco-modal",children:[u.jsxs("div",{className:"monaco-header",children:[u.jsx("span",{children:" Code Editor"}),u.jsx("button",{className:"monaco-close",onClick:()=>i(!1),children:""})]}),u.jsx("div",{ref:c,className:"monaco-container",children:!o&&u.jsx("div",{className:"monaco-loading",children:"Loading editor..."})})]})})]})}const cD=T.memo(lD);function uD({data:e}){return u.jsxs(lt,{type:"setVariable",data:e,inputs:1,outputs:1,children:[u.jsxs("div",{className:"node-field",children:[u.jsx("label",{children:"Variable"}),u.jsx("div",{className:"node-preview",children:e.variableName||"data"})]}),u.jsxs("div",{className:"node-preview",style:{marginTop:"4px"},children:["Mode: ",e.mode||"set"]})]})}const dD=T.memo(uD);function fD({data:e}){const t=e.mode||"get",i=e.storageType||"indexedDB",o=e.key||"";return u.jsx(lt,{type:"localStorage",data:e,inputs:1,outputs:1,children:u.jsxs("div",{className:"localstorage-content",children:[u.jsxs("div",{className:"storage-badge",children:[u.jsx("span",{className:"storage-icon",children:""}),u.jsx("span",{className:"storage-type",children:i})]}),u.jsxs("div",{className:"operation-row",children:[u.jsx("span",{className:`operation-mode ${t}`,children:t==="get"?"GET":t==="set"?"SET":"DELETE"}),o&&u.jsx("span",{className:"key-name",children:o})]})]})})}const hD=T.memo(fD);function pD({data:e}){const t=e.mode||"read";return u.jsx(lt,{type:"fileSystem",data:e,inputs:0,outputs:0,providerOutput:{id:"tool-out",type:"tool",label:null},children:u.jsxs("div",{className:"filesystem-content",style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"10px"},children:[u.jsx("div",{className:"mode-badge",style:{marginBottom:"5px"},children:u.jsx("span",{className:"mode-icon",style:{fontSize:"24px"},children:""})}),u.jsx("div",{className:"filename-display",children:u.jsx("span",{className:"mode-label",style:{fontSize:"10px",textTransform:"uppercase",fontWeight:"bold"},children:t==="read"?"Read File":"Write File"})})]})})}const mD=T.memo(pD);function gD({data:e}){const t={GET:"#00c853",POST:"#2979ff",PUT:"#ffab00",DELETE:"#ff5252",PATCH:"#e040fb"};return u.jsx(lt,{type:"httpRequest",data:e,inputs:0,outputs:0,providerOutput:{id:"tool-out",type:"tool",label:null},children:u.jsxs("div",{className:"http-content",style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"10px"},children:[u.jsx("div",{className:"http-icon",style:{fontSize:"24px",marginBottom:"8px"},children:""}),u.jsx("div",{className:"node-field",children:u.jsx("span",{className:"http-method",style:{color:t[e.method]||"#666",fontWeight:600,fontSize:"10px"},children:e.method||"GET"})})]})})}const yD=T.memo(gD);function xD({data:e}){return u.jsx(lt,{type:"ifElse",data:e,inputs:1,outputs:2,outputLabels:["true","false"],children:u.jsx("div",{className:"node-preview",children:e.condition||"No condition set"})})}const vD=T.memo(xD);function bD({data:e}){return u.jsxs(lt,{type:"loop",data:e,inputs:1,outputs:2,outputLabels:["loop ","done "],children:[u.jsxs("div",{className:"node-field",children:[u.jsx("label",{children:"Iterations"}),u.jsxs("div",{className:"node-preview",children:[e.iterations||1,""]})]}),u.jsxs("div",{className:"node-field",children:[u.jsx("label",{children:"Items path"}),u.jsx("div",{className:"node-preview",children:e.itemsPath||"items"})]})]})}const wD=T.memo(bD);function SD({data:e}){const t=qr(),i=kw(),o=uu("switchNode"),a=Xe(S=>S.currentNodeId),l=Xe(S=>S.isRunning),c=Xe(S=>S.nodeResults),f=Ce(S=>S.selectedNodeId),h=l&&a===t,p=f===t,m=c[t]!==void 0,g=c[t]?.error,v=T.useMemo(()=>e.routes||[],[e.routes]),b=e.field||"value",w=T.useMemo(()=>{const S=v.map((j,N)=>({id:`output-${N}`,label:String(j.value||j.label||N),index:N}));return S.push({id:"output-default",label:"default",index:S.length}),S},[v]);return T.useEffect(()=>{i(t)},[t,v.length,i]),u.jsxs("div",{className:`switch-node ${h?"active":""} ${p?"selected":""} ${g?"error":""}`,style:{"--node-color":o},children:[u.jsx(In,{type:"target",position:ge.Left,id:"input-0",className:"node-handle circle-handle"}),u.jsxs("div",{className:"node-header",children:[u.jsx("span",{className:"node-icon",children:""}),u.jsx("span",{className:"node-label",children:e.label||"Switch"}),h&&u.jsx("span",{className:"running-indicator",children:""}),m&&!h&&!g&&u.jsx("span",{className:"success-indicator",children:""})]}),u.jsxs("div",{className:"node-body",children:[u.jsxs("div",{className:"switch-field",children:[u.jsx("span",{className:"field-label",children:"Switch on:"}),u.jsx("span",{className:"field-value",children:b})]}),u.jsx("div",{className:"switch-routes",children:w.map(S=>u.jsxs("div",{className:"route-label-row",children:[u.jsx("span",{className:"route-value",children:S.label}),u.jsx("span",{className:"route-arrow",children:""})]},S.id))})]}),w.map((S,j)=>u.jsx(In,{type:"source",position:ge.Right,id:S.id,className:`node-handle circle-handle ${S.id==="output-default"?"default-handle":""}`,style:{top:`${(j+1)/(w.length+1)*100}%`}},S.id))]})}const ND=T.memo(SD);function ED({data:e}){const t=e.inputCount||2,i=e.mode||"wait";return u.jsx(lt,{type:"merge",data:e,inputs:t,outputs:1,outputLabels:["merged"],children:u.jsxs("div",{className:"merge-node-content",children:[u.jsxs("div",{className:"merge-mode",children:[u.jsx("span",{className:"mode-icon",children:i==="wait"?"":""}),u.jsx("span",{className:"mode-text",children:i==="wait"?"Wait for all":"First to arrive"})]}),u.jsxs("div",{className:"merge-inputs",children:[u.jsx("span",{className:"inputs-label",children:"Inputs:"}),u.jsx("span",{className:"inputs-count",children:t})]}),e.aggregator&&u.jsxs("div",{className:"merge-aggregator",children:[u.jsx("span",{className:"agg-label",children:"Combine:"}),u.jsx("span",{className:"agg-value",children:e.aggregator})]})]})})}const jD=T.memo(ED);function CD({data:e}){const[t,i]=T.useState(e.collapsed||!1),o=T.useCallback(()=>{i(f=>!f)},[]),a=e.childNodeIds?.length||0,l=e.label||"Node Group",c=e.color||"#6366f1";return u.jsxs("div",{className:`group-node ${t?"collapsed":"expanded"}`,style:{"--group-color":c,minWidth:t?"160px":e.width||"300px",minHeight:t?"60px":e.height||"200px"},children:[u.jsx(In,{type:"target",position:ge.Left,id:"input-0",className:"group-handle"}),u.jsxs("div",{className:"group-header",onClick:o,children:[u.jsx("span",{className:"group-icon",children:t?"":""}),u.jsx("span",{className:"group-label",children:l}),u.jsxs("span",{className:"group-badge",children:[a," nodes"]}),u.jsx("button",{className:"collapse-btn",title:t?"Expand":"Collapse",children:t?"":""})]}),!t&&u.jsx("div",{className:"group-body",children:a>0?u.jsx("div",{className:"group-content",children:u.jsx("span",{className:"group-hint",children:"Drag nodes here to add them to the group"})}):u.jsxs("div",{className:"group-empty",children:[u.jsx("span",{children:"Empty Group"}),u.jsx("span",{className:"group-hint",children:"Add nodes from context menu"})]})}),t&&a>0&&u.jsxs("div",{className:"collapsed-preview",children:["Contains ",a," connected nodes"]}),u.jsx(In,{type:"source",position:ge.Right,id:"output-0",className:"group-handle"})]})}const kD=T.memo(CD);function TD(e,t){let i;try{i=e()}catch{return}return{getItem:a=>{var l;const c=h=>h===null?null:JSON.parse(h,void 0),f=(l=i.getItem(a))!=null?l:null;return f instanceof Promise?f.then(c):c(f)},setItem:(a,l)=>i.setItem(a,JSON.stringify(l,void 0)),removeItem:a=>i.removeItem(a)}}const Rh=e=>t=>{try{const i=e(t);return i instanceof Promise?i:{then(o){return Rh(o)(i)},catch(o){return this}}}catch(i){return{then(o){return this},catch(o){return Rh(o)(i)}}}},AD=(e,t)=>(i,o,a)=>{let l={storage:TD(()=>localStorage),partialize:S=>S,version:0,merge:(S,j)=>({...j,...S}),...t},c=!1;const f=new Set,h=new Set;let p=l.storage;if(!p)return e((...S)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),i(...S)},o,a);const m=()=>{const S=l.partialize({...o()});return p.setItem(l.name,{state:S,version:l.version})},g=a.setState;a.setState=(S,j)=>(g(S,j),m());const v=e((...S)=>(i(...S),m()),o,a);a.getInitialState=()=>v;let b;const w=()=>{var S,j;if(!p)return;c=!1,f.forEach(k=>{var C;return k((C=o())!=null?C:v)});const N=((j=l.onRehydrateStorage)==null?void 0:j.call(l,(S=o())!=null?S:v))||void 0;return Rh(p.getItem.bind(p))(l.name).then(k=>{if(k)if(typeof k.version=="number"&&k.version!==l.version){if(l.migrate){const C=l.migrate(k.state,k.version);return C instanceof Promise?C.then(_=>[!0,_]):[!0,C]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,k.state];return[!1,void 0]}).then(k=>{var C;const[_,H]=k;if(b=l.merge(H,(C=o())!=null?C:v),i(b,!0),_)return m()}).then(()=>{N?.(b,void 0),b=o(),c=!0,h.forEach(k=>k(b))}).catch(k=>{N?.(void 0,k)})};return a.persist={setOptions:S=>{l={...l,...S},S.storage&&(p=S.storage)},clearStorage:()=>{p?.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>w(),hasHydrated:()=>c,onHydrate:S=>(f.add(S),()=>{f.delete(S)}),onFinishHydration:S=>(h.add(S),()=>{h.delete(S)})},l.skipHydration||w(),b||v},MD=AD,Ge=cu(MD((e,t)=>({status:"idle",currentModelId:null,loadProgress:0,loadingText:"",errorMessage:null,downloadedModels:[],downloadProgress:{},downloadQueue:[],isDownloading:!1,availableModels:[{id:"gemma-2-2b-it-q4f16_1-MLC",name:"Gemma 2 2B",size:"~1.4GB",vramRequired:2,description:"Google's fast, lightweight model (Recommended)",category:"recommended"},{id:"Qwen2.5-1.5B-Instruct-q4f16_1-MLC",name:"Qwen 2.5 1.5B",size:"~1GB",vramRequired:1.5,description:"Alibaba's efficient small model",category:"recommended"},{id:"SmolLM2-1.7B-Instruct-q4f16_1-MLC",name:"SmolLM2 1.7B",size:"~1.1GB",vramRequired:1.8,description:"HuggingFace's compact model",category:"recommended"},{id:"gemma-2-2b-it-q4f32_1-MLC",name:"Gemma 2 2B (F32)",size:"~2.5GB",vramRequired:3,description:"Higher precision Gemma 2",category:"gemma"},{id:"gemma-2-9b-it-q4f16_1-MLC",name:"Gemma 2 9B",size:"~6GB",vramRequired:8,description:"Larger Gemma 2 with better reasoning",category:"gemma"},{id:"gemma-2-2b-jpn-it-q4f16_1-MLC",name:"Gemma 2 2B Japanese",size:"~1.4GB",vramRequired:2,description:"Japanese-optimized Gemma 2",category:"gemma"},{id:"Qwen3-0.6B-q4f16_1-MLC",name:"Qwen 3 0.6B",size:"~400MB",vramRequired:.8,description:"Ultra-light Qwen 3 - instant responses",category:"qwen3"},{id:"Qwen3-1.7B-q4f16_1-MLC",name:"Qwen 3 1.7B",size:"~1.1GB",vramRequired:1.8,description:"Fast Qwen 3 with hybrid thinking",category:"qwen3"},{id:"Qwen3-4B-q4f16_1-MLC",name:"Qwen 3 4B",size:"~2.5GB",vramRequired:3.5,description:"Balanced Qwen 3 for most tasks",category:"qwen3"},{id:"Qwen3-8B-q4f16_1-MLC",name:"Qwen 3 8B",size:"~5GB",vramRequired:6.5,description:"Advanced Qwen 3 with deep reasoning",category:"qwen3"},{id:"Qwen2.5-0.5B-Instruct-q4f16_1-MLC",name:"Qwen 2.5 0.5B",size:"~350MB",description:"Ultra-light Qwen for basic tasks",category:"qwen"},{id:"Qwen2.5-3B-Instruct-q4f16_1-MLC",name:"Qwen 2.5 3B",size:"~2GB",description:"Balanced Qwen with good reasoning",category:"qwen"},{id:"Qwen2.5-7B-Instruct-q4f16_1-MLC",name:"Qwen 2.5 7B",size:"~4.5GB",description:"Powerful Qwen for complex tasks",category:"qwen"},{id:"Qwen2.5-Coder-1.5B-Instruct-q4f16_1-MLC",name:"Qwen 2.5 Coder 1.5B",size:"~1GB",description:"Optimized for code generation",category:"qwen"},{id:"Phi-3.5-mini-instruct-q4f16_1-MLC",name:"Phi-3.5 Mini",size:"~2.4GB",description:"Microsoft's balanced 3.8B model",category:"medium"},{id:"Llama-3.2-3B-Instruct-q4f16_1-MLC",name:"Llama 3.2 3B",size:"~2GB",description:"Meta's capable small model",category:"medium"},{id:"Llama-3.2-1B-Instruct-q4f16_1-MLC",name:"Llama 3.2 1B",size:"~900MB",description:"Meta's fast tiny model",category:"medium"},{id:"Mistral-7B-Instruct-v0.3-q4f16_1-MLC",name:"Mistral 7B v0.3",size:"~4.5GB",description:"Mistral AI's flagship model",category:"medium"},{id:"SmolLM2-360M-Instruct-q4f16_1-MLC",name:"SmolLM2 360M",size:"~250MB",description:"Smallest practical model",category:"tiny"},{id:"SmolLM2-135M-Instruct-q0f16-MLC",name:"SmolLM2 135M",size:"~150MB",description:"Tiny model for simple tasks",category:"tiny"}],setStatus:i=>e({status:i}),setLoading:(i,o)=>{e({status:"loading",loadProgress:i,loadingText:o})},setReady:i=>{const{downloadedModels:o}=t(),a=o.includes(i)?o:[...o,i];e({status:"ready",currentModelId:i,loadProgress:1,loadingText:"",errorMessage:null,downloadedModels:a})},setError:i=>{e({status:"error",errorMessage:i,loadProgress:0,loadingText:""})},reset:()=>{e({status:"idle",currentModelId:null,loadProgress:0,loadingText:"",errorMessage:null})},addToDownloadQueue:i=>{const{downloadQueue:o,downloadedModels:a}=t();!o.includes(i)&&!a.includes(i)&&e({downloadQueue:[...o,i]})},removeFromQueue:i=>{const{downloadQueue:o}=t();e({downloadQueue:o.filter(a=>a!==i)})},setDownloadProgress:(i,o,a="downloading")=>{const{downloadProgress:l}=t();e({downloadProgress:{...l,[i]:{progress:o,status:a}}})},markDownloaded:i=>{const{downloadedModels:o,downloadProgress:a,downloadQueue:l}=t();o.includes(i)||e({downloadedModels:[...o,i],downloadProgress:{...a,[i]:{progress:100,status:"complete"}},downloadQueue:l.filter(c=>c!==i)})},isModelDownloaded:i=>t().downloadedModels.includes(i),getDownloadStatus:i=>{const{downloadProgress:o,downloadedModels:a}=t();return a.includes(i)?{progress:100,status:"complete"}:o[i]||{progress:0,status:"idle"}},isReady:()=>t().status==="ready",isLoading:()=>t().status==="loading",getDownloadedModels:()=>{const{availableModels:i,downloadedModels:o}=t();return i.filter(a=>o.includes(a.id))},getModelsForVRAM:i=>{const{availableModels:o}=t();return o.filter(a=>(a.vramRequired||1)<=i)},canLoadModel:(i,o)=>{const{availableModels:a}=t(),l=a.find(c=>c.id===i);return l?(l.vramRequired||1)<=o:!1},getVRAMStatus:(i,o)=>{const{availableModels:a}=t(),l=a.find(h=>h.id===i);if(!l)return{status:"unknown",message:"Model not found"};const c=l.vramRequired||1,f=o/c;return f>=1.5?{status:"excellent",color:"#10b981",message:"Plenty of VRAM"}:f>=1?{status:"good",color:"#22c55e",message:"Should work well"}:f>=.8?{status:"tight",color:"#f59e0b",message:"May be slow"}:{status:"insufficient",color:"#ef4444",message:"Not enough VRAM"}}}),{name:"sauvrn-models",partialize:e=>({downloadedModels:e.downloadedModels,currentModelId:e.currentModelId})}));let Wf=null;async function DD(){if(Wf)return Wf;const e={webgpu:!1,gpuVendor:null,gpuRenderer:null,estimatedVRAM:0,tier:"cpu",warning:null,recommendations:[]};if("gpu"in navigator)try{const t=await navigator.gpu.requestAdapter();if(t){e.webgpu=!0;const i=await t.requestAdapterInfo?.();i&&(e.gpuVendor=i.vendor||"Unknown",e.gpuRenderer=i.device||"Unknown GPU");const o=t.limits,a=o.maxBufferSize||0,l=o.maxStorageBufferBindingSize||0,c=Math.max(a,l)/(1024*1024*1024);e.estimatedVRAM=Math.round(c*10)/10,e.estimatedVRAM>=8?e.tier="high":e.estimatedVRAM>=4?e.tier="medium":(e.estimatedVRAM>=2||e.webgpu)&&(e.tier="low")}}catch(t){console.warn("WebGPU detection failed:",t),e.warning="WebGPU available but adapter request failed"}if(!e.gpuRenderer)try{const t=document.createElement("canvas"),i=t.getContext("webgl")||t.getContext("experimental-webgl");if(i){const o=i.getExtension("WEBGL_debug_renderer_info");o&&(e.gpuVendor=i.getParameter(o.UNMASKED_VENDOR_WEBGL)||"Unknown",e.gpuRenderer=i.getParameter(o.UNMASKED_RENDERER_WEBGL)||"Unknown GPU")}}catch{}return e.tier==="cpu"?(e.recommendations.push("WebGPU not supported - AI will run on CPU (slower)"),e.warning="No GPU acceleration available"):e.tier==="low"?(e.recommendations.push("Limited VRAM - use smaller AI models"),e.recommendations.push("Recommended: Phi-3-mini, Gemma-2B")):e.tier==="medium"?(e.recommendations.push("Moderate VRAM - most models will work"),e.recommendations.push("Recommended: Mistral-7B, Llama-3.1-8B")):e.tier==="high"&&e.recommendations.push("High VRAM - all models supported"),Wf=e,e}function _D(e){switch(e){case"high":return"#22c55e";case"medium":return"#f59e0b";case"low":return"#f87171";case"cpu":return"#6b7280";default:return"#6b7280"}}function OD(e){switch(e){case"high":return"";case"medium":return"";case"low":return"";case"cpu":return"";default:return""}}function RD({data:e}){const t=Ge(h=>h.availableModels),i=Ge(h=>h.status),[o,a]=T.useState(null);T.useEffect(()=>{DD().then(a)},[]);const c=t.find(h=>h.id===e.modelId)?.name||"Gemma 2 2B",f=(e.systemPrompt||"").split(`
`)[0].slice(0,50);return u.jsx(lt,{type:"aiAgent",data:e,inputs:1,outputs:1,children:u.jsxs("div",{className:"ai-node-content",children:[u.jsxs("div",{className:"model-badge",children:[u.jsx("span",{className:`status-dot ${i}`}),u.jsx("span",{className:"model-name",children:c})]}),o&&u.jsxs("div",{className:"hardware-badge",title:o.recommendations?.[0]||`GPU: ${o.gpuRenderer}`,style:{"--tier-color":_D(o.tier)},children:[OD(o.tier)," ",o.tier.toUpperCase()]}),e.systemPrompt&&u.jsxs("div",{className:"node-preview prompt-preview",children:[f,"..."]}),e.tools&&e.tools.length>0&&u.jsxs("div",{className:"tools-count",children:[" ",e.tools.length," tool(s) available"]})]})})}const ID=T.memo(RD);function LD({data:e}){const t=Ge(f=>f.availableModels),i=Ge(f=>f.status),o=e.provider||"webllm",l=t.find(f=>f.id===e.modelId)?.name||e.modelName||"Gemma 2 2B",c={webllm:"",openai:"",anthropic:"",local:""};return u.jsx(lt,{type:"chatModel",data:e,inputs:0,outputs:0,providerOutput:{id:"model-out",type:"model"},children:u.jsx("div",{className:"chat-model-content",children:u.jsxs("div",{className:"model-provider-row",children:[u.jsx("span",{className:"provider-icon-badge",children:c[o]||""}),u.jsxs("div",{className:"model-details",children:[u.jsx("div",{className:"model-name-label",children:l}),u.jsx("div",{className:"provider-name",children:o.toUpperCase()})]}),u.jsxs("div",{className:`model-status-indicator ${i}`,children:[i==="ready"&&"",i==="loading"&&"",i==="error"&&""]})]})})})}const zD=T.memo(LD);function BD({data:e}){const t=e.mode||"query",i=e.namespace||"default";return u.jsx(lt,{type:"vectorMemory",data:e,inputs:0,outputs:0,providerOutput:{id:"memory-out",type:"memory",label:null},children:u.jsxs("div",{className:"vector-memory-content",children:[u.jsxs("div",{className:"mode-badge",children:[u.jsx("span",{className:"mode-icon",children:t==="upsert"?"":""}),u.jsx("span",{className:"mode-label",children:t==="upsert"?"Store":"Query"})]}),u.jsxs("div",{className:"namespace-tag",children:[u.jsx("span",{className:"namespace-icon",children:""}),u.jsx("span",{className:"namespace-name",children:i})]}),e.topK&&t==="query"&&u.jsxs("div",{className:"config-preview",children:["Top ",e.topK," results"]}),u.jsxs("div",{className:"neural-badge",style:{marginTop:"8px",fontSize:"0.7em",color:"#8b5cf6",display:"flex",alignItems:"center",gap:"4px"},children:[u.jsx("span",{children:""})," Neural Embeddings"]})]})})}const $D=T.memo(BD);function HD({data:e}){const t=e.title||"Approval Required",i=e.timeout||0;return u.jsx(lt,{type:"waitForApproval",data:e,inputs:1,outputs:2,children:u.jsxs("div",{className:"approval-content",children:[u.jsx("div",{className:"approval-icon",children:""}),u.jsx("div",{className:"approval-title",children:t}),e.message&&u.jsxs("div",{className:"approval-message",children:[e.message.slice(0,60),"..."]}),u.jsxs("div",{className:"approval-outputs",children:[u.jsx("div",{className:"output-label approved",children:" Approved"}),u.jsx("div",{className:"output-label rejected",children:" Rejected"})]}),i>0&&u.jsxs("div",{className:"timeout-badge",children:[" ",i,"s timeout"]})]})})}const PD=T.memo(HD);function qD({data:e}){const t=e.workflowName||"Select workflow...",i=e.passInput!==!1;return u.jsx(lt,{type:"subWorkflow",data:e,inputs:1,outputs:1,children:u.jsxs("div",{className:"subworkflow-content",children:[u.jsx("div",{className:"workflow-icon",children:""}),u.jsx("div",{className:"workflow-name",children:t}),u.jsxs("div",{className:"workflow-config",children:[i&&u.jsx("span",{className:"config-tag",children:" Pass input"}),e.async&&u.jsx("span",{className:"config-tag",children:" Async"})]}),e.description&&u.jsxs("div",{className:"workflow-desc",children:[e.description.slice(0,50),"..."]})]})})}const UD=T.memo(qD);function VD({data:e}){const t=qr(),i=kw(),o=e.routes||[{id:"route-0",label:"General",keywords:["general","other"]},{id:"route-1",label:"Technical",keywords:["code","programming","bug"]},{id:"route-2",label:"Creative",keywords:["story","write","creative"]}],a=o.length+1;T.useEffect(()=>{i(t)},[o.length,t,i]);const l=[...o.map(c=>c.label),"Other"];return u.jsx(lt,{type:"semanticRouter",data:e,inputs:1,outputs:a,outputLabels:l,children:u.jsxs("div",{className:"semantic-router-content",children:[u.jsxs("div",{className:"routes-header",children:[u.jsx("span",{className:"routes-icon",children:""}),u.jsxs("span",{className:"routes-count",children:[o.length," routes"]})]}),u.jsxs("div",{className:"routes-preview",children:[o.slice(0,3).map((c,f)=>u.jsxs("div",{className:"route-chip",children:[u.jsx("span",{className:"route-number",children:f+1}),u.jsx("span",{className:"route-label",children:c.label})]},c.id||f)),o.length>3&&u.jsxs("div",{className:"route-chip more",children:["+",o.length-3]})]}),u.jsxs("div",{className:"classification-mode",children:[u.jsx("span",{className:"mode-label",children:"Mode:"}),u.jsx("span",{className:"mode-value",children:e.classificationMode||"keyword"})]})]})})}const FD=T.memo(VD);function GD({data:e}){const t=e.evaluationType||"schema",i=e.maxRetries||3,o=e.schema||null;return u.jsx(lt,{type:"evaluator",data:e,inputs:1,outputs:2,outputLabels:["pass ","retry "],children:u.jsxs("div",{className:"evaluator-node-content",children:[u.jsxs("div",{className:"eval-type",children:[u.jsx("span",{className:"eval-icon",children:""}),u.jsx("span",{className:"eval-label",children:t})]}),u.jsxs("div",{className:"eval-retries",children:[u.jsx("span",{className:"retries-label",children:"Max retries:"}),u.jsx("span",{className:"retries-count",children:i})]}),o&&u.jsxs("div",{className:"eval-schema",children:[u.jsx("span",{className:"schema-label",children:"Schema:"}),u.jsx("span",{className:"schema-preview",children:typeof o=="object"?Object.keys(o).slice(0,3).join(", "):o})]}),u.jsxs("div",{className:"eval-modes",children:[u.jsx("span",{className:`mode-chip ${t==="schema"?"active":""}`,children:"JSON"}),u.jsx("span",{className:`mode-chip ${t==="regex"?"active":""}`,children:"Regex"}),u.jsx("span",{className:`mode-chip ${t==="llm"?"active":""}`,children:"LLM"})]})]})})}const YD=T.memo(GD);function XD({data:e}){const t=e.agentCount||3,i=e.aggregationMode||"consensus",o=e.timeout||3e4;return u.jsx(lt,{type:"swarm",data:e,inputs:1,outputs:2,outputLabels:["result","all"],children:u.jsxs("div",{className:"swarm-node-content",children:[u.jsxs("div",{className:"swarm-header",children:[u.jsx("span",{className:"swarm-icon",children:""}),u.jsxs("span",{className:"swarm-count",children:[t," agents"]})]}),u.jsxs("div",{className:"swarm-mode",children:[u.jsx("span",{className:"mode-label",children:"Mode:"}),u.jsx("span",{className:`mode-value ${i}`,children:i})]}),u.jsxs("div",{className:"swarm-agents",children:[Array.from({length:Math.min(t,5)}).map((a,l)=>u.jsx("div",{className:"agent-indicator"},l)),t>5&&u.jsxs("span",{className:"agent-overflow",children:["+",t-5]})]}),u.jsxs("div",{className:"swarm-timeout",children:[u.jsx("span",{className:"timeout-label",children:"Timeout:"}),u.jsxs("span",{className:"timeout-value",children:[o/1e3,"s"]})]})]})})}const QD=T.memo(XD);function WD({data:e}){const t=qr(),i=e.voice||"default",o=e.speed||1,a=e.provider||"webSpeech",f=Xe(w=>w.nodeResults)[t]?.output,[h,p]=T.useState(!1),m=T.useCallback(()=>{if(!f?.audioId)return;const w=window.__ttsAudio?.[f.audioId];if(!w){const k=new SpeechSynthesisUtterance(f.text);k.rate=f.speed||1,k.pitch=f.pitch||1,k.onend=()=>{p(!1),window.dispatchEvent(new CustomEvent("audioEnd"))},p(!0),window.dispatchEvent(new CustomEvent("audioStart")),speechSynthesis.speak(k);return}const{utterance:S,text:j}=w,N=new SpeechSynthesisUtterance(j);N.rate=S.rate,N.pitch=S.pitch,S.voice&&(N.voice=S.voice),N.onend=()=>{p(!1),window.dispatchEvent(new CustomEvent("audioEnd"))},p(!0),window.dispatchEvent(new CustomEvent("audioStart")),speechSynthesis.speak(N)},[f]),g=T.useCallback(()=>{speechSynthesis.cancel(),p(!1),window.dispatchEvent(new CustomEvent("audioEnd"))},[]),v=T.useCallback(()=>{if(!f?.text)return;const w=`Text to Speech Content
${"=".repeat(40)}

${f.text}

---
Voice: ${f.voice}
Speed: ${f.speed}x
Pitch: ${f.pitch}`,S=new Blob([w],{type:"text/plain"}),j=URL.createObjectURL(S),N=document.createElement("a");N.href=j,N.download="speech-content.txt",N.click(),URL.revokeObjectURL(j)},[f]),b=f?.canPlay;return u.jsx(lt,{type:"textToSpeech",data:e,inputs:0,outputs:0,providerOutput:{id:"tool-out",type:"tool",label:null},children:u.jsxs("div",{className:"tts-content",children:[u.jsx("div",{className:"tts-icon",children:""}),u.jsxs("div",{className:"tts-config",children:[u.jsx("div",{className:"provider-badge",children:a==="webSpeech"?"Web Speech API":a}),u.jsxs("div",{className:"voice-info",children:[u.jsx("span",{className:"voice-label",children:"Voice:"}),u.jsx("span",{className:"voice-name",children:i})]}),u.jsx("div",{className:"speed-info",children:o!==1&&u.jsxs("span",{children:[o,"x speed"]})})]}),e.autoPlay&&u.jsx("div",{className:"autoplay-badge",children:" Auto-play"}),b&&u.jsxs("div",{className:"tts-audio-controls",children:[h?u.jsx("button",{className:"tts-btn tts-btn-stop",onClick:g,children:" Stop"}):u.jsx("button",{className:"tts-btn tts-btn-play",onClick:m,children:" Play"}),u.jsx("button",{className:"tts-btn tts-btn-download",onClick:v,children:""})]})]})})}const ZD=T.memo(WD);function JD({data:e}){const t=e.model||"stable-diffusion";return u.jsx(lt,{type:"imageGeneration",data:e,inputs:0,outputs:0,providerOutput:{id:"tool-out",type:"tool",label:null},children:u.jsxs("div",{className:"imagegen-content",style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"10px"},children:[u.jsx("div",{className:"imagegen-icon",style:{fontSize:"24px",marginBottom:"8px"},children:""}),u.jsx("div",{className:"model-info",style:{fontSize:"12px",fontWeight:"500"},children:t})]})})}const KD=T.memo(JD);function e_({data:e}){return u.jsx(lt,{type:"pythonExecutor",data:e,inputs:0,outputs:0,providerOutput:{id:"tool-out",type:"tool",label:null},children:u.jsxs("div",{className:"python-content",style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"10px"},children:[u.jsx("div",{className:"python-icon",style:{fontSize:"24px",marginBottom:"8px"},children:""}),u.jsx("div",{className:"python-label",style:{fontSize:"12px",fontWeight:"500"},children:"Python (Pyodide)"})]})})}const t_=T.memo(e_);function n_({data:e,artifactId:t}){const[i,o]=T.useState(!1),[a,l]=T.useState(0),[c,f]=T.useState(0),h=T.useRef(null),p=T.useRef(null),m=e?.type==="speech"||e?.mimeType==="audio/speech";T.useEffect(()=>{const w=p.current;return()=>{w&&clearInterval(w),window.speechSynthesis&&window.speechSynthesis.cancel()}},[]);const g=()=>{if(m){if(i){window.speechSynthesis.cancel(),o(!1);return}const w=new SpeechSynthesisUtterance(e.text);w.rate=e.speed||1,w.pitch=e.pitch||1,w.onstart=()=>o(!0),w.onend=()=>{o(!1),l(100)};const j=(e.text?.split(/\s+/).length||0)/150*60;f(j),window.speechSynthesis.speak(w)}else h.current&&(i?h.current.pause():h.current.play())},v=()=>{if(h.current){const w=h.current.currentTime,S=h.current.duration;l(w/S*100),f(S)}},b=w=>{if(!w||isNaN(w))return"0:00";const S=Math.floor(w/60),j=Math.floor(w%60);return`${S}:${j.toString().padStart(2,"0")}`};return u.jsxs("div",{className:"audio-player",children:[u.jsxs("div",{className:"audio-player-header",children:[u.jsx("span",{className:"audio-icon",children:""}),u.jsx("span",{className:"audio-title",children:m?"Speech":"Audio"}),t&&u.jsxs("span",{className:"audio-id",children:[t.slice(0,12),"..."]})]}),u.jsxs("div",{className:"audio-waveform",children:[u.jsx("div",{className:"waveform-bars",children:Array.from({length:20}).map((w,S)=>u.jsx("div",{className:`waveform-bar ${i?"active":""}`,style:{height:`${20+Math.sin(S*.5)*15+S%3*5}px`,animationDelay:`${S*.05}s`}},S))}),u.jsx("div",{className:"progress-overlay",style:{width:`${a}%`}})]}),u.jsxs("div",{className:"audio-controls",children:[u.jsx("button",{className:`play-btn ${i?"playing":""}`,onClick:g,title:i?"Pause":"Play",children:i?"":""}),u.jsxs("div",{className:"time-display",children:[u.jsx("span",{className:"current-time",children:b(a/100*c)}),u.jsx("span",{className:"separator",children:"/"}),u.jsx("span",{className:"total-time",children:b(c)})]})]}),!m&&e?.url&&u.jsx("audio",{ref:h,src:e.url,onTimeUpdate:v,onPlay:()=>o(!0),onPause:()=>o(!1),onEnded:()=>{o(!1),l(100)},onLoadedMetadata:()=>f(h.current?.duration||0)}),m&&e?.text&&u.jsxs("div",{className:"speech-text",children:['"',e.text.length>100?e.text.slice(0,100)+"...":e.text,'"']})]})}const $v=T.memo(n_);function i_({data:e,artifactId:t}){const[i,o]=T.useState(!1),[a,l]=T.useState(!1),c=e?.url||e?.blobUrl,f=e?.prompt;return c?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"image-thumbnail",onClick:()=>o(!0),children:[u.jsxs("div",{className:"image-header",children:[u.jsx("span",{className:"image-icon",children:""}),u.jsx("span",{className:"image-title",children:"Generated Image"}),t&&u.jsxs("span",{className:"image-id",children:[t.slice(0,12),"..."]})]}),u.jsxs("div",{className:"thumbnail-container",children:[u.jsx("img",{src:c,alt:f||"Generated image",className:`thumbnail-img ${a?"loaded":""}`,onLoad:()=>l(!0)}),!a&&u.jsx("div",{className:"thumbnail-loader",children:u.jsx("div",{className:"loader-spinner"})}),u.jsxs("div",{className:"thumbnail-overlay",children:[u.jsx("span",{className:"zoom-icon",children:""}),u.jsx("span",{className:"zoom-text",children:"Click to enlarge"})]})]}),f&&u.jsx("div",{className:"image-prompt",children:f.length>60?f.slice(0,60)+"...":f})]}),i&&u.jsx("div",{className:"lightbox-modal",onClick:()=>o(!1),children:u.jsxs("div",{className:"lightbox-content",onClick:h=>h.stopPropagation(),children:[u.jsx("button",{className:"lightbox-close",onClick:()=>o(!1),title:"Close",children:""}),u.jsx("img",{src:c,alt:f||"Generated image",className:"lightbox-img"}),f&&u.jsxs("div",{className:"lightbox-prompt",children:[u.jsx("span",{className:"prompt-label",children:"Prompt:"}),u.jsx("span",{className:"prompt-text",children:f})]}),u.jsx("div",{className:"lightbox-actions",children:u.jsx("a",{href:c,download:`${t||"image"}.png`,className:"download-btn",onClick:h=>h.stopPropagation(),children:" Download"})})]})})]}):u.jsxs("div",{className:"image-placeholder",children:[u.jsx("span",{className:"placeholder-icon",children:""}),u.jsx("span",{className:"placeholder-text",children:"No image available"})]})}const Hv=T.memo(i_);function r_({data:e}){const t=()=>{switch(e.outputType){case"file":return" File";case"notification":return" Notify";case"artifact":return" Artifact";default:return" Console"}},i=T.useMemo(()=>{const o=e.lastOutput;if(!o)return null;if(typeof o=="object"&&o!==null)return o.type==="audio"||o.mimeType?.startsWith("audio/")?u.jsx($v,{data:o,artifactId:o.artifactId}):o.type==="image"||o.mimeType?.startsWith("image/")?u.jsx(Hv,{data:o,artifactId:o.artifactId}):u.jsxs("div",{className:"output-preview-json",children:[u.jsx("pre",{children:JSON.stringify(o,null,2).slice(0,200)}),JSON.stringify(o).length>200&&u.jsx("span",{className:"preview-more",children:"...more"})]});if(typeof o=="string"){const a=Dw(o);return a.isDataUri&&a.mimeType?.startsWith("audio/")?u.jsx($v,{data:{url:o}}):a.isDataUri&&a.mimeType?.startsWith("image/")?u.jsx(Hv,{data:{url:o}}):u.jsxs("div",{className:"output-preview-text",children:[o.slice(0,100),o.length>100&&"..."]})}return null},[e.lastOutput]);return u.jsx(lt,{type:"output",data:e,inputs:1,outputs:0,children:u.jsxs("div",{className:"output-node-body",children:[u.jsx("div",{className:"output-type-badge",children:t()}),i&&u.jsx("div",{className:"output-preview",children:i})]})})}const o_=T.memo(r_),Pv=e=>Symbol.iterator in e,qv=e=>"entries"in e,Uv=(e,t)=>{const i=e instanceof Map?e:new Map(e.entries()),o=t instanceof Map?t:new Map(t.entries());if(i.size!==o.size)return!1;for(const[a,l]of i)if(!o.has(a)||!Object.is(l,o.get(a)))return!1;return!0},a_=(e,t)=>{const i=e[Symbol.iterator](),o=t[Symbol.iterator]();let a=i.next(),l=o.next();for(;!a.done&&!l.done;){if(!Object.is(a.value,l.value))return!1;a=i.next(),l=o.next()}return!!a.done&&!!l.done};function s_(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null||Object.getPrototypeOf(e)!==Object.getPrototypeOf(t)?!1:Pv(e)&&Pv(t)?qv(e)&&qv(t)?Uv(e,t):a_(e,t):Uv({entries:()=>Object.entries(e)},{entries:()=>Object.entries(t)})}function l_(e){const t=Nn.useRef(void 0);return i=>{const o=e(i);return s_(t.current,o)?t.current:t.current=o}}function c_({sourceX:e,sourceY:t,sourcePosition:i,targetX:o,targetY:a,targetPosition:l,nodes:c,excludeNodeIds:f=[],gap:h=10}){const p=c.filter(C=>!(!C.measured?.width&&!C.width||f.includes(C.id))).map(C=>{const _=C.measured?.width||C.width||180,H=C.measured?.height||C.height||80,A=C.position.x,$=C.position.y;return{left:A,right:A+_,top:$,bottom:$+H,centerX:A+_/2,centerY:$+H/2}}),m=(C,_,H,A,$=h)=>{const V=Math.min(C,H),G=Math.max(C,H),z=Math.min(_,A),L=Math.max(_,A);return p.some(U=>G>U.left-$&&V<U.right+$&&L>U.top-$&&z<U.bottom+$)};let g=0;const v=(e+o)/2,b=(t+a)/2,w=i===ge.Left||i===ge.Right;let S=!1;if(w?S=m(e,t,v,t)||m(v,t,v,a)||m(v,a,o,a):S=m(e,t,e,b)||m(e,b,o,b)||m(o,b,o,a),S){let C=h;for(const _ of p)if(_.left<Math.max(e,o)+h&&_.right>Math.min(e,o)-h&&_.top<Math.max(t,a)+h&&_.bottom>Math.min(t,a)-h)if(w){const A=t-_.bottom,$=_.top-t,V=Math.min(Math.abs(A),Math.abs($));C=Math.max(C,V+h*2)}else{const A=e-_.right,$=_.left-e,V=Math.min(Math.abs(A),Math.abs($));C=Math.max(C,V+h*2)}g=Math.max(h,C)}const[j,N,k]=Pc({sourceX:e,sourceY:t,sourcePosition:i,targetX:o,targetY:a,targetPosition:l,borderRadius:8,offset:g});return[j,N,k]}function u_({id:e,source:t,target:i,sourceX:o,sourceY:a,targetX:l,targetY:c,sourcePosition:f,targetPosition:h,style:p={},markerEnd:m,sourceHandleId:g,targetHandleId:v}){const[b,w]=T.useState(!1),[S,j]=T.useState(!1),N=T.useRef(null),k=Ce(Q=>Q.nodes),{currentNodeId:C,edgeSnapshots:_,isRunning:H}=Xe(l_(Q=>({currentNodeId:Q.currentNodeId,edgeSnapshots:Q.edgeSnapshots,isRunning:Q.isRunning}))),A=H&&C===t,$=_[e]?.[_[e]?.length-1]||null,V=T.useMemo(()=>{const Q=v||g||"";return Q.includes("model")?"model":Q.includes("memory")?"memory":Q.includes("tool")?"tool":"workflow"},[g,v]),G=T.useMemo(()=>{const Q={...p};switch(V){case"model":return{...Q,stroke:"#6366f1",strokeDasharray:"5,5"};case"memory":return{...Q,stroke:"#10b981",strokeDasharray:"5,5"};case"tool":return{...Q,stroke:"#f59e0b",strokeDasharray:"5,5"};default:return Q}},[V,p]),z=T.useCallback(()=>{N.current&&(clearTimeout(N.current),N.current=null),w(!0),$&&j(!0)},[$]),L=T.useCallback(()=>{N.current=setTimeout(()=>{w(!1),j(!1)},400)},[]),U=T.useCallback(()=>{N.current&&(clearTimeout(N.current),N.current=null),w(!0)},[]),[Z,M,P]=c_({sourceX:o,sourceY:a,sourcePosition:f,targetX:l,targetY:c,targetPosition:h,nodes:k,excludeNodeIds:[t,i],gap:50}),O=T.useCallback(Q=>{Q.stopPropagation(),Q.preventDefault(),window.dispatchEvent(new CustomEvent("deleteEdge",{detail:{edgeId:e}}))},[e]),q=T.useCallback(Q=>{Q.stopPropagation(),Q.preventDefault(),window.dispatchEvent(new CustomEvent("addNodeOnEdge",{detail:{edgeId:e,position:{x:M,y:P}}}))},[e,M,P]),Y=Q=>Q?new Date(Q).toLocaleTimeString():"";return u.jsxs(u.Fragment,{children:[u.jsx("path",{d:Z,fill:"none",strokeWidth:30,stroke:"transparent",style:{cursor:"pointer"},onMouseEnter:z,onMouseLeave:L}),u.jsx(Os,{path:Z,markerEnd:m,style:{...G,strokeWidth:b?3:A?2.5:2},className:`animated-edge ${b?"hovered":""} edge-${V} ${$?"has-data":""} ${A?"edge-active":""}`}),u.jsx("path",{className:`edge-flow-animation ${A?"flowing":""}`,d:Z,fill:"none",strokeWidth:2,style:{pointerEvents:"none"}}),u.jsxs(zM,{children:[u.jsx("div",{className:`edge-action-container ${b?"visible":""}`,style:{position:"absolute",transform:`translate(-50%, -50%) translate(${M}px, ${P}px)`,pointerEvents:b?"all":"none"},onMouseEnter:U,onMouseLeave:L,children:u.jsxs("div",{className:"edge-action-buttons",children:[u.jsx("button",{className:"edge-btn edge-btn-add",onClick:q,title:"Insert node here",children:"+"}),u.jsx("button",{className:"edge-btn edge-btn-delete",onClick:O,title:"Delete connection",children:""})]})}),S&&$&&u.jsxs("div",{className:"ghost-data-tooltip",style:{position:"absolute",transform:`translate(-50%, -120%) translate(${M}px, ${P}px)`,pointerEvents:"none"},children:[u.jsxs("div",{className:"ghost-header",children:[u.jsx("span",{className:"ghost-icon",children:""}),u.jsx("span",{className:"ghost-title",children:"Last Data"}),u.jsx("span",{className:"ghost-time",children:Y($.timestamp)})]}),u.jsxs("pre",{className:"ghost-preview",children:[$.preview,$.preview?.length>=500&&"..."]})]})]})]})}const d_=T.memo(u_);class f_{constructor(){this.isRunning=!1,this.isPaused=!1,this.debugMode=!1,this.stepResolve=null,this.abortController=null,this.executedNodes=new Set,this.pendingMerge=new Map}async execute(t,i,o,a={},l={}){const{executionStore:c}=o,{debug:f=!1}=l;if(this.isRunning)throw new Error("Workflow is already running");this.isRunning=!0,this.isPaused=!1,this.debugMode=f,this.abortController=new AbortController,this.executedNodes=new Set,this.nodes=t,this.edges=i,this.nodeMap=new Map(t.map(h=>[h.id,h])),this.executionStore=c,c.startExecution();try{const h=x2(t);if(h.length===0)throw c.addLog({type:"error",message:"No trigger node found. Add a trigger to start the workflow."}),new Error("No trigger node found");c.addLog({type:"info",message:`Starting workflow${f?" (debug mode)":""} with ${h.length} trigger(s)`});const p=[];for(const m of h){const g=await this.executeFromNode(m.id,a);p.push(g)}return c.stopExecution(),c.addLog({type:"success",message:"Workflow completed successfully"}),this.isRunning=!1,{success:!0,results:p}}catch(h){return c.addLog({type:"error",message:`Workflow failed: ${h.message}`}),c.stopExecution(),this.isRunning=!1,{success:!1,error:h.message}}}async executeFromNode(t,i,o=new Set){const a=`${t}-${JSON.stringify(i).slice(0,50)}`;if(o.has(a))return{success:!0,output:i,skipped:!0};if(o.add(a),this.abortController?.signal.aborted)throw new Error("Workflow was stopped");await this.waitIfPaused(),this.debugMode&&await this.waitForStep();const l=this.nodeMap.get(t);if(!l)return{success:!1,error:`Node ${t} not found`};if(l.type==="merge"&&l.data?.mode!=="first"){const S=this.edges.filter(j=>j.target===t).length;if(S>1){this.pendingMerge.has(t)||this.pendingMerge.set(t,{expected:S,results:[]});const j=this.pendingMerge.get(t);if(j.results.push(i),j.results.length<j.expected)return this.executionStore.addLog({type:"info",nodeId:t,nodeName:l.data?.label||"Merge",message:` Waiting for ${j.expected-j.results.length} more branch(es)`}),{success:!0,output:i,waiting:!0};i=j.results,this.pendingMerge.delete(t),this.executionStore.addLog({type:"info",nodeId:t,nodeName:l.data?.label||"Merge",message:` All ${S} branches arrived - merging`})}}if(this.executionStore.setCurrentNode(t),this.executionStore.addLog({type:"node",nodeId:t,nodeName:l.data?.label||l.type,message:`Executing ${l.data?.label||l.type}`}),l.type==="aiAgent"){const w=this.getConnectedResources(t);if(w.model&&(l.data={...l.data,connectedModel:w.model},this.executionStore.addLog({type:"info",nodeId:t,nodeName:l.data?.label||"AI Agent",message:`Using connected model: ${w.model.modelName||w.model.modelId||"WebLLM"}`})),w.memory&&(l.data={...l.data,connectedMemory:w.memory},this.executionStore.addLog({type:"info",nodeId:t,nodeName:l.data?.label||"AI Agent",message:`Using connected memory: ${w.memory.namespace}`})),l.data?.enableToolCalling!==!1){const j=this.getConnectedTools(t),N=[...w.tools,...j];N.length>0&&(l.data={...l.data,tools:N},this.executionStore.addLog({type:"info",nodeId:t,nodeName:l.data?.label||"AI Agent",message:`Detected ${N.length} tool(s): ${N.map(k=>k.name).join(", ")}`}))}const S=[];w.model?.nodeId&&S.push(w.model.nodeId),w.memory?.nodeId&&S.push(w.memory.nodeId),w.tools.forEach(j=>S.push(j.nodeId)),S.length>0&&this.executionStore.setActiveSupportingNodes&&this.executionStore.setActiveSupportingNodes(S)}const c={nodeId:t,nodes:this.nodes,edges:this.edges,executionStore:this.executionStore,addLog:w=>this.executionStore.addLog({...w,nodeId:t})},f=l.data?.retries||0,h=l.data?.retryDelay||1e3,p=l.type==="aiAgent"||l.type==="textToSpeech"||l.type==="imageGeneration",m=l.data?.timeout||(p?3e5:6e4);let g;const v=Date.now();for(let w=0;w<=f;w++){if(w>0){const S=h*Math.pow(2,w-1);this.executionStore.addLog({type:"warning",nodeId:t,nodeName:l.data?.label||l.type,message:`Retrying (attempt ${w+1}/${f+1}) after ${S}ms...`}),await new Promise(j=>setTimeout(j,S))}try{if(g=await this.executeWithTimeout(l,i,c,m),!g.success)throw new Error(g.error||"Node execution failed");break}catch(S){if(w===f){const j=Date.now()-v;throw this.executionStore.setNodeResult(t,{success:!1,error:S.message,executionTime:j,attempts:w+1}),this.executionStore.addLog({type:"error",nodeId:t,nodeName:l.data?.label||l.type,message:`Node failed after ${w+1} attempt(s): ${S.message}`,data:{error:S.message,executionTime:j,canRetry:!0,nodeId:t}}),new Error(`Node ${l.data?.label||t} failed: ${S.message}`)}}}const b=Date.now()-v;return this.executionStore.setNodeResult(t,{...g,executionTime:b}),this.executedNodes.add(t),this.executionStore.addLog({type:"success",nodeId:t,nodeName:l.data?.label||l.type,message:`Completed in ${b}ms`,data:g.output?{preview:this.getOutputPreview(g.output),executionTime:b}:void 0}),await new Promise(w=>setTimeout(w,50)),g.loopData?await this.executeLoop(l,g,o):g.outputIndex!==void 0?await this.executeBranch(l,g,o):await this.executeNextNodes(t,g.output,o)}async executeLoop(t,i,o){const{items:a,index:l}=i.loopData,c=t.id,f=[];this.executionStore.addLog({type:"info",nodeId:c,nodeName:t.data?.label||"Loop",message:`Starting loop with ${a.length} items`});const h=this.edges.find(m=>m.source===c&&m.sourceHandle==="output-0");if(h)for(let m=l;m<a.length;m++){if(this.abortController?.signal.aborted)throw new Error("Workflow was stopped");const v={item:a[m],index:m,total:a.length,isFirst:m===0,isLast:m===a.length-1,...i.output};this.executionStore.addLog({type:"info",nodeId:c,message:`Loop iteration ${m+1}/${a.length}`});const b=await this.executeFromNode(h.target,v,new Set);b.success&&f.push(b.output)}this.executionStore.addLog({type:"success",nodeId:c,message:`Loop completed (${a.length} iterations)`});const p=this.edges.find(m=>m.source===c&&m.sourceHandle==="output-1");if(p){const m={...i.output,loopResults:f,itemCount:a.length};return await this.executeFromNode(p.target,m,o)}return{success:!0,output:f}}async executeBranch(t,i,o){const{output:a,outputIndex:l}=i,c=t.id,f=this.edges.find(h=>h.source===c&&h.sourceHandle===`output-${l}`);return f?(this.executionStore.addLog({type:"info",nodeId:c,message:`Taking branch: output ${l+1}`}),await this.executeFromNode(f.target,a,o)):(this.executionStore.addLog({type:"info",nodeId:c,message:`Branch output ${l+1} has no connection, ending path`}),{success:!0,output:a})}async executeNextNodes(t,i,o){const a=this.edges.filter(c=>c.source===t);if(a.length===0)return{success:!0,output:i};for(const c of a)this.executionStore?.addEdgeSnapshot&&this.executionStore.addEdgeSnapshot(c.id,i);const l=await Promise.all(a.map(c=>this.executeFromNode(c.target,i,o)));return l.length===1?l[0]:{success:!0,outputs:l,parallel:!0}}async waitIfPaused(){for(;this.isPaused&&!this.abortController?.signal.aborted;)await new Promise(t=>setTimeout(t,100))}async waitForStep(){return new Promise(t=>{this.stepResolve=t,this.executionStore.addLog({type:"debug",message:"Waiting for step (press Step to continue)..."})})}step(){if(this.stepResolve){const t=this.stepResolve;this.stepResolve=null,t()}}stop(){this.abortController&&this.abortController.abort(),this.stepResolve&&(this.stepResolve(),this.stepResolve=null),this.isRunning=!1,this.isPaused=!1,this.debugMode=!1}pause(){this.isPaused=!0,this.executionStore?.addLog({type:"info",message:"Execution paused"})}resume(){this.isPaused=!1,this.executionStore?.addLog({type:"info",message:"Execution resumed"})}setDebugMode(t){this.debugMode=t}async executeWithTimeout(t,i,o,a){let l,c;const f=new Promise((p,m)=>{c=m}),h=()=>{l&&clearTimeout(l),l=setTimeout(()=>{c(new Error(`Timeout after ${a}ms`))},a)};if(h(),this.abortController?.signal){if(this.abortController.signal.aborted)return Promise.reject(new Error("Workflow was stopped"));this.abortController.signal.addEventListener("abort",()=>{c(new Error("Workflow was stopped"))})}o.heartbeat=()=>{l&&h()};try{return await Promise.race([pp(t,i,o),f,new Promise((m,g)=>{this.abortController?.signal&&this.abortController.signal.addEventListener("abort",()=>{g(new Error("Workflow was stopped"))})})])}finally{l&&clearTimeout(l),l=null}}getConnectedResources(t){const i=this.edges.filter(a=>a.target===t&&["model-slot","memory-slot","tool-slot"].includes(a.targetHandle)),o={model:null,memory:null,tools:[]};for(const a of i){const l=this.nodeMap.get(a.source);if(l)switch(a.targetHandle){case"model-slot":o.model={nodeId:l.id,modelId:l.data?.modelId,modelName:l.data?.modelName,provider:l.data?.provider||"webllm",temperature:l.data?.temperature,maxTokens:l.data?.maxTokens};break;case"memory-slot":o.memory={nodeId:l.id,namespace:l.data?.namespace||"default",mode:l.data?.mode||"query",topK:l.data?.topK||5};break;case"tool-slot":o.tools.push({nodeId:l.id,name:l.data?.label||l.type,type:l.type,description:this.getToolDescription(l.type)});break}}return o}getConnectedTools(t){const i=this.edges.filter(a=>a.source===t),o=[];for(const a of i){const l=this.nodeMap.get(a.target);l&&this.isToolNode(l.type)&&o.push({nodeId:l.id,name:l.data?.label||l.type,type:l.type,description:this.getToolDescription(l.type),inputSchema:{input:"any"}})}return o}isToolNode(t){return["codeExecutor","httpRequest","setVariable","ifElse","loopEach","switchNode","delay","merge"].includes(t)}getToolDescription(t){return{codeExecutor:"Execute JavaScript code. Pass data to process and receive the result.",httpRequest:"Make HTTP requests to APIs. Returns the response data.",setVariable:"Store a value in workflow memory for later use.",ifElse:"Evaluate a condition and return the result.",loopEach:"Iterate through an array of items.",switchNode:"Route based on a value matching specific cases.",delay:"Wait for a specified duration.",merge:"Combine multiple inputs into one output."}[t]||`Execute ${t} node.`}getOutputPreview(t){if(typeof t=="string")return t.slice(0,100)+(t.length>100?"...":"");if(typeof t=="object"){const i=JSON.stringify(t);return i.slice(0,100)+(i.length>100?"...":"")}return String(t)}}const Ro=new f_;function h_(){const e=Ce(v=>v.nodes),t=Ce(v=>v.edges),i=Xe(v=>v.isRunning),o=Xe(v=>v.isPaused),a=Xe(v=>v.isDebugMode),l=Xe(v=>v.setDebugMode),c=Xe(v=>v.setPaused),f=T.useCallback(async()=>{if(i)return;const v=Xe.getState();await Ro.execute(e,t,{executionStore:v},{},{debug:a})},[e,t,i,a]),h=T.useCallback(()=>Ro.stop(),[]),p=T.useCallback(()=>{Ro.pause(),c(!0)},[c]),m=T.useCallback(()=>{Ro.resume(),c(!1)},[c]),g=T.useCallback(()=>Ro.step(),[]);return u.jsxs("div",{className:"execution-controls-panel",children:[u.jsx("div",{className:"exec-btn-group",children:i?u.jsxs(u.Fragment,{children:[u.jsx("button",{className:"exec-btn btn-stop",onClick:h,title:"Stop Execution",children:" Stop"}),o?u.jsx("button",{className:"exec-btn btn-resume",onClick:m,title:"Resume",children:" Resume"}):u.jsx("button",{className:"exec-btn btn-pause",onClick:p,title:"Pause",children:" Pause"}),a&&u.jsx("button",{className:"exec-btn btn-step",onClick:g,title:"Step Next",children:" Step"})]}):u.jsx("button",{className:"exec-btn btn-run",onClick:f,disabled:e.length===0,title:a?"Start Debug Run":"Start Workflow",children:a?" Debug Run":" Run"})}),u.jsx("div",{className:"separator"}),u.jsx("button",{className:`exec-btn btn-toggle-debug ${a?"active":""}`,onClick:()=>l(!a),title:"Toggle Debug Mode",children:a?" Debug On":" Debug Off"})]})}function p_({isOpen:e,onClose:t}){const[i,o]=T.useState("all"),a=Ge(k=>k.availableModels),l=Ge(k=>k.currentModelId),c=Ge(k=>k.status),f=Ge(k=>k.loadProgress),h=Ge(k=>k.downloadedModels),p=Ge(k=>k.downloadProgress),m=Ge(k=>k.setDownloadProgress),g=k=>{m(k,5,"downloading"),window.dispatchEvent(new CustomEvent("downloadModel",{detail:{modelId:k}}))},v=async k=>{window.dispatchEvent(new CustomEvent("loadModel",{detail:{modelId:k}})),t()},b=async k=>{try{const C=await caches.keys();for(const A of C)if(A.includes("webllm")||A.includes("mlc")){const $=await caches.open(A),V=await $.keys();for(const G of V)G.url.includes(k)&&await $.delete(G)}const H=Ge.getState().downloadedModels.filter(A=>A!==k);Ge.setState({downloadedModels:H}),console.log(`Removed model: ${k}`)}catch(C){console.error("Failed to remove model:",C)}},w=async()=>{if(confirm("This will remove ALL downloaded models. Continue?"))try{const k=await caches.keys();for(const _ of k)(_.includes("webllm")||_.includes("mlc")||_.includes("huggingface"))&&await caches.delete(_);const C=await indexedDB.databases();for(const _ of C)(_.name?.includes("webllm")||_.name?.includes("mlc"))&&indexedDB.deleteDatabase(_.name);Ge.setState({downloadedModels:[],downloadProgress:{},currentModelId:null,status:"idle"}),localStorage.removeItem("selectedModel"),console.log("All model caches cleared"),alert("All models removed. Refresh the page to start fresh.")}catch(k){console.error("Failed to clear cache:",k),alert("Failed to clear some caches. Try clearing browser data manually.")}},S=[{id:"all",label:"All"},{id:"recommended",label:" Recommended"},{id:"downloaded",label:" Downloaded"},{id:"gemma",label:" Gemma 3"},{id:"qwen3",label:" Qwen 3"},{id:"qwen",label:"Qwen 2.5"},{id:"medium",label:"Medium"},{id:"tiny",label:"Tiny"}],j=a.filter(k=>i==="all"?!0:i==="downloaded"?h.includes(k.id):k.category===i),N=k=>l===k&&c==="ready"?"active":h.includes(k)?"downloaded":p[k]?.status==="downloading"?"downloading":"available";return e?u.jsx("div",{className:"model-switcher-overlay",onClick:t,children:u.jsxs("div",{className:"model-switcher",onClick:k=>k.stopPropagation(),children:[u.jsxs("header",{className:"ms-header",children:[u.jsx("h2",{children:" Model Manager"}),u.jsx("button",{className:"btn-close",onClick:t,children:""})]}),u.jsx("div",{className:"ms-categories",children:S.map(k=>u.jsxs("button",{className:`cat-btn ${i===k.id?"active":""}`,onClick:()=>o(k.id),children:[k.label,k.id==="downloaded"&&h.length>0&&u.jsx("span",{className:"cat-badge",children:h.length})]},k.id))}),u.jsxs("div",{className:"ms-content",children:[l&&u.jsxs("div",{className:"current-model-banner",children:[u.jsx("span",{className:"banner-icon",children:""}),u.jsxs("span",{className:"banner-text",children:["Active:"," ",a.find(k=>k.id===l)?.name]}),u.jsx("span",{className:`banner-status ${c}`,children:c==="ready"?" Ready":c==="loading"?` ${Math.round(f*100)}%`:""})]}),u.jsx("div",{className:"models-grid",children:j.map(k=>{const C=N(k.id),_=p[k.id]?.progress||0;return u.jsxs("div",{className:`model-card ${C}`,children:[u.jsxs("div",{className:"model-card-header",children:[u.jsx("span",{className:"model-name",children:k.name}),u.jsx("span",{className:"model-size",children:k.size})]}),u.jsx("p",{className:"model-desc",children:k.description}),C==="downloading"&&u.jsxs("div",{className:"download-progress",children:[u.jsx("div",{className:"progress-bar",children:u.jsx("div",{className:"progress-fill",style:{width:`${_}%`}})}),u.jsxs("span",{className:"progress-text",children:[_,"%"]})]}),u.jsxs("div",{className:"model-actions",children:[(()=>{const H=navigator.deviceMemory||4,A=Ge.getState().getVRAMStatus(k.id,H);return A.status==="tight"||A.status==="insufficient"?u.jsx("div",{className:"vram-warning",title:A.message,style:{fontSize:"0.75rem",color:A.color,marginBottom:"8px",display:"flex",alignItems:"center",gap:"4px"},children:u.jsxs("span",{children:[" ",A.message]})}):null})(),C==="active"&&u.jsx("span",{className:"status-badge active",children:" Active"}),C==="downloaded"&&u.jsx("button",{className:"btn-load",onClick:()=>v(k.id),children:" Load"}),C==="available"&&u.jsx("button",{className:"btn-download",onClick:()=>g(k.id),children:" Download"}),C==="downloading"&&u.jsx("span",{className:"status-badge downloading",children:"Downloading..."}),(C==="downloaded"||C==="active")&&u.jsx("button",{className:"btn-remove",onClick:H=>{H.stopPropagation(),b(k.id)},title:"Remove from cache",children:""})]})]},k.id)})}),j.length===0&&u.jsx("div",{className:"empty-state",children:u.jsx("p",{children:"No models in this category"})})]}),u.jsxs("footer",{className:"ms-footer",children:[u.jsx("p",{className:"hint",children:" Models are cached locally after download. Larger models = better quality but slower."}),u.jsx("button",{className:"btn-clear-cache",onClick:w,children:" Clear All Cache"})]})]})}):null}const m_=T.memo(p_);function g_({isOpen:e,onClose:t}){const[i,o]=T.useState({localRequests:0,externalRequests:0,modelsLoaded:[],storageUsed:0,lastActivity:null});T.useEffect(()=>{navigator.storage?.estimate&&navigator.storage.estimate().then(({usage:p,quota:m})=>{o(g=>({...g,storageUsed:p||0,storageQuota:m||0}))});const c=window.fetch;let f=0,h=0;return window.fetch=function(...p){const m=p[0]?.toString()||"";return m.startsWith("/")||m.includes("localhost")?f++:m.startsWith("http")&&h++,o(g=>({...g,localRequests:f,externalRequests:h,lastActivity:new Date().toISOString()})),c.apply(this,p)},()=>{window.fetch=c}},[]);const a=c=>{if(!c)return"0 B";const f=1024,h=["B","KB","MB","GB"],p=Math.floor(Math.log(c)/Math.log(f));return`${(c/Math.pow(f,p)).toFixed(1)} ${h[p]}`},l=i.externalRequests===0?100:Math.max(0,100-i.externalRequests/(i.localRequests+1)*100);return e?u.jsx("div",{className:"privacy-monitor-overlay",onClick:t,children:u.jsxs("div",{className:"privacy-monitor",onClick:c=>c.stopPropagation(),children:[u.jsxs("header",{className:"pm-header",children:[u.jsx("h2",{children:" Privacy Monitor"}),u.jsx("button",{className:"btn-close",onClick:t,children:""})]}),u.jsxs("div",{className:"pm-content",children:[u.jsxs("div",{className:"privacy-score-section",children:[u.jsxs("div",{className:`privacy-score ${l===100?"perfect":l>80?"good":"warning"}`,children:[u.jsxs("span",{className:"score-value",children:[Math.round(l),"%"]}),u.jsx("span",{className:"score-label",children:"Local Processing"})]}),l===100&&u.jsx("div",{className:"privacy-badge",children:" Zero Cloud Leakage"})]}),u.jsxs("div",{className:"pm-stats-grid",children:[u.jsxs("div",{className:"pm-stat",children:[u.jsx("span",{className:"stat-icon",children:""}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-value",children:i.localRequests}),u.jsx("span",{className:"stat-label",children:"Local Requests"})]})]}),u.jsxs("div",{className:"pm-stat",children:[u.jsx("span",{className:"stat-icon",children:""}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-value",children:i.externalRequests}),u.jsx("span",{className:"stat-label",children:"External Calls"})]})]}),u.jsxs("div",{className:"pm-stat",children:[u.jsx("span",{className:"stat-icon",children:""}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-value",children:a(i.storageUsed)}),u.jsx("span",{className:"stat-label",children:"Local Storage"})]})]}),u.jsxs("div",{className:"pm-stat",children:[u.jsx("span",{className:"stat-icon",children:""}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-value",children:"WebLLM"}),u.jsx("span",{className:"stat-label",children:"AI Engine"})]})]})]}),u.jsxs("div",{className:"pm-features",children:[u.jsx("h3",{children:"Privacy Features"}),u.jsxs("ul",{children:[u.jsx("li",{children:" All AI runs locally in your browser"}),u.jsx("li",{children:" No data sent to external APIs"}),u.jsx("li",{children:" Workflows stored in IndexedDB"}),u.jsx("li",{children:" No telemetry or tracking"}),u.jsx("li",{children:" Open source & auditable"})]})]}),u.jsxs("div",{className:"pm-storage",children:[u.jsx("h3",{children:"Local Data"}),u.jsx("div",{className:"storage-bar",children:u.jsx("div",{className:"storage-used",style:{width:`${Math.min(100,i.storageUsed/(i.storageQuota||1)*100)}%`}})}),u.jsxs("span",{className:"storage-text",children:[a(i.storageUsed)," /"," ",a(i.storageQuota)]})]})]})]})}):null}const y_=T.memo(g_);function x_(){const[e,t]=T.useState(!1),[i,o]=T.useState(!1),a=T.useCallback(()=>{window.dispatchEvent(new CustomEvent("toggleOverseer"))},[]);return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"ai-controls-panel",children:[u.jsxs("button",{className:"ai-btn overseer-btn",onClick:a,title:"Toggle Overseer Agent",children:[" ",u.jsx("span",{children:"Chat with Overseer"})]}),u.jsx("div",{className:"divider"}),u.jsx("button",{className:`ai-btn ${i?"active":""}`,onClick:()=>o(!0),title:"Switch Model",children:""}),u.jsx("button",{className:`ai-btn ${e?"active":""}`,onClick:()=>t(!0),title:"Privacy Monitor",children:""})]}),e&&Dh.createPortal(u.jsx(y_,{onClose:()=>t(!1),isOpen:!0}),document.body),i&&Dh.createPortal(u.jsx(m_,{onClose:()=>o(!1),isOpen:!0}),document.body)]})}function v_({isOpen:e,onClose:t,onSelectNode:i,insertPosition:o}){const[a,l]=T.useState(""),[c,f]=T.useState(0),h=T.useRef(null),p=T.useRef(null),m=T.useMemo(()=>Object.values(Ei).map(j=>({...j,categoryName:Hr[j.category]?.name||j.category,categoryColor:Hr[j.category]?.color||"#666"})),[]),g=T.useMemo(()=>{if(!a.trim())return m;const j=a.toLowerCase();return m.filter(N=>N.name.toLowerCase().includes(j)||N.description?.toLowerCase().includes(j)||N.categoryName.toLowerCase().includes(j))},[m,a]),v=T.useMemo(()=>{const j={};return g.forEach(N=>{j[N.category]||(j[N.category]={name:N.categoryName,color:N.categoryColor,nodes:[]}),j[N.category].nodes.push(N)}),j},[g]),b=T.useMemo(()=>{const j=[];return Object.entries(v).forEach(([,N])=>{N.nodes.forEach(k=>j.push(k))}),j},[v]);T.useEffect(()=>{e&&h.current&&(h.current.focus(),l(""),f(0))},[e]),T.useEffect(()=>{if(p.current&&b.length>0){const j=p.current.querySelector(".node-item.selected");j&&j.scrollIntoView({block:"nearest"})}},[c,b.length]);const w=T.useCallback(j=>{switch(j.key){case"ArrowDown":j.preventDefault(),f(N=>Math.min(N+1,b.length-1));break;case"ArrowUp":j.preventDefault(),f(N=>Math.max(N-1,0));break;case"Enter":j.preventDefault(),b[c]&&(i(b[c].type,o),t());break;case"Escape":t();break}},[b,c,i,o,t]),S=T.useCallback(j=>{i(j,o),t()},[i,o,t]);return e?u.jsx("div",{className:"command-palette-overlay",onClick:t,children:u.jsxs("div",{className:"command-palette",onClick:j=>j.stopPropagation(),onKeyDown:w,children:[u.jsxs("div",{className:"palette-header",children:[u.jsx("span",{className:"search-icon",children:""}),u.jsx("input",{ref:h,type:"text",className:"palette-search",placeholder:"Search nodes... (Esc to close)",value:a,onChange:j=>{l(j.target.value),f(0)}}),u.jsx("span",{className:"shortcut-hint",children:"K"})]}),u.jsxs("div",{className:"palette-content",ref:p,children:[Object.entries(v).map(([j,N])=>u.jsxs("div",{className:"node-category",children:[u.jsx("div",{className:"category-header",style:{"--cat-color":N.color},children:N.name}),N.nodes.map(k=>{const C=b.findIndex(_=>_.type===k.type);return u.jsxs("div",{className:`node-item ${C===c?"selected":""}`,onClick:()=>S(k.type),onMouseEnter:()=>f(C),children:[u.jsx("span",{className:"node-icon",children:k.icon}),u.jsxs("div",{className:"node-info",children:[u.jsx("span",{className:"node-name",children:k.name}),u.jsx("span",{className:"node-desc",children:k.description})]})]},k.type)})]},j)),b.length===0&&u.jsxs("div",{className:"no-results",children:['No nodes match "',a,'"']})]})]})}):null}const b_=T.memo(v_);function w_({onClose:e}){const t=Xe(h=>h.logs),i=Xe(h=>h.nodeResults),[o,a]=T.useState("timeline"),l=T.useMemo(()=>{const h={},p={total:0,byNode:{}};let m=0,g=0;Object.entries(i).forEach(([b,w])=>{m++,w.executionTime&&(g+=w.executionTime,h[b]||(h[b]={times:[],avg:0,max:0,min:1/0}),h[b].times.push(w.executionTime),h[b].max=Math.max(h[b].max,w.executionTime),h[b].min=Math.min(h[b].min,w.executionTime),h[b].avg=h[b].times.reduce((S,j)=>S+j,0)/h[b].times.length),(w.error||w.success===!1)&&(p.total++,p.byNode[b]=(p.byNode[b]||0)+1)});const v=Object.entries(h).map(([b,w])=>({nodeId:b,avg:w.avg,max:w.max})).sort((b,w)=>w.avg-b.avg).slice(0,5);return{totalExecutions:m,totalTime:g,avgTime:m>0?g/m:0,errorCount:p,slowestNodes:v,nodeTimings:h}},[i]),c=T.useMemo(()=>t.slice(-50).reverse(),[t]),f=h=>h<1e3?`${Math.round(h)}ms`:`${(h/1e3).toFixed(2)}s`;return u.jsx("div",{className:"analytics-overlay",onClick:e,children:u.jsxs("div",{className:"analytics-panel",onClick:h=>h.stopPropagation(),children:[u.jsxs("div",{className:"analytics-header",children:[u.jsx("h2",{children:" Execution Analytics"}),u.jsx("button",{className:"close-btn",onClick:e,children:""})]}),u.jsxs("div",{className:"analytics-tabs",children:[u.jsx("button",{className:`tab ${o==="timeline"?"active":""}`,onClick:()=>a("timeline"),children:"Timeline"}),u.jsx("button",{className:`tab ${o==="performance"?"active":""}`,onClick:()=>a("performance"),children:"Performance"}),u.jsxs("button",{className:`tab ${o==="errors"?"active":""}`,onClick:()=>a("errors"),children:["Errors"," ",l.errorCount.total>0&&u.jsx("span",{className:"error-badge",children:l.errorCount.total})]})]}),u.jsxs("div",{className:"analytics-body",children:[u.jsxs("div",{className:"stats-grid",children:[u.jsxs("div",{className:"stat-card",children:[u.jsx("span",{className:"stat-value",children:l.totalExecutions}),u.jsx("span",{className:"stat-label",children:"Executions"})]}),u.jsxs("div",{className:"stat-card",children:[u.jsx("span",{className:"stat-value",children:f(l.avgTime)}),u.jsx("span",{className:"stat-label",children:"Avg Time"})]}),u.jsxs("div",{className:"stat-card",children:[u.jsx("span",{className:"stat-value",children:f(l.totalTime)}),u.jsx("span",{className:"stat-label",children:"Total Time"})]}),u.jsxs("div",{className:"stat-card error",children:[u.jsx("span",{className:"stat-value",children:l.errorCount.total}),u.jsx("span",{className:"stat-label",children:"Errors"})]})]}),o==="timeline"&&u.jsxs("div",{className:"timeline-section",children:[u.jsx("h3",{children:"Recent Activity"}),u.jsx("div",{className:"timeline-list",children:c.length>0?c.map((h,p)=>u.jsxs("div",{className:`timeline-item ${h.type}`,children:[u.jsx("span",{className:"timeline-icon",children:h.type==="success"?"":h.type==="error"?"":h.type==="warning"?"":""}),u.jsx("span",{className:"timeline-node",children:h.nodeName}),u.jsx("span",{className:"timeline-msg",children:h.message})]},p)):u.jsx("div",{className:"empty-state",children:"No execution history yet"})})]}),o==="performance"&&u.jsxs("div",{className:"performance-section",children:[u.jsx("h3",{children:"Slowest Nodes"}),u.jsx("div",{className:"performance-list",children:l.slowestNodes.length>0?l.slowestNodes.map((h,p)=>u.jsxs("div",{className:"performance-item",children:[u.jsxs("span",{className:"rank",children:["#",p+1]}),u.jsx("span",{className:"node-id",children:h.nodeId.split("-")[0]}),u.jsx("div",{className:"timing-bar",style:{width:`${Math.min(h.avg/(l.slowestNodes[0]?.avg||1)*100,100)}%`}}),u.jsx("span",{className:"timing-value",children:f(h.avg)})]},h.nodeId)):u.jsx("div",{className:"empty-state",children:"No performance data yet"})})]}),o==="errors"&&u.jsxs("div",{className:"errors-section",children:[u.jsx("h3",{children:"Error Log"}),u.jsx("div",{className:"errors-list",children:l.errorCount.total>0?Object.entries(l.errorCount.byNode).map(([h,p])=>u.jsxs("div",{className:"error-item",children:[u.jsxs("span",{className:"error-count",children:[p,"x"]}),u.jsx("span",{className:"error-node",children:h.split("-")[0]})]},h)):u.jsx("div",{className:"empty-state",children:" No errors!"})})]})]})]})})}const S_=T.memo(w_),N_={manualTrigger:J2,scheduleTrigger:eD,webhookTrigger:nD,errorTrigger:rD,browserEventTrigger:sD,httpRequest:yD,codeExecutor:cD,setVariable:dD,fileSystem:mD,localStorage:hD,pythonExecutor:t_,ifElse:vD,loop:wD,switchNode:ND,merge:jD,aiAgent:ID,chatModel:zD,vectorMemory:$D,waitForApproval:PD,subWorkflow:UD,textToSpeech:ZD,imageGeneration:KD,semanticRouter:FD,evaluator:YD,swarm:QD,output:o_,groupNode:kD},E_={animated:d_};function j_(){const e=T.useRef(null),{screenToFlowPosition:t,fitView:i,zoomIn:o,zoomOut:a}=su(),[l,c]=T.useState(null),[f,h]=T.useState(null),[p,m]=T.useState(!0),[g,v]=T.useState(!1),[b,w]=T.useState(!1),{zoom:S}=$M(),j=Ce(te=>te.nodes),N=Ce(te=>te.edges),k=Ce(te=>te.onNodesChange),C=Ce(te=>te.onEdgesChange),_=Ce(te=>te.onConnect),H=Ce(te=>te.addNode),A=Ce(te=>te.deleteNode),$=Ce(te=>te.setSelectedNode),V=Ce(te=>te.selectedNodeId),G=Ce(te=>te.getWorkflowData),z=Qo(),L=Xe(te=>te.currentNodeId),U=Xe(te=>te.isRunning),Z=T.useCallback(te=>y2(te,j,N),[j,N]),M=T.useCallback(()=>{c(null)},[]),P=T.useCallback(()=>{$(null),c(null)},[$]),O=T.useCallback((te,re)=>{te.preventDefault(),$(re.id),c({x:te.clientX,y:te.clientY,type:"node",nodeId:re.id})},[$]),q=T.useCallback(te=>{te.preventDefault();const re=t({x:te.clientX,y:te.clientY});c({x:te.clientX,y:te.clientY,type:"pane",position:re})},[t]),[Y,Q]=T.useState(null);T.useEffect(()=>{const te=de=>{const{edgeId:ae}=de.detail;N.find(xe=>xe.id===ae)&&(Ce.getState().onEdgesChange([{id:ae,type:"remove"}]),z.info("Connection deleted"))},re=de=>{const{edgeId:ae,position:fe}=de.detail;Q(ae),c({x:fe.x+(e.current?.getBoundingClientRect().left||0),y:fe.y+(e.current?.getBoundingClientRect().top||0),type:"insert",position:{x:fe.x,y:fe.y}})};return window.addEventListener("deleteEdge",te),window.addEventListener("addNodeOnEdge",re),()=>{window.removeEventListener("deleteEdge",te),window.removeEventListener("addNodeOnEdge",re)}},[N,z]);const D=T.useCallback(te=>{const re=j.find(ae=>ae.id===V),de=ae=>{if(l?.position)if(l.type==="insert"&&Y){const fe=N.find(xe=>xe.id===Y);if(fe){const xe=ir(ae,l.position);H(xe);const je={id:`e${fe.source}-${xe.id}`,source:fe.source,sourceHandle:fe.sourceHandle,target:xe.id,targetHandle:"input-0",type:"animated"},ve={id:`e${xe.id}-${fe.target}`,source:xe.id,sourceHandle:"output-0",target:fe.target,targetHandle:fe.targetHandle,type:"animated"};Ce.getState().onEdgesChange([{id:Y,type:"remove"}]);const{edges:Ee,setEdges:De}=Ce.getState();De([...Ee.filter(qe=>qe.id!==Y),je,ve]),z.success("Node inserted")}Q(null)}else H(ir(ae,l.position))};switch(te){case"delete":V&&(A(V),$(null),z.info("Node deleted"));break;case"duplicate":if(re){const ae=ir(re.type,{x:re.position.x+50,y:re.position.y+50});ae.data={...re.data,label:`${re.data.label} (copy)`},H(ae),z.success("Node duplicated")}break;case"copy":re&&(h({...re}),z.info("Node copied"));break;case"cut":re&&(h({...re}),A(V),$(null),z.info("Node cut"));break;case"paste":if(f&&l?.position){const ae=ir(f.type,l.position);ae.data={...f.data,label:`${f.data.label} (paste)`},H(ae),z.success("Node pasted")}break;case"addTrigger":de("manualTrigger");break;case"addHTTP":de("httpRequest");break;case"addAI":de("aiAgent");break;case"codeExecutor":de("codeExecutor");break;case"setVariable":de("setVariable");break;case"ifElse":de("ifElse");break;case"textToSpeech":de("textToSpeech");break;case"output":de("output");break;case"fitView":i({padding:.2});break;case"zoomIn":o();break;case"zoomOut":a();break}c(null)},[j,N,V,A,$,H,f,l,Y,i,o,a,z]);T.useEffect(()=>{const te=re=>{if(re.target.tagName==="INPUT"||re.target.tagName==="TEXTAREA")return;const de=re.ctrlKey||re.metaKey;if(de&&re.key==="s"){re.preventDefault();const ae=G();localStorage.setItem("flownode-workflow",JSON.stringify(ae)),z.success("Workflow saved")}if(de&&re.key==="c"&&V){const ae=j.find(fe=>fe.id===V);ae&&(h({...ae}),z.info("Node copied"))}if(de&&re.key==="v"&&f){const ae=ir(f.type,{x:f.position.x+100,y:f.position.y+100});ae.data={...f.data},H(ae),z.success("Node pasted")}if(de&&re.key==="d"&&V){re.preventDefault();const ae=j.find(fe=>fe.id===V);if(ae){const fe=ir(ae.type,{x:ae.position.x+50,y:ae.position.y+50});fe.data={...ae.data,label:`${ae.data.label} (copy)`},H(fe),$(fe.id),z.success("Node duplicated")}}de&&(re.key==="+"||re.key==="=")&&(re.preventDefault(),o()),de&&re.key==="-"&&(re.preventDefault(),a()),de&&re.key==="0"&&(re.preventDefault(),i({padding:.2})),de&&re.key==="k"&&(re.preventDefault(),v(!0)),re.shiftKey&&re.key==="A"&&(re.preventDefault(),w(ae=>!ae))};return window.addEventListener("keydown",te),()=>window.removeEventListener("keydown",te)},[j,V,f,H,$,G,i,o,a,z]);const B=T.useCallback(te=>{te.preventDefault(),te.dataTransfer.dropEffect="move"},[]),F=T.useCallback(te=>{te.preventDefault();const re=te.dataTransfer.getData("application/reactflow");if(!re||!Ei[re])return;const de=t({x:te.clientX,y:te.clientY}),ae=ir(re,de);H(ae)},[t,H]),I=T.useMemo(()=>({type:"animated",style:{stroke:"var(--edge-color)",strokeWidth:2}}),[]),ie=T.useCallback(te=>U&&te.id===L?"var(--color-success)":uu(te.type),[U,L]);return u.jsxs("div",{className:"workflow-editor",ref:e,children:[u.jsxs(IM,{nodes:j,edges:N,onNodesChange:k,onEdgesChange:C,onConnect:_,onNodeClick:M,onPaneClick:P,onNodeContextMenu:O,onPaneContextMenu:q,onDragOver:B,onDrop:F,nodeTypes:N_,edgeTypes:E_,isValidConnection:Z,defaultEdgeOptions:I,snapToGrid:!0,snapGrid:[15,15],minZoom:.5,maxZoom:5,deleteKeyCode:["Backspace","Delete"],proOptions:{hideAttribution:!0},children:[u.jsx(VM,{variant:"dots",gap:20,size:1,color:"var(--border-color)"}),u.jsxs("div",{className:`minimap-container ${p?"expanded":"collapsed"}`,children:[u.jsx("button",{className:"minimap-toggle",onClick:()=>m(!p),title:p?"Hide minimap":"Show minimap",children:""}),p&&u.jsx(c2,{nodeColor:ie,maskColor:"rgba(10, 10, 15, 0.8)",className:"workflow-minimap",pannable:!0,zoomable:!0})]}),u.jsxs("div",{className:"view-controls-panel",children:[u.jsxs("div",{className:"zoom-controls",children:[u.jsx("button",{className:"zoom-btn",onClick:()=>a(),title:"Zoom out (Ctrl+-)",children:""}),u.jsxs("span",{className:"zoom-level",children:[Math.round(S*100),"%"]}),u.jsx("button",{className:"zoom-btn",onClick:()=>o(),title:"Zoom in (Ctrl++)",children:"+"})]}),u.jsx("button",{className:"view-btn",onClick:()=>i({padding:.2}),title:"Fit to screen (Ctrl+0)",children:""})]}),u.jsx(x_,{}),u.jsx(h_,{})]}),l&&u.jsx(b2,{x:l.x,y:l.y,type:l.type,onAction:D,onClose:()=>c(null)}),u.jsx(b_,{isOpen:g,onClose:()=>v(!1),onSelectNode:(te,re)=>{H(ir(te,re||{x:400,y:300}))},insertPosition:l?.position||{x:400,y:300}}),b&&u.jsx(S_,{onClose:()=>w(!1)}),j.length===0&&u.jsxs("div",{className:"workflow-empty-state",children:[u.jsx("div",{className:"empty-icon",children:""}),u.jsx("h3",{children:"Build Your Workflow"}),u.jsx("p",{children:"Drag nodes from the sidebar to get started"})]})]})}const Ih=[{id:"api-fetch",name:"API Fetch & Transform",description:"Fetch data from an API and process it with code",category:"api",icon:"",nodes:[{id:"trigger-1",type:"manualTrigger",position:{x:100,y:200},data:{label:"Start"}},{id:"http-1",type:"httpRequest",position:{x:350,y:200},data:{label:"Fetch Data",method:"GET",url:"https://jsonplaceholder.typicode.com/posts/1",timeout:3e4}},{id:"code-1",type:"codeExecutor",position:{x:600,y:200},data:{label:"Transform",code:`// Process the API response
const { data } = input;
return {
  title: data.title.toUpperCase(),
  body: data.body.substring(0, 100) + "...",
  processed: true
};`}}],edges:[{id:"e1-2",source:"trigger-1",target:"http-1",sourceHandle:"output-0",targetHandle:"input-0"},{id:"e2-3",source:"http-1",target:"code-1",sourceHandle:"output-0",targetHandle:"input-0"}]},{id:"conditional-routing",name:"Conditional Routing",description:"Route data based on conditions using If/Else",category:"logic",icon:"",nodes:[{id:"trigger-1",type:"manualTrigger",position:{x:100,y:250},data:{label:"Input"}},{id:"setvar-1",type:"setVariable",position:{x:320,y:250},data:{label:"Set Status",variableName:"status",value:"active",mode:"set"}},{id:"ifelse-1",type:"ifElse",position:{x:540,y:250},data:{label:"Check Status",condition:"status",operator:"equals",compareValue:"active"}},{id:"code-true",type:"codeExecutor",position:{x:780,y:150},data:{label:"Active Path",code:'return { ...input, message: "User is ACTIVE" };'}},{id:"code-false",type:"codeExecutor",position:{x:780,y:350},data:{label:"Inactive Path",code:'return { ...input, message: "User is INACTIVE" };'}}],edges:[{id:"e1",source:"trigger-1",target:"setvar-1",sourceHandle:"output-0",targetHandle:"input-0"},{id:"e2",source:"setvar-1",target:"ifelse-1",sourceHandle:"output-0",targetHandle:"input-0"},{id:"e3",source:"ifelse-1",target:"code-true",sourceHandle:"output-0",targetHandle:"input-0"},{id:"e4",source:"ifelse-1",target:"code-false",sourceHandle:"output-1",targetHandle:"input-0"}]},{id:"loop-processing",name:"Loop Over Items",description:"Process an array of items one by one",category:"data",icon:"",nodes:[{id:"trigger-1",type:"manualTrigger",position:{x:100,y:200},data:{label:"Start"}},{id:"setvar-1",type:"setVariable",position:{x:320,y:200},data:{label:"Create Array",variableName:"items",value:"{{ [1, 2, 3, 4, 5] }}",mode:"set"}},{id:"loop-1",type:"loop",position:{x:540,y:200},data:{label:"Loop Items",itemsPath:"items",maxIterations:100}},{id:"code-1",type:"codeExecutor",position:{x:760,y:120},data:{label:"Process Item",code:`return { 
  item: input.item,
  squared: input.item * input.item,
  index: input.index 
};`}},{id:"code-done",type:"codeExecutor",position:{x:760,y:280},data:{label:"Done",code:`return { 
  completed: true, 
  results: input.loopResults 
};`}}],edges:[{id:"e1",source:"trigger-1",target:"setvar-1",sourceHandle:"output-0",targetHandle:"input-0"},{id:"e2",source:"setvar-1",target:"loop-1",sourceHandle:"output-0",targetHandle:"input-0"},{id:"e3",source:"loop-1",target:"code-1",sourceHandle:"output-0",targetHandle:"input-0"},{id:"e4",source:"loop-1",target:"code-done",sourceHandle:"output-1",targetHandle:"input-0"}]},{id:"ai-chat",name:"AI Chat Assistant",description:"Send text to AI and get a response",category:"ai",icon:"",nodes:[{id:"trigger-1",type:"manualTrigger",position:{x:100,y:200},data:{label:"User Input"}},{id:"setvar-1",type:"setVariable",position:{x:340,y:200},data:{label:"Set Question",variableName:"question",value:"What is the capital of France?",mode:"set"}},{id:"ai-1",type:"aiAgent",position:{x:580,y:200},data:{label:"AI Assistant",systemPrompt:"You are a helpful assistant. Answer concisely.",modelId:"gemma-2-2b-it-q4f16_1-MLC",temperature:.7,maxTokens:500}}],edges:[{id:"e1",source:"trigger-1",target:"setvar-1",sourceHandle:"output-0",targetHandle:"input-0"},{id:"e2",source:"setvar-1",target:"ai-1",sourceHandle:"output-0",targetHandle:"input-0"}]},{id:"data-pipeline",name:"Data Pipeline",description:"Fetch, filter, and aggregate data",category:"data",icon:"",nodes:[{id:"trigger-1",type:"manualTrigger",position:{x:100,y:200},data:{label:"Start Pipeline"}},{id:"http-1",type:"httpRequest",position:{x:320,y:200},data:{label:"Fetch Users",method:"GET",url:"https://jsonplaceholder.typicode.com/users",timeout:3e4}},{id:"code-filter",type:"codeExecutor",position:{x:540,y:200},data:{label:"Filter & Map",code:`// Filter and transform the data
const users = input.data;
return {
  users: users.map(u => ({
    id: u.id,
    name: u.name,
    email: u.email,
    city: u.address.city
  })),
  count: users.length
};`}},{id:"code-aggregate",type:"codeExecutor",position:{x:760,y:200},data:{label:"Aggregate",code:`// Create summary
return {
  summary: \`Processed \${input.count} users\`,
  users: input.users,
  timestamp: new Date().toISOString()
};`}}],edges:[{id:"e1",source:"trigger-1",target:"http-1",sourceHandle:"output-0",targetHandle:"input-0"},{id:"e2",source:"http-1",target:"code-filter",sourceHandle:"output-0",targetHandle:"input-0"},{id:"e3",source:"code-filter",target:"code-aggregate",sourceHandle:"output-0",targetHandle:"input-0"}]},{id:"poem-speech",name:"Poem to Speech",description:"Generate a poem using AI and read it out loud",category:"ai",icon:"",nodes:[{id:"trigger-1",type:"manualTrigger",position:{x:100,y:200},data:{label:"Start",description:"Enter your poem topic",inputFields:[{name:"topic",type:"text",label:"Poem Topic",placeholder:"Enter a topic for the poem...",required:!0}]}},{id:"ai-1",type:"aiAgent",position:{x:350,y:200},data:{label:"Poem Writer",systemPrompt:"You are a creative poet. Write beautiful, evocative poems based on the given topic. Keep poems to 4-8 lines. Output ONLY the poem, no commentary.",reasoningMode:"direct",temperature:.8,maxTokens:500}},{id:"tts-1",type:"textToSpeech",position:{x:600,y:200},data:{label:"Speak Poem",provider:"webSpeech",voice:"default",speed:.9,pitch:1,autoPlay:!0}},{id:"output-1",type:"output",position:{x:850,y:200},data:{label:"Final Output",outputType:"console",formatJson:!1}}],edges:[{id:"e1",source:"trigger-1",target:"ai-1",sourceHandle:"output-0",targetHandle:"input-0",type:"animated"},{id:"e2",source:"ai-1",target:"tts-1",sourceHandle:"output-0",targetHandle:"input-0",type:"animated"},{id:"e3",source:"tts-1",target:"output-1",sourceHandle:"output-0",targetHandle:"input-0",type:"animated"}]}],Za=g2();function C_(){const[e,t]=T.useState(null),[i,o]=T.useState(""),[a,l]=T.useState(!1),c=Ce(N=>N.loadWorkflow),f=Qo(),h=e?Object.values(Hr).find(N=>N.name===e):null,p=T.useMemo(()=>e?Za[e]||[]:[],[e]),m=T.useMemo(()=>{if(!i.trim())return p;const N=i.toLowerCase();return p.filter(k=>k.name.toLowerCase().includes(N)||k.description.toLowerCase().includes(N))},[p,i]),g=T.useMemo(()=>{if(!i.trim())return Object.entries(Za);const N=i.toLowerCase();return Object.entries(Za).filter(([k,C])=>k.toLowerCase().includes(N)?!0:C.some(_=>_.name.toLowerCase().includes(N)||_.description.toLowerCase().includes(N)))},[i]),v=T.useCallback(N=>{t(N),o("")},[]),b=T.useCallback(()=>{t(null),o("")},[]),w=T.useCallback((N,k)=>{N.dataTransfer.setData("application/reactflow",k),N.dataTransfer.effectAllowed="move"},[]),S=T.useCallback(N=>{c({nodes:N.nodes,edges:N.edges}),f.success(`Loaded template: ${N.name}`)},[c,f]),j=Object.values(Za).flat().length;return u.jsxs("aside",{className:"node-sidebar",children:[u.jsxs("div",{className:"sidebar-header",children:[e?u.jsxs("div",{className:"breadcrumb",children:[u.jsx("button",{className:"back-btn",onClick:b,title:"Back to folders",children:""}),u.jsxs("span",{className:"current-folder",style:{"--folder-color":h?.color},children:[" ",e]})]}):u.jsx("h2",{children:" Nodes"}),u.jsx("div",{className:"header-actions",children:u.jsx("button",{className:`templates-toggle ${a?"active":""}`,onClick:()=>l(!a),title:"Templates",children:""})})]}),a&&u.jsxs("div",{className:"templates-panel",children:[u.jsxs("div",{className:"templates-header",children:[u.jsx("h3",{children:" Templates"}),u.jsx("span",{className:"templates-count",children:Ih.length})]}),u.jsx("div",{className:"templates-list",children:Ih.map(N=>u.jsxs("button",{className:"template-item",onClick:()=>S(N),children:[u.jsx("span",{className:"template-icon",children:N.icon}),u.jsxs("div",{className:"template-info",children:[u.jsx("span",{className:"template-name",children:N.name}),u.jsx("span",{className:"template-desc",children:N.description})]})]},N.id))})]}),!a&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"sidebar-search",children:u.jsxs("div",{className:"search-wrapper",children:[u.jsx("span",{className:"search-icon",children:""}),u.jsx("input",{type:"text",placeholder:e?"Search in folder...":"Search nodes...",value:i,onChange:N=>o(N.target.value),className:"node-search-input"}),i&&u.jsx("button",{className:"search-clear",onClick:()=>o(""),children:""})]})}),u.jsxs("div",{className:"sidebar-content",children:[!e&&u.jsxs("div",{className:"folder-list",children:[g.map(([N,k])=>{const C=Object.values(Hr).find(_=>_.name===N);return u.jsxs("button",{className:"folder-item",onClick:()=>v(N),style:{"--folder-color":C?.color},children:[u.jsx("span",{className:"folder-icon",children:""}),u.jsxs("div",{className:"folder-info",children:[u.jsx("span",{className:"folder-name",children:N}),u.jsx("span",{className:"folder-desc",children:C?.description})]}),u.jsx("span",{className:"folder-count",children:k.length}),u.jsx("span",{className:"folder-arrow",children:""})]},N)}),i&&g.length===0&&u.jsx("div",{className:"no-results",children:u.jsxs("p",{children:['No folders match "',i,'"']})})]}),e&&u.jsxs("div",{className:"node-list",children:[m.map(N=>u.jsxs("div",{className:"draggable-node",draggable:!0,onDragStart:k=>w(k,N.type),style:{"--node-color":h?.color},title:N.description,children:[u.jsx("span",{className:"node-icon",children:N.icon}),u.jsxs("div",{className:"node-info",children:[u.jsx("span",{className:"node-name",children:N.name}),u.jsx("span",{className:"node-description",children:N.description})]})]},N.type)),i&&m.length===0&&u.jsxs("div",{className:"no-results",children:[u.jsxs("p",{children:['No nodes match "',i,'"']}),u.jsx("button",{onClick:()=>o(""),children:"Clear"})]}),!i&&m.length===0&&u.jsx("div",{className:"no-results",children:u.jsx("p",{children:"This folder is empty"})})]})]})]}),u.jsx("div",{className:"sidebar-footer",children:u.jsx("p",{className:"tip",children:a?"Click template to load":e?`${m.length} nodes  Drag to canvas`:`${j} nodes in ${Object.keys(Za).length} folders`})})]})}const k_=T.memo(C_);function T_({onClose:e}){return u.jsx("div",{className:"modal-overlay",onClick:e,children:u.jsxs("div",{className:"modal-content",onClick:t=>t.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:" Getting Started"}),u.jsx("button",{className:"btn-close",onClick:e,children:""})]}),u.jsxs("div",{className:"modal-body",children:[u.jsxs("div",{className:"tutorial-intro",children:[u.jsxs("p",{children:["Welcome to ",u.jsx("strong",{children:"IOSANS"}),". You can learn the basics by reading below, or take an interactive tour of the interface."]}),u.jsx("button",{className:"btn-primary",style:{width:"100%",padding:"12px",margin:"16px 0",fontSize:"1.1em"},onClick:()=>{e(),window.dispatchEvent(new Event("startTour"))},children:" Start Guided Onboarding"})]}),u.jsx("hr",{style:{borderColor:"rgba(255,255,255,0.1)",margin:"20px 0"}}),u.jsx("h3",{children:" Quick Start Guide"}),u.jsxs("div",{className:"tutorial-step",children:[u.jsx("h4",{children:"1. Start with a Trigger"}),u.jsxs("p",{children:["Drag a ",u.jsx("strong",{children:"Manual Trigger"})," from the sidebar (green category). This tells the workflow when to start running."]})]}),u.jsxs("div",{className:"tutorial-step",children:[u.jsx("h4",{children:"2. Add Intelligence"}),u.jsxs("p",{children:["Add an ",u.jsx("strong",{children:"AI Agent"}),' node. Configure its system prompt to define its personality and task (e.g., "Summarize this text").']})]}),u.jsxs("div",{className:"tutorial-step",children:[u.jsx("h4",{children:"3. Connect & Flow"}),u.jsxs("p",{children:["Connect nodes by dragging from"," ",u.jsx("span",{style:{color:"var(--color-success)"},children:"Source"})," to"," ",u.jsx("span",{style:{color:"var(--text-muted)"},children:"Target"})," ","handles. Data flows along these lines."]})]}),u.jsxs("div",{className:"tutorial-step",children:[u.jsx("h4",{children:"4. View Results"}),u.jsxs("p",{children:["Add an ",u.jsx("strong",{children:"Output Node"})," to visualize the final result, or inspect the ",u.jsx("strong",{children:"Logs Panel"})," on the right for detailed execution steps."]})]}),u.jsxs("div",{className:"tip-box",children:[u.jsx("strong",{children:"Pro Tip:"})," Use the ",u.jsx("strong",{children:"Overseer Agent"})," ","(Eye icon) to help you build complex workflows automatically!"]})]})]})})}const A_=T.memo(T_);function M_(e,t){const i={};return(e[e.length-1]===""?[...e,""]:e).join((i.padRight?" ":"")+","+(i.padLeft===!1?"":" ")).trim()}const D_=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,__=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,O_={};function Vv(e,t){return(O_.jsx?__:D_).test(e)}const R_=/[ \t\n\f\r]/g;function I_(e){return typeof e=="object"?e.type==="text"?Fv(e.value):!1:Fv(e)}function Fv(e){return e.replace(R_,"")===""}class Rs{constructor(t,i,o){this.normal=i,this.property=t,o&&(this.space=o)}}Rs.prototype.normal={};Rs.prototype.property={};Rs.prototype.space=void 0;function _w(e,t){const i={},o={};for(const a of e)Object.assign(i,a.property),Object.assign(o,a.normal);return new Rs(i,o,t)}function Lh(e){return e.toLowerCase()}class Jt{constructor(t,i){this.attribute=i,this.property=t}}Jt.prototype.attribute="";Jt.prototype.booleanish=!1;Jt.prototype.boolean=!1;Jt.prototype.commaOrSpaceSeparated=!1;Jt.prototype.commaSeparated=!1;Jt.prototype.defined=!1;Jt.prototype.mustUseProperty=!1;Jt.prototype.number=!1;Jt.prototype.overloadedBoolean=!1;Jt.prototype.property="";Jt.prototype.spaceSeparated=!1;Jt.prototype.space=void 0;let L_=0;const Me=Ur(),wt=Ur(),zh=Ur(),he=Ur(),it=Ur(),Po=Ur(),cn=Ur();function Ur(){return 2**++L_}const Bh=Object.freeze(Object.defineProperty({__proto__:null,boolean:Me,booleanish:wt,commaOrSpaceSeparated:cn,commaSeparated:Po,number:he,overloadedBoolean:zh,spaceSeparated:it},Symbol.toStringTag,{value:"Module"})),Zf=Object.keys(Bh);class mp extends Jt{constructor(t,i,o,a){let l=-1;if(super(t,i),Gv(this,"space",a),typeof o=="number")for(;++l<Zf.length;){const c=Zf[l];Gv(this,Zf[l],(o&Bh[c])===Bh[c])}}}mp.prototype.defined=!0;function Gv(e,t,i){i&&(e[t]=i)}function Zo(e){const t={},i={};for(const[o,a]of Object.entries(e.properties)){const l=new mp(o,e.transform(e.attributes||{},o),a,e.space);e.mustUseProperty&&e.mustUseProperty.includes(o)&&(l.mustUseProperty=!0),t[o]=l,i[Lh(o)]=o,i[Lh(l.attribute)]=o}return new Rs(t,i,e.space)}const Ow=Zo({properties:{ariaActiveDescendant:null,ariaAtomic:wt,ariaAutoComplete:null,ariaBusy:wt,ariaChecked:wt,ariaColCount:he,ariaColIndex:he,ariaColSpan:he,ariaControls:it,ariaCurrent:null,ariaDescribedBy:it,ariaDetails:null,ariaDisabled:wt,ariaDropEffect:it,ariaErrorMessage:null,ariaExpanded:wt,ariaFlowTo:it,ariaGrabbed:wt,ariaHasPopup:null,ariaHidden:wt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:it,ariaLevel:he,ariaLive:null,ariaModal:wt,ariaMultiLine:wt,ariaMultiSelectable:wt,ariaOrientation:null,ariaOwns:it,ariaPlaceholder:null,ariaPosInSet:he,ariaPressed:wt,ariaReadOnly:wt,ariaRelevant:null,ariaRequired:wt,ariaRoleDescription:it,ariaRowCount:he,ariaRowIndex:he,ariaRowSpan:he,ariaSelected:wt,ariaSetSize:he,ariaSort:null,ariaValueMax:he,ariaValueMin:he,ariaValueNow:he,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function Rw(e,t){return t in e?e[t]:t}function Iw(e,t){return Rw(e,t.toLowerCase())}const z_=Zo({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Po,acceptCharset:it,accessKey:it,action:null,allow:null,allowFullScreen:Me,allowPaymentRequest:Me,allowUserMedia:Me,alt:null,as:null,async:Me,autoCapitalize:null,autoComplete:it,autoFocus:Me,autoPlay:Me,blocking:it,capture:null,charSet:null,checked:Me,cite:null,className:it,cols:he,colSpan:null,content:null,contentEditable:wt,controls:Me,controlsList:it,coords:he|Po,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Me,defer:Me,dir:null,dirName:null,disabled:Me,download:zh,draggable:wt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Me,formTarget:null,headers:it,height:he,hidden:zh,high:he,href:null,hrefLang:null,htmlFor:it,httpEquiv:it,id:null,imageSizes:null,imageSrcSet:null,inert:Me,inputMode:null,integrity:null,is:null,isMap:Me,itemId:null,itemProp:it,itemRef:it,itemScope:Me,itemType:it,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Me,low:he,manifest:null,max:null,maxLength:he,media:null,method:null,min:null,minLength:he,multiple:Me,muted:Me,name:null,nonce:null,noModule:Me,noValidate:Me,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Me,optimum:he,pattern:null,ping:it,placeholder:null,playsInline:Me,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Me,referrerPolicy:null,rel:it,required:Me,reversed:Me,rows:he,rowSpan:he,sandbox:it,scope:null,scoped:Me,seamless:Me,selected:Me,shadowRootClonable:Me,shadowRootDelegatesFocus:Me,shadowRootMode:null,shape:null,size:he,sizes:null,slot:null,span:he,spellCheck:wt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:he,step:null,style:null,tabIndex:he,target:null,title:null,translate:null,type:null,typeMustMatch:Me,useMap:null,value:wt,width:he,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:it,axis:null,background:null,bgColor:null,border:he,borderColor:null,bottomMargin:he,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Me,declare:Me,event:null,face:null,frame:null,frameBorder:null,hSpace:he,leftMargin:he,link:null,longDesc:null,lowSrc:null,marginHeight:he,marginWidth:he,noResize:Me,noHref:Me,noShade:Me,noWrap:Me,object:null,profile:null,prompt:null,rev:null,rightMargin:he,rules:null,scheme:null,scrolling:wt,standby:null,summary:null,text:null,topMargin:he,valueType:null,version:null,vAlign:null,vLink:null,vSpace:he,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Me,disableRemotePlayback:Me,prefix:null,property:null,results:he,security:null,unselectable:null},space:"html",transform:Iw}),B_=Zo({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:cn,accentHeight:he,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:he,amplitude:he,arabicForm:null,ascent:he,attributeName:null,attributeType:null,azimuth:he,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:he,by:null,calcMode:null,capHeight:he,className:it,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:he,diffuseConstant:he,direction:null,display:null,dur:null,divisor:he,dominantBaseline:null,download:Me,dx:null,dy:null,edgeMode:null,editable:null,elevation:he,enableBackground:null,end:null,event:null,exponent:he,externalResourcesRequired:null,fill:null,fillOpacity:he,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Po,g2:Po,glyphName:Po,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:he,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:he,horizOriginX:he,horizOriginY:he,id:null,ideographic:he,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:he,k:he,k1:he,k2:he,k3:he,k4:he,kernelMatrix:cn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:he,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:he,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:he,overlineThickness:he,paintOrder:null,panose1:null,path:null,pathLength:he,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:it,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:he,pointsAtY:he,pointsAtZ:he,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:cn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:cn,rev:cn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:cn,requiredFeatures:cn,requiredFonts:cn,requiredFormats:cn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:he,specularExponent:he,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:he,strikethroughThickness:he,string:null,stroke:null,strokeDashArray:cn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:he,strokeOpacity:he,strokeWidth:null,style:null,surfaceScale:he,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:cn,tabIndex:he,tableValues:null,target:null,targetX:he,targetY:he,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:cn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:he,underlineThickness:he,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:he,values:null,vAlphabetic:he,vMathematical:he,vectorEffect:null,vHanging:he,vIdeographic:he,version:null,vertAdvY:he,vertOriginX:he,vertOriginY:he,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:he,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Rw}),Lw=Zo({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),zw=Zo({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Iw}),Bw=Zo({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),$_={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},H_=/[A-Z]/g,Yv=/-[a-z]/g,P_=/^data[-\w.:]+$/i;function q_(e,t){const i=Lh(t);let o=t,a=Jt;if(i in e.normal)return e.property[e.normal[i]];if(i.length>4&&i.slice(0,4)==="data"&&P_.test(t)){if(t.charAt(4)==="-"){const l=t.slice(5).replace(Yv,V_);o="data"+l.charAt(0).toUpperCase()+l.slice(1)}else{const l=t.slice(4);if(!Yv.test(l)){let c=l.replace(H_,U_);c.charAt(0)!=="-"&&(c="-"+c),t="data"+c}}a=mp}return new a(o,t)}function U_(e){return"-"+e.toLowerCase()}function V_(e){return e.charAt(1).toUpperCase()}const F_=_w([Ow,z_,Lw,zw,Bw],"html"),gp=_w([Ow,B_,Lw,zw,Bw],"svg");function G_(e){return e.join(" ").trim()}var _o={},Jf,Xv;function Y_(){if(Xv)return Jf;Xv=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,i=/^\s*/,o=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,a=/^:\s*/,l=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,c=/^[;\s]*/,f=/^\s+|\s+$/g,h=`
`,p="/",m="*",g="",v="comment",b="declaration";function w(j,N){if(typeof j!="string")throw new TypeError("First argument must be a string");if(!j)return[];N=N||{};var k=1,C=1;function _(M){var P=M.match(t);P&&(k+=P.length);var O=M.lastIndexOf(h);C=~O?M.length-O:C+M.length}function H(){var M={line:k,column:C};return function(P){return P.position=new A(M),G(),P}}function A(M){this.start=M,this.end={line:k,column:C},this.source=N.source}A.prototype.content=j;function $(M){var P=new Error(N.source+":"+k+":"+C+": "+M);if(P.reason=M,P.filename=N.source,P.line=k,P.column=C,P.source=j,!N.silent)throw P}function V(M){var P=M.exec(j);if(P){var O=P[0];return _(O),j=j.slice(O.length),P}}function G(){V(i)}function z(M){var P;for(M=M||[];P=L();)P!==!1&&M.push(P);return M}function L(){var M=H();if(!(p!=j.charAt(0)||m!=j.charAt(1))){for(var P=2;g!=j.charAt(P)&&(m!=j.charAt(P)||p!=j.charAt(P+1));)++P;if(P+=2,g===j.charAt(P-1))return $("End of comment missing");var O=j.slice(2,P-2);return C+=2,_(O),j=j.slice(P),C+=2,M({type:v,comment:O})}}function U(){var M=H(),P=V(o);if(P){if(L(),!V(a))return $("property missing ':'");var O=V(l),q=M({type:b,property:S(P[0].replace(e,g)),value:O?S(O[0].replace(e,g)):g});return V(c),q}}function Z(){var M=[];z(M);for(var P;P=U();)P!==!1&&(M.push(P),z(M));return M}return G(),Z()}function S(j){return j?j.replace(f,g):g}return Jf=w,Jf}var Qv;function X_(){if(Qv)return _o;Qv=1;var e=_o&&_o.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(_o,"__esModule",{value:!0}),_o.default=i;const t=e(Y_());function i(o,a){let l=null;if(!o||typeof o!="string")return l;const c=(0,t.default)(o),f=typeof a=="function";return c.forEach(h=>{if(h.type!=="declaration")return;const{property:p,value:m}=h;f?a(p,m,h):m&&(l=l||{},l[p]=m)}),l}return _o}var Ja={},Wv;function Q_(){if(Wv)return Ja;Wv=1,Object.defineProperty(Ja,"__esModule",{value:!0}),Ja.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,i=/^[^-]+$/,o=/^-(webkit|moz|ms|o|khtml)-/,a=/^-(ms)-/,l=function(p){return!p||i.test(p)||e.test(p)},c=function(p,m){return m.toUpperCase()},f=function(p,m){return"".concat(m,"-")},h=function(p,m){return m===void 0&&(m={}),l(p)?p:(p=p.toLowerCase(),m.reactCompat?p=p.replace(a,f):p=p.replace(o,f),p.replace(t,c))};return Ja.camelCase=h,Ja}var Ka,Zv;function W_(){if(Zv)return Ka;Zv=1;var e=Ka&&Ka.__importDefault||function(a){return a&&a.__esModule?a:{default:a}},t=e(X_()),i=Q_();function o(a,l){var c={};return!a||typeof a!="string"||(0,t.default)(a,function(f,h){f&&h&&(c[(0,i.camelCase)(f,l)]=h)}),c}return o.default=o,Ka=o,Ka}var Z_=W_();const J_=Wc(Z_),$w=Hw("end"),yp=Hw("start");function Hw(e){return t;function t(i){const o=i&&i.position&&i.position[e]||{};if(typeof o.line=="number"&&o.line>0&&typeof o.column=="number"&&o.column>0)return{line:o.line,column:o.column,offset:typeof o.offset=="number"&&o.offset>-1?o.offset:void 0}}}function K_(e){const t=yp(e),i=$w(e);if(t&&i)return{start:t,end:i}}function us(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Jv(e.position):"start"in e||"end"in e?Jv(e):"line"in e||"column"in e?$h(e):""}function $h(e){return Kv(e&&e.line)+":"+Kv(e&&e.column)}function Jv(e){return $h(e&&e.start)+"-"+$h(e&&e.end)}function Kv(e){return e&&typeof e=="number"?e:1}class zt extends Error{constructor(t,i,o){super(),typeof i=="string"&&(o=i,i=void 0);let a="",l={},c=!1;if(i&&("line"in i&&"column"in i?l={place:i}:"start"in i&&"end"in i?l={place:i}:"type"in i?l={ancestors:[i],place:i.position}:l={...i}),typeof t=="string"?a=t:!l.cause&&t&&(c=!0,a=t.message,l.cause=t),!l.ruleId&&!l.source&&typeof o=="string"){const h=o.indexOf(":");h===-1?l.ruleId=o:(l.source=o.slice(0,h),l.ruleId=o.slice(h+1))}if(!l.place&&l.ancestors&&l.ancestors){const h=l.ancestors[l.ancestors.length-1];h&&(l.place=h.position)}const f=l.place&&"start"in l.place?l.place.start:l.place;this.ancestors=l.ancestors||void 0,this.cause=l.cause||void 0,this.column=f?f.column:void 0,this.fatal=void 0,this.file="",this.message=a,this.line=f?f.line:void 0,this.name=us(l.place)||"1:1",this.place=l.place||void 0,this.reason=this.message,this.ruleId=l.ruleId||void 0,this.source=l.source||void 0,this.stack=c&&l.cause&&typeof l.cause.stack=="string"?l.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}zt.prototype.file="";zt.prototype.name="";zt.prototype.reason="";zt.prototype.message="";zt.prototype.stack="";zt.prototype.column=void 0;zt.prototype.line=void 0;zt.prototype.ancestors=void 0;zt.prototype.cause=void 0;zt.prototype.fatal=void 0;zt.prototype.place=void 0;zt.prototype.ruleId=void 0;zt.prototype.source=void 0;const xp={}.hasOwnProperty,eO=new Map,tO=/[A-Z]/g,nO=new Set(["table","tbody","thead","tfoot","tr"]),iO=new Set(["td","th"]),Pw="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function rO(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const i=t.filePath||void 0;let o;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");o=fO(i,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");o=dO(i,t.jsx,t.jsxs)}const a={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:o,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:i,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?gp:F_,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},l=qw(a,e,void 0);return l&&typeof l!="string"?l:a.create(e,a.Fragment,{children:l||void 0},void 0)}function qw(e,t,i){if(t.type==="element")return oO(e,t,i);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return aO(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return lO(e,t,i);if(t.type==="mdxjsEsm")return sO(e,t);if(t.type==="root")return cO(e,t,i);if(t.type==="text")return uO(e,t)}function oO(e,t,i){const o=e.schema;let a=o;t.tagName.toLowerCase()==="svg"&&o.space==="html"&&(a=gp,e.schema=a),e.ancestors.push(t);const l=Vw(e,t.tagName,!1),c=hO(e,t);let f=bp(e,t);return nO.has(t.tagName)&&(f=f.filter(function(h){return typeof h=="string"?!I_(h):!0})),Uw(e,c,l,t),vp(c,f),e.ancestors.pop(),e.schema=o,e.create(t,l,c,i)}function aO(e,t){if(t.data&&t.data.estree&&e.evaluater){const o=t.data.estree.body[0];return o.type,e.evaluater.evaluateExpression(o.expression)}Ns(e,t.position)}function sO(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Ns(e,t.position)}function lO(e,t,i){const o=e.schema;let a=o;t.name==="svg"&&o.space==="html"&&(a=gp,e.schema=a),e.ancestors.push(t);const l=t.name===null?e.Fragment:Vw(e,t.name,!0),c=pO(e,t),f=bp(e,t);return Uw(e,c,l,t),vp(c,f),e.ancestors.pop(),e.schema=o,e.create(t,l,c,i)}function cO(e,t,i){const o={};return vp(o,bp(e,t)),e.create(t,e.Fragment,o,i)}function uO(e,t){return t.value}function Uw(e,t,i,o){typeof i!="string"&&i!==e.Fragment&&e.passNode&&(t.node=o)}function vp(e,t){if(t.length>0){const i=t.length>1?t:t[0];i&&(e.children=i)}}function dO(e,t,i){return o;function o(a,l,c,f){const p=Array.isArray(c.children)?i:t;return f?p(l,c,f):p(l,c)}}function fO(e,t){return i;function i(o,a,l,c){const f=Array.isArray(l.children),h=yp(o);return t(a,l,c,f,{columnNumber:h?h.column-1:void 0,fileName:e,lineNumber:h?h.line:void 0},void 0)}}function hO(e,t){const i={};let o,a;for(a in t.properties)if(a!=="children"&&xp.call(t.properties,a)){const l=mO(e,a,t.properties[a]);if(l){const[c,f]=l;e.tableCellAlignToStyle&&c==="align"&&typeof f=="string"&&iO.has(t.tagName)?o=f:i[c]=f}}if(o){const l=i.style||(i.style={});l[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=o}return i}function pO(e,t){const i={};for(const o of t.attributes)if(o.type==="mdxJsxExpressionAttribute")if(o.data&&o.data.estree&&e.evaluater){const l=o.data.estree.body[0];l.type;const c=l.expression;c.type;const f=c.properties[0];f.type,Object.assign(i,e.evaluater.evaluateExpression(f.argument))}else Ns(e,t.position);else{const a=o.name;let l;if(o.value&&typeof o.value=="object")if(o.value.data&&o.value.data.estree&&e.evaluater){const f=o.value.data.estree.body[0];f.type,l=e.evaluater.evaluateExpression(f.expression)}else Ns(e,t.position);else l=o.value===null?!0:o.value;i[a]=l}return i}function bp(e,t){const i=[];let o=-1;const a=e.passKeys?new Map:eO;for(;++o<t.children.length;){const l=t.children[o];let c;if(e.passKeys){const h=l.type==="element"?l.tagName:l.type==="mdxJsxFlowElement"||l.type==="mdxJsxTextElement"?l.name:void 0;if(h){const p=a.get(h)||0;c=h+"-"+p,a.set(h,p+1)}}const f=qw(e,l,c);f!==void 0&&i.push(f)}return i}function mO(e,t,i){const o=q_(e.schema,t);if(!(i==null||typeof i=="number"&&Number.isNaN(i))){if(Array.isArray(i)&&(i=o.commaSeparated?M_(i):G_(i)),o.property==="style"){let a=typeof i=="object"?i:gO(e,String(i));return e.stylePropertyNameCase==="css"&&(a=yO(a)),["style",a]}return[e.elementAttributeNameCase==="react"&&o.space?$_[o.property]||o.property:o.attribute,i]}}function gO(e,t){try{return J_(t,{reactCompat:!0})}catch(i){if(e.ignoreInvalidStyle)return{};const o=i,a=new zt("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:o,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw a.file=e.filePath||void 0,a.url=Pw+"#cannot-parse-style-attribute",a}}function Vw(e,t,i){let o;if(!i)o={type:"Literal",value:t};else if(t.includes(".")){const a=t.split(".");let l=-1,c;for(;++l<a.length;){const f=Vv(a[l])?{type:"Identifier",name:a[l]}:{type:"Literal",value:a[l]};c=c?{type:"MemberExpression",object:c,property:f,computed:!!(l&&f.type==="Literal"),optional:!1}:f}o=c}else o=Vv(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(o.type==="Literal"){const a=o.value;return xp.call(e.components,a)?e.components[a]:a}if(e.evaluater)return e.evaluater.evaluateExpression(o);Ns(e)}function Ns(e,t){const i=new zt("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=Pw+"#cannot-handle-mdx-estrees-without-createevaluater",i}function yO(e){const t={};let i;for(i in e)xp.call(e,i)&&(t[xO(i)]=e[i]);return t}function xO(e){let t=e.replace(tO,vO);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function vO(e){return"-"+e.toLowerCase()}const Kf={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},bO={};function wp(e,t){const i=bO,o=typeof i.includeImageAlt=="boolean"?i.includeImageAlt:!0,a=typeof i.includeHtml=="boolean"?i.includeHtml:!0;return Fw(e,o,a)}function Fw(e,t,i){if(wO(e)){if("value"in e)return e.type==="html"&&!i?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return eb(e.children,t,i)}return Array.isArray(e)?eb(e,t,i):""}function eb(e,t,i){const o=[];let a=-1;for(;++a<e.length;)o[a]=Fw(e[a],t,i);return o.join("")}function wO(e){return!!(e&&typeof e=="object")}const tb=document.createElement("i");function Sp(e){const t="&"+e+";";tb.innerHTML=t;const i=tb.textContent;return i.charCodeAt(i.length-1)===59&&e!=="semi"||i===t?!1:i}function fn(e,t,i,o){const a=e.length;let l=0,c;if(t<0?t=-t>a?0:a+t:t=t>a?a:t,i=i>0?i:0,o.length<1e4)c=Array.from(o),c.unshift(t,i),e.splice(...c);else for(i&&e.splice(t,i);l<o.length;)c=o.slice(l,l+1e4),c.unshift(t,0),e.splice(...c),l+=1e4,t+=1e4}function Sn(e,t){return e.length>0?(fn(e,e.length,0,t),e):t}const nb={}.hasOwnProperty;function Gw(e){const t={};let i=-1;for(;++i<e.length;)SO(t,e[i]);return t}function SO(e,t){let i;for(i in t){const a=(nb.call(e,i)?e[i]:void 0)||(e[i]={}),l=t[i];let c;if(l)for(c in l){nb.call(a,c)||(a[c]=[]);const f=l[c];NO(a[c],Array.isArray(f)?f:f?[f]:[])}}}function NO(e,t){let i=-1;const o=[];for(;++i<t.length;)(t[i].add==="after"?e:o).push(t[i]);fn(e,0,0,o)}function Yw(e,t){const i=Number.parseInt(e,t);return i<9||i===11||i>13&&i<32||i>126&&i<160||i>55295&&i<57344||i>64975&&i<65008||(i&65535)===65535||(i&65535)===65534||i>1114111?"":String.fromCodePoint(i)}function Rn(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Ht=cr(/[A-Za-z]/),Lt=cr(/[\dA-Za-z]/),EO=cr(/[#-'*+\--9=?A-Z^-~]/);function Vc(e){return e!==null&&(e<32||e===127)}const Hh=cr(/\d/),jO=cr(/[\dA-Fa-f]/),CO=cr(/[!-/:-@[-`{-~]/);function we(e){return e!==null&&e<-2}function nt(e){return e!==null&&(e<0||e===32)}function Ie(e){return e===-2||e===-1||e===32}const du=cr(new RegExp("\\p{P}|\\p{S}","u")),Pr=cr(/\s/);function cr(e){return t;function t(i){return i!==null&&i>-1&&e.test(String.fromCharCode(i))}}function Jo(e){const t=[];let i=-1,o=0,a=0;for(;++i<e.length;){const l=e.charCodeAt(i);let c="";if(l===37&&Lt(e.charCodeAt(i+1))&&Lt(e.charCodeAt(i+2)))a=2;else if(l<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(l))||(c=String.fromCharCode(l));else if(l>55295&&l<57344){const f=e.charCodeAt(i+1);l<56320&&f>56319&&f<57344?(c=String.fromCharCode(l,f),a=1):c=""}else c=String.fromCharCode(l);c&&(t.push(e.slice(o,i),encodeURIComponent(c)),o=i+a+1,c=""),a&&(i+=a,a=0)}return t.join("")+e.slice(o)}function Pe(e,t,i,o){const a=o?o-1:Number.POSITIVE_INFINITY;let l=0;return c;function c(h){return Ie(h)?(e.enter(i),f(h)):t(h)}function f(h){return Ie(h)&&l++<a?(e.consume(h),f):(e.exit(i),t(h))}}const kO={tokenize:TO};function TO(e){const t=e.attempt(this.parser.constructs.contentInitial,o,a);let i;return t;function o(f){if(f===null){e.consume(f);return}return e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),Pe(e,t,"linePrefix")}function a(f){return e.enter("paragraph"),l(f)}function l(f){const h=e.enter("chunkText",{contentType:"text",previous:i});return i&&(i.next=h),i=h,c(f)}function c(f){if(f===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(f);return}return we(f)?(e.consume(f),e.exit("chunkText"),l):(e.consume(f),c)}}const AO={tokenize:MO},ib={tokenize:DO};function MO(e){const t=this,i=[];let o=0,a,l,c;return f;function f(C){if(o<i.length){const _=i[o];return t.containerState=_[1],e.attempt(_[0].continuation,h,p)(C)}return p(C)}function h(C){if(o++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,a&&k();const _=t.events.length;let H=_,A;for(;H--;)if(t.events[H][0]==="exit"&&t.events[H][1].type==="chunkFlow"){A=t.events[H][1].end;break}N(o);let $=_;for(;$<t.events.length;)t.events[$][1].end={...A},$++;return fn(t.events,H+1,0,t.events.slice(_)),t.events.length=$,p(C)}return f(C)}function p(C){if(o===i.length){if(!a)return v(C);if(a.currentConstruct&&a.currentConstruct.concrete)return w(C);t.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(ib,m,g)(C)}function m(C){return a&&k(),N(o),v(C)}function g(C){return t.parser.lazy[t.now().line]=o!==i.length,c=t.now().offset,w(C)}function v(C){return t.containerState={},e.attempt(ib,b,w)(C)}function b(C){return o++,i.push([t.currentConstruct,t.containerState]),v(C)}function w(C){if(C===null){a&&k(),N(0),e.consume(C);return}return a=a||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:a,contentType:"flow",previous:l}),S(C)}function S(C){if(C===null){j(e.exit("chunkFlow"),!0),N(0),e.consume(C);return}return we(C)?(e.consume(C),j(e.exit("chunkFlow")),o=0,t.interrupt=void 0,f):(e.consume(C),S)}function j(C,_){const H=t.sliceStream(C);if(_&&H.push(null),C.previous=l,l&&(l.next=C),l=C,a.defineSkip(C.start),a.write(H),t.parser.lazy[C.start.line]){let A=a.events.length;for(;A--;)if(a.events[A][1].start.offset<c&&(!a.events[A][1].end||a.events[A][1].end.offset>c))return;const $=t.events.length;let V=$,G,z;for(;V--;)if(t.events[V][0]==="exit"&&t.events[V][1].type==="chunkFlow"){if(G){z=t.events[V][1].end;break}G=!0}for(N(o),A=$;A<t.events.length;)t.events[A][1].end={...z},A++;fn(t.events,V+1,0,t.events.slice($)),t.events.length=A}}function N(C){let _=i.length;for(;_-- >C;){const H=i[_];t.containerState=H[1],H[0].exit.call(t,e)}i.length=C}function k(){a.write([null]),l=void 0,a=void 0,t.containerState._closeFlow=void 0}}function DO(e,t,i){return Pe(e,e.attempt(this.parser.constructs.document,t,i),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Wo(e){if(e===null||nt(e)||Pr(e))return 1;if(du(e))return 2}function fu(e,t,i){const o=[];let a=-1;for(;++a<e.length;){const l=e[a].resolveAll;l&&!o.includes(l)&&(t=l(t,i),o.push(l))}return t}const Ph={name:"attention",resolveAll:_O,tokenize:OO};function _O(e,t){let i=-1,o,a,l,c,f,h,p,m;for(;++i<e.length;)if(e[i][0]==="enter"&&e[i][1].type==="attentionSequence"&&e[i][1]._close){for(o=i;o--;)if(e[o][0]==="exit"&&e[o][1].type==="attentionSequence"&&e[o][1]._open&&t.sliceSerialize(e[o][1]).charCodeAt(0)===t.sliceSerialize(e[i][1]).charCodeAt(0)){if((e[o][1]._close||e[i][1]._open)&&(e[i][1].end.offset-e[i][1].start.offset)%3&&!((e[o][1].end.offset-e[o][1].start.offset+e[i][1].end.offset-e[i][1].start.offset)%3))continue;h=e[o][1].end.offset-e[o][1].start.offset>1&&e[i][1].end.offset-e[i][1].start.offset>1?2:1;const g={...e[o][1].end},v={...e[i][1].start};rb(g,-h),rb(v,h),c={type:h>1?"strongSequence":"emphasisSequence",start:g,end:{...e[o][1].end}},f={type:h>1?"strongSequence":"emphasisSequence",start:{...e[i][1].start},end:v},l={type:h>1?"strongText":"emphasisText",start:{...e[o][1].end},end:{...e[i][1].start}},a={type:h>1?"strong":"emphasis",start:{...c.start},end:{...f.end}},e[o][1].end={...c.start},e[i][1].start={...f.end},p=[],e[o][1].end.offset-e[o][1].start.offset&&(p=Sn(p,[["enter",e[o][1],t],["exit",e[o][1],t]])),p=Sn(p,[["enter",a,t],["enter",c,t],["exit",c,t],["enter",l,t]]),p=Sn(p,fu(t.parser.constructs.insideSpan.null,e.slice(o+1,i),t)),p=Sn(p,[["exit",l,t],["enter",f,t],["exit",f,t],["exit",a,t]]),e[i][1].end.offset-e[i][1].start.offset?(m=2,p=Sn(p,[["enter",e[i][1],t],["exit",e[i][1],t]])):m=0,fn(e,o-1,i-o+3,p),i=o+p.length-m-2;break}}for(i=-1;++i<e.length;)e[i][1].type==="attentionSequence"&&(e[i][1].type="data");return e}function OO(e,t){const i=this.parser.constructs.attentionMarkers.null,o=this.previous,a=Wo(o);let l;return c;function c(h){return l=h,e.enter("attentionSequence"),f(h)}function f(h){if(h===l)return e.consume(h),f;const p=e.exit("attentionSequence"),m=Wo(h),g=!m||m===2&&a||i.includes(h),v=!a||a===2&&m||i.includes(o);return p._open=!!(l===42?g:g&&(a||!v)),p._close=!!(l===42?v:v&&(m||!g)),t(h)}}function rb(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const RO={name:"autolink",tokenize:IO};function IO(e,t,i){let o=0;return a;function a(b){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(b),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),l}function l(b){return Ht(b)?(e.consume(b),c):b===64?i(b):p(b)}function c(b){return b===43||b===45||b===46||Lt(b)?(o=1,f(b)):p(b)}function f(b){return b===58?(e.consume(b),o=0,h):(b===43||b===45||b===46||Lt(b))&&o++<32?(e.consume(b),f):(o=0,p(b))}function h(b){return b===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(b),e.exit("autolinkMarker"),e.exit("autolink"),t):b===null||b===32||b===60||Vc(b)?i(b):(e.consume(b),h)}function p(b){return b===64?(e.consume(b),m):EO(b)?(e.consume(b),p):i(b)}function m(b){return Lt(b)?g(b):i(b)}function g(b){return b===46?(e.consume(b),o=0,m):b===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(b),e.exit("autolinkMarker"),e.exit("autolink"),t):v(b)}function v(b){if((b===45||Lt(b))&&o++<63){const w=b===45?v:g;return e.consume(b),w}return i(b)}}const Is={partial:!0,tokenize:LO};function LO(e,t,i){return o;function o(l){return Ie(l)?Pe(e,a,"linePrefix")(l):a(l)}function a(l){return l===null||we(l)?t(l):i(l)}}const Xw={continuation:{tokenize:BO},exit:$O,name:"blockQuote",tokenize:zO};function zO(e,t,i){const o=this;return a;function a(c){if(c===62){const f=o.containerState;return f.open||(e.enter("blockQuote",{_container:!0}),f.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(c),e.exit("blockQuoteMarker"),l}return i(c)}function l(c){return Ie(c)?(e.enter("blockQuotePrefixWhitespace"),e.consume(c),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(c))}}function BO(e,t,i){const o=this;return a;function a(c){return Ie(c)?Pe(e,l,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c):l(c)}function l(c){return e.attempt(Xw,t,i)(c)}}function $O(e){e.exit("blockQuote")}const Qw={name:"characterEscape",tokenize:HO};function HO(e,t,i){return o;function o(l){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(l),e.exit("escapeMarker"),a}function a(l){return CO(l)?(e.enter("characterEscapeValue"),e.consume(l),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):i(l)}}const Ww={name:"characterReference",tokenize:PO};function PO(e,t,i){const o=this;let a=0,l,c;return f;function f(g){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(g),e.exit("characterReferenceMarker"),h}function h(g){return g===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(g),e.exit("characterReferenceMarkerNumeric"),p):(e.enter("characterReferenceValue"),l=31,c=Lt,m(g))}function p(g){return g===88||g===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(g),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),l=6,c=jO,m):(e.enter("characterReferenceValue"),l=7,c=Hh,m(g))}function m(g){if(g===59&&a){const v=e.exit("characterReferenceValue");return c===Lt&&!Sp(o.sliceSerialize(v))?i(g):(e.enter("characterReferenceMarker"),e.consume(g),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return c(g)&&a++<l?(e.consume(g),m):i(g)}}const ob={partial:!0,tokenize:UO},ab={concrete:!0,name:"codeFenced",tokenize:qO};function qO(e,t,i){const o=this,a={partial:!0,tokenize:H};let l=0,c=0,f;return h;function h(A){return p(A)}function p(A){const $=o.events[o.events.length-1];return l=$&&$[1].type==="linePrefix"?$[2].sliceSerialize($[1],!0).length:0,f=A,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),m(A)}function m(A){return A===f?(c++,e.consume(A),m):c<3?i(A):(e.exit("codeFencedFenceSequence"),Ie(A)?Pe(e,g,"whitespace")(A):g(A))}function g(A){return A===null||we(A)?(e.exit("codeFencedFence"),o.interrupt?t(A):e.check(ob,S,_)(A)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),v(A))}function v(A){return A===null||we(A)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),g(A)):Ie(A)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Pe(e,b,"whitespace")(A)):A===96&&A===f?i(A):(e.consume(A),v)}function b(A){return A===null||we(A)?g(A):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),w(A))}function w(A){return A===null||we(A)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),g(A)):A===96&&A===f?i(A):(e.consume(A),w)}function S(A){return e.attempt(a,_,j)(A)}function j(A){return e.enter("lineEnding"),e.consume(A),e.exit("lineEnding"),N}function N(A){return l>0&&Ie(A)?Pe(e,k,"linePrefix",l+1)(A):k(A)}function k(A){return A===null||we(A)?e.check(ob,S,_)(A):(e.enter("codeFlowValue"),C(A))}function C(A){return A===null||we(A)?(e.exit("codeFlowValue"),k(A)):(e.consume(A),C)}function _(A){return e.exit("codeFenced"),t(A)}function H(A,$,V){let G=0;return z;function z(P){return A.enter("lineEnding"),A.consume(P),A.exit("lineEnding"),L}function L(P){return A.enter("codeFencedFence"),Ie(P)?Pe(A,U,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(P):U(P)}function U(P){return P===f?(A.enter("codeFencedFenceSequence"),Z(P)):V(P)}function Z(P){return P===f?(G++,A.consume(P),Z):G>=c?(A.exit("codeFencedFenceSequence"),Ie(P)?Pe(A,M,"whitespace")(P):M(P)):V(P)}function M(P){return P===null||we(P)?(A.exit("codeFencedFence"),$(P)):V(P)}}}function UO(e,t,i){const o=this;return a;function a(c){return c===null?i(c):(e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),l)}function l(c){return o.parser.lazy[o.now().line]?i(c):t(c)}}const eh={name:"codeIndented",tokenize:FO},VO={partial:!0,tokenize:GO};function FO(e,t,i){const o=this;return a;function a(p){return e.enter("codeIndented"),Pe(e,l,"linePrefix",5)(p)}function l(p){const m=o.events[o.events.length-1];return m&&m[1].type==="linePrefix"&&m[2].sliceSerialize(m[1],!0).length>=4?c(p):i(p)}function c(p){return p===null?h(p):we(p)?e.attempt(VO,c,h)(p):(e.enter("codeFlowValue"),f(p))}function f(p){return p===null||we(p)?(e.exit("codeFlowValue"),c(p)):(e.consume(p),f)}function h(p){return e.exit("codeIndented"),t(p)}}function GO(e,t,i){const o=this;return a;function a(c){return o.parser.lazy[o.now().line]?i(c):we(c)?(e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),a):Pe(e,l,"linePrefix",5)(c)}function l(c){const f=o.events[o.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?t(c):we(c)?a(c):i(c)}}const YO={name:"codeText",previous:QO,resolve:XO,tokenize:WO};function XO(e){let t=e.length-4,i=3,o,a;if((e[i][1].type==="lineEnding"||e[i][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(o=i;++o<t;)if(e[o][1].type==="codeTextData"){e[i][1].type="codeTextPadding",e[t][1].type="codeTextPadding",i+=2,t-=2;break}}for(o=i-1,t++;++o<=t;)a===void 0?o!==t&&e[o][1].type!=="lineEnding"&&(a=o):(o===t||e[o][1].type==="lineEnding")&&(e[a][1].type="codeTextData",o!==a+2&&(e[a][1].end=e[o-1][1].end,e.splice(a+2,o-a-2),t-=o-a-2,o=a+2),a=void 0);return e}function QO(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function WO(e,t,i){let o=0,a,l;return c;function c(g){return e.enter("codeText"),e.enter("codeTextSequence"),f(g)}function f(g){return g===96?(e.consume(g),o++,f):(e.exit("codeTextSequence"),h(g))}function h(g){return g===null?i(g):g===32?(e.enter("space"),e.consume(g),e.exit("space"),h):g===96?(l=e.enter("codeTextSequence"),a=0,m(g)):we(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),h):(e.enter("codeTextData"),p(g))}function p(g){return g===null||g===32||g===96||we(g)?(e.exit("codeTextData"),h(g)):(e.consume(g),p)}function m(g){return g===96?(e.consume(g),a++,m):a===o?(e.exit("codeTextSequence"),e.exit("codeText"),t(g)):(l.type="codeTextData",p(g))}}class ZO{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,i){const o=i??Number.POSITIVE_INFINITY;return o<this.left.length?this.left.slice(t,o):t>this.left.length?this.right.slice(this.right.length-o+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-o+this.left.length).reverse())}splice(t,i,o){const a=i||0;this.setCursor(Math.trunc(t));const l=this.right.splice(this.right.length-a,Number.POSITIVE_INFINITY);return o&&es(this.left,o),l.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),es(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),es(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const i=this.left.splice(t,Number.POSITIVE_INFINITY);es(this.right,i.reverse())}else{const i=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);es(this.left,i.reverse())}}}function es(e,t){let i=0;if(t.length<1e4)e.push(...t);else for(;i<t.length;)e.push(...t.slice(i,i+1e4)),i+=1e4}function Zw(e){const t={};let i=-1,o,a,l,c,f,h,p;const m=new ZO(e);for(;++i<m.length;){for(;i in t;)i=t[i];if(o=m.get(i),i&&o[1].type==="chunkFlow"&&m.get(i-1)[1].type==="listItemPrefix"&&(h=o[1]._tokenizer.events,l=0,l<h.length&&h[l][1].type==="lineEndingBlank"&&(l+=2),l<h.length&&h[l][1].type==="content"))for(;++l<h.length&&h[l][1].type!=="content";)h[l][1].type==="chunkText"&&(h[l][1]._isInFirstContentOfListItem=!0,l++);if(o[0]==="enter")o[1].contentType&&(Object.assign(t,JO(m,i)),i=t[i],p=!0);else if(o[1]._container){for(l=i,a=void 0;l--;)if(c=m.get(l),c[1].type==="lineEnding"||c[1].type==="lineEndingBlank")c[0]==="enter"&&(a&&(m.get(a)[1].type="lineEndingBlank"),c[1].type="lineEnding",a=l);else if(!(c[1].type==="linePrefix"||c[1].type==="listItemIndent"))break;a&&(o[1].end={...m.get(a)[1].start},f=m.slice(a,i),f.unshift(o),m.splice(a,i-a+1,f))}}return fn(e,0,Number.POSITIVE_INFINITY,m.slice(0)),!p}function JO(e,t){const i=e.get(t)[1],o=e.get(t)[2];let a=t-1;const l=[];let c=i._tokenizer;c||(c=o.parser[i.contentType](i.start),i._contentTypeTextTrailing&&(c._contentTypeTextTrailing=!0));const f=c.events,h=[],p={};let m,g,v=-1,b=i,w=0,S=0;const j=[S];for(;b;){for(;e.get(++a)[1]!==b;);l.push(a),b._tokenizer||(m=o.sliceStream(b),b.next||m.push(null),g&&c.defineSkip(b.start),b._isInFirstContentOfListItem&&(c._gfmTasklistFirstContentOfListItem=!0),c.write(m),b._isInFirstContentOfListItem&&(c._gfmTasklistFirstContentOfListItem=void 0)),g=b,b=b.next}for(b=i;++v<f.length;)f[v][0]==="exit"&&f[v-1][0]==="enter"&&f[v][1].type===f[v-1][1].type&&f[v][1].start.line!==f[v][1].end.line&&(S=v+1,j.push(S),b._tokenizer=void 0,b.previous=void 0,b=b.next);for(c.events=[],b?(b._tokenizer=void 0,b.previous=void 0):j.pop(),v=j.length;v--;){const N=f.slice(j[v],j[v+1]),k=l.pop();h.push([k,k+N.length-1]),e.splice(k,2,N)}for(h.reverse(),v=-1;++v<h.length;)p[w+h[v][0]]=w+h[v][1],w+=h[v][1]-h[v][0]-1;return p}const KO={resolve:tR,tokenize:nR},eR={partial:!0,tokenize:iR};function tR(e){return Zw(e),e}function nR(e,t){let i;return o;function o(f){return e.enter("content"),i=e.enter("chunkContent",{contentType:"content"}),a(f)}function a(f){return f===null?l(f):we(f)?e.check(eR,c,l)(f):(e.consume(f),a)}function l(f){return e.exit("chunkContent"),e.exit("content"),t(f)}function c(f){return e.consume(f),e.exit("chunkContent"),i.next=e.enter("chunkContent",{contentType:"content",previous:i}),i=i.next,a}}function iR(e,t,i){const o=this;return a;function a(c){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),Pe(e,l,"linePrefix")}function l(c){if(c===null||we(c))return i(c);const f=o.events[o.events.length-1];return!o.parser.constructs.disable.null.includes("codeIndented")&&f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?t(c):e.interrupt(o.parser.constructs.flow,i,t)(c)}}function Jw(e,t,i,o,a,l,c,f,h){const p=h||Number.POSITIVE_INFINITY;let m=0;return g;function g(N){return N===60?(e.enter(o),e.enter(a),e.enter(l),e.consume(N),e.exit(l),v):N===null||N===32||N===41||Vc(N)?i(N):(e.enter(o),e.enter(c),e.enter(f),e.enter("chunkString",{contentType:"string"}),S(N))}function v(N){return N===62?(e.enter(l),e.consume(N),e.exit(l),e.exit(a),e.exit(o),t):(e.enter(f),e.enter("chunkString",{contentType:"string"}),b(N))}function b(N){return N===62?(e.exit("chunkString"),e.exit(f),v(N)):N===null||N===60||we(N)?i(N):(e.consume(N),N===92?w:b)}function w(N){return N===60||N===62||N===92?(e.consume(N),b):b(N)}function S(N){return!m&&(N===null||N===41||nt(N))?(e.exit("chunkString"),e.exit(f),e.exit(c),e.exit(o),t(N)):m<p&&N===40?(e.consume(N),m++,S):N===41?(e.consume(N),m--,S):N===null||N===32||N===40||Vc(N)?i(N):(e.consume(N),N===92?j:S)}function j(N){return N===40||N===41||N===92?(e.consume(N),S):S(N)}}function Kw(e,t,i,o,a,l){const c=this;let f=0,h;return p;function p(b){return e.enter(o),e.enter(a),e.consume(b),e.exit(a),e.enter(l),m}function m(b){return f>999||b===null||b===91||b===93&&!h||b===94&&!f&&"_hiddenFootnoteSupport"in c.parser.constructs?i(b):b===93?(e.exit(l),e.enter(a),e.consume(b),e.exit(a),e.exit(o),t):we(b)?(e.enter("lineEnding"),e.consume(b),e.exit("lineEnding"),m):(e.enter("chunkString",{contentType:"string"}),g(b))}function g(b){return b===null||b===91||b===93||we(b)||f++>999?(e.exit("chunkString"),m(b)):(e.consume(b),h||(h=!Ie(b)),b===92?v:g)}function v(b){return b===91||b===92||b===93?(e.consume(b),f++,g):g(b)}}function e1(e,t,i,o,a,l){let c;return f;function f(v){return v===34||v===39||v===40?(e.enter(o),e.enter(a),e.consume(v),e.exit(a),c=v===40?41:v,h):i(v)}function h(v){return v===c?(e.enter(a),e.consume(v),e.exit(a),e.exit(o),t):(e.enter(l),p(v))}function p(v){return v===c?(e.exit(l),h(c)):v===null?i(v):we(v)?(e.enter("lineEnding"),e.consume(v),e.exit("lineEnding"),Pe(e,p,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),m(v))}function m(v){return v===c||v===null||we(v)?(e.exit("chunkString"),p(v)):(e.consume(v),v===92?g:m)}function g(v){return v===c||v===92?(e.consume(v),m):m(v)}}function ds(e,t){let i;return o;function o(a){return we(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),i=!0,o):Ie(a)?Pe(e,o,i?"linePrefix":"lineSuffix")(a):t(a)}}const rR={name:"definition",tokenize:aR},oR={partial:!0,tokenize:sR};function aR(e,t,i){const o=this;let a;return l;function l(b){return e.enter("definition"),c(b)}function c(b){return Kw.call(o,e,f,i,"definitionLabel","definitionLabelMarker","definitionLabelString")(b)}function f(b){return a=Rn(o.sliceSerialize(o.events[o.events.length-1][1]).slice(1,-1)),b===58?(e.enter("definitionMarker"),e.consume(b),e.exit("definitionMarker"),h):i(b)}function h(b){return nt(b)?ds(e,p)(b):p(b)}function p(b){return Jw(e,m,i,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(b)}function m(b){return e.attempt(oR,g,g)(b)}function g(b){return Ie(b)?Pe(e,v,"whitespace")(b):v(b)}function v(b){return b===null||we(b)?(e.exit("definition"),o.parser.defined.push(a),t(b)):i(b)}}function sR(e,t,i){return o;function o(f){return nt(f)?ds(e,a)(f):i(f)}function a(f){return e1(e,l,i,"definitionTitle","definitionTitleMarker","definitionTitleString")(f)}function l(f){return Ie(f)?Pe(e,c,"whitespace")(f):c(f)}function c(f){return f===null||we(f)?t(f):i(f)}}const lR={name:"hardBreakEscape",tokenize:cR};function cR(e,t,i){return o;function o(l){return e.enter("hardBreakEscape"),e.consume(l),a}function a(l){return we(l)?(e.exit("hardBreakEscape"),t(l)):i(l)}}const uR={name:"headingAtx",resolve:dR,tokenize:fR};function dR(e,t){let i=e.length-2,o=3,a,l;return e[o][1].type==="whitespace"&&(o+=2),i-2>o&&e[i][1].type==="whitespace"&&(i-=2),e[i][1].type==="atxHeadingSequence"&&(o===i-1||i-4>o&&e[i-2][1].type==="whitespace")&&(i-=o+1===i?2:4),i>o&&(a={type:"atxHeadingText",start:e[o][1].start,end:e[i][1].end},l={type:"chunkText",start:e[o][1].start,end:e[i][1].end,contentType:"text"},fn(e,o,i-o+1,[["enter",a,t],["enter",l,t],["exit",l,t],["exit",a,t]])),e}function fR(e,t,i){let o=0;return a;function a(m){return e.enter("atxHeading"),l(m)}function l(m){return e.enter("atxHeadingSequence"),c(m)}function c(m){return m===35&&o++<6?(e.consume(m),c):m===null||nt(m)?(e.exit("atxHeadingSequence"),f(m)):i(m)}function f(m){return m===35?(e.enter("atxHeadingSequence"),h(m)):m===null||we(m)?(e.exit("atxHeading"),t(m)):Ie(m)?Pe(e,f,"whitespace")(m):(e.enter("atxHeadingText"),p(m))}function h(m){return m===35?(e.consume(m),h):(e.exit("atxHeadingSequence"),f(m))}function p(m){return m===null||m===35||nt(m)?(e.exit("atxHeadingText"),f(m)):(e.consume(m),p)}}const hR=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],sb=["pre","script","style","textarea"],pR={concrete:!0,name:"htmlFlow",resolveTo:yR,tokenize:xR},mR={partial:!0,tokenize:bR},gR={partial:!0,tokenize:vR};function yR(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function xR(e,t,i){const o=this;let a,l,c,f,h;return p;function p(I){return m(I)}function m(I){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(I),g}function g(I){return I===33?(e.consume(I),v):I===47?(e.consume(I),l=!0,S):I===63?(e.consume(I),a=3,o.interrupt?t:D):Ht(I)?(e.consume(I),c=String.fromCharCode(I),j):i(I)}function v(I){return I===45?(e.consume(I),a=2,b):I===91?(e.consume(I),a=5,f=0,w):Ht(I)?(e.consume(I),a=4,o.interrupt?t:D):i(I)}function b(I){return I===45?(e.consume(I),o.interrupt?t:D):i(I)}function w(I){const ie="CDATA[";return I===ie.charCodeAt(f++)?(e.consume(I),f===ie.length?o.interrupt?t:U:w):i(I)}function S(I){return Ht(I)?(e.consume(I),c=String.fromCharCode(I),j):i(I)}function j(I){if(I===null||I===47||I===62||nt(I)){const ie=I===47,te=c.toLowerCase();return!ie&&!l&&sb.includes(te)?(a=1,o.interrupt?t(I):U(I)):hR.includes(c.toLowerCase())?(a=6,ie?(e.consume(I),N):o.interrupt?t(I):U(I)):(a=7,o.interrupt&&!o.parser.lazy[o.now().line]?i(I):l?k(I):C(I))}return I===45||Lt(I)?(e.consume(I),c+=String.fromCharCode(I),j):i(I)}function N(I){return I===62?(e.consume(I),o.interrupt?t:U):i(I)}function k(I){return Ie(I)?(e.consume(I),k):z(I)}function C(I){return I===47?(e.consume(I),z):I===58||I===95||Ht(I)?(e.consume(I),_):Ie(I)?(e.consume(I),C):z(I)}function _(I){return I===45||I===46||I===58||I===95||Lt(I)?(e.consume(I),_):H(I)}function H(I){return I===61?(e.consume(I),A):Ie(I)?(e.consume(I),H):C(I)}function A(I){return I===null||I===60||I===61||I===62||I===96?i(I):I===34||I===39?(e.consume(I),h=I,$):Ie(I)?(e.consume(I),A):V(I)}function $(I){return I===h?(e.consume(I),h=null,G):I===null||we(I)?i(I):(e.consume(I),$)}function V(I){return I===null||I===34||I===39||I===47||I===60||I===61||I===62||I===96||nt(I)?H(I):(e.consume(I),V)}function G(I){return I===47||I===62||Ie(I)?C(I):i(I)}function z(I){return I===62?(e.consume(I),L):i(I)}function L(I){return I===null||we(I)?U(I):Ie(I)?(e.consume(I),L):i(I)}function U(I){return I===45&&a===2?(e.consume(I),O):I===60&&a===1?(e.consume(I),q):I===62&&a===4?(e.consume(I),B):I===63&&a===3?(e.consume(I),D):I===93&&a===5?(e.consume(I),Q):we(I)&&(a===6||a===7)?(e.exit("htmlFlowData"),e.check(mR,F,Z)(I)):I===null||we(I)?(e.exit("htmlFlowData"),Z(I)):(e.consume(I),U)}function Z(I){return e.check(gR,M,F)(I)}function M(I){return e.enter("lineEnding"),e.consume(I),e.exit("lineEnding"),P}function P(I){return I===null||we(I)?Z(I):(e.enter("htmlFlowData"),U(I))}function O(I){return I===45?(e.consume(I),D):U(I)}function q(I){return I===47?(e.consume(I),c="",Y):U(I)}function Y(I){if(I===62){const ie=c.toLowerCase();return sb.includes(ie)?(e.consume(I),B):U(I)}return Ht(I)&&c.length<8?(e.consume(I),c+=String.fromCharCode(I),Y):U(I)}function Q(I){return I===93?(e.consume(I),D):U(I)}function D(I){return I===62?(e.consume(I),B):I===45&&a===2?(e.consume(I),D):U(I)}function B(I){return I===null||we(I)?(e.exit("htmlFlowData"),F(I)):(e.consume(I),B)}function F(I){return e.exit("htmlFlow"),t(I)}}function vR(e,t,i){const o=this;return a;function a(c){return we(c)?(e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),l):i(c)}function l(c){return o.parser.lazy[o.now().line]?i(c):t(c)}}function bR(e,t,i){return o;function o(a){return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),e.attempt(Is,t,i)}}const wR={name:"htmlText",tokenize:SR};function SR(e,t,i){const o=this;let a,l,c;return f;function f(D){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(D),h}function h(D){return D===33?(e.consume(D),p):D===47?(e.consume(D),H):D===63?(e.consume(D),C):Ht(D)?(e.consume(D),V):i(D)}function p(D){return D===45?(e.consume(D),m):D===91?(e.consume(D),l=0,w):Ht(D)?(e.consume(D),k):i(D)}function m(D){return D===45?(e.consume(D),b):i(D)}function g(D){return D===null?i(D):D===45?(e.consume(D),v):we(D)?(c=g,q(D)):(e.consume(D),g)}function v(D){return D===45?(e.consume(D),b):g(D)}function b(D){return D===62?O(D):D===45?v(D):g(D)}function w(D){const B="CDATA[";return D===B.charCodeAt(l++)?(e.consume(D),l===B.length?S:w):i(D)}function S(D){return D===null?i(D):D===93?(e.consume(D),j):we(D)?(c=S,q(D)):(e.consume(D),S)}function j(D){return D===93?(e.consume(D),N):S(D)}function N(D){return D===62?O(D):D===93?(e.consume(D),N):S(D)}function k(D){return D===null||D===62?O(D):we(D)?(c=k,q(D)):(e.consume(D),k)}function C(D){return D===null?i(D):D===63?(e.consume(D),_):we(D)?(c=C,q(D)):(e.consume(D),C)}function _(D){return D===62?O(D):C(D)}function H(D){return Ht(D)?(e.consume(D),A):i(D)}function A(D){return D===45||Lt(D)?(e.consume(D),A):$(D)}function $(D){return we(D)?(c=$,q(D)):Ie(D)?(e.consume(D),$):O(D)}function V(D){return D===45||Lt(D)?(e.consume(D),V):D===47||D===62||nt(D)?G(D):i(D)}function G(D){return D===47?(e.consume(D),O):D===58||D===95||Ht(D)?(e.consume(D),z):we(D)?(c=G,q(D)):Ie(D)?(e.consume(D),G):O(D)}function z(D){return D===45||D===46||D===58||D===95||Lt(D)?(e.consume(D),z):L(D)}function L(D){return D===61?(e.consume(D),U):we(D)?(c=L,q(D)):Ie(D)?(e.consume(D),L):G(D)}function U(D){return D===null||D===60||D===61||D===62||D===96?i(D):D===34||D===39?(e.consume(D),a=D,Z):we(D)?(c=U,q(D)):Ie(D)?(e.consume(D),U):(e.consume(D),M)}function Z(D){return D===a?(e.consume(D),a=void 0,P):D===null?i(D):we(D)?(c=Z,q(D)):(e.consume(D),Z)}function M(D){return D===null||D===34||D===39||D===60||D===61||D===96?i(D):D===47||D===62||nt(D)?G(D):(e.consume(D),M)}function P(D){return D===47||D===62||nt(D)?G(D):i(D)}function O(D){return D===62?(e.consume(D),e.exit("htmlTextData"),e.exit("htmlText"),t):i(D)}function q(D){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(D),e.exit("lineEnding"),Y}function Y(D){return Ie(D)?Pe(e,Q,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(D):Q(D)}function Q(D){return e.enter("htmlTextData"),c(D)}}const Np={name:"labelEnd",resolveAll:CR,resolveTo:kR,tokenize:TR},NR={tokenize:AR},ER={tokenize:MR},jR={tokenize:DR};function CR(e){let t=-1;const i=[];for(;++t<e.length;){const o=e[t][1];if(i.push(e[t]),o.type==="labelImage"||o.type==="labelLink"||o.type==="labelEnd"){const a=o.type==="labelImage"?4:2;o.type="data",t+=a}}return e.length!==i.length&&fn(e,0,e.length,i),e}function kR(e,t){let i=e.length,o=0,a,l,c,f;for(;i--;)if(a=e[i][1],l){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;e[i][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(c){if(e[i][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(l=i,a.type!=="labelLink")){o=2;break}}else a.type==="labelEnd"&&(c=i);const h={type:e[l][1].type==="labelLink"?"link":"image",start:{...e[l][1].start},end:{...e[e.length-1][1].end}},p={type:"label",start:{...e[l][1].start},end:{...e[c][1].end}},m={type:"labelText",start:{...e[l+o+2][1].end},end:{...e[c-2][1].start}};return f=[["enter",h,t],["enter",p,t]],f=Sn(f,e.slice(l+1,l+o+3)),f=Sn(f,[["enter",m,t]]),f=Sn(f,fu(t.parser.constructs.insideSpan.null,e.slice(l+o+4,c-3),t)),f=Sn(f,[["exit",m,t],e[c-2],e[c-1],["exit",p,t]]),f=Sn(f,e.slice(c+1)),f=Sn(f,[["exit",h,t]]),fn(e,l,e.length,f),e}function TR(e,t,i){const o=this;let a=o.events.length,l,c;for(;a--;)if((o.events[a][1].type==="labelImage"||o.events[a][1].type==="labelLink")&&!o.events[a][1]._balanced){l=o.events[a][1];break}return f;function f(v){return l?l._inactive?g(v):(c=o.parser.defined.includes(Rn(o.sliceSerialize({start:l.end,end:o.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(v),e.exit("labelMarker"),e.exit("labelEnd"),h):i(v)}function h(v){return v===40?e.attempt(NR,m,c?m:g)(v):v===91?e.attempt(ER,m,c?p:g)(v):c?m(v):g(v)}function p(v){return e.attempt(jR,m,g)(v)}function m(v){return t(v)}function g(v){return l._balanced=!0,i(v)}}function AR(e,t,i){return o;function o(g){return e.enter("resource"),e.enter("resourceMarker"),e.consume(g),e.exit("resourceMarker"),a}function a(g){return nt(g)?ds(e,l)(g):l(g)}function l(g){return g===41?m(g):Jw(e,c,f,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(g)}function c(g){return nt(g)?ds(e,h)(g):m(g)}function f(g){return i(g)}function h(g){return g===34||g===39||g===40?e1(e,p,i,"resourceTitle","resourceTitleMarker","resourceTitleString")(g):m(g)}function p(g){return nt(g)?ds(e,m)(g):m(g)}function m(g){return g===41?(e.enter("resourceMarker"),e.consume(g),e.exit("resourceMarker"),e.exit("resource"),t):i(g)}}function MR(e,t,i){const o=this;return a;function a(f){return Kw.call(o,e,l,c,"reference","referenceMarker","referenceString")(f)}function l(f){return o.parser.defined.includes(Rn(o.sliceSerialize(o.events[o.events.length-1][1]).slice(1,-1)))?t(f):i(f)}function c(f){return i(f)}}function DR(e,t,i){return o;function o(l){return e.enter("reference"),e.enter("referenceMarker"),e.consume(l),e.exit("referenceMarker"),a}function a(l){return l===93?(e.enter("referenceMarker"),e.consume(l),e.exit("referenceMarker"),e.exit("reference"),t):i(l)}}const _R={name:"labelStartImage",resolveAll:Np.resolveAll,tokenize:OR};function OR(e,t,i){const o=this;return a;function a(f){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(f),e.exit("labelImageMarker"),l}function l(f){return f===91?(e.enter("labelMarker"),e.consume(f),e.exit("labelMarker"),e.exit("labelImage"),c):i(f)}function c(f){return f===94&&"_hiddenFootnoteSupport"in o.parser.constructs?i(f):t(f)}}const RR={name:"labelStartLink",resolveAll:Np.resolveAll,tokenize:IR};function IR(e,t,i){const o=this;return a;function a(c){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(c),e.exit("labelMarker"),e.exit("labelLink"),l}function l(c){return c===94&&"_hiddenFootnoteSupport"in o.parser.constructs?i(c):t(c)}}const th={name:"lineEnding",tokenize:LR};function LR(e,t){return i;function i(o){return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Pe(e,t,"linePrefix")}}const Mc={name:"thematicBreak",tokenize:zR};function zR(e,t,i){let o=0,a;return l;function l(p){return e.enter("thematicBreak"),c(p)}function c(p){return a=p,f(p)}function f(p){return p===a?(e.enter("thematicBreakSequence"),h(p)):o>=3&&(p===null||we(p))?(e.exit("thematicBreak"),t(p)):i(p)}function h(p){return p===a?(e.consume(p),o++,h):(e.exit("thematicBreakSequence"),Ie(p)?Pe(e,f,"whitespace")(p):f(p))}}const Wt={continuation:{tokenize:PR},exit:UR,name:"list",tokenize:HR},BR={partial:!0,tokenize:VR},$R={partial:!0,tokenize:qR};function HR(e,t,i){const o=this,a=o.events[o.events.length-1];let l=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,c=0;return f;function f(b){const w=o.containerState.type||(b===42||b===43||b===45?"listUnordered":"listOrdered");if(w==="listUnordered"?!o.containerState.marker||b===o.containerState.marker:Hh(b)){if(o.containerState.type||(o.containerState.type=w,e.enter(w,{_container:!0})),w==="listUnordered")return e.enter("listItemPrefix"),b===42||b===45?e.check(Mc,i,p)(b):p(b);if(!o.interrupt||b===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),h(b)}return i(b)}function h(b){return Hh(b)&&++c<10?(e.consume(b),h):(!o.interrupt||c<2)&&(o.containerState.marker?b===o.containerState.marker:b===41||b===46)?(e.exit("listItemValue"),p(b)):i(b)}function p(b){return e.enter("listItemMarker"),e.consume(b),e.exit("listItemMarker"),o.containerState.marker=o.containerState.marker||b,e.check(Is,o.interrupt?i:m,e.attempt(BR,v,g))}function m(b){return o.containerState.initialBlankLine=!0,l++,v(b)}function g(b){return Ie(b)?(e.enter("listItemPrefixWhitespace"),e.consume(b),e.exit("listItemPrefixWhitespace"),v):i(b)}function v(b){return o.containerState.size=l+o.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(b)}}function PR(e,t,i){const o=this;return o.containerState._closeFlow=void 0,e.check(Is,a,l);function a(f){return o.containerState.furtherBlankLines=o.containerState.furtherBlankLines||o.containerState.initialBlankLine,Pe(e,t,"listItemIndent",o.containerState.size+1)(f)}function l(f){return o.containerState.furtherBlankLines||!Ie(f)?(o.containerState.furtherBlankLines=void 0,o.containerState.initialBlankLine=void 0,c(f)):(o.containerState.furtherBlankLines=void 0,o.containerState.initialBlankLine=void 0,e.attempt($R,t,c)(f))}function c(f){return o.containerState._closeFlow=!0,o.interrupt=void 0,Pe(e,e.attempt(Wt,t,i),"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(f)}}function qR(e,t,i){const o=this;return Pe(e,a,"listItemIndent",o.containerState.size+1);function a(l){const c=o.events[o.events.length-1];return c&&c[1].type==="listItemIndent"&&c[2].sliceSerialize(c[1],!0).length===o.containerState.size?t(l):i(l)}}function UR(e){e.exit(this.containerState.type)}function VR(e,t,i){const o=this;return Pe(e,a,"listItemPrefixWhitespace",o.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function a(l){const c=o.events[o.events.length-1];return!Ie(l)&&c&&c[1].type==="listItemPrefixWhitespace"?t(l):i(l)}}const lb={name:"setextUnderline",resolveTo:FR,tokenize:GR};function FR(e,t){let i=e.length,o,a,l;for(;i--;)if(e[i][0]==="enter"){if(e[i][1].type==="content"){o=i;break}e[i][1].type==="paragraph"&&(a=i)}else e[i][1].type==="content"&&e.splice(i,1),!l&&e[i][1].type==="definition"&&(l=i);const c={type:"setextHeading",start:{...e[o][1].start},end:{...e[e.length-1][1].end}};return e[a][1].type="setextHeadingText",l?(e.splice(a,0,["enter",c,t]),e.splice(l+1,0,["exit",e[o][1],t]),e[o][1].end={...e[l][1].end}):e[o][1]=c,e.push(["exit",c,t]),e}function GR(e,t,i){const o=this;let a;return l;function l(p){let m=o.events.length,g;for(;m--;)if(o.events[m][1].type!=="lineEnding"&&o.events[m][1].type!=="linePrefix"&&o.events[m][1].type!=="content"){g=o.events[m][1].type==="paragraph";break}return!o.parser.lazy[o.now().line]&&(o.interrupt||g)?(e.enter("setextHeadingLine"),a=p,c(p)):i(p)}function c(p){return e.enter("setextHeadingLineSequence"),f(p)}function f(p){return p===a?(e.consume(p),f):(e.exit("setextHeadingLineSequence"),Ie(p)?Pe(e,h,"lineSuffix")(p):h(p))}function h(p){return p===null||we(p)?(e.exit("setextHeadingLine"),t(p)):i(p)}}const YR={tokenize:XR};function XR(e){const t=this,i=e.attempt(Is,o,e.attempt(this.parser.constructs.flowInitial,a,Pe(e,e.attempt(this.parser.constructs.flow,a,e.attempt(KO,a)),"linePrefix")));return i;function o(l){if(l===null){e.consume(l);return}return e.enter("lineEndingBlank"),e.consume(l),e.exit("lineEndingBlank"),t.currentConstruct=void 0,i}function a(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),t.currentConstruct=void 0,i}}const QR={resolveAll:n1()},WR=t1("string"),ZR=t1("text");function t1(e){return{resolveAll:n1(e==="text"?JR:void 0),tokenize:t};function t(i){const o=this,a=this.parser.constructs[e],l=i.attempt(a,c,f);return c;function c(m){return p(m)?l(m):f(m)}function f(m){if(m===null){i.consume(m);return}return i.enter("data"),i.consume(m),h}function h(m){return p(m)?(i.exit("data"),l(m)):(i.consume(m),h)}function p(m){if(m===null)return!0;const g=a[m];let v=-1;if(g)for(;++v<g.length;){const b=g[v];if(!b.previous||b.previous.call(o,o.previous))return!0}return!1}}}function n1(e){return t;function t(i,o){let a=-1,l;for(;++a<=i.length;)l===void 0?i[a]&&i[a][1].type==="data"&&(l=a,a++):(!i[a]||i[a][1].type!=="data")&&(a!==l+2&&(i[l][1].end=i[a-1][1].end,i.splice(l+2,a-l-2),a=l+2),l=void 0);return e?e(i,o):i}}function JR(e,t){let i=0;for(;++i<=e.length;)if((i===e.length||e[i][1].type==="lineEnding")&&e[i-1][1].type==="data"){const o=e[i-1][1],a=t.sliceStream(o);let l=a.length,c=-1,f=0,h;for(;l--;){const p=a[l];if(typeof p=="string"){for(c=p.length;p.charCodeAt(c-1)===32;)f++,c--;if(c)break;c=-1}else if(p===-2)h=!0,f++;else if(p!==-1){l++;break}}if(t._contentTypeTextTrailing&&i===e.length&&(f=0),f){const p={type:i===e.length||h||f<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:l?c:o.start._bufferIndex+c,_index:o.start._index+l,line:o.end.line,column:o.end.column-f,offset:o.end.offset-f},end:{...o.end}};o.end={...p.start},o.start.offset===o.end.offset?Object.assign(o,p):(e.splice(i,0,["enter",p,t],["exit",p,t]),i+=2)}i++}return e}const KR={42:Wt,43:Wt,45:Wt,48:Wt,49:Wt,50:Wt,51:Wt,52:Wt,53:Wt,54:Wt,55:Wt,56:Wt,57:Wt,62:Xw},eI={91:rR},tI={[-2]:eh,[-1]:eh,32:eh},nI={35:uR,42:Mc,45:[lb,Mc],60:pR,61:lb,95:Mc,96:ab,126:ab},iI={38:Ww,92:Qw},rI={[-5]:th,[-4]:th,[-3]:th,33:_R,38:Ww,42:Ph,60:[RO,wR],91:RR,92:[lR,Qw],93:Np,95:Ph,96:YO},oI={null:[Ph,QR]},aI={null:[42,95]},sI={null:[]},lI=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:aI,contentInitial:eI,disable:sI,document:KR,flow:nI,flowInitial:tI,insideSpan:oI,string:iI,text:rI},Symbol.toStringTag,{value:"Module"}));function cI(e,t,i){let o={_bufferIndex:-1,_index:0,line:i&&i.line||1,column:i&&i.column||1,offset:i&&i.offset||0};const a={},l=[];let c=[],f=[];const h={attempt:$(H),check:$(A),consume:k,enter:C,exit:_,interrupt:$(A,{interrupt:!0})},p={code:null,containerState:{},defineSkip:S,events:[],now:w,parser:e,previous:null,sliceSerialize:v,sliceStream:b,write:g};let m=t.tokenize.call(p,h);return t.resolveAll&&l.push(t),p;function g(L){return c=Sn(c,L),j(),c[c.length-1]!==null?[]:(V(t,0),p.events=fu(l,p.events,p),p.events)}function v(L,U){return dI(b(L),U)}function b(L){return uI(c,L)}function w(){const{_bufferIndex:L,_index:U,line:Z,column:M,offset:P}=o;return{_bufferIndex:L,_index:U,line:Z,column:M,offset:P}}function S(L){a[L.line]=L.column,z()}function j(){let L;for(;o._index<c.length;){const U=c[o._index];if(typeof U=="string")for(L=o._index,o._bufferIndex<0&&(o._bufferIndex=0);o._index===L&&o._bufferIndex<U.length;)N(U.charCodeAt(o._bufferIndex));else N(U)}}function N(L){m=m(L)}function k(L){we(L)?(o.line++,o.column=1,o.offset+=L===-3?2:1,z()):L!==-1&&(o.column++,o.offset++),o._bufferIndex<0?o._index++:(o._bufferIndex++,o._bufferIndex===c[o._index].length&&(o._bufferIndex=-1,o._index++)),p.previous=L}function C(L,U){const Z=U||{};return Z.type=L,Z.start=w(),p.events.push(["enter",Z,p]),f.push(Z),Z}function _(L){const U=f.pop();return U.end=w(),p.events.push(["exit",U,p]),U}function H(L,U){V(L,U.from)}function A(L,U){U.restore()}function $(L,U){return Z;function Z(M,P,O){let q,Y,Q,D;return Array.isArray(M)?F(M):"tokenize"in M?F([M]):B(M);function B(re){return de;function de(ae){const fe=ae!==null&&re[ae],xe=ae!==null&&re.null,je=[...Array.isArray(fe)?fe:fe?[fe]:[],...Array.isArray(xe)?xe:xe?[xe]:[]];return F(je)(ae)}}function F(re){return q=re,Y=0,re.length===0?O:I(re[Y])}function I(re){return de;function de(ae){return D=G(),Q=re,re.partial||(p.currentConstruct=re),re.name&&p.parser.constructs.disable.null.includes(re.name)?te():re.tokenize.call(U?Object.assign(Object.create(p),U):p,h,ie,te)(ae)}}function ie(re){return L(Q,D),P}function te(re){return D.restore(),++Y<q.length?I(q[Y]):O}}}function V(L,U){L.resolveAll&&!l.includes(L)&&l.push(L),L.resolve&&fn(p.events,U,p.events.length-U,L.resolve(p.events.slice(U),p)),L.resolveTo&&(p.events=L.resolveTo(p.events,p))}function G(){const L=w(),U=p.previous,Z=p.currentConstruct,M=p.events.length,P=Array.from(f);return{from:M,restore:O};function O(){o=L,p.previous=U,p.currentConstruct=Z,p.events.length=M,f=P,z()}}function z(){o.line in a&&o.column<2&&(o.column=a[o.line],o.offset+=a[o.line]-1)}}function uI(e,t){const i=t.start._index,o=t.start._bufferIndex,a=t.end._index,l=t.end._bufferIndex;let c;if(i===a)c=[e[i].slice(o,l)];else{if(c=e.slice(i,a),o>-1){const f=c[0];typeof f=="string"?c[0]=f.slice(o):c.shift()}l>0&&c.push(e[a].slice(0,l))}return c}function dI(e,t){let i=-1;const o=[];let a;for(;++i<e.length;){const l=e[i];let c;if(typeof l=="string")c=l;else switch(l){case-5:{c="\r";break}case-4:{c=`
`;break}case-3:{c=`\r
`;break}case-2:{c=t?" ":"	";break}case-1:{if(!t&&a)continue;c=" ";break}default:c=String.fromCharCode(l)}a=l===-2,o.push(c)}return o.join("")}function fI(e){const o={constructs:Gw([lI,...(e||{}).extensions||[]]),content:a(kO),defined:[],document:a(AO),flow:a(YR),lazy:{},string:a(WR),text:a(ZR)};return o;function a(l){return c;function c(f){return cI(o,l,f)}}}function hI(e){for(;!Zw(e););return e}const cb=/[\0\t\n\r]/g;function pI(){let e=1,t="",i=!0,o;return a;function a(l,c,f){const h=[];let p,m,g,v,b;for(l=t+(typeof l=="string"?l.toString():new TextDecoder(c||void 0).decode(l)),g=0,t="",i&&(l.charCodeAt(0)===65279&&g++,i=void 0);g<l.length;){if(cb.lastIndex=g,p=cb.exec(l),v=p&&p.index!==void 0?p.index:l.length,b=l.charCodeAt(v),!p){t=l.slice(g);break}if(b===10&&g===v&&o)h.push(-3),o=void 0;else switch(o&&(h.push(-5),o=void 0),g<v&&(h.push(l.slice(g,v)),e+=v-g),b){case 0:{h.push(65533),e++;break}case 9:{for(m=Math.ceil(e/4)*4,h.push(-2);e++<m;)h.push(-1);break}case 10:{h.push(-4),e=1;break}default:o=!0,e=1}g=v+1}return f&&(o&&h.push(-5),t&&h.push(t),h.push(null)),h}}const mI=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function gI(e){return e.replace(mI,yI)}function yI(e,t,i){if(t)return t;if(i.charCodeAt(0)===35){const a=i.charCodeAt(1),l=a===120||a===88;return Yw(i.slice(l?2:1),l?16:10)}return Sp(i)||e}const i1={}.hasOwnProperty;function xI(e,t,i){return typeof t!="string"&&(i=t,t=void 0),vI(i)(hI(fI(i).document().write(pI()(e,t,!0))))}function vI(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:l(_t),autolinkProtocol:G,autolinkEmail:G,atxHeading:l(qe),blockQuote:l(xe),characterEscape:G,characterReference:G,codeFenced:l(je),codeFencedFenceInfo:c,codeFencedFenceMeta:c,codeIndented:l(je,c),codeText:l(ve,c),codeTextData:G,data:G,codeFlowValue:G,definition:l(Ee),definitionDestinationString:c,definitionLabelString:c,definitionTitleString:c,emphasis:l(De),hardBreakEscape:l(Ue),hardBreakTrailing:l(Ue),htmlFlow:l(ft,c),htmlFlowData:G,htmlText:l(ft,c),htmlTextData:G,image:l(Kt),label:c,link:l(_t),listItem:l(En),listItemValue:v,listOrdered:l(Pt,g),listUnordered:l(Pt),paragraph:l(Zn),reference:I,referenceString:c,resourceDestinationString:c,resourceTitleString:c,setextHeading:l(qe),strong:l(Jn),thematicBreak:l(Ci)},exit:{atxHeading:h(),atxHeadingSequence:H,autolink:h(),autolinkEmail:fe,autolinkProtocol:ae,blockQuote:h(),characterEscapeValue:z,characterReferenceMarkerHexadecimal:te,characterReferenceMarkerNumeric:te,characterReferenceValue:re,characterReference:de,codeFenced:h(j),codeFencedFence:S,codeFencedFenceInfo:b,codeFencedFenceMeta:w,codeFlowValue:z,codeIndented:h(N),codeText:h(P),codeTextData:z,data:z,definition:h(),definitionDestinationString:_,definitionLabelString:k,definitionTitleString:C,emphasis:h(),hardBreakEscape:h(U),hardBreakTrailing:h(U),htmlFlow:h(Z),htmlFlowData:z,htmlText:h(M),htmlTextData:z,image:h(q),label:Q,labelText:Y,lineEnding:L,link:h(O),listItem:h(),listOrdered:h(),listUnordered:h(),paragraph:h(),referenceString:ie,resourceDestinationString:D,resourceTitleString:B,resource:F,setextHeading:h(V),setextHeadingLineSequence:$,setextHeadingText:A,strong:h(),thematicBreak:h()}};r1(t,(e||{}).mdastExtensions||[]);const i={};return o;function o(se){let pe={type:"root",children:[]};const Se={stack:[pe],tokenStack:[],config:t,enter:f,exit:p,buffer:c,resume:m,data:i},_e=[];let He=-1;for(;++He<se.length;)if(se[He][1].type==="listOrdered"||se[He][1].type==="listUnordered")if(se[He][0]==="enter")_e.push(He);else{const Bt=_e.pop();He=a(se,Bt,He)}for(He=-1;++He<se.length;){const Bt=t[se[He][0]];i1.call(Bt,se[He][1].type)&&Bt[se[He][1].type].call(Object.assign({sliceSerialize:se[He][2].sliceSerialize},Se),se[He][1])}if(Se.tokenStack.length>0){const Bt=Se.tokenStack[Se.tokenStack.length-1];(Bt[1]||ub).call(Se,void 0,Bt[0])}for(pe.position={start:rr(se.length>0?se[0][1].start:{line:1,column:1,offset:0}),end:rr(se.length>0?se[se.length-2][1].end:{line:1,column:1,offset:0})},He=-1;++He<t.transforms.length;)pe=t.transforms[He](pe)||pe;return pe}function a(se,pe,Se){let _e=pe-1,He=-1,Bt=!1,jn,kt,ht,Ot;for(;++_e<=Se;){const Qe=se[_e];switch(Qe[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Qe[0]==="enter"?He++:He--,Ot=void 0;break}case"lineEndingBlank":{Qe[0]==="enter"&&(jn&&!Ot&&!He&&!ht&&(ht=_e),Ot=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Ot=void 0}if(!He&&Qe[0]==="enter"&&Qe[1].type==="listItemPrefix"||He===-1&&Qe[0]==="exit"&&(Qe[1].type==="listUnordered"||Qe[1].type==="listOrdered")){if(jn){let zn=_e;for(kt=void 0;zn--;){const en=se[zn];if(en[1].type==="lineEnding"||en[1].type==="lineEndingBlank"){if(en[0]==="exit")continue;kt&&(se[kt][1].type="lineEndingBlank",Bt=!0),en[1].type="lineEnding",kt=zn}else if(!(en[1].type==="linePrefix"||en[1].type==="blockQuotePrefix"||en[1].type==="blockQuotePrefixWhitespace"||en[1].type==="blockQuoteMarker"||en[1].type==="listItemIndent"))break}ht&&(!kt||ht<kt)&&(jn._spread=!0),jn.end=Object.assign({},kt?se[kt][1].start:Qe[1].end),se.splice(kt||_e,0,["exit",jn,Qe[2]]),_e++,Se++}if(Qe[1].type==="listItemPrefix"){const zn={type:"listItem",_spread:!1,start:Object.assign({},Qe[1].start),end:void 0};jn=zn,se.splice(_e,0,["enter",zn,Qe[2]]),_e++,Se++,ht=void 0,Ot=!0}}}return se[pe][1]._spread=Bt,Se}function l(se,pe){return Se;function Se(_e){f.call(this,se(_e),_e),pe&&pe.call(this,_e)}}function c(){this.stack.push({type:"fragment",children:[]})}function f(se,pe,Se){this.stack[this.stack.length-1].children.push(se),this.stack.push(se),this.tokenStack.push([pe,Se||void 0]),se.position={start:rr(pe.start),end:void 0}}function h(se){return pe;function pe(Se){se&&se.call(this,Se),p.call(this,Se)}}function p(se,pe){const Se=this.stack.pop(),_e=this.tokenStack.pop();if(_e)_e[0].type!==se.type&&(pe?pe.call(this,se,_e[0]):(_e[1]||ub).call(this,se,_e[0]));else throw new Error("Cannot close `"+se.type+"` ("+us({start:se.start,end:se.end})+"): its not open");Se.position.end=rr(se.end)}function m(){return wp(this.stack.pop())}function g(){this.data.expectingFirstListItemValue=!0}function v(se){if(this.data.expectingFirstListItemValue){const pe=this.stack[this.stack.length-2];pe.start=Number.parseInt(this.sliceSerialize(se),10),this.data.expectingFirstListItemValue=void 0}}function b(){const se=this.resume(),pe=this.stack[this.stack.length-1];pe.lang=se}function w(){const se=this.resume(),pe=this.stack[this.stack.length-1];pe.meta=se}function S(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function j(){const se=this.resume(),pe=this.stack[this.stack.length-1];pe.value=se.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function N(){const se=this.resume(),pe=this.stack[this.stack.length-1];pe.value=se.replace(/(\r?\n|\r)$/g,"")}function k(se){const pe=this.resume(),Se=this.stack[this.stack.length-1];Se.label=pe,Se.identifier=Rn(this.sliceSerialize(se)).toLowerCase()}function C(){const se=this.resume(),pe=this.stack[this.stack.length-1];pe.title=se}function _(){const se=this.resume(),pe=this.stack[this.stack.length-1];pe.url=se}function H(se){const pe=this.stack[this.stack.length-1];if(!pe.depth){const Se=this.sliceSerialize(se).length;pe.depth=Se}}function A(){this.data.setextHeadingSlurpLineEnding=!0}function $(se){const pe=this.stack[this.stack.length-1];pe.depth=this.sliceSerialize(se).codePointAt(0)===61?1:2}function V(){this.data.setextHeadingSlurpLineEnding=void 0}function G(se){const Se=this.stack[this.stack.length-1].children;let _e=Se[Se.length-1];(!_e||_e.type!=="text")&&(_e=Nt(),_e.position={start:rr(se.start),end:void 0},Se.push(_e)),this.stack.push(_e)}function z(se){const pe=this.stack.pop();pe.value+=this.sliceSerialize(se),pe.position.end=rr(se.end)}function L(se){const pe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Se=pe.children[pe.children.length-1];Se.position.end=rr(se.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(pe.type)&&(G.call(this,se),z.call(this,se))}function U(){this.data.atHardBreak=!0}function Z(){const se=this.resume(),pe=this.stack[this.stack.length-1];pe.value=se}function M(){const se=this.resume(),pe=this.stack[this.stack.length-1];pe.value=se}function P(){const se=this.resume(),pe=this.stack[this.stack.length-1];pe.value=se}function O(){const se=this.stack[this.stack.length-1];if(this.data.inReference){const pe=this.data.referenceType||"shortcut";se.type+="Reference",se.referenceType=pe,delete se.url,delete se.title}else delete se.identifier,delete se.label;this.data.referenceType=void 0}function q(){const se=this.stack[this.stack.length-1];if(this.data.inReference){const pe=this.data.referenceType||"shortcut";se.type+="Reference",se.referenceType=pe,delete se.url,delete se.title}else delete se.identifier,delete se.label;this.data.referenceType=void 0}function Y(se){const pe=this.sliceSerialize(se),Se=this.stack[this.stack.length-2];Se.label=gI(pe),Se.identifier=Rn(pe).toLowerCase()}function Q(){const se=this.stack[this.stack.length-1],pe=this.resume(),Se=this.stack[this.stack.length-1];if(this.data.inReference=!0,Se.type==="link"){const _e=se.children;Se.children=_e}else Se.alt=pe}function D(){const se=this.resume(),pe=this.stack[this.stack.length-1];pe.url=se}function B(){const se=this.resume(),pe=this.stack[this.stack.length-1];pe.title=se}function F(){this.data.inReference=void 0}function I(){this.data.referenceType="collapsed"}function ie(se){const pe=this.resume(),Se=this.stack[this.stack.length-1];Se.label=pe,Se.identifier=Rn(this.sliceSerialize(se)).toLowerCase(),this.data.referenceType="full"}function te(se){this.data.characterReferenceType=se.type}function re(se){const pe=this.sliceSerialize(se),Se=this.data.characterReferenceType;let _e;Se?(_e=Yw(pe,Se==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):_e=Sp(pe);const He=this.stack[this.stack.length-1];He.value+=_e}function de(se){const pe=this.stack.pop();pe.position.end=rr(se.end)}function ae(se){z.call(this,se);const pe=this.stack[this.stack.length-1];pe.url=this.sliceSerialize(se)}function fe(se){z.call(this,se);const pe=this.stack[this.stack.length-1];pe.url="mailto:"+this.sliceSerialize(se)}function xe(){return{type:"blockquote",children:[]}}function je(){return{type:"code",lang:null,meta:null,value:""}}function ve(){return{type:"inlineCode",value:""}}function Ee(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function De(){return{type:"emphasis",children:[]}}function qe(){return{type:"heading",depth:0,children:[]}}function Ue(){return{type:"break"}}function ft(){return{type:"html",value:""}}function Kt(){return{type:"image",title:null,url:"",alt:null}}function _t(){return{type:"link",title:null,url:"",children:[]}}function Pt(se){return{type:"list",ordered:se.type==="listOrdered",start:null,spread:se._spread,children:[]}}function En(se){return{type:"listItem",spread:se._spread,checked:null,children:[]}}function Zn(){return{type:"paragraph",children:[]}}function Jn(){return{type:"strong",children:[]}}function Nt(){return{type:"text",value:""}}function Ci(){return{type:"thematicBreak"}}}function rr(e){return{line:e.line,column:e.column,offset:e.offset}}function r1(e,t){let i=-1;for(;++i<t.length;){const o=t[i];Array.isArray(o)?r1(e,o):bI(e,o)}}function bI(e,t){let i;for(i in t)if(i1.call(t,i))switch(i){case"canContainEols":{const o=t[i];o&&e[i].push(...o);break}case"transforms":{const o=t[i];o&&e[i].push(...o);break}case"enter":case"exit":{const o=t[i];o&&Object.assign(e[i],o);break}}}function ub(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+us({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+us({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+us({start:t.start,end:t.end})+") is still open")}function wI(e){const t=this;t.parser=i;function i(o){return xI(o,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function SI(e,t){const i={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,i),e.applyData(t,i)}function NI(e,t){const i={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,i),[e.applyData(t,i),{type:"text",value:`
`}]}function EI(e,t){const i=t.value?t.value+`
`:"",o={},a=t.lang?t.lang.split(/\s+/):[];a.length>0&&(o.className=["language-"+a[0]]);let l={type:"element",tagName:"code",properties:o,children:[{type:"text",value:i}]};return t.meta&&(l.data={meta:t.meta}),e.patch(t,l),l=e.applyData(t,l),l={type:"element",tagName:"pre",properties:{},children:[l]},e.patch(t,l),l}function jI(e,t){const i={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function CI(e,t){const i={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function kI(e,t){const i=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",o=String(t.identifier).toUpperCase(),a=Jo(o.toLowerCase()),l=e.footnoteOrder.indexOf(o);let c,f=e.footnoteCounts.get(o);f===void 0?(f=0,e.footnoteOrder.push(o),c=e.footnoteOrder.length):c=l+1,f+=1,e.footnoteCounts.set(o,f);const h={type:"element",tagName:"a",properties:{href:"#"+i+"fn-"+a,id:i+"fnref-"+a+(f>1?"-"+f:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(c)}]};e.patch(t,h);const p={type:"element",tagName:"sup",properties:{},children:[h]};return e.patch(t,p),e.applyData(t,p)}function TI(e,t){const i={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function AI(e,t){if(e.options.allowDangerousHtml){const i={type:"raw",value:t.value};return e.patch(t,i),e.applyData(t,i)}}function o1(e,t){const i=t.referenceType;let o="]";if(i==="collapsed"?o+="[]":i==="full"&&(o+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+o}];const a=e.all(t),l=a[0];l&&l.type==="text"?l.value="["+l.value:a.unshift({type:"text",value:"["});const c=a[a.length-1];return c&&c.type==="text"?c.value+=o:a.push({type:"text",value:o}),a}function MI(e,t){const i=String(t.identifier).toUpperCase(),o=e.definitionById.get(i);if(!o)return o1(e,t);const a={src:Jo(o.url||""),alt:t.alt};o.title!==null&&o.title!==void 0&&(a.title=o.title);const l={type:"element",tagName:"img",properties:a,children:[]};return e.patch(t,l),e.applyData(t,l)}function DI(e,t){const i={src:Jo(t.url)};t.alt!==null&&t.alt!==void 0&&(i.alt=t.alt),t.title!==null&&t.title!==void 0&&(i.title=t.title);const o={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,o),e.applyData(t,o)}function _I(e,t){const i={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,i);const o={type:"element",tagName:"code",properties:{},children:[i]};return e.patch(t,o),e.applyData(t,o)}function OI(e,t){const i=String(t.identifier).toUpperCase(),o=e.definitionById.get(i);if(!o)return o1(e,t);const a={href:Jo(o.url||"")};o.title!==null&&o.title!==void 0&&(a.title=o.title);const l={type:"element",tagName:"a",properties:a,children:e.all(t)};return e.patch(t,l),e.applyData(t,l)}function RI(e,t){const i={href:Jo(t.url)};t.title!==null&&t.title!==void 0&&(i.title=t.title);const o={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,o),e.applyData(t,o)}function II(e,t,i){const o=e.all(t),a=i?LI(i):a1(t),l={},c=[];if(typeof t.checked=="boolean"){const m=o[0];let g;m&&m.type==="element"&&m.tagName==="p"?g=m:(g={type:"element",tagName:"p",properties:{},children:[]},o.unshift(g)),g.children.length>0&&g.children.unshift({type:"text",value:" "}),g.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),l.className=["task-list-item"]}let f=-1;for(;++f<o.length;){const m=o[f];(a||f!==0||m.type!=="element"||m.tagName!=="p")&&c.push({type:"text",value:`
`}),m.type==="element"&&m.tagName==="p"&&!a?c.push(...m.children):c.push(m)}const h=o[o.length-1];h&&(a||h.type!=="element"||h.tagName!=="p")&&c.push({type:"text",value:`
`});const p={type:"element",tagName:"li",properties:l,children:c};return e.patch(t,p),e.applyData(t,p)}function LI(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const i=e.children;let o=-1;for(;!t&&++o<i.length;)t=a1(i[o])}return t}function a1(e){const t=e.spread;return t??e.children.length>1}function zI(e,t){const i={},o=e.all(t);let a=-1;for(typeof t.start=="number"&&t.start!==1&&(i.start=t.start);++a<o.length;){const c=o[a];if(c.type==="element"&&c.tagName==="li"&&c.properties&&Array.isArray(c.properties.className)&&c.properties.className.includes("task-list-item")){i.className=["contains-task-list"];break}}const l={type:"element",tagName:t.ordered?"ol":"ul",properties:i,children:e.wrap(o,!0)};return e.patch(t,l),e.applyData(t,l)}function BI(e,t){const i={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function $I(e,t){const i={type:"root",children:e.wrap(e.all(t))};return e.patch(t,i),e.applyData(t,i)}function HI(e,t){const i={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function PI(e,t){const i=e.all(t),o=i.shift(),a=[];if(o){const c={type:"element",tagName:"thead",properties:{},children:e.wrap([o],!0)};e.patch(t.children[0],c),a.push(c)}if(i.length>0){const c={type:"element",tagName:"tbody",properties:{},children:e.wrap(i,!0)},f=yp(t.children[1]),h=$w(t.children[t.children.length-1]);f&&h&&(c.position={start:f,end:h}),a.push(c)}const l={type:"element",tagName:"table",properties:{},children:e.wrap(a,!0)};return e.patch(t,l),e.applyData(t,l)}function qI(e,t,i){const o=i?i.children:void 0,l=(o?o.indexOf(t):1)===0?"th":"td",c=i&&i.type==="table"?i.align:void 0,f=c?c.length:t.children.length;let h=-1;const p=[];for(;++h<f;){const g=t.children[h],v={},b=c?c[h]:void 0;b&&(v.align=b);let w={type:"element",tagName:l,properties:v,children:[]};g&&(w.children=e.all(g),e.patch(g,w),w=e.applyData(g,w)),p.push(w)}const m={type:"element",tagName:"tr",properties:{},children:e.wrap(p,!0)};return e.patch(t,m),e.applyData(t,m)}function UI(e,t){const i={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}const db=9,fb=32;function VI(e){const t=String(e),i=/\r?\n|\r/g;let o=i.exec(t),a=0;const l=[];for(;o;)l.push(hb(t.slice(a,o.index),a>0,!0),o[0]),a=o.index+o[0].length,o=i.exec(t);return l.push(hb(t.slice(a),a>0,!1)),l.join("")}function hb(e,t,i){let o=0,a=e.length;if(t){let l=e.codePointAt(o);for(;l===db||l===fb;)o++,l=e.codePointAt(o)}if(i){let l=e.codePointAt(a-1);for(;l===db||l===fb;)a--,l=e.codePointAt(a-1)}return a>o?e.slice(o,a):""}function FI(e,t){const i={type:"text",value:VI(String(t.value))};return e.patch(t,i),e.applyData(t,i)}function GI(e,t){const i={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,i),e.applyData(t,i)}const YI={blockquote:SI,break:NI,code:EI,delete:jI,emphasis:CI,footnoteReference:kI,heading:TI,html:AI,imageReference:MI,image:DI,inlineCode:_I,linkReference:OI,link:RI,listItem:II,list:zI,paragraph:BI,root:$I,strong:HI,table:PI,tableCell:UI,tableRow:qI,text:FI,thematicBreak:GI,toml:vc,yaml:vc,definition:vc,footnoteDefinition:vc};function vc(){}const s1=-1,hu=0,fs=1,Fc=2,Ep=3,jp=4,Cp=5,kp=6,l1=7,c1=8,pb=typeof self=="object"?self:globalThis,XI=(e,t)=>{const i=(a,l)=>(e.set(l,a),a),o=a=>{if(e.has(a))return e.get(a);const[l,c]=t[a];switch(l){case hu:case s1:return i(c,a);case fs:{const f=i([],a);for(const h of c)f.push(o(h));return f}case Fc:{const f=i({},a);for(const[h,p]of c)f[o(h)]=o(p);return f}case Ep:return i(new Date(c),a);case jp:{const{source:f,flags:h}=c;return i(new RegExp(f,h),a)}case Cp:{const f=i(new Map,a);for(const[h,p]of c)f.set(o(h),o(p));return f}case kp:{const f=i(new Set,a);for(const h of c)f.add(o(h));return f}case l1:{const{name:f,message:h}=c;return i(new pb[f](h),a)}case c1:return i(BigInt(c),a);case"BigInt":return i(Object(BigInt(c)),a);case"ArrayBuffer":return i(new Uint8Array(c).buffer,c);case"DataView":{const{buffer:f}=new Uint8Array(c);return i(new DataView(f),c)}}return i(new pb[l](c),a)};return o},mb=e=>XI(new Map,e)(0),Oo="",{toString:QI}={},{keys:WI}=Object,ts=e=>{const t=typeof e;if(t!=="object"||!e)return[hu,t];const i=QI.call(e).slice(8,-1);switch(i){case"Array":return[fs,Oo];case"Object":return[Fc,Oo];case"Date":return[Ep,Oo];case"RegExp":return[jp,Oo];case"Map":return[Cp,Oo];case"Set":return[kp,Oo];case"DataView":return[fs,i]}return i.includes("Array")?[fs,i]:i.includes("Error")?[l1,i]:[Fc,i]},bc=([e,t])=>e===hu&&(t==="function"||t==="symbol"),ZI=(e,t,i,o)=>{const a=(c,f)=>{const h=o.push(c)-1;return i.set(f,h),h},l=c=>{if(i.has(c))return i.get(c);let[f,h]=ts(c);switch(f){case hu:{let m=c;switch(h){case"bigint":f=c1,m=c.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+h);m=null;break;case"undefined":return a([s1],c)}return a([f,m],c)}case fs:{if(h){let v=c;return h==="DataView"?v=new Uint8Array(c.buffer):h==="ArrayBuffer"&&(v=new Uint8Array(c)),a([h,[...v]],c)}const m=[],g=a([f,m],c);for(const v of c)m.push(l(v));return g}case Fc:{if(h)switch(h){case"BigInt":return a([h,c.toString()],c);case"Boolean":case"Number":case"String":return a([h,c.valueOf()],c)}if(t&&"toJSON"in c)return l(c.toJSON());const m=[],g=a([f,m],c);for(const v of WI(c))(e||!bc(ts(c[v])))&&m.push([l(v),l(c[v])]);return g}case Ep:return a([f,c.toISOString()],c);case jp:{const{source:m,flags:g}=c;return a([f,{source:m,flags:g}],c)}case Cp:{const m=[],g=a([f,m],c);for(const[v,b]of c)(e||!(bc(ts(v))||bc(ts(b))))&&m.push([l(v),l(b)]);return g}case kp:{const m=[],g=a([f,m],c);for(const v of c)(e||!bc(ts(v)))&&m.push(l(v));return g}}const{message:p}=c;return a([f,{name:h,message:p}],c)};return l},gb=(e,{json:t,lossy:i}={})=>{const o=[];return ZI(!(t||i),!!t,new Map,o)(e),o},Gc=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?mb(gb(e,t)):structuredClone(e):(e,t)=>mb(gb(e,t));function JI(e,t){const i=[{type:"text",value:""}];return t>1&&i.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),i}function KI(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function eL(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",i=e.options.footnoteBackContent||JI,o=e.options.footnoteBackLabel||KI,a=e.options.footnoteLabel||"Footnotes",l=e.options.footnoteLabelTagName||"h2",c=e.options.footnoteLabelProperties||{className:["sr-only"]},f=[];let h=-1;for(;++h<e.footnoteOrder.length;){const p=e.footnoteById.get(e.footnoteOrder[h]);if(!p)continue;const m=e.all(p),g=String(p.identifier).toUpperCase(),v=Jo(g.toLowerCase());let b=0;const w=[],S=e.footnoteCounts.get(g);for(;S!==void 0&&++b<=S;){w.length>0&&w.push({type:"text",value:" "});let k=typeof i=="string"?i:i(h,b);typeof k=="string"&&(k={type:"text",value:k}),w.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+v+(b>1?"-"+b:""),dataFootnoteBackref:"",ariaLabel:typeof o=="string"?o:o(h,b),className:["data-footnote-backref"]},children:Array.isArray(k)?k:[k]})}const j=m[m.length-1];if(j&&j.type==="element"&&j.tagName==="p"){const k=j.children[j.children.length-1];k&&k.type==="text"?k.value+=" ":j.children.push({type:"text",value:" "}),j.children.push(...w)}else m.push(...w);const N={type:"element",tagName:"li",properties:{id:t+"fn-"+v},children:e.wrap(m,!0)};e.patch(p,N),f.push(N)}if(f.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:l,properties:{...Gc(c),id:"footnote-label"},children:[{type:"text",value:a}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(f,!0)},{type:"text",value:`
`}]}}const pu=(function(e){if(e==null)return rL;if(typeof e=="function")return mu(e);if(typeof e=="object")return Array.isArray(e)?tL(e):nL(e);if(typeof e=="string")return iL(e);throw new Error("Expected function, string, or object as test")});function tL(e){const t=[];let i=-1;for(;++i<e.length;)t[i]=pu(e[i]);return mu(o);function o(...a){let l=-1;for(;++l<t.length;)if(t[l].apply(this,a))return!0;return!1}}function nL(e){const t=e;return mu(i);function i(o){const a=o;let l;for(l in e)if(a[l]!==t[l])return!1;return!0}}function iL(e){return mu(t);function t(i){return i&&i.type===e}}function mu(e){return t;function t(i,o,a){return!!(oL(i)&&e.call(this,i,typeof o=="number"?o:void 0,a||void 0))}}function rL(){return!0}function oL(e){return e!==null&&typeof e=="object"&&"type"in e}const u1=[],aL=!0,qh=!1,sL="skip";function d1(e,t,i,o){let a;typeof t=="function"&&typeof i!="function"?(o=i,i=t):a=t;const l=pu(a),c=o?-1:1;f(e,void 0,[])();function f(h,p,m){const g=h&&typeof h=="object"?h:{};if(typeof g.type=="string"){const b=typeof g.tagName=="string"?g.tagName:typeof g.name=="string"?g.name:void 0;Object.defineProperty(v,"name",{value:"node ("+(h.type+(b?"<"+b+">":""))+")"})}return v;function v(){let b=u1,w,S,j;if((!t||l(h,p,m[m.length-1]||void 0))&&(b=lL(i(h,m)),b[0]===qh))return b;if("children"in h&&h.children){const N=h;if(N.children&&b[0]!==sL)for(S=(o?N.children.length:-1)+c,j=m.concat(N);S>-1&&S<N.children.length;){const k=N.children[S];if(w=f(k,S,j)(),w[0]===qh)return w;S=typeof w[1]=="number"?w[1]:S+c}}return b}}}function lL(e){return Array.isArray(e)?e:typeof e=="number"?[aL,e]:e==null?u1:[e]}function Tp(e,t,i,o){let a,l,c;typeof t=="function"&&typeof i!="function"?(l=void 0,c=t,a=i):(l=t,c=i,a=o),d1(e,l,f,a);function f(h,p){const m=p[p.length-1],g=m?m.children.indexOf(h):void 0;return c(h,g,m)}}const Uh={}.hasOwnProperty,cL={};function uL(e,t){const i=t||cL,o=new Map,a=new Map,l=new Map,c={...YI,...i.handlers},f={all:p,applyData:fL,definitionById:o,footnoteById:a,footnoteCounts:l,footnoteOrder:[],handlers:c,one:h,options:i,patch:dL,wrap:pL};return Tp(e,function(m){if(m.type==="definition"||m.type==="footnoteDefinition"){const g=m.type==="definition"?o:a,v=String(m.identifier).toUpperCase();g.has(v)||g.set(v,m)}}),f;function h(m,g){const v=m.type,b=f.handlers[v];if(Uh.call(f.handlers,v)&&b)return b(f,m,g);if(f.options.passThrough&&f.options.passThrough.includes(v)){if("children"in m){const{children:S,...j}=m,N=Gc(j);return N.children=f.all(m),N}return Gc(m)}return(f.options.unknownHandler||hL)(f,m,g)}function p(m){const g=[];if("children"in m){const v=m.children;let b=-1;for(;++b<v.length;){const w=f.one(v[b],m);if(w){if(b&&v[b-1].type==="break"&&(!Array.isArray(w)&&w.type==="text"&&(w.value=yb(w.value)),!Array.isArray(w)&&w.type==="element")){const S=w.children[0];S&&S.type==="text"&&(S.value=yb(S.value))}Array.isArray(w)?g.push(...w):g.push(w)}}}return g}}function dL(e,t){e.position&&(t.position=K_(e))}function fL(e,t){let i=t;if(e&&e.data){const o=e.data.hName,a=e.data.hChildren,l=e.data.hProperties;if(typeof o=="string")if(i.type==="element")i.tagName=o;else{const c="children"in i?i.children:[i];i={type:"element",tagName:o,properties:{},children:c}}i.type==="element"&&l&&Object.assign(i.properties,Gc(l)),"children"in i&&i.children&&a!==null&&a!==void 0&&(i.children=a)}return i}function hL(e,t){const i=t.data||{},o="value"in t&&!(Uh.call(i,"hProperties")||Uh.call(i,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,o),e.applyData(t,o)}function pL(e,t){const i=[];let o=-1;for(t&&i.push({type:"text",value:`
`});++o<e.length;)o&&i.push({type:"text",value:`
`}),i.push(e[o]);return t&&e.length>0&&i.push({type:"text",value:`
`}),i}function yb(e){let t=0,i=e.charCodeAt(t);for(;i===9||i===32;)t++,i=e.charCodeAt(t);return e.slice(t)}function xb(e,t){const i=uL(e,t),o=i.one(e,void 0),a=eL(i),l=Array.isArray(o)?{type:"root",children:o}:o||{type:"root",children:[]};return a&&l.children.push({type:"text",value:`
`},a),l}function mL(e,t){return e&&"run"in e?async function(i,o){const a=xb(i,{file:o,...t});await e.run(a,o)}:function(i,o){return xb(i,{file:o,...e||t})}}function vb(e){if(e)throw e}var nh,bb;function gL(){if(bb)return nh;bb=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,i=Object.defineProperty,o=Object.getOwnPropertyDescriptor,a=function(p){return typeof Array.isArray=="function"?Array.isArray(p):t.call(p)==="[object Array]"},l=function(p){if(!p||t.call(p)!=="[object Object]")return!1;var m=e.call(p,"constructor"),g=p.constructor&&p.constructor.prototype&&e.call(p.constructor.prototype,"isPrototypeOf");if(p.constructor&&!m&&!g)return!1;var v;for(v in p);return typeof v>"u"||e.call(p,v)},c=function(p,m){i&&m.name==="__proto__"?i(p,m.name,{enumerable:!0,configurable:!0,value:m.newValue,writable:!0}):p[m.name]=m.newValue},f=function(p,m){if(m==="__proto__")if(e.call(p,m)){if(o)return o(p,m).value}else return;return p[m]};return nh=function h(){var p,m,g,v,b,w,S=arguments[0],j=1,N=arguments.length,k=!1;for(typeof S=="boolean"&&(k=S,S=arguments[1]||{},j=2),(S==null||typeof S!="object"&&typeof S!="function")&&(S={});j<N;++j)if(p=arguments[j],p!=null)for(m in p)g=f(S,m),v=f(p,m),S!==v&&(k&&v&&(l(v)||(b=a(v)))?(b?(b=!1,w=g&&a(g)?g:[]):w=g&&l(g)?g:{},c(S,{name:m,newValue:h(k,w,v)})):typeof v<"u"&&c(S,{name:m,newValue:v}));return S},nh}var yL=gL();const ih=Wc(yL);function Vh(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function xL(){const e=[],t={run:i,use:o};return t;function i(...a){let l=-1;const c=a.pop();if(typeof c!="function")throw new TypeError("Expected function as last argument, not "+c);f(null,...a);function f(h,...p){const m=e[++l];let g=-1;if(h){c(h);return}for(;++g<a.length;)(p[g]===null||p[g]===void 0)&&(p[g]=a[g]);a=p,m?vL(m,f)(...p):c(null,...p)}}function o(a){if(typeof a!="function")throw new TypeError("Expected `middelware` to be a function, not "+a);return e.push(a),t}}function vL(e,t){let i;return o;function o(...c){const f=e.length>c.length;let h;f&&c.push(a);try{h=e.apply(this,c)}catch(p){const m=p;if(f&&i)throw m;return a(m)}f||(h&&h.then&&typeof h.then=="function"?h.then(l,a):h instanceof Error?a(h):l(h))}function a(c,...f){i||(i=!0,t(c,...f))}function l(c){a(null,c)}}const Vn={basename:bL,dirname:wL,extname:SL,join:NL,sep:"/"};function bL(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Ls(e);let i=0,o=-1,a=e.length,l;if(t===void 0||t.length===0||t.length>e.length){for(;a--;)if(e.codePointAt(a)===47){if(l){i=a+1;break}}else o<0&&(l=!0,o=a+1);return o<0?"":e.slice(i,o)}if(t===e)return"";let c=-1,f=t.length-1;for(;a--;)if(e.codePointAt(a)===47){if(l){i=a+1;break}}else c<0&&(l=!0,c=a+1),f>-1&&(e.codePointAt(a)===t.codePointAt(f--)?f<0&&(o=a):(f=-1,o=c));return i===o?o=c:o<0&&(o=e.length),e.slice(i,o)}function wL(e){if(Ls(e),e.length===0)return".";let t=-1,i=e.length,o;for(;--i;)if(e.codePointAt(i)===47){if(o){t=i;break}}else o||(o=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function SL(e){Ls(e);let t=e.length,i=-1,o=0,a=-1,l=0,c;for(;t--;){const f=e.codePointAt(t);if(f===47){if(c){o=t+1;break}continue}i<0&&(c=!0,i=t+1),f===46?a<0?a=t:l!==1&&(l=1):a>-1&&(l=-1)}return a<0||i<0||l===0||l===1&&a===i-1&&a===o+1?"":e.slice(a,i)}function NL(...e){let t=-1,i;for(;++t<e.length;)Ls(e[t]),e[t]&&(i=i===void 0?e[t]:i+"/"+e[t]);return i===void 0?".":EL(i)}function EL(e){Ls(e);const t=e.codePointAt(0)===47;let i=jL(e,!t);return i.length===0&&!t&&(i="."),i.length>0&&e.codePointAt(e.length-1)===47&&(i+="/"),t?"/"+i:i}function jL(e,t){let i="",o=0,a=-1,l=0,c=-1,f,h;for(;++c<=e.length;){if(c<e.length)f=e.codePointAt(c);else{if(f===47)break;f=47}if(f===47){if(!(a===c-1||l===1))if(a!==c-1&&l===2){if(i.length<2||o!==2||i.codePointAt(i.length-1)!==46||i.codePointAt(i.length-2)!==46){if(i.length>2){if(h=i.lastIndexOf("/"),h!==i.length-1){h<0?(i="",o=0):(i=i.slice(0,h),o=i.length-1-i.lastIndexOf("/")),a=c,l=0;continue}}else if(i.length>0){i="",o=0,a=c,l=0;continue}}t&&(i=i.length>0?i+"/..":"..",o=2)}else i.length>0?i+="/"+e.slice(a+1,c):i=e.slice(a+1,c),o=c-a-1;a=c,l=0}else f===46&&l>-1?l++:l=-1}return i}function Ls(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const CL={cwd:kL};function kL(){return"/"}function Fh(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function TL(e){if(typeof e=="string")e=new URL(e);else if(!Fh(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return AL(e)}function AL(e){if(e.hostname!==""){const o=new TypeError('File URL host must be "localhost" or empty on darwin');throw o.code="ERR_INVALID_FILE_URL_HOST",o}const t=e.pathname;let i=-1;for(;++i<t.length;)if(t.codePointAt(i)===37&&t.codePointAt(i+1)===50){const o=t.codePointAt(i+2);if(o===70||o===102){const a=new TypeError("File URL path must not include encoded / characters");throw a.code="ERR_INVALID_FILE_URL_PATH",a}}return decodeURIComponent(t)}const rh=["history","path","basename","stem","extname","dirname"];class f1{constructor(t){let i;t?Fh(t)?i={path:t}:typeof t=="string"||ML(t)?i={value:t}:i=t:i={},this.cwd="cwd"in i?"":CL.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let o=-1;for(;++o<rh.length;){const l=rh[o];l in i&&i[l]!==void 0&&i[l]!==null&&(this[l]=l==="history"?[...i[l]]:i[l])}let a;for(a in i)rh.includes(a)||(this[a]=i[a])}get basename(){return typeof this.path=="string"?Vn.basename(this.path):void 0}set basename(t){ah(t,"basename"),oh(t,"basename"),this.path=Vn.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Vn.dirname(this.path):void 0}set dirname(t){wb(this.basename,"dirname"),this.path=Vn.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Vn.extname(this.path):void 0}set extname(t){if(oh(t,"extname"),wb(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Vn.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Fh(t)&&(t=TL(t)),ah(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Vn.basename(this.path,this.extname):void 0}set stem(t){ah(t,"stem"),oh(t,"stem"),this.path=Vn.join(this.dirname||"",t+(this.extname||""))}fail(t,i,o){const a=this.message(t,i,o);throw a.fatal=!0,a}info(t,i,o){const a=this.message(t,i,o);return a.fatal=void 0,a}message(t,i,o){const a=new zt(t,i,o);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function oh(e,t){if(e&&e.includes(Vn.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Vn.sep+"`")}function ah(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function wb(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function ML(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const DL=(function(e){const o=this.constructor.prototype,a=o[e],l=function(){return a.apply(l,arguments)};return Object.setPrototypeOf(l,o),l}),_L={}.hasOwnProperty;class Ap extends DL{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=xL()}copy(){const t=new Ap;let i=-1;for(;++i<this.attachers.length;){const o=this.attachers[i];t.use(...o)}return t.data(ih(!0,{},this.namespace)),t}data(t,i){return typeof t=="string"?arguments.length===2?(ch("data",this.frozen),this.namespace[t]=i,this):_L.call(this.namespace,t)&&this.namespace[t]||void 0:t?(ch("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[i,...o]=this.attachers[this.freezeIndex];if(o[0]===!1)continue;o[0]===!0&&(o[0]=void 0);const a=i.call(t,...o);typeof a=="function"&&this.transformers.use(a)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const i=wc(t),o=this.parser||this.Parser;return sh("parse",o),o(String(i),i)}process(t,i){const o=this;return this.freeze(),sh("process",this.parser||this.Parser),lh("process",this.compiler||this.Compiler),i?a(void 0,i):new Promise(a);function a(l,c){const f=wc(t),h=o.parse(f);o.run(h,f,function(m,g,v){if(m||!g||!v)return p(m);const b=g,w=o.stringify(b,v);IL(w)?v.value=w:v.result=w,p(m,v)});function p(m,g){m||!g?c(m):l?l(g):i(void 0,g)}}}processSync(t){let i=!1,o;return this.freeze(),sh("processSync",this.parser||this.Parser),lh("processSync",this.compiler||this.Compiler),this.process(t,a),Nb("processSync","process",i),o;function a(l,c){i=!0,vb(l),o=c}}run(t,i,o){Sb(t),this.freeze();const a=this.transformers;return!o&&typeof i=="function"&&(o=i,i=void 0),o?l(void 0,o):new Promise(l);function l(c,f){const h=wc(i);a.run(t,h,p);function p(m,g,v){const b=g||t;m?f(m):c?c(b):o(void 0,b,v)}}}runSync(t,i){let o=!1,a;return this.run(t,i,l),Nb("runSync","run",o),a;function l(c,f){vb(c),a=f,o=!0}}stringify(t,i){this.freeze();const o=wc(i),a=this.compiler||this.Compiler;return lh("stringify",a),Sb(t),a(t,o)}use(t,...i){const o=this.attachers,a=this.namespace;if(ch("use",this.frozen),t!=null)if(typeof t=="function")h(t,i);else if(typeof t=="object")Array.isArray(t)?f(t):c(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function l(p){if(typeof p=="function")h(p,[]);else if(typeof p=="object")if(Array.isArray(p)){const[m,...g]=p;h(m,g)}else c(p);else throw new TypeError("Expected usable value, not `"+p+"`")}function c(p){if(!("plugins"in p)&&!("settings"in p))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");f(p.plugins),p.settings&&(a.settings=ih(!0,a.settings,p.settings))}function f(p){let m=-1;if(p!=null)if(Array.isArray(p))for(;++m<p.length;){const g=p[m];l(g)}else throw new TypeError("Expected a list of plugins, not `"+p+"`")}function h(p,m){let g=-1,v=-1;for(;++g<o.length;)if(o[g][0]===p){v=g;break}if(v===-1)o.push([p,...m]);else if(m.length>0){let[b,...w]=m;const S=o[v][1];Vh(S)&&Vh(b)&&(b=ih(!0,S,b)),o[v]=[p,b,...w]}}}}const OL=new Ap().freeze();function sh(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function lh(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function ch(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Sb(e){if(!Vh(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Nb(e,t,i){if(!i)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function wc(e){return RL(e)?e:new f1(e)}function RL(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function IL(e){return typeof e=="string"||LL(e)}function LL(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const zL="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Eb=[],jb={allowDangerousHtml:!0},BL=/^(https?|ircs?|mailto|xmpp)$/i,$L=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function h1(e){const t=HL(e),i=PL(e);return qL(t.runSync(t.parse(i),i),e)}function HL(e){const t=e.rehypePlugins||Eb,i=e.remarkPlugins||Eb,o=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...jb}:jb;return OL().use(wI).use(i).use(mL,o).use(t)}function PL(e){const t=e.children||"",i=new f1;return typeof t=="string"&&(i.value=t),i}function qL(e,t){const i=t.allowedElements,o=t.allowElement,a=t.components,l=t.disallowedElements,c=t.skipHtml,f=t.unwrapDisallowed,h=t.urlTransform||UL;for(const m of $L)Object.hasOwn(t,m.from)&&(""+m.from+(m.to?"use `"+m.to+"` instead":"remove it")+zL+m.id,void 0);return Tp(e,p),rO(e,{Fragment:u.Fragment,components:a,ignoreInvalidStyle:!0,jsx:u.jsx,jsxs:u.jsxs,passKeys:!0,passNode:!0});function p(m,g,v){if(m.type==="raw"&&v&&typeof g=="number")return c?v.children.splice(g,1):v.children[g]={type:"text",value:m.value},g;if(m.type==="element"){let b;for(b in Kf)if(Object.hasOwn(Kf,b)&&Object.hasOwn(m.properties,b)){const w=m.properties[b],S=Kf[b];(S===null||S.includes(m.tagName))&&(m.properties[b]=h(String(w||""),b,m))}}if(m.type==="element"){let b=i?!i.includes(m.tagName):l?l.includes(m.tagName):!1;if(!b&&o&&typeof g=="number"&&(b=!o(m,g,v)),b&&v&&typeof g=="number")return f&&m.children?v.children.splice(g,1,...m.children):v.children.splice(g,1),g}}}function UL(e){const t=e.indexOf(":"),i=e.indexOf("?"),o=e.indexOf("#"),a=e.indexOf("/");return t===-1||a!==-1&&t>a||i!==-1&&t>i||o!==-1&&t>o||BL.test(e.slice(0,t))?e:""}function Cb(e,t){const i=String(e);if(typeof t!="string")throw new TypeError("Expected character");let o=0,a=i.indexOf(t);for(;a!==-1;)o++,a=i.indexOf(t,a+t.length);return o}function VL(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function FL(e,t,i){const a=pu((i||{}).ignore||[]),l=GL(t);let c=-1;for(;++c<l.length;)d1(e,"text",f);function f(p,m){let g=-1,v;for(;++g<m.length;){const b=m[g],w=v?v.children:void 0;if(a(b,w?w.indexOf(b):void 0,v))return;v=b}if(v)return h(p,m)}function h(p,m){const g=m[m.length-1],v=l[c][0],b=l[c][1];let w=0;const j=g.children.indexOf(p);let N=!1,k=[];v.lastIndex=0;let C=v.exec(p.value);for(;C;){const _=C.index,H={index:C.index,input:C.input,stack:[...m,p]};let A=b(...C,H);if(typeof A=="string"&&(A=A.length>0?{type:"text",value:A}:void 0),A===!1?v.lastIndex=_+1:(w!==_&&k.push({type:"text",value:p.value.slice(w,_)}),Array.isArray(A)?k.push(...A):A&&k.push(A),w=_+C[0].length,N=!0),!v.global)break;C=v.exec(p.value)}return N?(w<p.value.length&&k.push({type:"text",value:p.value.slice(w)}),g.children.splice(j,1,...k)):k=[p],j+k.length}}function GL(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const i=!e[0]||Array.isArray(e[0])?e:[e];let o=-1;for(;++o<i.length;){const a=i[o];t.push([YL(a[0]),XL(a[1])])}return t}function YL(e){return typeof e=="string"?new RegExp(VL(e),"g"):e}function XL(e){return typeof e=="function"?e:function(){return e}}const uh="phrasing",dh=["autolink","link","image","label"];function QL(){return{transforms:[nz],enter:{literalAutolink:ZL,literalAutolinkEmail:fh,literalAutolinkHttp:fh,literalAutolinkWww:fh},exit:{literalAutolink:tz,literalAutolinkEmail:ez,literalAutolinkHttp:JL,literalAutolinkWww:KL}}}function WL(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:uh,notInConstruct:dh},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:uh,notInConstruct:dh},{character:":",before:"[ps]",after:"\\/",inConstruct:uh,notInConstruct:dh}]}}function ZL(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function fh(e){this.config.enter.autolinkProtocol.call(this,e)}function JL(e){this.config.exit.autolinkProtocol.call(this,e)}function KL(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function ez(e){this.config.exit.autolinkEmail.call(this,e)}function tz(e){this.exit(e)}function nz(e){FL(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,iz],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),rz]],{ignore:["link","linkReference"]})}function iz(e,t,i,o,a){let l="";if(!p1(a)||(/^w/i.test(t)&&(i=t+i,t="",l="http://"),!oz(i)))return!1;const c=az(i+o);if(!c[0])return!1;const f={type:"link",title:null,url:l+t+c[0],children:[{type:"text",value:t+c[0]}]};return c[1]?[f,{type:"text",value:c[1]}]:f}function rz(e,t,i,o){return!p1(o,!0)||/[-\d_]$/.test(i)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+i,children:[{type:"text",value:t+"@"+i}]}}function oz(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function az(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let i=t[0],o=i.indexOf(")");const a=Cb(e,"(");let l=Cb(e,")");for(;o!==-1&&a>l;)e+=i.slice(0,o+1),i=i.slice(o+1),o=i.indexOf(")"),l++;return[e,i]}function p1(e,t){const i=e.input.charCodeAt(e.index-1);return(e.index===0||Pr(i)||du(i))&&(!t||i!==47)}m1.peek=mz;function sz(){this.buffer()}function lz(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function cz(){this.buffer()}function uz(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function dz(e){const t=this.resume(),i=this.stack[this.stack.length-1];i.type,i.identifier=Rn(this.sliceSerialize(e)).toLowerCase(),i.label=t}function fz(e){this.exit(e)}function hz(e){const t=this.resume(),i=this.stack[this.stack.length-1];i.type,i.identifier=Rn(this.sliceSerialize(e)).toLowerCase(),i.label=t}function pz(e){this.exit(e)}function mz(){return"["}function m1(e,t,i,o){const a=i.createTracker(o);let l=a.move("[^");const c=i.enter("footnoteReference"),f=i.enter("reference");return l+=a.move(i.safe(i.associationId(e),{after:"]",before:l})),f(),c(),l+=a.move("]"),l}function gz(){return{enter:{gfmFootnoteCallString:sz,gfmFootnoteCall:lz,gfmFootnoteDefinitionLabelString:cz,gfmFootnoteDefinition:uz},exit:{gfmFootnoteCallString:dz,gfmFootnoteCall:fz,gfmFootnoteDefinitionLabelString:hz,gfmFootnoteDefinition:pz}}}function yz(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:i,footnoteReference:m1},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function i(o,a,l,c){const f=l.createTracker(c);let h=f.move("[^");const p=l.enter("footnoteDefinition"),m=l.enter("label");return h+=f.move(l.safe(l.associationId(o),{before:h,after:"]"})),m(),h+=f.move("]:"),o.children&&o.children.length>0&&(f.shift(4),h+=f.move((t?`
`:" ")+l.indentLines(l.containerFlow(o,f.current()),t?g1:xz))),p(),h}}function xz(e,t,i){return t===0?e:g1(e,t,i)}function g1(e,t,i){return(i?"":"    ")+e}const vz=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];y1.peek=Ez;function bz(){return{canContainEols:["delete"],enter:{strikethrough:Sz},exit:{strikethrough:Nz}}}function wz(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:vz}],handlers:{delete:y1}}}function Sz(e){this.enter({type:"delete",children:[]},e)}function Nz(e){this.exit(e)}function y1(e,t,i,o){const a=i.createTracker(o),l=i.enter("strikethrough");let c=a.move("~~");return c+=i.containerPhrasing(e,{...a.current(),before:c,after:"~"}),c+=a.move("~~"),l(),c}function Ez(){return"~"}function jz(e){return e.length}function Cz(e,t){const i=t||{},o=(i.align||[]).concat(),a=i.stringLength||jz,l=[],c=[],f=[],h=[];let p=0,m=-1;for(;++m<e.length;){const S=[],j=[];let N=-1;for(e[m].length>p&&(p=e[m].length);++N<e[m].length;){const k=kz(e[m][N]);if(i.alignDelimiters!==!1){const C=a(k);j[N]=C,(h[N]===void 0||C>h[N])&&(h[N]=C)}S.push(k)}c[m]=S,f[m]=j}let g=-1;if(typeof o=="object"&&"length"in o)for(;++g<p;)l[g]=kb(o[g]);else{const S=kb(o);for(;++g<p;)l[g]=S}g=-1;const v=[],b=[];for(;++g<p;){const S=l[g];let j="",N="";S===99?(j=":",N=":"):S===108?j=":":S===114&&(N=":");let k=i.alignDelimiters===!1?1:Math.max(1,h[g]-j.length-N.length);const C=j+"-".repeat(k)+N;i.alignDelimiters!==!1&&(k=j.length+k+N.length,k>h[g]&&(h[g]=k),b[g]=k),v[g]=C}c.splice(1,0,v),f.splice(1,0,b),m=-1;const w=[];for(;++m<c.length;){const S=c[m],j=f[m];g=-1;const N=[];for(;++g<p;){const k=S[g]||"";let C="",_="";if(i.alignDelimiters!==!1){const H=h[g]-(j[g]||0),A=l[g];A===114?C=" ".repeat(H):A===99?H%2?(C=" ".repeat(H/2+.5),_=" ".repeat(H/2-.5)):(C=" ".repeat(H/2),_=C):_=" ".repeat(H)}i.delimiterStart!==!1&&!g&&N.push("|"),i.padding!==!1&&!(i.alignDelimiters===!1&&k==="")&&(i.delimiterStart!==!1||g)&&N.push(" "),i.alignDelimiters!==!1&&N.push(C),N.push(k),i.alignDelimiters!==!1&&N.push(_),i.padding!==!1&&N.push(" "),(i.delimiterEnd!==!1||g!==p-1)&&N.push("|")}w.push(i.delimiterEnd===!1?N.join("").replace(/ +$/,""):N.join(""))}return w.join(`
`)}function kz(e){return e==null?"":String(e)}function kb(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function Tz(e,t,i,o){const a=i.enter("blockquote"),l=i.createTracker(o);l.move("> "),l.shift(2);const c=i.indentLines(i.containerFlow(e,l.current()),Az);return a(),c}function Az(e,t,i){return">"+(i?"":" ")+e}function Mz(e,t){return Tb(e,t.inConstruct,!0)&&!Tb(e,t.notInConstruct,!1)}function Tb(e,t,i){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return i;let o=-1;for(;++o<t.length;)if(e.includes(t[o]))return!0;return!1}function Ab(e,t,i,o){let a=-1;for(;++a<i.unsafe.length;)if(i.unsafe[a].character===`
`&&Mz(i.stack,i.unsafe[a]))return/[ \t]/.test(o.before)?"":" ";return`\\
`}function Dz(e,t){const i=String(e);let o=i.indexOf(t),a=o,l=0,c=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;o!==-1;)o===a?++l>c&&(c=l):l=1,a=o+t.length,o=i.indexOf(t,a);return c}function _z(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function Oz(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function Rz(e,t,i,o){const a=Oz(i),l=e.value||"",c=a==="`"?"GraveAccent":"Tilde";if(_z(e,i)){const g=i.enter("codeIndented"),v=i.indentLines(l,Iz);return g(),v}const f=i.createTracker(o),h=a.repeat(Math.max(Dz(l,a)+1,3)),p=i.enter("codeFenced");let m=f.move(h);if(e.lang){const g=i.enter(`codeFencedLang${c}`);m+=f.move(i.safe(e.lang,{before:m,after:" ",encode:["`"],...f.current()})),g()}if(e.lang&&e.meta){const g=i.enter(`codeFencedMeta${c}`);m+=f.move(" "),m+=f.move(i.safe(e.meta,{before:m,after:`
`,encode:["`"],...f.current()})),g()}return m+=f.move(`
`),l&&(m+=f.move(l+`
`)),m+=f.move(h),p(),m}function Iz(e,t,i){return(i?"":"    ")+e}function Mp(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function Lz(e,t,i,o){const a=Mp(i),l=a==='"'?"Quote":"Apostrophe",c=i.enter("definition");let f=i.enter("label");const h=i.createTracker(o);let p=h.move("[");return p+=h.move(i.safe(i.associationId(e),{before:p,after:"]",...h.current()})),p+=h.move("]: "),f(),!e.url||/[\0- \u007F]/.test(e.url)?(f=i.enter("destinationLiteral"),p+=h.move("<"),p+=h.move(i.safe(e.url,{before:p,after:">",...h.current()})),p+=h.move(">")):(f=i.enter("destinationRaw"),p+=h.move(i.safe(e.url,{before:p,after:e.title?" ":`
`,...h.current()}))),f(),e.title&&(f=i.enter(`title${l}`),p+=h.move(" "+a),p+=h.move(i.safe(e.title,{before:p,after:a,...h.current()})),p+=h.move(a),f()),c(),p}function zz(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function Es(e){return"&#x"+e.toString(16).toUpperCase()+";"}function Yc(e,t,i){const o=Wo(e),a=Wo(t);return o===void 0?a===void 0?i==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:o===1?a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}x1.peek=Bz;function x1(e,t,i,o){const a=zz(i),l=i.enter("emphasis"),c=i.createTracker(o),f=c.move(a);let h=c.move(i.containerPhrasing(e,{after:a,before:f,...c.current()}));const p=h.charCodeAt(0),m=Yc(o.before.charCodeAt(o.before.length-1),p,a);m.inside&&(h=Es(p)+h.slice(1));const g=h.charCodeAt(h.length-1),v=Yc(o.after.charCodeAt(0),g,a);v.inside&&(h=h.slice(0,-1)+Es(g));const b=c.move(a);return l(),i.attentionEncodeSurroundingInfo={after:v.outside,before:m.outside},f+h+b}function Bz(e,t,i){return i.options.emphasis||"*"}function $z(e,t){let i=!1;return Tp(e,function(o){if("value"in o&&/\r?\n|\r/.test(o.value)||o.type==="break")return i=!0,qh}),!!((!e.depth||e.depth<3)&&wp(e)&&(t.options.setext||i))}function Hz(e,t,i,o){const a=Math.max(Math.min(6,e.depth||1),1),l=i.createTracker(o);if($z(e,i)){const m=i.enter("headingSetext"),g=i.enter("phrasing"),v=i.containerPhrasing(e,{...l.current(),before:`
`,after:`
`});return g(),m(),v+`
`+(a===1?"=":"-").repeat(v.length-(Math.max(v.lastIndexOf("\r"),v.lastIndexOf(`
`))+1))}const c="#".repeat(a),f=i.enter("headingAtx"),h=i.enter("phrasing");l.move(c+" ");let p=i.containerPhrasing(e,{before:"# ",after:`
`,...l.current()});return/^[\t ]/.test(p)&&(p=Es(p.charCodeAt(0))+p.slice(1)),p=p?c+" "+p:c,i.options.closeAtx&&(p+=" "+c),h(),f(),p}v1.peek=Pz;function v1(e){return e.value||""}function Pz(){return"<"}b1.peek=qz;function b1(e,t,i,o){const a=Mp(i),l=a==='"'?"Quote":"Apostrophe",c=i.enter("image");let f=i.enter("label");const h=i.createTracker(o);let p=h.move("![");return p+=h.move(i.safe(e.alt,{before:p,after:"]",...h.current()})),p+=h.move("]("),f(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(f=i.enter("destinationLiteral"),p+=h.move("<"),p+=h.move(i.safe(e.url,{before:p,after:">",...h.current()})),p+=h.move(">")):(f=i.enter("destinationRaw"),p+=h.move(i.safe(e.url,{before:p,after:e.title?" ":")",...h.current()}))),f(),e.title&&(f=i.enter(`title${l}`),p+=h.move(" "+a),p+=h.move(i.safe(e.title,{before:p,after:a,...h.current()})),p+=h.move(a),f()),p+=h.move(")"),c(),p}function qz(){return"!"}w1.peek=Uz;function w1(e,t,i,o){const a=e.referenceType,l=i.enter("imageReference");let c=i.enter("label");const f=i.createTracker(o);let h=f.move("![");const p=i.safe(e.alt,{before:h,after:"]",...f.current()});h+=f.move(p+"]["),c();const m=i.stack;i.stack=[],c=i.enter("reference");const g=i.safe(i.associationId(e),{before:h,after:"]",...f.current()});return c(),i.stack=m,l(),a==="full"||!p||p!==g?h+=f.move(g+"]"):a==="shortcut"?h=h.slice(0,-1):h+=f.move("]"),h}function Uz(){return"!"}S1.peek=Vz;function S1(e,t,i){let o=e.value||"",a="`",l=-1;for(;new RegExp("(^|[^`])"+a+"([^`]|$)").test(o);)a+="`";for(/[^ \r\n]/.test(o)&&(/^[ \r\n]/.test(o)&&/[ \r\n]$/.test(o)||/^`|`$/.test(o))&&(o=" "+o+" ");++l<i.unsafe.length;){const c=i.unsafe[l],f=i.compilePattern(c);let h;if(c.atBreak)for(;h=f.exec(o);){let p=h.index;o.charCodeAt(p)===10&&o.charCodeAt(p-1)===13&&p--,o=o.slice(0,p)+" "+o.slice(h.index+1)}}return a+o+a}function Vz(){return"`"}function N1(e,t){const i=wp(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(i===e.url||"mailto:"+i===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}E1.peek=Fz;function E1(e,t,i,o){const a=Mp(i),l=a==='"'?"Quote":"Apostrophe",c=i.createTracker(o);let f,h;if(N1(e,i)){const m=i.stack;i.stack=[],f=i.enter("autolink");let g=c.move("<");return g+=c.move(i.containerPhrasing(e,{before:g,after:">",...c.current()})),g+=c.move(">"),f(),i.stack=m,g}f=i.enter("link"),h=i.enter("label");let p=c.move("[");return p+=c.move(i.containerPhrasing(e,{before:p,after:"](",...c.current()})),p+=c.move("]("),h(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(h=i.enter("destinationLiteral"),p+=c.move("<"),p+=c.move(i.safe(e.url,{before:p,after:">",...c.current()})),p+=c.move(">")):(h=i.enter("destinationRaw"),p+=c.move(i.safe(e.url,{before:p,after:e.title?" ":")",...c.current()}))),h(),e.title&&(h=i.enter(`title${l}`),p+=c.move(" "+a),p+=c.move(i.safe(e.title,{before:p,after:a,...c.current()})),p+=c.move(a),h()),p+=c.move(")"),f(),p}function Fz(e,t,i){return N1(e,i)?"<":"["}j1.peek=Gz;function j1(e,t,i,o){const a=e.referenceType,l=i.enter("linkReference");let c=i.enter("label");const f=i.createTracker(o);let h=f.move("[");const p=i.containerPhrasing(e,{before:h,after:"]",...f.current()});h+=f.move(p+"]["),c();const m=i.stack;i.stack=[],c=i.enter("reference");const g=i.safe(i.associationId(e),{before:h,after:"]",...f.current()});return c(),i.stack=m,l(),a==="full"||!p||p!==g?h+=f.move(g+"]"):a==="shortcut"?h=h.slice(0,-1):h+=f.move("]"),h}function Gz(){return"["}function Dp(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function Yz(e){const t=Dp(e),i=e.options.bulletOther;if(!i)return t==="*"?"-":"*";if(i!=="*"&&i!=="+"&&i!=="-")throw new Error("Cannot serialize items with `"+i+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(i===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+i+"`) to be different");return i}function Xz(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function C1(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function Qz(e,t,i,o){const a=i.enter("list"),l=i.bulletCurrent;let c=e.ordered?Xz(i):Dp(i);const f=e.ordered?c==="."?")":".":Yz(i);let h=t&&i.bulletLastUsed?c===i.bulletLastUsed:!1;if(!e.ordered){const m=e.children?e.children[0]:void 0;if((c==="*"||c==="-")&&m&&(!m.children||!m.children[0])&&i.stack[i.stack.length-1]==="list"&&i.stack[i.stack.length-2]==="listItem"&&i.stack[i.stack.length-3]==="list"&&i.stack[i.stack.length-4]==="listItem"&&i.indexStack[i.indexStack.length-1]===0&&i.indexStack[i.indexStack.length-2]===0&&i.indexStack[i.indexStack.length-3]===0&&(h=!0),C1(i)===c&&m){let g=-1;for(;++g<e.children.length;){const v=e.children[g];if(v&&v.type==="listItem"&&v.children&&v.children[0]&&v.children[0].type==="thematicBreak"){h=!0;break}}}}h&&(c=f),i.bulletCurrent=c;const p=i.containerFlow(e,o);return i.bulletLastUsed=c,i.bulletCurrent=l,a(),p}function Wz(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function Zz(e,t,i,o){const a=Wz(i);let l=i.bulletCurrent||Dp(i);t&&t.type==="list"&&t.ordered&&(l=(typeof t.start=="number"&&t.start>-1?t.start:1)+(i.options.incrementListMarker===!1?0:t.children.indexOf(e))+l);let c=l.length+1;(a==="tab"||a==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(c=Math.ceil(c/4)*4);const f=i.createTracker(o);f.move(l+" ".repeat(c-l.length)),f.shift(c);const h=i.enter("listItem"),p=i.indentLines(i.containerFlow(e,f.current()),m);return h(),p;function m(g,v,b){return v?(b?"":" ".repeat(c))+g:(b?l:l+" ".repeat(c-l.length))+g}}function Jz(e,t,i,o){const a=i.enter("paragraph"),l=i.enter("phrasing"),c=i.containerPhrasing(e,o);return l(),a(),c}const Kz=pu(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function e3(e,t,i,o){return(e.children.some(function(c){return Kz(c)})?i.containerPhrasing:i.containerFlow).call(i,e,o)}function t3(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}k1.peek=n3;function k1(e,t,i,o){const a=t3(i),l=i.enter("strong"),c=i.createTracker(o),f=c.move(a+a);let h=c.move(i.containerPhrasing(e,{after:a,before:f,...c.current()}));const p=h.charCodeAt(0),m=Yc(o.before.charCodeAt(o.before.length-1),p,a);m.inside&&(h=Es(p)+h.slice(1));const g=h.charCodeAt(h.length-1),v=Yc(o.after.charCodeAt(0),g,a);v.inside&&(h=h.slice(0,-1)+Es(g));const b=c.move(a+a);return l(),i.attentionEncodeSurroundingInfo={after:v.outside,before:m.outside},f+h+b}function n3(e,t,i){return i.options.strong||"*"}function i3(e,t,i,o){return i.safe(e.value,o)}function r3(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function o3(e,t,i){const o=(C1(i)+(i.options.ruleSpaces?" ":"")).repeat(r3(i));return i.options.ruleSpaces?o.slice(0,-1):o}const T1={blockquote:Tz,break:Ab,code:Rz,definition:Lz,emphasis:x1,hardBreak:Ab,heading:Hz,html:v1,image:b1,imageReference:w1,inlineCode:S1,link:E1,linkReference:j1,list:Qz,listItem:Zz,paragraph:Jz,root:e3,strong:k1,text:i3,thematicBreak:o3};function a3(){return{enter:{table:s3,tableData:Mb,tableHeader:Mb,tableRow:c3},exit:{codeText:u3,table:l3,tableData:hh,tableHeader:hh,tableRow:hh}}}function s3(e){const t=e._align;this.enter({type:"table",align:t.map(function(i){return i==="none"?null:i}),children:[]},e),this.data.inTable=!0}function l3(e){this.exit(e),this.data.inTable=void 0}function c3(e){this.enter({type:"tableRow",children:[]},e)}function hh(e){this.exit(e)}function Mb(e){this.enter({type:"tableCell",children:[]},e)}function u3(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,d3));const i=this.stack[this.stack.length-1];i.type,i.value=t,this.exit(e)}function d3(e,t){return t==="|"?t:e}function f3(e){const t=e||{},i=t.tableCellPadding,o=t.tablePipeAlign,a=t.stringLength,l=i?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:v,table:c,tableCell:h,tableRow:f}};function c(b,w,S,j){return p(m(b,S,j),b.align)}function f(b,w,S,j){const N=g(b,S,j),k=p([N]);return k.slice(0,k.indexOf(`
`))}function h(b,w,S,j){const N=S.enter("tableCell"),k=S.enter("phrasing"),C=S.containerPhrasing(b,{...j,before:l,after:l});return k(),N(),C}function p(b,w){return Cz(b,{align:w,alignDelimiters:o,padding:i,stringLength:a})}function m(b,w,S){const j=b.children;let N=-1;const k=[],C=w.enter("table");for(;++N<j.length;)k[N]=g(j[N],w,S);return C(),k}function g(b,w,S){const j=b.children;let N=-1;const k=[],C=w.enter("tableRow");for(;++N<j.length;)k[N]=h(j[N],b,w,S);return C(),k}function v(b,w,S){let j=T1.inlineCode(b,w,S);return S.stack.includes("tableCell")&&(j=j.replace(/\|/g,"\\$&")),j}}function h3(){return{exit:{taskListCheckValueChecked:Db,taskListCheckValueUnchecked:Db,paragraph:m3}}}function p3(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:g3}}}function Db(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function m3(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const i=this.stack[this.stack.length-1];i.type;const o=i.children[0];if(o&&o.type==="text"){const a=t.children;let l=-1,c;for(;++l<a.length;){const f=a[l];if(f.type==="paragraph"){c=f;break}}c===i&&(o.value=o.value.slice(1),o.value.length===0?i.children.shift():i.position&&o.position&&typeof o.position.start.offset=="number"&&(o.position.start.column++,o.position.start.offset++,i.position.start=Object.assign({},o.position.start)))}}this.exit(e)}function g3(e,t,i,o){const a=e.children[0],l=typeof e.checked=="boolean"&&a&&a.type==="paragraph",c="["+(e.checked?"x":" ")+"] ",f=i.createTracker(o);l&&f.move(c);let h=T1.listItem(e,t,i,{...o,...f.current()});return l&&(h=h.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,p)),h;function p(m){return m+c}}function y3(){return[QL(),gz(),bz(),a3(),h3()]}function x3(e){return{extensions:[WL(),yz(e),wz(),f3(e),p3()]}}const v3={tokenize:j3,partial:!0},A1={tokenize:C3,partial:!0},M1={tokenize:k3,partial:!0},D1={tokenize:T3,partial:!0},b3={tokenize:A3,partial:!0},_1={name:"wwwAutolink",tokenize:N3,previous:R1},O1={name:"protocolAutolink",tokenize:E3,previous:I1},ji={name:"emailAutolink",tokenize:S3,previous:L1},Wn={};function w3(){return{text:Wn}}let Dr=48;for(;Dr<123;)Wn[Dr]=ji,Dr++,Dr===58?Dr=65:Dr===91&&(Dr=97);Wn[43]=ji;Wn[45]=ji;Wn[46]=ji;Wn[95]=ji;Wn[72]=[ji,O1];Wn[104]=[ji,O1];Wn[87]=[ji,_1];Wn[119]=[ji,_1];function S3(e,t,i){const o=this;let a,l;return c;function c(g){return!Gh(g)||!L1.call(o,o.previous)||_p(o.events)?i(g):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),f(g))}function f(g){return Gh(g)?(e.consume(g),f):g===64?(e.consume(g),h):i(g)}function h(g){return g===46?e.check(b3,m,p)(g):g===45||g===95||Lt(g)?(l=!0,e.consume(g),h):m(g)}function p(g){return e.consume(g),a=!0,h}function m(g){return l&&a&&Ht(o.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(g)):i(g)}}function N3(e,t,i){const o=this;return a;function a(c){return c!==87&&c!==119||!R1.call(o,o.previous)||_p(o.events)?i(c):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(v3,e.attempt(A1,e.attempt(M1,l),i),i)(c))}function l(c){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(c)}}function E3(e,t,i){const o=this;let a="",l=!1;return c;function c(g){return(g===72||g===104)&&I1.call(o,o.previous)&&!_p(o.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),a+=String.fromCodePoint(g),e.consume(g),f):i(g)}function f(g){if(Ht(g)&&a.length<5)return a+=String.fromCodePoint(g),e.consume(g),f;if(g===58){const v=a.toLowerCase();if(v==="http"||v==="https")return e.consume(g),h}return i(g)}function h(g){return g===47?(e.consume(g),l?p:(l=!0,h)):i(g)}function p(g){return g===null||Vc(g)||nt(g)||Pr(g)||du(g)?i(g):e.attempt(A1,e.attempt(M1,m),i)(g)}function m(g){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(g)}}function j3(e,t,i){let o=0;return a;function a(c){return(c===87||c===119)&&o<3?(o++,e.consume(c),a):c===46&&o===3?(e.consume(c),l):i(c)}function l(c){return c===null?i(c):t(c)}}function C3(e,t,i){let o,a,l;return c;function c(p){return p===46||p===95?e.check(D1,h,f)(p):p===null||nt(p)||Pr(p)||p!==45&&du(p)?h(p):(l=!0,e.consume(p),c)}function f(p){return p===95?o=!0:(a=o,o=void 0),e.consume(p),c}function h(p){return a||o||!l?i(p):t(p)}}function k3(e,t){let i=0,o=0;return a;function a(c){return c===40?(i++,e.consume(c),a):c===41&&o<i?l(c):c===33||c===34||c===38||c===39||c===41||c===42||c===44||c===46||c===58||c===59||c===60||c===63||c===93||c===95||c===126?e.check(D1,t,l)(c):c===null||nt(c)||Pr(c)?t(c):(e.consume(c),a)}function l(c){return c===41&&o++,e.consume(c),a}}function T3(e,t,i){return o;function o(f){return f===33||f===34||f===39||f===41||f===42||f===44||f===46||f===58||f===59||f===63||f===95||f===126?(e.consume(f),o):f===38?(e.consume(f),l):f===93?(e.consume(f),a):f===60||f===null||nt(f)||Pr(f)?t(f):i(f)}function a(f){return f===null||f===40||f===91||nt(f)||Pr(f)?t(f):o(f)}function l(f){return Ht(f)?c(f):i(f)}function c(f){return f===59?(e.consume(f),o):Ht(f)?(e.consume(f),c):i(f)}}function A3(e,t,i){return o;function o(l){return e.consume(l),a}function a(l){return Lt(l)?i(l):t(l)}}function R1(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||nt(e)}function I1(e){return!Ht(e)}function L1(e){return!(e===47||Gh(e))}function Gh(e){return e===43||e===45||e===46||e===95||Lt(e)}function _p(e){let t=e.length,i=!1;for(;t--;){const o=e[t][1];if((o.type==="labelLink"||o.type==="labelImage")&&!o._balanced){i=!0;break}if(o._gfmAutolinkLiteralWalkedInto){i=!1;break}}return e.length>0&&!i&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),i}const M3={tokenize:B3,partial:!0};function D3(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:I3,continuation:{tokenize:L3},exit:z3}},text:{91:{name:"gfmFootnoteCall",tokenize:R3},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:_3,resolveTo:O3}}}}function _3(e,t,i){const o=this;let a=o.events.length;const l=o.parser.gfmFootnotes||(o.parser.gfmFootnotes=[]);let c;for(;a--;){const h=o.events[a][1];if(h.type==="labelImage"){c=h;break}if(h.type==="gfmFootnoteCall"||h.type==="labelLink"||h.type==="label"||h.type==="image"||h.type==="link")break}return f;function f(h){if(!c||!c._balanced)return i(h);const p=Rn(o.sliceSerialize({start:c.end,end:o.now()}));return p.codePointAt(0)!==94||!l.includes(p.slice(1))?i(h):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(h),e.exit("gfmFootnoteCallLabelMarker"),t(h))}}function O3(e,t){let i=e.length;for(;i--;)if(e[i][1].type==="labelImage"&&e[i][0]==="enter"){e[i][1];break}e[i+1][1].type="data",e[i+3][1].type="gfmFootnoteCallLabelMarker";const o={type:"gfmFootnoteCall",start:Object.assign({},e[i+3][1].start),end:Object.assign({},e[e.length-1][1].end)},a={type:"gfmFootnoteCallMarker",start:Object.assign({},e[i+3][1].end),end:Object.assign({},e[i+3][1].end)};a.end.column++,a.end.offset++,a.end._bufferIndex++;const l={type:"gfmFootnoteCallString",start:Object.assign({},a.end),end:Object.assign({},e[e.length-1][1].start)},c={type:"chunkString",contentType:"string",start:Object.assign({},l.start),end:Object.assign({},l.end)},f=[e[i+1],e[i+2],["enter",o,t],e[i+3],e[i+4],["enter",a,t],["exit",a,t],["enter",l,t],["enter",c,t],["exit",c,t],["exit",l,t],e[e.length-2],e[e.length-1],["exit",o,t]];return e.splice(i,e.length-i+1,...f),e}function R3(e,t,i){const o=this,a=o.parser.gfmFootnotes||(o.parser.gfmFootnotes=[]);let l=0,c;return f;function f(g){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(g),e.exit("gfmFootnoteCallLabelMarker"),h}function h(g){return g!==94?i(g):(e.enter("gfmFootnoteCallMarker"),e.consume(g),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",p)}function p(g){if(l>999||g===93&&!c||g===null||g===91||nt(g))return i(g);if(g===93){e.exit("chunkString");const v=e.exit("gfmFootnoteCallString");return a.includes(Rn(o.sliceSerialize(v)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(g),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):i(g)}return nt(g)||(c=!0),l++,e.consume(g),g===92?m:p}function m(g){return g===91||g===92||g===93?(e.consume(g),l++,p):p(g)}}function I3(e,t,i){const o=this,a=o.parser.gfmFootnotes||(o.parser.gfmFootnotes=[]);let l,c=0,f;return h;function h(w){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(w),e.exit("gfmFootnoteDefinitionLabelMarker"),p}function p(w){return w===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(w),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",m):i(w)}function m(w){if(c>999||w===93&&!f||w===null||w===91||nt(w))return i(w);if(w===93){e.exit("chunkString");const S=e.exit("gfmFootnoteDefinitionLabelString");return l=Rn(o.sliceSerialize(S)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(w),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),v}return nt(w)||(f=!0),c++,e.consume(w),w===92?g:m}function g(w){return w===91||w===92||w===93?(e.consume(w),c++,m):m(w)}function v(w){return w===58?(e.enter("definitionMarker"),e.consume(w),e.exit("definitionMarker"),a.includes(l)||a.push(l),Pe(e,b,"gfmFootnoteDefinitionWhitespace")):i(w)}function b(w){return t(w)}}function L3(e,t,i){return e.check(Is,t,e.attempt(M3,t,i))}function z3(e){e.exit("gfmFootnoteDefinition")}function B3(e,t,i){const o=this;return Pe(e,a,"gfmFootnoteDefinitionIndent",5);function a(l){const c=o.events[o.events.length-1];return c&&c[1].type==="gfmFootnoteDefinitionIndent"&&c[2].sliceSerialize(c[1],!0).length===4?t(l):i(l)}}function $3(e){let i=(e||{}).singleTilde;const o={name:"strikethrough",tokenize:l,resolveAll:a};return i==null&&(i=!0),{text:{126:o},insideSpan:{null:[o]},attentionMarkers:{null:[126]}};function a(c,f){let h=-1;for(;++h<c.length;)if(c[h][0]==="enter"&&c[h][1].type==="strikethroughSequenceTemporary"&&c[h][1]._close){let p=h;for(;p--;)if(c[p][0]==="exit"&&c[p][1].type==="strikethroughSequenceTemporary"&&c[p][1]._open&&c[h][1].end.offset-c[h][1].start.offset===c[p][1].end.offset-c[p][1].start.offset){c[h][1].type="strikethroughSequence",c[p][1].type="strikethroughSequence";const m={type:"strikethrough",start:Object.assign({},c[p][1].start),end:Object.assign({},c[h][1].end)},g={type:"strikethroughText",start:Object.assign({},c[p][1].end),end:Object.assign({},c[h][1].start)},v=[["enter",m,f],["enter",c[p][1],f],["exit",c[p][1],f],["enter",g,f]],b=f.parser.constructs.insideSpan.null;b&&fn(v,v.length,0,fu(b,c.slice(p+1,h),f)),fn(v,v.length,0,[["exit",g,f],["enter",c[h][1],f],["exit",c[h][1],f],["exit",m,f]]),fn(c,p-1,h-p+3,v),h=p+v.length-2;break}}for(h=-1;++h<c.length;)c[h][1].type==="strikethroughSequenceTemporary"&&(c[h][1].type="data");return c}function l(c,f,h){const p=this.previous,m=this.events;let g=0;return v;function v(w){return p===126&&m[m.length-1][1].type!=="characterEscape"?h(w):(c.enter("strikethroughSequenceTemporary"),b(w))}function b(w){const S=Wo(p);if(w===126)return g>1?h(w):(c.consume(w),g++,b);if(g<2&&!i)return h(w);const j=c.exit("strikethroughSequenceTemporary"),N=Wo(w);return j._open=!N||N===2&&!!S,j._close=!S||S===2&&!!N,f(w)}}}class H3{constructor(){this.map=[]}add(t,i,o){P3(this,t,i,o)}consume(t){if(this.map.sort(function(l,c){return l[0]-c[0]}),this.map.length===0)return;let i=this.map.length;const o=[];for(;i>0;)i-=1,o.push(t.slice(this.map[i][0]+this.map[i][1]),this.map[i][2]),t.length=this.map[i][0];o.push(t.slice()),t.length=0;let a=o.pop();for(;a;){for(const l of a)t.push(l);a=o.pop()}this.map.length=0}}function P3(e,t,i,o){let a=0;if(!(i===0&&o.length===0)){for(;a<e.map.length;){if(e.map[a][0]===t){e.map[a][1]+=i,e.map[a][2].push(...o);return}a+=1}e.map.push([t,i,o])}}function q3(e,t){let i=!1;const o=[];for(;t<e.length;){const a=e[t];if(i){if(a[0]==="enter")a[1].type==="tableContent"&&o.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(a[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const l=o.length-1;o[l]=o[l]==="left"?"center":"right"}}else if(a[1].type==="tableDelimiterRow")break}else a[0]==="enter"&&a[1].type==="tableDelimiterRow"&&(i=!0);t+=1}return o}function U3(){return{flow:{null:{name:"table",tokenize:V3,resolveAll:F3}}}}function V3(e,t,i){const o=this;let a=0,l=0,c;return f;function f(z){let L=o.events.length-1;for(;L>-1;){const M=o.events[L][1].type;if(M==="lineEnding"||M==="linePrefix")L--;else break}const U=L>-1?o.events[L][1].type:null,Z=U==="tableHead"||U==="tableRow"?A:h;return Z===A&&o.parser.lazy[o.now().line]?i(z):Z(z)}function h(z){return e.enter("tableHead"),e.enter("tableRow"),p(z)}function p(z){return z===124||(c=!0,l+=1),m(z)}function m(z){return z===null?i(z):we(z)?l>1?(l=0,o.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(z),e.exit("lineEnding"),b):i(z):Ie(z)?Pe(e,m,"whitespace")(z):(l+=1,c&&(c=!1,a+=1),z===124?(e.enter("tableCellDivider"),e.consume(z),e.exit("tableCellDivider"),c=!0,m):(e.enter("data"),g(z)))}function g(z){return z===null||z===124||nt(z)?(e.exit("data"),m(z)):(e.consume(z),z===92?v:g)}function v(z){return z===92||z===124?(e.consume(z),g):g(z)}function b(z){return o.interrupt=!1,o.parser.lazy[o.now().line]?i(z):(e.enter("tableDelimiterRow"),c=!1,Ie(z)?Pe(e,w,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(z):w(z))}function w(z){return z===45||z===58?j(z):z===124?(c=!0,e.enter("tableCellDivider"),e.consume(z),e.exit("tableCellDivider"),S):H(z)}function S(z){return Ie(z)?Pe(e,j,"whitespace")(z):j(z)}function j(z){return z===58?(l+=1,c=!0,e.enter("tableDelimiterMarker"),e.consume(z),e.exit("tableDelimiterMarker"),N):z===45?(l+=1,N(z)):z===null||we(z)?_(z):H(z)}function N(z){return z===45?(e.enter("tableDelimiterFiller"),k(z)):H(z)}function k(z){return z===45?(e.consume(z),k):z===58?(c=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(z),e.exit("tableDelimiterMarker"),C):(e.exit("tableDelimiterFiller"),C(z))}function C(z){return Ie(z)?Pe(e,_,"whitespace")(z):_(z)}function _(z){return z===124?w(z):z===null||we(z)?!c||a!==l?H(z):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(z)):H(z)}function H(z){return i(z)}function A(z){return e.enter("tableRow"),$(z)}function $(z){return z===124?(e.enter("tableCellDivider"),e.consume(z),e.exit("tableCellDivider"),$):z===null||we(z)?(e.exit("tableRow"),t(z)):Ie(z)?Pe(e,$,"whitespace")(z):(e.enter("data"),V(z))}function V(z){return z===null||z===124||nt(z)?(e.exit("data"),$(z)):(e.consume(z),z===92?G:V)}function G(z){return z===92||z===124?(e.consume(z),V):V(z)}}function F3(e,t){let i=-1,o=!0,a=0,l=[0,0,0,0],c=[0,0,0,0],f=!1,h=0,p,m,g;const v=new H3;for(;++i<e.length;){const b=e[i],w=b[1];b[0]==="enter"?w.type==="tableHead"?(f=!1,h!==0&&(_b(v,t,h,p,m),m=void 0,h=0),p={type:"table",start:Object.assign({},w.start),end:Object.assign({},w.end)},v.add(i,0,[["enter",p,t]])):w.type==="tableRow"||w.type==="tableDelimiterRow"?(o=!0,g=void 0,l=[0,0,0,0],c=[0,i+1,0,0],f&&(f=!1,m={type:"tableBody",start:Object.assign({},w.start),end:Object.assign({},w.end)},v.add(i,0,[["enter",m,t]])),a=w.type==="tableDelimiterRow"?2:m?3:1):a&&(w.type==="data"||w.type==="tableDelimiterMarker"||w.type==="tableDelimiterFiller")?(o=!1,c[2]===0&&(l[1]!==0&&(c[0]=c[1],g=Sc(v,t,l,a,void 0,g),l=[0,0,0,0]),c[2]=i)):w.type==="tableCellDivider"&&(o?o=!1:(l[1]!==0&&(c[0]=c[1],g=Sc(v,t,l,a,void 0,g)),l=c,c=[l[1],i,0,0])):w.type==="tableHead"?(f=!0,h=i):w.type==="tableRow"||w.type==="tableDelimiterRow"?(h=i,l[1]!==0?(c[0]=c[1],g=Sc(v,t,l,a,i,g)):c[1]!==0&&(g=Sc(v,t,c,a,i,g)),a=0):a&&(w.type==="data"||w.type==="tableDelimiterMarker"||w.type==="tableDelimiterFiller")&&(c[3]=i)}for(h!==0&&_b(v,t,h,p,m),v.consume(t.events),i=-1;++i<t.events.length;){const b=t.events[i];b[0]==="enter"&&b[1].type==="table"&&(b[1]._align=q3(t.events,i))}return e}function Sc(e,t,i,o,a,l){const c=o===1?"tableHeader":o===2?"tableDelimiter":"tableData",f="tableContent";i[0]!==0&&(l.end=Object.assign({},Io(t.events,i[0])),e.add(i[0],0,[["exit",l,t]]));const h=Io(t.events,i[1]);if(l={type:c,start:Object.assign({},h),end:Object.assign({},h)},e.add(i[1],0,[["enter",l,t]]),i[2]!==0){const p=Io(t.events,i[2]),m=Io(t.events,i[3]),g={type:f,start:Object.assign({},p),end:Object.assign({},m)};if(e.add(i[2],0,[["enter",g,t]]),o!==2){const v=t.events[i[2]],b=t.events[i[3]];if(v[1].end=Object.assign({},b[1].end),v[1].type="chunkText",v[1].contentType="text",i[3]>i[2]+1){const w=i[2]+1,S=i[3]-i[2]-1;e.add(w,S,[])}}e.add(i[3]+1,0,[["exit",g,t]])}return a!==void 0&&(l.end=Object.assign({},Io(t.events,a)),e.add(a,0,[["exit",l,t]]),l=void 0),l}function _b(e,t,i,o,a){const l=[],c=Io(t.events,i);a&&(a.end=Object.assign({},c),l.push(["exit",a,t])),o.end=Object.assign({},c),l.push(["exit",o,t]),e.add(i+1,0,l)}function Io(e,t){const i=e[t],o=i[0]==="enter"?"start":"end";return i[1][o]}const G3={name:"tasklistCheck",tokenize:X3};function Y3(){return{text:{91:G3}}}function X3(e,t,i){const o=this;return a;function a(h){return o.previous!==null||!o._gfmTasklistFirstContentOfListItem?i(h):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(h),e.exit("taskListCheckMarker"),l)}function l(h){return nt(h)?(e.enter("taskListCheckValueUnchecked"),e.consume(h),e.exit("taskListCheckValueUnchecked"),c):h===88||h===120?(e.enter("taskListCheckValueChecked"),e.consume(h),e.exit("taskListCheckValueChecked"),c):i(h)}function c(h){return h===93?(e.enter("taskListCheckMarker"),e.consume(h),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),f):i(h)}function f(h){return we(h)?t(h):Ie(h)?e.check({tokenize:Q3},t,i)(h):i(h)}}function Q3(e,t,i){return Pe(e,o,"whitespace");function o(a){return a===null?i(a):t(a)}}function W3(e){return Gw([w3(),D3(),$3(e),U3(),Y3()])}const Z3={};function J3(e){const t=this,i=e||Z3,o=t.data(),a=o.micromarkExtensions||(o.micromarkExtensions=[]),l=o.fromMarkdownExtensions||(o.fromMarkdownExtensions=[]),c=o.toMarkdownExtensions||(o.toMarkdownExtensions=[]);a.push(W3(i)),l.push(y3()),c.push(x3(i))}const Xc={manualTrigger:{id:"manualTrigger",icon:"",title:"Manual Trigger",category:"Triggers",overview:"The Manual Trigger is the starting point for on-demand workflows. When you click the Run button, this node fires first and passes its configured payload to connected nodes. It's ideal for testing, user-initiated automations, or workflows that need human activation.",technicalDetails:`
**Execution Flow:**
1. User clicks Run button or presses Ctrl+Enter
2. Manual Trigger node activates and emits its payload
3. Output data flows to all connected downstream nodes
4. Execution continues through the graph

**Output Schema:**
\`\`\`javascript
{
  timestamp: "2024-01-15T10:30:00.000Z",
  trigger: "manual",
  text: "Your default payload text",
  data: { ...formFieldValues }
}
\`\`\`
    `,config:[{name:"Label",type:"string",desc:"Display name for the node",default:"Manual Trigger"},{name:"Default Payload",type:"string (multiline)",desc:"Text content passed as 'text' field in output",default:""},{name:"Input Fields",type:"Form Builder",desc:"Dynamic form fields for user input at runtime",default:"[]"}],examples:[{title:"Simple Text Input",description:"Pass a question to an AI Agent",config:'Default Payload: "What are the benefits of renewable energy?"',output:'{ timestamp: "...", trigger: "manual", text: "What are the benefits of renewable energy?", data: {} }'},{title:"Form with Multiple Fields",description:"Collect structured data before processing",config:`Input Fields:
- name: "email" | type: "text" | label: "Email Address"
- name: "subject" | type: "text" | label: "Subject Line"  
- name: "priority" | type: "select" | options: ["low", "medium", "high"]`,output:'{ timestamp: "...", trigger: "manual", data: { email: "user@example.com", subject: "Hello", priority: "high" } }'},{title:"JSON Payload",description:"Pass structured JSON data",config:`Default Payload:
{
  "action": "process",
  "items": ["item1", "item2"],
  "config": { "verbose": true }
}`,output:`{ timestamp: "...", trigger: "manual", text: '{"action":"process",...}', data: {} }`}],tips:["Use Input Fields to create reusable workflows with variable parameters","The 'text' field is the primary data carrier - use it for simple string inputs","Form field values are accessible via input.data.fieldName in downstream nodes","Combine with AI Agent to build interactive chat interfaces"],connections:{inputs:0,outputs:1,outputLabels:["output"]}},scheduleTrigger:{id:"scheduleTrigger",icon:"",title:"Schedule Trigger",category:"Triggers",overview:"The Schedule Trigger runs workflows automatically at specified intervals using CRON expressions. Perfect for periodic tasks like data synchronization, report generation, health checks, or cleanup jobs.",technicalDetails:`
**CRON Expression Format:**
\`\`\`
 minute (0-59)
  hour (0-23)
   day of month (1-31)
    month (1-12)
     day of week (0-6, Sunday=0)
    
* * * * *
\`\`\`

**Special Characters:**
- \`*\` = any value
- \`,\` = value list (1,3,5)
- \`-\` = range (1-5)
- \`/\` = step (*/5 = every 5)

**Output Schema:**
\`\`\`javascript
{
  timestamp: "2024-01-15T10:30:00.000Z",
  trigger: "schedule",
  schedule: "*/5 * * * *",
  nextRun: "2024-01-15T10:35:00.000Z"
}
\`\`\`
    `,config:[{name:"Schedule",type:"CRON expression",desc:"When the workflow should run",default:"*/5 * * * *"},{name:"Enabled",type:"boolean",desc:"Toggle schedule on/off without deleting",default:"false"}],examples:[{title:"Every 5 Minutes",description:"Health check or monitoring",config:"Schedule: */5 * * * *",output:"Runs at: 10:00, 10:05, 10:10, 10:15..."},{title:"Daily at 9 AM",description:"Morning report generation",config:"Schedule: 0 9 * * *",output:"Runs at: 09:00 every day"},{title:"Every Monday at 8:30 AM",description:"Weekly summary email",config:"Schedule: 30 8 * * 1",output:"Runs at: 08:30 every Monday"},{title:"First Day of Month",description:"Monthly billing or reports",config:"Schedule: 0 0 1 * *",output:"Runs at: midnight on the 1st of each month"}],tips:["Schedules only run when the browser tab is open and active","Use 'Enabled' toggle to pause schedules without deleting the configuration","For more reliable scheduling, consider using browser extensions or service workers","Test your CRON expression at crontab.guru before deploying"],connections:{inputs:1,outputs:1,inputLabels:["re-trigger"],outputLabels:["output"]}},webhookTrigger:{id:"webhookTrigger",icon:"",title:"Webhook Trigger",category:"Triggers",overview:"The Webhook Trigger creates an HTTP endpoint that external services can call to start your workflow. Use it to integrate with third-party APIs, form submissions, IoT devices, or any system that can make HTTP requests.",technicalDetails:`
**Endpoint URL Format:**
\`\`\`
https://your-domain.com/webhook/{endpoint}
\`\`\`

**Supported Methods:**
- GET - Retrieve data, parameters in URL
- POST - Submit data in request body (JSON)
- PUT - Update resources
- DELETE - Remove resources

**Request Body Parsing:**
\`\`\`javascript
// JSON body is automatically parsed
{
  "event": "user.created",
  "data": { "id": 123, "email": "user@example.com" }
}
\`\`\`

**Output Schema:**
\`\`\`javascript
{
  method: "POST",
  endpoint: "/webhook/my-hook",
  headers: { "content-type": "application/json", ... },
  body: { ...requestBody },
  query: { ...urlParams },
  timestamp: "..."
}
\`\`\`
    `,config:[{name:"Method",type:"select",desc:"HTTP method to accept",default:"POST",options:["GET","POST","PUT","DELETE"]},{name:"Endpoint",type:"string",desc:"URL path for the webhook",default:"/webhook/default"},{name:"Auth Required",type:"boolean",desc:"Require authentication token",default:"false"}],examples:[{title:"Form Submission Handler",description:"Process contact form data",config:`Method: POST
Endpoint: /webhook/contact-form`,output:'{ method: "POST", body: { name: "John", email: "john@example.com", message: "Hello!" } }'},{title:"GitHub Webhook",description:"Trigger on repository events",config:`Method: POST
Endpoint: /webhook/github`,output:'{ method: "POST", body: { action: "push", repository: {...}, commits: [...] } }'},{title:"Stripe Payment Webhook",description:"Handle payment confirmations",config:`Method: POST
Endpoint: /webhook/stripe`,output:'{ method: "POST", body: { type: "payment_intent.succeeded", data: {...} } }'}],tips:["Webhooks require a publicly accessible URL - use tunneling (ngrok) for local development","Always validate incoming data before processing","Use Auth Required for sensitive webhooks to prevent unauthorized access","Connect to Code Executor to validate signatures or transform data"],connections:{inputs:0,outputs:1,outputLabels:["output"]}},errorTrigger:{id:"errorTrigger",icon:"",title:"Error Trigger",category:"Triggers",overview:"The Error Trigger catches exceptions from other nodes, enabling graceful error handling and recovery. Build resilient workflows that can log errors, send notifications, or retry failed operations.",technicalDetails:`
**Error Capture Modes:**
1. **Watch All** - Catches errors from any node in the workflow
2. **Specific Nodes** - Only watches selected nodes by ID

**Retry Logic:**
- Automatic retry with configurable count
- Exponential backoff between attempts
- Final failure triggers error output

**Output Schema:**
\`\`\`javascript
{
  error: {
    message: "Network request failed",
    nodeId: "httpRequest-abc123",
    nodeName: "API Call",
    stack: "Error: Network request failed\\n  at..."
  },
  originalInput: { ...inputThatCausedError },
  retryAttempt: 1,
  timestamp: "..."
}
\`\`\`
    `,config:[{name:"Watch All",type:"boolean",desc:"Monitor all nodes for errors",default:"true"},{name:"Specific Nodes",type:"array",desc:"Node IDs to watch (when Watch All is false)",default:"[]"},{name:"Retry Enabled",type:"boolean",desc:"Automatically retry failed nodes",default:"false"},{name:"Retry Count",type:"number",desc:"Maximum retry attempts",default:"3"}],examples:[{title:"Error Logging",description:"Log all errors to console",config:`Watch All: true
Retry Enabled: false`,flow:"Error Trigger  Code Executor (log error)  Output"},{title:"Error Notification",description:"Send Slack message on failure",config:"Watch All: true",flow:"Error Trigger  HTTP Request (Slack API)  Output"},{title:"Retry with Fallback",description:"Retry API call, then use cached data",config:`Specific Nodes: ["httpRequest-main"]
Retry Enabled: true
Retry Count: 3`,flow:"Error Trigger  If/Else (retries exhausted?)  Local Storage (get cache)"}],tips:["Place Error Trigger anywhere in your workflow - it's not connected to the main flow","Use error.nodeId to identify which node failed","Combine with AI Agent to generate human-readable error summaries","Log errors to Local Storage for debugging across sessions"],connections:{inputs:0,outputs:1,outputLabels:["error"]}},browserEventTrigger:{id:"browserEventTrigger",icon:"",title:"Browser Event",category:"Triggers",overview:"The Browser Event Trigger responds to browser and DOM events like focus, blur, URL changes, element clicks, or timed intervals. Automate based on user interactions or browser state changes.",technicalDetails:`
**Event Types:**
| Type | Description | Use Case |
|------|-------------|----------|
| focus | Tab receives focus | Resume paused workflows |
| blur | Tab loses focus | Pause background tasks |
| urlChange | URL hash or path changes | SPA navigation |
| domClick | Element is clicked | User interaction |
| timer | Interval elapses | Polling |

**Output Schema:**
\`\`\`javascript
{
  eventType: "domClick",
  target: { selector: "#submit-btn", tagName: "BUTTON" },
  timestamp: "...",
  url: "https://example.com/page"
}
\`\`\`
    `,config:[{name:"Event Type",type:"select",desc:"Browser event to listen for",default:"focus",options:["focus","blur","urlChange","domClick","timer"]},{name:"Selector",type:"CSS selector",desc:"Element selector for domClick events",default:""},{name:"URL Pattern",type:"regex",desc:"Pattern to match for urlChange events",default:""},{name:"Interval",type:"number (ms)",desc:"Milliseconds between timer events",default:"1000"}],examples:[{title:"Auto-Save on Blur",description:"Save work when user leaves tab",config:"Event Type: blur",flow:"Browser Event  Local Storage (save state)"},{title:"Click Tracking",description:"Log button clicks",config:`Event Type: domClick
Selector: .track-btn`,flow:"Browser Event  HTTP Request (analytics API)"},{title:"Polling API",description:"Check for updates every 30 seconds",config:`Event Type: timer
Interval: 30000`,flow:"Browser Event  HTTP Request  If/Else (new data?)  Output"}],tips:["Timer events only fire when the tab is active to conserve resources","Use specific CSS selectors to avoid triggering on unintended elements","Combine with If/Else to filter events before processing","URL patterns support regex for flexible matching"],connections:{inputs:0,outputs:1,outputLabels:["event"]}},output:{id:"output",icon:"",title:"Output",category:"Actions",overview:"The Output node is the terminal point of your workflow. It displays results, downloads files, sends notifications, and automatically saves all output as artifacts for future reference.",technicalDetails:`
**Output Types:**
| Type | Behavior |
|------|----------|
| console | Logs to browser console + saves artifact |
| file | Downloads file + saves artifact |
| notification | Shows browser notification + saves artifact |

**All outputs automatically save artifacts to IndexedDB.**

**Output Schema:**
\`\`\`javascript
// The output node passes through its input
{
  ...inputData,
  _outputMeta: {
    type: "console|file|notification",
    artifactId: "uuid",
    timestamp: "..."
  }
}
\`\`\`
    `,config:[{name:"Output Type",type:"select",desc:"How to display/save the output",default:"console",options:["console","file","notification"]},{name:"Filename",type:"string",desc:"Filename for file downloads",default:"output.txt"},{name:"Format JSON",type:"boolean",desc:"Pretty-print JSON with indentation",default:"false"}],examples:[{title:"Console Logging",description:"Debug workflow output",config:`Output Type: console
Format JSON: true`,result:"Opens browser DevTools console with formatted output"},{title:"Download Report",description:"Save AI-generated content to file",config:`Output Type: file
Filename: report_{{date}}.txt`,result:"Downloads file to user's Downloads folder"},{title:"Desktop Notification",description:"Alert user when workflow completes",config:"Output Type: notification",result:"Shows browser notification with output preview"}],tips:["All outputs are saved as artifacts regardless of output type","View artifacts in the Execution Panel's Artifacts tab","Use Format JSON for complex object outputs","Notification requires browser permission - prompt appears on first use"],connections:{inputs:1,outputs:0}},httpRequest:{id:"httpRequest",icon:"",title:"HTTP Request",category:"Actions",overview:"The HTTP Request node makes REST API calls to external services. Supports all HTTP methods, custom headers, request bodies, and configurable timeouts.",technicalDetails:`
**Request Configuration:**
\`\`\`javascript
{
  method: "GET|POST|PUT|PATCH|DELETE",
  url: "https://api.example.com/endpoint",
  headers: { "Authorization": "Bearer token", ... },
  body: "string or JSON object",
  timeout: 30000 // milliseconds
}
\`\`\`

**Response Schema:**
\`\`\`javascript
{
  status: 200,
  statusText: "OK",
  data: { ...responseJSON },
  headers: { "content-type": "application/json", ... }
}
\`\`\`

**Error Handling:**
- Network errors throw exceptions (catch with Error Trigger)
- 4xx/5xx responses return normally with status code
- Timeout aborts request after configured duration
    `,config:[{name:"Method",type:"select",desc:"HTTP method",default:"GET",options:["GET","POST","PUT","PATCH","DELETE"]},{name:"URL",type:"string",desc:"Full endpoint URL (supports {{expressions}})",default:""},{name:"Headers",type:"JSON",desc:"Request headers as JSON object",default:"{}"},{name:"Body",type:"string/JSON",desc:"Request body for POST/PUT/PATCH",default:""},{name:"Timeout",type:"number",desc:"Timeout in milliseconds",default:"30000"}],examples:[{title:"GET Request",description:"Fetch data from API",config:`Method: GET
URL: https://api.github.com/users/octocat
Headers: { "Accept": "application/json" }`,output:'{ status: 200, data: { login: "octocat", id: 583231, ... } }'},{title:"POST with JSON Body",description:"Create a new resource",config:`Method: POST
URL: https://api.example.com/posts
Headers: { "Content-Type": "application/json", "Authorization": "Bearer {{input.token}}" }
Body: { "title": "{{input.title}}", "content": "{{input.content}}" }`,output:'{ status: 201, data: { id: 42, title: "...", created: true } }'},{title:"Dynamic URL from Input",description:"Parameterized API call",config:`Method: GET
URL: https://api.example.com/users/{{input.userId}}/profile`,output:"Fetches profile for the user ID from previous node"},{title:"Slack Webhook",description:"Send message to Slack channel",config:`Method: POST
URL: https://hooks.slack.com/services/T00/B00/XXX
Headers: { "Content-Type": "application/json" }
Body: { "text": "Workflow completed: {{input.result}}" }`,output:'{ status: 200, data: "ok" }'}],tips:["Use {{input.field}} syntax to inject dynamic values from previous nodes","Set appropriate Content-Type header for POST/PUT requests","Handle API rate limits with retry logic via Error Trigger","CORS restrictions apply - use a proxy for cross-origin requests if needed"],connections:{inputs:1,outputs:1}},codeExecutor:{id:"codeExecutor",icon:"",title:"Code Executor",category:"Actions",overview:"The Code Executor runs custom JavaScript code with full access to input data. Transform data, implement complex logic, call APIs, or generate dynamic content. Your code runs in a sandboxed environment with async/await support.",technicalDetails:`
**Execution Context:**
\`\`\`javascript
// Available variables:
input    // Data from previous node
context  // Execution context with nodeId, addLog()

// Your code is wrapped in async IIFE:
(async () => {
  // Your code here
  return result;
})();
\`\`\`

**Return Value:**
- Use \`return\` to pass data to next node
- Returned value becomes \`output\` for downstream nodes
- Objects, arrays, strings, numbers all supported

**Available APIs:**
- fetch() for HTTP requests
- console.log() for debugging
- JSON, Math, Date, Array methods
- async/await for promises
    `,config:[{name:"Code",type:"JavaScript",desc:"Your JavaScript code to execute",default:`// Access input data via 'input'
// Return output data
return input;`}],examples:[{title:"Data Transformation",description:"Transform array of objects",code:`// Extract specific fields
const users = input.data || [];
return users.map(user => ({
  id: user.id,
  name: user.name.toUpperCase(),
  email: user.email.toLowerCase()
}));`},{title:"Filtering",description:"Filter array by condition",code:`// Keep only active items
const items = input.items || [];
return items.filter(item => 
  item.status === 'active' && 
  item.score > 50
);`},{title:"API Call with Processing",description:"Fetch and transform external data",code:`// Fetch additional data
const userId = input.userId;
const response = await fetch(
  \`https://api.example.com/users/\${userId}\`
);
const user = await response.json();

// Combine with input
return {
  ...input,
  userDetails: user,
  fetchedAt: new Date().toISOString()
};`},{title:"Generate Dynamic Content",description:"Create content based on input",code:`// Build email template
const { name, items, total } = input;

const itemList = items
  .map(i => \`- \${i.name}: $\${i.price}\`)
  .join('\\n');

return {
  subject: \`Order Confirmation for \${name}\`,
  body: \`Dear \${name},

Thank you for your order!

Items:
\${itemList}

Total: $\${total}

Best regards,
The Team\`
};`},{title:"Error Handling",description:"Graceful error handling",code:`try {
  const result = await riskyOperation(input);
  return { success: true, data: result };
} catch (error) {
  return { 
    success: false, 
    error: error.message,
    fallback: input.defaultValue 
  };
}`}],tips:["Use console.log() for debugging - output appears in browser DevTools","Always handle potential null/undefined with optional chaining (?.) or defaults","Async operations are fully supported with async/await","Complex logic is better here than chaining multiple Set Variable nodes"],connections:{inputs:1,outputs:1}},setVariable:{id:"setVariable",icon:"",title:"Set Variable",category:"Actions",overview:"The Set Variable node creates, transforms, or merges data into named variables. Use it to prepare data for downstream nodes, rename fields, or combine multiple data sources.",technicalDetails:`
**Modes:**
| Mode | Behavior |
|------|----------|
| set | Replaces value entirely |
| append | Adds to existing array |
| merge | Shallow merge with existing object |

**Template Expressions:**
\`\`\`
{{input.field}}           - Access input field
{{input.data.nested}}     - Nested access
{{input.items[0].name}}   - Array indexing
\`\`\`

**Output Schema:**
\`\`\`javascript
{
  ...input,
  [variableName]: value
}
\`\`\`
    `,config:[{name:"Variable Name",type:"string",desc:"Name of the variable to create/update",default:"data"},{name:"Value",type:"string",desc:"Value or expression (supports {{templates}})",default:""},{name:"Mode",type:"select",desc:"How to set the value",default:"set",options:["set","append","merge"]}],examples:[{title:"Extract Field",description:"Pull out specific data",config:`Variable Name: email
Value: {{input.user.email}}
Mode: set`,output:'{ ...input, email: "user@example.com" }'},{title:"Build Array",description:"Accumulate items from loop",config:`Variable Name: results
Value: {{input.currentItem}}
Mode: append`,output:"{ ...input, results: [...existing, currentItem] }"},{title:"Merge Objects",description:"Combine data sources",config:`Variable Name: combined
Value: { "timestamp": "{{now}}", "source": "workflow" }
Mode: merge`,output:'{ ...input, combined: { ...existing, timestamp: "...", source: "workflow" } }'}],tips:["Use Set Variable for simple transformations; Code Executor for complex logic","Variable names become keys in the output object","Template expressions are resolved from the input data","Append mode is useful for collecting results in loops"],connections:{inputs:1,outputs:1}},fileSystem:{id:"fileSystem",icon:"",title:"File System",category:"Actions",overview:"The File System node reads from and writes to local files using the File System Access API. Process local documents, save generated content, or build file-based workflows.",technicalDetails:`
**Read Mode:**
- Opens file picker dialog
- Returns file contents as text or base64
- Supports filtering by file extension

**Write Mode:**
- Opens save dialog
- Writes string content to selected file
- Creates new file or overwrites existing

**Output Schema (Read):**
\`\`\`javascript
{
  filename: "document.txt",
  size: 1024,
  type: "text/plain",
  content: "File contents here...",
  lastModified: 1697234567890
}
\`\`\`
    `,config:[{name:"Mode",type:"select",desc:"Read or write operation",default:"read",options:["read","write"]},{name:"Filename",type:"string",desc:"Default filename for write operations",default:""},{name:"File Types",type:"array",desc:"Accepted extensions for read (e.g., ['.txt', '.json'])",default:"[]"}],examples:[{title:"Read Text File",description:"Load document for processing",config:`Mode: read
File Types: [".txt", ".md"]`,output:'{ filename: "notes.txt", content: "Document content..." }'},{title:"Save AI Output",description:"Write generated content to file",config:`Mode: write
Filename: generated_{{date}}.txt`,flow:"AI Agent  File System (write)"},{title:"Process JSON File",description:"Load and parse JSON data",config:`Mode: read
File Types: [".json"]`,flow:"File System (read)  Code Executor (parse JSON)  Output"}],tips:["File System Access API requires user permission for each file","Works best in Chrome and Edge browsers","Combine with AI Agent to analyze document contents","Use Code Executor to parse JSON or CSV file contents"],connections:{inputs:1,outputs:1}},localStorage:{id:"localStorage",icon:"",title:"Local Storage",category:"Actions",overview:"The Local Storage node persists data between workflow runs using IndexedDB or localStorage. Store configuration, cache API responses, or maintain state across sessions.",technicalDetails:`
**Storage Types:**
| Type | Capacity | Best For |
|------|----------|----------|
| localStorage | ~5MB | Simple key-value pairs |
| indexedDB | ~50MB+ | Complex objects, large data |

**Operations:**
| Mode | Behavior |
|------|----------|
| get | Retrieve value by key |
| set | Store value at key |
| delete | Remove key and value |

**Output Schema:**
\`\`\`javascript
// Get mode
{ key: "myData", value: { ...storedData }, found: true }

// Set mode  
{ key: "myData", success: true }

// Delete mode
{ key: "myData", deleted: true }
\`\`\`
    `,config:[{name:"Mode",type:"select",desc:"Operation to perform",default:"get",options:["get","set","delete"]},{name:"Storage Type",type:"select",desc:"Which storage to use",default:"indexedDB",options:["indexedDB","localStorage"]},{name:"Key",type:"string",desc:"Storage key name",default:""}],examples:[{title:"Cache API Response",description:"Store data to avoid repeated API calls",config:`Mode: set
Storage Type: indexedDB
Key: api_cache_{{input.endpoint}}`,flow:"HTTP Request  Local Storage (set)"},{title:"Load Cached Data",description:"Retrieve previously stored data",config:`Mode: get
Storage Type: indexedDB
Key: api_cache`,output:'{ key: "api_cache", value: {...cachedData}, found: true }'},{title:"Clear Cache",description:"Remove stored data",config:`Mode: delete
Storage Type: indexedDB
Key: api_cache`,output:'{ key: "api_cache", deleted: true }'}],tips:["Use indexedDB for complex objects and larger datasets","localStorage is simpler but limited to 5MB","Keys can include template expressions for dynamic storage","Combine with If/Else to check if cache exists before fetching"],connections:{inputs:1,outputs:1}},ifElse:{id:"ifElse",icon:"",title:"If/Else",category:"Logic",overview:"The If/Else node creates conditional branches in your workflow. Route data to different paths based on comparisons, creating dynamic decision trees.",technicalDetails:`
**Operators:**
| Operator | Description | Example |
|----------|-------------|---------|
| equals | Exact match (==) | status equals "success" |
| notEquals | Not match (!=) | status notEquals "error" |
| contains | String includes | message contains "error" |
| greaterThan | Numeric > | count greaterThan 10 |
| lessThan | Numeric < | count lessThan 5 |
| exists | Not null/undefined | user.email exists |

**Output Routing:**
- Output 0 (top): Condition is TRUE
- Output 1 (bottom): Condition is FALSE

**Condition Path:**
Access nested values with dot notation:
\`\`\`
user.profile.settings.notifications
data.items[0].status
response.headers.content-type
\`\`\`
    `,config:[{name:"Condition",type:"string",desc:"Field path to evaluate (e.g., status, data.count)",default:""},{name:"Operator",type:"select",desc:"Comparison operator",default:"equals",options:["equals","notEquals","contains","greaterThan","lessThan","exists"]},{name:"Compare Value",type:"string",desc:"Value to compare against",default:""}],examples:[{title:"Check API Status",description:"Branch on response status",config:`Condition: status
Operator: equals
Compare Value: 200`,routing:"TRUE  Process data | FALSE  Error handling"},{title:"Validate Data Exists",description:"Check if field is present",config:`Condition: user.email
Operator: exists`,routing:"TRUE  Send email | FALSE  Request email"},{title:"Numeric Threshold",description:"Check if value exceeds limit",config:`Condition: items.length
Operator: greaterThan
Compare Value: 100`,routing:"TRUE  Paginate | FALSE  Process all"},{title:"String Contains",description:"Search for keyword",config:`Condition: message
Operator: contains
Compare Value: error`,routing:"TRUE  Log error | FALSE  Continue"}],tips:["Use dot notation to access deeply nested properties","The 'exists' operator checks for null, undefined, and empty strings","Numeric comparisons convert strings to numbers automatically","Chain multiple If/Else nodes for complex decision trees"],connections:{inputs:1,outputs:2,outputLabels:["true ","false "]}},loop:{id:"loop",icon:"",title:"Loop",category:"Logic",overview:"The Loop node repeats workflow sections multiple times. Use count-based iteration (repeat N times) or array-based iteration (process each item). Essential for batch processing and automated repetition.",technicalDetails:`
**Loop Modes:**
1. **Count-Based**: Repeat N times with iteration counter
2. **Array-Based**: Iterate over items in an array

**Two Outputs:**
| Output | Name | Purpose |
|--------|------|---------|
| 0 (top) | loop  | Fires for each iteration, connect back to repeat |
| 1 (bottom) | done  | Fires when all iterations complete |

**Creating the Loop:**
Connect "loop " output BACK to the node you want to repeat.
This creates a cycle that executes for each iteration.

**Iteration Data:**
\`\`\`javascript
{
  iteration: 1,          // Current iteration (1-indexed)
  totalIterations: 5,    // Total configured iterations
  previousResult: {...}, // Output from last iteration
  isLoopIteration: true
}
\`\`\`

**Completion Data:**
\`\`\`javascript
{
  results: [...],        // Array of all iteration results
  totalIterations: 5,
  lastResult: {...},     // Final iteration output
  completed: true
}
\`\`\`
    `,config:[{name:"Iterations",type:"number",desc:"Number of times to repeat (1-1000)",default:"1"},{name:"Items Path",type:"string",desc:"Path to array for item-based looping",default:"items"},{name:"Max Items",type:"number",desc:"Maximum items to process per iteration",default:"100"}],examples:[{title:"Generate 5 Stories",description:"AI generates multiple unique stories",config:"Iterations: 5",flow:`Manual Trigger  AI Agent (generate story)  Loop  Output
                                                              |
                                     loop  `},{title:"Process Array Items",description:"Handle each item in a list",config:`Iterations: 1
Items Path: data.users`,flow:"HTTP Request  Loop  Process User  Loop  Output"},{title:"Infinite Automation",description:"Continuous content generation",config:`Iterations: 100
(Set high for long-running...)`,flow:`Trigger  AI Agent  Loop  Output
                                      |
                            loop  `},{title:"Batch API Calls",description:"Call API for each item",config:"Iterations: 10",flow:"For each ID: Trigger  Set Variable  HTTP Request  Loop  Output"}],tips:["Always connect the 'loop ' output back to create the actual loop","Use 'done ' output for final processing after all iterations","Access current iteration via input.iteration in downstream nodes","Set reasonable iteration limits to prevent runaway loops"],connections:{inputs:1,outputs:2,outputLabels:["loop ","done "]}},switchNode:{id:"switchNode",icon:"",title:"Switch",category:"Logic",overview:"The Switch node routes data to different outputs based on field values. Like a multi-way If/Else, it supports up to 4 output paths plus a default.",technicalDetails:`
**Route Configuration:**
\`\`\`javascript
routes: [
  { value: "urgent", outputIndex: 0 },
  { value: "normal", outputIndex: 1 },
  { value: "low", outputIndex: 2 }
]
\`\`\`

**Outputs:**
- Outputs 0-2: Matched routes
- Output 3: Default (when no match)

**Matching:**
- Exact string match (case-sensitive)
- First matching route wins
- Unmatched values go to defaultOutput
    `,config:[{name:"Field",type:"string",desc:"Field path to switch on",default:""},{name:"Routes",type:"array",desc:"Value-to-output mappings",default:"[{value:'', outputIndex:0}]"},{name:"Default Output",type:"number",desc:"Output index when no match (0-3)",default:"3"}],examples:[{title:"Priority Routing",description:"Route tasks by priority level",config:`Field: priority
Routes:
  - value: "urgent"  Output 0
  - value: "normal"  Output 1
  - value: "low"  Output 2
Default Output: 3`,routing:"urgent  Immediate | normal  Queue | low  Archive | unknown  Review"},{title:"Content Type Handler",description:"Process different data types",config:`Field: type
Routes:
  - value: "text"  Output 0
  - value: "image"  Output 1
  - value: "video"  Output 2`,routing:"text  Text processor | image  Image handler | video  Video handler"}],tips:["Use for multiple discrete values; If/Else for binary conditions","Default output catches unexpected values - always handle it","Combine with Merge node to rejoin paths after processing","Route values are case-sensitive"],connections:{inputs:1,outputs:4,outputLabels:["0","1","2","default"]}},merge:{id:"merge",icon:"",title:"Merge",category:"Logic",overview:"The Merge node combines multiple workflow branches back into a single path. Wait for all inputs to arrive or take the first one that completes.",technicalDetails:`
**Modes:**
| Mode | Behavior |
|------|----------|
| wait | Waits for ALL inputs before proceeding |
| first | Proceeds with FIRST input to arrive |

**Output (wait mode):**
\`\`\`javascript
{
  inputs: [
    { source: 0, data: {...} },
    { source: 1, data: {...} }
  ],
  merged: { ...combinedData }
}
\`\`\`

**Output (first mode):**
\`\`\`javascript
{
  source: 0,  // Which input arrived first
  data: {...} // Data from that input
}
\`\`\`
    `,config:[{name:"Mode",type:"select",desc:"How to handle multiple inputs",default:"wait",options:["wait","first"]}],examples:[{title:"Combine API Responses",description:"Fetch from multiple APIs and merge",config:"Mode: wait",flow:` HTTP (API 1) 
Trigger                     Merge  Process
        HTTP (API 2) `},{title:"Race Condition",description:"Use fastest response",config:"Mode: first",flow:` HTTP (Primary) 
Trigger                        Merge  Use result
        HTTP (Backup) `},{title:"Rejoin After Branch",description:"Merge If/Else branches",config:"Mode: wait",flow:`If/Else  True path  
               False path  Merge  Continue`}],tips:["Use 'wait' mode when you need data from all branches","Use 'first' mode for redundancy or timeout scenarios","Merge has 2 inputs - connect both to activate","Data from both inputs is available in the merged output"],connections:{inputs:2,outputs:1}},aiAgent:{id:"aiAgent",icon:"",title:"AI Agent",category:"AI",overview:"The AI Agent is the brain of your automation. It generates text using WebLLM, a local LLM inference engine that runs entirely in your browser via WebGPU. No data ever leaves your device.",technicalDetails:`
**Execution Flow:**
1. User/System message templates are resolved with input data
2. Messages sent to local WebLLM model
3. Model generates response token by token
4. Response passed to downstream nodes

**Template Syntax:**
\`\`\`
{{input}}              - Full input object as JSON
{{input.text}}         - Specific field
{{input.data.items}}   - Nested access
\`\`\`

**Output Schema:**
\`\`\`javascript
{
  response: "AI-generated text...",
  model: "gemma-2-2b-it",
  tokens: 245,
  duration: 3.2
}
\`\`\`

**Available Models:**
| Model | Size | Best For |
|-------|------|----------|
| Gemma 2 2B | 1.4GB | Balanced quality/speed |
| Phi-3.5 Mini | 2.2GB | Reasoning tasks |
| Llama 3.2 3B | 1.8GB | General purpose |
| Qwen 2.5 1.5B | 1.0GB | Fast responses |
| SmolLM 1.7B | 1.1GB | Minimal resources |
    `,config:[{name:"System Prompt",type:"text (multiline)",desc:"Instructions for AI behavior/persona",default:""},{name:"User Message",type:"text (multiline)",desc:"Template for user input (supports {{templates}})",default:"{{input.text}}"},{name:"Temperature",type:"slider (0-1)",desc:"Creativity level. Low=factual, High=creative",default:"0.7"},{name:"Max Tokens",type:"number",desc:"Maximum response length in tokens",default:"2000"}],examples:[{title:"Story Generator",description:"Create unique stories from prompts",config:`System Prompt: You are a creative fiction writer. Write engaging short stories with vivid descriptions and compelling characters.

User Message: Write a 300-word story about: {{input.text}}

Temperature: 0.9
Max Tokens: 1000`},{title:"Data Analyzer",description:"Analyze and summarize data",config:`System Prompt: You are a data analyst. Analyze the provided data and give clear, actionable insights.

User Message: Analyze this data and provide key insights:
{{input.data}}

Temperature: 0.3
Max Tokens: 500`},{title:"Code Assistant",description:"Generate or explain code",config:`System Prompt: You are an expert programmer. Write clean, well-documented code. Explain your approach.

User Message: {{input.request}}

Language: {{input.language}}

Temperature: 0.4
Max Tokens: 1500`},{title:"Email Composer",description:"Draft professional emails",config:`System Prompt: You are a professional communication expert. Write clear, concise, and polite emails.

User Message: Write an email about: {{input.subject}}
Tone: {{input.tone}}
Key points: {{input.points}}

Temperature: 0.6
Max Tokens: 400`}],tips:["Use lower temperature (0.2-0.4) for factual/analytical tasks","Use higher temperature (0.7-0.9) for creative content","Include clear instructions in the system prompt for consistent results","Connect as a tool to other AI Agents for multi-agent workflows"],connections:{inputs:1,outputs:1}},vectorMemory:{id:"vectorMemory",icon:"",title:"Vector Memory",category:"AI",overview:"Vector Memory stores and retrieves information using semantic similarity. It converts text into embeddings (vector representations) and finds the most relevant matches. Essential for RAG (Retrieval Augmented Generation) workflows.",technicalDetails:`
**Operations:**
| Mode | Purpose |
|------|---------|
| query | Find similar content by meaning |
| upsert | Add or update memory entries |
| delete | Remove specific entries |

**Embedding Process:**
1. Text is converted to vector embeddings
2. Vectors are stored in local IndexedDB
3. Queries find closest vectors by cosine similarity

**Query Output:**
\`\`\`javascript
{
  results: [
    { id: "mem_123", text: "...", score: 0.92, metadata: {...} },
    { id: "mem_456", text: "...", score: 0.85, metadata: {...} }
  ],
  query: "original query text",
  namespace: "default"
}
\`\`\`

**Upsert Output:**
\`\`\`javascript
{
  id: "mem_789",
  success: true,
  namespace: "default"
}
\`\`\`
    `,config:[{name:"Mode",type:"select",desc:"Operation to perform",default:"query",options:["query","upsert","delete"]},{name:"Namespace",type:"string",desc:"Memory isolation (like folders)",default:"default"},{name:"Top K",type:"number",desc:"Number of results to return",default:"5"},{name:"Min Score",type:"number (0-1)",desc:"Minimum similarity threshold",default:"0.3"}],examples:[{title:"Build Knowledge Base",description:"Store documents for later retrieval",config:`Mode: upsert
Namespace: knowledge`,flow:"File System (read)  Code (split into chunks)  Loop  Vector Memory (upsert)"},{title:"RAG Query",description:"Find relevant context for AI",config:`Mode: query
Namespace: knowledge
Top K: 3
Min Score: 0.5`,flow:"Manual Trigger  Vector Memory (query)  AI Agent (answer with context)"},{title:"Conversation Memory",description:"Remember past conversations",config:`Mode: upsert
Namespace: conversations`,flow:"After AI response  Vector Memory (upsert) // stores each exchange"}],tips:["Use namespaces to separate different knowledge bases","Higher Min Score returns fewer but more relevant results","Chunk large documents into paragraphs for better retrieval","Combine with AI Agent for powerful RAG workflows"],connections:{inputs:1,outputs:1}},waitForApproval:{id:"waitForApproval",icon:"",title:"Wait for Approval",category:"AI",overview:"The Wait for Approval node pauses workflow execution until a human approves or rejects. Essential for human-in-the-loop automation where critical actions need oversight.",technicalDetails:`
**Workflow Pause:**
1. Execution reaches this node and stops
2. Approval dialog appears to user
3. User reviews data and clicks Approve/Reject
4. Execution continues on appropriate output

**Two Outputs:**
- Output 0 (top): User clicked Approve 
- Output 1 (bottom): User clicked Reject 

**Approval Data:**
\`\`\`javascript
// Passed to approved/rejected branch
{
  approved: true,
  approvedBy: "user",
  approvedAt: "2024-01-15T10:30:00.000Z",
  originalInput: {...},
  notes: "User comment if any"
}
\`\`\`
    `,config:[{name:"Title",type:"string",desc:"Dialog header",default:"Approval Required"},{name:"Message",type:"text (multiline)",desc:"Description for reviewer (supports {{templates}})",default:""},{name:"Timeout",type:"number (seconds)",desc:"Auto-reject after N seconds (0=never)",default:"0"},{name:"Notify Browser",type:"boolean",desc:"Show browser notification",default:"true"}],examples:[{title:"Review AI Output",description:"Approve before publishing",config:`Title: Review Generated Content
Message: Please review this AI-generated content before publishing:

{{input.content}}

Timeout: 0
Notify Browser: true`,flow:"AI Agent  Wait for Approval  (Approved) HTTP Post || (Rejected) Log"},{title:"Confirm API Action",description:"Approve before destructive operation",config:`Title: Confirm Delete
Message: About to delete {{input.count}} records. Are you sure?

Timeout: 300
Notify Browser: true`,flow:"Process Data  Wait for Approval  (Approved) HTTP DELETE || (Rejected) Cancel"},{title:"Review Email",description:"Approve before sending",config:`Title: Review Email
Message: To: {{input.recipient}}
Subject: {{input.subject}}

{{input.body}}`,flow:"AI Compose  Wait for Approval  (Approved) Send Email"}],tips:["Use before any irreversible actions (deletions, sends, purchases)","Set a timeout for time-sensitive workflows","Browser notification helps if you switch tabs","Include key details in the message for informed decisions"],connections:{inputs:1,outputs:2,outputLabels:["approved ","rejected "]}},subWorkflow:{id:"subWorkflow",icon:"",title:"Sub-Workflow",category:"AI",overview:"The Sub-Workflow node executes another saved workflow as a subroutine. Build modular, reusable automation by composing complex workflows from simpler building blocks.",technicalDetails:`
**Execution:**
1. Current workflow pauses
2. Selected sub-workflow executes with input
3. Sub-workflow output becomes this node's output
4. Parent workflow continues

**Input Passing:**
- If "Pass Input" enabled: full input passed to sub-workflow
- Sub-workflow receives data at its trigger node

**Output:**
\`\`\`javascript
{
  subWorkflowId: "wf_abc123",
  subWorkflowName: "Process Data",
  result: { ...subWorkflowOutput },
  duration: 1.5
}
\`\`\`
    `,config:[{name:"Workflow",type:"select",desc:"Saved workflow to execute",default:""},{name:"Pass Input",type:"boolean",desc:"Send current input to sub-workflow",default:"true"},{name:"Async",type:"boolean",desc:"Don't wait for completion (fire and forget)",default:"false"}],examples:[{title:"Reusable Data Processor",description:"Call shared processing logic",config:`Workflow: "Data Sanitizer"
Pass Input: true
Async: false`,flow:"API Response  Sub-Workflow (sanitize)  Use Clean Data"},{title:"Parallel Sub-Workflows",description:"Run multiple workflows simultaneously",config:"Async: true",flow:`Trigger  Sub-Workflow A (async)
               Sub-Workflow B (async)  
               Merge results`}],tips:["Build a library of reusable workflows for common tasks","Use async mode when you don't need the result immediately","Sub-workflows can call other sub-workflows (nested)","Great for team collaboration - share common workflows"],connections:{inputs:1,outputs:1}},textToSpeech:{id:"textToSpeech",icon:"",title:"Text to Speech",category:"AI",overview:"The Text to Speech node converts text into spoken audio using the Web Speech API. Add voice output to your workflows for accessibility, notifications, or interactive experiences.",technicalDetails:`
**Web Speech API:**
- Uses browser's built-in speech synthesis
- No external API calls or costs
- Access to system voices

**Voice Selection:**
Browser provides various voices based on OS:
- Windows: Microsoft voices
- macOS: System voices  
- Chrome: Additional Google voices

**Output:**
\`\`\`javascript
{
  spoken: true,
  text: "The spoken text...",
  voice: "Microsoft Zira",
  duration: 3.5
}
\`\`\`
    `,config:[{name:"Voice",type:"select",desc:"Voice to use for speech",default:"default"},{name:"Rate",type:"slider (0.5-2)",desc:"Speech speed",default:"1.0"},{name:"Pitch",type:"slider (0.5-2)",desc:"Voice pitch",default:"1.0"},{name:"Auto Play",type:"boolean",desc:"Play immediately when triggered",default:"true"}],examples:[{title:"Read AI Response",description:"Speak AI-generated content",config:`Voice: default
Rate: 1.0
Auto Play: true`,flow:"AI Agent  Text to Speech"},{title:"Notification Alert",description:"Voice notification for events",config:`Rate: 1.2
Voice: (select clear voice)`,flow:'HTTP Request  If/Else (important?)  Text to Speech ("Alert: {{message}}")'}],tips:["Available voices vary by browser and operating system","Higher rate (1.2-1.5) is good for notifications","Use clear, punctuated text for better pronunciation","Combine with AI Agent for voice assistant experiences"],connections:{inputs:1,outputs:1}},imageGeneration:{id:"imageGeneration",icon:"",title:"Image Generation",category:"AI",overview:"The Image Generation node creates images from text prompts using AI models. Generate visuals for content, social media, presentations, or creative projects.",technicalDetails:`
**Providers:**
| Provider | Location | Notes |
|----------|----------|-------|
| local (WebSD) | Browser | Requires powerful GPU |
| openai | API | Requires API key |
| stability | API | Requires API key |

**Output:**
\`\`\`javascript
{
  imageUrl: "blob:..." or "data:image/png;base64,...",
  artifactId: "art_123",
  prompt: "original prompt",
  size: "512x512",
  provider: "local"
}
\`\`\`
    `,config:[{name:"Provider",type:"select",desc:"Image generation service",default:"local",options:["local","openai","stability"]},{name:"Size",type:"select",desc:"Image dimensions",default:"512x512",options:["256x256","512x512","1024x1024"]},{name:"Negative Prompt",type:"text",desc:"What to avoid in the image",default:""},{name:"Seed",type:"number",desc:"Random seed for reproducibility",default:""},{name:"Steps",type:"number",desc:"Diffusion steps (quality vs speed)",default:"20"}],examples:[{title:"Blog Illustration",description:"Generate images for articles",config:`Provider: openai
Size: 1024x1024`,flow:"AI Agent (write article)  AI Agent (describe image)  Image Generation"},{title:"Product Mockup",description:"Create product visualizations",config:`Provider: stability
Negative Prompt: blurry, low quality`,flow:"Manual Trigger  Image Generation  Output"}],tips:["Local generation requires WebGPU and significant GPU resources","API providers have costs - check pricing","Use negative prompts to avoid common issues (blurry, low quality)","Set a seed for reproducible results"],connections:{inputs:1,outputs:1}},pythonExecutor:{id:"pythonExecutor",icon:"",title:"Python Executor",category:"AI",overview:"The Python Executor runs Python code directly in your browser using Pyodide. Access Python's scientific computing ecosystem including NumPy, Pandas, and moreall without a server.",technicalDetails:`
**Pyodide Runtime:**
- Full Python 3.11 interpreter in WebAssembly
- Runs entirely in the browser
- Access to many pure-Python packages

**Available Packages:**
- numpy, pandas, scipy
- matplotlib, pillow
- requests (limited), json
- And many more

**Variable Access:**
\`\`\`python
# Input is available as 'input' variable
data = input  # Dict from previous node

# Set result for output
result = {"processed": True, "data": data}
\`\`\`

**Output:**
\`\`\`javascript
{
  result: { ...pythonResult },
  stdout: "Any print() output",
  duration: 1.2
}
\`\`\`
    `,config:[{name:"Code",type:"Python",desc:"Python code to execute",default:"# Access input via 'input' variable\\nresult = input"},{name:"Packages",type:"array",desc:"Additional packages to install",default:"[]"},{name:"Timeout",type:"number (ms)",desc:"Execution timeout",default:"30000"}],examples:[{title:"Data Analysis",description:"Analyze data with Pandas",code:`import pandas as pd
import json

# Parse input data
data = input.get('data', [])
df = pd.DataFrame(data)

# Analyze
result = {
    'count': len(df),
    'columns': list(df.columns),
    'summary': df.describe().to_dict()
}`},{title:"Statistical Calculation",description:"Complex math with NumPy",code:`import numpy as np

values = input.get('values', [])
arr = np.array(values)

result = {
    'mean': float(np.mean(arr)),
    'std': float(np.std(arr)),
    'median': float(np.median(arr)),
    'percentile_95': float(np.percentile(arr, 95))
}`},{title:"Text Processing",description:"Process text with Python",code:`import re
from collections import Counter

text = input.get('text', '')

# Word frequency
words = re.findall(r'\\w+', text.lower())
freq = Counter(words).most_common(10)

result = {
    'word_count': len(words),
    'unique_words': len(set(words)),
    'top_words': freq
}`}],tips:["First execution is slow (loading Pyodide) - subsequent runs are fast","Use 'result' variable to pass data to next node","print() output appears in stdout field","Not all Python packages are available - check Pyodide compatibility"],connections:{inputs:1,outputs:1}}},K3=[{type:"welcome",nodes:["welcome","shortcuts"]},{type:"category",name:"Triggers",color:"#00c853",nodes:["manualTrigger","scheduleTrigger","webhookTrigger","errorTrigger","browserEventTrigger"]},{type:"category",name:"Actions",color:"#2979ff",nodes:["output","httpRequest","codeExecutor","setVariable","fileSystem","localStorage"]},{type:"category",name:"Logic",color:"#ffab00",nodes:["ifElse","loop","switchNode","merge"]},{type:"category",name:"AI",color:"#e040fb",nodes:["aiAgent","vectorMemory","waitForApproval","subWorkflow","textToSpeech","imageGeneration","pythonExecutor"]}],e4={welcome:{id:"welcome",icon:"",title:"Documentation"},shortcuts:{id:"shortcuts",icon:"",title:"Keyboard Shortcuts"}};function t4({onClose:e}){const[t,i]=T.useState("welcome"),o=()=>u.jsx("nav",{className:"docs-nav",children:K3.map((h,p)=>u.jsxs("div",{className:"nav-category",children:[h.type==="category"&&u.jsx("div",{className:"nav-category-title",style:{color:h.color},children:h.name}),h.nodes.map(m=>{const g=Xc[m]||e4[m];return g?u.jsxs("div",{className:`nav-item ${t===m?"active":""}`,onClick:()=>i(m),children:[u.jsx("span",{className:"nav-item-icon",children:g.icon}),u.jsx("span",{children:g.title})]},m):null})]},p))}),a=()=>u.jsxs("div",{className:"welcome-content",children:[u.jsx("h1",{children:" IOSANS Documentation"}),u.jsx("p",{className:"tagline",children:"Welcome to the Infinite Open Source Automation System. Build powerful, local-first AI workflows with complete privacy and control."}),u.jsxs("div",{className:"feature-grid",children:[u.jsxs("div",{className:"feature-card",children:[u.jsx("div",{className:"feature-card-icon",children:""}),u.jsx("h4",{children:"100% Local"}),u.jsx("p",{children:"All processing happens in your browser. No data leaves your device."})]}),u.jsxs("div",{className:"feature-card",children:[u.jsx("div",{className:"feature-card-icon",children:""}),u.jsx("h4",{children:"WebLLM AI"}),u.jsx("p",{children:"Run powerful LLMs directly in your browser using WebGPU."})]}),u.jsxs("div",{className:"feature-card",children:[u.jsx("div",{className:"feature-card-icon",children:""}),u.jsx("h4",{children:"Visual Workflows"}),u.jsx("p",{children:"Drag-and-drop node editor for building complex automations."})]}),u.jsxs("div",{className:"feature-card",children:[u.jsx("div",{className:"feature-card-icon",children:""}),u.jsx("h4",{children:"Artifacts"}),u.jsx("p",{children:"All outputs are saved as artifacts for future reference."})]})]}),u.jsxs("div",{className:"article-section",style:{marginTop:32},children:[u.jsx("h3",{children:" Getting Started"}),u.jsxs("p",{children:["1. Drag a ",u.jsx("strong",{children:"Manual Trigger"})," from the sidebar to start your workflow.",u.jsx("br",{}),"2. Add nodes like ",u.jsx("strong",{children:"AI Agent"}),","," ",u.jsx("strong",{children:"Code Executor"}),", or ",u.jsx("strong",{children:"HTTP Request"}),".",u.jsx("br",{}),"3. Connect nodes by dragging from output handles (right) to input handles (left).",u.jsx("br",{}),"4. Click ",u.jsx("strong",{children:"Run"})," to execute your workflow."]})]}),u.jsxs("div",{className:"article-section",children:[u.jsx("h3",{children:" Node Categories"}),u.jsx("div",{className:"config-table",children:u.jsxs("table",{children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Category"}),u.jsx("th",{children:"Count"}),u.jsx("th",{children:"Purpose"})]})}),u.jsxs("tbody",{children:[u.jsxs("tr",{children:[u.jsx("td",{style:{color:"#00c853"},children:"Triggers"}),u.jsx("td",{children:"5"}),u.jsx("td",{children:"Start workflows (manual, schedule, webhook, error, browser)"})]}),u.jsxs("tr",{children:[u.jsx("td",{style:{color:"#2979ff"},children:"Actions"}),u.jsx("td",{children:"6"}),u.jsx("td",{children:"Perform operations (HTTP, code, files, storage)"})]}),u.jsxs("tr",{children:[u.jsx("td",{style:{color:"#ffab00"},children:"Logic"}),u.jsx("td",{children:"4"}),u.jsx("td",{children:"Control flow (if/else, loop, switch, merge)"})]}),u.jsxs("tr",{children:[u.jsx("td",{style:{color:"#e040fb"},children:"AI"}),u.jsx("td",{children:"7"}),u.jsx("td",{children:"AI capabilities (LLM, memory, TTS, images, Python)"})]})]})]})})]})]}),l=()=>u.jsxs("div",{className:"docs-article",children:[u.jsxs("div",{className:"article-header",children:[u.jsx("div",{className:"article-icon",children:""}),u.jsx("div",{children:u.jsx("h2",{className:"article-title",children:"Keyboard Shortcuts"})})]}),u.jsxs("div",{className:"article-section",children:[u.jsx("h3",{children:"General"}),u.jsxs("div",{className:"shortcuts-list",children:[u.jsxs("div",{className:"shortcut-row",children:[u.jsx("span",{children:"Save Workflow"}),u.jsx("span",{className:"shortcut-key",children:"Ctrl + S"})]}),u.jsxs("div",{className:"shortcut-row",children:[u.jsx("span",{children:"Run Workflow"}),u.jsx("span",{className:"shortcut-key",children:"Ctrl + Enter"})]}),u.jsxs("div",{className:"shortcut-row",children:[u.jsx("span",{children:"Undo"}),u.jsx("span",{className:"shortcut-key",children:"Ctrl + Z"})]}),u.jsxs("div",{className:"shortcut-row",children:[u.jsx("span",{children:"Redo"}),u.jsx("span",{className:"shortcut-key",children:"Ctrl + Shift + Z"})]})]})]}),u.jsxs("div",{className:"article-section",children:[u.jsx("h3",{children:"Node Operations"}),u.jsxs("div",{className:"shortcuts-list",children:[u.jsxs("div",{className:"shortcut-row",children:[u.jsx("span",{children:"Delete Selected"}),u.jsx("span",{className:"shortcut-key",children:"Delete / Backspace"})]}),u.jsxs("div",{className:"shortcut-row",children:[u.jsx("span",{children:"Copy Node"}),u.jsx("span",{className:"shortcut-key",children:"Ctrl + C"})]}),u.jsxs("div",{className:"shortcut-row",children:[u.jsx("span",{children:"Paste Node"}),u.jsx("span",{className:"shortcut-key",children:"Ctrl + V"})]}),u.jsxs("div",{className:"shortcut-row",children:[u.jsx("span",{children:"Duplicate Node"}),u.jsx("span",{className:"shortcut-key",children:"Ctrl + D"})]}),u.jsxs("div",{className:"shortcut-row",children:[u.jsx("span",{children:"Select All"}),u.jsx("span",{className:"shortcut-key",children:"Ctrl + A"})]})]})]}),u.jsxs("div",{className:"article-section",children:[u.jsx("h3",{children:"Canvas Navigation"}),u.jsxs("div",{className:"shortcuts-list",children:[u.jsxs("div",{className:"shortcut-row",children:[u.jsx("span",{children:"Pan Canvas"}),u.jsx("span",{className:"shortcut-key",children:"Space + Drag"})]}),u.jsxs("div",{className:"shortcut-row",children:[u.jsx("span",{children:"Zoom In/Out"}),u.jsx("span",{className:"shortcut-key",children:"Ctrl + +/-"})]}),u.jsxs("div",{className:"shortcut-row",children:[u.jsx("span",{children:"Fit to Screen"}),u.jsx("span",{className:"shortcut-key",children:"Ctrl + 0"})]}),u.jsxs("div",{className:"shortcut-row",children:[u.jsx("span",{children:"Scroll Zoom"}),u.jsx("span",{className:"shortcut-key",children:"Mouse Wheel"})]})]})]})]}),c=h=>{const p=Xc[h];return p?u.jsxs("div",{className:"docs-article",children:[u.jsxs("div",{className:"article-header",children:[u.jsx("div",{className:"article-icon",children:p.icon}),u.jsxs("div",{children:[u.jsx("h2",{className:"article-title",children:p.title}),p.category&&u.jsx("div",{className:"article-category",children:p.category})]})]}),u.jsxs("div",{className:"article-section",children:[u.jsx("h3",{children:" Overview"}),u.jsx("p",{children:p.overview})]}),p.technicalDetails&&u.jsxs("div",{className:"article-section",children:[u.jsx("h3",{children:" Technical Details"}),u.jsx("div",{className:"markdown-content",children:u.jsx(h1,{remarkPlugins:[J3],children:p.technicalDetails.trim()})})]}),p.config&&p.config.length>0&&u.jsxs("div",{className:"article-section",children:[u.jsx("h3",{children:" Configuration"}),u.jsxs("table",{className:"config-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Property"}),u.jsx("th",{children:"Type"}),u.jsx("th",{children:"Description"}),u.jsx("th",{children:"Default"})]})}),u.jsx("tbody",{children:p.config.map((m,g)=>u.jsxs("tr",{children:[u.jsx("td",{children:u.jsx("strong",{children:m.name})}),u.jsx("td",{children:u.jsx("code",{children:m.type})}),u.jsx("td",{children:m.desc}),u.jsx("td",{children:u.jsx("code",{children:m.default||"-"})})]},g))})]})]}),p.examples&&p.examples.length>0&&u.jsxs("div",{className:"article-section",children:[u.jsx("h3",{children:" Examples"}),p.examples.map((m,g)=>u.jsxs("div",{className:"example-block",children:[u.jsx("h4",{children:m.title}),u.jsx("p",{className:"example-desc",children:m.description}),m.config&&u.jsxs("div",{className:"example-config",children:[u.jsx("strong",{children:"Configuration:"}),u.jsx("div",{className:"code-block",children:m.config})]}),m.code&&u.jsxs("div",{className:"example-code",children:[u.jsx("strong",{children:"Code:"}),u.jsx("div",{className:"code-block",children:m.code})]}),m.flow&&u.jsxs("div",{className:"example-flow",children:[u.jsx("strong",{children:"Workflow:"}),u.jsx("div",{className:"code-block",children:m.flow})]}),m.output&&u.jsxs("div",{className:"example-output",children:[u.jsx("strong",{children:"Output:"}),u.jsx("div",{className:"code-block",children:m.output})]}),m.routing&&u.jsxs("div",{className:"example-routing",children:[u.jsx("strong",{children:"Routing:"}),u.jsx("div",{className:"code-block",children:m.routing})]}),m.result&&u.jsxs("div",{className:"example-result",children:[u.jsx("strong",{children:"Result:"}),u.jsx("div",{className:"code-block",children:m.result})]})]},g))]}),p.connections&&u.jsxs("div",{className:"article-section",children:[u.jsx("h3",{children:" Connections"}),u.jsxs("div",{className:"connections-info",children:[u.jsxs("div",{className:"connection-item",children:[u.jsx("span",{className:"connection-label",children:"Inputs:"}),u.jsx("span",{className:"connection-value",children:p.connections.inputs})]}),u.jsxs("div",{className:"connection-item",children:[u.jsx("span",{className:"connection-label",children:"Outputs:"}),u.jsx("span",{className:"connection-value",children:p.connections.outputs})]}),p.connections.outputLabels&&u.jsxs("div",{className:"connection-item",children:[u.jsx("span",{className:"connection-label",children:"Output Labels:"}),u.jsx("span",{className:"connection-value",children:p.connections.outputLabels.join(", ")})]})]})]}),p.tips&&p.tips.length>0&&u.jsxs("div",{className:"article-section",children:[u.jsx("h3",{children:" Tips & Best Practices"}),u.jsx("ul",{className:"tips-list",children:p.tips.map((m,g)=>u.jsx("li",{children:m},g))})]})]}):null},f=()=>t==="welcome"?a():t==="shortcuts"?l():c(t);return u.jsx("div",{className:"docs-overlay",onClick:e,children:u.jsxs("div",{className:"docs-modal",onClick:h=>h.stopPropagation(),children:[u.jsxs("header",{className:"docs-header",children:[u.jsx("h2",{children:" IOSANS Documentation"}),u.jsx("button",{className:"docs-close-btn",onClick:e,children:""})]}),u.jsxs("div",{className:"docs-body",children:[o(),u.jsx("div",{className:"docs-content",children:f()})]})]})})}const n4=T.memo(t4),z1="workflow_automations";function i4(e){const t=r4(),i=e.id||Date.now().toString(),o={...e,id:i,updatedAt:new Date().toISOString(),createdAt:e.createdAt||new Date().toISOString()};return t[i]=o,localStorage.setItem(z1,JSON.stringify(t)),i}function r4(){try{const e=localStorage.getItem(z1);return e?JSON.parse(e):{}}catch(e){return console.error("Failed to load workflows:",e),{}}}function o4(e){const t=JSON.stringify(e,null,2),i=new Blob([t],{type:"application/json"}),o=URL.createObjectURL(i),a=document.createElement("a");a.href=o,a.download=`${e.name||"workflow"}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o)}function a4(e){return new Promise((t,i)=>{const o=new FileReader;o.onload=a=>{try{const l=JSON.parse(a.target.result);if(!l.nodes||!Array.isArray(l.nodes))throw new Error("Invalid workflow: missing nodes array");if(!l.edges||!Array.isArray(l.edges))throw new Error("Invalid workflow: missing edges array");l.id=Date.now().toString(),l.name=l.name+" (Imported)",t(l)}catch(l){i(new Error("Failed to parse workflow file: "+l.message))}},o.onerror=()=>{i(new Error("Failed to read file"))},o.readAsText(e)})}function s4(){const e=T.useRef(null),t=Qo(),[i,o]=T.useState(!1),[a,l]=T.useState(!1),c=Ce(H=>H.workflowName),f=Ce(H=>H.setWorkflowName),h=Ce(H=>H.nodes),p=Ce(H=>H.clearWorkflow),m=Ce(H=>H.loadWorkflow),g=Ce(H=>H.getWorkflowData),v=Xe(H=>H.clearLogs),[b,w]=T.useState(!1);T.useEffect(()=>{const H=()=>w(!0),A=()=>w(!1);return window.addEventListener("audioStart",H),window.addEventListener("audioEnd",A),()=>{window.removeEventListener("audioStart",H),window.removeEventListener("audioEnd",A)}},[]);const S=T.useCallback(()=>{"speechSynthesis"in window&&(window.speechSynthesis.cancel(),window.dispatchEvent(new CustomEvent("audioEnd")))},[]),j=T.useCallback(()=>{const H=g();i4(H),t.success("Workflow saved successfully!")},[g,t]),N=T.useCallback(()=>{const H=g();o4(H),t.success(`Exported "${H.name}.json"`)},[g,t]),k=T.useCallback(()=>{e.current?.click()},[]),C=T.useCallback(async H=>{const A=H.target.files?.[0];if(A){try{const $=await a4(A);m($),t.success(`Imported "${$.name}"`)}catch($){console.error("Import failed:",$),t.error("Import failed: "+$.message)}H.target.value=""}},[m,t]),_=T.useCallback(()=>{h.length!==0&&(p(),v(),t.info("Workflow cleared"))},[h.length,p,v,t]);return u.jsxs("header",{className:"toolbar",children:[u.jsxs("div",{className:"toolbar-left",children:[u.jsx("button",{className:"btn-nav",onClick:()=>o(!0),children:"Tutorial"}),u.jsx("button",{className:"btn-nav",onClick:()=>l(!0),children:"Docs"})]}),u.jsxs("div",{className:"toolbar-center",children:[u.jsx("input",{type:"text",className:"workflow-name-input",value:c,onChange:H=>f(H.target.value),placeholder:"Untitled Workflow"}),b&&u.jsx("button",{className:"btn-stop-audio",onClick:S,title:"Stop all audio playback",children:" Stop Audio"})]}),u.jsxs("div",{className:"toolbar-right",children:[u.jsx("button",{onClick:j,title:"Save workflow",disabled:h.length===0,children:" Save"}),u.jsx("button",{onClick:N,title:"Export to JSON",disabled:h.length===0,children:" Export"}),u.jsx("button",{onClick:k,title:"Import from JSON",children:" Import"}),u.jsx("button",{onClick:()=>window.dispatchEvent(new CustomEvent("openWorkflowManager")),title:"Manage saved workflows",children:" Manage"}),u.jsx("button",{onClick:_,title:"Clear canvas",className:"btn-danger",disabled:h.length===0,children:" Clear"}),u.jsx("input",{type:"file",ref:e,accept:".json",onChange:C,style:{display:"none"}})]}),i&&u.jsx(A_,{onClose:()=>o(!1)}),a&&u.jsx(n4,{onClose:()=>l(!1)})]})}const l4=T.memo(s4);function Yh(e){return e===null?"null":e===void 0?"undefined":Array.isArray(e)?"array":typeof e=="object"?"object":typeof e=="string"?"string":typeof e=="number"?"number":typeof e=="boolean"?"boolean":"unknown"}function Xh(e,t){switch(t){case"null":return"null";case"undefined":return"undefined";case"string":return`"${e.length>100?e.slice(0,100)+"...":e}"`;case"number":case"boolean":return String(e);case"array":return`Array(${e.length})`;case"object":return`Object{${Object.keys(e).length}}`;default:return String(e)}}function Qh({keyName:e,value:t,depth:i=0,path:o=""}){const[a,l]=T.useState(i<2),c=Yh(t),f=c==="object"||c==="array",h=o?`${o}.${e}`:e,p=T.useCallback(g=>{g.stopPropagation();const v=typeof t=="string"?t:JSON.stringify(t,null,2);navigator.clipboard.writeText(v)},[t]),m=()=>{f&&l(!a)};return u.jsxs("div",{className:"tree-node",style:{paddingLeft:i*16},children:[u.jsxs("div",{className:"tree-node-header",onClick:m,children:[f&&u.jsx("span",{className:`tree-expand ${a?"expanded":""}`,children:""}),e!==void 0&&u.jsxs("span",{className:"tree-key",children:[e,":"]}),u.jsx("span",{className:`tree-value type-${c}`,children:f&&!a?Xh(t,c):c==="array"?"[":c==="object"?"{":Xh(t,c)}),u.jsx("button",{className:"tree-copy-btn",onClick:p,title:`Copy ${h||"value"}`,children:""})]}),f&&a&&u.jsxs("div",{className:"tree-children",children:[c==="array"?t.map((g,v)=>u.jsx(Qh,{keyName:v,value:g,depth:i+1,path:h},v)):Object.entries(t).map(([g,v])=>u.jsx(Qh,{keyName:g,value:v,depth:i+1,path:h},g)),u.jsx("div",{className:"tree-bracket",style:{paddingLeft:i*16},children:c==="array"?"]":"}"})]})]})}function c4({data:e}){if(!Array.isArray(e)||e.length===0)return u.jsx("div",{className:"table-empty",children:"No data to display"});const t=[...new Set(e.flatMap(i=>typeof i=="object"&&i!==null?Object.keys(i):[]))];return t.length===0?u.jsx("div",{className:"table-empty",children:"Array contains non-object values"}):u.jsxs("div",{className:"data-table-wrapper",children:[u.jsxs("table",{className:"data-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"#"}),t.map(i=>u.jsx("th",{children:i},i))]})}),u.jsx("tbody",{children:e.slice(0,100).map((i,o)=>u.jsxs("tr",{children:[u.jsx("td",{className:"row-index",children:o}),t.map(a=>u.jsx("td",{className:`type-${Yh(i?.[a])}`,children:Xh(i?.[a],Yh(i?.[a]))},a))]},o))})]}),e.length>100&&u.jsxs("div",{className:"table-more",children:["+ ",e.length-100," more rows"]})]})}function u4({data:e,title:t,showViewToggle:i=!0}){const[o,a]=T.useState("tree"),[l,c]=T.useState(""),f=T.useCallback(()=>{navigator.clipboard.writeText(JSON.stringify(e,null,2))},[e]),h=l?JSON.parse(JSON.stringify(e,(g,v)=>{if(typeof v=="string"&&v.toLowerCase().includes(l.toLowerCase())||typeof g=="string"&&g.toLowerCase().includes(l.toLowerCase())||typeof v=="object")return v})):e,m=Array.isArray(e)&&e.length>0&&typeof e[0]=="object";return u.jsxs("div",{className:"data-viewer",children:[u.jsxs("div",{className:"data-viewer-header",children:[t&&u.jsx("span",{className:"data-viewer-title",children:t}),u.jsxs("div",{className:"data-viewer-controls",children:[u.jsx("input",{type:"text",className:"data-search",placeholder:"Search...",value:l,onChange:g=>c(g.target.value)}),i&&u.jsxs("div",{className:"view-toggle",children:[u.jsx("button",{className:o==="tree"?"active":"",onClick:()=>a("tree"),title:"Tree view",children:""}),m&&u.jsx("button",{className:o==="table"?"active":"",onClick:()=>a("table"),title:"Table view",children:""}),u.jsx("button",{className:o==="raw"?"active":"",onClick:()=>a("raw"),title:"Raw JSON"})]}),u.jsx("button",{className:"copy-all-btn",onClick:f,title:"Copy all",children:" Copy"})]})]}),u.jsx("div",{className:"data-viewer-content",children:e==null?u.jsx("div",{className:"data-empty",children:"No data available"}):o==="tree"?u.jsx(Qh,{value:h,depth:0}):o==="table"&&m?u.jsx(c4,{data:e}):u.jsx("pre",{className:"data-raw",children:JSON.stringify(e,null,2)})})]})}const ph=T.memo(u4);function d4(){const e=T.useRef(null),[t]=T.useState(null),[i,o]=T.useState(new Set),[a,l]=T.useState(new Set),[c,f]=T.useState("logs"),[h,p]=T.useState(320),[m,g]=T.useState(!1),v=T.useRef({startX:0,startWidth:320}),b=Xe(M=>M.logs),w=Xe(M=>M.artifacts),S=Xe(M=>M.isRunning),j=Xe(M=>M.currentNodeId),N=Xe(M=>M.getExecutionDuration),k=Xe(M=>M.clearLogs);T.useEffect(()=>{c==="logs"&&e.current?.scrollIntoView({behavior:"smooth"})},[b,c]);const C=b.find(M=>M.id===t),_=b.filter(M=>M.data&&M.type!=="artifact"),H=M=>new Date(M).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3}),A=M=>{switch(M){case"info":return"";case"success":return"";case"error":return"";case"warning":return"";case"ai":return"";case"node":return"";case"artifact":return"";default:return""}},$=M=>M<1e3?`${M}ms`:`${(M/1e3).toFixed(2)}s`,V=M=>{o(P=>{const O=new Set(P);return O.has(M)?O.delete(M):O.add(M),O})},G=T.useCallback(M=>{l(P=>{const O=new Set(P);return O.has(M)?O.delete(M):O.add(M),O})},[]),z=T.useCallback(M=>{const P=M.data;let O;P instanceof Blob?O=P:typeof P=="string"?O=new Blob([P],{type:M.type||"text/plain"}):O=new Blob([JSON.stringify(P,null,2)],{type:"application/json"});const q=URL.createObjectURL(O),Y=document.createElement("a");Y.href=q,Y.download=M.name||`artifact_${M.id}.txt`,document.body.appendChild(Y),Y.click(),document.body.removeChild(Y),URL.revokeObjectURL(q)},[]),L=T.useCallback(M=>M?M.includes("audio")?"":M.includes("image")?"":M.includes("json")?"":M.includes("text")?"":"":"",[]),U=async()=>{const M=b.map(P=>{const O=H(P.timestamp),q=P.nodeName||P.nodeId||"",Y=P.data?`
  Data: ${JSON.stringify(P.data,null,2)}`:"";return`[${O}] ${q?`[${q}] `:""}${P.message}${Y}`}).join(`
`);try{await navigator.clipboard.writeText(M),alert("Logs copied to clipboard!")}catch(P){console.error("Failed to copy logs:",P)}},Z=M=>{M.preventDefault(),g(!0),v.current={startX:M.clientX,startWidth:h}};return T.useEffect(()=>{if(!m)return;const M=O=>{const q=v.current.startX-O.clientX,Y=Math.max(240,Math.min(600,v.current.startWidth+q));p(Y)},P=()=>{g(!1)};return document.addEventListener("mousemove",M),document.addEventListener("mouseup",P),()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",P)}},[m]),u.jsxs("aside",{className:`execution-panel ${m?"resizing":""}`,style:{width:`${h}px`},children:[u.jsx("div",{className:"ep-resize-handle",onMouseDown:Z,title:"Drag to resize"}),u.jsxs("header",{className:"panel-header",children:[u.jsxs("div",{className:"panel-tabs",children:[u.jsxs("button",{className:`tab-btn ${c==="logs"?"active":""}`,onClick:()=>f("logs"),children:[" Logs",b.length>0&&u.jsx("span",{className:"tab-badge",children:b.length})]}),u.jsxs("button",{className:`tab-btn ${c==="output"?"active":""}`,onClick:()=>f("output"),children:[" Output",_.length>0&&u.jsx("span",{className:"tab-badge",children:_.length})]}),u.jsxs("button",{className:`tab-btn ${c==="artifacts"?"active":""}`,onClick:()=>f("artifacts"),children:[" Artifacts",w.length>0&&u.jsx("span",{className:"tab-badge",children:w.length})]})]}),u.jsxs("div",{className:"panel-actions",children:[S&&u.jsxs("span",{className:"running-indicator",children:[u.jsx("span",{className:"pulse-dot"}),"Running..."]}),u.jsx("button",{className:"btn-icon",onClick:U,title:"Copy all logs",disabled:b.length===0,children:""}),u.jsx("button",{className:"btn-icon",onClick:k,title:"Clear logs",disabled:b.length===0,children:""})]})]}),u.jsxs("div",{className:"panel-content",children:[c==="logs"&&u.jsx(u.Fragment,{children:b.length===0?u.jsxs("div",{className:"empty-logs",children:[u.jsx("p",{children:"No logs yet"}),u.jsx("p",{className:"hint",children:"Run a workflow to see execution logs"})]}):u.jsxs("div",{className:"logs-list",children:[b.map(M=>u.jsxs("div",{className:`log-entry log-${M.type||"info"} ${t===M.id?"selected":""} ${M.data?"has-data":""} ${i.has(M.id)?"expanded":""}`,children:[u.jsxs("div",{className:"log-main",onClick:()=>V(M.id),children:[u.jsx("span",{className:"log-icon",children:A(M.type)}),u.jsx("span",{className:"log-time",children:H(M.timestamp)}),u.jsxs("div",{className:"log-content",children:[M.nodeId&&u.jsxs("span",{className:"log-node",children:["[",M.nodeName||M.nodeId,"]"]}),u.jsx("span",{className:`log-message ${i.has(M.id)?"expanded":""}`,children:M.message}),(M.data||M.message.length>60)&&u.jsx("span",{className:"log-expand-indicator",title:"Click to expand",children:i.has(M.id)?"":""})]})]}),i.has(M.id)&&M.data&&u.jsx("div",{className:"log-data-expanded",children:u.jsx(ph,{data:M.data})})]},M.id)),u.jsx("div",{ref:e})]})}),c==="output"&&u.jsx(u.Fragment,{children:_.length===0?u.jsxs("div",{className:"empty-logs",children:[u.jsx("p",{children:"No output data yet"}),u.jsx("p",{className:"hint",children:"Node outputs will appear here"})]}):u.jsx("div",{className:"outputs-list",children:_.map(M=>u.jsxs("div",{className:"output-item",children:[u.jsxs("div",{className:"output-header",children:[u.jsxs("span",{className:"output-node",children:[A(M.type)," ",M.nodeName||M.nodeId]}),u.jsx("span",{className:"output-time",children:H(M.timestamp)})]}),u.jsx("div",{className:"output-data",children:u.jsx(ph,{data:M.data})})]},M.id))})}),c==="artifacts"&&u.jsx(u.Fragment,{children:w.length===0?u.jsxs("div",{className:"empty-logs",children:[u.jsx("p",{children:"No artifacts yet"}),u.jsx("p",{className:"hint",children:"Generated files and data will appear here"})]}):u.jsx("div",{className:"artifacts-list",children:w.map(M=>{const P=a.has(M.id),O=M.type?.includes("text")||M.type?.includes("json"),q=M.type?.includes("audio"),Y=typeof M.data=="string"?M.data.slice(0,500):JSON.stringify(M.data,null,2).slice(0,500);return u.jsxs("div",{className:`artifact-item ${P?"expanded":""}`,children:[u.jsxs("div",{className:"artifact-header",onClick:()=>G(M.id),children:[u.jsx("span",{className:"artifact-icon",children:L(M.type)}),u.jsxs("div",{className:"artifact-info",children:[u.jsx("span",{className:"artifact-name",children:M.name||"Artifact"}),u.jsxs("span",{className:"artifact-meta",children:[M.type?.split("/")[1]||"file"," "," ",new Date(M.timestamp).toLocaleTimeString()]})]}),u.jsx("span",{className:"artifact-expand-icon",children:P?"":""})]}),P&&u.jsxs("div",{className:"artifact-content",children:[O&&M.data&&u.jsxs("pre",{className:"artifact-preview",children:[Y,typeof M.data=="string"&&M.data.length>500&&u.jsx("span",{className:"preview-truncated",children:"... (truncated)"})]}),q&&M.data instanceof Blob&&u.jsx("audio",{className:"artifact-audio-player",controls:!0,src:URL.createObjectURL(M.data)}),u.jsx("button",{className:"artifact-download-btn",onClick:Q=>{Q.stopPropagation(),z(M)},children:" Download"})]})]},M.id)})})})]}),C?.data&&c==="logs"&&u.jsx("div",{className:"data-viewer-panel",children:u.jsx(ph,{data:C.data,title:`Output: ${C.nodeName||C.nodeId||"Data"}`})}),u.jsx("footer",{className:"panel-footer",children:u.jsxs("span",{className:"execution-stats",children:[S&&j&&u.jsxs("span",{children:["Current: ",u.jsx("strong",{children:j})]}),!S&&b.length>0&&u.jsxs("span",{children:["Total: ",$(N())]})]})})]})}const f4=T.memo(d4);function h4({value:e,onChange:t,placeholder:i,multiline:o=!1,previewContext:a={}}){const[l,c]=T.useState(!1),[f,h]=T.useState(""),[p,m]=T.useState(0),g=T.useRef(null),b=q2().filter(A=>A.name.toLowerCase().includes(f.toLowerCase())||A.description.toLowerCase().includes(f.toLowerCase())),w=T.useCallback((A,$)=>{const V=A.slice(0,$),G=V.lastIndexOf("{{"),z=V.lastIndexOf("}}");return G>z},[]),S=A=>{const $=A.target.value,V=A.target.selectionStart;if(m(V),t($),w($,V)){const G=$.slice(0,V),z=G.lastIndexOf("{{"),L=G.slice(z+2).trim();h(L),c(!0)}else c(!1)},j=A=>{const $=e.slice(0,p),V=e.slice(p),G=$.lastIndexOf("{{"),L=$.slice(0,G+2)+" "+A.name+" }}"+V;t(L),c(!1),setTimeout(()=>{g.current?.focus()},0)},N=A=>{A.key==="Escape"&&c(!1)},k=e&&e.includes("{{"),C=k?cs(e,{input:a}):null,_=!k||!C?.includes("{{ERROR:"),H=o?"textarea":"input";return u.jsxs("div",{className:"expression-input-wrapper",children:[u.jsxs("div",{className:`expression-input-container ${_?"":"error"}`,children:[u.jsx(H,{ref:g,type:o?void 0:"text",value:e||"",onChange:S,onKeyDown:N,onBlur:()=>setTimeout(()=>c(!1),200),placeholder:i,className:`expression-input ${k?"has-expression":""}`}),k&&u.jsx("span",{className:"expression-badge",title:"Contains expressions",children:"{{ }}"})]}),l&&b.length>0&&u.jsx("div",{className:"expression-autocomplete",children:b.slice(0,10).map(A=>u.jsxs("button",{className:"autocomplete-option",onMouseDown:()=>j(A),children:[u.jsx("span",{className:"option-name",children:A.name}),u.jsx("span",{className:"option-desc",children:A.description}),u.jsx("code",{className:"option-example",children:A.example})]},A.name))}),k&&C&&u.jsxs("div",{className:`expression-preview ${_?"":"error"}`,children:[u.jsx("span",{className:"preview-label",children:"Preview:"}),u.jsx("span",{className:"preview-value",children:C.length>100?C.slice(0,100)+"...":C})]})]})}const p4=T.memo(h4),m4=["GET","POST","PUT","PATCH","DELETE","HEAD","OPTIONS"];function g4({data:e,onUpdate:t}){return u.jsxs("div",{className:"http-request-config",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Request"}),u.jsxs("div",{className:"config-row",children:[u.jsxs("div",{className:"config-field",style:{flex:"0 0 100px"},children:[u.jsx("label",{children:"Method"}),u.jsx("select",{value:e.method||"GET",onChange:i=>t({method:i.target.value}),children:m4.map(i=>u.jsx("option",{value:i,children:i},i))})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"URL"}),u.jsx(p4,{value:e.url||"",onChange:i=>t({url:i}),placeholder:"https://api.example.com/{{ $json.endpoint }}"}),u.jsxs("p",{className:"hint",children:["Use ","{{ expression }}"," for dynamic values"]})]})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Headers"}),u.jsxs("div",{className:"config-field",children:[u.jsx("textarea",{value:typeof e.headers=="object"?JSON.stringify(e.headers,null,2):e.headers||"",onChange:i=>{try{const o=JSON.parse(i.target.value);t({headers:o})}catch{t({headers:i.target.value})}},placeholder:'{"Content-Type": "application/json"}',style:{minHeight:"80px"}}),u.jsx("p",{className:"hint",children:"JSON object with header key-value pairs"})]})]}),e.method!=="GET"&&e.method!=="HEAD"&&u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Body"}),u.jsxs("div",{className:"config-field",children:[u.jsx("textarea",{value:typeof e.body=="object"?JSON.stringify(e.body,null,2):e.body||"",onChange:i=>t({body:i.target.value}),placeholder:'{"key": "value"}',style:{minHeight:"100px"}}),u.jsxs("p",{className:"hint",children:["Request body (JSON or text). Use ","{{field}}"," for templating."]})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Options & Error Handling"}),u.jsxs("div",{className:"config-row",children:[u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Timeout (ms)"}),u.jsx("input",{type:"number",value:e.timeout||3e4,onChange:i=>t({timeout:parseInt(i.target.value,10)}),min:1e3,max:3e5})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Retry Count"}),u.jsx("input",{type:"number",value:e.retries||0,onChange:i=>t({retries:parseInt(i.target.value,10)}),min:0,max:10}),u.jsx("p",{className:"hint",children:"0 = no retries"})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Retry Delay (ms)"}),u.jsx("input",{type:"number",value:e.retryDelay||1e3,onChange:i=>t({retryDelay:parseInt(i.target.value,10)}),min:100,max:3e4,disabled:!e.retries||e.retries===0}),u.jsx("p",{className:"hint",children:"Uses exponential backoff"})]})]})]})]})}const y4=T.memo(g4);function Ob(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,o=Array(t);i<t;i++)o[i]=e[i];return o}function x4(e){if(Array.isArray(e))return e}function v4(e,t,i){return(t=C4(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function b4(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var o,a,l,c,f=[],h=!0,p=!1;try{if(l=(i=i.call(e)).next,t!==0)for(;!(h=(o=l.call(i)).done)&&(f.push(o.value),f.length!==t);h=!0);}catch(m){p=!0,a=m}finally{try{if(!h&&i.return!=null&&(c=i.return(),Object(c)!==c))return}finally{if(p)throw a}}return f}}function w4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rb(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),i.push.apply(i,o)}return i}function Ib(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Rb(Object(i),!0).forEach(function(o){v4(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Rb(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function S4(e,t){if(e==null)return{};var i,o,a=N4(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)i=l[o],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(a[i]=e[i])}return a}function N4(e,t){if(e==null)return{};var i={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;i[o]=e[o]}return i}function E4(e,t){return x4(e)||b4(e,t)||k4(e,t)||w4()}function j4(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function C4(e){var t=j4(e,"string");return typeof t=="symbol"?t:t+""}function k4(e,t){if(e){if(typeof e=="string")return Ob(e,t);var i={}.toString.call(e).slice(8,-1);return i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set"?Array.from(e):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Ob(e,t):void 0}}function T4(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Lb(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),i.push.apply(i,o)}return i}function zb(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Lb(Object(i),!0).forEach(function(o){T4(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Lb(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function A4(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(o){return t.reduceRight(function(a,l){return l(a)},o)}}function as(e){return function t(){for(var i=this,o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return a.length>=e.length?e.apply(this,a):function(){for(var c=arguments.length,f=new Array(c),h=0;h<c;h++)f[h]=arguments[h];return t.apply(i,[].concat(a,f))}}}function Qc(e){return{}.toString.call(e).includes("Object")}function M4(e){return!Object.keys(e).length}function js(e){return typeof e=="function"}function D4(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function _4(e,t){return Qc(t)||lr("changeType"),Object.keys(t).some(function(i){return!D4(e,i)})&&lr("changeField"),t}function O4(e){js(e)||lr("selectorType")}function R4(e){js(e)||Qc(e)||lr("handlerType"),Qc(e)&&Object.values(e).some(function(t){return!js(t)})&&lr("handlersType")}function I4(e){e||lr("initialIsRequired"),Qc(e)||lr("initialType"),M4(e)&&lr("initialContent")}function L4(e,t){throw new Error(e[t]||e.default)}var z4={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},lr=as(L4)(z4),Nc={changes:_4,selector:O4,handler:R4,initial:I4};function B4(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Nc.initial(e),Nc.handler(t);var i={current:e},o=as(P4)(i,t),a=as(H4)(i),l=as(Nc.changes)(e),c=as($4)(i);function f(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(m){return m};return Nc.selector(p),p(i.current)}function h(p){A4(o,a,l,c)(p)}return[f,h]}function $4(e,t){return js(t)?t(e.current):t}function H4(e,t){return e.current=zb(zb({},e.current),t),t}function P4(e,t,i){return js(t)?t(e.current):Object.keys(i).forEach(function(o){var a;return(a=t[o])===null||a===void 0?void 0:a.call(t,e.current[o])}),i}var q4={create:B4},U4={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function V4(e){return function t(){for(var i=this,o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return a.length>=e.length?e.apply(this,a):function(){for(var c=arguments.length,f=new Array(c),h=0;h<c;h++)f[h]=arguments[h];return t.apply(i,[].concat(a,f))}}}function F4(e){return{}.toString.call(e).includes("Object")}function G4(e){return e||Bb("configIsRequired"),F4(e)||Bb("configType"),e.urls?(Y4(),{paths:{vs:e.urls.monacoBase}}):e}function Y4(){console.warn(B1.deprecation)}function X4(e,t){throw new Error(e[t]||e.default)}var B1={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},Bb=V4(X4)(B1),Q4={config:G4},W4=function(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return function(a){return i.reduceRight(function(l,c){return c(l)},a)}};function $1(e,t){return Object.keys(t).forEach(function(i){t[i]instanceof Object&&e[i]&&Object.assign(t[i],$1(e[i],t[i]))}),Ib(Ib({},e),t)}var Z4={type:"cancelation",msg:"operation is manually canceled"};function mh(e){var t=!1,i=new Promise(function(o,a){e.then(function(l){return t?a(Z4):o(l)}),e.catch(a)});return i.cancel=function(){return t=!0},i}var J4=["monaco"],K4=q4.create({config:U4,isInitialized:!1,resolve:null,reject:null,monaco:null}),H1=E4(K4,2),zs=H1[0],gu=H1[1];function e5(e){var t=Q4.config(e),i=t.monaco,o=S4(t,J4);gu(function(a){return{config:$1(a.config,o),monaco:i}})}function t5(){var e=zs(function(t){var i=t.monaco,o=t.isInitialized,a=t.resolve;return{monaco:i,isInitialized:o,resolve:a}});if(!e.isInitialized){if(gu({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),mh(gh);if(window.monaco&&window.monaco.editor)return P1(window.monaco),e.resolve(window.monaco),mh(gh);W4(n5,r5)(o5)}return mh(gh)}function n5(e){return document.body.appendChild(e)}function i5(e){var t=document.createElement("script");return e&&(t.src=e),t}function r5(e){var t=zs(function(o){var a=o.config,l=o.reject;return{config:a,reject:l}}),i=i5("".concat(t.config.paths.vs,"/loader.js"));return i.onload=function(){return e()},i.onerror=t.reject,i}function o5(){var e=zs(function(i){var o=i.config,a=i.resolve,l=i.reject;return{config:o,resolve:a,reject:l}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(i){var o=i.m||i;P1(o),e.resolve(o)},function(i){e.reject(i)})}function P1(e){zs().monaco||gu({monaco:e})}function a5(){return zs(function(e){var t=e.monaco;return t})}var gh=new Promise(function(e,t){return gu({resolve:e,reject:t})}),q1={config:e5,init:t5,__getMonacoInstance:a5},s5={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},yh=s5,l5={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},c5=l5;function u5({children:e}){return Nn.createElement("div",{style:c5.container},e)}var d5=u5,f5=d5;function h5({width:e,height:t,isEditorReady:i,loading:o,_ref:a,className:l,wrapperProps:c}){return Nn.createElement("section",{style:{...yh.wrapper,width:e,height:t},...c},!i&&Nn.createElement(f5,null,o),Nn.createElement("div",{ref:a,style:{...yh.fullWidth,...!i&&yh.hide},className:l}))}var p5=h5,U1=T.memo(p5);function m5(e){T.useEffect(e,[])}var V1=m5;function g5(e,t,i=!0){let o=T.useRef(!0);T.useEffect(o.current||!i?()=>{o.current=!1}:e,t)}var un=g5;function hs(){}function Bo(e,t,i,o){return y5(e,o)||x5(e,t,i,o)}function y5(e,t){return e.editor.getModel(F1(e,t))}function x5(e,t,i,o){return e.editor.createModel(t,i,o?F1(e,o):void 0)}function F1(e,t){return e.Uri.parse(t)}function v5({original:e,modified:t,language:i,originalLanguage:o,modifiedLanguage:a,originalModelPath:l,modifiedModelPath:c,keepCurrentOriginalModel:f=!1,keepCurrentModifiedModel:h=!1,theme:p="light",loading:m="Loading...",options:g={},height:v="100%",width:b="100%",className:w,wrapperProps:S={},beforeMount:j=hs,onMount:N=hs}){let[k,C]=T.useState(!1),[_,H]=T.useState(!0),A=T.useRef(null),$=T.useRef(null),V=T.useRef(null),G=T.useRef(N),z=T.useRef(j),L=T.useRef(!1);V1(()=>{let P=q1.init();return P.then(O=>($.current=O)&&H(!1)).catch(O=>O?.type!=="cancelation"&&console.error("Monaco initialization: error:",O)),()=>A.current?M():P.cancel()}),un(()=>{if(A.current&&$.current){let P=A.current.getOriginalEditor(),O=Bo($.current,e||"",o||i||"text",l||"");O!==P.getModel()&&P.setModel(O)}},[l],k),un(()=>{if(A.current&&$.current){let P=A.current.getModifiedEditor(),O=Bo($.current,t||"",a||i||"text",c||"");O!==P.getModel()&&P.setModel(O)}},[c],k),un(()=>{let P=A.current.getModifiedEditor();P.getOption($.current.editor.EditorOption.readOnly)?P.setValue(t||""):t!==P.getValue()&&(P.executeEdits("",[{range:P.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),P.pushUndoStop())},[t],k),un(()=>{A.current?.getModel()?.original.setValue(e||"")},[e],k),un(()=>{let{original:P,modified:O}=A.current.getModel();$.current.editor.setModelLanguage(P,o||i||"text"),$.current.editor.setModelLanguage(O,a||i||"text")},[i,o,a],k),un(()=>{$.current?.editor.setTheme(p)},[p],k),un(()=>{A.current?.updateOptions(g)},[g],k);let U=T.useCallback(()=>{if(!$.current)return;z.current($.current);let P=Bo($.current,e||"",o||i||"text",l||""),O=Bo($.current,t||"",a||i||"text",c||"");A.current?.setModel({original:P,modified:O})},[i,t,a,e,o,l,c]),Z=T.useCallback(()=>{!L.current&&V.current&&(A.current=$.current.editor.createDiffEditor(V.current,{automaticLayout:!0,...g}),U(),$.current?.editor.setTheme(p),C(!0),L.current=!0)},[g,p,U]);T.useEffect(()=>{k&&G.current(A.current,$.current)},[k]),T.useEffect(()=>{!_&&!k&&Z()},[_,k,Z]);function M(){let P=A.current?.getModel();f||P?.original?.dispose(),h||P?.modified?.dispose(),A.current?.dispose()}return Nn.createElement(U1,{width:b,height:v,isEditorReady:k,loading:m,_ref:V,className:w,wrapperProps:S})}var b5=v5;T.memo(b5);function w5(e){let t=T.useRef();return T.useEffect(()=>{t.current=e},[e]),t.current}var S5=w5,Ec=new Map;function N5({defaultValue:e,defaultLanguage:t,defaultPath:i,value:o,language:a,path:l,theme:c="light",line:f,loading:h="Loading...",options:p={},overrideServices:m={},saveViewState:g=!0,keepCurrentModel:v=!1,width:b="100%",height:w="100%",className:S,wrapperProps:j={},beforeMount:N=hs,onMount:k=hs,onChange:C,onValidate:_=hs}){let[H,A]=T.useState(!1),[$,V]=T.useState(!0),G=T.useRef(null),z=T.useRef(null),L=T.useRef(null),U=T.useRef(k),Z=T.useRef(N),M=T.useRef(),P=T.useRef(o),O=S5(l),q=T.useRef(!1),Y=T.useRef(!1);V1(()=>{let B=q1.init();return B.then(F=>(G.current=F)&&V(!1)).catch(F=>F?.type!=="cancelation"&&console.error("Monaco initialization: error:",F)),()=>z.current?D():B.cancel()}),un(()=>{let B=Bo(G.current,e||o||"",t||a||"",l||i||"");B!==z.current?.getModel()&&(g&&Ec.set(O,z.current?.saveViewState()),z.current?.setModel(B),g&&z.current?.restoreViewState(Ec.get(l)))},[l],H),un(()=>{z.current?.updateOptions(p)},[p],H),un(()=>{!z.current||o===void 0||(z.current.getOption(G.current.editor.EditorOption.readOnly)?z.current.setValue(o):o!==z.current.getValue()&&(Y.current=!0,z.current.executeEdits("",[{range:z.current.getModel().getFullModelRange(),text:o,forceMoveMarkers:!0}]),z.current.pushUndoStop(),Y.current=!1))},[o],H),un(()=>{let B=z.current?.getModel();B&&a&&G.current?.editor.setModelLanguage(B,a)},[a],H),un(()=>{f!==void 0&&z.current?.revealLine(f)},[f],H),un(()=>{G.current?.editor.setTheme(c)},[c],H);let Q=T.useCallback(()=>{if(!(!L.current||!G.current)&&!q.current){Z.current(G.current);let B=l||i,F=Bo(G.current,o||e||"",t||a||"",B||"");z.current=G.current?.editor.create(L.current,{model:F,automaticLayout:!0,...p},m),g&&z.current.restoreViewState(Ec.get(B)),G.current.editor.setTheme(c),f!==void 0&&z.current.revealLine(f),A(!0),q.current=!0}},[e,t,i,o,a,l,p,m,g,c,f]);T.useEffect(()=>{H&&U.current(z.current,G.current)},[H]),T.useEffect(()=>{!$&&!H&&Q()},[$,H,Q]),P.current=o,T.useEffect(()=>{H&&C&&(M.current?.dispose(),M.current=z.current?.onDidChangeModelContent(B=>{Y.current||C(z.current.getValue(),B)}))},[H,C]),T.useEffect(()=>{if(H){let B=G.current.editor.onDidChangeMarkers(F=>{let I=z.current.getModel()?.uri;if(I&&F.find(ie=>ie.path===I.path)){let ie=G.current.editor.getModelMarkers({resource:I});_?.(ie)}});return()=>{B?.dispose()}}return()=>{}},[H,_]);function D(){M.current?.dispose(),v?g&&Ec.set(l,z.current.saveViewState()):z.current.getModel()?.dispose(),z.current.dispose()}return Nn.createElement(U1,{width:b,height:w,isEditorReady:H,loading:h,_ref:L,className:S,wrapperProps:j})}var E5=N5,j5=T.memo(E5),G1=j5;const xh=new Map,ns=new Map;async function C5(e,t=null){if(xh.has(e))return xh.get(e);if(ns.has(e))return ns.get(e);const i=new Promise((o,a)=>{if(!k5(e)){a(new Error(`Invalid CDN URL: ${e}`));return}const l=document.createElement("script");l.src=e,l.async=!0,l.onload=()=>{const c=t?window[t]:!0;xh.set(e,c),ns.delete(e),o(c)},l.onerror=()=>{ns.delete(e),a(new Error(`Failed to load library from: ${e}`))},document.head.appendChild(l)});return ns.set(e,i),i}function k5(e){try{const t=new URL(e);return t.protocol!=="https:"?!1:["unpkg.com","cdn.jsdelivr.net","cdnjs.cloudflare.com","esm.sh","esm.run","cdn.skypack.dev","cdn.pika.dev","ga.jspm.io"].some(o=>t.hostname===o||t.hostname.endsWith(`.${o}`))}catch{return!1}}const Wh=[{name:"Lodash",url:"https://cdn.jsdelivr.net/npm/lodash@4/lodash.min.js",globalName:"_"},{name:"Axios",url:"https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js",globalName:"axios"},{name:"Day.js",url:"https://cdn.jsdelivr.net/npm/dayjs@1/dayjs.min.js",globalName:"dayjs"},{name:"UUID",url:"https://cdn.jsdelivr.net/npm/uuid@8/dist/umd/uuid.min.js",globalName:"uuid"},{name:"Marked (Markdown)",url:"https://cdn.jsdelivr.net/npm/marked/marked.min.js",globalName:"marked"}],T5=Object.freeze(Object.defineProperty({__proto__:null,CDN_EXAMPLES:Wh,loadFromCDN:C5},Symbol.toStringTag,{value:"Module"}));function A5({data:e,onUpdate:t}){const[i,o]=T.useState(!1),a=T.useCallback(p=>{t({code:p||""})},[t]),l=T.useCallback(p=>{const m=e.cdnUrls||[];m.includes(p)||t({cdnUrls:[...m,p]}),o(!1)},[e.cdnUrls,t]),c=T.useCallback(p=>{const m=e.cdnUrls||[];t({cdnUrls:m.filter(g=>g!==p)})},[e.cdnUrls,t]),f="// Access input data via `input`\n// Return output data\nreturn input;",h=e.cdnUrls||[];return u.jsxs("div",{className:"code-executor-config",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"JavaScript Code"}),u.jsx("div",{className:"config-field monaco-container",children:u.jsx(G1,{height:"200px",language:"javascript",theme:"vs-dark",value:e.code||f,onChange:a,options:{minimap:{enabled:!1},fontSize:12,lineNumbers:"on",scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:2,wordWrap:"on",padding:{top:8,bottom:8},renderLineHighlight:"gutter",scrollbar:{verticalScrollbarSize:8,horizontalScrollbarSize:8}}})}),u.jsx("div",{className:"code-help",children:u.jsxs("p",{className:"hint",children:[u.jsx("strong",{children:"Available:"})," ",u.jsx("code",{children:"input"}),", ",u.jsx("code",{children:"context"})]})})]}),u.jsxs("div",{className:"config-section",children:[u.jsxs("div",{className:"config-section-title",children:[" CDN Libraries",u.jsx("button",{className:"add-cdn-btn",onClick:()=>o(!i),title:"Add library",children:"+"})]}),i&&u.jsxs("div",{className:"cdn-picker",children:[Wh.map(p=>u.jsxs("button",{className:"cdn-option",onClick:()=>l(p.url),children:[u.jsx("strong",{children:p.name}),u.jsxs("span",{className:"cdn-global",children:["window.",p.globalName]})]},p.name)),u.jsx("div",{className:"cdn-custom",children:u.jsx("input",{type:"text",placeholder:"https://cdn.jsdelivr.net/npm/...",onKeyDown:p=>{p.key==="Enter"&&p.target.value.trim()&&(l(p.target.value.trim()),p.target.value="")}})})]}),h.length>0?u.jsx("div",{className:"cdn-list",children:h.map(p=>{const m=Wh.find(g=>g.url===p);return u.jsxs("div",{className:"cdn-item",children:[u.jsx("span",{className:"cdn-name",children:m?.name||p.split("/").pop()}),u.jsx("button",{className:"cdn-remove",onClick:()=>c(p),children:""})]},p)})}):u.jsx("p",{className:"hint",style:{marginTop:"8px"},children:"No libraries loaded. Click + to add."})]})]})}const M5=T.memo(A5),D5=[{value:"set",label:"Set (replace)"},{value:"append",label:"Append (to array)"},{value:"merge",label:"Merge (objects)"}];function _5({data:e,onUpdate:t}){return u.jsxs("div",{className:"set-variable-config",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Variable"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Variable Name"}),u.jsx("input",{type:"text",value:e.variableName||"",onChange:i=>t({variableName:i.target.value}),placeholder:"data"}),u.jsx("p",{className:"hint",children:"The key to set on the output object"})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Mode"}),u.jsx("select",{value:e.mode||"set",onChange:i=>t({mode:i.target.value}),children:D5.map(i=>u.jsx("option",{value:i.value,children:i.label},i.value))})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Value"}),u.jsxs("div",{className:"config-field",children:[u.jsx("textarea",{value:e.value||"",onChange:i=>t({value:i.target.value}),placeholder:"Value or expression",style:{minHeight:"80px"}}),u.jsxs("p",{className:"hint",children:["Use ","{{field.path}}"," to reference input data. Leave empty to use entire input."]})]})]})]})}const O5=T.memo(_5),R5=[{value:"equals",label:"Equals (==)"},{value:"notEquals",label:"Not Equals (!=)"},{value:"contains",label:"Contains"},{value:"greaterThan",label:"Greater Than (>)"},{value:"lessThan",label:"Less Than (<)"},{value:"isEmpty",label:"Is Empty"},{value:"isNotEmpty",label:"Is Not Empty"},{value:"isTrue",label:"Is Truthy"},{value:"isFalse",label:"Is Falsy"}];function I5({data:e,onUpdate:t}){const i=!["isEmpty","isNotEmpty","isTrue","isFalse"].includes(e.operator);return u.jsxs("div",{className:"if-else-config",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Condition"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Field Path"}),u.jsx("input",{type:"text",value:e.condition||"",onChange:o=>t({condition:o.target.value}),placeholder:"data.status"}),u.jsx("p",{className:"hint",children:"Path to the field to check (e.g., response.status)"})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Operator"}),u.jsx("select",{value:e.operator||"equals",onChange:o=>t({operator:o.target.value}),children:R5.map(o=>u.jsx("option",{value:o.value,children:o.label},o.value))})]}),i&&u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Compare Value"}),u.jsx("input",{type:"text",value:e.compareValue||"",onChange:o=>t({compareValue:o.target.value}),placeholder:"value to compare"})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Outputs"}),u.jsxs("div",{className:"output-info",children:[u.jsxs("div",{className:"output-row",children:[u.jsx("span",{className:"output-badge true",children:"Output 1"}),u.jsx("span",{children:"Condition is TRUE"})]}),u.jsxs("div",{className:"output-row",children:[u.jsx("span",{className:"output-badge false",children:"Output 2"}),u.jsx("span",{children:"Condition is FALSE"})]})]})]})]})}const L5=T.memo(I5);function z5({data:e,onUpdate:t}){return u.jsxs("div",{className:"loop-config",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Loop Settings"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Iterations (repeat count)"}),u.jsx("input",{type:"number",value:e.iterations||1,onChange:i=>t({iterations:parseInt(i.target.value,10)||1}),min:1,max:1e3}),u.jsx("p",{className:"hint",children:"How many times the loop will repeat the workflow"})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Items Path (optional)"}),u.jsx("input",{type:"text",value:e.itemsPath||"",onChange:i=>t({itemsPath:i.target.value}),placeholder:"items"}),u.jsx("p",{className:"hint",children:"Path to array in input data for item-based looping"})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Max Items"}),u.jsx("input",{type:"number",value:e.maxIterations||100,onChange:i=>t({maxIterations:parseInt(i.target.value,10)}),min:1,max:1e4}),u.jsx("p",{className:"hint",children:"Maximum array items to process per iteration"})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Outputs"}),u.jsxs("div",{className:"output-info",children:[u.jsxs("div",{className:"output-row",children:[u.jsx("span",{className:"output-badge loop",children:"loop "}),u.jsx("span",{children:"Connect back to repeat the workflow"})]}),u.jsxs("div",{className:"output-row",children:[u.jsx("span",{className:"output-badge done",children:"done "}),u.jsx("span",{children:"Fires when all iterations complete"})]})]})]})]})}const B5=T.memo(z5);function $5({data:e,onUpdate:t}){const i=T.useMemo(()=>e.routes||[],[e.routes]),o=T.useCallback(()=>{const c=[...i,{value:"",outputIndex:i.length}];t({routes:c})},[i,t]),a=T.useCallback((c,f,h)=>{const p=i.map((m,g)=>g===c?{...m,[f]:h}:m);t({routes:p})},[i,t]),l=T.useCallback(c=>{const f=i.filter((h,p)=>p!==c);t({routes:f})},[i,t]);return u.jsxs("div",{className:"switch-config",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Switch Field"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Field Path"}),u.jsx("input",{type:"text",value:e.field||"",onChange:c=>t({field:c.target.value}),placeholder:"status"}),u.jsx("p",{className:"hint",children:"Path to the field to switch on"})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Routes"}),i.map((c,f)=>u.jsxs("div",{className:"route-row",children:[u.jsx("input",{type:"text",value:c.value,onChange:h=>a(f,"value",h.target.value),placeholder:`Value for output ${f+1}`,className:"route-value"}),u.jsxs("span",{className:"route-output",children:[" Output ",c.outputIndex+1]}),u.jsx("button",{className:"btn-icon btn-small",onClick:()=>l(f),title:"Remove route",children:""})]},f)),u.jsx("button",{className:"btn-add-route",onClick:o,children:"+ Add Route"}),u.jsx("p",{className:"hint",style:{marginTop:"8px",marginBottom:"8px"},children:"Routes map values to dynamic output handles"}),u.jsxs("div",{className:"config-field",style:{marginTop:"12px"},children:[u.jsx("label",{children:"Default Output"}),u.jsx("p",{className:"hint",children:'When no routes match, data flows to the "default" output handle'})]})]})]})}const H5=T.memo($5),P5=[{value:"* * * * *",label:"Every minute"},{value:"*/5 * * * *",label:"Every 5 minutes"},{value:"*/15 * * * *",label:"Every 15 minutes"},{value:"0 * * * *",label:"Every hour"},{value:"0 0 * * *",label:"Every day at midnight"},{value:"0 9 * * 1-5",label:"Weekdays at 9 AM"},{value:"0 0 * * 0",label:"Every Sunday at midnight"}];function q5({data:e,onUpdate:t}){return u.jsxs("div",{className:"schedule-trigger-config",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Schedule"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Cron Expression"}),u.jsx("input",{type:"text",value:e.schedule||"*/5 * * * *",onChange:i=>t({schedule:i.target.value}),placeholder:"*/5 * * * *"}),u.jsx("p",{className:"hint",children:"Format: minute hour day month weekday"})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Quick Presets"}),u.jsxs("select",{value:"",onChange:i=>{i.target.value&&t({schedule:i.target.value})},children:[u.jsx("option",{value:"",children:"Select a preset..."}),P5.map(i=>u.jsx("option",{value:i.value,children:i.label},i.value))]})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Status"}),u.jsxs("div",{className:"config-toggle",children:[u.jsx("label",{children:"Enable Schedule"}),u.jsx("div",{className:`toggle-switch ${e.enabled?"active":""}`,onClick:()=>t({enabled:!e.enabled})})]}),u.jsx("p",{className:"hint",style:{marginTop:"8px"},children:"Note: Browser schedules use setInterval simulation. For production, use a proper scheduler."})]})]})}const U5=T.memo(q5),V5={recommended:" Recommended",qwen:" Qwen Models",medium:" Medium Models",tiny:" Tiny Models"};function F5({data:e,onUpdate:t}){const i=Ge(h=>h.availableModels),o=Ge(h=>h.downloadedModels),a=Ge(h=>h.status),l=Ge(h=>h.currentModelId),c=T.useMemo(()=>i.filter(h=>o.includes(h.id)),[i,o]),f=T.useMemo(()=>{const h={};for(const p of c){const m=p.category||"other";h[m]||(h[m]=[]),h[m].push(p)}return h},[c]);return u.jsxs("div",{className:"ai-agent-config",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Model"}),u.jsxs("div",{className:"config-field",children:[u.jsxs("label",{children:["AI Model ",c.length===0&&"(No models downloaded)"]}),c.length>0?u.jsx("select",{value:e.modelId||l||String(c[0]?.id),onChange:h=>t({modelId:h.target.value}),children:Object.entries(f).map(([h,p])=>u.jsx("optgroup",{label:V5[h]||h,children:p.map(m=>u.jsxs("option",{value:m.id,children:[m.name," (",m.size,")"]},m.id))},h))}):u.jsx("div",{className:"warning-box",style:{padding:"8px",background:"rgba(239, 68, 68, 0.1)",borderRadius:"4px",fontSize:"13px",color:"#fca5a5"},children:"Please download a model using the Model Switcher () in the AI Control Panel."}),u.jsxs("p",{className:"hint",children:["Status:"," ",u.jsx("span",{style:{color:a==="ready"?"var(--color-success)":"var(--color-warning)"},children:a==="ready"?" Ready":a==="loading"?" Loading...":" Not loaded"})]})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"System Prompt"}),u.jsxs("div",{className:"config-field",children:[u.jsx("textarea",{value:e.systemPrompt||"",onChange:h=>t({systemPrompt:h.target.value}),placeholder:"You are a helpful AI assistant...",style:{minHeight:"150px"}}),u.jsx("p",{className:"hint",children:"Define the agent's behavior and personality"})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Reasoning Mode"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Strategy"}),u.jsxs("select",{value:e.reasoningMode||"auto",onChange:h=>t({reasoningMode:h.target.value}),children:[u.jsx("option",{value:"auto",children:" Auto (Smart Selection)"}),u.jsx("option",{value:"cot",children:" Chain-of-Thought (Step-by-Step)"}),u.jsx("option",{value:"tot",children:" Tree-of-Thoughts (Branching)"}),u.jsx("option",{value:"react",children:" ReAct (Tool Calling)"})]}),u.jsx("p",{className:"hint",children:e.reasoningMode==="cot"?"Linear step-by-step reasoning with audit trail":e.reasoningMode==="tot"?"Explores multiple branches, picks the best path":e.reasoningMode==="react"?"Thought  Action  Observation loop with tools":"Automatically selects based on task complexity"})]}),e.reasoningMode==="tot"&&u.jsx("div",{className:"config-row",children:u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Branch Count"}),u.jsx("input",{type:"number",value:e.branchCount||3,onChange:h=>t({branchCount:parseInt(h.target.value,10)}),min:2,max:5}),u.jsx("p",{className:"hint",children:"Number of reasoning paths to explore"})]})}),u.jsxs("div",{className:"config-field",children:[u.jsxs("label",{className:"toggle-label",children:[u.jsx("input",{type:"checkbox",checked:e.enableSelfCorrection||!1,onChange:h=>t({enableSelfCorrection:h.target.checked})}),"Enable Self-Correction (Critic)"]}),u.jsx("p",{className:"hint",children:"Second-pass verification to detect and fix errors before output"})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Parameters"}),u.jsxs("div",{className:"config-row",children:[u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Temperature"}),u.jsx("input",{type:"number",value:e.temperature??.7,onChange:h=>t({temperature:parseFloat(h.target.value)}),min:0,max:2,step:.1}),u.jsx("p",{className:"hint",children:"0 = focused, 2 = creative"})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Max Tokens"}),u.jsx("input",{type:"number",value:e.maxTokens||2e3,onChange:h=>t({maxTokens:parseInt(h.target.value,10)}),min:100,max:8e3,step:100})]})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Tool Calling (ReAct)"}),u.jsxs("div",{className:"config-field",children:[u.jsxs("label",{className:"toggle-label",children:[u.jsx("input",{type:"checkbox",checked:e.enableToolCalling!==!1,onChange:h=>t({enableToolCalling:h.target.checked})}),"Enable Tool Calling"]}),u.jsx("p",{className:"hint",children:"When enabled, the agent can call connected nodes as tools during reasoning"})]}),e.enableToolCalling!==!1&&u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Max Iterations"}),u.jsx("input",{type:"number",value:e.maxIterations||10,onChange:h=>t({maxIterations:parseInt(h.target.value,10)}),min:1,max:20}),u.jsx("p",{className:"hint",children:"Maximum ReAct loop iterations (prevents infinite loops)"})]}),u.jsxs("div",{className:"tools-info",children:[u.jsx("h4",{style:{margin:"0 0 8px",fontSize:"13px"},children:"Connected Tools"}),e.tools&&e.tools.length>0?u.jsx("ul",{className:"tools-list",children:e.tools.map((h,p)=>u.jsxs("li",{children:[u.jsx("span",{className:"tool-icon",children:""}),u.jsx("span",{className:"tool-name",children:h.name||h.nodeId}),u.jsx("span",{className:"tool-type",children:h.type})]},p))}):u.jsx("p",{className:"hint",style:{fontStyle:"italic"},children:"No tools connected. Connect nodes to this agent to use them as tools."})]})]})]})}const G5=T.memo(F5),$b=[{value:"text",label:"Text",icon:""},{value:"number",label:"Number",icon:""},{value:"dropdown",label:"Dropdown",icon:""},{value:"toggle",label:"Toggle",icon:""},{value:"textarea",label:"Text Area",icon:""},{value:"json",label:"JSON",icon:"{ }"}];function Y5({data:e,onUpdate:t}){const[i,o]=T.useState(""),[a,l]=T.useState("text"),c=e.inputFields||[],f=e.inputValues||{},h=()=>{if(!i.trim())return;const S=`field_${crypto.randomUUID()}`,j={id:S,name:i.trim(),type:a,options:a==="dropdown"?["Option 1","Option 2"]:void 0,defaultValue:p(a)};t({inputFields:[...c,j],inputValues:{...f,[S]:j.defaultValue}}),o("")},p=S=>{switch(S){case"number":return 0;case"toggle":return!1;case"json":return"{}";default:return""}},m=S=>{const j={...f};delete j[S],t({inputFields:c.filter(N=>N.id!==S),inputValues:j})},g=(S,j)=>{t({inputValues:{...f,[S]:j}})},v=(S,j)=>{const N=j.split(",").map(k=>k.trim()).filter(Boolean);t({inputFields:c.map(k=>k.id===S?{...k,options:N}:k)})},b=(S,j)=>{const N=[...c],k=j==="up"?S-1:S+1;k<0||k>=c.length||([N[S],N[k]]=[N[k],N[S]],t({inputFields:N}))},w=S=>{const j=f[S.id]??S.defaultValue;switch(S.type){case"number":return u.jsx("input",{type:"number",value:j,onChange:N=>g(S.id,parseFloat(N.target.value)||0)});case"toggle":return u.jsxs("label",{className:"toggle-switch",children:[u.jsx("input",{type:"checkbox",checked:j,onChange:N=>g(S.id,N.target.checked)}),u.jsx("span",{className:"toggle-slider"}),u.jsx("span",{className:"toggle-label",children:j?"On":"Off"})]});case"dropdown":return u.jsxs("select",{value:j,onChange:N=>g(S.id,N.target.value),children:[u.jsx("option",{value:"",children:"Select..."}),(S.options||[]).map((N,k)=>u.jsx("option",{value:N,children:N},k))]});case"textarea":return u.jsx("textarea",{value:j,onChange:N=>g(S.id,N.target.value),rows:3});case"json":return u.jsx("textarea",{value:j,onChange:N=>g(S.id,N.target.value),className:"json-input",rows:4,placeholder:'{"key": "value"}'});default:return u.jsx("input",{type:"text",value:j,onChange:N=>g(S.id,N.target.value)})}};return u.jsxs("div",{className:"manual-trigger-config",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Trigger Settings"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Trigger Name"}),u.jsx("input",{type:"text",value:e.label||"Manual Trigger",onChange:S=>t({label:S.target.value}),placeholder:"Start Workflow"})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsxs("div",{className:"config-section-title",children:["Input Fields",u.jsx("span",{className:"field-count",children:c.length})]}),u.jsx("p",{className:"hint",children:"Define input fields that users will fill when running this workflow"}),u.jsxs("div",{className:"fields-list",children:[c.map((S,j)=>u.jsxs("div",{className:"field-item",children:[u.jsxs("div",{className:"field-header",children:[u.jsx("span",{className:"field-icon",children:$b.find(N=>N.value===S.type)?.icon||""}),u.jsx("span",{className:"field-name",children:S.name}),u.jsx("span",{className:"field-type",children:S.type}),u.jsxs("div",{className:"field-actions",children:[u.jsx("button",{className:"action-btn",onClick:()=>b(j,"up"),disabled:j===0,title:"Move up",children:""}),u.jsx("button",{className:"action-btn",onClick:()=>b(j,"down"),disabled:j===c.length-1,title:"Move down",children:""}),u.jsx("button",{className:"action-btn delete",onClick:()=>m(S.id),title:"Remove field",children:""})]})]}),u.jsx("div",{className:"field-input",children:w(S)}),S.type==="dropdown"&&u.jsxs("div",{className:"field-options",children:[u.jsx("label",{children:"Options (comma-separated)"}),u.jsx("input",{type:"text",value:(S.options||[]).join(", "),onChange:N=>v(S.id,N.target.value),placeholder:"Option 1, Option 2, Option 3"})]})]},S.id)),c.length===0&&u.jsxs("div",{className:"empty-fields",children:[u.jsx("p",{children:"No input fields defined"}),u.jsx("p",{className:"hint",children:"Add fields below to create a form"})]})]}),u.jsx("div",{className:"add-field-form",children:u.jsxs("div",{className:"add-field-row",children:[u.jsx("input",{type:"text",value:i,onChange:S=>o(S.target.value),placeholder:"Field name...",className:"field-name-input",onKeyDown:S=>S.key==="Enter"&&h()}),u.jsx("select",{value:a,onChange:S=>l(S.target.value),className:"field-type-select",children:$b.map(S=>u.jsxs("option",{value:S.value,children:[S.icon," ",S.label]},S.value))}),u.jsx("button",{className:"add-field-btn",onClick:h,disabled:!i.trim(),children:"+ Add"})]})})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Output Preview"}),u.jsx("div",{className:"output-preview",children:u.jsx("pre",{children:JSON.stringify(f,null,2)})}),u.jsx("p",{className:"hint",children:"This data will be passed to connected nodes"})]})]})}const X5=T.memo(Y5);function Q5({data:e,onUpdate:t}){return u.jsx("div",{className:"config-sections",children:u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Voice Settings"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Provider"}),u.jsxs("select",{value:e.provider||"webSpeech",onChange:i=>t({provider:i.target.value}),children:[u.jsx("option",{value:"webSpeech",children:"Web Speech API (Local)"}),u.jsx("option",{value:"elevenlabs",children:"ElevenLabs (API Key Required)"})]})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Voice"}),u.jsxs("select",{value:e.voice||"default",onChange:i=>t({voice:i.target.value}),children:[u.jsx("option",{value:"default",children:"Default"}),u.jsx("option",{value:"Microsoft David",children:"Microsoft David"}),u.jsx("option",{value:"Microsoft Zira",children:"Microsoft Zira"}),u.jsx("option",{value:"Google US English",children:"Google US English"})]}),u.jsx("p",{className:"hint",children:"Available voices depend on your browser"})]}),u.jsxs("div",{className:"config-row",children:[u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Speed"}),u.jsx("input",{type:"range",min:"0.5",max:"2",step:"0.1",value:e.speed||1,onChange:i=>t({speed:parseFloat(i.target.value)})}),u.jsxs("span",{className:"hint",children:[e.speed||1,"x"]})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Pitch"}),u.jsx("input",{type:"range",min:"0.5",max:"2",step:"0.1",value:e.pitch||1,onChange:i=>t({pitch:parseFloat(i.target.value)})}),u.jsx("span",{className:"hint",children:e.pitch||1})]})]}),u.jsxs("div",{className:"config-toggle",children:[u.jsx("label",{children:"Auto-play audio"}),u.jsx("div",{className:`toggle-switch ${e.autoPlay!==!1?"active":""}`,onClick:()=>t({autoPlay:e.autoPlay===!1})})]})]})})}const W5=T.memo(Q5);function Z5({data:e,onUpdate:t}){const i=T.useCallback(a=>{t({code:a||""})},[t]);return u.jsxs("div",{className:"config-sections",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Python Code"}),u.jsxs("div",{className:"config-field monaco-container",children:[u.jsx(G1,{height:"250px",language:"python",theme:"vs-dark",value:e.code||`# Access input via 'input' variable
# Set 'result' to output data
result = input`,onChange:i,options:{minimap:{enabled:!1},fontSize:12,lineNumbers:"on",scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:4,wordWrap:"on",padding:{top:8,bottom:8},renderLineHighlight:"gutter",scrollbar:{verticalScrollbarSize:8,horizontalScrollbarSize:8}}}),u.jsx("p",{className:"hint",children:"Use 'input' to access incoming data. Set 'result' for output."})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Required Packages"}),u.jsx("input",{type:"text",value:(e.packages||[]).join(", "),onChange:a=>t({packages:a.target.value.split(",").map(l=>l.trim()).filter(Boolean)}),placeholder:"numpy, pandas, matplotlib"}),u.jsx("p",{className:"hint",children:"Comma-separated list of pip packages"})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Timeout (ms)"}),u.jsx("input",{type:"number",value:e.timeout||3e4,onChange:a=>t({timeout:parseInt(a.target.value)}),min:1e3,max:3e5})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:" Tips"}),u.jsxs("ul",{className:"hint-list",children:[u.jsx("li",{children:"First run downloads Pyodide (~15MB)"}),u.jsx("li",{children:"Supports numpy, pandas, scipy, matplotlib"}),u.jsx("li",{children:"All execution happens locally"})]})]})]})}const J5=T.memo(Z5);function K5({data:e,onUpdate:t}){return u.jsx("div",{className:"config-sections",children:u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Memory Settings"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Mode"}),u.jsxs("select",{value:e.mode||"query",onChange:i=>t({mode:i.target.value}),children:[u.jsx("option",{value:"query",children:"Query (Search)"}),u.jsx("option",{value:"upsert",children:"Upsert (Add/Update)"}),u.jsx("option",{value:"delete",children:"Delete"})]})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Namespace"}),u.jsx("input",{type:"text",value:e.namespace||"default",onChange:i=>t({namespace:i.target.value}),placeholder:"default"}),u.jsx("p",{className:"hint",children:"Group related memories together"})]}),e.mode==="query"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Top K Results"}),u.jsx("input",{type:"number",value:e.topK||5,onChange:i=>t({topK:parseInt(i.target.value)}),min:1,max:50})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Min Score"}),u.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:e.minScore||.3,onChange:i=>t({minScore:parseFloat(i.target.value)})}),u.jsx("span",{className:"hint",children:e.minScore||.3})]})]})]})})}const eB=T.memo(K5);function tB({data:e,onUpdate:t}){return u.jsxs("div",{className:"config-sections",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"File Operation"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Mode"}),u.jsxs("select",{value:e.mode||"read",onChange:i=>t({mode:i.target.value}),children:[u.jsx("option",{value:"read",children:"Read File"}),u.jsx("option",{value:"write",children:"Write File"})]})]}),e.mode==="write"&&u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Suggested Filename"}),u.jsx("input",{type:"text",value:e.filename||"",onChange:i=>t({filename:i.target.value}),placeholder:"output.txt"})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:" Info"}),u.jsx("p",{className:"hint",children:"Uses the File System Access API. A file picker will open when the node runs."})]})]})}const nB=T.memo(tB);function iB({data:e,onUpdate:t}){return u.jsx("div",{className:"config-sections",children:u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Storage Settings"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Storage Type"}),u.jsxs("select",{value:e.storageType||"localStorage",onChange:i=>t({storageType:i.target.value}),children:[u.jsx("option",{value:"localStorage",children:"LocalStorage"}),u.jsx("option",{value:"indexedDB",children:"IndexedDB"})]})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Operation"}),u.jsxs("select",{value:e.mode||"get",onChange:i=>t({mode:i.target.value}),children:[u.jsx("option",{value:"get",children:"Get"}),u.jsx("option",{value:"set",children:"Set"}),u.jsx("option",{value:"delete",children:"Delete"})]})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Key"}),u.jsx("input",{type:"text",value:e.key||"",onChange:i=>t({key:i.target.value}),placeholder:"my_data_key"})]})]})})}const rB=T.memo(iB),oB=[{value:"auto",label:"Auto-detect",category:"Auto"},{value:"text/plain",label:"Text (.txt)",category:"Text"},{value:"text/markdown",label:"Markdown (.md)",category:"Text"},{value:"text/html",label:"HTML (.html)",category:"Text"},{value:"text/css",label:"CSS (.css)",category:"Text"},{value:"text/javascript",label:"JavaScript (.js)",category:"Text"},{value:"application/json",label:"JSON (.json)",category:"Data"},{value:"text/csv",label:"CSV (.csv)",category:"Data"},{value:"application/xml",label:"XML (.xml)",category:"Data"},{value:"application/yaml",label:"YAML (.yaml)",category:"Data"},{value:"application/pdf",label:"PDF (.pdf)",category:"Document"},{value:"application/msword",label:"Word (.doc)",category:"Document"},{value:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",label:"Word (.docx)",category:"Document"},{value:"application/vnd.ms-excel",label:"Excel (.xls)",category:"Document"},{value:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",label:"Excel (.xlsx)",category:"Document"},{value:"application/vnd.ms-powerpoint",label:"PowerPoint (.ppt)",category:"Document"},{value:"application/vnd.openxmlformats-officedocument.presentationml.presentation",label:"PowerPoint (.pptx)",category:"Document"},{value:"audio/wav",label:"WAV Audio (.wav)",category:"Audio"},{value:"audio/mpeg",label:"MP3 Audio (.mp3)",category:"Audio"},{value:"audio/ogg",label:"OGG Audio (.ogg)",category:"Audio"},{value:"audio/webm",label:"WebM Audio (.webm)",category:"Audio"},{value:"audio/flac",label:"FLAC Audio (.flac)",category:"Audio"},{value:"audio/aac",label:"AAC Audio (.aac)",category:"Audio"},{value:"video/mp4",label:"MP4 Video (.mp4)",category:"Video"},{value:"video/webm",label:"WebM Video (.webm)",category:"Video"},{value:"video/ogg",label:"OGG Video (.ogv)",category:"Video"},{value:"video/quicktime",label:"QuickTime (.mov)",category:"Video"},{value:"video/x-msvideo",label:"AVI Video (.avi)",category:"Video"},{value:"image/png",label:"PNG Image (.png)",category:"Image"},{value:"image/jpeg",label:"JPEG Image (.jpg)",category:"Image"},{value:"image/gif",label:"GIF Image (.gif)",category:"Image"},{value:"image/webp",label:"WebP Image (.webp)",category:"Image"},{value:"image/svg+xml",label:"SVG Image (.svg)",category:"Image"},{value:"image/bmp",label:"Bitmap Image (.bmp)",category:"Image"},{value:"application/zip",label:"ZIP Archive (.zip)",category:"Archive"},{value:"application/x-tar",label:"TAR Archive (.tar)",category:"Archive"},{value:"application/gzip",label:"GZIP Archive (.gz)",category:"Archive"},{value:"application/x-7z-compressed",label:"7-Zip Archive (.7z)",category:"Archive"},{value:"application/octet-stream",label:"Binary (.bin)",category:"Binary"}],aB=oB.reduce((e,t)=>(e[t.category]||(e[t.category]=[]),e[t.category].push(t),e),{});function sB({data:e,onUpdate:t}){return u.jsx("div",{className:"config-sections",children:u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Output Settings"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Output Type"}),u.jsxs("select",{value:e.outputType||"console",onChange:i=>t({outputType:i.target.value}),children:[u.jsx("option",{value:"console",children:"Console Log"}),u.jsx("option",{value:"file",children:"Save to File"}),u.jsx("option",{value:"notification",children:"Show Notification"}),u.jsx("option",{value:"artifact",children:"Save as Artifact"})]})]}),e.outputType==="file"&&u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Filename"}),u.jsx("input",{type:"text",value:e.filename||"output.txt",onChange:i=>t({filename:i.target.value}),placeholder:"output.txt"})]}),e.outputType==="artifact"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Artifact Type"}),u.jsx("select",{value:e.artifactType||"auto",onChange:i=>t({artifactType:i.target.value}),children:Object.entries(aB).map(([i,o])=>u.jsx("optgroup",{label:i,children:o.map(a=>u.jsx("option",{value:a.value,children:a.label},a.value))},i))})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Artifact Name"}),u.jsx("input",{type:"text",value:e.artifactName||"",onChange:i=>t({artifactName:i.target.value}),placeholder:"Auto-generated if empty"})]})]}),e.outputType==="notification"&&u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Notification Title"}),u.jsx("input",{type:"text",value:e.notificationTitle||"Workflow Complete",onChange:i=>t({notificationTitle:i.target.value})})]}),u.jsxs("div",{className:"config-toggle",children:[u.jsx("label",{children:"Format as JSON"}),u.jsx("div",{className:`toggle-switch ${e.formatJson?"active":""}`,onClick:()=>t({formatJson:!e.formatJson})})]})]})})}const lB=T.memo(sB);function cB({data:e,onUpdate:t}){const i=Ge(f=>f.availableModels),o=Ge(f=>f.status),a=Ge(f=>f.loadModel),l=f=>{const h=i.find(p=>p.id===f);t({modelId:f,modelName:h?.name||f})},c=async()=>{e.modelId&&await a(e.modelId)};return u.jsxs("div",{className:"chat-model-config",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Model Selection"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Provider"}),u.jsxs("select",{value:e.provider||"webllm",onChange:f=>t({provider:f.target.value}),children:[u.jsx("option",{value:"webllm",children:"WebLLM (Local Browser)"}),u.jsx("option",{value:"openai",children:"OpenAI API"}),u.jsx("option",{value:"anthropic",children:"Anthropic API"}),u.jsx("option",{value:"local",children:"Local Ollama"})]})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Model"}),u.jsxs("select",{value:e.modelId||"",onChange:f=>l(f.target.value),children:[u.jsx("option",{value:"",children:"Select a model..."}),i.map(f=>u.jsxs("option",{value:f.id,children:[f.name," (",f.size,")"]},f.id))]}),u.jsx("p",{className:"hint",children:"Choose the AI model for text generation"})]}),e.provider==="webllm"&&u.jsxs("div",{className:"model-status-section",children:[u.jsxs("div",{className:`status-badge ${o}`,children:[o==="ready"&&" Model Ready",o==="loading"&&" Loading...",o==="idle"&&" Not Loaded",o==="error"&&" Error"]}),o!=="ready"&&o!=="loading"&&u.jsx("button",{className:"load-model-btn",onClick:c,disabled:!e.modelId,children:"Load Model"})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Generation Settings"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Temperature"}),u.jsxs("div",{className:"slider-row",children:[u.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",value:e.temperature||.7,onChange:f=>t({temperature:parseFloat(f.target.value)})}),u.jsx("span",{className:"slider-value",children:e.temperature||.7})]}),u.jsx("p",{className:"hint",children:"Higher = more creative, Lower = more focused"})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Max Tokens"}),u.jsx("input",{type:"number",value:e.maxTokens||2e3,onChange:f=>t({maxTokens:parseInt(f.target.value,10)||2e3}),min:100,max:8e3}),u.jsx("p",{className:"hint",children:"Maximum response length"})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Connection"}),u.jsx("div",{className:"connection-info",children:u.jsxs("p",{children:["Connect the ",u.jsx("strong",{children:"Model "})," output (top) to an AI Agent's Model input slot."]})})]})]})}const uB=T.memo(cB),dB={httpRequest:y4,codeExecutor:M5,setVariable:O5,ifElse:L5,loop:B5,switchNode:H5,scheduleTrigger:U5,aiAgent:G5,manualTrigger:X5,textToSpeech:W5,pythonExecutor:J5,vectorMemory:eB,fileSystem:nB,localStorage:rB,output:lB,chatModel:uB};function fB(){const e=Ce(L=>L.nodes),t=Ce(L=>L.selectedNodeId),i=Ce(L=>L.configOpen),o=Ce(L=>L.updateNode),a=Ce(L=>L.deleteNode),l=Ce(L=>L.setSelectedNode),c=Ce(L=>L.closeConfig),[f,h]=T.useState({x:0,y:0}),[p,m]=T.useState(!1),g=T.useRef({startX:0,startY:0,startPosX:0,startPosY:0}),v=T.useRef(null),[b,w]=T.useState(380),[S,j]=T.useState(!1),N=T.useRef({startX:0,startWidth:380}),k=T.useCallback(L=>{L.target.tagName==="INPUT"||L.target.tagName==="BUTTON"||(m(!0),g.current={startX:L.clientX,startY:L.clientY,startPosX:f.x,startPosY:f.y},L.preventDefault())},[f]);T.useEffect(()=>{if(!p)return;const L=Z=>{const M=Z.clientX-g.current.startX,P=Z.clientY-g.current.startY;h({x:g.current.startPosX+M,y:g.current.startPosY+P})},U=()=>{m(!1)};return document.addEventListener("mousemove",L),document.addEventListener("mouseup",U),()=>{document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",U)}},[p]);const C=T.useCallback(L=>{L.preventDefault(),j(!0),N.current={startX:L.clientX,startWidth:b}},[b]);T.useEffect(()=>{if(!S)return;const L=Z=>{const M=N.current.startX-Z.clientX,P=Math.max(280,Math.min(800,N.current.startWidth+M));w(P)},U=()=>{j(!1)};return document.addEventListener("mousemove",L),document.addEventListener("mouseup",U),()=>{document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",U)}},[S]);const _=e.find(L=>L.id===t),H=T.useCallback(L=>{t&&o(t,L)},[t,o]),A=T.useCallback(()=>{t&&(a(t),l(null),c())},[t,a,l,c]),$=T.useCallback(()=>{c()},[c]);if(!i||!_)return null;const V=Ei[_.type],G=dB[_.type],z=uu(_.type);return u.jsxs("div",{ref:v,className:`node-config-panel ${p?"dragging":""} ${S?"resizing":""}`,style:{"--node-color":z,width:`${b}px`,transform:`translate(${f.x}px, ${f.y}px)`},children:[u.jsx("div",{className:"resize-handle",onMouseDown:C,title:"Drag to resize"}),u.jsxs("header",{className:"config-header draggable",onMouseDown:k,children:[u.jsx("div",{className:"drag-handle",title:"Drag to move",children:""}),u.jsxs("div",{className:"config-title",children:[u.jsx("span",{className:"node-icon",children:V?.icon||""}),u.jsx("input",{type:"text",className:"node-label-input",value:_.data.label||"",onChange:L=>H({label:L.target.value}),placeholder:V?.name||"Node"})]}),u.jsxs("div",{className:"config-actions",children:[u.jsx("button",{type:"button",className:"btn-icon btn-delete",onClick:L=>{L.stopPropagation(),L.preventDefault(),A()},title:"Delete node",children:""}),u.jsx("button",{type:"button",className:"btn-icon",onClick:L=>{L.stopPropagation(),$()},title:"Close",children:""})]})]}),u.jsx("div",{className:"config-body",children:G?u.jsx(G,{data:_.data,onUpdate:H,nodeId:_.id}):u.jsx("div",{className:"config-empty",children:u.jsx("p",{children:"No configuration available for this node type."})})}),u.jsxs("footer",{className:"config-footer",children:[u.jsx("span",{className:"node-type-label",children:V?.name||_.type}),u.jsxs("span",{className:"node-id",children:[_.id.slice(0,12),"..."]})]})]})}const hB=T.memo(fB);function pB({message:e,type:t,onClose:i}){const o={success:"",error:"",warning:"",info:""};return u.jsxs("div",{className:`toast toast-${t}`,role:"alert",children:[u.jsx("span",{className:"toast-icon",children:o[t]}),u.jsx("span",{className:"toast-message",children:e}),u.jsx("button",{className:"toast-close",onClick:i,children:""})]})}function mB(){const e=Qo(i=>i.toasts),t=Qo(i=>i.removeToast);return e.length===0?null:u.jsx("div",{className:"toast-container",children:e.map(i=>u.jsx(pB,{...i,onClose:()=>t(i.id)},i.id))})}const gB=T.memo(mB);function yB(){const e=Ge(l=>l.status),t=Ge(l=>l.loadProgress),i=Ge(l=>l.currentModel),o=Ge(l=>l.availableModels);if(e!=="loading")return null;const a=o.find(l=>l.id===i);return u.jsx("div",{className:"loading-overlay",children:u.jsxs("div",{className:"loading-content",children:[u.jsxs("div",{className:"loading-header",children:[u.jsx("h1",{className:"brand-title",children:"IOSANS"}),u.jsx("span",{className:"brand-tagline",children:"Infinite Open Source Automation System"})]}),u.jsxs("div",{className:"loading-spinner",children:[u.jsx("div",{className:"spinner-ring"}),u.jsx("span",{className:"spinner-icon",children:""})]}),u.jsx("h2",{className:"loading-title",children:"Preparing Your Sovereign AI"}),u.jsxs("div",{className:"loading-model-info",children:[u.jsx("span",{className:"model-name",children:a?.name||i}),a?.size&&u.jsx("span",{className:"model-size",children:a.size})]}),u.jsxs("div",{className:"progress-container",children:[u.jsx("div",{className:"progress-bar",children:u.jsx("div",{className:"progress-fill",style:{width:`${Math.round((t||0)*100)}%`}})}),u.jsxs("span",{className:"progress-text",children:[Math.round((t||0)*100),"%"]})]}),u.jsxs("p",{className:"loading-hint",children:["Your AI runs locally. No cloud. No data harvesting.",u.jsx("br",{}),u.jsx("strong",{children:"You own your intelligence."})]})]})})}const xB=T.memo(yB),Hb="flownode-workflows";function vB({isOpen:e,onClose:t}){const[i,o]=T.useState([]),[a,l]=T.useState(""),[c,f]=T.useState(null),[h,p]=T.useState(""),m=Ce(z=>z.loadWorkflow),g=Ce(z=>z.getWorkflowData),v=Ce(z=>z.clearWorkflow),b=Ce(z=>z.setWorkflowName),w=Qo(),S=T.useCallback(()=>{try{const z=localStorage.getItem(Hb);z&&o(JSON.parse(z))}catch(z){console.error("Failed to load workflows:",z)}},[]);T.useEffect(()=>{e&&S()},[e,S]);const j=z=>{localStorage.setItem(Hb,JSON.stringify(z)),o(z)},N=i.filter(z=>z.name.toLowerCase().includes(a.toLowerCase())),k=T.useCallback(()=>{const z=g(),L={id:Date.now().toString(),name:z.name||"Untitled Workflow",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),nodeCount:z.nodes.length,data:z};j([L,...i]),w.success(`Saved "${L.name}"`)},[g,i,w]),C=T.useCallback(z=>{m(z.data),b(z.name),w.success(`Loaded "${z.name}"`),t()},[m,b,w,t]),_=T.useCallback(z=>{const L=i.find(Z=>Z.id===z),U=i.filter(Z=>Z.id!==z);j(U),w.info(`Deleted "${L?.name}"`)},[i,w]),H=T.useCallback(z=>{const L={...z,id:Date.now().toString(),name:`${z.name} (Copy)`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};j([L,...i]),w.success(`Duplicated "${z.name}"`)},[i,w]),A=z=>{f(z.id),p(z.name)},$=T.useCallback(z=>{const L=i.map(U=>U.id===z?{...U,name:h,updatedAt:new Date().toISOString()}:U);j(L),f(null),w.success("Renamed workflow")},[i,h,w]),V=T.useCallback(()=>{v(),b("New Workflow"),w.info("Created new workflow"),t()},[v,b,w,t]),G=z=>new Date(z).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"});return e?u.jsx("div",{className:"workflow-manager-overlay",onClick:t,children:u.jsxs("div",{className:"workflow-manager-modal",onClick:z=>z.stopPropagation(),children:[u.jsxs("div",{className:"manager-header",children:[u.jsx("h2",{children:"Workflow Manager"}),u.jsx("button",{className:"close-btn",onClick:t,children:""})]}),u.jsxs("div",{className:"manager-toolbar",children:[u.jsx("input",{type:"text",className:"manager-search",placeholder:"Search workflows...",value:a,onChange:z=>l(z.target.value)}),u.jsxs("div",{className:"manager-actions",children:[u.jsx("button",{className:"btn-primary",onClick:k,children:" Save Current"}),u.jsx("button",{className:"btn-secondary",onClick:V,children:" New Workflow"})]})]}),u.jsx("div",{className:"manager-content",children:N.length===0?u.jsx("div",{className:"empty-state",children:a?u.jsxs("p",{children:['No workflows match "',a,'"']}):u.jsxs("div",{children:[u.jsx("p",{children:"No saved workflows yet"}),u.jsx("p",{className:"hint",children:'Click "Save Current" to save your first workflow'})]})}):u.jsx("div",{className:"workflow-list",children:N.map(z=>u.jsxs("div",{className:"workflow-item",children:[u.jsxs("div",{className:"workflow-info",children:[c===z.id?u.jsx("input",{type:"text",className:"edit-name-input",value:h,onChange:L=>p(L.target.value),onBlur:()=>$(z.id),onKeyDown:L=>L.key==="Enter"&&$(z.id),autoFocus:!0}):u.jsx("h3",{className:"workflow-name",onClick:()=>A(z),children:z.name}),u.jsxs("div",{className:"workflow-meta",children:[u.jsxs("span",{children:[z.nodeCount," nodes"]}),u.jsx("span",{children:""}),u.jsx("span",{children:G(z.updatedAt)})]})]}),u.jsxs("div",{className:"workflow-actions",children:[u.jsx("button",{className:"action-btn load",onClick:()=>C(z),title:"Load workflow",children:""}),u.jsx("button",{className:"action-btn duplicate",onClick:()=>H(z),title:"Duplicate workflow",children:""}),u.jsx("button",{className:"action-btn delete",onClick:()=>_(z.id),title:"Delete workflow",children:""})]})]},z.id))})}),u.jsx("div",{className:"manager-footer",children:u.jsxs("span",{className:"workflow-count",children:[i.length," workflow",i.length!==1?"s":""," saved"]})})]})}):null}const bB=T.memo(vB),Pb={"0.5B":1,"1B":2,"1.5B":2.5,"2B":3,"3B":4,"4B":5,"7B":8,"8B":10,"9B":12};function wB(e,t){return{summary:{totalNodes:e.length,totalConnections:t.length,nodeTypes:[...new Set(e.map(i=>i.type))]},nodes:e.map(i=>({id:i.id,type:i.type,title:i.data?.label||i.type,hasConfig:Object.keys(i.data||{}).length>1})),connections:t.map(i=>({from:i.source,to:i.target}))}}function SB(e,t){const i=[],o=e.map(c=>c.type);o.includes("webhookTrigger")&&!o.includes("aiAgent")&&i.push({type:"add_node",message:"I see you have a webhook trigger. Would you like me to add an AI Agent to process the incoming data?",suggestedAction:{type:"addNode",nodeType:"aiAgent",label:"Process Webhook Data"}}),o.includes("aiAgent")&&!o.includes("output")&&i.push({type:"add_node",message:"Your AI Agent needs an Output node to display results. Want me to add one?",suggestedAction:{type:"addNode",nodeType:"output",label:"Result"}}),o.includes("httpRequest")&&!o.includes("ifElse")&&i.push({type:"add_node",message:"Consider adding an If/Else node to handle API errors gracefully.",suggestedAction:{type:"addNode",nodeType:"ifElse",label:"Check Response"}}),o.includes("codeExecutor")&&!o.includes("aiAgent")&&i.push({type:"enhance",message:"Want to add an AI Agent to dynamically generate or modify the code?",suggestedAction:{type:"addNode",nodeType:"aiAgent",label:"Code Generator"}});const a=new Set;t.forEach(c=>{a.add(c.source),a.add(c.target)});const l=e.filter(c=>!a.has(c.id)&&e.length>1);return l.length>0&&i.push({type:"warning",message:`You have ${l.length} disconnected node(s). Would you like help connecting them?`,disconnectedNodes:l.map(c=>c.id)}),i}function NB(e){if(!e)return null;const t=e.match(/(\d+(?:\.\d+)?)[Bb]/i);if(!t)return null;const i=t[1]+"B",o=Pb[i];if(!o)return null;const a=8;if(o>a){const c=Ge.getState().availableModels.filter(f=>{const h=f.id.match(/(\d+(?:\.\d+)?)[Bb]/i);if(!h)return!1;const p=Pb[h[1]+"B"];return p&&p<=a}).slice(0,3);return{warning:!0,message:` Warning: ${e} requires ~${o}GB VRAM which may exceed your device's capacity.`,suggestion:c.length>0?`Consider using a quantized smaller model like: ${c.map(f=>f.name).join(", ")}`:"Consider using a smaller quantized model for better stability.",requiredVRAM:o,estimatedAvailable:a}}return null}function EB(e,t){const i=t?.message||t?.error||"Unknown error",o={nodeId:e,error:i,diagnosis:"",suggestedFix:null},a=[{pattern:/{{(\w+)\.(\w+)}}/,diagnosis:"Variable expression syntax error",fix:l=>({type:"updateNode",nodeId:e,config:{expression:`{{${l[1]}.output.${l[2]}}}`},description:`Fix variable syntax: Use {{${l[1]}.output.${l[2]}}} instead of {{${l[1]}.${l[2]}}}`})},{pattern:/undefined is not|Cannot read propert/i,diagnosis:"Missing or undefined input data",fix:()=>({type:"addNode",nodeType:"setVariable",config:{name:"defaultInput",value:"{}"},description:"Add a Set Variable node to provide default input values"})},{pattern:/timeout|timed out/i,diagnosis:"Operation timed out - possibly due to model loading",fix:()=>({type:"updateNode",nodeId:e,config:{timeout:3e5},description:"Increase timeout to 5 minutes for AI operations"})},{pattern:/fetch|network|CORS/i,diagnosis:"Network or CORS error in HTTP request",fix:()=>({type:"updateNode",nodeId:e,config:{mode:"cors",headers:{Accept:"application/json"}},description:"Update request headers to handle CORS"})},{pattern:/JSON\.parse|Unexpected token/i,diagnosis:"Invalid JSON in response or configuration",fix:()=>({type:"addNode",nodeType:"codeExecutor",config:{code:`// Safely parse JSON
try {
  return JSON.parse(input);
} catch {
  return { raw: input };
}`},description:"Add a Code Executor to safely parse JSON"})}];for(const{pattern:l,diagnosis:c,fix:f}of a){const h=i.match(l);if(h){o.diagnosis=c,o.suggestedFix=f(h);break}}return o.diagnosis||(o.diagnosis="Unrecognized error - manual inspection recommended",o.suggestedFix={type:"focusNode",nodeId:e,description:"Open node configuration to inspect settings"}),o}function jB(){return Object.entries(Xc).map(([e,t])=>({type:e,title:t.title,category:t.category,overview:t.overview?.slice(0,150)+"...",config:t.config?.map(i=>i.name).join(", ")||"none"}))}const CB=`
You are the Overseer, an expert AI assistant for IOSANS.
You have **DIRECT CONTROL** over the workflow canvas. You can build, edit, and run workflows by outputting JSON actions.

##  MISSION CRITICAL RULES
1. **ACTION OVER EXPLANATION**: If the user asks to "build", "create", "add", or "make" something, **DO NOT** explain how to do it. **JUST DO IT** by outputting the JSON actions.
   -  "I can't build it directly, but here is a plan..."
   -  (Outputs JSON to build it immediately)
2. **NO HALLUCINATIONS**: Use only Valid Node Types.
3. **CONNECT EVERYTHING**: Add 'addEdge' actions for every connection.
4. **ALWAYS OUTPUT**: Every flow needs an 'output' node.

## Valid Node Types
{{NODE_REFERENCE}}

## Interactive Capabilities
- **Build/Edit**: Output JSON with \`addNode\`, \`addEdge\`, \`updateNode\`.
- **Control**: Output JSON with \`runWorkflow\`, \`clearCanvas\`.
- **Teach**: Output JSON with \`startTutorial\`.

## Response Format
- **Chatting**: Text only.
- **Acting**: **ONLY** valid JSON inside a code block. NO explanation text outside the block if you are building the whole request.

\`\`\`json
{
  "actions": [
    { "type": "addNode", "nodeType": "aiAgent", ... },
    { "type": "addEdge", ... }
  ]
}
\`\`\`
`;function kB(e,t){const i=[],o=[],a=e.some(p=>p.type==="output");e.length>0&&!a&&i.push(" No OUTPUT node - add one to see results");const l=new Set;t.forEach(p=>{l.add(p.source),l.add(p.target)});const c=e.filter(p=>!l.has(p.id)&&e.length>1);c.length>0&&i.push(` ${c.length} disconnected node(s)`);const f=e.some(p=>["manualTrigger","scheduleTrigger","webhookTrigger","browserEventTrigger"].includes(p.type));e.length>0&&!f&&i.push(" No TRIGGER node - workflow cannot start");const h=e[e.length-1];if(h)switch(h.type){case"aiAgent":o.push(" Connect to textToSpeech to hear the response"),o.push(" Connect to output to display the result");break;case"httpRequest":o.push(" Connect to codeExecutor to transform the data"),o.push(" Connect to ifElse to check status code");break;case"codeExecutor":o.push(" Connect to output to display results"),o.push(" Connect to httpRequest to send data");break;case"manualTrigger":o.push(" Connect to aiAgent for AI processing"),o.push(" Connect to httpRequest for API calls");break}return{issues:i,suggestions:o,hasOutput:a,hasTrigger:f,disconnectedCount:c.length}}function TB(e){const t=Xc[e];return t?{title:t.title,overview:t.overview,config:t.config,examples:t.examples?.slice(0,2),tips:t.tips?.slice(0,3)}:null}class AB{constructor(){this.sessions=this.loadSessions(),this.activeSessionId=this.getLastActiveSessionId(),this.sessions.length===0?this.createSession("New Chat"):(!this.activeSessionId||!this.getSession(this.activeSessionId))&&(this.activeSessionId=this.sessions[0].id,this.saveLastActiveSessionId()),this.subscribers=[],this.actionHistory=[],this.thinkingCallbacks=[],this.errorSubscribers=[],this.pendingErrorAnalysis=null,this.setupErrorSubscription()}setupErrorSubscription(){Xe.subscribe((t,i)=>{const o=t.logs.filter(a=>a.type==="error"&&!i.logs.some(l=>l.id===a.id));if(o.length>0){const a=o[o.length-1];this.handleExecutionError(a)}})}handleExecutionError(t){const{nodes:i}=Ce.getState(),o=i.find(c=>c.id===t.nodeId);if(!o)return;const a=EB(t.nodeId,t);this.pendingErrorAnalysis=a;const l=this.getActiveSession();if(l){const c={role:"assistant",content:` **Workflow Error Detected**

**Node:** ${o.data?.label||o.type}
**Error:** ${a.error}
**Diagnosis:** ${a.diagnosis}

`+(a.suggestedFix?`**Suggested Fix:** ${a.suggestedFix.description}

\`\`\`json
{"actions": [{"type": "${a.suggestedFix.type}", "nodeId": "${a.nodeId}", "config": ${JSON.stringify(a.suggestedFix.config||{})}, "__fixAction": true}]}
\`\`\``:""),isErrorAnalysis:!0,timestamp:Date.now()};l.messages.push(c),l.timestamp=Date.now(),this.saveSessions(),this.notifySubscribers(),this.errorSubscribers.forEach(f=>f(a))}}onError(t){return this.errorSubscribers.push(t),()=>{this.errorSubscribers=this.errorSubscribers.filter(i=>i!==t)}}loadSessions(){try{const t=localStorage.getItem("overseer_sessions");if(t)return JSON.parse(t);const i=localStorage.getItem("overseer_history");if(i){const o=JSON.parse(i);if(o.length>0){const a={id:"legacy-"+Date.now(),title:"Legacy Chat",timestamp:Date.now(),messages:o};return localStorage.removeItem("overseer_history"),[a]}}return[]}catch(t){return console.warn("Failed to load Overseer sessions",t),[]}}saveSessions(){try{localStorage.setItem("overseer_sessions",JSON.stringify(this.sessions))}catch(t){console.warn("Failed to save Overseer sessions",t)}}getLastActiveSessionId(){return localStorage.getItem("overseer_active_session_id")}saveLastActiveSessionId(){localStorage.setItem("overseer_active_session_id",this.activeSessionId)}getSessions(){return[...this.sessions].sort((t,i)=>i.timestamp-t.timestamp)}getSession(t){return this.sessions.find(i=>i.id===t)}getActiveSession(){return this.getSession(this.activeSessionId)}createSession(t="New Chat"){const i={id:Date.now().toString(36)+Math.random().toString(36).substr(2),title:t,timestamp:Date.now(),messages:[]};return this.sessions.unshift(i),this.activeSessionId=i.id,this.saveSessions(),this.saveLastActiveSessionId(),this.notifySubscribers(),i}switchSession(t){return this.getSession(t)?(this.activeSessionId=t,this.saveLastActiveSessionId(),this.notifySubscribers(),!0):!1}deleteSession(t){this.sessions=this.sessions.filter(i=>i.id!==t),this.activeSessionId===t&&(this.sessions.length>0?this.activeSessionId=this.sessions[0].id:this.createSession()),this.saveSessions(),this.saveLastActiveSessionId(),this.notifySubscribers()}renameSession(t,i){const o=this.getSession(t);o&&(o.title=i,this.saveSessions(),this.notifySubscribers())}clearAllSessions(){this.sessions=[],this.createSession(),this.saveSessions(),this.notifySubscribers()}subscribe(t){return this.subscribers.push(t),()=>{this.subscribers=this.subscribers.filter(i=>i!==t)}}notifySubscribers(){this.subscribers.forEach(t=>t())}async chat(t){const i=this.getActiveSession();if(!i)throw new Error("No active session");const{nodes:o,edges:a}=Ce.getState(),l=kB(o,a),c=wB(o,a),f=SB(o,a),h=o.find(S=>S.selected),p=h?TB(h.type):null;let m=null;const g=t.match(/(?:llama|qwen|gemma|phi|mistral)[\s-]*(?:\d+(?:\.\d+)?)?[\s-]*(\d+)[Bb]/i);g&&(m=NB(g[0]));const v=JSON.stringify({canvas:c,analysis:{issues:l.issues,suggestions:l.suggestions,hasOutput:l.hasOutput,hasTrigger:l.hasTrigger},proactiveSuggestions:f.slice(0,3),selectedNode:h?{id:h.id,type:h.type,help:p}:null,resourceWarning:m}),b=jB().map(S=>`- **${S.type}**: ${S.overview} (Inputs: ${S.config})`).join(`
`),w=CB.replace("{{NODE_REFERENCE}}",b)+`

### Current Canvas State
${v}`+(f.length>0?`

### Proactive Suggestions
Based on the current canvas, consider mentioning:
${f.map(S=>`- ${S.message}`).join(`
`)}`:"")+(m?`

### Resource Warning
${m.message}
${m.suggestion}`:"");try{const S=await Gn.generateWithHistory(t,i.messages,{temperature:.7,maxTokens:2e3,systemPrompt:w});i.messages.push({role:"user",content:t}),i.messages.push({role:"assistant",content:S}),i.timestamp=Date.now(),i.title==="New Chat"&&i.messages.length<=2&&(i.title=t.split(" ").slice(0,5).join(" ")+"..."),this.saveSessions(),this.notifySubscribers();const j=this.parseActions(S);return j.length>0&&(console.log("Overseer executing actions:",j),this.executeActions(j)),S}catch(S){return console.error("Overseer Error:",S),`Error: ${S.message}. Is a model loaded?`}}parseActions(t){try{let i=null;const o=t.match(/```(?:json)?\s*([\s\S]*?)\s*```/i);if(o)i=o[1];else{const a=t.indexOf("{"),l=t.lastIndexOf("}");a!==-1&&l!==-1&&l>a&&(i=t.substring(a,l+1))}if(i){const a=i.trim(),l=JSON.parse(a);if(l.actions&&Array.isArray(l.actions))return l.actions}}catch(i){console.warn("Failed to parse Overseer actions:",i)}return[]}executeActions(t){const i=Ce.getState(),o=["manualTrigger","scheduleTrigger","webhookTrigger","errorTrigger","httpRequest","codeExecutor","setVariable","fileSystem","ifElse","loop","switchNode","merge","aiAgent","vectorMemory","waitForApproval","textToSpeech","imageGeneration","output"],a={audioGeneration:"textToSpeech",AudioNode:"textToSpeech","text-to-speech":"textToSpeech",TextToSpeech:"textToSpeech","image-generation":"imageGeneration","ai-agent":"aiAgent","manual-trigger":"manualTrigger"};t.forEach(l=>{const c=l.nodeType||"unknown",f=l.id||`${c}-${Date.now()}-${Math.random().toString(36).substr(2,5)}`;switch(l.type){case"addNode":{let h=l.nodeType;if(!h){console.warn("Overseer: Missing nodeType in addNode action",l);return}const p=h.toLowerCase(),m={...a,audiogeneration:"textToSpeech",audionode:"textToSpeech","text-to-speech":"textToSpeech",texttospeech:"textToSpeech","image-generation":"imageGeneration",imagegeneration:"imageGeneration","ai-agent":"aiAgent",aiagent:"aiAgent",agent:"aiAgent","manual-trigger":"manualTrigger",manualtrigger:"manualTrigger","schedule-trigger":"scheduleTrigger",scheduletrigger:"scheduleTrigger","webhook-trigger":"webhookTrigger",webhooktrigger:"webhookTrigger",errortrigger:"errorTrigger","error-trigger":"errorTrigger",httprequest:"httpRequest","http-request":"httpRequest",codeexecutor:"codeExecutor","code-executor":"codeExecutor",setvariable:"setVariable","set-variable":"setVariable",filesystem:"fileSystem","file-system":"fileSystem",ifelse:"ifElse","if-else":"ifElse",switchnode:"switchNode",switch:"switchNode",vectormemory:"vectorMemory",waitforapproval:"waitForApproval","wait-for-approval":"waitForApproval"};if(m[p])h=m[p];else{const g=o.find(v=>v.toLowerCase()===p);g&&(h=g)}if(!o.includes(h)){console.warn(`Overseer: Skipped invalid node type '${h}'`);return}i.addNode({id:f,type:h,position:{x:l.x||Math.random()*400+50,y:l.y||Math.random()*400+50},data:{label:l.label||h,...l.config}});break}case"addEdge":i.onConnect({source:l.source,target:l.target,sourceHandle:l.sourceHandle||"output-0",targetHandle:l.targetHandle||"input-0",type:"animated"});break;case"deleteNode":l.nodeId&&i.deleteNode(l.nodeId);break;case"clearCanvas":i.clearWorkflow();break;case"loadTemplate":{const h=Ih.find(p=>p.id===l.templateId);h?(i.clearWorkflow(),h.nodes.forEach(p=>i.addNode({...p})),h.edges.forEach(p=>i.onConnect({source:p.source,target:p.target,sourceHandle:p.sourceHandle||"output-0",targetHandle:p.targetHandle||"input-0",type:"animated"})),console.log(`Overseer: Loaded template '${h.name}'`)):console.warn(`Overseer: Template '${l.templateId}' not found`);break}case"updateNode":{if(l.nodeId&&l.config){const h=i.nodes,p=h.findIndex(m=>m.id===l.nodeId);if(p!==-1){const m=[...h];m[p]={...m[p],data:{...m[p].data,...l.config}},i.setNodes(m),console.log(`Overseer: Updated node '${l.nodeId}'`)}}break}case"runWorkflow":{window.dispatchEvent(new CustomEvent("startWorkflow")),console.log("Overseer: Triggered workflow execution");break}case"focusNode":{l.nodeId&&(i.openConfig(l.nodeId),console.log(`Overseer: Focused on node '${l.nodeId}'`));break}case"startTutorial":{window.dispatchEvent(new CustomEvent("startTutorial",{detail:l.tutorialId})),console.log(`Overseer: Started tutorial '${l.tutorialId}'`);break}case"undoAction":{const h=this.undoLastAction();h&&console.log(`Overseer: Undid action '${h.type}'`);break}}})}onThinking(t){return this.thinkingCallbacks.push(t),()=>{this.thinkingCallbacks=this.thinkingCallbacks.filter(i=>i!==t)}}broadcastThinking(t,i,o=null){this.thinkingCallbacks.forEach(a=>a({type:t,content:i,details:o,timestamp:Date.now()}))}undoLastAction(){const t=this.actionHistory.pop();if(!t)return null;const i=Ce.getState();switch(t.type){case"addNode":i.deleteNode(t.nodeId);break;case"deleteNode":i.addNode(t.node);break;case"clearCanvas":t.nodes.forEach(o=>i.addNode(o)),t.edges.forEach(o=>i.onConnect(o));break}return t}clearHistory(){this.sessions=this.loadSessions(),this.notifySubscribers()}}const or=new AB;function MB({actions:e,isFixAction:t}){const[i,o]=T.useState(!1),[a,l]=T.useState(!1),c=()=>{l(!a),console.log("Preview actions:",e)},f=()=>{i||(or.executeActions(e),o(!0),l(!1))},h=T.useMemo(()=>{const p=e.filter(b=>b.type==="addNode").length,m=e.filter(b=>b.type==="addEdge").length,g=e.filter(b=>b.type==="updateNode").length,v=[];return p&&v.push(`${p} node${p>1?"s":""}`),m&&v.push(`${m} connection${m>1?"s":""}`),g&&v.push(`${g} update${g>1?"s":""}`),v.join(", ")||"Actions"},[e]);return u.jsxs("div",{className:`action-card ${t?"fix-card":""}`,children:[u.jsxs("div",{className:"action-card-header",children:[u.jsx("span",{className:"action-card-icon",children:t?"":""}),u.jsx("span",{className:"action-card-title",children:t?"Quick Fix":"Workflow Recipe"}),u.jsx("span",{className:"action-card-summary",children:h})]}),u.jsxs("div",{className:"action-card-actions",children:[!t&&u.jsx("button",{className:`btn-preview ${a?"active":""}`,onClick:c,disabled:i,children:a?" Hide Preview":" Preview"}),u.jsx("button",{className:`btn-apply ${i?"applied":""}`,onClick:f,disabled:i,children:i?" Applied":t?" Apply Fix":" Apply"})]})]})}function DB(e){const t=[];let i=0;const o=/```(?:json)?\s*([\s\S]*?)```/gi;let a;for(;(a=o.exec(e))!==null;){a.index>i&&t.push({type:"text",content:e.slice(i,a.index)});try{const l=JSON.parse(a[1].trim());if(l.actions&&Array.isArray(l.actions)){const c=l.actions.some(f=>f.__fixAction);t.push({type:"actions",actions:l.actions,isFixAction:c})}else t.push({type:"code",content:a[0]})}catch{t.push({type:"code",content:a[0]})}i=a.index+a[0].length}return i<e.length&&t.push({type:"text",content:e.slice(i)}),t.length>0?t:[{type:"text",content:e}]}function _B({content:e}){const t=T.useMemo(()=>DB(e),[e]);return u.jsx(u.Fragment,{children:t.map((i,o)=>i.type==="actions"?u.jsx(MB,{actions:i.actions,isFixAction:i.isFixAction},o):u.jsx(h1,{children:i.content},o))})}function OB({isOpen:e,onClose:t}){const[i,o]=T.useState([]),[a,l]=T.useState(""),[c,f]=T.useState(!1),[h,p]=T.useState(!1),[m,g]=T.useState([]),[v,b]=T.useState(null),w=T.useRef(null),[S,j]=T.useState(()=>({x:window.innerWidth/2-250,y:window.innerHeight-680})),N=T.useRef({active:!1,offsetX:0,offsetY:0}),k=Ge(L=>L.isReady),C=()=>{w.current?.scrollIntoView({behavior:"smooth"})};T.useEffect(()=>{const L=Z=>{N.current.active&&j({x:Z.clientX-N.current.offsetX,y:Z.clientY-N.current.offsetY})},U=()=>{N.current.active=!1};return document.addEventListener("mousemove",L),document.addEventListener("mouseup",U),()=>{document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",U)}},[]);const _=T.useCallback(()=>{g(or.getSessions());const L=or.getActiveSession();L?(o([...L.messages]),b(L.id)):(o([]),b(null))},[]);T.useEffect(()=>{_();const L=or.subscribe(_);return()=>L()},[_]),T.useEffect(()=>{C()},[i,e]);const H=L=>{N.current={active:!0,offsetX:L.clientX-S.x,offsetY:L.clientY-S.y}},A=async()=>{if(!a.trim()||c)return;const L=a.trim();l(""),f(!0);try{if(!k)throw new Error("Please load a model from the Model Manager first.");await or.chat(L)}catch(U){o(Z=>[...Z,{role:"system",content:`Error: ${U.message}`}])}finally{f(!1)}},$=L=>{L.stopPropagation(),or.createSession(),p(!1)},V=L=>{or.switchSession(L),p(!1)},G=(L,U)=>{L.stopPropagation(),window.confirm("Delete this chat?")&&or.deleteSession(U)},z=L=>{L.key==="Enter"&&!L.shiftKey&&(L.preventDefault(),A())};return u.jsxs("div",{className:`overseer-panel ${e?"":"closed"}`,style:{left:S.x,top:S.y},children:[u.jsxs("header",{className:"overseer-header",onMouseDown:H,children:[u.jsxs("div",{className:"overseer-title",children:[u.jsx("span",{className:"overseer-icon",children:""}),u.jsx("span",{className:"title-text",children:"Overseer"})]}),u.jsxs("div",{className:"header-controls",children:[u.jsx("button",{className:"btn-icon",onClick:$,title:"New Chat",onMouseDown:L=>L.stopPropagation(),children:"+"}),u.jsx("button",{className:`btn-icon ${h?"active":""}`,onClick:L=>{L.stopPropagation(),p(!h)},title:"History",onMouseDown:L=>L.stopPropagation(),children:""}),u.jsx("button",{className:"btn-close-float",onClick:L=>{L.stopPropagation(),t()},onMouseDown:L=>L.stopPropagation(),onMouseUp:L=>L.stopPropagation(),children:""})]})]}),u.jsxs("div",{className:"overseer-content-wrapper",children:[u.jsxs("div",{className:`history-sidebar ${h?"visible":""}`,children:[u.jsx("div",{className:"history-header",children:"Chat History"}),u.jsxs("div",{className:"history-list",children:[m.map(L=>u.jsxs("div",{className:`history-item ${v===L.id?"active":""}`,onClick:()=>V(L.id),children:[u.jsxs("div",{className:"history-info",children:[u.jsx("span",{className:"history-title",children:L.title||"Untitled"}),u.jsx("span",{className:"history-date",children:new Date(L.timestamp).toLocaleDateString()})]}),u.jsx("button",{className:"btn-delete-session",onClick:U=>G(U,L.id),title:"Delete",children:""})]},L.id)),m.length===0&&u.jsx("div",{className:"history-empty",children:"No history"})]})]}),u.jsxs("div",{className:"overseer-messages",children:[i.length===0&&!c&&u.jsxs("div",{className:"welcome-message",children:[u.jsx("h3",{children:"I am the Overseer."}),u.jsx("p",{children:"How can I help you build your workflow?"})]}),i.map((L,U)=>u.jsx("div",{className:`message ${L.role} ${L.isErrorAnalysis?"error-analysis":""}`,children:u.jsx(_B,{content:L.content})},U)),c&&u.jsxs("div",{className:"typing-indicator",children:[u.jsx("div",{className:"dot"}),u.jsx("div",{className:"dot"}),u.jsx("div",{className:"dot"})]}),u.jsx("div",{ref:w})]})]}),u.jsxs("div",{className:"overseer-input-area",children:[u.jsx("textarea",{className:"overseer-input",placeholder:k?"Describe a workflow to build...":"Load a model first...",value:a,onChange:L=>l(L.target.value),onKeyDown:z,disabled:c}),u.jsx("button",{className:"btn-send",onClick:A,disabled:!a.trim()||c,children:""})]})]})}const is=[{target:".node-sidebar",title:" Node Library",content:"Drag & drop nodes from here to build your workflow. Browse categories like Triggers, Actions, Logic, and AI nodes.",placement:"right"},{target:".templates-toggle",title:" Workflow Templates",content:"Click here to access pre-built workflow templates. Quickly load example automations to learn or customize for your needs.",placement:"right"},{target:".react-flow",title:" Workflow Canvas",content:"This is your workspace. Drop nodes here, connect them with edges, and build powerful automations. Right-click for options.",placement:"center"},{target:".execution-panel",title:" Logs & Results",content:"See real-time execution logs here. The Output tab shows final results, and Artifacts stores generated files.",placement:"left"},{target:".toolbar",title:" Workflow Management",content:"Name your workflow, save it, or import/export. Use the dropdown to switch between saved workflows.",placement:"bottom"},{target:".exec-btn-group",title:" Run Controls",content:"Click Run to execute your workflow. Use Debug mode to step through nodes one by one and inspect data.",placement:"top"},{target:".ai-controls-panel",title:" AI Controls",content:"Chat with the Overseer AI, manage your local LLM models in the model manager. Keep track of privacy Leaks in the privacy manager.",placement:"top"},{target:".overseer-btn",title:" The Overseer",content:"Your AI assistant! Ask it to build workflows for you, explain nodes, or debug errors. It understands your entire canvas.",placement:"top"}];function RB({isActive:e,onComplete:t}){const[i,o]=T.useState(0),[a,l]=T.useState(null);if(T.useLayoutEffect(()=>{if(!e)return;const v=is[i],b=document.querySelector(v.target);if(b){const w=b.getBoundingClientRect();l(w),b.scrollIntoView({behavior:"smooth",block:"center"})}else console.warn(`Tour target not found: ${v.target}`),l({top:window.innerHeight/2-100,left:window.innerWidth/2-150,width:300,height:200})},[e,i,t]),!e||!a)return null;const c=is[i],f=()=>{i<is.length-1?o(v=>v+1):t()},h=()=>{i>0&&o(v=>v-1)},p=()=>{t()};let m={};const g=20;switch(c.placement){case"right":m={top:a.top,left:a.right+g};break;case"left":m={top:a.top,right:window.innerWidth-a.left+g};break;case"bottom":m={top:a.bottom+g,left:a.left};break;case"top":m={bottom:window.innerHeight-a.top+g,left:a.left};break;case"top-left":m={bottom:window.innerHeight-a.top+g,left:a.left};break;case"bottom-left":m={top:a.bottom+g,left:a.left};break;default:m={top:a.top+a.height/2-100,left:a.left+a.width/2-160}}return u.jsxs("div",{className:"tour-overlay",children:[u.jsx("div",{className:"tour-spotlight",style:{top:a.top,left:a.left,width:a.width,height:a.height}}),u.jsxs("div",{className:"tour-popover",style:m,children:[u.jsx("h3",{children:c.title}),u.jsx("p",{children:c.content}),u.jsxs("div",{className:"tour-actions",children:[u.jsx("button",{className:"btn-skip",onClick:p,children:"Skip"}),u.jsxs("div",{className:"tour-nav-buttons",children:[u.jsx("button",{className:"btn-prev",onClick:h,disabled:i===0,children:" Prev"}),u.jsx("div",{className:"tour-dots",children:is.map((v,b)=>u.jsx("span",{className:`tour-dot ${b===i?"active":""}`},b))}),u.jsx("button",{className:"btn-next",onClick:f,children:i===is.length-1?"Finish":"Next "})]})]})]})]})}function IB(){const e=Ce(w=>w.nodes),t=Ce(w=>w.edges),i=Ce(w=>w.selectedNodeId),o=Xe(w=>w.isRunning),a=Ge(w=>w.setLoading),l=Ge(w=>w.setReady),c=Ge(w=>w.setError),[f,h]=T.useState(!1),[p,m]=T.useState(!1),[g,v]=T.useState(!1);T.useEffect(()=>{const w=()=>h(!0),S=()=>m(N=>!N),j=()=>v(!0);return window.addEventListener("openWorkflowManager",w),window.addEventListener("toggleOverseer",S),window.addEventListener("startTour",j),()=>{window.removeEventListener("openWorkflowManager",w),window.removeEventListener("toggleOverseer",S),window.removeEventListener("startTour",j)}},[]),T.useEffect(()=>{let w=!1;return(async()=>{if(!(Gn.isLoading||Gn.isReady))try{const j=localStorage.getItem("selectedModel")||"gemma-2-2b-it-q4f16_1-MLC";await Gn.initialize(j,N=>{w||a(N.progress,N.text||`Loading model... ${Math.round(N.progress*100)}%`)}),w||l(j)}catch(j){w||(console.error("Failed to initialize WebLLM:",j),c(j.message||"Failed to load AI model"))}})(),()=>{w=!0}},[a,l,c]),T.useEffect(()=>{const w=async j=>{const{modelId:N}=j.detail;try{a(0,`Switching to ${N}...`),await Gn.initialize(N,k=>{a(k.progress,k.text||`Loading ${N}... ${Math.round(k.progress*100)}%`)}),localStorage.setItem("selectedModel",N),l(N)}catch(k){console.error("Failed to switch model:",k),c(k.message||"Failed to switch model")}},S=j=>{const{modelId:N}=j.detail,k=Ge.getState().setDownloadProgress;k(N,0,"downloading"),Gn.downloadModel(N,C=>{k(N,C.progress*100,"downloading")}).then(()=>{k(N,100,"complete")}).catch(C=>{console.error("Download failed:",C),k(N,0,"error")})};return window.addEventListener("loadModel",w),window.addEventListener("downloadModel",S),()=>{window.removeEventListener("loadModel",w),window.removeEventListener("downloadModel",S)}},[a,l,c]);const b=T.useCallback(async(w={})=>{if(o)return;const{debug:S=!1}=w,j=Xe.getState();S&&Xe.getState().setDebugMode(!0),await Ro.execute(e,t,{executionStore:j},{},{debug:S})},[e,t,o]);return u.jsx(Cw,{children:u.jsxs("div",{className:"app",children:[u.jsx(l4,{onRun:b}),u.jsxs("div",{className:"app-body",children:[u.jsx(k_,{}),u.jsx(j_,{}),u.jsx(hB,{},i||"none"),u.jsx(f4,{}),u.jsx(OB,{isOpen:p,onClose:()=>m(!1)})]}),u.jsx(gB,{}),u.jsx(xB,{}),u.jsx(bB,{isOpen:f,onClose:()=>h(!1)}),u.jsx(RB,{isActive:g,onComplete:()=>v(!1)})]})})}aE.createRoot(document.getElementById("root")).render(u.jsx(T.StrictMode,{children:u.jsx(IB,{})}));
