(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function i(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(s){if(s.ep)return;s.ep=!0;const l=i(s);fetch(s.href,l)}})();function Xc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Tf={exports:{}},Fa={};var fx;function VN(){if(fx)return Fa;fx=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(o,s,l){var c=null;if(l!==void 0&&(c=""+l),s.key!==void 0&&(c=""+s.key),"key"in s){l={};for(var f in s)f!=="key"&&(l[f]=s[f])}else l=s;return s=l.ref,{$$typeof:e,type:o,key:c,ref:s!==void 0?s:null,props:l}}return Fa.Fragment=t,Fa.jsx=i,Fa.jsxs=i,Fa}var hx;function FN(){return hx||(hx=1,Tf.exports=VN()),Tf.exports}var u=FN(),Af={exports:{}},ke={};var px;function GN(){if(px)return ke;px=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),v=Symbol.iterator;function b(B){return B===null||typeof B!="object"?null:(B=v&&B[v]||B["@@iterator"],typeof B=="function"?B:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,C={};function S(B,F,L){this.props=B,this.context=F,this.refs=C,this.updater=L||w}S.prototype.isReactComponent={},S.prototype.setState=function(B,F){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,F,"setState")},S.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function k(){}k.prototype=S.prototype;function j(B,F,L){this.props=B,this.context=F,this.refs=C,this.updater=L||w}var _=j.prototype=new k;_.constructor=j,N(_,S.prototype),_.isPureReactComponent=!0;var $=Array.isArray;function A(){}var H={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function G(B,F,L){var ie=L.ref;return{$$typeof:e,type:B,key:F,ref:ie!==void 0?ie:null,props:L}}function I(B,F){return G(B.type,F,B.props)}function z(B){return typeof B=="object"&&B!==null&&B.$$typeof===e}function U(B){var F={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(L){return F[L]})}var Z=/\/+/g;function M(B,F){return typeof B=="object"&&B!==null&&B.key!=null?U(""+B.key):F.toString(36)}function P(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(A,A):(B.status="pending",B.then(function(F){B.status==="pending"&&(B.status="fulfilled",B.value=F)},function(F){B.status==="pending"&&(B.status="rejected",B.reason=F)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function O(B,F,L,ie,te){var re=typeof B;(re==="undefined"||re==="boolean")&&(B=null);var de=!1;if(B===null)de=!0;else switch(re){case"bigint":case"string":case"number":de=!0;break;case"object":switch(B.$$typeof){case e:case t:de=!0;break;case m:return de=B._init,O(de(B._payload),F,L,ie,te)}}if(de)return te=te(B),de=ie===""?"."+M(B,0):ie,$(te)?(L="",de!=null&&(L=de.replace(Z,"$&/")+"/"),O(te,F,L,"",function(xe){return xe})):te!=null&&(z(te)&&(te=I(te,L+(te.key==null||B&&B.key===te.key?"":(""+te.key).replace(Z,"$&/")+"/")+de)),F.push(te)),1;de=0;var ae=ie===""?".":ie+":";if($(B))for(var fe=0;fe<B.length;fe++)ie=B[fe],re=ae+M(ie,fe),de+=O(ie,F,L,re,te);else if(fe=b(B),typeof fe=="function")for(B=fe.call(B),fe=0;!(ie=B.next()).done;)ie=ie.value,re=ae+M(ie,fe++),de+=O(ie,F,L,re,te);else if(re==="object"){if(typeof B.then=="function")return O(P(B),F,L,ie,te);throw F=String(B),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return de}function q(B,F,L){if(B==null)return B;var ie=[],te=0;return O(B,ie,"","",function(re){return F.call(L,re,te++)}),ie}function Y(B){if(B._status===-1){var F=B._result;F=F(),F.then(function(L){(B._status===0||B._status===-1)&&(B._status=1,B._result=L)},function(L){(B._status===0||B._status===-1)&&(B._status=2,B._result=L)}),B._status===-1&&(B._status=0,B._result=F)}if(B._status===1)return B._result.default;throw B._result}var Q=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},D={map:q,forEach:function(B,F,L){q(B,function(){F.apply(this,arguments)},L)},count:function(B){var F=0;return q(B,function(){F++}),F},toArray:function(B){return q(B,function(F){return F})||[]},only:function(B){if(!z(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return ke.Activity=g,ke.Children=D,ke.Component=S,ke.Fragment=i,ke.Profiler=s,ke.PureComponent=j,ke.StrictMode=o,ke.Suspense=h,ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,ke.__COMPILER_RUNTIME={__proto__:null,c:function(B){return H.H.useMemoCache(B)}},ke.cache=function(B){return function(){return B.apply(null,arguments)}},ke.cacheSignal=function(){return null},ke.cloneElement=function(B,F,L){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var ie=N({},B.props),te=B.key;if(F!=null)for(re in F.key!==void 0&&(te=""+F.key),F)!V.call(F,re)||re==="key"||re==="__self"||re==="__source"||re==="ref"&&F.ref===void 0||(ie[re]=F[re]);var re=arguments.length-2;if(re===1)ie.children=L;else if(1<re){for(var de=Array(re),ae=0;ae<re;ae++)de[ae]=arguments[ae+2];ie.children=de}return G(B.type,te,ie)},ke.createContext=function(B){return B={$$typeof:c,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:l,_context:B},B},ke.createElement=function(B,F,L){var ie,te={},re=null;if(F!=null)for(ie in F.key!==void 0&&(re=""+F.key),F)V.call(F,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(te[ie]=F[ie]);var de=arguments.length-2;if(de===1)te.children=L;else if(1<de){for(var ae=Array(de),fe=0;fe<de;fe++)ae[fe]=arguments[fe+2];te.children=ae}if(B&&B.defaultProps)for(ie in de=B.defaultProps,de)te[ie]===void 0&&(te[ie]=de[ie]);return G(B,re,te)},ke.createRef=function(){return{current:null}},ke.forwardRef=function(B){return{$$typeof:f,render:B}},ke.isValidElement=z,ke.lazy=function(B){return{$$typeof:m,_payload:{_status:-1,_result:B},_init:Y}},ke.memo=function(B,F){return{$$typeof:p,type:B,compare:F===void 0?null:F}},ke.startTransition=function(B){var F=H.T,L={};H.T=L;try{var ie=B(),te=H.S;te!==null&&te(L,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(A,Q)}catch(re){Q(re)}finally{F!==null&&L.types!==null&&(F.types=L.types),H.T=F}},ke.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},ke.use=function(B){return H.H.use(B)},ke.useActionState=function(B,F,L){return H.H.useActionState(B,F,L)},ke.useCallback=function(B,F){return H.H.useCallback(B,F)},ke.useContext=function(B){return H.H.useContext(B)},ke.useDebugValue=function(){},ke.useDeferredValue=function(B,F){return H.H.useDeferredValue(B,F)},ke.useEffect=function(B,F){return H.H.useEffect(B,F)},ke.useEffectEvent=function(B){return H.H.useEffectEvent(B)},ke.useId=function(){return H.H.useId()},ke.useImperativeHandle=function(B,F,L){return H.H.useImperativeHandle(B,F,L)},ke.useInsertionEffect=function(B,F){return H.H.useInsertionEffect(B,F)},ke.useLayoutEffect=function(B,F){return H.H.useLayoutEffect(B,F)},ke.useMemo=function(B,F){return H.H.useMemo(B,F)},ke.useOptimistic=function(B,F){return H.H.useOptimistic(B,F)},ke.useReducer=function(B,F,L){return H.H.useReducer(B,F,L)},ke.useRef=function(B){return H.H.useRef(B)},ke.useState=function(B){return H.H.useState(B)},ke.useSyncExternalStore=function(B,F,L){return H.H.useSyncExternalStore(B,F,L)},ke.useTransition=function(){return H.H.useTransition()},ke.version="19.2.3",ke}var mx;function js(){return mx||(mx=1,Af.exports=GN()),Af.exports}var T=js();const Dn=Xc(T);var Mf={exports:{}},Ga={},Df={exports:{}},_f={};var gx;function YN(){return gx||(gx=1,(function(e){function t(O,q){var Y=O.length;O.push(q);e:for(;0<Y;){var Q=Y-1>>>1,D=O[Q];if(0<s(D,q))O[Q]=q,O[Y]=D,Y=Q;else break e}}function i(O){return O.length===0?null:O[0]}function o(O){if(O.length===0)return null;var q=O[0],Y=O.pop();if(Y!==q){O[0]=Y;e:for(var Q=0,D=O.length,B=D>>>1;Q<B;){var F=2*(Q+1)-1,L=O[F],ie=F+1,te=O[ie];if(0>s(L,Y))ie<D&&0>s(te,L)?(O[Q]=te,O[ie]=Y,Q=ie):(O[Q]=L,O[F]=Y,Q=F);else if(ie<D&&0>s(te,Y))O[Q]=te,O[ie]=Y,Q=ie;else break e}}return q}function s(O,q){var Y=O.sortIndex-q.sortIndex;return Y!==0?Y:O.id-q.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();e.unstable_now=function(){return c.now()-f}}var h=[],p=[],m=1,g=null,v=3,b=!1,w=!1,N=!1,C=!1,S=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function _(O){for(var q=i(p);q!==null;){if(q.callback===null)o(p);else if(q.startTime<=O)o(p),q.sortIndex=q.expirationTime,t(h,q);else break;q=i(p)}}function $(O){if(N=!1,_(O),!w)if(i(h)!==null)w=!0,A||(A=!0,U());else{var q=i(p);q!==null&&P($,q.startTime-O)}}var A=!1,H=-1,V=5,G=-1;function I(){return C?!0:!(e.unstable_now()-G<V)}function z(){if(C=!1,A){var O=e.unstable_now();G=O;var q=!0;try{e:{w=!1,N&&(N=!1,k(H),H=-1),b=!0;var Y=v;try{t:{for(_(O),g=i(h);g!==null&&!(g.expirationTime>O&&I());){var Q=g.callback;if(typeof Q=="function"){g.callback=null,v=g.priorityLevel;var D=Q(g.expirationTime<=O);if(O=e.unstable_now(),typeof D=="function"){g.callback=D,_(O),q=!0;break t}g===i(h)&&o(h),_(O)}else o(h);g=i(h)}if(g!==null)q=!0;else{var B=i(p);B!==null&&P($,B.startTime-O),q=!1}}break e}finally{g=null,v=Y,b=!1}q=void 0}}finally{q?U():A=!1}}}var U;if(typeof j=="function")U=function(){j(z)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,M=Z.port2;Z.port1.onmessage=z,U=function(){M.postMessage(null)}}else U=function(){S(z,0)};function P(O,q){H=S(function(){O(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_next=function(O){switch(v){case 1:case 2:case 3:var q=3;break;default:q=v}var Y=v;v=q;try{return O()}finally{v=Y}},e.unstable_requestPaint=function(){C=!0},e.unstable_runWithPriority=function(O,q){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var Y=v;v=O;try{return q()}finally{v=Y}},e.unstable_scheduleCallback=function(O,q,Y){var Q=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?Q+Y:Q):Y=Q,O){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=Y+D,O={id:m++,callback:q,priorityLevel:O,startTime:Y,expirationTime:D,sortIndex:-1},Y>Q?(O.sortIndex=Y,t(p,O),i(h)===null&&O===i(p)&&(N?(k(H),H=-1):N=!0,P($,Y-Q))):(O.sortIndex=D,t(h,O),w||b||(w=!0,A||(A=!0,U()))),O},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(O){var q=v;return function(){var Y=v;v=q;try{return O.apply(this,arguments)}finally{v=Y}}}})(_f)),_f}var yx;function XN(){return yx||(yx=1,Df.exports=YN()),Df.exports}var Of={exports:{}},Lt={};var xx;function QN(){if(xx)return Lt;xx=1;var e=js();function t(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)p+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(h,p,m){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:g==null?null:""+g,children:h,containerInfo:p,implementation:m}}var c=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(h,p){if(h==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Lt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Lt.createPortal=function(h,p){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return l(h,p,null,m)},Lt.flushSync=function(h){var p=c.T,m=o.p;try{if(c.T=null,o.p=2,h)return h()}finally{c.T=p,o.p=m,o.d.f()}},Lt.preconnect=function(h,p){typeof h=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,o.d.C(h,p))},Lt.prefetchDNS=function(h){typeof h=="string"&&o.d.D(h)},Lt.preinit=function(h,p){if(typeof h=="string"&&p&&typeof p.as=="string"){var m=p.as,g=f(m,p.crossOrigin),v=typeof p.integrity=="string"?p.integrity:void 0,b=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;m==="style"?o.d.S(h,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:g,integrity:v,fetchPriority:b}):m==="script"&&o.d.X(h,{crossOrigin:g,integrity:v,fetchPriority:b,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Lt.preinitModule=function(h,p){if(typeof h=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var m=f(p.as,p.crossOrigin);o.d.M(h,{crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&o.d.M(h)},Lt.preload=function(h,p){if(typeof h=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var m=p.as,g=f(m,p.crossOrigin);o.d.L(h,m,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Lt.preloadModule=function(h,p){if(typeof h=="string")if(p){var m=f(p.as,p.crossOrigin);o.d.m(h,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else o.d.m(h)},Lt.requestFormReset=function(h){o.d.r(h)},Lt.unstable_batchedUpdates=function(h,p){return h(p)},Lt.useFormState=function(h,p,m){return c.H.useFormState(h,p,m)},Lt.useFormStatus=function(){return c.H.useHostTransitionStatus()},Lt.version="19.2.3",Lt}var vx;function Lb(){if(vx)return Of.exports;vx=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Of.exports=QN(),Of.exports}var bx;function WN(){if(bx)return Ga;bx=1;var e=XN(),t=js(),i=Lb();function o(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var r=n,a=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(a=r.return),n=r.return;while(n)}return r.tag===3?a:null}function c(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function f(n){if(n.tag===31){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function h(n){if(l(n)!==n)throw Error(o(188))}function p(n){var r=n.alternate;if(!r){if(r=l(n),r===null)throw Error(o(188));return r!==n?null:n}for(var a=n,d=r;;){var y=a.return;if(y===null)break;var x=y.alternate;if(x===null){if(d=y.return,d!==null){a=d;continue}break}if(y.child===x.child){for(x=y.child;x;){if(x===a)return h(y),n;if(x===d)return h(y),r;x=x.sibling}throw Error(o(188))}if(a.return!==d.return)a=y,d=x;else{for(var E=!1,R=y.child;R;){if(R===a){E=!0,a=y,d=x;break}if(R===d){E=!0,d=y,a=x;break}R=R.sibling}if(!E){for(R=x.child;R;){if(R===a){E=!0,a=x,d=y;break}if(R===d){E=!0,d=x,a=y;break}R=R.sibling}if(!E)throw Error(o(189))}}if(a.alternate!==d)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?n:r}function m(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=m(n),r!==null)return r;n=n.sibling}return null}var g=Object.assign,v=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),j=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),G=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function U(n){return n===null||typeof n!="object"?null:(n=z&&n[z]||n["@@iterator"],typeof n=="function"?n:null)}var Z=Symbol.for("react.client.reference");function M(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===Z?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case N:return"Fragment";case S:return"Profiler";case C:return"StrictMode";case $:return"Suspense";case A:return"SuspenseList";case G:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case w:return"Portal";case j:return n.displayName||"Context";case k:return(n._context.displayName||"Context")+".Consumer";case _:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case H:return r=n.displayName||null,r!==null?r:M(n.type)||"Memo";case V:r=n._payload,n=n._init;try{return M(n(r))}catch{}}return null}var P=Array.isArray,O=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},Q=[],D=-1;function B(n){return{current:n}}function F(n){0>D||(n.current=Q[D],Q[D]=null,D--)}function L(n,r){D++,Q[D]=n.current,n.current=r}var ie=B(null),te=B(null),re=B(null),de=B(null);function ae(n,r){switch(L(re,r),L(te,n),L(ie,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?Ly(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=Ly(r),n=zy(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}F(ie),L(ie,n)}function fe(){F(ie),F(te),F(re)}function xe(n){n.memoizedState!==null&&L(de,n);var r=ie.current,a=zy(r,n.type);r!==a&&(L(te,n),L(ie,a))}function je(n){te.current===n&&(F(ie),F(te)),de.current===n&&(F(de),Pa._currentValue=Y)}var ve,Ee;function De(n){if(ve===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);ve=r&&r[1]||"",Ee=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ve+n+Ee}var qe=!1;function Ue(n,r){if(!n||qe)return"";qe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(r){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(oe){var ne=oe}Reflect.construct(n,[],ue)}else{try{ue.call()}catch(oe){ne=oe}n.call(ue.prototype)}}else{try{throw Error()}catch(oe){ne=oe}(ue=n())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(oe){if(oe&&ne&&typeof oe.stack=="string")return[oe.stack,ne.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=d.DetermineComponentFrameRoot(),E=x[0],R=x[1];if(E&&R){var X=E.split(`
`),ee=R.split(`
`);for(y=d=0;d<X.length&&!X[d].includes("DetermineComponentFrameRoot");)d++;for(;y<ee.length&&!ee[y].includes("DetermineComponentFrameRoot");)y++;if(d===X.length||y===ee.length)for(d=X.length-1,y=ee.length-1;1<=d&&0<=y&&X[d]!==ee[y];)y--;for(;1<=d&&0<=y;d--,y--)if(X[d]!==ee[y]){if(d!==1||y!==1)do if(d--,y--,0>y||X[d]!==ee[y]){var le=`
`+X[d].replace(" at new "," at ");return n.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",n.displayName)),le}while(1<=d&&0<=y);break}}}finally{qe=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?De(a):""}function ft(n,r){switch(n.tag){case 26:case 27:case 5:return De(n.type);case 16:return De("Lazy");case 13:return n.child!==r&&r!==null?De("Suspense Fallback"):De("Suspense");case 19:return De("SuspenseList");case 0:case 15:return Ue(n.type,!1);case 11:return Ue(n.type.render,!1);case 1:return Ue(n.type,!0);case 31:return De("Activity");default:return""}}function Kt(n){try{var r="",a=null;do r+=ft(n,a),a=n,n=n.return;while(n);return r}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var _t=Object.prototype.hasOwnProperty,Pt=e.unstable_scheduleCallback,Nn=e.unstable_cancelCallback,Qn=e.unstable_shouldYield,Wn=e.unstable_requestPaint,Nt=e.unstable_now,Ei=e.unstable_getCurrentPriorityLevel,se=e.unstable_ImmediatePriority,pe=e.unstable_UserBlockingPriority,Se=e.unstable_NormalPriority,_e=e.unstable_LowPriority,$e=e.unstable_IdlePriority,Bt=e.log,En=e.unstable_setDisableYieldValue,kt=null,ht=null;function Ot(n){if(typeof Bt=="function"&&En(n),ht&&typeof ht.setStrictMode=="function")try{ht.setStrictMode(kt,n)}catch{}}var Qe=Math.clz32?Math.clz32:mu,In=Math.log,en=Math.LN2;function mu(n){return n>>>=0,n===0?32:31-(In(n)/en|0)|0}var Ur=256,Vr=262144,Fr=4194304;function Zn(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Gr(n,r,a){var d=n.pendingLanes;if(d===0)return 0;var y=0,x=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var R=d&134217727;return R!==0?(d=R&~x,d!==0?y=Zn(d):(E&=R,E!==0?y=Zn(E):a||(a=R&~n,a!==0&&(y=Zn(a))))):(R=d&~x,R!==0?y=Zn(R):E!==0?y=Zn(E):a||(a=d&~n,a!==0&&(y=Zn(a)))),y===0?0:r!==0&&r!==y&&(r&x)===0&&(x=y&-y,a=r&-r,x>=a||x===32&&(a&4194048)!==0)?r:y}function cr(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function gu(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Is(){var n=Fr;return Fr<<=1,(Fr&62914560)===0&&(Fr=4194304),n}function Jo(n){for(var r=[],a=0;31>a;a++)r.push(n);return r}function ur(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function yu(n,r,a,d,y,x){var E=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var R=n.entanglements,X=n.expirationTimes,ee=n.hiddenUpdates;for(a=E&~a;0<a;){var le=31-Qe(a),ue=1<<le;R[le]=0,X[le]=-1;var ne=ee[le];if(ne!==null)for(ee[le]=null,le=0;le<ne.length;le++){var oe=ne[le];oe!==null&&(oe.lane&=-536870913)}a&=~ue}d!==0&&Bs(n,d,0),x!==0&&y===0&&n.tag!==0&&(n.suspendedLanes|=x&~(E&~r))}function Bs(n,r,a){n.pendingLanes|=r,n.suspendedLanes&=~r;var d=31-Qe(r);n.entangledLanes|=r,n.entanglements[d]=n.entanglements[d]|1073741824|a&261930}function Hs(n,r){var a=n.entangledLanes|=r;for(n=n.entanglements;a;){var d=31-Qe(a),y=1<<d;y&r|n[d]&r&&(n[d]|=r),a&=~y}}function $s(n,r){var a=r&-r;return a=(a&42)!==0?1:Ko(a),(a&(n.suspendedLanes|r))!==0?0:a}function Ko(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function ea(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Ps(){var n=q.p;return n!==0?n:(n=window.event,n===void 0?32:ox(n.type))}function qs(n,r){var a=q.p;try{return q.p=n,r()}finally{q.p=a}}var Bn=Math.random().toString(36).slice(2),Et="__reactFiber$"+Bn,Rt="__reactProps$"+Bn,Jn="__reactContainer$"+Bn,Yr="__reactEvents$"+Bn,Us="__reactListeners$"+Bn,xu="__reactHandles$"+Bn,Vs="__reactResources$"+Bn,dr="__reactMarker$"+Bn;function ta(n){delete n[Et],delete n[Rt],delete n[Yr],delete n[Us],delete n[xu]}function ji(n){var r=n[Et];if(r)return r;for(var a=n.parentNode;a;){if(r=a[Jn]||a[Et]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(n=Uy(n);n!==null;){if(a=n[Et])return a;n=Uy(n)}return r}n=a,a=n.parentNode}return null}function Ci(n){if(n=n[Et]||n[Jn]){var r=n.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return n}return null}function ki(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(o(33))}function Ti(n){var r=n[Vs];return r||(r=n[Vs]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function gt(n){n[dr]=!0}var Fs=new Set,Gs={};function Kn(n,r){Ai(n,r),Ai(n+"Capture",r)}function Ai(n,r){for(Gs[n]=r,n=0;n<r.length;n++)Fs.add(r[n])}var vu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),na={},Ys={};function bu(n){return _t.call(Ys,n)?!0:_t.call(na,n)?!1:vu.test(n)?Ys[n]=!0:(na[n]=!0,!1)}function Xr(n,r,a){if(bu(r))if(a===null)n.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var d=r.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+a)}}function Qr(n,r,a){if(a===null)n.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+a)}}function jn(n,r,a,d){if(d===null)n.removeAttribute(a);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(r,a,""+d)}}function qt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Xs(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function wu(n,r,a){var d=Object.getOwnPropertyDescriptor(n.constructor.prototype,r);if(!n.hasOwnProperty(r)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var y=d.get,x=d.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return y.call(this)},set:function(E){a=""+E,x.call(this,E)}}),Object.defineProperty(n,r,{enumerable:d.enumerable}),{getValue:function(){return a},setValue:function(E){a=""+E},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Wr(n){if(!n._valueTracker){var r=Xs(n)?"checked":"value";n._valueTracker=wu(n,r,""+n[r])}}function Qs(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var a=r.getValue(),d="";return n&&(d=Xs(n)?n.checked?"true":"false":n.value),n=d,n!==a?(r.setValue(n),!0):!1}function fr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Su=/[\n"\\]/g;function Ut(n){return n.replace(Su,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function hr(n,r,a,d,y,x,E,R){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),r!=null?E==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+qt(r)):n.value!==""+qt(r)&&(n.value=""+qt(r)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),r!=null?ia(n,E,qt(r)):a!=null?ia(n,E,qt(a)):d!=null&&n.removeAttribute("value"),y==null&&x!=null&&(n.defaultChecked=!!x),y!=null&&(n.checked=y&&typeof y!="function"&&typeof y!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?n.name=""+qt(R):n.removeAttribute("name")}function Ws(n,r,a,d,y,x,E,R){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(n.type=x),r!=null||a!=null){if(!(x!=="submit"&&x!=="reset"||r!=null)){Wr(n);return}a=a!=null?""+qt(a):"",r=r!=null?""+qt(r):a,R||r===n.value||(n.value=r),n.defaultValue=r}d=d??y,d=typeof d!="function"&&typeof d!="symbol"&&!!d,n.checked=R?n.checked:!!d,n.defaultChecked=!!d,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E),Wr(n)}function ia(n,r,a){r==="number"&&fr(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function ei(n,r,a,d){if(n=n.options,r){r={};for(var y=0;y<a.length;y++)r["$"+a[y]]=!0;for(a=0;a<n.length;a++)y=r.hasOwnProperty("$"+n[a].value),n[a].selected!==y&&(n[a].selected=y),y&&d&&(n[a].defaultSelected=!0)}else{for(a=""+qt(a),r=null,y=0;y<n.length;y++){if(n[y].value===a){n[y].selected=!0,d&&(n[y].defaultSelected=!0);return}r!==null||n[y].disabled||(r=n[y])}r!==null&&(r.selected=!0)}}function Mp(n,r,a){if(r!=null&&(r=""+qt(r),r!==n.value&&(n.value=r),a==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=a!=null?""+qt(a):""}function Dp(n,r,a,d){if(r==null){if(d!=null){if(a!=null)throw Error(o(92));if(P(d)){if(1<d.length)throw Error(o(93));d=d[0]}a=d}a==null&&(a=""),r=a}a=qt(r),n.defaultValue=a,d=n.textContent,d===a&&d!==""&&d!==null&&(n.value=d),Wr(n)}function Zr(n,r){if(r){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=r;return}}n.textContent=r}var H1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _p(n,r,a){var d=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?d?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":d?n.setProperty(r,a):typeof a!="number"||a===0||H1.has(r)?r==="float"?n.cssFloat=a:n[r]=(""+a).trim():n[r]=a+"px"}function Op(n,r,a){if(r!=null&&typeof r!="object")throw Error(o(62));if(n=n.style,a!=null){for(var d in a)!a.hasOwnProperty(d)||r!=null&&r.hasOwnProperty(d)||(d.indexOf("--")===0?n.setProperty(d,""):d==="float"?n.cssFloat="":n[d]="");for(var y in r)d=r[y],r.hasOwnProperty(y)&&a[y]!==d&&_p(n,y,d)}else for(var x in r)r.hasOwnProperty(x)&&_p(n,x,r[x])}function Nu(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $1=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),P1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zs(n){return P1.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function ti(){}var Eu=null;function ju(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Jr=null,Kr=null;function Rp(n){var r=Ci(n);if(r&&(n=r.stateNode)){var a=n[Rt]||null;e:switch(n=r.stateNode,r.type){case"input":if(hr(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Ut(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var d=a[r];if(d!==n&&d.form===n.form){var y=d[Rt]||null;if(!y)throw Error(o(90));hr(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<a.length;r++)d=a[r],d.form===n.form&&Qs(d)}break e;case"textarea":Mp(n,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&ei(n,!!a.multiple,r,!1)}}}var Cu=!1;function Lp(n,r,a){if(Cu)return n(r,a);Cu=!0;try{var d=n(r);return d}finally{if(Cu=!1,(Jr!==null||Kr!==null)&&(Bl(),Jr&&(r=Jr,n=Kr,Kr=Jr=null,Rp(r),n)))for(r=0;r<n.length;r++)Rp(n[r])}}function ra(n,r){var a=n.stateNode;if(a===null)return null;var d=a[Rt]||null;if(d===null)return null;a=d[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(n=n.type,d=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!d;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(o(231,r,typeof a));return a}var ni=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ku=!1;if(ni)try{var oa={};Object.defineProperty(oa,"passive",{get:function(){ku=!0}}),window.addEventListener("test",oa,oa),window.removeEventListener("test",oa,oa)}catch{ku=!1}var Mi=null,Tu=null,Js=null;function zp(){if(Js)return Js;var n,r=Tu,a=r.length,d,y="value"in Mi?Mi.value:Mi.textContent,x=y.length;for(n=0;n<a&&r[n]===y[n];n++);var E=a-n;for(d=1;d<=E&&r[a-d]===y[x-d];d++);return Js=y.slice(n,1<d?1-d:void 0)}function Ks(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function el(){return!0}function Ip(){return!1}function Vt(n){function r(a,d,y,x,E){this._reactName=a,this._targetInst=y,this.type=d,this.nativeEvent=x,this.target=E,this.currentTarget=null;for(var R in n)n.hasOwnProperty(R)&&(a=n[R],this[R]=a?a(x):x[R]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?el:Ip,this.isPropagationStopped=Ip,this}return g(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=el)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=el)},persist:function(){},isPersistent:el}),r}var pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tl=Vt(pr),aa=g({},pr,{view:0,detail:0}),q1=Vt(aa),Au,Mu,sa,nl=g({},aa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_u,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==sa&&(sa&&n.type==="mousemove"?(Au=n.screenX-sa.screenX,Mu=n.screenY-sa.screenY):Mu=Au=0,sa=n),Au)},movementY:function(n){return"movementY"in n?n.movementY:Mu}}),Bp=Vt(nl),U1=g({},nl,{dataTransfer:0}),V1=Vt(U1),F1=g({},aa,{relatedTarget:0}),Du=Vt(F1),G1=g({},pr,{animationName:0,elapsedTime:0,pseudoElement:0}),Y1=Vt(G1),X1=g({},pr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Q1=Vt(X1),W1=g({},pr,{data:0}),Hp=Vt(W1),Z1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},J1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},K1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eS(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=K1[n])?!!r[n]:!1}function _u(){return eS}var tS=g({},aa,{key:function(n){if(n.key){var r=Z1[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Ks(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?J1[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_u,charCode:function(n){return n.type==="keypress"?Ks(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ks(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),nS=Vt(tS),iS=g({},nl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$p=Vt(iS),rS=g({},aa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_u}),oS=Vt(rS),aS=g({},pr,{propertyName:0,elapsedTime:0,pseudoElement:0}),sS=Vt(aS),lS=g({},nl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),cS=Vt(lS),uS=g({},pr,{newState:0,oldState:0}),dS=Vt(uS),fS=[9,13,27,32],Ou=ni&&"CompositionEvent"in window,la=null;ni&&"documentMode"in document&&(la=document.documentMode);var hS=ni&&"TextEvent"in window&&!la,Pp=ni&&(!Ou||la&&8<la&&11>=la),qp=" ",Up=!1;function Vp(n,r){switch(n){case"keyup":return fS.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var eo=!1;function pS(n,r){switch(n){case"compositionend":return Fp(r);case"keypress":return r.which!==32?null:(Up=!0,qp);case"textInput":return n=r.data,n===qp&&Up?null:n;default:return null}}function mS(n,r){if(eo)return n==="compositionend"||!Ou&&Vp(n,r)?(n=zp(),Js=Tu=Mi=null,eo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Pp&&r.locale!=="ko"?null:r.data;default:return null}}var gS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gp(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!gS[n.type]:r==="textarea"}function Yp(n,r,a,d){Jr?Kr?Kr.push(d):Kr=[d]:Jr=d,r=Fl(r,"onChange"),0<r.length&&(a=new tl("onChange","change",null,a,d),n.push({event:a,listeners:r}))}var ca=null,ua=null;function yS(n){Ay(n,0)}function il(n){var r=ki(n);if(Qs(r))return n}function Xp(n,r){if(n==="change")return r}var Qp=!1;if(ni){var Ru;if(ni){var Lu="oninput"in document;if(!Lu){var Wp=document.createElement("div");Wp.setAttribute("oninput","return;"),Lu=typeof Wp.oninput=="function"}Ru=Lu}else Ru=!1;Qp=Ru&&(!document.documentMode||9<document.documentMode)}function Zp(){ca&&(ca.detachEvent("onpropertychange",Jp),ua=ca=null)}function Jp(n){if(n.propertyName==="value"&&il(ua)){var r=[];Yp(r,ua,n,ju(n)),Lp(yS,r)}}function xS(n,r,a){n==="focusin"?(Zp(),ca=r,ua=a,ca.attachEvent("onpropertychange",Jp)):n==="focusout"&&Zp()}function vS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return il(ua)}function bS(n,r){if(n==="click")return il(r)}function wS(n,r){if(n==="input"||n==="change")return il(r)}function SS(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var tn=typeof Object.is=="function"?Object.is:SS;function da(n,r){if(tn(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var a=Object.keys(n),d=Object.keys(r);if(a.length!==d.length)return!1;for(d=0;d<a.length;d++){var y=a[d];if(!_t.call(r,y)||!tn(n[y],r[y]))return!1}return!0}function Kp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function em(n,r){var a=Kp(n);n=0;for(var d;a;){if(a.nodeType===3){if(d=n+a.textContent.length,n<=r&&d>=r)return{node:a,offset:r-n};n=d}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Kp(a)}}function tm(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?tm(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function nm(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=fr(n.document);r instanceof n.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)n=r.contentWindow;else break;r=fr(n.document)}return r}function zu(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var NS=ni&&"documentMode"in document&&11>=document.documentMode,to=null,Iu=null,fa=null,Bu=!1;function im(n,r,a){var d=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Bu||to==null||to!==fr(d)||(d=to,"selectionStart"in d&&zu(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),fa&&da(fa,d)||(fa=d,d=Fl(Iu,"onSelect"),0<d.length&&(r=new tl("onSelect","select",null,r,a),n.push({event:r,listeners:d}),r.target=to)))}function mr(n,r){var a={};return a[n.toLowerCase()]=r.toLowerCase(),a["Webkit"+n]="webkit"+r,a["Moz"+n]="moz"+r,a}var no={animationend:mr("Animation","AnimationEnd"),animationiteration:mr("Animation","AnimationIteration"),animationstart:mr("Animation","AnimationStart"),transitionrun:mr("Transition","TransitionRun"),transitionstart:mr("Transition","TransitionStart"),transitioncancel:mr("Transition","TransitionCancel"),transitionend:mr("Transition","TransitionEnd")},Hu={},rm={};ni&&(rm=document.createElement("div").style,"AnimationEvent"in window||(delete no.animationend.animation,delete no.animationiteration.animation,delete no.animationstart.animation),"TransitionEvent"in window||delete no.transitionend.transition);function gr(n){if(Hu[n])return Hu[n];if(!no[n])return n;var r=no[n],a;for(a in r)if(r.hasOwnProperty(a)&&a in rm)return Hu[n]=r[a];return n}var om=gr("animationend"),am=gr("animationiteration"),sm=gr("animationstart"),ES=gr("transitionrun"),jS=gr("transitionstart"),CS=gr("transitioncancel"),lm=gr("transitionend"),cm=new Map,$u="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");$u.push("scrollEnd");function Cn(n,r){cm.set(n,r),Kn(r,[n])}var rl=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},pn=[],io=0,Pu=0;function ol(){for(var n=io,r=Pu=io=0;r<n;){var a=pn[r];pn[r++]=null;var d=pn[r];pn[r++]=null;var y=pn[r];pn[r++]=null;var x=pn[r];if(pn[r++]=null,d!==null&&y!==null){var E=d.pending;E===null?y.next=y:(y.next=E.next,E.next=y),d.pending=y}x!==0&&um(a,y,x)}}function al(n,r,a,d){pn[io++]=n,pn[io++]=r,pn[io++]=a,pn[io++]=d,Pu|=d,n.lanes|=d,n=n.alternate,n!==null&&(n.lanes|=d)}function qu(n,r,a,d){return al(n,r,a,d),sl(n)}function yr(n,r){return al(n,null,null,r),sl(n)}function um(n,r,a){n.lanes|=a;var d=n.alternate;d!==null&&(d.lanes|=a);for(var y=!1,x=n.return;x!==null;)x.childLanes|=a,d=x.alternate,d!==null&&(d.childLanes|=a),x.tag===22&&(n=x.stateNode,n===null||n._visibility&1||(y=!0)),n=x,x=x.return;return n.tag===3?(x=n.stateNode,y&&r!==null&&(y=31-Qe(a),n=x.hiddenUpdates,d=n[y],d===null?n[y]=[r]:d.push(r),r.lane=a|536870912),x):null}function sl(n){if(50<Ra)throw Ra=0,Zd=null,Error(o(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var ro={};function kS(n,r,a,d){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nn(n,r,a,d){return new kS(n,r,a,d)}function Uu(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ii(n,r){var a=n.alternate;return a===null?(a=nn(n.tag,r,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=r,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,r=n.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function dm(n,r){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,r=a.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function ll(n,r,a,d,y,x){var E=0;if(d=n,typeof n=="function")Uu(n)&&(E=1);else if(typeof n=="string")E=_N(n,a,ie.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case G:return n=nn(31,a,r,y),n.elementType=G,n.lanes=x,n;case N:return xr(a.children,y,x,r);case C:E=8,y|=24;break;case S:return n=nn(12,a,r,y|2),n.elementType=S,n.lanes=x,n;case $:return n=nn(13,a,r,y),n.elementType=$,n.lanes=x,n;case A:return n=nn(19,a,r,y),n.elementType=A,n.lanes=x,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case j:E=10;break e;case k:E=9;break e;case _:E=11;break e;case H:E=14;break e;case V:E=16,d=null;break e}E=29,a=Error(o(130,n===null?"null":typeof n,"")),d=null}return r=nn(E,a,r,y),r.elementType=n,r.type=d,r.lanes=x,r}function xr(n,r,a,d){return n=nn(7,n,d,r),n.lanes=a,n}function Vu(n,r,a){return n=nn(6,n,null,r),n.lanes=a,n}function fm(n){var r=nn(18,null,null,0);return r.stateNode=n,r}function Fu(n,r,a){return r=nn(4,n.children!==null?n.children:[],n.key,r),r.lanes=a,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var hm=new WeakMap;function mn(n,r){if(typeof n=="object"&&n!==null){var a=hm.get(n);return a!==void 0?a:(r={value:n,source:r,stack:Kt(r)},hm.set(n,r),r)}return{value:n,source:r,stack:Kt(r)}}var oo=[],ao=0,cl=null,ha=0,gn=[],yn=0,Di=null,Hn=1,$n="";function ri(n,r){oo[ao++]=ha,oo[ao++]=cl,cl=n,ha=r}function pm(n,r,a){gn[yn++]=Hn,gn[yn++]=$n,gn[yn++]=Di,Di=n;var d=Hn;n=$n;var y=32-Qe(d)-1;d&=~(1<<y),a+=1;var x=32-Qe(r)+y;if(30<x){var E=y-y%5;x=(d&(1<<E)-1).toString(32),d>>=E,y-=E,Hn=1<<32-Qe(r)+y|a<<y|d,$n=x+n}else Hn=1<<x|a<<y|d,$n=n}function Gu(n){n.return!==null&&(ri(n,1),pm(n,1,0))}function Yu(n){for(;n===cl;)cl=oo[--ao],oo[ao]=null,ha=oo[--ao],oo[ao]=null;for(;n===Di;)Di=gn[--yn],gn[yn]=null,$n=gn[--yn],gn[yn]=null,Hn=gn[--yn],gn[yn]=null}function mm(n,r){gn[yn++]=Hn,gn[yn++]=$n,gn[yn++]=Di,Hn=r.id,$n=r.overflow,Di=n}var Tt=null,rt=null,He=!1,_i=null,xn=!1,Xu=Error(o(519));function Oi(n){var r=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw pa(mn(r,n)),Xu}function gm(n){var r=n.stateNode,a=n.type,d=n.memoizedProps;switch(r[Et]=n,r[Rt]=d,a){case"dialog":Re("cancel",r),Re("close",r);break;case"iframe":case"object":case"embed":Re("load",r);break;case"video":case"audio":for(a=0;a<za.length;a++)Re(za[a],r);break;case"source":Re("error",r);break;case"img":case"image":case"link":Re("error",r),Re("load",r);break;case"details":Re("toggle",r);break;case"input":Re("invalid",r),Ws(r,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Re("invalid",r);break;case"textarea":Re("invalid",r),Dp(r,d.value,d.defaultValue,d.children)}a=d.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||d.suppressHydrationWarning===!0||Oy(r.textContent,a)?(d.popover!=null&&(Re("beforetoggle",r),Re("toggle",r)),d.onScroll!=null&&Re("scroll",r),d.onScrollEnd!=null&&Re("scrollend",r),d.onClick!=null&&(r.onclick=ti),r=!0):r=!1,r||Oi(n,!0)}function ym(n){for(Tt=n.return;Tt;)switch(Tt.tag){case 5:case 31:case 13:xn=!1;return;case 27:case 3:xn=!0;return;default:Tt=Tt.return}}function so(n){if(n!==Tt)return!1;if(!He)return ym(n),He=!0,!1;var r=n.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||hf(n.type,n.memoizedProps)),a=!a),a&&rt&&Oi(n),ym(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));rt=qy(n)}else if(r===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));rt=qy(n)}else r===27?(r=rt,Yi(n.type)?(n=xf,xf=null,rt=n):rt=r):rt=Tt?bn(n.stateNode.nextSibling):null;return!0}function vr(){rt=Tt=null,He=!1}function Qu(){var n=_i;return n!==null&&(Xt===null?Xt=n:Xt.push.apply(Xt,n),_i=null),n}function pa(n){_i===null?_i=[n]:_i.push(n)}var Wu=B(null),br=null,oi=null;function Ri(n,r,a){L(Wu,r._currentValue),r._currentValue=a}function ai(n){n._currentValue=Wu.current,F(Wu)}function Zu(n,r,a){for(;n!==null;){var d=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,d!==null&&(d.childLanes|=r)):d!==null&&(d.childLanes&r)!==r&&(d.childLanes|=r),n===a)break;n=n.return}}function Ju(n,r,a,d){var y=n.child;for(y!==null&&(y.return=n);y!==null;){var x=y.dependencies;if(x!==null){var E=y.child;x=x.firstContext;e:for(;x!==null;){var R=x;x=y;for(var X=0;X<r.length;X++)if(R.context===r[X]){x.lanes|=a,R=x.alternate,R!==null&&(R.lanes|=a),Zu(x.return,a,n),d||(E=null);break e}x=R.next}}else if(y.tag===18){if(E=y.return,E===null)throw Error(o(341));E.lanes|=a,x=E.alternate,x!==null&&(x.lanes|=a),Zu(E,a,n),E=null}else E=y.child;if(E!==null)E.return=y;else for(E=y;E!==null;){if(E===n){E=null;break}if(y=E.sibling,y!==null){y.return=E.return,E=y;break}E=E.return}y=E}}function lo(n,r,a,d){n=null;for(var y=r,x=!1;y!==null;){if(!x){if((y.flags&524288)!==0)x=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var E=y.alternate;if(E===null)throw Error(o(387));if(E=E.memoizedProps,E!==null){var R=y.type;tn(y.pendingProps.value,E.value)||(n!==null?n.push(R):n=[R])}}else if(y===de.current){if(E=y.alternate,E===null)throw Error(o(387));E.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(n!==null?n.push(Pa):n=[Pa])}y=y.return}n!==null&&Ju(r,n,a,d),r.flags|=262144}function ul(n){for(n=n.firstContext;n!==null;){if(!tn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function wr(n){br=n,oi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function At(n){return xm(br,n)}function dl(n,r){return br===null&&wr(n),xm(n,r)}function xm(n,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},oi===null){if(n===null)throw Error(o(308));oi=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else oi=oi.next=r;return a}var TS=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(a,d){n.push(d)}};this.abort=function(){r.aborted=!0,n.forEach(function(a){return a()})}},AS=e.unstable_scheduleCallback,MS=e.unstable_NormalPriority,yt={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ku(){return{controller:new TS,data:new Map,refCount:0}}function ma(n){n.refCount--,n.refCount===0&&AS(MS,function(){n.controller.abort()})}var ga=null,ed=0,co=0,uo=null;function DS(n,r){if(ga===null){var a=ga=[];ed=0,co=rf(),uo={status:"pending",value:void 0,then:function(d){a.push(d)}}}return ed++,r.then(vm,vm),r}function vm(){if(--ed===0&&ga!==null){uo!==null&&(uo.status="fulfilled");var n=ga;ga=null,co=0,uo=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function _S(n,r){var a=[],d={status:"pending",value:null,reason:null,then:function(y){a.push(y)}};return n.then(function(){d.status="fulfilled",d.value=r;for(var y=0;y<a.length;y++)(0,a[y])(r)},function(y){for(d.status="rejected",d.reason=y,y=0;y<a.length;y++)(0,a[y])(void 0)}),d}var bm=O.S;O.S=function(n,r){iy=Nt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&DS(n,r),bm!==null&&bm(n,r)};var Sr=B(null);function td(){var n=Sr.current;return n!==null?n:tt.pooledCache}function fl(n,r){r===null?L(Sr,Sr.current):L(Sr,r.pool)}function wm(){var n=td();return n===null?null:{parent:yt._currentValue,pool:n}}var fo=Error(o(460)),nd=Error(o(474)),hl=Error(o(542)),pl={then:function(){}};function Sm(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Nm(n,r,a){switch(a=n[a],a===void 0?n.push(r):a!==r&&(r.then(ti,ti),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,jm(n),n;default:if(typeof r.status=="string")r.then(ti,ti);else{if(n=tt,n!==null&&100<n.shellSuspendCounter)throw Error(o(482));n=r,n.status="pending",n.then(function(d){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=d}},function(d){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=d}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,jm(n),n}throw Er=r,fo}}function Nr(n){try{var r=n._init;return r(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Er=a,fo):a}}var Er=null;function Em(){if(Er===null)throw Error(o(459));var n=Er;return Er=null,n}function jm(n){if(n===fo||n===hl)throw Error(o(483))}var ho=null,ya=0;function ml(n){var r=ya;return ya+=1,ho===null&&(ho=[]),Nm(ho,n,r)}function xa(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function gl(n,r){throw r.$$typeof===v?Error(o(525)):(n=Object.prototype.toString.call(r),Error(o(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function Cm(n){function r(J,W){if(n){var K=J.deletions;K===null?(J.deletions=[W],J.flags|=16):K.push(W)}}function a(J,W){if(!n)return null;for(;W!==null;)r(J,W),W=W.sibling;return null}function d(J){for(var W=new Map;J!==null;)J.key!==null?W.set(J.key,J):W.set(J.index,J),J=J.sibling;return W}function y(J,W){return J=ii(J,W),J.index=0,J.sibling=null,J}function x(J,W,K){return J.index=K,n?(K=J.alternate,K!==null?(K=K.index,K<W?(J.flags|=67108866,W):K):(J.flags|=67108866,W)):(J.flags|=1048576,W)}function E(J){return n&&J.alternate===null&&(J.flags|=67108866),J}function R(J,W,K,ce){return W===null||W.tag!==6?(W=Vu(K,J.mode,ce),W.return=J,W):(W=y(W,K),W.return=J,W)}function X(J,W,K,ce){var be=K.type;return be===N?le(J,W,K.props.children,ce,K.key):W!==null&&(W.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===V&&Nr(be)===W.type)?(W=y(W,K.props),xa(W,K),W.return=J,W):(W=ll(K.type,K.key,K.props,null,J.mode,ce),xa(W,K),W.return=J,W)}function ee(J,W,K,ce){return W===null||W.tag!==4||W.stateNode.containerInfo!==K.containerInfo||W.stateNode.implementation!==K.implementation?(W=Fu(K,J.mode,ce),W.return=J,W):(W=y(W,K.children||[]),W.return=J,W)}function le(J,W,K,ce,be){return W===null||W.tag!==7?(W=xr(K,J.mode,ce,be),W.return=J,W):(W=y(W,K),W.return=J,W)}function ue(J,W,K){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=Vu(""+W,J.mode,K),W.return=J,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case b:return K=ll(W.type,W.key,W.props,null,J.mode,K),xa(K,W),K.return=J,K;case w:return W=Fu(W,J.mode,K),W.return=J,W;case V:return W=Nr(W),ue(J,W,K)}if(P(W)||U(W))return W=xr(W,J.mode,K,null),W.return=J,W;if(typeof W.then=="function")return ue(J,ml(W),K);if(W.$$typeof===j)return ue(J,dl(J,W),K);gl(J,W)}return null}function ne(J,W,K,ce){var be=W!==null?W.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return be!==null?null:R(J,W,""+K,ce);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case b:return K.key===be?X(J,W,K,ce):null;case w:return K.key===be?ee(J,W,K,ce):null;case V:return K=Nr(K),ne(J,W,K,ce)}if(P(K)||U(K))return be!==null?null:le(J,W,K,ce,null);if(typeof K.then=="function")return ne(J,W,ml(K),ce);if(K.$$typeof===j)return ne(J,W,dl(J,K),ce);gl(J,K)}return null}function oe(J,W,K,ce,be){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return J=J.get(K)||null,R(W,J,""+ce,be);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case b:return J=J.get(ce.key===null?K:ce.key)||null,X(W,J,ce,be);case w:return J=J.get(ce.key===null?K:ce.key)||null,ee(W,J,ce,be);case V:return ce=Nr(ce),oe(J,W,K,ce,be)}if(P(ce)||U(ce))return J=J.get(K)||null,le(W,J,ce,be,null);if(typeof ce.then=="function")return oe(J,W,K,ml(ce),be);if(ce.$$typeof===j)return oe(J,W,K,dl(W,ce),be);gl(W,ce)}return null}function me(J,W,K,ce){for(var be=null,Ve=null,ye=W,Ae=W=0,Ie=null;ye!==null&&Ae<K.length;Ae++){ye.index>Ae?(Ie=ye,ye=null):Ie=ye.sibling;var Fe=ne(J,ye,K[Ae],ce);if(Fe===null){ye===null&&(ye=Ie);break}n&&ye&&Fe.alternate===null&&r(J,ye),W=x(Fe,W,Ae),Ve===null?be=Fe:Ve.sibling=Fe,Ve=Fe,ye=Ie}if(Ae===K.length)return a(J,ye),He&&ri(J,Ae),be;if(ye===null){for(;Ae<K.length;Ae++)ye=ue(J,K[Ae],ce),ye!==null&&(W=x(ye,W,Ae),Ve===null?be=ye:Ve.sibling=ye,Ve=ye);return He&&ri(J,Ae),be}for(ye=d(ye);Ae<K.length;Ae++)Ie=oe(ye,J,Ae,K[Ae],ce),Ie!==null&&(n&&Ie.alternate!==null&&ye.delete(Ie.key===null?Ae:Ie.key),W=x(Ie,W,Ae),Ve===null?be=Ie:Ve.sibling=Ie,Ve=Ie);return n&&ye.forEach(function(Ji){return r(J,Ji)}),He&&ri(J,Ae),be}function Ne(J,W,K,ce){if(K==null)throw Error(o(151));for(var be=null,Ve=null,ye=W,Ae=W=0,Ie=null,Fe=K.next();ye!==null&&!Fe.done;Ae++,Fe=K.next()){ye.index>Ae?(Ie=ye,ye=null):Ie=ye.sibling;var Ji=ne(J,ye,Fe.value,ce);if(Ji===null){ye===null&&(ye=Ie);break}n&&ye&&Ji.alternate===null&&r(J,ye),W=x(Ji,W,Ae),Ve===null?be=Ji:Ve.sibling=Ji,Ve=Ji,ye=Ie}if(Fe.done)return a(J,ye),He&&ri(J,Ae),be;if(ye===null){for(;!Fe.done;Ae++,Fe=K.next())Fe=ue(J,Fe.value,ce),Fe!==null&&(W=x(Fe,W,Ae),Ve===null?be=Fe:Ve.sibling=Fe,Ve=Fe);return He&&ri(J,Ae),be}for(ye=d(ye);!Fe.done;Ae++,Fe=K.next())Fe=oe(ye,J,Ae,Fe.value,ce),Fe!==null&&(n&&Fe.alternate!==null&&ye.delete(Fe.key===null?Ae:Fe.key),W=x(Fe,W,Ae),Ve===null?be=Fe:Ve.sibling=Fe,Ve=Fe);return n&&ye.forEach(function(UN){return r(J,UN)}),He&&ri(J,Ae),be}function et(J,W,K,ce){if(typeof K=="object"&&K!==null&&K.type===N&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case b:e:{for(var be=K.key;W!==null;){if(W.key===be){if(be=K.type,be===N){if(W.tag===7){a(J,W.sibling),ce=y(W,K.props.children),ce.return=J,J=ce;break e}}else if(W.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===V&&Nr(be)===W.type){a(J,W.sibling),ce=y(W,K.props),xa(ce,K),ce.return=J,J=ce;break e}a(J,W);break}else r(J,W);W=W.sibling}K.type===N?(ce=xr(K.props.children,J.mode,ce,K.key),ce.return=J,J=ce):(ce=ll(K.type,K.key,K.props,null,J.mode,ce),xa(ce,K),ce.return=J,J=ce)}return E(J);case w:e:{for(be=K.key;W!==null;){if(W.key===be)if(W.tag===4&&W.stateNode.containerInfo===K.containerInfo&&W.stateNode.implementation===K.implementation){a(J,W.sibling),ce=y(W,K.children||[]),ce.return=J,J=ce;break e}else{a(J,W);break}else r(J,W);W=W.sibling}ce=Fu(K,J.mode,ce),ce.return=J,J=ce}return E(J);case V:return K=Nr(K),et(J,W,K,ce)}if(P(K))return me(J,W,K,ce);if(U(K)){if(be=U(K),typeof be!="function")throw Error(o(150));return K=be.call(K),Ne(J,W,K,ce)}if(typeof K.then=="function")return et(J,W,ml(K),ce);if(K.$$typeof===j)return et(J,W,dl(J,K),ce);gl(J,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,W!==null&&W.tag===6?(a(J,W.sibling),ce=y(W,K),ce.return=J,J=ce):(a(J,W),ce=Vu(K,J.mode,ce),ce.return=J,J=ce),E(J)):a(J,W)}return function(J,W,K,ce){try{ya=0;var be=et(J,W,K,ce);return ho=null,be}catch(ye){if(ye===fo||ye===hl)throw ye;var Ve=nn(29,ye,null,J.mode);return Ve.lanes=ce,Ve.return=J,Ve}}}var jr=Cm(!0),km=Cm(!1),Li=!1;function id(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rd(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function zi(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ii(n,r,a){var d=n.updateQueue;if(d===null)return null;if(d=d.shared,(Ge&2)!==0){var y=d.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),d.pending=r,r=sl(n),um(n,null,a),r}return al(n,d,r,a),sl(n)}function va(n,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var d=r.lanes;d&=n.pendingLanes,a|=d,r.lanes=a,Hs(n,a)}}function od(n,r){var a=n.updateQueue,d=n.alternate;if(d!==null&&(d=d.updateQueue,a===d)){var y=null,x=null;if(a=a.firstBaseUpdate,a!==null){do{var E={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};x===null?y=x=E:x=x.next=E,a=a.next}while(a!==null);x===null?y=x=r:x=x.next=r}else y=x=r;a={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:x,shared:d.shared,callbacks:d.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=r:n.next=r,a.lastBaseUpdate=r}var ad=!1;function ba(){if(ad){var n=uo;if(n!==null)throw n}}function wa(n,r,a,d){ad=!1;var y=n.updateQueue;Li=!1;var x=y.firstBaseUpdate,E=y.lastBaseUpdate,R=y.shared.pending;if(R!==null){y.shared.pending=null;var X=R,ee=X.next;X.next=null,E===null?x=ee:E.next=ee,E=X;var le=n.alternate;le!==null&&(le=le.updateQueue,R=le.lastBaseUpdate,R!==E&&(R===null?le.firstBaseUpdate=ee:R.next=ee,le.lastBaseUpdate=X))}if(x!==null){var ue=y.baseState;E=0,le=ee=X=null,R=x;do{var ne=R.lane&-536870913,oe=ne!==R.lane;if(oe?(ze&ne)===ne:(d&ne)===ne){ne!==0&&ne===co&&(ad=!0),le!==null&&(le=le.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var me=n,Ne=R;ne=r;var et=a;switch(Ne.tag){case 1:if(me=Ne.payload,typeof me=="function"){ue=me.call(et,ue,ne);break e}ue=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=Ne.payload,ne=typeof me=="function"?me.call(et,ue,ne):me,ne==null)break e;ue=g({},ue,ne);break e;case 2:Li=!0}}ne=R.callback,ne!==null&&(n.flags|=64,oe&&(n.flags|=8192),oe=y.callbacks,oe===null?y.callbacks=[ne]:oe.push(ne))}else oe={lane:ne,tag:R.tag,payload:R.payload,callback:R.callback,next:null},le===null?(ee=le=oe,X=ue):le=le.next=oe,E|=ne;if(R=R.next,R===null){if(R=y.shared.pending,R===null)break;oe=R,R=oe.next,oe.next=null,y.lastBaseUpdate=oe,y.shared.pending=null}}while(!0);le===null&&(X=ue),y.baseState=X,y.firstBaseUpdate=ee,y.lastBaseUpdate=le,x===null&&(y.shared.lanes=0),qi|=E,n.lanes=E,n.memoizedState=ue}}function Tm(n,r){if(typeof n!="function")throw Error(o(191,n));n.call(r)}function Am(n,r){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)Tm(a[n],r)}var po=B(null),yl=B(0);function Mm(n,r){n=mi,L(yl,n),L(po,r),mi=n|r.baseLanes}function sd(){L(yl,mi),L(po,po.current)}function ld(){mi=yl.current,F(po),F(yl)}var rn=B(null),vn=null;function Bi(n){var r=n.alternate;L(pt,pt.current&1),L(rn,n),vn===null&&(r===null||po.current!==null||r.memoizedState!==null)&&(vn=n)}function cd(n){L(pt,pt.current),L(rn,n),vn===null&&(vn=n)}function Dm(n){n.tag===22?(L(pt,pt.current),L(rn,n),vn===null&&(vn=n)):Hi()}function Hi(){L(pt,pt.current),L(rn,rn.current)}function on(n){F(rn),vn===n&&(vn=null),F(pt)}var pt=B(0);function xl(n){for(var r=n;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||gf(a)||yf(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var si=0,Te=null,Je=null,xt=null,vl=!1,mo=!1,Cr=!1,bl=0,Sa=0,go=null,OS=0;function ut(){throw Error(o(321))}function ud(n,r){if(r===null)return!1;for(var a=0;a<r.length&&a<n.length;a++)if(!tn(n[a],r[a]))return!1;return!0}function dd(n,r,a,d,y,x){return si=x,Te=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,O.H=n===null||n.memoizedState===null?pg:Cd,Cr=!1,x=a(d,y),Cr=!1,mo&&(x=Om(r,a,d,y)),_m(n),x}function _m(n){O.H=ja;var r=Je!==null&&Je.next!==null;if(si=0,xt=Je=Te=null,vl=!1,Sa=0,go=null,r)throw Error(o(300));n===null||vt||(n=n.dependencies,n!==null&&ul(n)&&(vt=!0))}function Om(n,r,a,d){Te=n;var y=0;do{if(mo&&(go=null),Sa=0,mo=!1,25<=y)throw Error(o(301));if(y+=1,xt=Je=null,n.updateQueue!=null){var x=n.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}O.H=mg,x=r(a,d)}while(mo);return x}function RS(){var n=O.H,r=n.useState()[0];return r=typeof r.then=="function"?Na(r):r,n=n.useState()[0],(Je!==null?Je.memoizedState:null)!==n&&(Te.flags|=1024),r}function fd(){var n=bl!==0;return bl=0,n}function hd(n,r,a){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~a}function pd(n){if(vl){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}vl=!1}si=0,xt=Je=Te=null,mo=!1,Sa=bl=0,go=null}function Ht(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?Te.memoizedState=xt=n:xt=xt.next=n,xt}function mt(){if(Je===null){var n=Te.alternate;n=n!==null?n.memoizedState:null}else n=Je.next;var r=xt===null?Te.memoizedState:xt.next;if(r!==null)xt=r,Je=n;else{if(n===null)throw Te.alternate===null?Error(o(467)):Error(o(310));Je=n,n={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},xt===null?Te.memoizedState=xt=n:xt=xt.next=n}return xt}function wl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Na(n){var r=Sa;return Sa+=1,go===null&&(go=[]),n=Nm(go,n,r),r=Te,(xt===null?r.memoizedState:xt.next)===null&&(r=r.alternate,O.H=r===null||r.memoizedState===null?pg:Cd),n}function Sl(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Na(n);if(n.$$typeof===j)return At(n)}throw Error(o(438,String(n)))}function md(n){var r=null,a=Te.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var d=Te.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(r={data:d.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=wl(),Te.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(n),d=0;d<n;d++)a[d]=I;return r.index++,a}function li(n,r){return typeof r=="function"?r(n):r}function Nl(n){var r=mt();return gd(r,Je,n)}function gd(n,r,a){var d=n.queue;if(d===null)throw Error(o(311));d.lastRenderedReducer=a;var y=n.baseQueue,x=d.pending;if(x!==null){if(y!==null){var E=y.next;y.next=x.next,x.next=E}r.baseQueue=y=x,d.pending=null}if(x=n.baseState,y===null)n.memoizedState=x;else{r=y.next;var R=E=null,X=null,ee=r,le=!1;do{var ue=ee.lane&-536870913;if(ue!==ee.lane?(ze&ue)===ue:(si&ue)===ue){var ne=ee.revertLane;if(ne===0)X!==null&&(X=X.next={lane:0,revertLane:0,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),ue===co&&(le=!0);else if((si&ne)===ne){ee=ee.next,ne===co&&(le=!0);continue}else ue={lane:0,revertLane:ee.revertLane,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},X===null?(R=X=ue,E=x):X=X.next=ue,Te.lanes|=ne,qi|=ne;ue=ee.action,Cr&&a(x,ue),x=ee.hasEagerState?ee.eagerState:a(x,ue)}else ne={lane:ue,revertLane:ee.revertLane,gesture:ee.gesture,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},X===null?(R=X=ne,E=x):X=X.next=ne,Te.lanes|=ue,qi|=ue;ee=ee.next}while(ee!==null&&ee!==r);if(X===null?E=x:X.next=R,!tn(x,n.memoizedState)&&(vt=!0,le&&(a=uo,a!==null)))throw a;n.memoizedState=x,n.baseState=E,n.baseQueue=X,d.lastRenderedState=x}return y===null&&(d.lanes=0),[n.memoizedState,d.dispatch]}function yd(n){var r=mt(),a=r.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=n;var d=a.dispatch,y=a.pending,x=r.memoizedState;if(y!==null){a.pending=null;var E=y=y.next;do x=n(x,E.action),E=E.next;while(E!==y);tn(x,r.memoizedState)||(vt=!0),r.memoizedState=x,r.baseQueue===null&&(r.baseState=x),a.lastRenderedState=x}return[x,d]}function Rm(n,r,a){var d=Te,y=mt(),x=He;if(x){if(a===void 0)throw Error(o(407));a=a()}else a=r();var E=!tn((Je||y).memoizedState,a);if(E&&(y.memoizedState=a,vt=!0),y=y.queue,bd(Im.bind(null,d,y,n),[n]),y.getSnapshot!==r||E||xt!==null&&xt.memoizedState.tag&1){if(d.flags|=2048,yo(9,{destroy:void 0},zm.bind(null,d,y,a,r),null),tt===null)throw Error(o(349));x||(si&127)!==0||Lm(d,r,a)}return a}function Lm(n,r,a){n.flags|=16384,n={getSnapshot:r,value:a},r=Te.updateQueue,r===null?(r=wl(),Te.updateQueue=r,r.stores=[n]):(a=r.stores,a===null?r.stores=[n]:a.push(n))}function zm(n,r,a,d){r.value=a,r.getSnapshot=d,Bm(r)&&Hm(n)}function Im(n,r,a){return a(function(){Bm(r)&&Hm(n)})}function Bm(n){var r=n.getSnapshot;n=n.value;try{var a=r();return!tn(n,a)}catch{return!0}}function Hm(n){var r=yr(n,2);r!==null&&Qt(r,n,2)}function xd(n){var r=Ht();if(typeof n=="function"){var a=n;if(n=a(),Cr){Ot(!0);try{a()}finally{Ot(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:n},r}function $m(n,r,a,d){return n.baseState=a,gd(n,Je,typeof d=="function"?d:li)}function LS(n,r,a,d,y){if(Cl(n))throw Error(o(485));if(n=r.action,n!==null){var x={payload:y,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){x.listeners.push(E)}};O.T!==null?a(!0):x.isTransition=!1,d(x),a=r.pending,a===null?(x.next=r.pending=x,Pm(r,x)):(x.next=a.next,r.pending=a.next=x)}}function Pm(n,r){var a=r.action,d=r.payload,y=n.state;if(r.isTransition){var x=O.T,E={};O.T=E;try{var R=a(y,d),X=O.S;X!==null&&X(E,R),qm(n,r,R)}catch(ee){vd(n,r,ee)}finally{x!==null&&E.types!==null&&(x.types=E.types),O.T=x}}else try{x=a(y,d),qm(n,r,x)}catch(ee){vd(n,r,ee)}}function qm(n,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(d){Um(n,r,d)},function(d){return vd(n,r,d)}):Um(n,r,a)}function Um(n,r,a){r.status="fulfilled",r.value=a,Vm(r),n.state=a,r=n.pending,r!==null&&(a=r.next,a===r?n.pending=null:(a=a.next,r.next=a,Pm(n,a)))}function vd(n,r,a){var d=n.pending;if(n.pending=null,d!==null){d=d.next;do r.status="rejected",r.reason=a,Vm(r),r=r.next;while(r!==d)}n.action=null}function Vm(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function Fm(n,r){return r}function Gm(n,r){if(He){var a=tt.formState;if(a!==null){e:{var d=Te;if(He){if(rt){t:{for(var y=rt,x=xn;y.nodeType!==8;){if(!x){y=null;break t}if(y=bn(y.nextSibling),y===null){y=null;break t}}x=y.data,y=x==="F!"||x==="F"?y:null}if(y){rt=bn(y.nextSibling),d=y.data==="F!";break e}}Oi(d)}d=!1}d&&(r=a[0])}}return a=Ht(),a.memoizedState=a.baseState=r,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fm,lastRenderedState:r},a.queue=d,a=dg.bind(null,Te,d),d.dispatch=a,d=xd(!1),x=jd.bind(null,Te,!1,d.queue),d=Ht(),y={state:r,dispatch:null,action:n,pending:null},d.queue=y,a=LS.bind(null,Te,y,x,a),y.dispatch=a,d.memoizedState=n,[r,a,!1]}function Ym(n){var r=mt();return Xm(r,Je,n)}function Xm(n,r,a){if(r=gd(n,r,Fm)[0],n=Nl(li)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var d=Na(r)}catch(E){throw E===fo?hl:E}else d=r;r=mt();var y=r.queue,x=y.dispatch;return a!==r.memoizedState&&(Te.flags|=2048,yo(9,{destroy:void 0},zS.bind(null,y,a),null)),[d,x,n]}function zS(n,r){n.action=r}function Qm(n){var r=mt(),a=Je;if(a!==null)return Xm(r,a,n);mt(),r=r.memoizedState,a=mt();var d=a.queue.dispatch;return a.memoizedState=n,[r,d,!1]}function yo(n,r,a,d){return n={tag:n,create:a,deps:d,inst:r,next:null},r=Te.updateQueue,r===null&&(r=wl(),Te.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=n.next=n:(d=a.next,a.next=n,n.next=d,r.lastEffect=n),n}function Wm(){return mt().memoizedState}function El(n,r,a,d){var y=Ht();Te.flags|=n,y.memoizedState=yo(1|r,{destroy:void 0},a,d===void 0?null:d)}function jl(n,r,a,d){var y=mt();d=d===void 0?null:d;var x=y.memoizedState.inst;Je!==null&&d!==null&&ud(d,Je.memoizedState.deps)?y.memoizedState=yo(r,x,a,d):(Te.flags|=n,y.memoizedState=yo(1|r,x,a,d))}function Zm(n,r){El(8390656,8,n,r)}function bd(n,r){jl(2048,8,n,r)}function IS(n){Te.flags|=4;var r=Te.updateQueue;if(r===null)r=wl(),Te.updateQueue=r,r.events=[n];else{var a=r.events;a===null?r.events=[n]:a.push(n)}}function Jm(n){var r=mt().memoizedState;return IS({ref:r,nextImpl:n}),function(){if((Ge&2)!==0)throw Error(o(440));return r.impl.apply(void 0,arguments)}}function Km(n,r){return jl(4,2,n,r)}function eg(n,r){return jl(4,4,n,r)}function tg(n,r){if(typeof r=="function"){n=n();var a=r(n);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function ng(n,r,a){a=a!=null?a.concat([n]):null,jl(4,4,tg.bind(null,r,n),a)}function wd(){}function ig(n,r){var a=mt();r=r===void 0?null:r;var d=a.memoizedState;return r!==null&&ud(r,d[1])?d[0]:(a.memoizedState=[n,r],n)}function rg(n,r){var a=mt();r=r===void 0?null:r;var d=a.memoizedState;if(r!==null&&ud(r,d[1]))return d[0];if(d=n(),Cr){Ot(!0);try{n()}finally{Ot(!1)}}return a.memoizedState=[d,r],d}function Sd(n,r,a){return a===void 0||(si&1073741824)!==0&&(ze&261930)===0?n.memoizedState=r:(n.memoizedState=a,n=oy(),Te.lanes|=n,qi|=n,a)}function og(n,r,a,d){return tn(a,r)?a:po.current!==null?(n=Sd(n,a,d),tn(n,r)||(vt=!0),n):(si&42)===0||(si&1073741824)!==0&&(ze&261930)===0?(vt=!0,n.memoizedState=a):(n=oy(),Te.lanes|=n,qi|=n,r)}function ag(n,r,a,d,y){var x=q.p;q.p=x!==0&&8>x?x:8;var E=O.T,R={};O.T=R,jd(n,!1,r,a);try{var X=y(),ee=O.S;if(ee!==null&&ee(R,X),X!==null&&typeof X=="object"&&typeof X.then=="function"){var le=_S(X,d);Ea(n,r,le,ln(n))}else Ea(n,r,d,ln(n))}catch(ue){Ea(n,r,{then:function(){},status:"rejected",reason:ue},ln())}finally{q.p=x,E!==null&&R.types!==null&&(E.types=R.types),O.T=E}}function BS(){}function Nd(n,r,a,d){if(n.tag!==5)throw Error(o(476));var y=sg(n).queue;ag(n,y,r,Y,a===null?BS:function(){return lg(n),a(d)})}function sg(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:Y},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:a},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function lg(n){var r=sg(n);r.next===null&&(r=n.alternate.memoizedState),Ea(n,r.next.queue,{},ln())}function Ed(){return At(Pa)}function cg(){return mt().memoizedState}function ug(){return mt().memoizedState}function HS(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var a=ln();n=zi(a);var d=Ii(r,n,a);d!==null&&(Qt(d,r,a),va(d,r,a)),r={cache:Ku()},n.payload=r;return}r=r.return}}function $S(n,r,a){var d=ln();a={lane:d,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Cl(n)?fg(r,a):(a=qu(n,r,a,d),a!==null&&(Qt(a,n,d),hg(a,r,d)))}function dg(n,r,a){var d=ln();Ea(n,r,a,d)}function Ea(n,r,a,d){var y={lane:d,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Cl(n))fg(r,y);else{var x=n.alternate;if(n.lanes===0&&(x===null||x.lanes===0)&&(x=r.lastRenderedReducer,x!==null))try{var E=r.lastRenderedState,R=x(E,a);if(y.hasEagerState=!0,y.eagerState=R,tn(R,E))return al(n,r,y,0),tt===null&&ol(),!1}catch{}if(a=qu(n,r,y,d),a!==null)return Qt(a,n,d),hg(a,r,d),!0}return!1}function jd(n,r,a,d){if(d={lane:2,revertLane:rf(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Cl(n)){if(r)throw Error(o(479))}else r=qu(n,a,d,2),r!==null&&Qt(r,n,2)}function Cl(n){var r=n.alternate;return n===Te||r!==null&&r===Te}function fg(n,r){mo=vl=!0;var a=n.pending;a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r}function hg(n,r,a){if((a&4194048)!==0){var d=r.lanes;d&=n.pendingLanes,a|=d,r.lanes=a,Hs(n,a)}}var ja={readContext:At,use:Sl,useCallback:ut,useContext:ut,useEffect:ut,useImperativeHandle:ut,useLayoutEffect:ut,useInsertionEffect:ut,useMemo:ut,useReducer:ut,useRef:ut,useState:ut,useDebugValue:ut,useDeferredValue:ut,useTransition:ut,useSyncExternalStore:ut,useId:ut,useHostTransitionStatus:ut,useFormState:ut,useActionState:ut,useOptimistic:ut,useMemoCache:ut,useCacheRefresh:ut};ja.useEffectEvent=ut;var pg={readContext:At,use:Sl,useCallback:function(n,r){return Ht().memoizedState=[n,r===void 0?null:r],n},useContext:At,useEffect:Zm,useImperativeHandle:function(n,r,a){a=a!=null?a.concat([n]):null,El(4194308,4,tg.bind(null,r,n),a)},useLayoutEffect:function(n,r){return El(4194308,4,n,r)},useInsertionEffect:function(n,r){El(4,2,n,r)},useMemo:function(n,r){var a=Ht();r=r===void 0?null:r;var d=n();if(Cr){Ot(!0);try{n()}finally{Ot(!1)}}return a.memoizedState=[d,r],d},useReducer:function(n,r,a){var d=Ht();if(a!==void 0){var y=a(r);if(Cr){Ot(!0);try{a(r)}finally{Ot(!1)}}}else y=r;return d.memoizedState=d.baseState=y,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:y},d.queue=n,n=n.dispatch=$S.bind(null,Te,n),[d.memoizedState,n]},useRef:function(n){var r=Ht();return n={current:n},r.memoizedState=n},useState:function(n){n=xd(n);var r=n.queue,a=dg.bind(null,Te,r);return r.dispatch=a,[n.memoizedState,a]},useDebugValue:wd,useDeferredValue:function(n,r){var a=Ht();return Sd(a,n,r)},useTransition:function(){var n=xd(!1);return n=ag.bind(null,Te,n.queue,!0,!1),Ht().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,a){var d=Te,y=Ht();if(He){if(a===void 0)throw Error(o(407));a=a()}else{if(a=r(),tt===null)throw Error(o(349));(ze&127)!==0||Lm(d,r,a)}y.memoizedState=a;var x={value:a,getSnapshot:r};return y.queue=x,Zm(Im.bind(null,d,x,n),[n]),d.flags|=2048,yo(9,{destroy:void 0},zm.bind(null,d,x,a,r),null),a},useId:function(){var n=Ht(),r=tt.identifierPrefix;if(He){var a=$n,d=Hn;a=(d&~(1<<32-Qe(d)-1)).toString(32)+a,r="_"+r+"R_"+a,a=bl++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=OS++,r="_"+r+"r_"+a.toString(32)+"_";return n.memoizedState=r},useHostTransitionStatus:Ed,useFormState:Gm,useActionState:Gm,useOptimistic:function(n){var r=Ht();r.memoizedState=r.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=jd.bind(null,Te,!0,a),a.dispatch=r,[n,r]},useMemoCache:md,useCacheRefresh:function(){return Ht().memoizedState=HS.bind(null,Te)},useEffectEvent:function(n){var r=Ht(),a={impl:n};return r.memoizedState=a,function(){if((Ge&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}},Cd={readContext:At,use:Sl,useCallback:ig,useContext:At,useEffect:bd,useImperativeHandle:ng,useInsertionEffect:Km,useLayoutEffect:eg,useMemo:rg,useReducer:Nl,useRef:Wm,useState:function(){return Nl(li)},useDebugValue:wd,useDeferredValue:function(n,r){var a=mt();return og(a,Je.memoizedState,n,r)},useTransition:function(){var n=Nl(li)[0],r=mt().memoizedState;return[typeof n=="boolean"?n:Na(n),r]},useSyncExternalStore:Rm,useId:cg,useHostTransitionStatus:Ed,useFormState:Ym,useActionState:Ym,useOptimistic:function(n,r){var a=mt();return $m(a,Je,n,r)},useMemoCache:md,useCacheRefresh:ug};Cd.useEffectEvent=Jm;var mg={readContext:At,use:Sl,useCallback:ig,useContext:At,useEffect:bd,useImperativeHandle:ng,useInsertionEffect:Km,useLayoutEffect:eg,useMemo:rg,useReducer:yd,useRef:Wm,useState:function(){return yd(li)},useDebugValue:wd,useDeferredValue:function(n,r){var a=mt();return Je===null?Sd(a,n,r):og(a,Je.memoizedState,n,r)},useTransition:function(){var n=yd(li)[0],r=mt().memoizedState;return[typeof n=="boolean"?n:Na(n),r]},useSyncExternalStore:Rm,useId:cg,useHostTransitionStatus:Ed,useFormState:Qm,useActionState:Qm,useOptimistic:function(n,r){var a=mt();return Je!==null?$m(a,Je,n,r):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:md,useCacheRefresh:ug};mg.useEffectEvent=Jm;function kd(n,r,a,d){r=n.memoizedState,a=a(d,r),a=a==null?r:g({},r,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Td={enqueueSetState:function(n,r,a){n=n._reactInternals;var d=ln(),y=zi(d);y.payload=r,a!=null&&(y.callback=a),r=Ii(n,y,d),r!==null&&(Qt(r,n,d),va(r,n,d))},enqueueReplaceState:function(n,r,a){n=n._reactInternals;var d=ln(),y=zi(d);y.tag=1,y.payload=r,a!=null&&(y.callback=a),r=Ii(n,y,d),r!==null&&(Qt(r,n,d),va(r,n,d))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var a=ln(),d=zi(a);d.tag=2,r!=null&&(d.callback=r),r=Ii(n,d,a),r!==null&&(Qt(r,n,a),va(r,n,a))}};function gg(n,r,a,d,y,x,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(d,x,E):r.prototype&&r.prototype.isPureReactComponent?!da(a,d)||!da(y,x):!0}function yg(n,r,a,d){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,d),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,d),r.state!==n&&Td.enqueueReplaceState(r,r.state,null)}function kr(n,r){var a=r;if("ref"in r){a={};for(var d in r)d!=="ref"&&(a[d]=r[d])}if(n=n.defaultProps){a===r&&(a=g({},a));for(var y in n)a[y]===void 0&&(a[y]=n[y])}return a}function xg(n){rl(n)}function vg(n){console.error(n)}function bg(n){rl(n)}function kl(n,r){try{var a=n.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(d){setTimeout(function(){throw d})}}function wg(n,r,a){try{var d=n.onCaughtError;d(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Ad(n,r,a){return a=zi(a),a.tag=3,a.payload={element:null},a.callback=function(){kl(n,r)},a}function Sg(n){return n=zi(n),n.tag=3,n}function Ng(n,r,a,d){var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var x=d.value;n.payload=function(){return y(x)},n.callback=function(){wg(r,a,d)}}var E=a.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){wg(r,a,d),typeof y!="function"&&(Ui===null?Ui=new Set([this]):Ui.add(this));var R=d.stack;this.componentDidCatch(d.value,{componentStack:R!==null?R:""})})}function PS(n,r,a,d,y){if(a.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(r=a.alternate,r!==null&&lo(r,a,y,!0),a=rn.current,a!==null){switch(a.tag){case 31:case 13:return vn===null?Hl():a.alternate===null&&dt===0&&(dt=3),a.flags&=-257,a.flags|=65536,a.lanes=y,d===pl?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([d]):r.add(d),ef(n,d,y)),!1;case 22:return a.flags|=65536,d===pl?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([d])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([d]):a.add(d)),ef(n,d,y)),!1}throw Error(o(435,a.tag))}return ef(n,d,y),Hl(),!1}if(He)return r=rn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,d!==Xu&&(n=Error(o(422),{cause:d}),pa(mn(n,a)))):(d!==Xu&&(r=Error(o(423),{cause:d}),pa(mn(r,a))),n=n.current.alternate,n.flags|=65536,y&=-y,n.lanes|=y,d=mn(d,a),y=Ad(n.stateNode,d,y),od(n,y),dt!==4&&(dt=2)),!1;var x=Error(o(520),{cause:d});if(x=mn(x,a),Oa===null?Oa=[x]:Oa.push(x),dt!==4&&(dt=2),r===null)return!0;d=mn(d,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,n=y&-y,a.lanes|=n,n=Ad(a.stateNode,d,n),od(a,n),!1;case 1:if(r=a.type,x=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ui===null||!Ui.has(x))))return a.flags|=65536,y&=-y,a.lanes|=y,y=Sg(y),Ng(y,n,a,d),od(a,y),!1}a=a.return}while(a!==null);return!1}var Md=Error(o(461)),vt=!1;function Mt(n,r,a,d){r.child=n===null?km(r,null,a,d):jr(r,n.child,a,d)}function Eg(n,r,a,d,y){a=a.render;var x=r.ref;if("ref"in d){var E={};for(var R in d)R!=="ref"&&(E[R]=d[R])}else E=d;return wr(r),d=dd(n,r,a,E,x,y),R=fd(),n!==null&&!vt?(hd(n,r,y),ci(n,r,y)):(He&&R&&Gu(r),r.flags|=1,Mt(n,r,d,y),r.child)}function jg(n,r,a,d,y){if(n===null){var x=a.type;return typeof x=="function"&&!Uu(x)&&x.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=x,Cg(n,r,x,d,y)):(n=ll(a.type,null,d,r,r.mode,y),n.ref=r.ref,n.return=r,r.child=n)}if(x=n.child,!Bd(n,y)){var E=x.memoizedProps;if(a=a.compare,a=a!==null?a:da,a(E,d)&&n.ref===r.ref)return ci(n,r,y)}return r.flags|=1,n=ii(x,d),n.ref=r.ref,n.return=r,r.child=n}function Cg(n,r,a,d,y){if(n!==null){var x=n.memoizedProps;if(da(x,d)&&n.ref===r.ref)if(vt=!1,r.pendingProps=d=x,Bd(n,y))(n.flags&131072)!==0&&(vt=!0);else return r.lanes=n.lanes,ci(n,r,y)}return Dd(n,r,a,d,y)}function kg(n,r,a,d){var y=d.children,x=n!==null?n.memoizedState:null;if(n===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((r.flags&128)!==0){if(x=x!==null?x.baseLanes|a:a,n!==null){for(d=r.child=n.child,y=0;d!==null;)y=y|d.lanes|d.childLanes,d=d.sibling;d=y&~x}else d=0,r.child=null;return Tg(n,r,x,a,d)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&fl(r,x!==null?x.cachePool:null),x!==null?Mm(r,x):sd(),Dm(r);else return d=r.lanes=536870912,Tg(n,r,x!==null?x.baseLanes|a:a,a,d)}else x!==null?(fl(r,x.cachePool),Mm(r,x),Hi(),r.memoizedState=null):(n!==null&&fl(r,null),sd(),Hi());return Mt(n,r,y,a),r.child}function Ca(n,r){return n!==null&&n.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Tg(n,r,a,d,y){var x=td();return x=x===null?null:{parent:yt._currentValue,pool:x},r.memoizedState={baseLanes:a,cachePool:x},n!==null&&fl(r,null),sd(),Dm(r),n!==null&&lo(n,r,d,!0),r.childLanes=y,null}function Tl(n,r){return r=Ml({mode:r.mode,children:r.children},n.mode),r.ref=n.ref,n.child=r,r.return=n,r}function Ag(n,r,a){return jr(r,n.child,null,a),n=Tl(r,r.pendingProps),n.flags|=2,on(r),r.memoizedState=null,n}function qS(n,r,a){var d=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,n===null){if(He){if(d.mode==="hidden")return n=Tl(r,d),r.lanes=536870912,Ca(null,n);if(cd(r),(n=rt)?(n=Py(n,xn),n=n!==null&&n.data==="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:Di!==null?{id:Hn,overflow:$n}:null,retryLane:536870912,hydrationErrors:null},a=fm(n),a.return=r,r.child=a,Tt=r,rt=null)):n=null,n===null)throw Oi(r);return r.lanes=536870912,null}return Tl(r,d)}var x=n.memoizedState;if(x!==null){var E=x.dehydrated;if(cd(r),y)if(r.flags&256)r.flags&=-257,r=Ag(n,r,a);else if(r.memoizedState!==null)r.child=n.child,r.flags|=128,r=null;else throw Error(o(558));else if(vt||lo(n,r,a,!1),y=(a&n.childLanes)!==0,vt||y){if(d=tt,d!==null&&(E=$s(d,a),E!==0&&E!==x.retryLane))throw x.retryLane=E,yr(n,E),Qt(d,n,E),Md;Hl(),r=Ag(n,r,a)}else n=x.treeContext,rt=bn(E.nextSibling),Tt=r,He=!0,_i=null,xn=!1,n!==null&&mm(r,n),r=Tl(r,d),r.flags|=4096;return r}return n=ii(n.child,{mode:d.mode,children:d.children}),n.ref=r.ref,r.child=n,n.return=r,n}function Al(n,r){var a=r.ref;if(a===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(n===null||n.ref!==a)&&(r.flags|=4194816)}}function Dd(n,r,a,d,y){return wr(r),a=dd(n,r,a,d,void 0,y),d=fd(),n!==null&&!vt?(hd(n,r,y),ci(n,r,y)):(He&&d&&Gu(r),r.flags|=1,Mt(n,r,a,y),r.child)}function Mg(n,r,a,d,y,x){return wr(r),r.updateQueue=null,a=Om(r,d,a,y),_m(n),d=fd(),n!==null&&!vt?(hd(n,r,x),ci(n,r,x)):(He&&d&&Gu(r),r.flags|=1,Mt(n,r,a,x),r.child)}function Dg(n,r,a,d,y){if(wr(r),r.stateNode===null){var x=ro,E=a.contextType;typeof E=="object"&&E!==null&&(x=At(E)),x=new a(d,x),r.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=Td,r.stateNode=x,x._reactInternals=r,x=r.stateNode,x.props=d,x.state=r.memoizedState,x.refs={},id(r),E=a.contextType,x.context=typeof E=="object"&&E!==null?At(E):ro,x.state=r.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(kd(r,a,E,d),x.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(E=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),E!==x.state&&Td.enqueueReplaceState(x,x.state,null),wa(r,d,x,y),ba(),x.state=r.memoizedState),typeof x.componentDidMount=="function"&&(r.flags|=4194308),d=!0}else if(n===null){x=r.stateNode;var R=r.memoizedProps,X=kr(a,R);x.props=X;var ee=x.context,le=a.contextType;E=ro,typeof le=="object"&&le!==null&&(E=At(le));var ue=a.getDerivedStateFromProps;le=typeof ue=="function"||typeof x.getSnapshotBeforeUpdate=="function",R=r.pendingProps!==R,le||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(R||ee!==E)&&yg(r,x,d,E),Li=!1;var ne=r.memoizedState;x.state=ne,wa(r,d,x,y),ba(),ee=r.memoizedState,R||ne!==ee||Li?(typeof ue=="function"&&(kd(r,a,ue,d),ee=r.memoizedState),(X=Li||gg(r,a,X,d,ne,ee,E))?(le||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(r.flags|=4194308)):(typeof x.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=d,r.memoizedState=ee),x.props=d,x.state=ee,x.context=E,d=X):(typeof x.componentDidMount=="function"&&(r.flags|=4194308),d=!1)}else{x=r.stateNode,rd(n,r),E=r.memoizedProps,le=kr(a,E),x.props=le,ue=r.pendingProps,ne=x.context,ee=a.contextType,X=ro,typeof ee=="object"&&ee!==null&&(X=At(ee)),R=a.getDerivedStateFromProps,(ee=typeof R=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(E!==ue||ne!==X)&&yg(r,x,d,X),Li=!1,ne=r.memoizedState,x.state=ne,wa(r,d,x,y),ba();var oe=r.memoizedState;E!==ue||ne!==oe||Li||n!==null&&n.dependencies!==null&&ul(n.dependencies)?(typeof R=="function"&&(kd(r,a,R,d),oe=r.memoizedState),(le=Li||gg(r,a,le,d,ne,oe,X)||n!==null&&n.dependencies!==null&&ul(n.dependencies))?(ee||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(d,oe,X),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(d,oe,X)),typeof x.componentDidUpdate=="function"&&(r.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof x.componentDidUpdate!="function"||E===n.memoizedProps&&ne===n.memoizedState||(r.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&ne===n.memoizedState||(r.flags|=1024),r.memoizedProps=d,r.memoizedState=oe),x.props=d,x.state=oe,x.context=X,d=le):(typeof x.componentDidUpdate!="function"||E===n.memoizedProps&&ne===n.memoizedState||(r.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&ne===n.memoizedState||(r.flags|=1024),d=!1)}return x=d,Al(n,r),d=(r.flags&128)!==0,x||d?(x=r.stateNode,a=d&&typeof a.getDerivedStateFromError!="function"?null:x.render(),r.flags|=1,n!==null&&d?(r.child=jr(r,n.child,null,y),r.child=jr(r,null,a,y)):Mt(n,r,a,y),r.memoizedState=x.state,n=r.child):n=ci(n,r,y),n}function _g(n,r,a,d){return vr(),r.flags|=256,Mt(n,r,a,d),r.child}var _d={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Od(n){return{baseLanes:n,cachePool:wm()}}function Rd(n,r,a){return n=n!==null?n.childLanes&~a:0,r&&(n|=sn),n}function Og(n,r,a){var d=r.pendingProps,y=!1,x=(r.flags&128)!==0,E;if((E=x)||(E=n!==null&&n.memoizedState===null?!1:(pt.current&2)!==0),E&&(y=!0,r.flags&=-129),E=(r.flags&32)!==0,r.flags&=-33,n===null){if(He){if(y?Bi(r):Hi(),(n=rt)?(n=Py(n,xn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:Di!==null?{id:Hn,overflow:$n}:null,retryLane:536870912,hydrationErrors:null},a=fm(n),a.return=r,r.child=a,Tt=r,rt=null)):n=null,n===null)throw Oi(r);return yf(n)?r.lanes=32:r.lanes=536870912,null}var R=d.children;return d=d.fallback,y?(Hi(),y=r.mode,R=Ml({mode:"hidden",children:R},y),d=xr(d,y,a,null),R.return=r,d.return=r,R.sibling=d,r.child=R,d=r.child,d.memoizedState=Od(a),d.childLanes=Rd(n,E,a),r.memoizedState=_d,Ca(null,d)):(Bi(r),Ld(r,R))}var X=n.memoizedState;if(X!==null&&(R=X.dehydrated,R!==null)){if(x)r.flags&256?(Bi(r),r.flags&=-257,r=zd(n,r,a)):r.memoizedState!==null?(Hi(),r.child=n.child,r.flags|=128,r=null):(Hi(),R=d.fallback,y=r.mode,d=Ml({mode:"visible",children:d.children},y),R=xr(R,y,a,null),R.flags|=2,d.return=r,R.return=r,d.sibling=R,r.child=d,jr(r,n.child,null,a),d=r.child,d.memoizedState=Od(a),d.childLanes=Rd(n,E,a),r.memoizedState=_d,r=Ca(null,d));else if(Bi(r),yf(R)){if(E=R.nextSibling&&R.nextSibling.dataset,E)var ee=E.dgst;E=ee,d=Error(o(419)),d.stack="",d.digest=E,pa({value:d,source:null,stack:null}),r=zd(n,r,a)}else if(vt||lo(n,r,a,!1),E=(a&n.childLanes)!==0,vt||E){if(E=tt,E!==null&&(d=$s(E,a),d!==0&&d!==X.retryLane))throw X.retryLane=d,yr(n,d),Qt(E,n,d),Md;gf(R)||Hl(),r=zd(n,r,a)}else gf(R)?(r.flags|=192,r.child=n.child,r=null):(n=X.treeContext,rt=bn(R.nextSibling),Tt=r,He=!0,_i=null,xn=!1,n!==null&&mm(r,n),r=Ld(r,d.children),r.flags|=4096);return r}return y?(Hi(),R=d.fallback,y=r.mode,X=n.child,ee=X.sibling,d=ii(X,{mode:"hidden",children:d.children}),d.subtreeFlags=X.subtreeFlags&65011712,ee!==null?R=ii(ee,R):(R=xr(R,y,a,null),R.flags|=2),R.return=r,d.return=r,d.sibling=R,r.child=d,Ca(null,d),d=r.child,R=n.child.memoizedState,R===null?R=Od(a):(y=R.cachePool,y!==null?(X=yt._currentValue,y=y.parent!==X?{parent:X,pool:X}:y):y=wm(),R={baseLanes:R.baseLanes|a,cachePool:y}),d.memoizedState=R,d.childLanes=Rd(n,E,a),r.memoizedState=_d,Ca(n.child,d)):(Bi(r),a=n.child,n=a.sibling,a=ii(a,{mode:"visible",children:d.children}),a.return=r,a.sibling=null,n!==null&&(E=r.deletions,E===null?(r.deletions=[n],r.flags|=16):E.push(n)),r.child=a,r.memoizedState=null,a)}function Ld(n,r){return r=Ml({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function Ml(n,r){return n=nn(22,n,null,r),n.lanes=0,n}function zd(n,r,a){return jr(r,n.child,null,a),n=Ld(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function Rg(n,r,a){n.lanes|=r;var d=n.alternate;d!==null&&(d.lanes|=r),Zu(n.return,r,a)}function Id(n,r,a,d,y,x){var E=n.memoizedState;E===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:d,tail:a,tailMode:y,treeForkCount:x}:(E.isBackwards=r,E.rendering=null,E.renderingStartTime=0,E.last=d,E.tail=a,E.tailMode=y,E.treeForkCount=x)}function Lg(n,r,a){var d=r.pendingProps,y=d.revealOrder,x=d.tail;d=d.children;var E=pt.current,R=(E&2)!==0;if(R?(E=E&1|2,r.flags|=128):E&=1,L(pt,E),Mt(n,r,d,a),d=He?ha:0,!R&&n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Rg(n,a,r);else if(n.tag===19)Rg(n,a,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(y){case"forwards":for(a=r.child,y=null;a!==null;)n=a.alternate,n!==null&&xl(n)===null&&(y=a),a=a.sibling;a=y,a===null?(y=r.child,r.child=null):(y=a.sibling,a.sibling=null),Id(r,!1,y,a,x,d);break;case"backwards":case"unstable_legacy-backwards":for(a=null,y=r.child,r.child=null;y!==null;){if(n=y.alternate,n!==null&&xl(n)===null){r.child=y;break}n=y.sibling,y.sibling=a,a=y,y=n}Id(r,!0,a,null,x,d);break;case"together":Id(r,!1,null,null,void 0,d);break;default:r.memoizedState=null}return r.child}function ci(n,r,a){if(n!==null&&(r.dependencies=n.dependencies),qi|=r.lanes,(a&r.childLanes)===0)if(n!==null){if(lo(n,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(o(153));if(r.child!==null){for(n=r.child,a=ii(n,n.pendingProps),r.child=a,a.return=r;n.sibling!==null;)n=n.sibling,a=a.sibling=ii(n,n.pendingProps),a.return=r;a.sibling=null}return r.child}function Bd(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&ul(n)))}function US(n,r,a){switch(r.tag){case 3:ae(r,r.stateNode.containerInfo),Ri(r,yt,n.memoizedState.cache),vr();break;case 27:case 5:xe(r);break;case 4:ae(r,r.stateNode.containerInfo);break;case 10:Ri(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,cd(r),null;break;case 13:var d=r.memoizedState;if(d!==null)return d.dehydrated!==null?(Bi(r),r.flags|=128,null):(a&r.child.childLanes)!==0?Og(n,r,a):(Bi(r),n=ci(n,r,a),n!==null?n.sibling:null);Bi(r);break;case 19:var y=(n.flags&128)!==0;if(d=(a&r.childLanes)!==0,d||(lo(n,r,a,!1),d=(a&r.childLanes)!==0),y){if(d)return Lg(n,r,a);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),L(pt,pt.current),d)break;return null;case 22:return r.lanes=0,kg(n,r,a,r.pendingProps);case 24:Ri(r,yt,n.memoizedState.cache)}return ci(n,r,a)}function zg(n,r,a){if(n!==null)if(n.memoizedProps!==r.pendingProps)vt=!0;else{if(!Bd(n,a)&&(r.flags&128)===0)return vt=!1,US(n,r,a);vt=(n.flags&131072)!==0}else vt=!1,He&&(r.flags&1048576)!==0&&pm(r,ha,r.index);switch(r.lanes=0,r.tag){case 16:e:{var d=r.pendingProps;if(n=Nr(r.elementType),r.type=n,typeof n=="function")Uu(n)?(d=kr(n,d),r.tag=1,r=Dg(null,r,n,d,a)):(r.tag=0,r=Dd(null,r,n,d,a));else{if(n!=null){var y=n.$$typeof;if(y===_){r.tag=11,r=Eg(null,r,n,d,a);break e}else if(y===H){r.tag=14,r=jg(null,r,n,d,a);break e}}throw r=M(n)||n,Error(o(306,r,""))}}return r;case 0:return Dd(n,r,r.type,r.pendingProps,a);case 1:return d=r.type,y=kr(d,r.pendingProps),Dg(n,r,d,y,a);case 3:e:{if(ae(r,r.stateNode.containerInfo),n===null)throw Error(o(387));d=r.pendingProps;var x=r.memoizedState;y=x.element,rd(n,r),wa(r,d,null,a);var E=r.memoizedState;if(d=E.cache,Ri(r,yt,d),d!==x.cache&&Ju(r,[yt],a,!0),ba(),d=E.element,x.isDehydrated)if(x={element:d,isDehydrated:!1,cache:E.cache},r.updateQueue.baseState=x,r.memoizedState=x,r.flags&256){r=_g(n,r,d,a);break e}else if(d!==y){y=mn(Error(o(424)),r),pa(y),r=_g(n,r,d,a);break e}else{switch(n=r.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(rt=bn(n.firstChild),Tt=r,He=!0,_i=null,xn=!0,a=km(r,null,d,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(vr(),d===y){r=ci(n,r,a);break e}Mt(n,r,d,a)}r=r.child}return r;case 26:return Al(n,r),n===null?(a=Yy(r.type,null,r.pendingProps,null))?r.memoizedState=a:He||(a=r.type,n=r.pendingProps,d=Gl(re.current).createElement(a),d[Et]=r,d[Rt]=n,Dt(d,a,n),gt(d),r.stateNode=d):r.memoizedState=Yy(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return xe(r),n===null&&He&&(d=r.stateNode=Vy(r.type,r.pendingProps,re.current),Tt=r,xn=!0,y=rt,Yi(r.type)?(xf=y,rt=bn(d.firstChild)):rt=y),Mt(n,r,r.pendingProps.children,a),Al(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&He&&((y=d=rt)&&(d=vN(d,r.type,r.pendingProps,xn),d!==null?(r.stateNode=d,Tt=r,rt=bn(d.firstChild),xn=!1,y=!0):y=!1),y||Oi(r)),xe(r),y=r.type,x=r.pendingProps,E=n!==null?n.memoizedProps:null,d=x.children,hf(y,x)?d=null:E!==null&&hf(y,E)&&(r.flags|=32),r.memoizedState!==null&&(y=dd(n,r,RS,null,null,a),Pa._currentValue=y),Al(n,r),Mt(n,r,d,a),r.child;case 6:return n===null&&He&&((n=a=rt)&&(a=bN(a,r.pendingProps,xn),a!==null?(r.stateNode=a,Tt=r,rt=null,n=!0):n=!1),n||Oi(r)),null;case 13:return Og(n,r,a);case 4:return ae(r,r.stateNode.containerInfo),d=r.pendingProps,n===null?r.child=jr(r,null,d,a):Mt(n,r,d,a),r.child;case 11:return Eg(n,r,r.type,r.pendingProps,a);case 7:return Mt(n,r,r.pendingProps,a),r.child;case 8:return Mt(n,r,r.pendingProps.children,a),r.child;case 12:return Mt(n,r,r.pendingProps.children,a),r.child;case 10:return d=r.pendingProps,Ri(r,r.type,d.value),Mt(n,r,d.children,a),r.child;case 9:return y=r.type._context,d=r.pendingProps.children,wr(r),y=At(y),d=d(y),r.flags|=1,Mt(n,r,d,a),r.child;case 14:return jg(n,r,r.type,r.pendingProps,a);case 15:return Cg(n,r,r.type,r.pendingProps,a);case 19:return Lg(n,r,a);case 31:return qS(n,r,a);case 22:return kg(n,r,a,r.pendingProps);case 24:return wr(r),d=At(yt),n===null?(y=td(),y===null&&(y=tt,x=Ku(),y.pooledCache=x,x.refCount++,x!==null&&(y.pooledCacheLanes|=a),y=x),r.memoizedState={parent:d,cache:y},id(r),Ri(r,yt,y)):((n.lanes&a)!==0&&(rd(n,r),wa(r,null,null,a),ba()),y=n.memoizedState,x=r.memoizedState,y.parent!==d?(y={parent:d,cache:d},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),Ri(r,yt,d)):(d=x.cache,Ri(r,yt,d),d!==y.cache&&Ju(r,[yt],a,!0))),Mt(n,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(o(156,r.tag))}function ui(n){n.flags|=4}function Hd(n,r,a,d,y){if((r=(n.mode&32)!==0)&&(r=!1),r){if(n.flags|=16777216,(y&335544128)===y)if(n.stateNode.complete)n.flags|=8192;else if(cy())n.flags|=8192;else throw Er=pl,nd}else n.flags&=-16777217}function Ig(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Jy(r))if(cy())n.flags|=8192;else throw Er=pl,nd}function Dl(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?Is():536870912,n.lanes|=r,wo|=r)}function ka(n,r){if(!He)switch(n.tailMode){case"hidden":r=n.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:d.sibling=null}}function ot(n){var r=n.alternate!==null&&n.alternate.child===n.child,a=0,d=0;if(r)for(var y=n.child;y!==null;)a|=y.lanes|y.childLanes,d|=y.subtreeFlags&65011712,d|=y.flags&65011712,y.return=n,y=y.sibling;else for(y=n.child;y!==null;)a|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=n,y=y.sibling;return n.subtreeFlags|=d,n.childLanes=a,r}function VS(n,r,a){var d=r.pendingProps;switch(Yu(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(r),null;case 1:return ot(r),null;case 3:return a=r.stateNode,d=null,n!==null&&(d=n.memoizedState.cache),r.memoizedState.cache!==d&&(r.flags|=2048),ai(yt),fe(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(so(r)?ui(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Qu())),ot(r),null;case 26:var y=r.type,x=r.memoizedState;return n===null?(ui(r),x!==null?(ot(r),Ig(r,x)):(ot(r),Hd(r,y,null,d,a))):x?x!==n.memoizedState?(ui(r),ot(r),Ig(r,x)):(ot(r),r.flags&=-16777217):(n=n.memoizedProps,n!==d&&ui(r),ot(r),Hd(r,y,n,d,a)),null;case 27:if(je(r),a=re.current,y=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==d&&ui(r);else{if(!d){if(r.stateNode===null)throw Error(o(166));return ot(r),null}n=ie.current,so(r)?gm(r):(n=Vy(y,d,a),r.stateNode=n,ui(r))}return ot(r),null;case 5:if(je(r),y=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==d&&ui(r);else{if(!d){if(r.stateNode===null)throw Error(o(166));return ot(r),null}if(x=ie.current,so(r))gm(r);else{var E=Gl(re.current);switch(x){case 1:x=E.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:x=E.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":x=E.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":x=E.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":x=E.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof d.is=="string"?E.createElement("select",{is:d.is}):E.createElement("select"),d.multiple?x.multiple=!0:d.size&&(x.size=d.size);break;default:x=typeof d.is=="string"?E.createElement(y,{is:d.is}):E.createElement(y)}}x[Et]=r,x[Rt]=d;e:for(E=r.child;E!==null;){if(E.tag===5||E.tag===6)x.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===r)break e;for(;E.sibling===null;){if(E.return===null||E.return===r)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}r.stateNode=x;e:switch(Dt(x,y,d),y){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&ui(r)}}return ot(r),Hd(r,r.type,n===null?null:n.memoizedProps,r.pendingProps,a),null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==d&&ui(r);else{if(typeof d!="string"&&r.stateNode===null)throw Error(o(166));if(n=re.current,so(r)){if(n=r.stateNode,a=r.memoizedProps,d=null,y=Tt,y!==null)switch(y.tag){case 27:case 5:d=y.memoizedProps}n[Et]=r,n=!!(n.nodeValue===a||d!==null&&d.suppressHydrationWarning===!0||Oy(n.nodeValue,a)),n||Oi(r,!0)}else n=Gl(n).createTextNode(d),n[Et]=r,r.stateNode=n}return ot(r),null;case 31:if(a=r.memoizedState,n===null||n.memoizedState!==null){if(d=so(r),a!==null){if(n===null){if(!d)throw Error(o(318));if(n=r.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(557));n[Et]=r}else vr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ot(r),n=!1}else a=Qu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return r.flags&256?(on(r),r):(on(r),null);if((r.flags&128)!==0)throw Error(o(558))}return ot(r),null;case 13:if(d=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(y=so(r),d!==null&&d.dehydrated!==null){if(n===null){if(!y)throw Error(o(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(o(317));y[Et]=r}else vr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ot(r),y=!1}else y=Qu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(on(r),r):(on(r),null)}return on(r),(r.flags&128)!==0?(r.lanes=a,r):(a=d!==null,n=n!==null&&n.memoizedState!==null,a&&(d=r.child,y=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(y=d.alternate.memoizedState.cachePool.pool),x=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(x=d.memoizedState.cachePool.pool),x!==y&&(d.flags|=2048)),a!==n&&a&&(r.child.flags|=8192),Dl(r,r.updateQueue),ot(r),null);case 4:return fe(),n===null&&lf(r.stateNode.containerInfo),ot(r),null;case 10:return ai(r.type),ot(r),null;case 19:if(F(pt),d=r.memoizedState,d===null)return ot(r),null;if(y=(r.flags&128)!==0,x=d.rendering,x===null)if(y)ka(d,!1);else{if(dt!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(x=xl(n),x!==null){for(r.flags|=128,ka(d,!1),n=x.updateQueue,r.updateQueue=n,Dl(r,n),r.subtreeFlags=0,n=a,a=r.child;a!==null;)dm(a,n),a=a.sibling;return L(pt,pt.current&1|2),He&&ri(r,d.treeForkCount),r.child}n=n.sibling}d.tail!==null&&Nt()>zl&&(r.flags|=128,y=!0,ka(d,!1),r.lanes=4194304)}else{if(!y)if(n=xl(x),n!==null){if(r.flags|=128,y=!0,n=n.updateQueue,r.updateQueue=n,Dl(r,n),ka(d,!0),d.tail===null&&d.tailMode==="hidden"&&!x.alternate&&!He)return ot(r),null}else 2*Nt()-d.renderingStartTime>zl&&a!==536870912&&(r.flags|=128,y=!0,ka(d,!1),r.lanes=4194304);d.isBackwards?(x.sibling=r.child,r.child=x):(n=d.last,n!==null?n.sibling=x:r.child=x,d.last=x)}return d.tail!==null?(n=d.tail,d.rendering=n,d.tail=n.sibling,d.renderingStartTime=Nt(),n.sibling=null,a=pt.current,L(pt,y?a&1|2:a&1),He&&ri(r,d.treeForkCount),n):(ot(r),null);case 22:case 23:return on(r),ld(),d=r.memoizedState!==null,n!==null?n.memoizedState!==null!==d&&(r.flags|=8192):d&&(r.flags|=8192),d?(a&536870912)!==0&&(r.flags&128)===0&&(ot(r),r.subtreeFlags&6&&(r.flags|=8192)):ot(r),a=r.updateQueue,a!==null&&Dl(r,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),d=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(d=r.memoizedState.cachePool.pool),d!==a&&(r.flags|=2048),n!==null&&F(Sr),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),ai(yt),ot(r),null;case 25:return null;case 30:return null}throw Error(o(156,r.tag))}function FS(n,r){switch(Yu(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return ai(yt),fe(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return je(r),null;case 31:if(r.memoizedState!==null){if(on(r),r.alternate===null)throw Error(o(340));vr()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 13:if(on(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(o(340));vr()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return F(pt),null;case 4:return fe(),null;case 10:return ai(r.type),null;case 22:case 23:return on(r),ld(),n!==null&&F(Sr),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return ai(yt),null;case 25:return null;default:return null}}function Bg(n,r){switch(Yu(r),r.tag){case 3:ai(yt),fe();break;case 26:case 27:case 5:je(r);break;case 4:fe();break;case 31:r.memoizedState!==null&&on(r);break;case 13:on(r);break;case 19:F(pt);break;case 10:ai(r.type);break;case 22:case 23:on(r),ld(),n!==null&&F(Sr);break;case 24:ai(yt)}}function Ta(n,r){try{var a=r.updateQueue,d=a!==null?a.lastEffect:null;if(d!==null){var y=d.next;a=y;do{if((a.tag&n)===n){d=void 0;var x=a.create,E=a.inst;d=x(),E.destroy=d}a=a.next}while(a!==y)}}catch(R){Ze(r,r.return,R)}}function $i(n,r,a){try{var d=r.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var x=y.next;d=x;do{if((d.tag&n)===n){var E=d.inst,R=E.destroy;if(R!==void 0){E.destroy=void 0,y=r;var X=a,ee=R;try{ee()}catch(le){Ze(y,X,le)}}}d=d.next}while(d!==x)}}catch(le){Ze(r,r.return,le)}}function Hg(n){var r=n.updateQueue;if(r!==null){var a=n.stateNode;try{Am(r,a)}catch(d){Ze(n,n.return,d)}}}function $g(n,r,a){a.props=kr(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(d){Ze(n,r,d)}}function Aa(n,r){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var d=n.stateNode;break;case 30:d=n.stateNode;break;default:d=n.stateNode}typeof a=="function"?n.refCleanup=a(d):a.current=d}}catch(y){Ze(n,r,y)}}function Pn(n,r){var a=n.ref,d=n.refCleanup;if(a!==null)if(typeof d=="function")try{d()}catch(y){Ze(n,r,y)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(y){Ze(n,r,y)}else a.current=null}function Pg(n){var r=n.type,a=n.memoizedProps,d=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&d.focus();break e;case"img":a.src?d.src=a.src:a.srcSet&&(d.srcset=a.srcSet)}}catch(y){Ze(n,n.return,y)}}function $d(n,r,a){try{var d=n.stateNode;hN(d,n.type,a,r),d[Rt]=r}catch(y){Ze(n,n.return,y)}}function qg(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Yi(n.type)||n.tag===4}function Pd(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||qg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Yi(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function qd(n,r,a){var d=n.tag;if(d===5||d===6)n=n.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(n),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=ti));else if(d!==4&&(d===27&&Yi(n.type)&&(a=n.stateNode,r=null),n=n.child,n!==null))for(qd(n,r,a),n=n.sibling;n!==null;)qd(n,r,a),n=n.sibling}function _l(n,r,a){var d=n.tag;if(d===5||d===6)n=n.stateNode,r?a.insertBefore(n,r):a.appendChild(n);else if(d!==4&&(d===27&&Yi(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(_l(n,r,a),n=n.sibling;n!==null;)_l(n,r,a),n=n.sibling}function Ug(n){var r=n.stateNode,a=n.memoizedProps;try{for(var d=n.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);Dt(r,d,a),r[Et]=n,r[Rt]=a}catch(x){Ze(n,n.return,x)}}var di=!1,bt=!1,Ud=!1,Vg=typeof WeakSet=="function"?WeakSet:Set,Ct=null;function GS(n,r){if(n=n.containerInfo,df=Kl,n=nm(n),zu(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var d=a.getSelection&&a.getSelection();if(d&&d.rangeCount!==0){a=d.anchorNode;var y=d.anchorOffset,x=d.focusNode;d=d.focusOffset;try{a.nodeType,x.nodeType}catch{a=null;break e}var E=0,R=-1,X=-1,ee=0,le=0,ue=n,ne=null;t:for(;;){for(var oe;ue!==a||y!==0&&ue.nodeType!==3||(R=E+y),ue!==x||d!==0&&ue.nodeType!==3||(X=E+d),ue.nodeType===3&&(E+=ue.nodeValue.length),(oe=ue.firstChild)!==null;)ne=ue,ue=oe;for(;;){if(ue===n)break t;if(ne===a&&++ee===y&&(R=E),ne===x&&++le===d&&(X=E),(oe=ue.nextSibling)!==null)break;ue=ne,ne=ue.parentNode}ue=oe}a=R===-1||X===-1?null:{start:R,end:X}}else a=null}a=a||{start:0,end:0}}else a=null;for(ff={focusedElem:n,selectionRange:a},Kl=!1,Ct=r;Ct!==null;)if(r=Ct,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,Ct=n;else for(;Ct!==null;){switch(r=Ct,x=r.alternate,n=r.flags,r.tag){case 0:if((n&4)!==0&&(n=r.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)y=n[a],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&x!==null){n=void 0,a=r,y=x.memoizedProps,x=x.memoizedState,d=a.stateNode;try{var me=kr(a.type,y);n=d.getSnapshotBeforeUpdate(me,x),d.__reactInternalSnapshotBeforeUpdate=n}catch(Ne){Ze(a,a.return,Ne)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,a=n.nodeType,a===9)mf(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":mf(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(o(163))}if(n=r.sibling,n!==null){n.return=r.return,Ct=n;break}Ct=r.return}}function Fg(n,r,a){var d=a.flags;switch(a.tag){case 0:case 11:case 15:hi(n,a),d&4&&Ta(5,a);break;case 1:if(hi(n,a),d&4)if(n=a.stateNode,r===null)try{n.componentDidMount()}catch(E){Ze(a,a.return,E)}else{var y=kr(a.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(y,r,n.__reactInternalSnapshotBeforeUpdate)}catch(E){Ze(a,a.return,E)}}d&64&&Hg(a),d&512&&Aa(a,a.return);break;case 3:if(hi(n,a),d&64&&(n=a.updateQueue,n!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Am(n,r)}catch(E){Ze(a,a.return,E)}}break;case 27:r===null&&d&4&&Ug(a);case 26:case 5:hi(n,a),r===null&&d&4&&Pg(a),d&512&&Aa(a,a.return);break;case 12:hi(n,a);break;case 31:hi(n,a),d&4&&Xg(n,a);break;case 13:hi(n,a),d&4&&Qg(n,a),d&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=tN.bind(null,a),wN(n,a))));break;case 22:if(d=a.memoizedState!==null||di,!d){r=r!==null&&r.memoizedState!==null||bt,y=di;var x=bt;di=d,(bt=r)&&!x?pi(n,a,(a.subtreeFlags&8772)!==0):hi(n,a),di=y,bt=x}break;case 30:break;default:hi(n,a)}}function Gg(n){var r=n.alternate;r!==null&&(n.alternate=null,Gg(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&ta(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var lt=null,Ft=!1;function fi(n,r,a){for(a=a.child;a!==null;)Yg(n,r,a),a=a.sibling}function Yg(n,r,a){if(ht&&typeof ht.onCommitFiberUnmount=="function")try{ht.onCommitFiberUnmount(kt,a)}catch{}switch(a.tag){case 26:bt||Pn(a,r),fi(n,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:bt||Pn(a,r);var d=lt,y=Ft;Yi(a.type)&&(lt=a.stateNode,Ft=!1),fi(n,r,a),Ba(a.stateNode),lt=d,Ft=y;break;case 5:bt||Pn(a,r);case 6:if(d=lt,y=Ft,lt=null,fi(n,r,a),lt=d,Ft=y,lt!==null)if(Ft)try{(lt.nodeType===9?lt.body:lt.nodeName==="HTML"?lt.ownerDocument.body:lt).removeChild(a.stateNode)}catch(x){Ze(a,r,x)}else try{lt.removeChild(a.stateNode)}catch(x){Ze(a,r,x)}break;case 18:lt!==null&&(Ft?(n=lt,Hy(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),Ao(n)):Hy(lt,a.stateNode));break;case 4:d=lt,y=Ft,lt=a.stateNode.containerInfo,Ft=!0,fi(n,r,a),lt=d,Ft=y;break;case 0:case 11:case 14:case 15:$i(2,a,r),bt||$i(4,a,r),fi(n,r,a);break;case 1:bt||(Pn(a,r),d=a.stateNode,typeof d.componentWillUnmount=="function"&&$g(a,r,d)),fi(n,r,a);break;case 21:fi(n,r,a);break;case 22:bt=(d=bt)||a.memoizedState!==null,fi(n,r,a),bt=d;break;default:fi(n,r,a)}}function Xg(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Ao(n)}catch(a){Ze(r,r.return,a)}}}function Qg(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Ao(n)}catch(a){Ze(r,r.return,a)}}function YS(n){switch(n.tag){case 31:case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new Vg),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new Vg),r;default:throw Error(o(435,n.tag))}}function Ol(n,r){var a=YS(n);r.forEach(function(d){if(!a.has(d)){a.add(d);var y=nN.bind(null,n,d);d.then(y,y)}})}function Gt(n,r){var a=r.deletions;if(a!==null)for(var d=0;d<a.length;d++){var y=a[d],x=n,E=r,R=E;e:for(;R!==null;){switch(R.tag){case 27:if(Yi(R.type)){lt=R.stateNode,Ft=!1;break e}break;case 5:lt=R.stateNode,Ft=!1;break e;case 3:case 4:lt=R.stateNode.containerInfo,Ft=!0;break e}R=R.return}if(lt===null)throw Error(o(160));Yg(x,E,y),lt=null,Ft=!1,x=y.alternate,x!==null&&(x.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Wg(r,n),r=r.sibling}var kn=null;function Wg(n,r){var a=n.alternate,d=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Gt(r,n),Yt(n),d&4&&($i(3,n,n.return),Ta(3,n),$i(5,n,n.return));break;case 1:Gt(r,n),Yt(n),d&512&&(bt||a===null||Pn(a,a.return)),d&64&&di&&(n=n.updateQueue,n!==null&&(d=n.callbacks,d!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?d:a.concat(d))));break;case 26:var y=kn;if(Gt(r,n),Yt(n),d&512&&(bt||a===null||Pn(a,a.return)),d&4){var x=a!==null?a.memoizedState:null;if(d=n.memoizedState,a===null)if(d===null)if(n.stateNode===null){e:{d=n.type,a=n.memoizedProps,y=y.ownerDocument||y;t:switch(d){case"title":x=y.getElementsByTagName("title")[0],(!x||x[dr]||x[Et]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=y.createElement(d),y.head.insertBefore(x,y.querySelector("head > title"))),Dt(x,d,a),x[Et]=n,gt(x),d=x;break e;case"link":var E=Wy("link","href",y).get(d+(a.href||""));if(E){for(var R=0;R<E.length;R++)if(x=E[R],x.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&x.getAttribute("rel")===(a.rel==null?null:a.rel)&&x.getAttribute("title")===(a.title==null?null:a.title)&&x.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){E.splice(R,1);break t}}x=y.createElement(d),Dt(x,d,a),y.head.appendChild(x);break;case"meta":if(E=Wy("meta","content",y).get(d+(a.content||""))){for(R=0;R<E.length;R++)if(x=E[R],x.getAttribute("content")===(a.content==null?null:""+a.content)&&x.getAttribute("name")===(a.name==null?null:a.name)&&x.getAttribute("property")===(a.property==null?null:a.property)&&x.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&x.getAttribute("charset")===(a.charSet==null?null:a.charSet)){E.splice(R,1);break t}}x=y.createElement(d),Dt(x,d,a),y.head.appendChild(x);break;default:throw Error(o(468,d))}x[Et]=n,gt(x),d=x}n.stateNode=d}else Zy(y,n.type,n.stateNode);else n.stateNode=Qy(y,d,n.memoizedProps);else x!==d?(x===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):x.count--,d===null?Zy(y,n.type,n.stateNode):Qy(y,d,n.memoizedProps)):d===null&&n.stateNode!==null&&$d(n,n.memoizedProps,a.memoizedProps)}break;case 27:Gt(r,n),Yt(n),d&512&&(bt||a===null||Pn(a,a.return)),a!==null&&d&4&&$d(n,n.memoizedProps,a.memoizedProps);break;case 5:if(Gt(r,n),Yt(n),d&512&&(bt||a===null||Pn(a,a.return)),n.flags&32){y=n.stateNode;try{Zr(y,"")}catch(me){Ze(n,n.return,me)}}d&4&&n.stateNode!=null&&(y=n.memoizedProps,$d(n,y,a!==null?a.memoizedProps:y)),d&1024&&(Ud=!0);break;case 6:if(Gt(r,n),Yt(n),d&4){if(n.stateNode===null)throw Error(o(162));d=n.memoizedProps,a=n.stateNode;try{a.nodeValue=d}catch(me){Ze(n,n.return,me)}}break;case 3:if(Ql=null,y=kn,kn=Yl(r.containerInfo),Gt(r,n),kn=y,Yt(n),d&4&&a!==null&&a.memoizedState.isDehydrated)try{Ao(r.containerInfo)}catch(me){Ze(n,n.return,me)}Ud&&(Ud=!1,Zg(n));break;case 4:d=kn,kn=Yl(n.stateNode.containerInfo),Gt(r,n),Yt(n),kn=d;break;case 12:Gt(r,n),Yt(n);break;case 31:Gt(r,n),Yt(n),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,Ol(n,d)));break;case 13:Gt(r,n),Yt(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Ll=Nt()),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,Ol(n,d)));break;case 22:y=n.memoizedState!==null;var X=a!==null&&a.memoizedState!==null,ee=di,le=bt;if(di=ee||y,bt=le||X,Gt(r,n),bt=le,di=ee,Yt(n),d&8192)e:for(r=n.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(a===null||X||di||bt||Tr(n)),a=null,r=n;;){if(r.tag===5||r.tag===26){if(a===null){X=a=r;try{if(x=X.stateNode,y)E=x.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{R=X.stateNode;var ue=X.memoizedProps.style,ne=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;R.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(me){Ze(X,X.return,me)}}}else if(r.tag===6){if(a===null){X=r;try{X.stateNode.nodeValue=y?"":X.memoizedProps}catch(me){Ze(X,X.return,me)}}}else if(r.tag===18){if(a===null){X=r;try{var oe=X.stateNode;y?$y(oe,!0):$y(X.stateNode,!1)}catch(me){Ze(X,X.return,me)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}d&4&&(d=n.updateQueue,d!==null&&(a=d.retryQueue,a!==null&&(d.retryQueue=null,Ol(n,a))));break;case 19:Gt(r,n),Yt(n),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,Ol(n,d)));break;case 30:break;case 21:break;default:Gt(r,n),Yt(n)}}function Yt(n){var r=n.flags;if(r&2){try{for(var a,d=n.return;d!==null;){if(qg(d)){a=d;break}d=d.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var y=a.stateNode,x=Pd(n);_l(n,x,y);break;case 5:var E=a.stateNode;a.flags&32&&(Zr(E,""),a.flags&=-33);var R=Pd(n);_l(n,R,E);break;case 3:case 4:var X=a.stateNode.containerInfo,ee=Pd(n);qd(n,ee,X);break;default:throw Error(o(161))}}catch(le){Ze(n,n.return,le)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function Zg(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;Zg(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function hi(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Fg(n,r.alternate,r),r=r.sibling}function Tr(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:$i(4,r,r.return),Tr(r);break;case 1:Pn(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&$g(r,r.return,a),Tr(r);break;case 27:Ba(r.stateNode);case 26:case 5:Pn(r,r.return),Tr(r);break;case 22:r.memoizedState===null&&Tr(r);break;case 30:Tr(r);break;default:Tr(r)}n=n.sibling}}function pi(n,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var d=r.alternate,y=n,x=r,E=x.flags;switch(x.tag){case 0:case 11:case 15:pi(y,x,a),Ta(4,x);break;case 1:if(pi(y,x,a),d=x,y=d.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(ee){Ze(d,d.return,ee)}if(d=x,y=d.updateQueue,y!==null){var R=d.stateNode;try{var X=y.shared.hiddenCallbacks;if(X!==null)for(y.shared.hiddenCallbacks=null,y=0;y<X.length;y++)Tm(X[y],R)}catch(ee){Ze(d,d.return,ee)}}a&&E&64&&Hg(x),Aa(x,x.return);break;case 27:Ug(x);case 26:case 5:pi(y,x,a),a&&d===null&&E&4&&Pg(x),Aa(x,x.return);break;case 12:pi(y,x,a);break;case 31:pi(y,x,a),a&&E&4&&Xg(y,x);break;case 13:pi(y,x,a),a&&E&4&&Qg(y,x);break;case 22:x.memoizedState===null&&pi(y,x,a),Aa(x,x.return);break;case 30:break;default:pi(y,x,a)}r=r.sibling}}function Vd(n,r){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&ma(a))}function Fd(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&ma(n))}function Tn(n,r,a,d){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Jg(n,r,a,d),r=r.sibling}function Jg(n,r,a,d){var y=r.flags;switch(r.tag){case 0:case 11:case 15:Tn(n,r,a,d),y&2048&&Ta(9,r);break;case 1:Tn(n,r,a,d);break;case 3:Tn(n,r,a,d),y&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&ma(n)));break;case 12:if(y&2048){Tn(n,r,a,d),n=r.stateNode;try{var x=r.memoizedProps,E=x.id,R=x.onPostCommit;typeof R=="function"&&R(E,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(X){Ze(r,r.return,X)}}else Tn(n,r,a,d);break;case 31:Tn(n,r,a,d);break;case 13:Tn(n,r,a,d);break;case 23:break;case 22:x=r.stateNode,E=r.alternate,r.memoizedState!==null?x._visibility&2?Tn(n,r,a,d):Ma(n,r):x._visibility&2?Tn(n,r,a,d):(x._visibility|=2,xo(n,r,a,d,(r.subtreeFlags&10256)!==0||!1)),y&2048&&Vd(E,r);break;case 24:Tn(n,r,a,d),y&2048&&Fd(r.alternate,r);break;default:Tn(n,r,a,d)}}function xo(n,r,a,d,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var x=n,E=r,R=a,X=d,ee=E.flags;switch(E.tag){case 0:case 11:case 15:xo(x,E,R,X,y),Ta(8,E);break;case 23:break;case 22:var le=E.stateNode;E.memoizedState!==null?le._visibility&2?xo(x,E,R,X,y):Ma(x,E):(le._visibility|=2,xo(x,E,R,X,y)),y&&ee&2048&&Vd(E.alternate,E);break;case 24:xo(x,E,R,X,y),y&&ee&2048&&Fd(E.alternate,E);break;default:xo(x,E,R,X,y)}r=r.sibling}}function Ma(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=n,d=r,y=d.flags;switch(d.tag){case 22:Ma(a,d),y&2048&&Vd(d.alternate,d);break;case 24:Ma(a,d),y&2048&&Fd(d.alternate,d);break;default:Ma(a,d)}r=r.sibling}}var Da=8192;function vo(n,r,a){if(n.subtreeFlags&Da)for(n=n.child;n!==null;)Kg(n,r,a),n=n.sibling}function Kg(n,r,a){switch(n.tag){case 26:vo(n,r,a),n.flags&Da&&n.memoizedState!==null&&ON(a,kn,n.memoizedState,n.memoizedProps);break;case 5:vo(n,r,a);break;case 3:case 4:var d=kn;kn=Yl(n.stateNode.containerInfo),vo(n,r,a),kn=d;break;case 22:n.memoizedState===null&&(d=n.alternate,d!==null&&d.memoizedState!==null?(d=Da,Da=16777216,vo(n,r,a),Da=d):vo(n,r,a));break;default:vo(n,r,a)}}function ey(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function _a(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var d=r[a];Ct=d,ny(d,n)}ey(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)ty(n),n=n.sibling}function ty(n){switch(n.tag){case 0:case 11:case 15:_a(n),n.flags&2048&&$i(9,n,n.return);break;case 3:_a(n);break;case 12:_a(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,Rl(n)):_a(n);break;default:_a(n)}}function Rl(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var d=r[a];Ct=d,ny(d,n)}ey(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:$i(8,r,r.return),Rl(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Rl(r));break;default:Rl(r)}n=n.sibling}}function ny(n,r){for(;Ct!==null;){var a=Ct;switch(a.tag){case 0:case 11:case 15:$i(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var d=a.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:ma(a.memoizedState.cache)}if(d=a.child,d!==null)d.return=a,Ct=d;else e:for(a=n;Ct!==null;){d=Ct;var y=d.sibling,x=d.return;if(Gg(d),d===a){Ct=null;break e}if(y!==null){y.return=x,Ct=y;break e}Ct=x}}}var XS={getCacheForType:function(n){var r=At(yt),a=r.data.get(n);return a===void 0&&(a=n(),r.data.set(n,a)),a},cacheSignal:function(){return At(yt).controller.signal}},QS=typeof WeakMap=="function"?WeakMap:Map,Ge=0,tt=null,Oe=null,ze=0,We=0,an=null,Pi=!1,bo=!1,Gd=!1,mi=0,dt=0,qi=0,Ar=0,Yd=0,sn=0,wo=0,Oa=null,Xt=null,Xd=!1,Ll=0,iy=0,zl=1/0,Il=null,Ui=null,jt=0,Vi=null,So=null,gi=0,Qd=0,Wd=null,ry=null,Ra=0,Zd=null;function ln(){return(Ge&2)!==0&&ze!==0?ze&-ze:O.T!==null?rf():Ps()}function oy(){if(sn===0)if((ze&536870912)===0||He){var n=Vr;Vr<<=1,(Vr&3932160)===0&&(Vr=262144),sn=n}else sn=536870912;return n=rn.current,n!==null&&(n.flags|=32),sn}function Qt(n,r,a){(n===tt&&(We===2||We===9)||n.cancelPendingCommit!==null)&&(No(n,0),Fi(n,ze,sn,!1)),ur(n,a),((Ge&2)===0||n!==tt)&&(n===tt&&((Ge&2)===0&&(Ar|=a),dt===4&&Fi(n,ze,sn,!1)),qn(n))}function ay(n,r,a){if((Ge&6)!==0)throw Error(o(327));var d=!a&&(r&127)===0&&(r&n.expiredLanes)===0||cr(n,r),y=d?JS(n,r):Kd(n,r,!0),x=d;do{if(y===0){bo&&!d&&Fi(n,r,0,!1);break}else{if(a=n.current.alternate,x&&!WS(a)){y=Kd(n,r,!1),x=!1;continue}if(y===2){if(x=r,n.errorRecoveryDisabledLanes&x)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){r=E;e:{var R=n;y=Oa;var X=R.current.memoizedState.isDehydrated;if(X&&(No(R,E).flags|=256),E=Kd(R,E,!1),E!==2){if(Gd&&!X){R.errorRecoveryDisabledLanes|=x,Ar|=x,y=4;break e}x=Xt,Xt=y,x!==null&&(Xt===null?Xt=x:Xt.push.apply(Xt,x))}y=E}if(x=!1,y!==2)continue}}if(y===1){No(n,0),Fi(n,r,0,!0);break}e:{switch(d=n,x=y,x){case 0:case 1:throw Error(o(345));case 4:if((r&4194048)!==r)break;case 6:Fi(d,r,sn,!Pi);break e;case 2:Xt=null;break;case 3:case 5:break;default:throw Error(o(329))}if((r&62914560)===r&&(y=Ll+300-Nt(),10<y)){if(Fi(d,r,sn,!Pi),Gr(d,0,!0)!==0)break e;gi=r,d.timeoutHandle=Iy(sy.bind(null,d,a,Xt,Il,Xd,r,sn,Ar,wo,Pi,x,"Throttled",-0,0),y);break e}sy(d,a,Xt,Il,Xd,r,sn,Ar,wo,Pi,x,null,-0,0)}}break}while(!0);qn(n)}function sy(n,r,a,d,y,x,E,R,X,ee,le,ue,ne,oe){if(n.timeoutHandle=-1,ue=r.subtreeFlags,ue&8192||(ue&16785408)===16785408){ue={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ti},Kg(r,x,ue);var me=(x&62914560)===x?Ll-Nt():(x&4194048)===x?iy-Nt():0;if(me=RN(ue,me),me!==null){gi=x,n.cancelPendingCommit=me(my.bind(null,n,r,x,a,d,y,E,R,X,le,ue,null,ne,oe)),Fi(n,x,E,!ee);return}}my(n,r,x,a,d,y,E,R,X)}function WS(n){for(var r=n;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var d=0;d<a.length;d++){var y=a[d],x=y.getSnapshot;y=y.value;try{if(!tn(x(),y))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Fi(n,r,a,d){r&=~Yd,r&=~Ar,n.suspendedLanes|=r,n.pingedLanes&=~r,d&&(n.warmLanes|=r),d=n.expirationTimes;for(var y=r;0<y;){var x=31-Qe(y),E=1<<x;d[x]=-1,y&=~E}a!==0&&Bs(n,a,r)}function Bl(){return(Ge&6)===0?(La(0),!1):!0}function Jd(){if(Oe!==null){if(We===0)var n=Oe.return;else n=Oe,oi=br=null,pd(n),ho=null,ya=0,n=Oe;for(;n!==null;)Bg(n.alternate,n),n=n.return;Oe=null}}function No(n,r){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,gN(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),gi=0,Jd(),tt=n,Oe=a=ii(n.current,null),ze=r,We=0,an=null,Pi=!1,bo=cr(n,r),Gd=!1,wo=sn=Yd=Ar=qi=dt=0,Xt=Oa=null,Xd=!1,(r&8)!==0&&(r|=r&32);var d=n.entangledLanes;if(d!==0)for(n=n.entanglements,d&=r;0<d;){var y=31-Qe(d),x=1<<y;r|=n[y],d&=~x}return mi=r,ol(),a}function ly(n,r){Te=null,O.H=ja,r===fo||r===hl?(r=Em(),We=3):r===nd?(r=Em(),We=4):We=r===Md?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,an=r,Oe===null&&(dt=1,kl(n,mn(r,n.current)))}function cy(){var n=rn.current;return n===null?!0:(ze&4194048)===ze?vn===null:(ze&62914560)===ze||(ze&536870912)!==0?n===vn:!1}function uy(){var n=O.H;return O.H=ja,n===null?ja:n}function dy(){var n=O.A;return O.A=XS,n}function Hl(){dt=4,Pi||(ze&4194048)!==ze&&rn.current!==null||(bo=!0),(qi&134217727)===0&&(Ar&134217727)===0||tt===null||Fi(tt,ze,sn,!1)}function Kd(n,r,a){var d=Ge;Ge|=2;var y=uy(),x=dy();(tt!==n||ze!==r)&&(Il=null,No(n,r)),r=!1;var E=dt;e:do try{if(We!==0&&Oe!==null){var R=Oe,X=an;switch(We){case 8:Jd(),E=6;break e;case 3:case 2:case 9:case 6:rn.current===null&&(r=!0);var ee=We;if(We=0,an=null,Eo(n,R,X,ee),a&&bo){E=0;break e}break;default:ee=We,We=0,an=null,Eo(n,R,X,ee)}}ZS(),E=dt;break}catch(le){ly(n,le)}while(!0);return r&&n.shellSuspendCounter++,oi=br=null,Ge=d,O.H=y,O.A=x,Oe===null&&(tt=null,ze=0,ol()),E}function ZS(){for(;Oe!==null;)fy(Oe)}function JS(n,r){var a=Ge;Ge|=2;var d=uy(),y=dy();tt!==n||ze!==r?(Il=null,zl=Nt()+500,No(n,r)):bo=cr(n,r);e:do try{if(We!==0&&Oe!==null){r=Oe;var x=an;t:switch(We){case 1:We=0,an=null,Eo(n,r,x,1);break;case 2:case 9:if(Sm(x)){We=0,an=null,hy(r);break}r=function(){We!==2&&We!==9||tt!==n||(We=7),qn(n)},x.then(r,r);break e;case 3:We=7;break e;case 4:We=5;break e;case 7:Sm(x)?(We=0,an=null,hy(r)):(We=0,an=null,Eo(n,r,x,7));break;case 5:var E=null;switch(Oe.tag){case 26:E=Oe.memoizedState;case 5:case 27:var R=Oe;if(E?Jy(E):R.stateNode.complete){We=0,an=null;var X=R.sibling;if(X!==null)Oe=X;else{var ee=R.return;ee!==null?(Oe=ee,$l(ee)):Oe=null}break t}}We=0,an=null,Eo(n,r,x,5);break;case 6:We=0,an=null,Eo(n,r,x,6);break;case 8:Jd(),dt=6;break e;default:throw Error(o(462))}}KS();break}catch(le){ly(n,le)}while(!0);return oi=br=null,O.H=d,O.A=y,Ge=a,Oe!==null?0:(tt=null,ze=0,ol(),dt)}function KS(){for(;Oe!==null&&!Qn();)fy(Oe)}function fy(n){var r=zg(n.alternate,n,mi);n.memoizedProps=n.pendingProps,r===null?$l(n):Oe=r}function hy(n){var r=n,a=r.alternate;switch(r.tag){case 15:case 0:r=Mg(a,r,r.pendingProps,r.type,void 0,ze);break;case 11:r=Mg(a,r,r.pendingProps,r.type.render,r.ref,ze);break;case 5:pd(r);default:Bg(a,r),r=Oe=dm(r,mi),r=zg(a,r,mi)}n.memoizedProps=n.pendingProps,r===null?$l(n):Oe=r}function Eo(n,r,a,d){oi=br=null,pd(r),ho=null,ya=0;var y=r.return;try{if(PS(n,y,r,a,ze)){dt=1,kl(n,mn(a,n.current)),Oe=null;return}}catch(x){if(y!==null)throw Oe=y,x;dt=1,kl(n,mn(a,n.current)),Oe=null;return}r.flags&32768?(He||d===1?n=!0:bo||(ze&536870912)!==0?n=!1:(Pi=n=!0,(d===2||d===9||d===3||d===6)&&(d=rn.current,d!==null&&d.tag===13&&(d.flags|=16384))),py(r,n)):$l(r)}function $l(n){var r=n;do{if((r.flags&32768)!==0){py(r,Pi);return}n=r.return;var a=VS(r.alternate,r,mi);if(a!==null){Oe=a;return}if(r=r.sibling,r!==null){Oe=r;return}Oe=r=n}while(r!==null);dt===0&&(dt=5)}function py(n,r){do{var a=FS(n.alternate,n);if(a!==null){a.flags&=32767,Oe=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(n=n.sibling,n!==null)){Oe=n;return}Oe=n=a}while(n!==null);dt=6,Oe=null}function my(n,r,a,d,y,x,E,R,X){n.cancelPendingCommit=null;do Pl();while(jt!==0);if((Ge&6)!==0)throw Error(o(327));if(r!==null){if(r===n.current)throw Error(o(177));if(x=r.lanes|r.childLanes,x|=Pu,yu(n,a,x,E,R,X),n===tt&&(Oe=tt=null,ze=0),So=r,Vi=n,gi=a,Qd=x,Wd=y,ry=d,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,iN(Se,function(){return by(),null})):(n.callbackNode=null,n.callbackPriority=0),d=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||d){d=O.T,O.T=null,y=q.p,q.p=2,E=Ge,Ge|=4;try{GS(n,r,a)}finally{Ge=E,q.p=y,O.T=d}}jt=1,gy(),yy(),xy()}}function gy(){if(jt===1){jt=0;var n=Vi,r=So,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=O.T,O.T=null;var d=q.p;q.p=2;var y=Ge;Ge|=4;try{Wg(r,n);var x=ff,E=nm(n.containerInfo),R=x.focusedElem,X=x.selectionRange;if(E!==R&&R&&R.ownerDocument&&tm(R.ownerDocument.documentElement,R)){if(X!==null&&zu(R)){var ee=X.start,le=X.end;if(le===void 0&&(le=ee),"selectionStart"in R)R.selectionStart=ee,R.selectionEnd=Math.min(le,R.value.length);else{var ue=R.ownerDocument||document,ne=ue&&ue.defaultView||window;if(ne.getSelection){var oe=ne.getSelection(),me=R.textContent.length,Ne=Math.min(X.start,me),et=X.end===void 0?Ne:Math.min(X.end,me);!oe.extend&&Ne>et&&(E=et,et=Ne,Ne=E);var J=em(R,Ne),W=em(R,et);if(J&&W&&(oe.rangeCount!==1||oe.anchorNode!==J.node||oe.anchorOffset!==J.offset||oe.focusNode!==W.node||oe.focusOffset!==W.offset)){var K=ue.createRange();K.setStart(J.node,J.offset),oe.removeAllRanges(),Ne>et?(oe.addRange(K),oe.extend(W.node,W.offset)):(K.setEnd(W.node,W.offset),oe.addRange(K))}}}}for(ue=[],oe=R;oe=oe.parentNode;)oe.nodeType===1&&ue.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<ue.length;R++){var ce=ue[R];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}Kl=!!df,ff=df=null}finally{Ge=y,q.p=d,O.T=a}}n.current=r,jt=2}}function yy(){if(jt===2){jt=0;var n=Vi,r=So,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=O.T,O.T=null;var d=q.p;q.p=2;var y=Ge;Ge|=4;try{Fg(n,r.alternate,r)}finally{Ge=y,q.p=d,O.T=a}}jt=3}}function xy(){if(jt===4||jt===3){jt=0,Wn();var n=Vi,r=So,a=gi,d=ry;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?jt=5:(jt=0,So=Vi=null,vy(n,n.pendingLanes));var y=n.pendingLanes;if(y===0&&(Ui=null),ea(a),r=r.stateNode,ht&&typeof ht.onCommitFiberRoot=="function")try{ht.onCommitFiberRoot(kt,r,void 0,(r.current.flags&128)===128)}catch{}if(d!==null){r=O.T,y=q.p,q.p=2,O.T=null;try{for(var x=n.onRecoverableError,E=0;E<d.length;E++){var R=d[E];x(R.value,{componentStack:R.stack})}}finally{O.T=r,q.p=y}}(gi&3)!==0&&Pl(),qn(n),y=n.pendingLanes,(a&261930)!==0&&(y&42)!==0?n===Zd?Ra++:(Ra=0,Zd=n):Ra=0,La(0)}}function vy(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,ma(r)))}function Pl(){return gy(),yy(),xy(),by()}function by(){if(jt!==5)return!1;var n=Vi,r=Qd;Qd=0;var a=ea(gi),d=O.T,y=q.p;try{q.p=32>a?32:a,O.T=null,a=Wd,Wd=null;var x=Vi,E=gi;if(jt=0,So=Vi=null,gi=0,(Ge&6)!==0)throw Error(o(331));var R=Ge;if(Ge|=4,ty(x.current),Jg(x,x.current,E,a),Ge=R,La(0,!1),ht&&typeof ht.onPostCommitFiberRoot=="function")try{ht.onPostCommitFiberRoot(kt,x)}catch{}return!0}finally{q.p=y,O.T=d,vy(n,r)}}function wy(n,r,a){r=mn(a,r),r=Ad(n.stateNode,r,2),n=Ii(n,r,2),n!==null&&(ur(n,2),qn(n))}function Ze(n,r,a){if(n.tag===3)wy(n,n,a);else for(;r!==null;){if(r.tag===3){wy(r,n,a);break}else if(r.tag===1){var d=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ui===null||!Ui.has(d))){n=mn(a,n),a=Sg(2),d=Ii(r,a,2),d!==null&&(Ng(a,d,r,n),ur(d,2),qn(d));break}}r=r.return}}function ef(n,r,a){var d=n.pingCache;if(d===null){d=n.pingCache=new QS;var y=new Set;d.set(r,y)}else y=d.get(r),y===void 0&&(y=new Set,d.set(r,y));y.has(a)||(Gd=!0,y.add(a),n=eN.bind(null,n,r,a),r.then(n,n))}function eN(n,r,a){var d=n.pingCache;d!==null&&d.delete(r),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,tt===n&&(ze&a)===a&&(dt===4||dt===3&&(ze&62914560)===ze&&300>Nt()-Ll?(Ge&2)===0&&No(n,0):Yd|=a,wo===ze&&(wo=0)),qn(n)}function Sy(n,r){r===0&&(r=Is()),n=yr(n,r),n!==null&&(ur(n,r),qn(n))}function tN(n){var r=n.memoizedState,a=0;r!==null&&(a=r.retryLane),Sy(n,a)}function nN(n,r){var a=0;switch(n.tag){case 31:case 13:var d=n.stateNode,y=n.memoizedState;y!==null&&(a=y.retryLane);break;case 19:d=n.stateNode;break;case 22:d=n.stateNode._retryCache;break;default:throw Error(o(314))}d!==null&&d.delete(r),Sy(n,a)}function iN(n,r){return Pt(n,r)}var ql=null,jo=null,tf=!1,Ul=!1,nf=!1,Gi=0;function qn(n){n!==jo&&n.next===null&&(jo===null?ql=jo=n:jo=jo.next=n),Ul=!0,tf||(tf=!0,oN())}function La(n,r){if(!nf&&Ul){nf=!0;do for(var a=!1,d=ql;d!==null;){if(n!==0){var y=d.pendingLanes;if(y===0)var x=0;else{var E=d.suspendedLanes,R=d.pingedLanes;x=(1<<31-Qe(42|n)+1)-1,x&=y&~(E&~R),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(a=!0,Cy(d,x))}else x=ze,x=Gr(d,d===tt?x:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(x&3)===0||cr(d,x)||(a=!0,Cy(d,x));d=d.next}while(a);nf=!1}}function rN(){Ny()}function Ny(){Ul=tf=!1;var n=0;Gi!==0&&mN()&&(n=Gi);for(var r=Nt(),a=null,d=ql;d!==null;){var y=d.next,x=Ey(d,r);x===0?(d.next=null,a===null?ql=y:a.next=y,y===null&&(jo=a)):(a=d,(n!==0||(x&3)!==0)&&(Ul=!0)),d=y}jt!==0&&jt!==5||La(n),Gi!==0&&(Gi=0)}function Ey(n,r){for(var a=n.suspendedLanes,d=n.pingedLanes,y=n.expirationTimes,x=n.pendingLanes&-62914561;0<x;){var E=31-Qe(x),R=1<<E,X=y[E];X===-1?((R&a)===0||(R&d)!==0)&&(y[E]=gu(R,r)):X<=r&&(n.expiredLanes|=R),x&=~R}if(r=tt,a=ze,a=Gr(n,n===r?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),d=n.callbackNode,a===0||n===r&&(We===2||We===9)||n.cancelPendingCommit!==null)return d!==null&&d!==null&&Nn(d),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||cr(n,a)){if(r=a&-a,r===n.callbackPriority)return r;switch(d!==null&&Nn(d),ea(a)){case 2:case 8:a=pe;break;case 32:a=Se;break;case 268435456:a=$e;break;default:a=Se}return d=jy.bind(null,n),a=Pt(a,d),n.callbackPriority=r,n.callbackNode=a,r}return d!==null&&d!==null&&Nn(d),n.callbackPriority=2,n.callbackNode=null,2}function jy(n,r){if(jt!==0&&jt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(Pl()&&n.callbackNode!==a)return null;var d=ze;return d=Gr(n,n===tt?d:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),d===0?null:(ay(n,d,r),Ey(n,Nt()),n.callbackNode!=null&&n.callbackNode===a?jy.bind(null,n):null)}function Cy(n,r){if(Pl())return null;ay(n,r,!0)}function oN(){yN(function(){(Ge&6)!==0?Pt(se,rN):Ny()})}function rf(){if(Gi===0){var n=co;n===0&&(n=Ur,Ur<<=1,(Ur&261888)===0&&(Ur=256)),Gi=n}return Gi}function ky(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Zs(""+n)}function Ty(n,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,n.id&&a.setAttribute("form",n.id),r.parentNode.insertBefore(a,r),n=new FormData(n),a.parentNode.removeChild(a),n}function aN(n,r,a,d,y){if(r==="submit"&&a&&a.stateNode===y){var x=ky((y[Rt]||null).action),E=d.submitter;E&&(r=(r=E[Rt]||null)?ky(r.formAction):E.getAttribute("formAction"),r!==null&&(x=r,E=null));var R=new tl("action","action",null,d,y);n.push({event:R,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Gi!==0){var X=E?Ty(y,E):new FormData(y);Nd(a,{pending:!0,data:X,method:y.method,action:x},null,X)}}else typeof x=="function"&&(R.preventDefault(),X=E?Ty(y,E):new FormData(y),Nd(a,{pending:!0,data:X,method:y.method,action:x},x,X))},currentTarget:y}]})}}for(var of=0;of<$u.length;of++){var af=$u[of],sN=af.toLowerCase(),lN=af[0].toUpperCase()+af.slice(1);Cn(sN,"on"+lN)}Cn(om,"onAnimationEnd"),Cn(am,"onAnimationIteration"),Cn(sm,"onAnimationStart"),Cn("dblclick","onDoubleClick"),Cn("focusin","onFocus"),Cn("focusout","onBlur"),Cn(ES,"onTransitionRun"),Cn(jS,"onTransitionStart"),Cn(CS,"onTransitionCancel"),Cn(lm,"onTransitionEnd"),Ai("onMouseEnter",["mouseout","mouseover"]),Ai("onMouseLeave",["mouseout","mouseover"]),Ai("onPointerEnter",["pointerout","pointerover"]),Ai("onPointerLeave",["pointerout","pointerover"]),Kn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Kn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Kn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Kn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Kn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Kn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var za="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(za));function Ay(n,r){r=(r&4)!==0;for(var a=0;a<n.length;a++){var d=n[a],y=d.event;d=d.listeners;e:{var x=void 0;if(r)for(var E=d.length-1;0<=E;E--){var R=d[E],X=R.instance,ee=R.currentTarget;if(R=R.listener,X!==x&&y.isPropagationStopped())break e;x=R,y.currentTarget=ee;try{x(y)}catch(le){rl(le)}y.currentTarget=null,x=X}else for(E=0;E<d.length;E++){if(R=d[E],X=R.instance,ee=R.currentTarget,R=R.listener,X!==x&&y.isPropagationStopped())break e;x=R,y.currentTarget=ee;try{x(y)}catch(le){rl(le)}y.currentTarget=null,x=X}}}}function Re(n,r){var a=r[Yr];a===void 0&&(a=r[Yr]=new Set);var d=n+"__bubble";a.has(d)||(My(r,n,2,!1),a.add(d))}function sf(n,r,a){var d=0;r&&(d|=4),My(a,n,d,r)}var Vl="_reactListening"+Math.random().toString(36).slice(2);function lf(n){if(!n[Vl]){n[Vl]=!0,Fs.forEach(function(a){a!=="selectionchange"&&(cN.has(a)||sf(a,!1,n),sf(a,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Vl]||(r[Vl]=!0,sf("selectionchange",!1,r))}}function My(n,r,a,d){switch(ox(r)){case 2:var y=IN;break;case 8:y=BN;break;default:y=Nf}a=y.bind(null,r,a,n),y=void 0,!ku||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),d?y!==void 0?n.addEventListener(r,a,{capture:!0,passive:y}):n.addEventListener(r,a,!0):y!==void 0?n.addEventListener(r,a,{passive:y}):n.addEventListener(r,a,!1)}function cf(n,r,a,d,y){var x=d;if((r&1)===0&&(r&2)===0&&d!==null)e:for(;;){if(d===null)return;var E=d.tag;if(E===3||E===4){var R=d.stateNode.containerInfo;if(R===y)break;if(E===4)for(E=d.return;E!==null;){var X=E.tag;if((X===3||X===4)&&E.stateNode.containerInfo===y)return;E=E.return}for(;R!==null;){if(E=ji(R),E===null)return;if(X=E.tag,X===5||X===6||X===26||X===27){d=x=E;continue e}R=R.parentNode}}d=d.return}Lp(function(){var ee=x,le=ju(a),ue=[];e:{var ne=cm.get(n);if(ne!==void 0){var oe=tl,me=n;switch(n){case"keypress":if(Ks(a)===0)break e;case"keydown":case"keyup":oe=nS;break;case"focusin":me="focus",oe=Du;break;case"focusout":me="blur",oe=Du;break;case"beforeblur":case"afterblur":oe=Du;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=Bp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=V1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=oS;break;case om:case am:case sm:oe=Y1;break;case lm:oe=sS;break;case"scroll":case"scrollend":oe=q1;break;case"wheel":oe=cS;break;case"copy":case"cut":case"paste":oe=Q1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=$p;break;case"toggle":case"beforetoggle":oe=dS}var Ne=(r&4)!==0,et=!Ne&&(n==="scroll"||n==="scrollend"),J=Ne?ne!==null?ne+"Capture":null:ne;Ne=[];for(var W=ee,K;W!==null;){var ce=W;if(K=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||K===null||J===null||(ce=ra(W,J),ce!=null&&Ne.push(Ia(W,ce,K))),et)break;W=W.return}0<Ne.length&&(ne=new oe(ne,me,null,a,le),ue.push({event:ne,listeners:Ne}))}}if((r&7)===0){e:{if(ne=n==="mouseover"||n==="pointerover",oe=n==="mouseout"||n==="pointerout",ne&&a!==Eu&&(me=a.relatedTarget||a.fromElement)&&(ji(me)||me[Jn]))break e;if((oe||ne)&&(ne=le.window===le?le:(ne=le.ownerDocument)?ne.defaultView||ne.parentWindow:window,oe?(me=a.relatedTarget||a.toElement,oe=ee,me=me?ji(me):null,me!==null&&(et=l(me),Ne=me.tag,me!==et||Ne!==5&&Ne!==27&&Ne!==6)&&(me=null)):(oe=null,me=ee),oe!==me)){if(Ne=Bp,ce="onMouseLeave",J="onMouseEnter",W="mouse",(n==="pointerout"||n==="pointerover")&&(Ne=$p,ce="onPointerLeave",J="onPointerEnter",W="pointer"),et=oe==null?ne:ki(oe),K=me==null?ne:ki(me),ne=new Ne(ce,W+"leave",oe,a,le),ne.target=et,ne.relatedTarget=K,ce=null,ji(le)===ee&&(Ne=new Ne(J,W+"enter",me,a,le),Ne.target=K,Ne.relatedTarget=et,ce=Ne),et=ce,oe&&me)t:{for(Ne=uN,J=oe,W=me,K=0,ce=J;ce;ce=Ne(ce))K++;ce=0;for(var be=W;be;be=Ne(be))ce++;for(;0<K-ce;)J=Ne(J),K--;for(;0<ce-K;)W=Ne(W),ce--;for(;K--;){if(J===W||W!==null&&J===W.alternate){Ne=J;break t}J=Ne(J),W=Ne(W)}Ne=null}else Ne=null;oe!==null&&Dy(ue,ne,oe,Ne,!1),me!==null&&et!==null&&Dy(ue,et,me,Ne,!0)}}e:{if(ne=ee?ki(ee):window,oe=ne.nodeName&&ne.nodeName.toLowerCase(),oe==="select"||oe==="input"&&ne.type==="file")var Ve=Xp;else if(Gp(ne))if(Qp)Ve=wS;else{Ve=vS;var ye=xS}else oe=ne.nodeName,!oe||oe.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?ee&&Nu(ee.elementType)&&(Ve=Xp):Ve=bS;if(Ve&&(Ve=Ve(n,ee))){Yp(ue,Ve,a,le);break e}ye&&ye(n,ne,ee),n==="focusout"&&ee&&ne.type==="number"&&ee.memoizedProps.value!=null&&ia(ne,"number",ne.value)}switch(ye=ee?ki(ee):window,n){case"focusin":(Gp(ye)||ye.contentEditable==="true")&&(to=ye,Iu=ee,fa=null);break;case"focusout":fa=Iu=to=null;break;case"mousedown":Bu=!0;break;case"contextmenu":case"mouseup":case"dragend":Bu=!1,im(ue,a,le);break;case"selectionchange":if(NS)break;case"keydown":case"keyup":im(ue,a,le)}var Ae;if(Ou)e:{switch(n){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else eo?Vp(n,a)&&(Ie="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ie="onCompositionStart");Ie&&(Pp&&a.locale!=="ko"&&(eo||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&eo&&(Ae=zp()):(Mi=le,Tu="value"in Mi?Mi.value:Mi.textContent,eo=!0)),ye=Fl(ee,Ie),0<ye.length&&(Ie=new Hp(Ie,n,null,a,le),ue.push({event:Ie,listeners:ye}),Ae?Ie.data=Ae:(Ae=Fp(a),Ae!==null&&(Ie.data=Ae)))),(Ae=hS?pS(n,a):mS(n,a))&&(Ie=Fl(ee,"onBeforeInput"),0<Ie.length&&(ye=new Hp("onBeforeInput","beforeinput",null,a,le),ue.push({event:ye,listeners:Ie}),ye.data=Ae)),aN(ue,n,ee,a,le)}Ay(ue,r)})}function Ia(n,r,a){return{instance:n,listener:r,currentTarget:a}}function Fl(n,r){for(var a=r+"Capture",d=[];n!==null;){var y=n,x=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||x===null||(y=ra(n,a),y!=null&&d.unshift(Ia(n,y,x)),y=ra(n,r),y!=null&&d.push(Ia(n,y,x))),n.tag===3)return d;n=n.return}return[]}function uN(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Dy(n,r,a,d,y){for(var x=r._reactName,E=[];a!==null&&a!==d;){var R=a,X=R.alternate,ee=R.stateNode;if(R=R.tag,X!==null&&X===d)break;R!==5&&R!==26&&R!==27||ee===null||(X=ee,y?(ee=ra(a,x),ee!=null&&E.unshift(Ia(a,ee,X))):y||(ee=ra(a,x),ee!=null&&E.push(Ia(a,ee,X)))),a=a.return}E.length!==0&&n.push({event:r,listeners:E})}var dN=/\r\n?/g,fN=/\u0000|\uFFFD/g;function _y(n){return(typeof n=="string"?n:""+n).replace(dN,`
`).replace(fN,"")}function Oy(n,r){return r=_y(r),_y(n)===r}function Ke(n,r,a,d,y,x){switch(a){case"children":typeof d=="string"?r==="body"||r==="textarea"&&d===""||Zr(n,d):(typeof d=="number"||typeof d=="bigint")&&r!=="body"&&Zr(n,""+d);break;case"className":Qr(n,"class",d);break;case"tabIndex":Qr(n,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Qr(n,a,d);break;case"style":Op(n,d,x);break;case"data":if(r!=="object"){Qr(n,"data",d);break}case"src":case"href":if(d===""&&(r!=="a"||a!=="href")){n.removeAttribute(a);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){n.removeAttribute(a);break}d=Zs(""+d),n.setAttribute(a,d);break;case"action":case"formAction":if(typeof d=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(a==="formAction"?(r!=="input"&&Ke(n,r,"name",y.name,y,null),Ke(n,r,"formEncType",y.formEncType,y,null),Ke(n,r,"formMethod",y.formMethod,y,null),Ke(n,r,"formTarget",y.formTarget,y,null)):(Ke(n,r,"encType",y.encType,y,null),Ke(n,r,"method",y.method,y,null),Ke(n,r,"target",y.target,y,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){n.removeAttribute(a);break}d=Zs(""+d),n.setAttribute(a,d);break;case"onClick":d!=null&&(n.onclick=ti);break;case"onScroll":d!=null&&Re("scroll",n);break;case"onScrollEnd":d!=null&&Re("scrollend",n);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(o(61));if(a=d.__html,a!=null){if(y.children!=null)throw Error(o(60));n.innerHTML=a}}break;case"multiple":n.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":n.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){n.removeAttribute("xlink:href");break}a=Zs(""+d),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(a,""+d):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":d===!0?n.setAttribute(a,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(a,d):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?n.setAttribute(a,d):n.removeAttribute(a);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?n.removeAttribute(a):n.setAttribute(a,d);break;case"popover":Re("beforetoggle",n),Re("toggle",n),Xr(n,"popover",d);break;case"xlinkActuate":jn(n,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":jn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":jn(n,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":jn(n,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":jn(n,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":jn(n,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":jn(n,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":jn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":jn(n,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Xr(n,"is",d);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=$1.get(a)||a,Xr(n,a,d))}}function uf(n,r,a,d,y,x){switch(a){case"style":Op(n,d,x);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(o(61));if(a=d.__html,a!=null){if(y.children!=null)throw Error(o(60));n.innerHTML=a}}break;case"children":typeof d=="string"?Zr(n,d):(typeof d=="number"||typeof d=="bigint")&&Zr(n,""+d);break;case"onScroll":d!=null&&Re("scroll",n);break;case"onScrollEnd":d!=null&&Re("scrollend",n);break;case"onClick":d!=null&&(n.onclick=ti);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Gs.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(y=a.endsWith("Capture"),r=a.slice(2,y?a.length-7:void 0),x=n[Rt]||null,x=x!=null?x[a]:null,typeof x=="function"&&n.removeEventListener(r,x,y),typeof d=="function")){typeof x!="function"&&x!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(r,d,y);break e}a in n?n[a]=d:d===!0?n.setAttribute(a,""):Xr(n,a,d)}}}function Dt(n,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Re("error",n),Re("load",n);var d=!1,y=!1,x;for(x in a)if(a.hasOwnProperty(x)){var E=a[x];if(E!=null)switch(x){case"src":d=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,r));default:Ke(n,r,x,E,a,null)}}y&&Ke(n,r,"srcSet",a.srcSet,a,null),d&&Ke(n,r,"src",a.src,a,null);return;case"input":Re("invalid",n);var R=x=E=y=null,X=null,ee=null;for(d in a)if(a.hasOwnProperty(d)){var le=a[d];if(le!=null)switch(d){case"name":y=le;break;case"type":E=le;break;case"checked":X=le;break;case"defaultChecked":ee=le;break;case"value":x=le;break;case"defaultValue":R=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(o(137,r));break;default:Ke(n,r,d,le,a,null)}}Ws(n,x,R,X,ee,E,y,!1);return;case"select":Re("invalid",n),d=E=x=null;for(y in a)if(a.hasOwnProperty(y)&&(R=a[y],R!=null))switch(y){case"value":x=R;break;case"defaultValue":E=R;break;case"multiple":d=R;default:Ke(n,r,y,R,a,null)}r=x,a=E,n.multiple=!!d,r!=null?ei(n,!!d,r,!1):a!=null&&ei(n,!!d,a,!0);return;case"textarea":Re("invalid",n),x=y=d=null;for(E in a)if(a.hasOwnProperty(E)&&(R=a[E],R!=null))switch(E){case"value":d=R;break;case"defaultValue":y=R;break;case"children":x=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(o(91));break;default:Ke(n,r,E,R,a,null)}Dp(n,d,y,x);return;case"option":for(X in a)if(a.hasOwnProperty(X)&&(d=a[X],d!=null))switch(X){case"selected":n.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Ke(n,r,X,d,a,null)}return;case"dialog":Re("beforetoggle",n),Re("toggle",n),Re("cancel",n),Re("close",n);break;case"iframe":case"object":Re("load",n);break;case"video":case"audio":for(d=0;d<za.length;d++)Re(za[d],n);break;case"image":Re("error",n),Re("load",n);break;case"details":Re("toggle",n);break;case"embed":case"source":case"link":Re("error",n),Re("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in a)if(a.hasOwnProperty(ee)&&(d=a[ee],d!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,r));default:Ke(n,r,ee,d,a,null)}return;default:if(Nu(r)){for(le in a)a.hasOwnProperty(le)&&(d=a[le],d!==void 0&&uf(n,r,le,d,a,void 0));return}}for(R in a)a.hasOwnProperty(R)&&(d=a[R],d!=null&&Ke(n,r,R,d,a,null))}function hN(n,r,a,d){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,x=null,E=null,R=null,X=null,ee=null,le=null;for(oe in a){var ue=a[oe];if(a.hasOwnProperty(oe)&&ue!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":X=ue;default:d.hasOwnProperty(oe)||Ke(n,r,oe,null,d,ue)}}for(var ne in d){var oe=d[ne];if(ue=a[ne],d.hasOwnProperty(ne)&&(oe!=null||ue!=null))switch(ne){case"type":x=oe;break;case"name":y=oe;break;case"checked":ee=oe;break;case"defaultChecked":le=oe;break;case"value":E=oe;break;case"defaultValue":R=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(o(137,r));break;default:oe!==ue&&Ke(n,r,ne,oe,d,ue)}}hr(n,E,R,X,ee,le,x,y);return;case"select":oe=E=R=ne=null;for(x in a)if(X=a[x],a.hasOwnProperty(x)&&X!=null)switch(x){case"value":break;case"multiple":oe=X;default:d.hasOwnProperty(x)||Ke(n,r,x,null,d,X)}for(y in d)if(x=d[y],X=a[y],d.hasOwnProperty(y)&&(x!=null||X!=null))switch(y){case"value":ne=x;break;case"defaultValue":R=x;break;case"multiple":E=x;default:x!==X&&Ke(n,r,y,x,d,X)}r=R,a=E,d=oe,ne!=null?ei(n,!!a,ne,!1):!!d!=!!a&&(r!=null?ei(n,!!a,r,!0):ei(n,!!a,a?[]:"",!1));return;case"textarea":oe=ne=null;for(R in a)if(y=a[R],a.hasOwnProperty(R)&&y!=null&&!d.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:Ke(n,r,R,null,d,y)}for(E in d)if(y=d[E],x=a[E],d.hasOwnProperty(E)&&(y!=null||x!=null))switch(E){case"value":ne=y;break;case"defaultValue":oe=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(o(91));break;default:y!==x&&Ke(n,r,E,y,d,x)}Mp(n,ne,oe);return;case"option":for(var me in a)if(ne=a[me],a.hasOwnProperty(me)&&ne!=null&&!d.hasOwnProperty(me))switch(me){case"selected":n.selected=!1;break;default:Ke(n,r,me,null,d,ne)}for(X in d)if(ne=d[X],oe=a[X],d.hasOwnProperty(X)&&ne!==oe&&(ne!=null||oe!=null))switch(X){case"selected":n.selected=ne&&typeof ne!="function"&&typeof ne!="symbol";break;default:Ke(n,r,X,ne,d,oe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in a)ne=a[Ne],a.hasOwnProperty(Ne)&&ne!=null&&!d.hasOwnProperty(Ne)&&Ke(n,r,Ne,null,d,ne);for(ee in d)if(ne=d[ee],oe=a[ee],d.hasOwnProperty(ee)&&ne!==oe&&(ne!=null||oe!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(o(137,r));break;default:Ke(n,r,ee,ne,d,oe)}return;default:if(Nu(r)){for(var et in a)ne=a[et],a.hasOwnProperty(et)&&ne!==void 0&&!d.hasOwnProperty(et)&&uf(n,r,et,void 0,d,ne);for(le in d)ne=d[le],oe=a[le],!d.hasOwnProperty(le)||ne===oe||ne===void 0&&oe===void 0||uf(n,r,le,ne,d,oe);return}}for(var J in a)ne=a[J],a.hasOwnProperty(J)&&ne!=null&&!d.hasOwnProperty(J)&&Ke(n,r,J,null,d,ne);for(ue in d)ne=d[ue],oe=a[ue],!d.hasOwnProperty(ue)||ne===oe||ne==null&&oe==null||Ke(n,r,ue,ne,d,oe)}function Ry(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function pN(){if(typeof performance.getEntriesByType=="function"){for(var n=0,r=0,a=performance.getEntriesByType("resource"),d=0;d<a.length;d++){var y=a[d],x=y.transferSize,E=y.initiatorType,R=y.duration;if(x&&R&&Ry(E)){for(E=0,R=y.responseEnd,d+=1;d<a.length;d++){var X=a[d],ee=X.startTime;if(ee>R)break;var le=X.transferSize,ue=X.initiatorType;le&&Ry(ue)&&(X=X.responseEnd,E+=le*(X<R?1:(R-ee)/(X-ee)))}if(--d,r+=8*(x+E)/(y.duration/1e3),n++,10<n)break}}if(0<n)return r/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var df=null,ff=null;function Gl(n){return n.nodeType===9?n:n.ownerDocument}function Ly(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zy(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function hf(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var pf=null;function mN(){var n=window.event;return n&&n.type==="popstate"?n===pf?!1:(pf=n,!0):(pf=null,!1)}var Iy=typeof setTimeout=="function"?setTimeout:void 0,gN=typeof clearTimeout=="function"?clearTimeout:void 0,By=typeof Promise=="function"?Promise:void 0,yN=typeof queueMicrotask=="function"?queueMicrotask:typeof By<"u"?function(n){return By.resolve(null).then(n).catch(xN)}:Iy;function xN(n){setTimeout(function(){throw n})}function Yi(n){return n==="head"}function Hy(n,r){var a=r,d=0;do{var y=a.nextSibling;if(n.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"||a==="/&"){if(d===0){n.removeChild(y),Ao(r);return}d--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")d++;else if(a==="html")Ba(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,Ba(a);for(var x=a.firstChild;x;){var E=x.nextSibling,R=x.nodeName;x[dr]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&x.rel.toLowerCase()==="stylesheet"||a.removeChild(x),x=E}}else a==="body"&&Ba(n.ownerDocument.body);a=y}while(a);Ao(r)}function $y(n,r){var a=n;n=0;do{var d=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=d}while(a)}function mf(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":mf(a),ta(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function vN(n,r,a,d){for(;n.nodeType===1;){var y=a;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!d&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(d){if(!n[dr])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(x=n.getAttribute("rel"),x==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(x!==y.rel||n.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||n.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||n.getAttribute("title")!==(y.title==null?null:y.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(x=n.getAttribute("src"),(x!==(y.src==null?null:y.src)||n.getAttribute("type")!==(y.type==null?null:y.type)||n.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&x&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var x=y.name==null?null:""+y.name;if(y.type==="hidden"&&n.getAttribute("name")===x)return n}else return n;if(n=bn(n.nextSibling),n===null)break}return null}function bN(n,r,a){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=bn(n.nextSibling),n===null))return null;return n}function Py(n,r){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=bn(n.nextSibling),n===null))return null;return n}function gf(n){return n.data==="$?"||n.data==="$~"}function yf(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function wN(n,r){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=r;else if(n.data!=="$?"||a.readyState!=="loading")r();else{var d=function(){r(),a.removeEventListener("DOMContentLoaded",d)};a.addEventListener("DOMContentLoaded",d),n._reactRetry=d}}function bn(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return n}var xf=null;function qy(n){n=n.nextSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(r===0)return bn(n.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}n=n.nextSibling}return null}function Uy(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return n;r--}else a!=="/$"&&a!=="/&"||r++}n=n.previousSibling}return null}function Vy(n,r,a){switch(r=Gl(a),n){case"html":if(n=r.documentElement,!n)throw Error(o(452));return n;case"head":if(n=r.head,!n)throw Error(o(453));return n;case"body":if(n=r.body,!n)throw Error(o(454));return n;default:throw Error(o(451))}}function Ba(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);ta(n)}var wn=new Map,Fy=new Set;function Yl(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var yi=q.d;q.d={f:SN,r:NN,D:EN,C:jN,L:CN,m:kN,X:AN,S:TN,M:MN};function SN(){var n=yi.f(),r=Bl();return n||r}function NN(n){var r=Ci(n);r!==null&&r.tag===5&&r.type==="form"?lg(r):yi.r(n)}var Co=typeof document>"u"?null:document;function Gy(n,r,a){var d=Co;if(d&&typeof r=="string"&&r){var y=Ut(r);y='link[rel="'+n+'"][href="'+y+'"]',typeof a=="string"&&(y+='[crossorigin="'+a+'"]'),Fy.has(y)||(Fy.add(y),n={rel:n,crossOrigin:a,href:r},d.querySelector(y)===null&&(r=d.createElement("link"),Dt(r,"link",n),gt(r),d.head.appendChild(r)))}}function EN(n){yi.D(n),Gy("dns-prefetch",n,null)}function jN(n,r){yi.C(n,r),Gy("preconnect",n,r)}function CN(n,r,a){yi.L(n,r,a);var d=Co;if(d&&n&&r){var y='link[rel="preload"][as="'+Ut(r)+'"]';r==="image"&&a&&a.imageSrcSet?(y+='[imagesrcset="'+Ut(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(y+='[imagesizes="'+Ut(a.imageSizes)+'"]')):y+='[href="'+Ut(n)+'"]';var x=y;switch(r){case"style":x=ko(n);break;case"script":x=To(n)}wn.has(x)||(n=g({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:n,as:r},a),wn.set(x,n),d.querySelector(y)!==null||r==="style"&&d.querySelector(Ha(x))||r==="script"&&d.querySelector($a(x))||(r=d.createElement("link"),Dt(r,"link",n),gt(r),d.head.appendChild(r)))}}function kN(n,r){yi.m(n,r);var a=Co;if(a&&n){var d=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+Ut(d)+'"][href="'+Ut(n)+'"]',x=y;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=To(n)}if(!wn.has(x)&&(n=g({rel:"modulepreload",href:n},r),wn.set(x,n),a.querySelector(y)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector($a(x)))return}d=a.createElement("link"),Dt(d,"link",n),gt(d),a.head.appendChild(d)}}}function TN(n,r,a){yi.S(n,r,a);var d=Co;if(d&&n){var y=Ti(d).hoistableStyles,x=ko(n);r=r||"default";var E=y.get(x);if(!E){var R={loading:0,preload:null};if(E=d.querySelector(Ha(x)))R.loading=5;else{n=g({rel:"stylesheet",href:n,"data-precedence":r},a),(a=wn.get(x))&&vf(n,a);var X=E=d.createElement("link");gt(X),Dt(X,"link",n),X._p=new Promise(function(ee,le){X.onload=ee,X.onerror=le}),X.addEventListener("load",function(){R.loading|=1}),X.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Xl(E,r,d)}E={type:"stylesheet",instance:E,count:1,state:R},y.set(x,E)}}}function AN(n,r){yi.X(n,r);var a=Co;if(a&&n){var d=Ti(a).hoistableScripts,y=To(n),x=d.get(y);x||(x=a.querySelector($a(y)),x||(n=g({src:n,async:!0},r),(r=wn.get(y))&&bf(n,r),x=a.createElement("script"),gt(x),Dt(x,"link",n),a.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},d.set(y,x))}}function MN(n,r){yi.M(n,r);var a=Co;if(a&&n){var d=Ti(a).hoistableScripts,y=To(n),x=d.get(y);x||(x=a.querySelector($a(y)),x||(n=g({src:n,async:!0,type:"module"},r),(r=wn.get(y))&&bf(n,r),x=a.createElement("script"),gt(x),Dt(x,"link",n),a.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},d.set(y,x))}}function Yy(n,r,a,d){var y=(y=re.current)?Yl(y):null;if(!y)throw Error(o(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=ko(a.href),a=Ti(y).hoistableStyles,d=a.get(r),d||(d={type:"style",instance:null,count:0,state:null},a.set(r,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=ko(a.href);var x=Ti(y).hoistableStyles,E=x.get(n);if(E||(y=y.ownerDocument||y,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(n,E),(x=y.querySelector(Ha(n)))&&!x._p&&(E.instance=x,E.state.loading=5),wn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},wn.set(n,a),x||DN(y,n,a,E.state))),r&&d===null)throw Error(o(528,""));return E}if(r&&d!==null)throw Error(o(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=To(a),a=Ti(y).hoistableScripts,d=a.get(r),d||(d={type:"script",instance:null,count:0,state:null},a.set(r,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,n))}}function ko(n){return'href="'+Ut(n)+'"'}function Ha(n){return'link[rel="stylesheet"]['+n+"]"}function Xy(n){return g({},n,{"data-precedence":n.precedence,precedence:null})}function DN(n,r,a,d){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?d.loading=1:(r=n.createElement("link"),d.preload=r,r.addEventListener("load",function(){return d.loading|=1}),r.addEventListener("error",function(){return d.loading|=2}),Dt(r,"link",a),gt(r),n.head.appendChild(r))}function To(n){return'[src="'+Ut(n)+'"]'}function $a(n){return"script[async]"+n}function Qy(n,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var d=n.querySelector('style[data-href~="'+Ut(a.href)+'"]');if(d)return r.instance=d,gt(d),d;var y=g({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return d=(n.ownerDocument||n).createElement("style"),gt(d),Dt(d,"style",y),Xl(d,a.precedence,n),r.instance=d;case"stylesheet":y=ko(a.href);var x=n.querySelector(Ha(y));if(x)return r.state.loading|=4,r.instance=x,gt(x),x;d=Xy(a),(y=wn.get(y))&&vf(d,y),x=(n.ownerDocument||n).createElement("link"),gt(x);var E=x;return E._p=new Promise(function(R,X){E.onload=R,E.onerror=X}),Dt(x,"link",d),r.state.loading|=4,Xl(x,a.precedence,n),r.instance=x;case"script":return x=To(a.src),(y=n.querySelector($a(x)))?(r.instance=y,gt(y),y):(d=a,(y=wn.get(x))&&(d=g({},a),bf(d,y)),n=n.ownerDocument||n,y=n.createElement("script"),gt(y),Dt(y,"link",d),n.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(o(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(d=r.instance,r.state.loading|=4,Xl(d,a.precedence,n));return r.instance}function Xl(n,r,a){for(var d=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=d.length?d[d.length-1]:null,x=y,E=0;E<d.length;E++){var R=d[E];if(R.dataset.precedence===r)x=R;else if(x!==y)break}x?x.parentNode.insertBefore(n,x.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(n,r.firstChild))}function vf(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function bf(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var Ql=null;function Wy(n,r,a){if(Ql===null){var d=new Map,y=Ql=new Map;y.set(a,d)}else y=Ql,d=y.get(a),d||(d=new Map,y.set(a,d));if(d.has(n))return d;for(d.set(n,null),a=a.getElementsByTagName(n),y=0;y<a.length;y++){var x=a[y];if(!(x[dr]||x[Et]||n==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var E=x.getAttribute(r)||"";E=n+E;var R=d.get(E);R?R.push(x):d.set(E,[x])}}return d}function Zy(n,r,a){n=n.ownerDocument||n,n.head.insertBefore(a,r==="title"?n.querySelector("head > title"):null)}function _N(n,r,a){if(a===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return n=r.disabled,typeof r.precedence=="string"&&n==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Jy(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function ON(n,r,a,d){if(a.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var y=ko(d.href),x=r.querySelector(Ha(y));if(x){r=x._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(n.count++,n=Wl.bind(n),r.then(n,n)),a.state.loading|=4,a.instance=x,gt(x);return}x=r.ownerDocument||r,d=Xy(d),(y=wn.get(y))&&vf(d,y),x=x.createElement("link"),gt(x);var E=x;E._p=new Promise(function(R,X){E.onload=R,E.onerror=X}),Dt(x,"link",d),a.instance=x}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=Wl.bind(n),r.addEventListener("load",a),r.addEventListener("error",a))}}var wf=0;function RN(n,r){return n.stylesheets&&n.count===0&&Jl(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var d=setTimeout(function(){if(n.stylesheets&&Jl(n,n.stylesheets),n.unsuspend){var x=n.unsuspend;n.unsuspend=null,x()}},6e4+r);0<n.imgBytes&&wf===0&&(wf=62500*pN());var y=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Jl(n,n.stylesheets),n.unsuspend)){var x=n.unsuspend;n.unsuspend=null,x()}},(n.imgBytes>wf?50:800)+r);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(d),clearTimeout(y)}}:null}function Wl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Jl(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Zl=null;function Jl(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Zl=new Map,r.forEach(LN,n),Zl=null,Wl.call(n))}function LN(n,r){if(!(r.state.loading&4)){var a=Zl.get(n);if(a)var d=a.get(null);else{a=new Map,Zl.set(n,a);for(var y=n.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<y.length;x++){var E=y[x];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(a.set(E.dataset.precedence,E),d=E)}d&&a.set(null,d)}y=r.instance,E=y.getAttribute("data-precedence"),x=a.get(E)||d,x===d&&a.set(null,y),a.set(E,y),this.count++,d=Wl.bind(this),y.addEventListener("load",d),y.addEventListener("error",d),x?x.parentNode.insertBefore(y,x.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(y,n.firstChild)),r.state.loading|=4}}var Pa={$$typeof:j,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function zN(n,r,a,d,y,x,E,R,X){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Jo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jo(0),this.hiddenUpdates=Jo(null),this.identifierPrefix=d,this.onUncaughtError=y,this.onCaughtError=x,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=X,this.incompleteTransitions=new Map}function Ky(n,r,a,d,y,x,E,R,X,ee,le,ue){return n=new zN(n,r,a,E,X,ee,le,ue,R),r=1,x===!0&&(r|=24),x=nn(3,null,null,r),n.current=x,x.stateNode=n,r=Ku(),r.refCount++,n.pooledCache=r,r.refCount++,x.memoizedState={element:d,isDehydrated:a,cache:r},id(x),n}function ex(n){return n?(n=ro,n):ro}function tx(n,r,a,d,y,x){y=ex(y),d.context===null?d.context=y:d.pendingContext=y,d=zi(r),d.payload={element:a},x=x===void 0?null:x,x!==null&&(d.callback=x),a=Ii(n,d,r),a!==null&&(Qt(a,n,r),va(a,n,r))}function nx(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<r?a:r}}function Sf(n,r){nx(n,r),(n=n.alternate)&&nx(n,r)}function ix(n){if(n.tag===13||n.tag===31){var r=yr(n,67108864);r!==null&&Qt(r,n,67108864),Sf(n,67108864)}}function rx(n){if(n.tag===13||n.tag===31){var r=ln();r=Ko(r);var a=yr(n,r);a!==null&&Qt(a,n,r),Sf(n,r)}}var Kl=!0;function IN(n,r,a,d){var y=O.T;O.T=null;var x=q.p;try{q.p=2,Nf(n,r,a,d)}finally{q.p=x,O.T=y}}function BN(n,r,a,d){var y=O.T;O.T=null;var x=q.p;try{q.p=8,Nf(n,r,a,d)}finally{q.p=x,O.T=y}}function Nf(n,r,a,d){if(Kl){var y=Ef(d);if(y===null)cf(n,r,d,ec,a),ax(n,d);else if($N(y,n,r,a,d))d.stopPropagation();else if(ax(n,d),r&4&&-1<HN.indexOf(n)){for(;y!==null;){var x=Ci(y);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var E=Zn(x.pendingLanes);if(E!==0){var R=x;for(R.pendingLanes|=2,R.entangledLanes|=2;E;){var X=1<<31-Qe(E);R.entanglements[1]|=X,E&=~X}qn(x),(Ge&6)===0&&(zl=Nt()+500,La(0))}}break;case 31:case 13:R=yr(x,2),R!==null&&Qt(R,x,2),Bl(),Sf(x,2)}if(x=Ef(d),x===null&&cf(n,r,d,ec,a),x===y)break;y=x}y!==null&&d.stopPropagation()}else cf(n,r,d,null,a)}}function Ef(n){return n=ju(n),jf(n)}var ec=null;function jf(n){if(ec=null,n=ji(n),n!==null){var r=l(n);if(r===null)n=null;else{var a=r.tag;if(a===13){if(n=c(r),n!==null)return n;n=null}else if(a===31){if(n=f(r),n!==null)return n;n=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return ec=n,null}function ox(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ei()){case se:return 2;case pe:return 8;case Se:case _e:return 32;case $e:return 268435456;default:return 32}default:return 32}}var Cf=!1,Xi=null,Qi=null,Wi=null,qa=new Map,Ua=new Map,Zi=[],HN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ax(n,r){switch(n){case"focusin":case"focusout":Xi=null;break;case"dragenter":case"dragleave":Qi=null;break;case"mouseover":case"mouseout":Wi=null;break;case"pointerover":case"pointerout":qa.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ua.delete(r.pointerId)}}function Va(n,r,a,d,y,x){return n===null||n.nativeEvent!==x?(n={blockedOn:r,domEventName:a,eventSystemFlags:d,nativeEvent:x,targetContainers:[y]},r!==null&&(r=Ci(r),r!==null&&ix(r)),n):(n.eventSystemFlags|=d,r=n.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),n)}function $N(n,r,a,d,y){switch(r){case"focusin":return Xi=Va(Xi,n,r,a,d,y),!0;case"dragenter":return Qi=Va(Qi,n,r,a,d,y),!0;case"mouseover":return Wi=Va(Wi,n,r,a,d,y),!0;case"pointerover":var x=y.pointerId;return qa.set(x,Va(qa.get(x)||null,n,r,a,d,y)),!0;case"gotpointercapture":return x=y.pointerId,Ua.set(x,Va(Ua.get(x)||null,n,r,a,d,y)),!0}return!1}function sx(n){var r=ji(n.target);if(r!==null){var a=l(r);if(a!==null){if(r=a.tag,r===13){if(r=c(a),r!==null){n.blockedOn=r,qs(n.priority,function(){rx(a)});return}}else if(r===31){if(r=f(a),r!==null){n.blockedOn=r,qs(n.priority,function(){rx(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function tc(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var a=Ef(n.nativeEvent);if(a===null){a=n.nativeEvent;var d=new a.constructor(a.type,a);Eu=d,a.target.dispatchEvent(d),Eu=null}else return r=Ci(a),r!==null&&ix(r),n.blockedOn=a,!1;r.shift()}return!0}function lx(n,r,a){tc(n)&&a.delete(r)}function PN(){Cf=!1,Xi!==null&&tc(Xi)&&(Xi=null),Qi!==null&&tc(Qi)&&(Qi=null),Wi!==null&&tc(Wi)&&(Wi=null),qa.forEach(lx),Ua.forEach(lx)}function nc(n,r){n.blockedOn===r&&(n.blockedOn=null,Cf||(Cf=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,PN)))}var ic=null;function cx(n){ic!==n&&(ic=n,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){ic===n&&(ic=null);for(var r=0;r<n.length;r+=3){var a=n[r],d=n[r+1],y=n[r+2];if(typeof d!="function"){if(jf(d||a)===null)continue;break}var x=Ci(a);x!==null&&(n.splice(r,3),r-=3,Nd(x,{pending:!0,data:y,method:a.method,action:d},d,y))}}))}function Ao(n){function r(X){return nc(X,n)}Xi!==null&&nc(Xi,n),Qi!==null&&nc(Qi,n),Wi!==null&&nc(Wi,n),qa.forEach(r),Ua.forEach(r);for(var a=0;a<Zi.length;a++){var d=Zi[a];d.blockedOn===n&&(d.blockedOn=null)}for(;0<Zi.length&&(a=Zi[0],a.blockedOn===null);)sx(a),a.blockedOn===null&&Zi.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(d=0;d<a.length;d+=3){var y=a[d],x=a[d+1],E=y[Rt]||null;if(typeof x=="function")E||cx(a);else if(E){var R=null;if(x&&x.hasAttribute("formAction")){if(y=x,E=x[Rt]||null)R=E.formAction;else if(jf(y)!==null)continue}else R=E.action;typeof R=="function"?a[d+1]=R:(a.splice(d,3),d-=3),cx(a)}}}function ux(){function n(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(E){return y=E})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),d||setTimeout(a,20)}function a(){if(!d&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,y=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){d=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function kf(n){this._internalRoot=n}rc.prototype.render=kf.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(o(409));var a=r.current,d=ln();tx(a,d,n,r,null,null)},rc.prototype.unmount=kf.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;tx(n.current,2,null,n,null,null),Bl(),r[Jn]=null}};function rc(n){this._internalRoot=n}rc.prototype.unstable_scheduleHydration=function(n){if(n){var r=Ps();n={blockedOn:null,target:n,priority:r};for(var a=0;a<Zi.length&&r!==0&&r<Zi[a].priority;a++);Zi.splice(a,0,n),a===0&&sx(n)}};var dx=t.version;if(dx!=="19.2.3")throw Error(o(527,dx,"19.2.3"));q.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(o(188)):(n=Object.keys(n).join(","),Error(o(268,n)));return n=p(r),n=n!==null?m(n):null,n=n===null?null:n.stateNode,n};var qN={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oc.isDisabled&&oc.supportsFiber)try{kt=oc.inject(qN),ht=oc}catch{}}return Ga.createRoot=function(n,r){if(!s(n))throw Error(o(299));var a=!1,d="",y=xg,x=vg,E=bg;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(x=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError)),r=Ky(n,1,!1,null,null,a,d,null,y,x,E,ux),n[Jn]=r.current,lf(n),new kf(r)},Ga.hydrateRoot=function(n,r,a){if(!s(n))throw Error(o(299));var d=!1,y="",x=xg,E=vg,R=bg,X=null;return a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onUncaughtError!==void 0&&(x=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(R=a.onRecoverableError),a.formState!==void 0&&(X=a.formState)),r=Ky(n,1,!0,r,a??null,d,y,X,x,E,R,ux),r.context=ex(null),a=r.current,d=ln(),d=Ko(d),y=zi(d),y.callback=null,Ii(a,y,d),a=d,r.current.lanes=a,ur(r,a),qn(r),n[Jn]=r.current,lf(n),new rc(r)},Ga.version="19.2.3",Ga}var wx;function ZN(){if(wx)return Mf.exports;wx=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Mf.exports=WN(),Mf.exports}var JN=ZN();function St(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let i=0,o;i<e.length;i++)(o=St(e[i]))!==""&&(t+=(t&&" ")+o);else for(let i in e)e[i]&&(t+=(t&&" ")+i);return t}var KN={value:()=>{}};function Qc(){for(var e=0,t=arguments.length,i={},o;e<t;++e){if(!(o=arguments[e]+"")||o in i||/[\s.]/.test(o))throw new Error("illegal type: "+o);i[o]=[]}return new Nc(i)}function Nc(e){this._=e}function eE(e,t){return e.trim().split(/^|\s+/).map(function(i){var o="",s=i.indexOf(".");if(s>=0&&(o=i.slice(s+1),i=i.slice(0,s)),i&&!t.hasOwnProperty(i))throw new Error("unknown type: "+i);return{type:i,name:o}})}Nc.prototype=Qc.prototype={constructor:Nc,on:function(e,t){var i=this._,o=eE(e+"",i),s,l=-1,c=o.length;if(arguments.length<2){for(;++l<c;)if((s=(e=o[l]).type)&&(s=tE(i[s],e.name)))return s;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++l<c;)if(s=(e=o[l]).type)i[s]=Sx(i[s],e.name,t);else if(t==null)for(s in i)i[s]=Sx(i[s],e.name,null);return this},copy:function(){var e={},t=this._;for(var i in t)e[i]=t[i].slice();return new Nc(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var i=new Array(s),o=0,s,l;o<s;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(l=this._[e],o=0,s=l.length;o<s;++o)l[o].value.apply(t,i)},apply:function(e,t,i){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],s=0,l=o.length;s<l;++s)o[s].value.apply(t,i)}};function tE(e,t){for(var i=0,o=e.length,s;i<o;++i)if((s=e[i]).name===t)return s.value}function Sx(e,t,i){for(var o=0,s=e.length;o<s;++o)if(e[o].name===t){e[o]=KN,e=e.slice(0,o).concat(e.slice(o+1));break}return i!=null&&e.push({name:t,value:i}),e}var gh="http://www.w3.org/1999/xhtml";const Nx={svg:"http://www.w3.org/2000/svg",xhtml:gh,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Wc(e){var t=e+="",i=t.indexOf(":");return i>=0&&(t=e.slice(0,i))!=="xmlns"&&(e=e.slice(i+1)),Nx.hasOwnProperty(t)?{space:Nx[t],local:e}:e}function nE(e){return function(){var t=this.ownerDocument,i=this.namespaceURI;return i===gh&&t.documentElement.namespaceURI===gh?t.createElement(e):t.createElementNS(i,e)}}function iE(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function zb(e){var t=Wc(e);return(t.local?iE:nE)(t)}function rE(){}function Xh(e){return e==null?rE:function(){return this.querySelector(e)}}function oE(e){typeof e!="function"&&(e=Xh(e));for(var t=this._groups,i=t.length,o=new Array(i),s=0;s<i;++s)for(var l=t[s],c=l.length,f=o[s]=new Array(c),h,p,m=0;m<c;++m)(h=l[m])&&(p=e.call(h,h.__data__,m,l))&&("__data__"in h&&(p.__data__=h.__data__),f[m]=p);return new hn(o,this._parents)}function aE(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function sE(){return[]}function Ib(e){return e==null?sE:function(){return this.querySelectorAll(e)}}function lE(e){return function(){return aE(e.apply(this,arguments))}}function cE(e){typeof e=="function"?e=lE(e):e=Ib(e);for(var t=this._groups,i=t.length,o=[],s=[],l=0;l<i;++l)for(var c=t[l],f=c.length,h,p=0;p<f;++p)(h=c[p])&&(o.push(e.call(h,h.__data__,p,c)),s.push(h));return new hn(o,s)}function Bb(e){return function(){return this.matches(e)}}function Hb(e){return function(t){return t.matches(e)}}var uE=Array.prototype.find;function dE(e){return function(){return uE.call(this.children,e)}}function fE(){return this.firstElementChild}function hE(e){return this.select(e==null?fE:dE(typeof e=="function"?e:Hb(e)))}var pE=Array.prototype.filter;function mE(){return Array.from(this.children)}function gE(e){return function(){return pE.call(this.children,e)}}function yE(e){return this.selectAll(e==null?mE:gE(typeof e=="function"?e:Hb(e)))}function xE(e){typeof e!="function"&&(e=Bb(e));for(var t=this._groups,i=t.length,o=new Array(i),s=0;s<i;++s)for(var l=t[s],c=l.length,f=o[s]=[],h,p=0;p<c;++p)(h=l[p])&&e.call(h,h.__data__,p,l)&&f.push(h);return new hn(o,this._parents)}function $b(e){return new Array(e.length)}function vE(){return new hn(this._enter||this._groups.map($b),this._parents)}function Ac(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Ac.prototype={constructor:Ac,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function bE(e){return function(){return e}}function wE(e,t,i,o,s,l){for(var c=0,f,h=t.length,p=l.length;c<p;++c)(f=t[c])?(f.__data__=l[c],o[c]=f):i[c]=new Ac(e,l[c]);for(;c<h;++c)(f=t[c])&&(s[c]=f)}function SE(e,t,i,o,s,l,c){var f,h,p=new Map,m=t.length,g=l.length,v=new Array(m),b;for(f=0;f<m;++f)(h=t[f])&&(v[f]=b=c.call(h,h.__data__,f,t)+"",p.has(b)?s[f]=h:p.set(b,h));for(f=0;f<g;++f)b=c.call(e,l[f],f,l)+"",(h=p.get(b))?(o[f]=h,h.__data__=l[f],p.delete(b)):i[f]=new Ac(e,l[f]);for(f=0;f<m;++f)(h=t[f])&&p.get(v[f])===h&&(s[f]=h)}function NE(e){return e.__data__}function EE(e,t){if(!arguments.length)return Array.from(this,NE);var i=t?SE:wE,o=this._parents,s=this._groups;typeof e!="function"&&(e=bE(e));for(var l=s.length,c=new Array(l),f=new Array(l),h=new Array(l),p=0;p<l;++p){var m=o[p],g=s[p],v=g.length,b=jE(e.call(m,m&&m.__data__,p,o)),w=b.length,N=f[p]=new Array(w),C=c[p]=new Array(w),S=h[p]=new Array(v);i(m,g,N,C,S,b,t);for(var k=0,j=0,_,$;k<w;++k)if(_=N[k]){for(k>=j&&(j=k+1);!($=C[j])&&++j<w;);_._next=$||null}}return c=new hn(c,o),c._enter=f,c._exit=h,c}function jE(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function CE(){return new hn(this._exit||this._groups.map($b),this._parents)}function kE(e,t,i){var o=this.enter(),s=this,l=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(s=t(s),s&&(s=s.selection())),i==null?l.remove():i(l),o&&s?o.merge(s).order():s}function TE(e){for(var t=e.selection?e.selection():e,i=this._groups,o=t._groups,s=i.length,l=o.length,c=Math.min(s,l),f=new Array(s),h=0;h<c;++h)for(var p=i[h],m=o[h],g=p.length,v=f[h]=new Array(g),b,w=0;w<g;++w)(b=p[w]||m[w])&&(v[w]=b);for(;h<s;++h)f[h]=i[h];return new hn(f,this._parents)}function AE(){for(var e=this._groups,t=-1,i=e.length;++t<i;)for(var o=e[t],s=o.length-1,l=o[s],c;--s>=0;)(c=o[s])&&(l&&c.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(c,l),l=c);return this}function ME(e){e||(e=DE);function t(g,v){return g&&v?e(g.__data__,v.__data__):!g-!v}for(var i=this._groups,o=i.length,s=new Array(o),l=0;l<o;++l){for(var c=i[l],f=c.length,h=s[l]=new Array(f),p,m=0;m<f;++m)(p=c[m])&&(h[m]=p);h.sort(t)}return new hn(s,this._parents).order()}function DE(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function _E(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function OE(){return Array.from(this)}function RE(){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var o=e[t],s=0,l=o.length;s<l;++s){var c=o[s];if(c)return c}return null}function LE(){let e=0;for(const t of this)++e;return e}function zE(){return!this.node()}function IE(e){for(var t=this._groups,i=0,o=t.length;i<o;++i)for(var s=t[i],l=0,c=s.length,f;l<c;++l)(f=s[l])&&e.call(f,f.__data__,l,s);return this}function BE(e){return function(){this.removeAttribute(e)}}function HE(e){return function(){this.removeAttributeNS(e.space,e.local)}}function $E(e,t){return function(){this.setAttribute(e,t)}}function PE(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function qE(e,t){return function(){var i=t.apply(this,arguments);i==null?this.removeAttribute(e):this.setAttribute(e,i)}}function UE(e,t){return function(){var i=t.apply(this,arguments);i==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,i)}}function VE(e,t){var i=Wc(e);if(arguments.length<2){var o=this.node();return i.local?o.getAttributeNS(i.space,i.local):o.getAttribute(i)}return this.each((t==null?i.local?HE:BE:typeof t=="function"?i.local?UE:qE:i.local?PE:$E)(i,t))}function Pb(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function FE(e){return function(){this.style.removeProperty(e)}}function GE(e,t,i){return function(){this.style.setProperty(e,t,i)}}function YE(e,t,i){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,i)}}function XE(e,t,i){return arguments.length>1?this.each((t==null?FE:typeof t=="function"?YE:GE)(e,t,i??"")):Po(this.node(),e)}function Po(e,t){return e.style.getPropertyValue(t)||Pb(e).getComputedStyle(e,null).getPropertyValue(t)}function QE(e){return function(){delete this[e]}}function WE(e,t){return function(){this[e]=t}}function ZE(e,t){return function(){var i=t.apply(this,arguments);i==null?delete this[e]:this[e]=i}}function JE(e,t){return arguments.length>1?this.each((t==null?QE:typeof t=="function"?ZE:WE)(e,t)):this.node()[e]}function qb(e){return e.trim().split(/^|\s+/)}function Qh(e){return e.classList||new Ub(e)}function Ub(e){this._node=e,this._names=qb(e.getAttribute("class")||"")}Ub.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Vb(e,t){for(var i=Qh(e),o=-1,s=t.length;++o<s;)i.add(t[o])}function Fb(e,t){for(var i=Qh(e),o=-1,s=t.length;++o<s;)i.remove(t[o])}function KE(e){return function(){Vb(this,e)}}function ej(e){return function(){Fb(this,e)}}function tj(e,t){return function(){(t.apply(this,arguments)?Vb:Fb)(this,e)}}function nj(e,t){var i=qb(e+"");if(arguments.length<2){for(var o=Qh(this.node()),s=-1,l=i.length;++s<l;)if(!o.contains(i[s]))return!1;return!0}return this.each((typeof t=="function"?tj:t?KE:ej)(i,t))}function ij(){this.textContent=""}function rj(e){return function(){this.textContent=e}}function oj(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function aj(e){return arguments.length?this.each(e==null?ij:(typeof e=="function"?oj:rj)(e)):this.node().textContent}function sj(){this.innerHTML=""}function lj(e){return function(){this.innerHTML=e}}function cj(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function uj(e){return arguments.length?this.each(e==null?sj:(typeof e=="function"?cj:lj)(e)):this.node().innerHTML}function dj(){this.nextSibling&&this.parentNode.appendChild(this)}function fj(){return this.each(dj)}function hj(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function pj(){return this.each(hj)}function mj(e){var t=typeof e=="function"?e:zb(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function gj(){return null}function yj(e,t){var i=typeof e=="function"?e:zb(e),o=t==null?gj:typeof t=="function"?t:Xh(t);return this.select(function(){return this.insertBefore(i.apply(this,arguments),o.apply(this,arguments)||null)})}function xj(){var e=this.parentNode;e&&e.removeChild(this)}function vj(){return this.each(xj)}function bj(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function wj(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Sj(e){return this.select(e?wj:bj)}function Nj(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Ej(e){return function(t){e.call(this,t,this.__data__)}}function jj(e){return e.trim().split(/^|\s+/).map(function(t){var i="",o=t.indexOf(".");return o>=0&&(i=t.slice(o+1),t=t.slice(0,o)),{type:t,name:i}})}function Cj(e){return function(){var t=this.__on;if(t){for(var i=0,o=-1,s=t.length,l;i<s;++i)l=t[i],(!e.type||l.type===e.type)&&l.name===e.name?this.removeEventListener(l.type,l.listener,l.options):t[++o]=l;++o?t.length=o:delete this.__on}}}function kj(e,t,i){return function(){var o=this.__on,s,l=Ej(t);if(o){for(var c=0,f=o.length;c<f;++c)if((s=o[c]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=l,s.options=i),s.value=t;return}}this.addEventListener(e.type,l,i),s={type:e.type,name:e.name,value:t,listener:l,options:i},o?o.push(s):this.__on=[s]}}function Tj(e,t,i){var o=jj(e+""),s,l=o.length,c;if(arguments.length<2){var f=this.node().__on;if(f){for(var h=0,p=f.length,m;h<p;++h)for(s=0,m=f[h];s<l;++s)if((c=o[s]).type===m.type&&c.name===m.name)return m.value}return}for(f=t?kj:Cj,s=0;s<l;++s)this.each(f(o[s],t,i));return this}function Gb(e,t,i){var o=Pb(e),s=o.CustomEvent;typeof s=="function"?s=new s(t,i):(s=o.document.createEvent("Event"),i?(s.initEvent(t,i.bubbles,i.cancelable),s.detail=i.detail):s.initEvent(t,!1,!1)),e.dispatchEvent(s)}function Aj(e,t){return function(){return Gb(this,e,t)}}function Mj(e,t){return function(){return Gb(this,e,t.apply(this,arguments))}}function Dj(e,t){return this.each((typeof t=="function"?Mj:Aj)(e,t))}function*_j(){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var o=e[t],s=0,l=o.length,c;s<l;++s)(c=o[s])&&(yield c)}var Yb=[null];function hn(e,t){this._groups=e,this._parents=t}function Cs(){return new hn([[document.documentElement]],Yb)}function Oj(){return this}hn.prototype=Cs.prototype={constructor:hn,select:oE,selectAll:cE,selectChild:hE,selectChildren:yE,filter:xE,data:EE,enter:vE,exit:CE,join:kE,merge:TE,selection:Oj,order:AE,sort:ME,call:_E,nodes:OE,node:RE,size:LE,empty:zE,each:IE,attr:VE,style:XE,property:JE,classed:nj,text:aj,html:uj,raise:fj,lower:pj,append:mj,insert:yj,remove:vj,clone:Sj,datum:Nj,on:Tj,dispatch:Dj,[Symbol.iterator]:_j};function dn(e){return typeof e=="string"?new hn([[document.querySelector(e)]],[document.documentElement]):new hn([[e]],Yb)}function Rj(e){let t;for(;t=e.sourceEvent;)e=t;return e}function An(e,t){if(e=Rj(e),t===void 0&&(t=e.currentTarget),t){var i=t.ownerSVGElement||t;if(i.createSVGPoint){var o=i.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}}return[e.pageX,e.pageY]}const Lj={passive:!1},hs={capture:!0,passive:!1};function Rf(e){e.stopImmediatePropagation()}function Bo(e){e.preventDefault(),e.stopImmediatePropagation()}function Xb(e){var t=e.document.documentElement,i=dn(e).on("dragstart.drag",Bo,hs);"onselectstart"in t?i.on("selectstart.drag",Bo,hs):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Qb(e,t){var i=e.document.documentElement,o=dn(e).on("dragstart.drag",null);t&&(o.on("click.drag",Bo,hs),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in i?o.on("selectstart.drag",null):(i.style.MozUserSelect=i.__noselect,delete i.__noselect)}const ac=e=>()=>e;function yh(e,{sourceEvent:t,subject:i,target:o,identifier:s,active:l,x:c,y:f,dx:h,dy:p,dispatch:m}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:i,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:f,enumerable:!0,configurable:!0},dx:{value:h,enumerable:!0,configurable:!0},dy:{value:p,enumerable:!0,configurable:!0},_:{value:m}})}yh.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function zj(e){return!e.ctrlKey&&!e.button}function Ij(){return this.parentNode}function Bj(e,t){return t??{x:e.x,y:e.y}}function Hj(){return navigator.maxTouchPoints||"ontouchstart"in this}function Wb(){var e=zj,t=Ij,i=Bj,o=Hj,s={},l=Qc("start","drag","end"),c=0,f,h,p,m,g=0;function v(_){_.on("mousedown.drag",b).filter(o).on("touchstart.drag",C).on("touchmove.drag",S,Lj).on("touchend.drag touchcancel.drag",k).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(_,$){if(!(m||!e.call(this,_,$))){var A=j(this,t.call(this,_,$),_,$,"mouse");A&&(dn(_.view).on("mousemove.drag",w,hs).on("mouseup.drag",N,hs),Xb(_.view),Rf(_),p=!1,f=_.clientX,h=_.clientY,A("start",_))}}function w(_){if(Bo(_),!p){var $=_.clientX-f,A=_.clientY-h;p=$*$+A*A>g}s.mouse("drag",_)}function N(_){dn(_.view).on("mousemove.drag mouseup.drag",null),Qb(_.view,p),Bo(_),s.mouse("end",_)}function C(_,$){if(e.call(this,_,$)){var A=_.changedTouches,H=t.call(this,_,$),V=A.length,G,I;for(G=0;G<V;++G)(I=j(this,H,_,$,A[G].identifier,A[G]))&&(Rf(_),I("start",_,A[G]))}}function S(_){var $=_.changedTouches,A=$.length,H,V;for(H=0;H<A;++H)(V=s[$[H].identifier])&&(Bo(_),V("drag",_,$[H]))}function k(_){var $=_.changedTouches,A=$.length,H,V;for(m&&clearTimeout(m),m=setTimeout(function(){m=null},500),H=0;H<A;++H)(V=s[$[H].identifier])&&(Rf(_),V("end",_,$[H]))}function j(_,$,A,H,V,G){var I=l.copy(),z=An(G||A,$),U,Z,M;if((M=i.call(_,new yh("beforestart",{sourceEvent:A,target:v,identifier:V,active:c,x:z[0],y:z[1],dx:0,dy:0,dispatch:I}),H))!=null)return U=M.x-z[0]||0,Z=M.y-z[1]||0,function P(O,q,Y){var Q=z,D;switch(O){case"start":s[V]=P,D=c++;break;case"end":delete s[V],--c;case"drag":z=An(Y||q,$),D=c;break}I.call(O,_,new yh(O,{sourceEvent:q,subject:M,target:v,identifier:V,active:D,x:z[0]+U,y:z[1]+Z,dx:z[0]-Q[0],dy:z[1]-Q[1],dispatch:I}),H)}}return v.filter=function(_){return arguments.length?(e=typeof _=="function"?_:ac(!!_),v):e},v.container=function(_){return arguments.length?(t=typeof _=="function"?_:ac(_),v):t},v.subject=function(_){return arguments.length?(i=typeof _=="function"?_:ac(_),v):i},v.touchable=function(_){return arguments.length?(o=typeof _=="function"?_:ac(!!_),v):o},v.on=function(){var _=l.on.apply(l,arguments);return _===l?v:_},v.clickDistance=function(_){return arguments.length?(g=(_=+_)*_,v):Math.sqrt(g)},v}function Wh(e,t,i){e.prototype=t.prototype=i,i.constructor=e}function Zb(e,t){var i=Object.create(e.prototype);for(var o in t)i[o]=t[o];return i}function ks(){}var ps=.7,Mc=1/ps,Ho="\\s*([+-]?\\d+)\\s*",ms="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Fn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$j=/^#([0-9a-f]{3,8})$/,Pj=new RegExp(`^rgb\\(${Ho},${Ho},${Ho}\\)$`),qj=new RegExp(`^rgb\\(${Fn},${Fn},${Fn}\\)$`),Uj=new RegExp(`^rgba\\(${Ho},${Ho},${Ho},${ms}\\)$`),Vj=new RegExp(`^rgba\\(${Fn},${Fn},${Fn},${ms}\\)$`),Fj=new RegExp(`^hsl\\(${ms},${Fn},${Fn}\\)$`),Gj=new RegExp(`^hsla\\(${ms},${Fn},${Fn},${ms}\\)$`),Ex={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Wh(ks,Lr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:jx,formatHex:jx,formatHex8:Yj,formatHsl:Xj,formatRgb:Cx,toString:Cx});function jx(){return this.rgb().formatHex()}function Yj(){return this.rgb().formatHex8()}function Xj(){return Jb(this).formatHsl()}function Cx(){return this.rgb().formatRgb()}function Lr(e){var t,i;return e=(e+"").trim().toLowerCase(),(t=$j.exec(e))?(i=t[1].length,t=parseInt(t[1],16),i===6?kx(t):i===3?new Zt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):i===8?sc(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):i===4?sc(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Pj.exec(e))?new Zt(t[1],t[2],t[3],1):(t=qj.exec(e))?new Zt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Uj.exec(e))?sc(t[1],t[2],t[3],t[4]):(t=Vj.exec(e))?sc(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Fj.exec(e))?Mx(t[1],t[2]/100,t[3]/100,1):(t=Gj.exec(e))?Mx(t[1],t[2]/100,t[3]/100,t[4]):Ex.hasOwnProperty(e)?kx(Ex[e]):e==="transparent"?new Zt(NaN,NaN,NaN,0):null}function kx(e){return new Zt(e>>16&255,e>>8&255,e&255,1)}function sc(e,t,i,o){return o<=0&&(e=t=i=NaN),new Zt(e,t,i,o)}function Qj(e){return e instanceof ks||(e=Lr(e)),e?(e=e.rgb(),new Zt(e.r,e.g,e.b,e.opacity)):new Zt}function xh(e,t,i,o){return arguments.length===1?Qj(e):new Zt(e,t,i,o??1)}function Zt(e,t,i,o){this.r=+e,this.g=+t,this.b=+i,this.opacity=+o}Wh(Zt,xh,Zb(ks,{brighter(e){return e=e==null?Mc:Math.pow(Mc,e),new Zt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ps:Math.pow(ps,e),new Zt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Zt(Or(this.r),Or(this.g),Or(this.b),Dc(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Tx,formatHex:Tx,formatHex8:Wj,formatRgb:Ax,toString:Ax}));function Tx(){return`#${_r(this.r)}${_r(this.g)}${_r(this.b)}`}function Wj(){return`#${_r(this.r)}${_r(this.g)}${_r(this.b)}${_r((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ax(){const e=Dc(this.opacity);return`${e===1?"rgb(":"rgba("}${Or(this.r)}, ${Or(this.g)}, ${Or(this.b)}${e===1?")":`, ${e})`}`}function Dc(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Or(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function _r(e){return e=Or(e),(e<16?"0":"")+e.toString(16)}function Mx(e,t,i,o){return o<=0?e=t=i=NaN:i<=0||i>=1?e=t=NaN:t<=0&&(e=NaN),new Mn(e,t,i,o)}function Jb(e){if(e instanceof Mn)return new Mn(e.h,e.s,e.l,e.opacity);if(e instanceof ks||(e=Lr(e)),!e)return new Mn;if(e instanceof Mn)return e;e=e.rgb();var t=e.r/255,i=e.g/255,o=e.b/255,s=Math.min(t,i,o),l=Math.max(t,i,o),c=NaN,f=l-s,h=(l+s)/2;return f?(t===l?c=(i-o)/f+(i<o)*6:i===l?c=(o-t)/f+2:c=(t-i)/f+4,f/=h<.5?l+s:2-l-s,c*=60):f=h>0&&h<1?0:c,new Mn(c,f,h,e.opacity)}function Zj(e,t,i,o){return arguments.length===1?Jb(e):new Mn(e,t,i,o??1)}function Mn(e,t,i,o){this.h=+e,this.s=+t,this.l=+i,this.opacity=+o}Wh(Mn,Zj,Zb(ks,{brighter(e){return e=e==null?Mc:Math.pow(Mc,e),new Mn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ps:Math.pow(ps,e),new Mn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,i=this.l,o=i+(i<.5?i:1-i)*t,s=2*i-o;return new Zt(Lf(e>=240?e-240:e+120,s,o),Lf(e,s,o),Lf(e<120?e+240:e-120,s,o),this.opacity)},clamp(){return new Mn(Dx(this.h),lc(this.s),lc(this.l),Dc(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Dc(this.opacity);return`${e===1?"hsl(":"hsla("}${Dx(this.h)}, ${lc(this.s)*100}%, ${lc(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Dx(e){return e=(e||0)%360,e<0?e+360:e}function lc(e){return Math.max(0,Math.min(1,e||0))}function Lf(e,t,i){return(e<60?t+(i-t)*e/60:e<180?i:e<240?t+(i-t)*(240-e)/60:t)*255}const Zh=e=>()=>e;function Jj(e,t){return function(i){return e+i*t}}function Kj(e,t,i){return e=Math.pow(e,i),t=Math.pow(t,i)-e,i=1/i,function(o){return Math.pow(e+o*t,i)}}function eC(e){return(e=+e)==1?Kb:function(t,i){return i-t?Kj(t,i,e):Zh(isNaN(t)?i:t)}}function Kb(e,t){var i=t-e;return i?Jj(e,i):Zh(isNaN(e)?t:e)}const _c=(function e(t){var i=eC(t);function o(s,l){var c=i((s=xh(s)).r,(l=xh(l)).r),f=i(s.g,l.g),h=i(s.b,l.b),p=Kb(s.opacity,l.opacity);return function(m){return s.r=c(m),s.g=f(m),s.b=h(m),s.opacity=p(m),s+""}}return o.gamma=e,o})(1);function tC(e,t){t||(t=[]);var i=e?Math.min(t.length,e.length):0,o=t.slice(),s;return function(l){for(s=0;s<i;++s)o[s]=e[s]*(1-l)+t[s]*l;return o}}function nC(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function iC(e,t){var i=t?t.length:0,o=e?Math.min(i,e.length):0,s=new Array(o),l=new Array(i),c;for(c=0;c<o;++c)s[c]=as(e[c],t[c]);for(;c<i;++c)l[c]=t[c];return function(f){for(c=0;c<o;++c)l[c]=s[c](f);return l}}function rC(e,t){var i=new Date;return e=+e,t=+t,function(o){return i.setTime(e*(1-o)+t*o),i}}function Vn(e,t){return e=+e,t=+t,function(i){return e*(1-i)+t*i}}function oC(e,t){var i={},o={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?i[s]=as(e[s],t[s]):o[s]=t[s];return function(l){for(s in i)o[s]=i[s](l);return o}}var vh=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zf=new RegExp(vh.source,"g");function aC(e){return function(){return e}}function sC(e){return function(t){return e(t)+""}}function e0(e,t){var i=vh.lastIndex=zf.lastIndex=0,o,s,l,c=-1,f=[],h=[];for(e=e+"",t=t+"";(o=vh.exec(e))&&(s=zf.exec(t));)(l=s.index)>i&&(l=t.slice(i,l),f[c]?f[c]+=l:f[++c]=l),(o=o[0])===(s=s[0])?f[c]?f[c]+=s:f[++c]=s:(f[++c]=null,h.push({i:c,x:Vn(o,s)})),i=zf.lastIndex;return i<t.length&&(l=t.slice(i),f[c]?f[c]+=l:f[++c]=l),f.length<2?h[0]?sC(h[0].x):aC(t):(t=h.length,function(p){for(var m=0,g;m<t;++m)f[(g=h[m]).i]=g.x(p);return f.join("")})}function as(e,t){var i=typeof t,o;return t==null||i==="boolean"?Zh(t):(i==="number"?Vn:i==="string"?(o=Lr(t))?(t=o,_c):e0:t instanceof Lr?_c:t instanceof Date?rC:nC(t)?tC:Array.isArray(t)?iC:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?oC:Vn)(e,t)}var _x=180/Math.PI,bh={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function t0(e,t,i,o,s,l){var c,f,h;return(c=Math.sqrt(e*e+t*t))&&(e/=c,t/=c),(h=e*i+t*o)&&(i-=e*h,o-=t*h),(f=Math.sqrt(i*i+o*o))&&(i/=f,o/=f,h/=f),e*o<t*i&&(e=-e,t=-t,h=-h,c=-c),{translateX:s,translateY:l,rotate:Math.atan2(t,e)*_x,skewX:Math.atan(h)*_x,scaleX:c,scaleY:f}}var cc;function lC(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?bh:t0(t.a,t.b,t.c,t.d,t.e,t.f)}function cC(e){return e==null||(cc||(cc=document.createElementNS("http://www.w3.org/2000/svg","g")),cc.setAttribute("transform",e),!(e=cc.transform.baseVal.consolidate()))?bh:(e=e.matrix,t0(e.a,e.b,e.c,e.d,e.e,e.f))}function n0(e,t,i,o){function s(p){return p.length?p.pop()+" ":""}function l(p,m,g,v,b,w){if(p!==g||m!==v){var N=b.push("translate(",null,t,null,i);w.push({i:N-4,x:Vn(p,g)},{i:N-2,x:Vn(m,v)})}else(g||v)&&b.push("translate("+g+t+v+i)}function c(p,m,g,v){p!==m?(p-m>180?m+=360:m-p>180&&(p+=360),v.push({i:g.push(s(g)+"rotate(",null,o)-2,x:Vn(p,m)})):m&&g.push(s(g)+"rotate("+m+o)}function f(p,m,g,v){p!==m?v.push({i:g.push(s(g)+"skewX(",null,o)-2,x:Vn(p,m)}):m&&g.push(s(g)+"skewX("+m+o)}function h(p,m,g,v,b,w){if(p!==g||m!==v){var N=b.push(s(b)+"scale(",null,",",null,")");w.push({i:N-4,x:Vn(p,g)},{i:N-2,x:Vn(m,v)})}else(g!==1||v!==1)&&b.push(s(b)+"scale("+g+","+v+")")}return function(p,m){var g=[],v=[];return p=e(p),m=e(m),l(p.translateX,p.translateY,m.translateX,m.translateY,g,v),c(p.rotate,m.rotate,g,v),f(p.skewX,m.skewX,g,v),h(p.scaleX,p.scaleY,m.scaleX,m.scaleY,g,v),p=m=null,function(b){for(var w=-1,N=v.length,C;++w<N;)g[(C=v[w]).i]=C.x(b);return g.join("")}}}var uC=n0(lC,"px, ","px)","deg)"),dC=n0(cC,", ",")",")"),fC=1e-12;function Ox(e){return((e=Math.exp(e))+1/e)/2}function hC(e){return((e=Math.exp(e))-1/e)/2}function pC(e){return((e=Math.exp(2*e))-1)/(e+1)}const Ec=(function e(t,i,o){function s(l,c){var f=l[0],h=l[1],p=l[2],m=c[0],g=c[1],v=c[2],b=m-f,w=g-h,N=b*b+w*w,C,S;if(N<fC)S=Math.log(v/p)/t,C=function(H){return[f+H*b,h+H*w,p*Math.exp(t*H*S)]};else{var k=Math.sqrt(N),j=(v*v-p*p+o*N)/(2*p*i*k),_=(v*v-p*p-o*N)/(2*v*i*k),$=Math.log(Math.sqrt(j*j+1)-j),A=Math.log(Math.sqrt(_*_+1)-_);S=(A-$)/t,C=function(H){var V=H*S,G=Ox($),I=p/(i*k)*(G*pC(t*V+$)-hC($));return[f+I*b,h+I*w,p*G/Ox(t*V+$)]}}return C.duration=S*1e3*t/Math.SQRT2,C}return s.rho=function(l){var c=Math.max(.001,+l),f=c*c,h=f*f;return e(c,f,h)},s})(Math.SQRT2,2,4);var qo=0,is=0,Ya=0,i0=1e3,Oc,rs,Rc=0,zr=0,Zc=0,gs=typeof performance=="object"&&performance.now?performance:Date,r0=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Jh(){return zr||(r0(mC),zr=gs.now()+Zc)}function mC(){zr=0}function Lc(){this._call=this._time=this._next=null}Lc.prototype=o0.prototype={constructor:Lc,restart:function(e,t,i){if(typeof e!="function")throw new TypeError("callback is not a function");i=(i==null?Jh():+i)+(t==null?0:+t),!this._next&&rs!==this&&(rs?rs._next=this:Oc=this,rs=this),this._call=e,this._time=i,wh()},stop:function(){this._call&&(this._call=null,this._time=1/0,wh())}};function o0(e,t,i){var o=new Lc;return o.restart(e,t,i),o}function gC(){Jh(),++qo;for(var e=Oc,t;e;)(t=zr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--qo}function Rx(){zr=(Rc=gs.now())+Zc,qo=is=0;try{gC()}finally{qo=0,xC(),zr=0}}function yC(){var e=gs.now(),t=e-Rc;t>i0&&(Zc-=t,Rc=e)}function xC(){for(var e,t=Oc,i,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(i=t._next,t._next=null,t=e?e._next=i:Oc=i);rs=e,wh(o)}function wh(e){if(!qo){is&&(is=clearTimeout(is));var t=e-zr;t>24?(e<1/0&&(is=setTimeout(Rx,e-gs.now()-Zc)),Ya&&(Ya=clearInterval(Ya))):(Ya||(Rc=gs.now(),Ya=setInterval(yC,i0)),qo=1,r0(Rx))}}function Lx(e,t,i){var o=new Lc;return t=t==null?0:+t,o.restart(s=>{o.stop(),e(s+t)},t,i),o}var vC=Qc("start","end","cancel","interrupt"),bC=[],a0=0,zx=1,Sh=2,jc=3,Ix=4,Nh=5,Cc=6;function Jc(e,t,i,o,s,l){var c=e.__transition;if(!c)e.__transition={};else if(i in c)return;wC(e,i,{name:t,index:o,group:s,on:vC,tween:bC,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:a0})}function Kh(e,t){var i=zn(e,t);if(i.state>a0)throw new Error("too late; already scheduled");return i}function Yn(e,t){var i=zn(e,t);if(i.state>jc)throw new Error("too late; already running");return i}function zn(e,t){var i=e.__transition;if(!i||!(i=i[t]))throw new Error("transition not found");return i}function wC(e,t,i){var o=e.__transition,s;o[t]=i,i.timer=o0(l,0,i.time);function l(p){i.state=zx,i.timer.restart(c,i.delay,i.time),i.delay<=p&&c(p-i.delay)}function c(p){var m,g,v,b;if(i.state!==zx)return h();for(m in o)if(b=o[m],b.name===i.name){if(b.state===jc)return Lx(c);b.state===Ix?(b.state=Cc,b.timer.stop(),b.on.call("interrupt",e,e.__data__,b.index,b.group),delete o[m]):+m<t&&(b.state=Cc,b.timer.stop(),b.on.call("cancel",e,e.__data__,b.index,b.group),delete o[m])}if(Lx(function(){i.state===jc&&(i.state=Ix,i.timer.restart(f,i.delay,i.time),f(p))}),i.state=Sh,i.on.call("start",e,e.__data__,i.index,i.group),i.state===Sh){for(i.state=jc,s=new Array(v=i.tween.length),m=0,g=-1;m<v;++m)(b=i.tween[m].value.call(e,e.__data__,i.index,i.group))&&(s[++g]=b);s.length=g+1}}function f(p){for(var m=p<i.duration?i.ease.call(null,p/i.duration):(i.timer.restart(h),i.state=Nh,1),g=-1,v=s.length;++g<v;)s[g].call(e,m);i.state===Nh&&(i.on.call("end",e,e.__data__,i.index,i.group),h())}function h(){i.state=Cc,i.timer.stop(),delete o[t];for(var p in o)return;delete e.__transition}}function kc(e,t){var i=e.__transition,o,s,l=!0,c;if(i){t=t==null?null:t+"";for(c in i){if((o=i[c]).name!==t){l=!1;continue}s=o.state>Sh&&o.state<Nh,o.state=Cc,o.timer.stop(),o.on.call(s?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete i[c]}l&&delete e.__transition}}function SC(e){return this.each(function(){kc(this,e)})}function NC(e,t){var i,o;return function(){var s=Yn(this,e),l=s.tween;if(l!==i){o=i=l;for(var c=0,f=o.length;c<f;++c)if(o[c].name===t){o=o.slice(),o.splice(c,1);break}}s.tween=o}}function EC(e,t,i){var o,s;if(typeof i!="function")throw new Error;return function(){var l=Yn(this,e),c=l.tween;if(c!==o){s=(o=c).slice();for(var f={name:t,value:i},h=0,p=s.length;h<p;++h)if(s[h].name===t){s[h]=f;break}h===p&&s.push(f)}l.tween=s}}function jC(e,t){var i=this._id;if(e+="",arguments.length<2){for(var o=zn(this.node(),i).tween,s=0,l=o.length,c;s<l;++s)if((c=o[s]).name===e)return c.value;return null}return this.each((t==null?NC:EC)(i,e,t))}function ep(e,t,i){var o=e._id;return e.each(function(){var s=Yn(this,o);(s.value||(s.value={}))[t]=i.apply(this,arguments)}),function(s){return zn(s,o).value[t]}}function s0(e,t){var i;return(typeof t=="number"?Vn:t instanceof Lr?_c:(i=Lr(t))?(t=i,_c):e0)(e,t)}function CC(e){return function(){this.removeAttribute(e)}}function kC(e){return function(){this.removeAttributeNS(e.space,e.local)}}function TC(e,t,i){var o,s=i+"",l;return function(){var c=this.getAttribute(e);return c===s?null:c===o?l:l=t(o=c,i)}}function AC(e,t,i){var o,s=i+"",l;return function(){var c=this.getAttributeNS(e.space,e.local);return c===s?null:c===o?l:l=t(o=c,i)}}function MC(e,t,i){var o,s,l;return function(){var c,f=i(this),h;return f==null?void this.removeAttribute(e):(c=this.getAttribute(e),h=f+"",c===h?null:c===o&&h===s?l:(s=h,l=t(o=c,f)))}}function DC(e,t,i){var o,s,l;return function(){var c,f=i(this),h;return f==null?void this.removeAttributeNS(e.space,e.local):(c=this.getAttributeNS(e.space,e.local),h=f+"",c===h?null:c===o&&h===s?l:(s=h,l=t(o=c,f)))}}function _C(e,t){var i=Wc(e),o=i==="transform"?dC:s0;return this.attrTween(e,typeof t=="function"?(i.local?DC:MC)(i,o,ep(this,"attr."+e,t)):t==null?(i.local?kC:CC)(i):(i.local?AC:TC)(i,o,t))}function OC(e,t){return function(i){this.setAttribute(e,t.call(this,i))}}function RC(e,t){return function(i){this.setAttributeNS(e.space,e.local,t.call(this,i))}}function LC(e,t){var i,o;function s(){var l=t.apply(this,arguments);return l!==o&&(i=(o=l)&&RC(e,l)),i}return s._value=t,s}function zC(e,t){var i,o;function s(){var l=t.apply(this,arguments);return l!==o&&(i=(o=l)&&OC(e,l)),i}return s._value=t,s}function IC(e,t){var i="attr."+e;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;var o=Wc(e);return this.tween(i,(o.local?LC:zC)(o,t))}function BC(e,t){return function(){Kh(this,e).delay=+t.apply(this,arguments)}}function HC(e,t){return t=+t,function(){Kh(this,e).delay=t}}function $C(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?BC:HC)(t,e)):zn(this.node(),t).delay}function PC(e,t){return function(){Yn(this,e).duration=+t.apply(this,arguments)}}function qC(e,t){return t=+t,function(){Yn(this,e).duration=t}}function UC(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?PC:qC)(t,e)):zn(this.node(),t).duration}function VC(e,t){if(typeof t!="function")throw new Error;return function(){Yn(this,e).ease=t}}function FC(e){var t=this._id;return arguments.length?this.each(VC(t,e)):zn(this.node(),t).ease}function GC(e,t){return function(){var i=t.apply(this,arguments);if(typeof i!="function")throw new Error;Yn(this,e).ease=i}}function YC(e){if(typeof e!="function")throw new Error;return this.each(GC(this._id,e))}function XC(e){typeof e!="function"&&(e=Bb(e));for(var t=this._groups,i=t.length,o=new Array(i),s=0;s<i;++s)for(var l=t[s],c=l.length,f=o[s]=[],h,p=0;p<c;++p)(h=l[p])&&e.call(h,h.__data__,p,l)&&f.push(h);return new bi(o,this._parents,this._name,this._id)}function QC(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,i=e._groups,o=t.length,s=i.length,l=Math.min(o,s),c=new Array(o),f=0;f<l;++f)for(var h=t[f],p=i[f],m=h.length,g=c[f]=new Array(m),v,b=0;b<m;++b)(v=h[b]||p[b])&&(g[b]=v);for(;f<o;++f)c[f]=t[f];return new bi(c,this._parents,this._name,this._id)}function WC(e){return(e+"").trim().split(/^|\s+/).every(function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||t==="start"})}function ZC(e,t,i){var o,s,l=WC(t)?Kh:Yn;return function(){var c=l(this,e),f=c.on;f!==o&&(s=(o=f).copy()).on(t,i),c.on=s}}function JC(e,t){var i=this._id;return arguments.length<2?zn(this.node(),i).on.on(e):this.each(ZC(i,e,t))}function KC(e){return function(){var t=this.parentNode;for(var i in this.__transition)if(+i!==e)return;t&&t.removeChild(this)}}function ek(){return this.on("end.remove",KC(this._id))}function tk(e){var t=this._name,i=this._id;typeof e!="function"&&(e=Xh(e));for(var o=this._groups,s=o.length,l=new Array(s),c=0;c<s;++c)for(var f=o[c],h=f.length,p=l[c]=new Array(h),m,g,v=0;v<h;++v)(m=f[v])&&(g=e.call(m,m.__data__,v,f))&&("__data__"in m&&(g.__data__=m.__data__),p[v]=g,Jc(p[v],t,i,v,p,zn(m,i)));return new bi(l,this._parents,t,i)}function nk(e){var t=this._name,i=this._id;typeof e!="function"&&(e=Ib(e));for(var o=this._groups,s=o.length,l=[],c=[],f=0;f<s;++f)for(var h=o[f],p=h.length,m,g=0;g<p;++g)if(m=h[g]){for(var v=e.call(m,m.__data__,g,h),b,w=zn(m,i),N=0,C=v.length;N<C;++N)(b=v[N])&&Jc(b,t,i,N,v,w);l.push(v),c.push(m)}return new bi(l,c,t,i)}var ik=Cs.prototype.constructor;function rk(){return new ik(this._groups,this._parents)}function ok(e,t){var i,o,s;return function(){var l=Po(this,e),c=(this.style.removeProperty(e),Po(this,e));return l===c?null:l===i&&c===o?s:s=t(i=l,o=c)}}function l0(e){return function(){this.style.removeProperty(e)}}function ak(e,t,i){var o,s=i+"",l;return function(){var c=Po(this,e);return c===s?null:c===o?l:l=t(o=c,i)}}function sk(e,t,i){var o,s,l;return function(){var c=Po(this,e),f=i(this),h=f+"";return f==null&&(h=f=(this.style.removeProperty(e),Po(this,e))),c===h?null:c===o&&h===s?l:(s=h,l=t(o=c,f))}}function lk(e,t){var i,o,s,l="style."+t,c="end."+l,f;return function(){var h=Yn(this,e),p=h.on,m=h.value[l]==null?f||(f=l0(t)):void 0;(p!==i||s!==m)&&(o=(i=p).copy()).on(c,s=m),h.on=o}}function ck(e,t,i){var o=(e+="")=="transform"?uC:s0;return t==null?this.styleTween(e,ok(e,o)).on("end.style."+e,l0(e)):typeof t=="function"?this.styleTween(e,sk(e,o,ep(this,"style."+e,t))).each(lk(this._id,e)):this.styleTween(e,ak(e,o,t),i).on("end.style."+e,null)}function uk(e,t,i){return function(o){this.style.setProperty(e,t.call(this,o),i)}}function dk(e,t,i){var o,s;function l(){var c=t.apply(this,arguments);return c!==s&&(o=(s=c)&&uk(e,c,i)),o}return l._value=t,l}function fk(e,t,i){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,dk(e,t,i??""))}function hk(e){return function(){this.textContent=e}}function pk(e){return function(){var t=e(this);this.textContent=t??""}}function mk(e){return this.tween("text",typeof e=="function"?pk(ep(this,"text",e)):hk(e==null?"":e+""))}function gk(e){return function(t){this.textContent=e.call(this,t)}}function yk(e){var t,i;function o(){var s=e.apply(this,arguments);return s!==i&&(t=(i=s)&&gk(s)),t}return o._value=e,o}function xk(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,yk(e))}function vk(){for(var e=this._name,t=this._id,i=c0(),o=this._groups,s=o.length,l=0;l<s;++l)for(var c=o[l],f=c.length,h,p=0;p<f;++p)if(h=c[p]){var m=zn(h,t);Jc(h,e,i,p,c,{time:m.time+m.delay+m.duration,delay:0,duration:m.duration,ease:m.ease})}return new bi(o,this._parents,e,i)}function bk(){var e,t,i=this,o=i._id,s=i.size();return new Promise(function(l,c){var f={value:c},h={value:function(){--s===0&&l()}};i.each(function(){var p=Yn(this,o),m=p.on;m!==e&&(t=(e=m).copy(),t._.cancel.push(f),t._.interrupt.push(f),t._.end.push(h)),p.on=t}),s===0&&l()})}var wk=0;function bi(e,t,i,o){this._groups=e,this._parents=t,this._name=i,this._id=o}function c0(){return++wk}var xi=Cs.prototype;bi.prototype={constructor:bi,select:tk,selectAll:nk,selectChild:xi.selectChild,selectChildren:xi.selectChildren,filter:XC,merge:QC,selection:rk,transition:vk,call:xi.call,nodes:xi.nodes,node:xi.node,size:xi.size,empty:xi.empty,each:xi.each,on:JC,attr:_C,attrTween:IC,style:ck,styleTween:fk,text:mk,textTween:xk,remove:ek,tween:jC,delay:$C,duration:UC,ease:FC,easeVarying:YC,end:bk,[Symbol.iterator]:xi[Symbol.iterator]};function Sk(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Nk={time:null,delay:0,duration:250,ease:Sk};function Ek(e,t){for(var i;!(i=e.__transition)||!(i=i[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return i}function jk(e){var t,i;e instanceof bi?(t=e._id,e=e._name):(t=c0(),(i=Nk).time=Jh(),e=e==null?null:e+"");for(var o=this._groups,s=o.length,l=0;l<s;++l)for(var c=o[l],f=c.length,h,p=0;p<f;++p)(h=c[p])&&Jc(h,e,t,p,c,i||Ek(h,t));return new bi(o,this._parents,e,t)}Cs.prototype.interrupt=SC;Cs.prototype.transition=jk;const uc=e=>()=>e;function Ck(e,{sourceEvent:t,target:i,transform:o,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:s}})}function vi(e,t,i){this.k=e,this.x=t,this.y=i}vi.prototype={constructor:vi,scale:function(e){return e===1?this:new vi(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new vi(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Kc=new vi(1,0,0);u0.prototype=vi.prototype;function u0(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Kc;return e.__zoom}function If(e){e.stopImmediatePropagation()}function Xa(e){e.preventDefault(),e.stopImmediatePropagation()}function kk(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Tk(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Bx(){return this.__zoom||Kc}function Ak(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Mk(){return navigator.maxTouchPoints||"ontouchstart"in this}function Dk(e,t,i){var o=e.invertX(t[0][0])-i[0][0],s=e.invertX(t[1][0])-i[1][0],l=e.invertY(t[0][1])-i[0][1],c=e.invertY(t[1][1])-i[1][1];return e.translate(s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s),c>l?(l+c)/2:Math.min(0,l)||Math.max(0,c))}function d0(){var e=kk,t=Tk,i=Dk,o=Ak,s=Mk,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],f=250,h=Ec,p=Qc("start","zoom","end"),m,g,v,b=500,w=150,N=0,C=10;function S(M){M.property("__zoom",Bx).on("wheel.zoom",V,{passive:!1}).on("mousedown.zoom",G).on("dblclick.zoom",I).filter(s).on("touchstart.zoom",z).on("touchmove.zoom",U).on("touchend.zoom touchcancel.zoom",Z).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}S.transform=function(M,P,O,q){var Y=M.selection?M.selection():M;Y.property("__zoom",Bx),M!==Y?$(M,P,O,q):Y.interrupt().each(function(){A(this,arguments).event(q).start().zoom(null,typeof P=="function"?P.apply(this,arguments):P).end()})},S.scaleBy=function(M,P,O,q){S.scaleTo(M,function(){var Y=this.__zoom.k,Q=typeof P=="function"?P.apply(this,arguments):P;return Y*Q},O,q)},S.scaleTo=function(M,P,O,q){S.transform(M,function(){var Y=t.apply(this,arguments),Q=this.__zoom,D=O==null?_(Y):typeof O=="function"?O.apply(this,arguments):O,B=Q.invert(D),F=typeof P=="function"?P.apply(this,arguments):P;return i(j(k(Q,F),D,B),Y,c)},O,q)},S.translateBy=function(M,P,O,q){S.transform(M,function(){return i(this.__zoom.translate(typeof P=="function"?P.apply(this,arguments):P,typeof O=="function"?O.apply(this,arguments):O),t.apply(this,arguments),c)},null,q)},S.translateTo=function(M,P,O,q,Y){S.transform(M,function(){var Q=t.apply(this,arguments),D=this.__zoom,B=q==null?_(Q):typeof q=="function"?q.apply(this,arguments):q;return i(Kc.translate(B[0],B[1]).scale(D.k).translate(typeof P=="function"?-P.apply(this,arguments):-P,typeof O=="function"?-O.apply(this,arguments):-O),Q,c)},q,Y)};function k(M,P){return P=Math.max(l[0],Math.min(l[1],P)),P===M.k?M:new vi(P,M.x,M.y)}function j(M,P,O){var q=P[0]-O[0]*M.k,Y=P[1]-O[1]*M.k;return q===M.x&&Y===M.y?M:new vi(M.k,q,Y)}function _(M){return[(+M[0][0]+ +M[1][0])/2,(+M[0][1]+ +M[1][1])/2]}function $(M,P,O,q){M.on("start.zoom",function(){A(this,arguments).event(q).start()}).on("interrupt.zoom end.zoom",function(){A(this,arguments).event(q).end()}).tween("zoom",function(){var Y=this,Q=arguments,D=A(Y,Q).event(q),B=t.apply(Y,Q),F=O==null?_(B):typeof O=="function"?O.apply(Y,Q):O,L=Math.max(B[1][0]-B[0][0],B[1][1]-B[0][1]),ie=Y.__zoom,te=typeof P=="function"?P.apply(Y,Q):P,re=h(ie.invert(F).concat(L/ie.k),te.invert(F).concat(L/te.k));return function(de){if(de===1)de=te;else{var ae=re(de),fe=L/ae[2];de=new vi(fe,F[0]-ae[0]*fe,F[1]-ae[1]*fe)}D.zoom(null,de)}})}function A(M,P,O){return!O&&M.__zooming||new H(M,P)}function H(M,P){this.that=M,this.args=P,this.active=0,this.sourceEvent=null,this.extent=t.apply(M,P),this.taps=0}H.prototype={event:function(M){return M&&(this.sourceEvent=M),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(M,P){return this.mouse&&M!=="mouse"&&(this.mouse[1]=P.invert(this.mouse[0])),this.touch0&&M!=="touch"&&(this.touch0[1]=P.invert(this.touch0[0])),this.touch1&&M!=="touch"&&(this.touch1[1]=P.invert(this.touch1[0])),this.that.__zoom=P,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(M){var P=dn(this.that).datum();p.call(M,this.that,new Ck(M,{sourceEvent:this.sourceEvent,target:S,transform:this.that.__zoom,dispatch:p}),P)}};function V(M,...P){if(!e.apply(this,arguments))return;var O=A(this,P).event(M),q=this.__zoom,Y=Math.max(l[0],Math.min(l[1],q.k*Math.pow(2,o.apply(this,arguments)))),Q=An(M);if(O.wheel)(O.mouse[0][0]!==Q[0]||O.mouse[0][1]!==Q[1])&&(O.mouse[1]=q.invert(O.mouse[0]=Q)),clearTimeout(O.wheel);else{if(q.k===Y)return;O.mouse=[Q,q.invert(Q)],kc(this),O.start()}Xa(M),O.wheel=setTimeout(D,w),O.zoom("mouse",i(j(k(q,Y),O.mouse[0],O.mouse[1]),O.extent,c));function D(){O.wheel=null,O.end()}}function G(M,...P){if(v||!e.apply(this,arguments))return;var O=M.currentTarget,q=A(this,P,!0).event(M),Y=dn(M.view).on("mousemove.zoom",F,!0).on("mouseup.zoom",L,!0),Q=An(M,O),D=M.clientX,B=M.clientY;Xb(M.view),If(M),q.mouse=[Q,this.__zoom.invert(Q)],kc(this),q.start();function F(ie){if(Xa(ie),!q.moved){var te=ie.clientX-D,re=ie.clientY-B;q.moved=te*te+re*re>N}q.event(ie).zoom("mouse",i(j(q.that.__zoom,q.mouse[0]=An(ie,O),q.mouse[1]),q.extent,c))}function L(ie){Y.on("mousemove.zoom mouseup.zoom",null),Qb(ie.view,q.moved),Xa(ie),q.event(ie).end()}}function I(M,...P){if(e.apply(this,arguments)){var O=this.__zoom,q=An(M.changedTouches?M.changedTouches[0]:M,this),Y=O.invert(q),Q=O.k*(M.shiftKey?.5:2),D=i(j(k(O,Q),q,Y),t.apply(this,P),c);Xa(M),f>0?dn(this).transition().duration(f).call($,D,q,M):dn(this).call(S.transform,D,q,M)}}function z(M,...P){if(e.apply(this,arguments)){var O=M.touches,q=O.length,Y=A(this,P,M.changedTouches.length===q).event(M),Q,D,B,F;for(If(M),D=0;D<q;++D)B=O[D],F=An(B,this),F=[F,this.__zoom.invert(F),B.identifier],Y.touch0?!Y.touch1&&Y.touch0[2]!==F[2]&&(Y.touch1=F,Y.taps=0):(Y.touch0=F,Q=!0,Y.taps=1+!!m);m&&(m=clearTimeout(m)),Q&&(Y.taps<2&&(g=F[0],m=setTimeout(function(){m=null},b)),kc(this),Y.start())}}function U(M,...P){if(this.__zooming){var O=A(this,P).event(M),q=M.changedTouches,Y=q.length,Q,D,B,F;for(Xa(M),Q=0;Q<Y;++Q)D=q[Q],B=An(D,this),O.touch0&&O.touch0[2]===D.identifier?O.touch0[0]=B:O.touch1&&O.touch1[2]===D.identifier&&(O.touch1[0]=B);if(D=O.that.__zoom,O.touch1){var L=O.touch0[0],ie=O.touch0[1],te=O.touch1[0],re=O.touch1[1],de=(de=te[0]-L[0])*de+(de=te[1]-L[1])*de,ae=(ae=re[0]-ie[0])*ae+(ae=re[1]-ie[1])*ae;D=k(D,Math.sqrt(de/ae)),B=[(L[0]+te[0])/2,(L[1]+te[1])/2],F=[(ie[0]+re[0])/2,(ie[1]+re[1])/2]}else if(O.touch0)B=O.touch0[0],F=O.touch0[1];else return;O.zoom("touch",i(j(D,B,F),O.extent,c))}}function Z(M,...P){if(this.__zooming){var O=A(this,P).event(M),q=M.changedTouches,Y=q.length,Q,D;for(If(M),v&&clearTimeout(v),v=setTimeout(function(){v=null},b),Q=0;Q<Y;++Q)D=q[Q],O.touch0&&O.touch0[2]===D.identifier?delete O.touch0:O.touch1&&O.touch1[2]===D.identifier&&delete O.touch1;if(O.touch1&&!O.touch0&&(O.touch0=O.touch1,delete O.touch1),O.touch0)O.touch0[1]=this.__zoom.invert(O.touch0[0]);else if(O.end(),O.taps===2&&(D=An(D,this),Math.hypot(g[0]-D[0],g[1]-D[1])<C)){var B=dn(this).on("dblclick.zoom");B&&B.apply(this,arguments)}}}return S.wheelDelta=function(M){return arguments.length?(o=typeof M=="function"?M:uc(+M),S):o},S.filter=function(M){return arguments.length?(e=typeof M=="function"?M:uc(!!M),S):e},S.touchable=function(M){return arguments.length?(s=typeof M=="function"?M:uc(!!M),S):s},S.extent=function(M){return arguments.length?(t=typeof M=="function"?M:uc([[+M[0][0],+M[0][1]],[+M[1][0],+M[1][1]]]),S):t},S.scaleExtent=function(M){return arguments.length?(l[0]=+M[0],l[1]=+M[1],S):[l[0],l[1]]},S.translateExtent=function(M){return arguments.length?(c[0][0]=+M[0][0],c[1][0]=+M[1][0],c[0][1]=+M[0][1],c[1][1]=+M[1][1],S):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},S.constrain=function(M){return arguments.length?(i=M,S):i},S.duration=function(M){return arguments.length?(f=+M,S):f},S.interpolate=function(M){return arguments.length?(h=M,S):h},S.on=function(){var M=p.on.apply(p,arguments);return M===p?S:M},S.clickDistance=function(M){return arguments.length?(N=(M=+M)*M,S):Math.sqrt(N)},S.tapDistance=function(M){return arguments.length?(C=+M,S):C},S}const Gn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:i,targetHandle:o})=>`Couldn't create edge for ${e} handle id: "${e==="source"?i:o}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},ys=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],f0=["Enter"," ","Escape"],h0={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:i})=>`Moved selected node ${e}. New position, x: ${t}, y: ${i}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Uo;(function(e){e.Strict="strict",e.Loose="loose"})(Uo||(Uo={}));var Rr;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Rr||(Rr={}));var xs;(function(e){e.Partial="partial",e.Full="full"})(xs||(xs={}));const p0={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var rr;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(rr||(rr={}));var zc;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(zc||(zc={}));var ge;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(ge||(ge={}));const Hx={[ge.Left]:ge.Right,[ge.Right]:ge.Left,[ge.Top]:ge.Bottom,[ge.Bottom]:ge.Top};function m0(e){return e===null?null:e?"valid":"invalid"}const g0=e=>"id"in e&&"source"in e&&"target"in e,_k=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),tp=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Ts=(e,t=[0,0])=>{const{width:i,height:o}=wi(e),s=e.origin??t,l=i*s[0],c=o*s[1];return{x:e.position.x-l,y:e.position.y-c}},Ok=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const i=e.reduce((o,s)=>{const l=typeof s=="string";let c=!t.nodeLookup&&!l?s:void 0;t.nodeLookup&&(c=l?t.nodeLookup.get(s):tp(s)?s:t.nodeLookup.get(s.id));const f=c?Ic(c,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return eu(o,f)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return tu(i)},As=(e,t={})=>{let i={x:1/0,y:1/0,x2:-1/0,y2:-1/0},o=!1;return e.forEach(s=>{(t.filter===void 0||t.filter(s))&&(i=eu(i,Ic(s)),o=!0)}),o?tu(i):{x:0,y:0,width:0,height:0}},np=(e,t,[i,o,s]=[0,0,1],l=!1,c=!1)=>{const f={...Ds(t,[i,o,s]),width:t.width/s,height:t.height/s},h=[];for(const p of e.values()){const{measured:m,selectable:g=!0,hidden:v=!1}=p;if(c&&!g||v)continue;const b=m.width??p.width??p.initialWidth??null,w=m.height??p.height??p.initialHeight??null,N=vs(f,Fo(p)),C=(b??0)*(w??0),S=l&&N>0;(!p.internals.handleBounds||S||N>=C||p.dragging)&&h.push(p)}return h},Rk=(e,t)=>{const i=new Set;return e.forEach(o=>{i.add(o.id)}),t.filter(o=>i.has(o.source)||i.has(o.target))};function Lk(e,t){const i=new Map,o=t?.nodes?new Set(t.nodes.map(s=>s.id)):null;return e.forEach(s=>{s.measured.width&&s.measured.height&&(t?.includeHiddenNodes||!s.hidden)&&(!o||o.has(s.id))&&i.set(s.id,s)}),i}async function zk({nodes:e,width:t,height:i,panZoom:o,minZoom:s,maxZoom:l},c){if(e.size===0)return Promise.resolve(!0);const f=Lk(e,c),h=As(f),p=ip(h,t,i,c?.minZoom??s,c?.maxZoom??l,c?.padding??.1);return await o.setViewport(p,{duration:c?.duration,ease:c?.ease,interpolate:c?.interpolate}),Promise.resolve(!0)}function y0({nodeId:e,nextPosition:t,nodeLookup:i,nodeOrigin:o=[0,0],nodeExtent:s,onError:l}){const c=i.get(e),f=c.parentId?i.get(c.parentId):void 0,{x:h,y:p}=f?f.internals.positionAbsolute:{x:0,y:0},m=c.origin??o;let g=c.extent||s;if(c.extent==="parent"&&!c.expandParent)if(!f)l?.("005",Gn.error005());else{const b=f.measured.width,w=f.measured.height;b&&w&&(g=[[h,p],[h+b,p+w]])}else f&&Go(c.extent)&&(g=[[c.extent[0][0]+h,c.extent[0][1]+p],[c.extent[1][0]+h,c.extent[1][1]+p]]);const v=Go(g)?Ir(t,g,c.measured):t;return(c.measured.width===void 0||c.measured.height===void 0)&&l?.("015",Gn.error015()),{position:{x:v.x-h+(c.measured.width??0)*m[0],y:v.y-p+(c.measured.height??0)*m[1]},positionAbsolute:v}}async function Ik({nodesToRemove:e=[],edgesToRemove:t=[],nodes:i,edges:o,onBeforeDelete:s}){const l=new Set(e.map(v=>v.id)),c=[];for(const v of i){if(v.deletable===!1)continue;const b=l.has(v.id),w=!b&&v.parentId&&c.find(N=>N.id===v.parentId);(b||w)&&c.push(v)}const f=new Set(t.map(v=>v.id)),h=o.filter(v=>v.deletable!==!1),m=Rk(c,h);for(const v of h)f.has(v.id)&&!m.find(w=>w.id===v.id)&&m.push(v);if(!s)return{edges:m,nodes:c};const g=await s({nodes:c,edges:m});return typeof g=="boolean"?g?{edges:m,nodes:c}:{edges:[],nodes:[]}:g}const Vo=(e,t=0,i=1)=>Math.min(Math.max(e,t),i),Ir=(e={x:0,y:0},t,i)=>({x:Vo(e.x,t[0][0],t[1][0]-(i?.width??0)),y:Vo(e.y,t[0][1],t[1][1]-(i?.height??0))});function x0(e,t,i){const{width:o,height:s}=wi(i),{x:l,y:c}=i.internals.positionAbsolute;return Ir(e,[[l,c],[l+o,c+s]],t)}const $x=(e,t,i)=>e<t?Vo(Math.abs(e-t),1,t)/t:e>i?-Vo(Math.abs(e-i),1,t)/t:0,v0=(e,t,i=15,o=40)=>{const s=$x(e.x,o,t.width-o)*i,l=$x(e.y,o,t.height-o)*i;return[s,l]},eu=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Eh=({x:e,y:t,width:i,height:o})=>({x:e,y:t,x2:e+i,y2:t+o}),tu=({x:e,y:t,x2:i,y2:o})=>({x:e,y:t,width:i-e,height:o-t}),Fo=(e,t=[0,0])=>{const{x:i,y:o}=tp(e)?e.internals.positionAbsolute:Ts(e,t);return{x:i,y:o,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},Ic=(e,t=[0,0])=>{const{x:i,y:o}=tp(e)?e.internals.positionAbsolute:Ts(e,t);return{x:i,y:o,x2:i+(e.measured?.width??e.width??e.initialWidth??0),y2:o+(e.measured?.height??e.height??e.initialHeight??0)}},b0=(e,t)=>tu(eu(Eh(e),Eh(t))),vs=(e,t)=>{const i=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(i*o)},Px=e=>_n(e.width)&&_n(e.height)&&_n(e.x)&&_n(e.y),_n=e=>!isNaN(e)&&isFinite(e),Bk=(e,t)=>{},Ms=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Ds=({x:e,y:t},[i,o,s],l=!1,c=[1,1])=>{const f={x:(e-i)/s,y:(t-o)/s};return l?Ms(f,c):f},Bc=({x:e,y:t},[i,o,s])=>({x:e*s+i,y:t*s+o});function Mo(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const i=parseFloat(e);if(!Number.isNaN(i))return Math.floor(i)}if(typeof e=="string"&&e.endsWith("%")){const i=parseFloat(e);if(!Number.isNaN(i))return Math.floor(t*i*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function Hk(e,t,i){if(typeof e=="string"||typeof e=="number"){const o=Mo(e,i),s=Mo(e,t);return{top:o,right:s,bottom:o,left:s,x:s*2,y:o*2}}if(typeof e=="object"){const o=Mo(e.top??e.y??0,i),s=Mo(e.bottom??e.y??0,i),l=Mo(e.left??e.x??0,t),c=Mo(e.right??e.x??0,t);return{top:o,right:c,bottom:s,left:l,x:l+c,y:o+s}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function $k(e,t,i,o,s,l){const{x:c,y:f}=Bc(e,[t,i,o]),{x:h,y:p}=Bc({x:e.x+e.width,y:e.y+e.height},[t,i,o]),m=s-h,g=l-p;return{left:Math.floor(c),top:Math.floor(f),right:Math.floor(m),bottom:Math.floor(g)}}const ip=(e,t,i,o,s,l)=>{const c=Hk(l,t,i),f=(t-c.x)/e.width,h=(i-c.y)/e.height,p=Math.min(f,h),m=Vo(p,o,s),g=e.x+e.width/2,v=e.y+e.height/2,b=t/2-g*m,w=i/2-v*m,N=$k(e,b,w,m,t,i),C={left:Math.min(N.left-c.left,0),top:Math.min(N.top-c.top,0),right:Math.min(N.right-c.right,0),bottom:Math.min(N.bottom-c.bottom,0)};return{x:b-C.left+C.right,y:w-C.top+C.bottom,zoom:m}},bs=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Go(e){return e!=null&&e!=="parent"}function wi(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function w0(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function S0(e,t={width:0,height:0},i,o,s){const l={...e},c=o.get(i);if(c){const f=c.origin||s;l.x+=c.internals.positionAbsolute.x-(t.width??0)*f[0],l.y+=c.internals.positionAbsolute.y-(t.height??0)*f[1]}return l}function qx(e,t){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}function Pk(){let e,t;return{promise:new Promise((o,s)=>{e=o,t=s}),resolve:e,reject:t}}function qk(e){return{...h0,...e||{}}}function ss(e,{snapGrid:t=[0,0],snapToGrid:i=!1,transform:o,containerBounds:s}){const{x:l,y:c}=On(e),f=Ds({x:l-(s?.left??0),y:c-(s?.top??0)},o),{x:h,y:p}=i?Ms(f,t):f;return{xSnapped:h,ySnapped:p,...f}}const rp=e=>({width:e.offsetWidth,height:e.offsetHeight}),N0=e=>e?.getRootNode?.()||window?.document,Uk=["INPUT","SELECT","TEXTAREA"];function E0(e){const t=e.composedPath?.()?.[0]||e.target;return t?.nodeType!==1?!1:Uk.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const j0=e=>"clientX"in e,On=(e,t)=>{const i=j0(e),o=i?e.clientX:e.touches?.[0].clientX,s=i?e.clientY:e.touches?.[0].clientY;return{x:o-(t?.left??0),y:s-(t?.top??0)}},Ux=(e,t,i,o,s)=>{const l=t.querySelectorAll(`.${e}`);return!l||!l.length?null:Array.from(l).map(c=>{const f=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),type:e,nodeId:s,position:c.getAttribute("data-handlepos"),x:(f.left-i.left)/o,y:(f.top-i.top)/o,...rp(c)}})};function C0({sourceX:e,sourceY:t,targetX:i,targetY:o,sourceControlX:s,sourceControlY:l,targetControlX:c,targetControlY:f}){const h=e*.125+s*.375+c*.375+i*.125,p=t*.125+l*.375+f*.375+o*.125,m=Math.abs(h-e),g=Math.abs(p-t);return[h,p,m,g]}function dc(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Vx({pos:e,x1:t,y1:i,x2:o,y2:s,c:l}){switch(e){case ge.Left:return[t-dc(t-o,l),i];case ge.Right:return[t+dc(o-t,l),i];case ge.Top:return[t,i-dc(i-s,l)];case ge.Bottom:return[t,i+dc(s-i,l)]}}function k0({sourceX:e,sourceY:t,sourcePosition:i=ge.Bottom,targetX:o,targetY:s,targetPosition:l=ge.Top,curvature:c=.25}){const[f,h]=Vx({pos:i,x1:e,y1:t,x2:o,y2:s,c}),[p,m]=Vx({pos:l,x1:o,y1:s,x2:e,y2:t,c}),[g,v,b,w]=C0({sourceX:e,sourceY:t,targetX:o,targetY:s,sourceControlX:f,sourceControlY:h,targetControlX:p,targetControlY:m});return[`M${e},${t} C${f},${h} ${p},${m} ${o},${s}`,g,v,b,w]}function T0({sourceX:e,sourceY:t,targetX:i,targetY:o}){const s=Math.abs(i-e)/2,l=i<e?i+s:i-s,c=Math.abs(o-t)/2,f=o<t?o+c:o-c;return[l,f,s,c]}function Vk({sourceNode:e,targetNode:t,selected:i=!1,zIndex:o=0,elevateOnSelect:s=!1,zIndexMode:l="basic"}){if(l==="manual")return o;const c=s&&i?o+1e3:o,f=Math.max(e.parentId||s&&e.selected?e.internals.z:0,t.parentId||s&&t.selected?t.internals.z:0);return c+f}function Fk({sourceNode:e,targetNode:t,width:i,height:o,transform:s}){const l=eu(Ic(e),Ic(t));l.x===l.x2&&(l.x2+=1),l.y===l.y2&&(l.y2+=1);const c={x:-s[0]/s[2],y:-s[1]/s[2],width:i/s[2],height:o/s[2]};return vs(c,tu(l))>0}const Gk=({source:e,sourceHandle:t,target:i,targetHandle:o})=>`xy-edge__${e}${t||""}-${i}${o||""}`,Yk=(e,t)=>t.some(i=>i.source===e.source&&i.target===e.target&&(i.sourceHandle===e.sourceHandle||!i.sourceHandle&&!e.sourceHandle)&&(i.targetHandle===e.targetHandle||!i.targetHandle&&!e.targetHandle)),A0=(e,t,i={})=>{if(!e.source||!e.target)return t;const o=i.getEdgeId||Gk;let s;return g0(e)?s={...e}:s={...e,id:o(e)},Yk(s,t)?t:(s.sourceHandle===null&&delete s.sourceHandle,s.targetHandle===null&&delete s.targetHandle,t.concat(s))};function M0({sourceX:e,sourceY:t,targetX:i,targetY:o}){const[s,l,c,f]=T0({sourceX:e,sourceY:t,targetX:i,targetY:o});return[`M ${e},${t}L ${i},${o}`,s,l,c,f]}const Fx={[ge.Left]:{x:-1,y:0},[ge.Right]:{x:1,y:0},[ge.Top]:{x:0,y:-1},[ge.Bottom]:{x:0,y:1}},Xk=({source:e,sourcePosition:t=ge.Bottom,target:i})=>t===ge.Left||t===ge.Right?e.x<i.x?{x:1,y:0}:{x:-1,y:0}:e.y<i.y?{x:0,y:1}:{x:0,y:-1},Gx=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Qk({source:e,sourcePosition:t=ge.Bottom,target:i,targetPosition:o=ge.Top,center:s,offset:l,stepPosition:c}){const f=Fx[t],h=Fx[o],p={x:e.x+f.x*l,y:e.y+f.y*l},m={x:i.x+h.x*l,y:i.y+h.y*l},g=Xk({source:p,sourcePosition:t,target:m}),v=g.x!==0?"x":"y",b=g[v];let w=[],N,C;const S={x:0,y:0},k={x:0,y:0},[,,j,_]=T0({sourceX:e.x,sourceY:e.y,targetX:i.x,targetY:i.y});if(f[v]*h[v]===-1){v==="x"?(N=s.x??p.x+(m.x-p.x)*c,C=s.y??(p.y+m.y)/2):(N=s.x??(p.x+m.x)/2,C=s.y??p.y+(m.y-p.y)*c);const A=[{x:N,y:p.y},{x:N,y:m.y}],H=[{x:p.x,y:C},{x:m.x,y:C}];f[v]===b?w=v==="x"?A:H:w=v==="x"?H:A}else{const A=[{x:p.x,y:m.y}],H=[{x:m.x,y:p.y}];if(v==="x"?w=f.x===b?H:A:w=f.y===b?A:H,t===o){const U=Math.abs(e[v]-i[v]);if(U<=l){const Z=Math.min(l-1,l-U);f[v]===b?S[v]=(p[v]>e[v]?-1:1)*Z:k[v]=(m[v]>i[v]?-1:1)*Z}}if(t!==o){const U=v==="x"?"y":"x",Z=f[v]===h[U],M=p[U]>m[U],P=p[U]<m[U];(f[v]===1&&(!Z&&M||Z&&P)||f[v]!==1&&(!Z&&P||Z&&M))&&(w=v==="x"?A:H)}const V={x:p.x+S.x,y:p.y+S.y},G={x:m.x+k.x,y:m.y+k.y},I=Math.max(Math.abs(V.x-w[0].x),Math.abs(G.x-w[0].x)),z=Math.max(Math.abs(V.y-w[0].y),Math.abs(G.y-w[0].y));I>=z?(N=(V.x+G.x)/2,C=w[0].y):(N=w[0].x,C=(V.y+G.y)/2)}return[[e,{x:p.x+S.x,y:p.y+S.y},...w,{x:m.x+k.x,y:m.y+k.y},i],N,C,j,_]}function Wk(e,t,i,o){const s=Math.min(Gx(e,t)/2,Gx(t,i)/2,o),{x:l,y:c}=t;if(e.x===l&&l===i.x||e.y===c&&c===i.y)return`L${l} ${c}`;if(e.y===c){const p=e.x<i.x?-1:1,m=e.y<i.y?1:-1;return`L ${l+s*p},${c}Q ${l},${c} ${l},${c+s*m}`}const f=e.x<i.x?1:-1,h=e.y<i.y?-1:1;return`L ${l},${c+s*h}Q ${l},${c} ${l+s*f},${c}`}function Hc({sourceX:e,sourceY:t,sourcePosition:i=ge.Bottom,targetX:o,targetY:s,targetPosition:l=ge.Top,borderRadius:c=5,centerX:f,centerY:h,offset:p=20,stepPosition:m=.5}){const[g,v,b,w,N]=Qk({source:{x:e,y:t},sourcePosition:i,target:{x:o,y:s},targetPosition:l,center:{x:f,y:h},offset:p,stepPosition:m});return[g.reduce((S,k,j)=>{let _="";return j>0&&j<g.length-1?_=Wk(g[j-1],k,g[j+1],c):_=`${j===0?"M":"L"}${k.x} ${k.y}`,S+=_,S},""),v,b,w,N]}function Yx(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Zk(e){const{sourceNode:t,targetNode:i}=e;if(!Yx(t)||!Yx(i))return null;const o=t.internals.handleBounds||Xx(t.handles),s=i.internals.handleBounds||Xx(i.handles),l=Qx(o?.source??[],e.sourceHandle),c=Qx(e.connectionMode===Uo.Strict?s?.target??[]:(s?.target??[]).concat(s?.source??[]),e.targetHandle);if(!l||!c)return e.onError?.("008",Gn.error008(l?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const f=l?.position||ge.Bottom,h=c?.position||ge.Top,p=Br(t,l,f),m=Br(i,c,h);return{sourceX:p.x,sourceY:p.y,targetX:m.x,targetY:m.y,sourcePosition:f,targetPosition:h}}function Xx(e){if(!e)return null;const t=[],i=[];for(const o of e)o.width=o.width??1,o.height=o.height??1,o.type==="source"?t.push(o):o.type==="target"&&i.push(o);return{source:t,target:i}}function Br(e,t,i=ge.Left,o=!1){const s=(t?.x??0)+e.internals.positionAbsolute.x,l=(t?.y??0)+e.internals.positionAbsolute.y,{width:c,height:f}=t??wi(e);if(o)return{x:s+c/2,y:l+f/2};switch(t?.position??i){case ge.Top:return{x:s+c/2,y:l};case ge.Right:return{x:s+c,y:l+f/2};case ge.Bottom:return{x:s+c/2,y:l+f};case ge.Left:return{x:s,y:l+f/2}}}function Qx(e,t){return e&&(t?e.find(i=>i.id===t):e[0])||null}function jh(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`:""}function Jk(e,{id:t,defaultColor:i,defaultMarkerStart:o,defaultMarkerEnd:s}){const l=new Set;return e.reduce((c,f)=>([f.markerStart||o,f.markerEnd||s].forEach(h=>{if(h&&typeof h=="object"){const p=jh(h,t);l.has(p)||(c.push({id:p,color:h.color||i,...h}),l.add(p))}}),c),[]).sort((c,f)=>c.id.localeCompare(f.id))}const D0=1e3,Kk=10,op={nodeOrigin:[0,0],nodeExtent:ys,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},eT={...op,checkEquality:!0};function ap(e,t){const i={...e};for(const o in t)t[o]!==void 0&&(i[o]=t[o]);return i}function tT(e,t,i){const o=ap(op,i);for(const s of e.values())if(s.parentId)lp(s,e,t,o);else{const l=Ts(s,o.nodeOrigin),c=Go(s.extent)?s.extent:o.nodeExtent,f=Ir(l,c,wi(s));s.internals.positionAbsolute=f}}function nT(e,t){if(!e.handles)return e.measured?t?.internals.handleBounds:void 0;const i=[],o=[];for(const s of e.handles){const l={id:s.id,width:s.width??1,height:s.height??1,nodeId:e.id,x:s.x,y:s.y,position:s.position,type:s.type};s.type==="source"?i.push(l):s.type==="target"&&o.push(l)}return{source:i,target:o}}function sp(e){return e==="manual"}function Ch(e,t,i,o={}){const s=ap(eT,o),l={i:0},c=new Map(t),f=s?.elevateNodesOnSelect&&!sp(s.zIndexMode)?D0:0;let h=e.length>0;t.clear(),i.clear();for(const p of e){let m=c.get(p.id);if(s.checkEquality&&p===m?.internals.userNode)t.set(p.id,m);else{const g=Ts(p,s.nodeOrigin),v=Go(p.extent)?p.extent:s.nodeExtent,b=Ir(g,v,wi(p));m={...s.defaults,...p,measured:{width:p.measured?.width,height:p.measured?.height},internals:{positionAbsolute:b,handleBounds:nT(p,m),z:_0(p,f,s.zIndexMode),userNode:p}},t.set(p.id,m)}(m.measured===void 0||m.measured.width===void 0||m.measured.height===void 0)&&!m.hidden&&(h=!1),p.parentId&&lp(m,t,i,o,l)}return h}function iT(e,t){if(!e.parentId)return;const i=t.get(e.parentId);i?i.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function lp(e,t,i,o,s){const{elevateNodesOnSelect:l,nodeOrigin:c,nodeExtent:f,zIndexMode:h}=ap(op,o),p=e.parentId,m=t.get(p);if(!m){console.warn(`Parent node ${p} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}iT(e,i),s&&!m.parentId&&m.internals.rootParentIndex===void 0&&h==="auto"&&(m.internals.rootParentIndex=++s.i,m.internals.z=m.internals.z+s.i*Kk),s&&m.internals.rootParentIndex!==void 0&&(s.i=m.internals.rootParentIndex);const g=l&&!sp(h)?D0:0,{x:v,y:b,z:w}=rT(e,m,c,f,g,h),{positionAbsolute:N}=e.internals,C=v!==N.x||b!==N.y;(C||w!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:C?{x:v,y:b}:N,z:w}})}function _0(e,t,i){const o=_n(e.zIndex)?e.zIndex:0;return sp(i)?o:o+(e.selected?t:0)}function rT(e,t,i,o,s,l){const{x:c,y:f}=t.internals.positionAbsolute,h=wi(e),p=Ts(e,i),m=Go(e.extent)?Ir(p,e.extent,h):p;let g=Ir({x:c+m.x,y:f+m.y},o,h);e.extent==="parent"&&(g=x0(g,h,t));const v=_0(e,s,l),b=t.internals.z??0;return{x:g.x,y:g.y,z:b>=v?b+1:v}}function cp(e,t,i,o=[0,0]){const s=[],l=new Map;for(const c of e){const f=t.get(c.parentId);if(!f)continue;const h=l.get(c.parentId)?.expandedRect??Fo(f),p=b0(h,c.rect);l.set(c.parentId,{expandedRect:p,parent:f})}return l.size>0&&l.forEach(({expandedRect:c,parent:f},h)=>{const p=f.internals.positionAbsolute,m=wi(f),g=f.origin??o,v=c.x<p.x?Math.round(Math.abs(p.x-c.x)):0,b=c.y<p.y?Math.round(Math.abs(p.y-c.y)):0,w=Math.max(m.width,Math.round(c.width)),N=Math.max(m.height,Math.round(c.height)),C=(w-m.width)*g[0],S=(N-m.height)*g[1];(v>0||b>0||C||S)&&(s.push({id:h,type:"position",position:{x:f.position.x-v+C,y:f.position.y-b+S}}),i.get(h)?.forEach(k=>{e.some(j=>j.id===k.id)||s.push({id:k.id,type:"position",position:{x:k.position.x+v,y:k.position.y+b}})})),(m.width<c.width||m.height<c.height||v||b)&&s.push({id:h,type:"dimensions",setAttributes:!0,dimensions:{width:w+(v?g[0]*v-C:0),height:N+(b?g[1]*b-S:0)}})}),s}function oT(e,t,i,o,s,l,c){const f=o?.querySelector(".xyflow__viewport");let h=!1;if(!f)return{changes:[],updatedInternals:h};const p=[],m=window.getComputedStyle(f),{m22:g}=new window.DOMMatrixReadOnly(m.transform),v=[];for(const b of e.values()){const w=t.get(b.id);if(!w)continue;if(w.hidden){t.set(w.id,{...w,internals:{...w.internals,handleBounds:void 0}}),h=!0;continue}const N=rp(b.nodeElement),C=w.measured.width!==N.width||w.measured.height!==N.height;if(!!(N.width&&N.height&&(C||!w.internals.handleBounds||b.force))){const k=b.nodeElement.getBoundingClientRect(),j=Go(w.extent)?w.extent:l;let{positionAbsolute:_}=w.internals;w.parentId&&w.extent==="parent"?_=x0(_,N,t.get(w.parentId)):j&&(_=Ir(_,j,N));const $={...w,measured:N,internals:{...w.internals,positionAbsolute:_,handleBounds:{source:Ux("source",b.nodeElement,k,g,w.id),target:Ux("target",b.nodeElement,k,g,w.id)}}};t.set(w.id,$),w.parentId&&lp($,t,i,{nodeOrigin:s,zIndexMode:c}),h=!0,C&&(p.push({id:w.id,type:"dimensions",dimensions:N}),w.expandParent&&w.parentId&&v.push({id:w.id,parentId:w.parentId,rect:Fo($,s)}))}}if(v.length>0){const b=cp(v,t,i,s);p.push(...b)}return{changes:p,updatedInternals:h}}async function aT({delta:e,panZoom:t,transform:i,translateExtent:o,width:s,height:l}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const c=await t.setViewportConstrained({x:i[0]+e.x,y:i[1]+e.y,zoom:i[2]},[[0,0],[s,l]],o),f=!!c&&(c.x!==i[0]||c.y!==i[1]||c.k!==i[2]);return Promise.resolve(f)}function Wx(e,t,i,o,s,l){let c=s;const f=o.get(c)||new Map;o.set(c,f.set(i,t)),c=`${s}-${e}`;const h=o.get(c)||new Map;if(o.set(c,h.set(i,t)),l){c=`${s}-${e}-${l}`;const p=o.get(c)||new Map;o.set(c,p.set(i,t))}}function O0(e,t,i){e.clear(),t.clear();for(const o of i){const{source:s,target:l,sourceHandle:c=null,targetHandle:f=null}=o,h={edgeId:o.id,source:s,target:l,sourceHandle:c,targetHandle:f},p=`${s}-${c}--${l}-${f}`,m=`${l}-${f}--${s}-${c}`;Wx("source",h,m,e,s,c),Wx("target",h,p,e,l,f),t.set(o.id,o)}}function R0(e,t){if(!e.parentId)return!1;const i=t.get(e.parentId);return i?i.selected?!0:R0(i,t):!1}function Zx(e,t,i){let o=e;do{if(o?.matches?.(t))return!0;if(o===i)return!1;o=o?.parentElement}while(o);return!1}function sT(e,t,i,o){const s=new Map;for(const[l,c]of e)if((c.selected||c.id===o)&&(!c.parentId||!R0(c,e))&&(c.draggable||t&&typeof c.draggable>"u")){const f=e.get(l);f&&s.set(l,{id:l,position:f.position||{x:0,y:0},distance:{x:i.x-f.internals.positionAbsolute.x,y:i.y-f.internals.positionAbsolute.y},extent:f.extent,parentId:f.parentId,origin:f.origin,expandParent:f.expandParent,internals:{positionAbsolute:f.internals.positionAbsolute||{x:0,y:0}},measured:{width:f.measured.width??0,height:f.measured.height??0}})}return s}function Bf({nodeId:e,dragItems:t,nodeLookup:i,dragging:o=!0}){const s=[];for(const[c,f]of t){const h=i.get(c)?.internals.userNode;h&&s.push({...h,position:f.position,dragging:o})}if(!e)return[s[0],s];const l=i.get(e)?.internals.userNode;return[l?{...l,position:t.get(e)?.position||l.position,dragging:o}:s[0],s]}function lT({dragItems:e,snapGrid:t,x:i,y:o}){const s=e.values().next().value;if(!s)return null;const l={x:i-s.distance.x,y:o-s.distance.y},c=Ms(l,t);return{x:c.x-l.x,y:c.y-l.y}}function cT({onNodeMouseDown:e,getStoreItems:t,onDragStart:i,onDrag:o,onDragStop:s}){let l={x:null,y:null},c=0,f=new Map,h=!1,p={x:0,y:0},m=null,g=!1,v=null,b=!1,w=!1,N=null;function C({noDragClassName:k,handleSelector:j,domNode:_,isSelectable:$,nodeId:A,nodeClickDistance:H=0}){v=dn(_);function V({x:U,y:Z}){const{nodeLookup:M,nodeExtent:P,snapGrid:O,snapToGrid:q,nodeOrigin:Y,onNodeDrag:Q,onSelectionDrag:D,onError:B,updateNodePositions:F}=t();l={x:U,y:Z};let L=!1;const ie=f.size>1,te=ie&&P?Eh(As(f)):null,re=ie&&q?lT({dragItems:f,snapGrid:O,x:U,y:Z}):null;for(const[de,ae]of f){if(!M.has(de))continue;let fe={x:U-ae.distance.x,y:Z-ae.distance.y};q&&(fe=re?{x:Math.round(fe.x+re.x),y:Math.round(fe.y+re.y)}:Ms(fe,O));let xe=null;if(ie&&P&&!ae.extent&&te){const{positionAbsolute:Ee}=ae.internals,De=Ee.x-te.x+P[0][0],qe=Ee.x+ae.measured.width-te.x2+P[1][0],Ue=Ee.y-te.y+P[0][1],ft=Ee.y+ae.measured.height-te.y2+P[1][1];xe=[[De,Ue],[qe,ft]]}const{position:je,positionAbsolute:ve}=y0({nodeId:de,nextPosition:fe,nodeLookup:M,nodeExtent:xe||P,nodeOrigin:Y,onError:B});L=L||ae.position.x!==je.x||ae.position.y!==je.y,ae.position=je,ae.internals.positionAbsolute=ve}if(w=w||L,!!L&&(F(f,!0),N&&(o||Q||!A&&D))){const[de,ae]=Bf({nodeId:A,dragItems:f,nodeLookup:M});o?.(N,f,de,ae),Q?.(N,de,ae),A||D?.(N,ae)}}async function G(){if(!m)return;const{transform:U,panBy:Z,autoPanSpeed:M,autoPanOnNodeDrag:P}=t();if(!P){h=!1,cancelAnimationFrame(c);return}const[O,q]=v0(p,m,M);(O!==0||q!==0)&&(l.x=(l.x??0)-O/U[2],l.y=(l.y??0)-q/U[2],await Z({x:O,y:q})&&V(l)),c=requestAnimationFrame(G)}function I(U){const{nodeLookup:Z,multiSelectionActive:M,nodesDraggable:P,transform:O,snapGrid:q,snapToGrid:Y,selectNodesOnDrag:Q,onNodeDragStart:D,onSelectionDragStart:B,unselectNodesAndEdges:F}=t();g=!0,(!Q||!$)&&!M&&A&&(Z.get(A)?.selected||F()),$&&Q&&A&&e?.(A);const L=ss(U.sourceEvent,{transform:O,snapGrid:q,snapToGrid:Y,containerBounds:m});if(l=L,f=sT(Z,P,L,A),f.size>0&&(i||D||!A&&B)){const[ie,te]=Bf({nodeId:A,dragItems:f,nodeLookup:Z});i?.(U.sourceEvent,f,ie,te),D?.(U.sourceEvent,ie,te),A||B?.(U.sourceEvent,te)}}const z=Wb().clickDistance(H).on("start",U=>{const{domNode:Z,nodeDragThreshold:M,transform:P,snapGrid:O,snapToGrid:q}=t();m=Z?.getBoundingClientRect()||null,b=!1,w=!1,N=U.sourceEvent,M===0&&I(U),l=ss(U.sourceEvent,{transform:P,snapGrid:O,snapToGrid:q,containerBounds:m}),p=On(U.sourceEvent,m)}).on("drag",U=>{const{autoPanOnNodeDrag:Z,transform:M,snapGrid:P,snapToGrid:O,nodeDragThreshold:q,nodeLookup:Y}=t(),Q=ss(U.sourceEvent,{transform:M,snapGrid:P,snapToGrid:O,containerBounds:m});if(N=U.sourceEvent,(U.sourceEvent.type==="touchmove"&&U.sourceEvent.touches.length>1||A&&!Y.has(A))&&(b=!0),!b){if(!h&&Z&&g&&(h=!0,G()),!g){const D=On(U.sourceEvent,m),B=D.x-p.x,F=D.y-p.y;Math.sqrt(B*B+F*F)>q&&I(U)}(l.x!==Q.xSnapped||l.y!==Q.ySnapped)&&f&&g&&(p=On(U.sourceEvent,m),V(Q))}}).on("end",U=>{if(!(!g||b)&&(h=!1,g=!1,cancelAnimationFrame(c),f.size>0)){const{nodeLookup:Z,updateNodePositions:M,onNodeDragStop:P,onSelectionDragStop:O}=t();if(w&&(M(f,!1),w=!1),s||P||!A&&O){const[q,Y]=Bf({nodeId:A,dragItems:f,nodeLookup:Z,dragging:!1});s?.(U.sourceEvent,f,q,Y),P?.(U.sourceEvent,q,Y),A||O?.(U.sourceEvent,Y)}}}).filter(U=>{const Z=U.target;return!U.button&&(!k||!Zx(Z,`.${k}`,_))&&(!j||Zx(Z,j,_))});v.call(z)}function S(){v?.on(".drag",null)}return{update:C,destroy:S}}function uT(e,t,i){const o=[],s={x:e.x-i,y:e.y-i,width:i*2,height:i*2};for(const l of t.values())vs(s,Fo(l))>0&&o.push(l);return o}const dT=250;function fT(e,t,i,o){let s=[],l=1/0;const c=uT(e,i,t+dT);for(const f of c){const h=[...f.internals.handleBounds?.source??[],...f.internals.handleBounds?.target??[]];for(const p of h){if(o.nodeId===p.nodeId&&o.type===p.type&&o.id===p.id)continue;const{x:m,y:g}=Br(f,p,p.position,!0),v=Math.sqrt(Math.pow(m-e.x,2)+Math.pow(g-e.y,2));v>t||(v<l?(s=[{...p,x:m,y:g}],l=v):v===l&&s.push({...p,x:m,y:g}))}}if(!s.length)return null;if(s.length>1){const f=o.type==="source"?"target":"source";return s.find(h=>h.type===f)??s[0]}return s[0]}function L0(e,t,i,o,s,l=!1){const c=o.get(e);if(!c)return null;const f=s==="strict"?c.internals.handleBounds?.[t]:[...c.internals.handleBounds?.source??[],...c.internals.handleBounds?.target??[]],h=(i?f?.find(p=>p.id===i):f?.[0])??null;return h&&l?{...h,...Br(c,h,h.position,!0)}:h}function z0(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function hT(e,t){let i=null;return t?i=!0:e&&!t&&(i=!1),i}const I0=()=>!0;function pT(e,{connectionMode:t,connectionRadius:i,handleId:o,nodeId:s,edgeUpdaterType:l,isTarget:c,domNode:f,nodeLookup:h,lib:p,autoPanOnConnect:m,flowId:g,panBy:v,cancelConnection:b,onConnectStart:w,onConnect:N,onConnectEnd:C,isValidConnection:S=I0,onReconnectEnd:k,updateConnection:j,getTransform:_,getFromHandle:$,autoPanSpeed:A,dragThreshold:H=1,handleDomNode:V}){const G=N0(e.target);let I=0,z;const{x:U,y:Z}=On(e),M=z0(l,V),P=f?.getBoundingClientRect();let O=!1;if(!P||!M)return;const q=L0(s,M,o,h,t);if(!q)return;let Y=On(e,P),Q=!1,D=null,B=!1,F=null;function L(){if(!m||!P)return;const[je,ve]=v0(Y,P,A);v({x:je,y:ve}),I=requestAnimationFrame(L)}const ie={...q,nodeId:s,type:M,position:q.position},te=h.get(s);let de={inProgress:!0,isValid:null,from:Br(te,ie,ge.Left,!0),fromHandle:ie,fromPosition:ie.position,fromNode:te,to:Y,toHandle:null,toPosition:Hx[ie.position],toNode:null,pointer:Y};function ae(){O=!0,j(de),w?.(e,{nodeId:s,handleId:o,handleType:M})}H===0&&ae();function fe(je){if(!O){const{x:ft,y:Kt}=On(je),_t=ft-U,Pt=Kt-Z;if(!(_t*_t+Pt*Pt>H*H))return;ae()}if(!$()||!ie){xe(je);return}const ve=_();Y=On(je,P),z=fT(Ds(Y,ve,!1,[1,1]),i,h,ie),Q||(L(),Q=!0);const Ee=B0(je,{handle:z,connectionMode:t,fromNodeId:s,fromHandleId:o,fromType:c?"target":"source",isValidConnection:S,doc:G,lib:p,flowId:g,nodeLookup:h});F=Ee.handleDomNode,D=Ee.connection,B=hT(!!z,Ee.isValid);const De=h.get(s),qe=De?Br(De,ie,ge.Left,!0):de.from,Ue={...de,from:qe,isValid:B,to:Ee.toHandle&&B?Bc({x:Ee.toHandle.x,y:Ee.toHandle.y},ve):Y,toHandle:Ee.toHandle,toPosition:B&&Ee.toHandle?Ee.toHandle.position:Hx[ie.position],toNode:Ee.toHandle?h.get(Ee.toHandle.nodeId):null,pointer:Y};j(Ue),de=Ue}function xe(je){if(!("touches"in je&&je.touches.length>0)){if(O){(z||F)&&D&&B&&N?.(D);const{inProgress:ve,...Ee}=de,De={...Ee,toPosition:de.toHandle?de.toPosition:null};C?.(je,De),l&&k?.(je,De)}b(),cancelAnimationFrame(I),Q=!1,B=!1,D=null,F=null,G.removeEventListener("mousemove",fe),G.removeEventListener("mouseup",xe),G.removeEventListener("touchmove",fe),G.removeEventListener("touchend",xe)}}G.addEventListener("mousemove",fe),G.addEventListener("mouseup",xe),G.addEventListener("touchmove",fe),G.addEventListener("touchend",xe)}function B0(e,{handle:t,connectionMode:i,fromNodeId:o,fromHandleId:s,fromType:l,doc:c,lib:f,flowId:h,isValidConnection:p=I0,nodeLookup:m}){const g=l==="target",v=t?c.querySelector(`.${f}-flow__handle[data-id="${h}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:b,y:w}=On(e),N=c.elementFromPoint(b,w),C=N?.classList.contains(`${f}-flow__handle`)?N:v,S={handleDomNode:C,isValid:!1,connection:null,toHandle:null};if(C){const k=z0(void 0,C),j=C.getAttribute("data-nodeid"),_=C.getAttribute("data-handleid"),$=C.classList.contains("connectable"),A=C.classList.contains("connectableend");if(!j||!k)return S;const H={source:g?j:o,sourceHandle:g?_:s,target:g?o:j,targetHandle:g?s:_};S.connection=H;const G=$&&A&&(i===Uo.Strict?g&&k==="source"||!g&&k==="target":j!==o||_!==s);S.isValid=G&&p(H),S.toHandle=L0(j,k,_,m,i,!0)}return S}const kh={onPointerDown:pT,isValid:B0};function mT({domNode:e,panZoom:t,getTransform:i,getViewScale:o}){const s=dn(e);function l({translateExtent:f,width:h,height:p,zoomStep:m=1,pannable:g=!0,zoomable:v=!0,inversePan:b=!1}){const w=j=>{if(j.sourceEvent.type!=="wheel"||!t)return;const _=i(),$=j.sourceEvent.ctrlKey&&bs()?10:1,A=-j.sourceEvent.deltaY*(j.sourceEvent.deltaMode===1?.05:j.sourceEvent.deltaMode?1:.002)*m,H=_[2]*Math.pow(2,A*$);t.scaleTo(H)};let N=[0,0];const C=j=>{(j.sourceEvent.type==="mousedown"||j.sourceEvent.type==="touchstart")&&(N=[j.sourceEvent.clientX??j.sourceEvent.touches[0].clientX,j.sourceEvent.clientY??j.sourceEvent.touches[0].clientY])},S=j=>{const _=i();if(j.sourceEvent.type!=="mousemove"&&j.sourceEvent.type!=="touchmove"||!t)return;const $=[j.sourceEvent.clientX??j.sourceEvent.touches[0].clientX,j.sourceEvent.clientY??j.sourceEvent.touches[0].clientY],A=[$[0]-N[0],$[1]-N[1]];N=$;const H=o()*Math.max(_[2],Math.log(_[2]))*(b?-1:1),V={x:_[0]-A[0]*H,y:_[1]-A[1]*H},G=[[0,0],[h,p]];t.setViewportConstrained({x:V.x,y:V.y,zoom:_[2]},G,f)},k=d0().on("start",C).on("zoom",g?S:null).on("zoom.wheel",v?w:null);s.call(k,{})}function c(){s.on("zoom",null)}return{update:l,destroy:c,pointer:An}}const nu=e=>({x:e.x,y:e.y,zoom:e.k}),Hf=({x:e,y:t,zoom:i})=>Kc.translate(e,t).scale(i),Lo=(e,t)=>e.target.closest(`.${t}`),H0=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),gT=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,$f=(e,t=0,i=gT,o=()=>{})=>{const s=typeof t=="number"&&t>0;return s||o(),s?e.transition().duration(t).ease(i).on("end",o):e},$0=e=>{const t=e.ctrlKey&&bs()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function yT({zoomPanValues:e,noWheelClassName:t,d3Selection:i,d3Zoom:o,panOnScrollMode:s,panOnScrollSpeed:l,zoomOnPinch:c,onPanZoomStart:f,onPanZoom:h,onPanZoomEnd:p}){return m=>{if(Lo(m,t))return m.ctrlKey&&m.preventDefault(),!1;m.preventDefault(),m.stopImmediatePropagation();const g=i.property("__zoom").k||1;if(m.ctrlKey&&c){const C=An(m),S=$0(m),k=g*Math.pow(2,S);o.scaleTo(i,k,C,m);return}const v=m.deltaMode===1?20:1;let b=s===Rr.Vertical?0:m.deltaX*v,w=s===Rr.Horizontal?0:m.deltaY*v;!bs()&&m.shiftKey&&s!==Rr.Vertical&&(b=m.deltaY*v,w=0),o.translateBy(i,-(b/g)*l,-(w/g)*l,{internal:!0});const N=nu(i.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(h?.(m,N),e.panScrollTimeout=setTimeout(()=>{p?.(m,N),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,f?.(m,N))}}function xT({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:i}){return function(o,s){const l=o.type==="wheel",c=!t&&l&&!o.ctrlKey,f=Lo(o,e);if(o.ctrlKey&&l&&f&&o.preventDefault(),c||f)return null;o.preventDefault(),i.call(this,o,s)}}function vT({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:i}){return o=>{if(o.sourceEvent?.internal)return;const s=nu(o.transform);e.mouseButton=o.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=s,o.sourceEvent?.type==="mousedown"&&t(!0),i&&i?.(o.sourceEvent,s)}}function bT({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:i,onTransformChange:o,onPanZoom:s}){return l=>{e.usedRightMouseButton=!!(i&&H0(t,e.mouseButton??0)),l.sourceEvent?.sync||o([l.transform.x,l.transform.y,l.transform.k]),s&&!l.sourceEvent?.internal&&s?.(l.sourceEvent,nu(l.transform))}}function wT({zoomPanValues:e,panOnDrag:t,panOnScroll:i,onDraggingChange:o,onPanZoomEnd:s,onPaneContextMenu:l}){return c=>{if(!c.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,l&&H0(t,e.mouseButton??0)&&!e.usedRightMouseButton&&c.sourceEvent&&l(c.sourceEvent),e.usedRightMouseButton=!1,o(!1),s)){const f=nu(c.transform);e.prevViewport=f,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{s?.(c.sourceEvent,f)},i?150:0)}}}function ST({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:i,panOnDrag:o,panOnScroll:s,zoomOnDoubleClick:l,userSelectionActive:c,noWheelClassName:f,noPanClassName:h,lib:p,connectionInProgress:m}){return g=>{const v=e||t,b=i&&g.ctrlKey,w=g.type==="wheel";if(g.button===1&&g.type==="mousedown"&&(Lo(g,`${p}-flow__node`)||Lo(g,`${p}-flow__edge`)))return!0;if(!o&&!v&&!s&&!l&&!i||c||m&&!w||Lo(g,f)&&w||Lo(g,h)&&(!w||s&&w&&!e)||!i&&g.ctrlKey&&w)return!1;if(!i&&g.type==="touchstart"&&g.touches?.length>1)return g.preventDefault(),!1;if(!v&&!s&&!b&&w||!o&&(g.type==="mousedown"||g.type==="touchstart")||Array.isArray(o)&&!o.includes(g.button)&&g.type==="mousedown")return!1;const N=Array.isArray(o)&&o.includes(g.button)||!g.button||g.button<=1;return(!g.ctrlKey||w)&&N}}function NT({domNode:e,minZoom:t,maxZoom:i,translateExtent:o,viewport:s,onPanZoom:l,onPanZoomStart:c,onPanZoomEnd:f,onDraggingChange:h}){const p={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},m=e.getBoundingClientRect(),g=d0().scaleExtent([t,i]).translateExtent(o),v=dn(e).call(g);k({x:s.x,y:s.y,zoom:Vo(s.zoom,t,i)},[[0,0],[m.width,m.height]],o);const b=v.on("wheel.zoom"),w=v.on("dblclick.zoom");g.wheelDelta($0);function N(z,U){return v?new Promise(Z=>{g?.interpolate(U?.interpolate==="linear"?as:Ec).transform($f(v,U?.duration,U?.ease,()=>Z(!0)),z)}):Promise.resolve(!1)}function C({noWheelClassName:z,noPanClassName:U,onPaneContextMenu:Z,userSelectionActive:M,panOnScroll:P,panOnDrag:O,panOnScrollMode:q,panOnScrollSpeed:Y,preventScrolling:Q,zoomOnPinch:D,zoomOnScroll:B,zoomOnDoubleClick:F,zoomActivationKeyPressed:L,lib:ie,onTransformChange:te,connectionInProgress:re,paneClickDistance:de,selectionOnDrag:ae}){M&&!p.isZoomingOrPanning&&S();const fe=P&&!L&&!M;g.clickDistance(ae?1/0:!_n(de)||de<0?0:de);const xe=fe?yT({zoomPanValues:p,noWheelClassName:z,d3Selection:v,d3Zoom:g,panOnScrollMode:q,panOnScrollSpeed:Y,zoomOnPinch:D,onPanZoomStart:c,onPanZoom:l,onPanZoomEnd:f}):xT({noWheelClassName:z,preventScrolling:Q,d3ZoomHandler:b});if(v.on("wheel.zoom",xe,{passive:!1}),!M){const ve=vT({zoomPanValues:p,onDraggingChange:h,onPanZoomStart:c});g.on("start",ve);const Ee=bT({zoomPanValues:p,panOnDrag:O,onPaneContextMenu:!!Z,onPanZoom:l,onTransformChange:te});g.on("zoom",Ee);const De=wT({zoomPanValues:p,panOnDrag:O,panOnScroll:P,onPaneContextMenu:Z,onPanZoomEnd:f,onDraggingChange:h});g.on("end",De)}const je=ST({zoomActivationKeyPressed:L,panOnDrag:O,zoomOnScroll:B,panOnScroll:P,zoomOnDoubleClick:F,zoomOnPinch:D,userSelectionActive:M,noPanClassName:U,noWheelClassName:z,lib:ie,connectionInProgress:re});g.filter(je),F?v.on("dblclick.zoom",w):v.on("dblclick.zoom",null)}function S(){g.on("zoom",null)}async function k(z,U,Z){const M=Hf(z),P=g?.constrain()(M,U,Z);return P&&await N(P),new Promise(O=>O(P))}async function j(z,U){const Z=Hf(z);return await N(Z,U),new Promise(M=>M(Z))}function _(z){if(v){const U=Hf(z),Z=v.property("__zoom");(Z.k!==z.zoom||Z.x!==z.x||Z.y!==z.y)&&g?.transform(v,U,null,{sync:!0})}}function $(){const z=v?u0(v.node()):{x:0,y:0,k:1};return{x:z.x,y:z.y,zoom:z.k}}function A(z,U){return v?new Promise(Z=>{g?.interpolate(U?.interpolate==="linear"?as:Ec).scaleTo($f(v,U?.duration,U?.ease,()=>Z(!0)),z)}):Promise.resolve(!1)}function H(z,U){return v?new Promise(Z=>{g?.interpolate(U?.interpolate==="linear"?as:Ec).scaleBy($f(v,U?.duration,U?.ease,()=>Z(!0)),z)}):Promise.resolve(!1)}function V(z){g?.scaleExtent(z)}function G(z){g?.translateExtent(z)}function I(z){const U=!_n(z)||z<0?0:z;g?.clickDistance(U)}return{update:C,destroy:S,setViewport:j,setViewportConstrained:k,getViewport:$,scaleTo:A,scaleBy:H,setScaleExtent:V,setTranslateExtent:G,syncViewport:_,setClickDistance:I}}var Yo;(function(e){e.Line="line",e.Handle="handle"})(Yo||(Yo={}));function ET({width:e,prevWidth:t,height:i,prevHeight:o,affectsX:s,affectsY:l}){const c=e-t,f=i-o,h=[c>0?1:c<0?-1:0,f>0?1:f<0?-1:0];return c&&s&&(h[0]=h[0]*-1),f&&l&&(h[1]=h[1]*-1),h}function Jx(e){const t=e.includes("right")||e.includes("left"),i=e.includes("bottom")||e.includes("top"),o=e.includes("left"),s=e.includes("top");return{isHorizontal:t,isVertical:i,affectsX:o,affectsY:s}}function Ki(e,t){return Math.max(0,t-e)}function er(e,t){return Math.max(0,e-t)}function fc(e,t,i){return Math.max(0,t-e,e-i)}function Kx(e,t){return e?!t:t}function jT(e,t,i,o,s,l,c,f){let{affectsX:h,affectsY:p}=t;const{isHorizontal:m,isVertical:g}=t,v=m&&g,{xSnapped:b,ySnapped:w}=i,{minWidth:N,maxWidth:C,minHeight:S,maxHeight:k}=o,{x:j,y:_,width:$,height:A,aspectRatio:H}=e;let V=Math.floor(m?b-e.pointerX:0),G=Math.floor(g?w-e.pointerY:0);const I=$+(h?-V:V),z=A+(p?-G:G),U=-l[0]*$,Z=-l[1]*A;let M=fc(I,N,C),P=fc(z,S,k);if(c){let Y=0,Q=0;h&&V<0?Y=Ki(j+V+U,c[0][0]):!h&&V>0&&(Y=er(j+I+U,c[1][0])),p&&G<0?Q=Ki(_+G+Z,c[0][1]):!p&&G>0&&(Q=er(_+z+Z,c[1][1])),M=Math.max(M,Y),P=Math.max(P,Q)}if(f){let Y=0,Q=0;h&&V>0?Y=er(j+V,f[0][0]):!h&&V<0&&(Y=Ki(j+I,f[1][0])),p&&G>0?Q=er(_+G,f[0][1]):!p&&G<0&&(Q=Ki(_+z,f[1][1])),M=Math.max(M,Y),P=Math.max(P,Q)}if(s){if(m){const Y=fc(I/H,S,k)*H;if(M=Math.max(M,Y),c){let Q=0;!h&&!p||h&&!p&&v?Q=er(_+Z+I/H,c[1][1])*H:Q=Ki(_+Z+(h?V:-V)/H,c[0][1])*H,M=Math.max(M,Q)}if(f){let Q=0;!h&&!p||h&&!p&&v?Q=Ki(_+I/H,f[1][1])*H:Q=er(_+(h?V:-V)/H,f[0][1])*H,M=Math.max(M,Q)}}if(g){const Y=fc(z*H,N,C)/H;if(P=Math.max(P,Y),c){let Q=0;!h&&!p||p&&!h&&v?Q=er(j+z*H+U,c[1][0])/H:Q=Ki(j+(p?G:-G)*H+U,c[0][0])/H,P=Math.max(P,Q)}if(f){let Q=0;!h&&!p||p&&!h&&v?Q=Ki(j+z*H,f[1][0])/H:Q=er(j+(p?G:-G)*H,f[0][0])/H,P=Math.max(P,Q)}}}G=G+(G<0?P:-P),V=V+(V<0?M:-M),s&&(v?I>z*H?G=(Kx(h,p)?-V:V)/H:V=(Kx(h,p)?-G:G)*H:m?(G=V/H,p=h):(V=G*H,h=p));const O=h?j+V:j,q=p?_+G:_;return{width:$+(h?-V:V),height:A+(p?-G:G),x:l[0]*V*(h?-1:1)+O,y:l[1]*G*(p?-1:1)+q}}const P0={width:0,height:0,x:0,y:0},CT={...P0,pointerX:0,pointerY:0,aspectRatio:1};function kT(e){return[[0,0],[e.measured.width,e.measured.height]]}function TT(e,t,i){const o=t.position.x+e.position.x,s=t.position.y+e.position.y,l=e.measured.width??0,c=e.measured.height??0,f=i[0]*l,h=i[1]*c;return[[o-f,s-h],[o+l-f,s+c-h]]}function AT({domNode:e,nodeId:t,getStoreItems:i,onChange:o,onEnd:s}){const l=dn(e);let c={controlDirection:Jx("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function f({controlPosition:p,boundaries:m,keepAspectRatio:g,resizeDirection:v,onResizeStart:b,onResize:w,onResizeEnd:N,shouldResize:C}){let S={...P0},k={...CT};c={boundaries:m,resizeDirection:v,keepAspectRatio:g,controlDirection:Jx(p)};let j,_=null,$=[],A,H,V,G=!1;const I=Wb().on("start",z=>{const{nodeLookup:U,transform:Z,snapGrid:M,snapToGrid:P,nodeOrigin:O,paneDomNode:q}=i();if(j=U.get(t),!j)return;_=q?.getBoundingClientRect()??null;const{xSnapped:Y,ySnapped:Q}=ss(z.sourceEvent,{transform:Z,snapGrid:M,snapToGrid:P,containerBounds:_});S={width:j.measured.width??0,height:j.measured.height??0,x:j.position.x??0,y:j.position.y??0},k={...S,pointerX:Y,pointerY:Q,aspectRatio:S.width/S.height},A=void 0,j.parentId&&(j.extent==="parent"||j.expandParent)&&(A=U.get(j.parentId),H=A&&j.extent==="parent"?kT(A):void 0),$=[],V=void 0;for(const[D,B]of U)if(B.parentId===t&&($.push({id:D,position:{...B.position},extent:B.extent}),B.extent==="parent"||B.expandParent)){const F=TT(B,j,B.origin??O);V?V=[[Math.min(F[0][0],V[0][0]),Math.min(F[0][1],V[0][1])],[Math.max(F[1][0],V[1][0]),Math.max(F[1][1],V[1][1])]]:V=F}b?.(z,{...S})}).on("drag",z=>{const{transform:U,snapGrid:Z,snapToGrid:M,nodeOrigin:P}=i(),O=ss(z.sourceEvent,{transform:U,snapGrid:Z,snapToGrid:M,containerBounds:_}),q=[];if(!j)return;const{x:Y,y:Q,width:D,height:B}=S,F={},L=j.origin??P,{width:ie,height:te,x:re,y:de}=jT(k,c.controlDirection,O,c.boundaries,c.keepAspectRatio,L,H,V),ae=ie!==D,fe=te!==B,xe=re!==Y&&ae,je=de!==Q&&fe;if(!xe&&!je&&!ae&&!fe)return;if((xe||je||L[0]===1||L[1]===1)&&(F.x=xe?re:S.x,F.y=je?de:S.y,S.x=F.x,S.y=F.y,$.length>0)){const qe=re-Y,Ue=de-Q;for(const ft of $)ft.position={x:ft.position.x-qe+L[0]*(ie-D),y:ft.position.y-Ue+L[1]*(te-B)},q.push(ft)}if((ae||fe)&&(F.width=ae&&(!c.resizeDirection||c.resizeDirection==="horizontal")?ie:S.width,F.height=fe&&(!c.resizeDirection||c.resizeDirection==="vertical")?te:S.height,S.width=F.width,S.height=F.height),A&&j.expandParent){const qe=L[0]*(F.width??0);F.x&&F.x<qe&&(S.x=qe,k.x=k.x-(F.x-qe));const Ue=L[1]*(F.height??0);F.y&&F.y<Ue&&(S.y=Ue,k.y=k.y-(F.y-Ue))}const ve=ET({width:S.width,prevWidth:D,height:S.height,prevHeight:B,affectsX:c.controlDirection.affectsX,affectsY:c.controlDirection.affectsY}),Ee={...S,direction:ve};C?.(z,Ee)!==!1&&(G=!0,w?.(z,Ee),o(F,q))}).on("end",z=>{G&&(N?.(z,{...S}),s?.({...S}),G=!1)});l.call(I)}function h(){l.on(".drag",null)}return{update:f,destroy:h}}var Pf={exports:{}},qf={},Uf={exports:{}},Vf={};var ev;function MT(){if(ev)return Vf;ev=1;var e=js();function t(g,v){return g===v&&(g!==0||1/g===1/v)||g!==g&&v!==v}var i=typeof Object.is=="function"?Object.is:t,o=e.useState,s=e.useEffect,l=e.useLayoutEffect,c=e.useDebugValue;function f(g,v){var b=v(),w=o({inst:{value:b,getSnapshot:v}}),N=w[0].inst,C=w[1];return l(function(){N.value=b,N.getSnapshot=v,h(N)&&C({inst:N})},[g,b,v]),s(function(){return h(N)&&C({inst:N}),g(function(){h(N)&&C({inst:N})})},[g]),c(b),b}function h(g){var v=g.getSnapshot;g=g.value;try{var b=v();return!i(g,b)}catch{return!0}}function p(g,v){return v()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:f;return Vf.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:m,Vf}var tv;function DT(){return tv||(tv=1,Uf.exports=MT()),Uf.exports}var nv;function _T(){if(nv)return qf;nv=1;var e=js(),t=DT();function i(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var o=typeof Object.is=="function"?Object.is:i,s=t.useSyncExternalStore,l=e.useRef,c=e.useEffect,f=e.useMemo,h=e.useDebugValue;return qf.useSyncExternalStoreWithSelector=function(p,m,g,v,b){var w=l(null);if(w.current===null){var N={hasValue:!1,value:null};w.current=N}else N=w.current;w=f(function(){function S(A){if(!k){if(k=!0,j=A,A=v(A),b!==void 0&&N.hasValue){var H=N.value;if(b(H,A))return _=H}return _=A}if(H=_,o(j,A))return H;var V=v(A);return b!==void 0&&b(H,V)?(j=A,H):(j=A,_=V)}var k=!1,j,_,$=g===void 0?null:g;return[function(){return S(m())},$===null?void 0:function(){return S($())}]},[m,g,v,b]);var C=s(p,w[0],w[1]);return c(function(){N.hasValue=!0,N.value=C},[C]),h(C),C},qf}var iv;function OT(){return iv||(iv=1,Pf.exports=_T()),Pf.exports}var RT=OT();const LT=Xc(RT),zT={},rv=e=>{let t;const i=new Set,o=(m,g)=>{const v=typeof m=="function"?m(t):m;if(!Object.is(v,t)){const b=t;t=g??(typeof v!="object"||v===null)?v:Object.assign({},t,v),i.forEach(w=>w(t,b))}},s=()=>t,h={setState:o,getState:s,getInitialState:()=>p,subscribe:m=>(i.add(m),()=>i.delete(m)),destroy:()=>{(zT?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),i.clear()}},p=t=e(o,s,h);return h},IT=e=>e?rv(e):rv,{useDebugValue:BT}=Dn,{useSyncExternalStoreWithSelector:HT}=LT,$T=e=>e;function q0(e,t=$T,i){const o=HT(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,i);return BT(o),o}const ov=(e,t)=>{const i=IT(e),o=(s,l=t)=>q0(i,s,l);return Object.assign(o,i),o},PT=(e,t)=>e?ov(e,t):ov;function at(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[o,s]of e)if(!Object.is(s,t.get(o)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e)if(!t.has(o))return!1;return!0}const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!1;for(const o of i)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return!1;return!0}var Th=Lb();const iu=T.createContext(null),qT=iu.Provider,U0=Gn.error001();function Be(e,t){const i=T.useContext(iu);if(i===null)throw new Error(U0);return q0(i,e,t)}function st(){const e=T.useContext(iu);if(e===null)throw new Error(U0);return T.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const av={display:"none"},UT={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},V0="react-flow__node-desc",F0="react-flow__edge-desc",VT="react-flow__aria-live",FT=e=>e.ariaLiveMessage,GT=e=>e.ariaLabelConfig;function YT({rfId:e}){const t=Be(FT);return u.jsx("div",{id:`${VT}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:UT,children:t})}function XT({rfId:e,disableKeyboardA11y:t}){const i=Be(GT);return u.jsxs(u.Fragment,{children:[u.jsx("div",{id:`${V0}-${e}`,style:av,children:t?i["node.a11yDescription.default"]:i["node.a11yDescription.keyboardDisabled"]}),u.jsx("div",{id:`${F0}-${e}`,style:av,children:i["edge.a11yDescription.default"]}),!t&&u.jsx(YT,{rfId:e})]})}const ru=T.forwardRef(({position:e="top-left",children:t,className:i,style:o,...s},l)=>{const c=`${e}`.split("-");return u.jsx("div",{className:St(["react-flow__panel",i,...c]),style:o,ref:l,...s,children:t})});ru.displayName="Panel";function QT({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:u.jsx(ru,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:u.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const WT=e=>{const t=[],i=[];for(const[,o]of e.nodeLookup)o.selected&&t.push(o.internals.userNode);for(const[,o]of e.edgeLookup)o.selected&&i.push(o);return{selectedNodes:t,selectedEdges:i}},hc=e=>e.id;function ZT(e,t){return at(e.selectedNodes.map(hc),t.selectedNodes.map(hc))&&at(e.selectedEdges.map(hc),t.selectedEdges.map(hc))}function JT({onSelectionChange:e}){const t=st(),{selectedNodes:i,selectedEdges:o}=Be(WT,ZT);return T.useEffect(()=>{const s={nodes:i,edges:o};e?.(s),t.getState().onSelectionChangeHandlers.forEach(l=>l(s))},[i,o,e]),null}const KT=e=>!!e.onSelectionChangeHandlers;function eA({onSelectionChange:e}){const t=Be(KT);return e||t?u.jsx(JT,{onSelectionChange:e}):null}const G0=[0,0],tA={x:0,y:0,zoom:1},nA=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],sv=[...nA,"rfId"],iA=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),lv={translateExtent:ys,nodeOrigin:G0,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function rA(e){const{setNodes:t,setEdges:i,setMinZoom:o,setMaxZoom:s,setTranslateExtent:l,setNodeExtent:c,reset:f,setDefaultNodesAndEdges:h}=Be(iA,at),p=st();T.useEffect(()=>(h(e.defaultNodes,e.defaultEdges),()=>{m.current=lv,f()}),[]);const m=T.useRef(lv);return T.useEffect(()=>{for(const g of sv){const v=e[g],b=m.current[g];v!==b&&(typeof e[g]>"u"||(g==="nodes"?t(v):g==="edges"?i(v):g==="minZoom"?o(v):g==="maxZoom"?s(v):g==="translateExtent"?l(v):g==="nodeExtent"?c(v):g==="ariaLabelConfig"?p.setState({ariaLabelConfig:qk(v)}):g==="fitView"?p.setState({fitViewQueued:v}):g==="fitViewOptions"?p.setState({fitViewOptions:v}):p.setState({[g]:v})))}m.current=e},sv.map(g=>e[g])),null}function cv(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function oA(e){const[t,i]=T.useState(e==="system"?null:e);return T.useEffect(()=>{if(e!=="system"){i(e);return}const o=cv(),s=()=>i(o?.matches?"dark":"light");return s(),o?.addEventListener("change",s),()=>{o?.removeEventListener("change",s)}},[e]),t!==null?t:cv()?.matches?"dark":"light"}const uv=typeof document<"u"?document:null;function ws(e=null,t={target:uv,actInsideInputWithModifier:!0}){const[i,o]=T.useState(!1),s=T.useRef(!1),l=T.useRef(new Set([])),[c,f]=T.useMemo(()=>{if(e!==null){const p=(Array.isArray(e)?e:[e]).filter(g=>typeof g=="string").map(g=>g.replace("+",`
`).replace(`

`,`
+`).split(`
`)),m=p.reduce((g,v)=>g.concat(...v),[]);return[p,m]}return[[],[]]},[e]);return T.useEffect(()=>{const h=t?.target??uv,p=t?.actInsideInputWithModifier??!0;if(e!==null){const m=b=>{if(s.current=b.ctrlKey||b.metaKey||b.shiftKey||b.altKey,(!s.current||s.current&&!p)&&E0(b))return!1;const N=fv(b.code,f);if(l.current.add(b[N]),dv(c,l.current,!1)){const C=b.composedPath?.()?.[0]||b.target,S=C?.nodeName==="BUTTON"||C?.nodeName==="A";t.preventDefault!==!1&&(s.current||!S)&&b.preventDefault(),o(!0)}},g=b=>{const w=fv(b.code,f);dv(c,l.current,!0)?(o(!1),l.current.clear()):l.current.delete(b[w]),b.key==="Meta"&&l.current.clear(),s.current=!1},v=()=>{l.current.clear(),o(!1)};return h?.addEventListener("keydown",m),h?.addEventListener("keyup",g),window.addEventListener("blur",v),window.addEventListener("contextmenu",v),()=>{h?.removeEventListener("keydown",m),h?.removeEventListener("keyup",g),window.removeEventListener("blur",v),window.removeEventListener("contextmenu",v)}}},[e,o]),i}function dv(e,t,i){return e.filter(o=>i||o.length===t.size).some(o=>o.every(s=>t.has(s)))}function fv(e,t){return t.includes(e)?"code":"key"}const aA=()=>{const e=st();return T.useMemo(()=>({zoomIn:t=>{const{panZoom:i}=e.getState();return i?i.scaleBy(1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:i}=e.getState();return i?i.scaleBy(1/1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomTo:(t,i)=>{const{panZoom:o}=e.getState();return o?o.scaleTo(t,{duration:i?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,i)=>{const{transform:[o,s,l],panZoom:c}=e.getState();return c?(await c.setViewport({x:t.x??o,y:t.y??s,zoom:t.zoom??l},i),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,i,o]=e.getState().transform;return{x:t,y:i,zoom:o}},setCenter:async(t,i,o)=>e.getState().setCenter(t,i,o),fitBounds:async(t,i)=>{const{width:o,height:s,minZoom:l,maxZoom:c,panZoom:f}=e.getState(),h=ip(t,o,s,l,c,i?.padding??.1);return f?(await f.setViewport(h,{duration:i?.duration,ease:i?.ease,interpolate:i?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,i={})=>{const{transform:o,snapGrid:s,snapToGrid:l,domNode:c}=e.getState();if(!c)return t;const{x:f,y:h}=c.getBoundingClientRect(),p={x:t.x-f,y:t.y-h},m=i.snapGrid??s,g=i.snapToGrid??l;return Ds(p,o,g,m)},flowToScreenPosition:t=>{const{transform:i,domNode:o}=e.getState();if(!o)return t;const{x:s,y:l}=o.getBoundingClientRect(),c=Bc(t,i);return{x:c.x+s,y:c.y+l}}}),[])};function Y0(e,t){const i=[],o=new Map,s=[];for(const l of e)if(l.type==="add"){s.push(l);continue}else if(l.type==="remove"||l.type==="replace")o.set(l.id,[l]);else{const c=o.get(l.id);c?c.push(l):o.set(l.id,[l])}for(const l of t){const c=o.get(l.id);if(!c){i.push(l);continue}if(c[0].type==="remove")continue;if(c[0].type==="replace"){i.push({...c[0].item});continue}const f={...l};for(const h of c)sA(h,f);i.push(f)}return s.length&&s.forEach(l=>{l.index!==void 0?i.splice(l.index,0,{...l.item}):i.push({...l.item})}),i}function sA(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured={...e.dimensions},e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function X0(e,t){return Y0(e,t)}function Q0(e,t){return Y0(e,t)}function Dr(e,t){return{id:e,type:"select",selected:t}}function zo(e,t=new Set,i=!1){const o=[];for(const[s,l]of e){const c=t.has(s);!(l.selected===void 0&&!c)&&l.selected!==c&&(i&&(l.selected=c),o.push(Dr(l.id,c)))}return o}function hv({items:e=[],lookup:t}){const i=[],o=new Map(e.map(s=>[s.id,s]));for(const[s,l]of e.entries()){const c=t.get(l.id),f=c?.internals?.userNode??c;f!==void 0&&f!==l&&i.push({id:l.id,item:l,type:"replace"}),f===void 0&&i.push({item:l,type:"add",index:s})}for(const[s]of t)o.get(s)===void 0&&i.push({id:s,type:"remove"});return i}function pv(e){return{id:e.id,type:"remove"}}const mv=e=>_k(e),lA=e=>g0(e);function W0(e){return T.forwardRef(e)}const cA=typeof window<"u"?T.useLayoutEffect:T.useEffect;function gv(e){const[t,i]=T.useState(BigInt(0)),[o]=T.useState(()=>uA(()=>i(s=>s+BigInt(1))));return cA(()=>{const s=o.get();s.length&&(e(s),o.reset())},[t]),o}function uA(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:i=>{t.push(i),e()}}}const Z0=T.createContext(null);function dA({children:e}){const t=st(),i=T.useCallback(f=>{const{nodes:h=[],setNodes:p,hasDefaultNodes:m,onNodesChange:g,nodeLookup:v,fitViewQueued:b,onNodesChangeMiddlewareMap:w}=t.getState();let N=h;for(const S of f)N=typeof S=="function"?S(N):S;let C=hv({items:N,lookup:v});for(const S of w.values())C=S(C);m&&p(N),C.length>0?g?.(C):b&&window.requestAnimationFrame(()=>{const{fitViewQueued:S,nodes:k,setNodes:j}=t.getState();S&&j(k)})},[]),o=gv(i),s=T.useCallback(f=>{const{edges:h=[],setEdges:p,hasDefaultEdges:m,onEdgesChange:g,edgeLookup:v}=t.getState();let b=h;for(const w of f)b=typeof w=="function"?w(b):w;m?p(b):g&&g(hv({items:b,lookup:v}))},[]),l=gv(s),c=T.useMemo(()=>({nodeQueue:o,edgeQueue:l}),[]);return u.jsx(Z0.Provider,{value:c,children:e})}function fA(){const e=T.useContext(Z0);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const hA=e=>!!e.panZoom;function ou(){const e=aA(),t=st(),i=fA(),o=Be(hA),s=T.useMemo(()=>{const l=g=>t.getState().nodeLookup.get(g),c=g=>{i.nodeQueue.push(g)},f=g=>{i.edgeQueue.push(g)},h=g=>{const{nodeLookup:v,nodeOrigin:b}=t.getState(),w=mv(g)?g:v.get(g.id),N=w.parentId?S0(w.position,w.measured,w.parentId,v,b):w.position,C={...w,position:N,width:w.measured?.width??w.width,height:w.measured?.height??w.height};return Fo(C)},p=(g,v,b={replace:!1})=>{c(w=>w.map(N=>{if(N.id===g){const C=typeof v=="function"?v(N):v;return b.replace&&mv(C)?C:{...N,...C}}return N}))},m=(g,v,b={replace:!1})=>{f(w=>w.map(N=>{if(N.id===g){const C=typeof v=="function"?v(N):v;return b.replace&&lA(C)?C:{...N,...C}}return N}))};return{getNodes:()=>t.getState().nodes.map(g=>({...g})),getNode:g=>l(g)?.internals.userNode,getInternalNode:l,getEdges:()=>{const{edges:g=[]}=t.getState();return g.map(v=>({...v}))},getEdge:g=>t.getState().edgeLookup.get(g),setNodes:c,setEdges:f,addNodes:g=>{const v=Array.isArray(g)?g:[g];i.nodeQueue.push(b=>[...b,...v])},addEdges:g=>{const v=Array.isArray(g)?g:[g];i.edgeQueue.push(b=>[...b,...v])},toObject:()=>{const{nodes:g=[],edges:v=[],transform:b}=t.getState(),[w,N,C]=b;return{nodes:g.map(S=>({...S})),edges:v.map(S=>({...S})),viewport:{x:w,y:N,zoom:C}}},deleteElements:async({nodes:g=[],edges:v=[]})=>{const{nodes:b,edges:w,onNodesDelete:N,onEdgesDelete:C,triggerNodeChanges:S,triggerEdgeChanges:k,onDelete:j,onBeforeDelete:_}=t.getState(),{nodes:$,edges:A}=await Ik({nodesToRemove:g,edgesToRemove:v,nodes:b,edges:w,onBeforeDelete:_}),H=A.length>0,V=$.length>0;if(H){const G=A.map(pv);C?.(A),k(G)}if(V){const G=$.map(pv);N?.($),S(G)}return(V||H)&&j?.({nodes:$,edges:A}),{deletedNodes:$,deletedEdges:A}},getIntersectingNodes:(g,v=!0,b)=>{const w=Px(g),N=w?g:h(g),C=b!==void 0;return N?(b||t.getState().nodes).filter(S=>{const k=t.getState().nodeLookup.get(S.id);if(k&&!w&&(S.id===g.id||!k.internals.positionAbsolute))return!1;const j=Fo(C?S:k),_=vs(j,N);return v&&_>0||_>=j.width*j.height||_>=N.width*N.height}):[]},isNodeIntersecting:(g,v,b=!0)=>{const N=Px(g)?g:h(g);if(!N)return!1;const C=vs(N,v);return b&&C>0||C>=v.width*v.height||C>=N.width*N.height},updateNode:p,updateNodeData:(g,v,b={replace:!1})=>{p(g,w=>{const N=typeof v=="function"?v(w):v;return b.replace?{...w,data:N}:{...w,data:{...w.data,...N}}},b)},updateEdge:m,updateEdgeData:(g,v,b={replace:!1})=>{m(g,w=>{const N=typeof v=="function"?v(w):v;return b.replace?{...w,data:N}:{...w,data:{...w.data,...N}}},b)},getNodesBounds:g=>{const{nodeLookup:v,nodeOrigin:b}=t.getState();return Ok(g,{nodeLookup:v,nodeOrigin:b})},getHandleConnections:({type:g,id:v,nodeId:b})=>Array.from(t.getState().connectionLookup.get(`${b}-${g}${v?`-${v}`:""}`)?.values()??[]),getNodeConnections:({type:g,handleId:v,nodeId:b})=>Array.from(t.getState().connectionLookup.get(`${b}${g?v?`-${g}-${v}`:`-${g}`:""}`)?.values()??[]),fitView:async g=>{const v=t.getState().fitViewResolver??Pk();return t.setState({fitViewQueued:!0,fitViewOptions:g,fitViewResolver:v}),i.nodeQueue.push(b=>[...b]),v.promise}}},[]);return T.useMemo(()=>({...s,...e,viewportInitialized:o}),[o])}const yv=e=>e.selected,pA=typeof window<"u"?window:void 0;function mA({deleteKeyCode:e,multiSelectionKeyCode:t}){const i=st(),{deleteElements:o}=ou(),s=ws(e,{actInsideInputWithModifier:!1}),l=ws(t,{target:pA});T.useEffect(()=>{if(s){const{edges:c,nodes:f}=i.getState();o({nodes:f.filter(yv),edges:c.filter(yv)}),i.setState({nodesSelectionActive:!1})}},[s]),T.useEffect(()=>{i.setState({multiSelectionActive:l})},[l])}function gA(e){const t=st();T.useEffect(()=>{const i=()=>{if(!e.current||!(e.current.checkVisibility?.()??!0))return!1;const o=rp(e.current);(o.height===0||o.width===0)&&t.getState().onError?.("004",Gn.error004()),t.setState({width:o.width||500,height:o.height||500})};if(e.current){i(),window.addEventListener("resize",i);const o=new ResizeObserver(()=>i());return o.observe(e.current),()=>{window.removeEventListener("resize",i),o&&e.current&&o.unobserve(e.current)}}},[])}const au={position:"absolute",width:"100%",height:"100%",top:0,left:0},yA=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function xA({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:i=!0,panOnScroll:o=!1,panOnScrollSpeed:s=.5,panOnScrollMode:l=Rr.Free,zoomOnDoubleClick:c=!0,panOnDrag:f=!0,defaultViewport:h,translateExtent:p,minZoom:m,maxZoom:g,zoomActivationKeyCode:v,preventScrolling:b=!0,children:w,noWheelClassName:N,noPanClassName:C,onViewportChange:S,isControlledViewport:k,paneClickDistance:j,selectionOnDrag:_}){const $=st(),A=T.useRef(null),{userSelectionActive:H,lib:V,connectionInProgress:G}=Be(yA,at),I=ws(v),z=T.useRef();gA(A);const U=T.useCallback(Z=>{S?.({x:Z[0],y:Z[1],zoom:Z[2]}),k||$.setState({transform:Z})},[S,k]);return T.useEffect(()=>{if(A.current){z.current=NT({domNode:A.current,minZoom:m,maxZoom:g,translateExtent:p,viewport:h,onDraggingChange:O=>$.setState({paneDragging:O}),onPanZoomStart:(O,q)=>{const{onViewportChangeStart:Y,onMoveStart:Q}=$.getState();Q?.(O,q),Y?.(q)},onPanZoom:(O,q)=>{const{onViewportChange:Y,onMove:Q}=$.getState();Q?.(O,q),Y?.(q)},onPanZoomEnd:(O,q)=>{const{onViewportChangeEnd:Y,onMoveEnd:Q}=$.getState();Q?.(O,q),Y?.(q)}});const{x:Z,y:M,zoom:P}=z.current.getViewport();return $.setState({panZoom:z.current,transform:[Z,M,P],domNode:A.current.closest(".react-flow")}),()=>{z.current?.destroy()}}},[]),T.useEffect(()=>{z.current?.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:i,panOnScroll:o,panOnScrollSpeed:s,panOnScrollMode:l,zoomOnDoubleClick:c,panOnDrag:f,zoomActivationKeyPressed:I,preventScrolling:b,noPanClassName:C,userSelectionActive:H,noWheelClassName:N,lib:V,onTransformChange:U,connectionInProgress:G,selectionOnDrag:_,paneClickDistance:j})},[e,t,i,o,s,l,c,f,I,b,C,H,N,V,U,G,_,j]),u.jsx("div",{className:"react-flow__renderer",ref:A,style:au,children:w})}const vA=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function bA(){const{userSelectionActive:e,userSelectionRect:t}=Be(vA,at);return e&&t?u.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const Ff=(e,t)=>i=>{i.target===t.current&&e?.(i)},wA=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function SA({isSelecting:e,selectionKeyPressed:t,selectionMode:i=xs.Full,panOnDrag:o,paneClickDistance:s,selectionOnDrag:l,onSelectionStart:c,onSelectionEnd:f,onPaneClick:h,onPaneContextMenu:p,onPaneScroll:m,onPaneMouseEnter:g,onPaneMouseMove:v,onPaneMouseLeave:b,children:w}){const N=st(),{userSelectionActive:C,elementsSelectable:S,dragging:k,connectionInProgress:j}=Be(wA,at),_=S&&(e||C),$=T.useRef(null),A=T.useRef(),H=T.useRef(new Set),V=T.useRef(new Set),G=T.useRef(!1),I=Y=>{if(G.current||j){G.current=!1;return}h?.(Y),N.getState().resetSelectedElements(),N.setState({nodesSelectionActive:!1})},z=Y=>{if(Array.isArray(o)&&o?.includes(2)){Y.preventDefault();return}p?.(Y)},U=m?Y=>m(Y):void 0,Z=Y=>{G.current&&(Y.stopPropagation(),G.current=!1)},M=Y=>{const{domNode:Q}=N.getState();if(A.current=Q?.getBoundingClientRect(),!A.current)return;const D=Y.target===$.current;if(!D&&!!Y.target.closest(".nokey")||!e||!(l&&D||t)||Y.button!==0||!Y.isPrimary)return;Y.target?.setPointerCapture?.(Y.pointerId),G.current=!1;const{x:L,y:ie}=On(Y.nativeEvent,A.current);N.setState({userSelectionRect:{width:0,height:0,startX:L,startY:ie,x:L,y:ie}}),D||(Y.stopPropagation(),Y.preventDefault())},P=Y=>{const{userSelectionRect:Q,transform:D,nodeLookup:B,edgeLookup:F,connectionLookup:L,triggerNodeChanges:ie,triggerEdgeChanges:te,defaultEdgeOptions:re,resetSelectedElements:de}=N.getState();if(!A.current||!Q)return;const{x:ae,y:fe}=On(Y.nativeEvent,A.current),{startX:xe,startY:je}=Q;if(!G.current){const Ue=t?0:s;if(Math.hypot(ae-xe,fe-je)<=Ue)return;de(),c?.(Y)}G.current=!0;const ve={startX:xe,startY:je,x:ae<xe?ae:xe,y:fe<je?fe:je,width:Math.abs(ae-xe),height:Math.abs(fe-je)},Ee=H.current,De=V.current;H.current=new Set(np(B,ve,D,i===xs.Partial,!0).map(Ue=>Ue.id)),V.current=new Set;const qe=re?.selectable??!0;for(const Ue of H.current){const ft=L.get(Ue);if(ft)for(const{edgeId:Kt}of ft.values()){const _t=F.get(Kt);_t&&(_t.selectable??qe)&&V.current.add(Kt)}}if(!qx(Ee,H.current)){const Ue=zo(B,H.current,!0);ie(Ue)}if(!qx(De,V.current)){const Ue=zo(F,V.current);te(Ue)}N.setState({userSelectionRect:ve,userSelectionActive:!0,nodesSelectionActive:!1})},O=Y=>{Y.button===0&&(Y.target?.releasePointerCapture?.(Y.pointerId),!C&&Y.target===$.current&&N.getState().userSelectionRect&&I?.(Y),N.setState({userSelectionActive:!1,userSelectionRect:null}),G.current&&(f?.(Y),N.setState({nodesSelectionActive:H.current.size>0})))},q=o===!0||Array.isArray(o)&&o.includes(0);return u.jsxs("div",{className:St(["react-flow__pane",{draggable:q,dragging:k,selection:e}]),onClick:_?void 0:Ff(I,$),onContextMenu:Ff(z,$),onWheel:Ff(U,$),onPointerEnter:_?void 0:g,onPointerMove:_?P:v,onPointerUp:_?O:void 0,onPointerDownCapture:_?M:void 0,onClickCapture:_?Z:void 0,onPointerLeave:b,ref:$,style:au,children:[w,u.jsx(bA,{})]})}function Ah({id:e,store:t,unselect:i=!1,nodeRef:o}){const{addSelectedNodes:s,unselectNodesAndEdges:l,multiSelectionActive:c,nodeLookup:f,onError:h}=t.getState(),p=f.get(e);if(!p){h?.("012",Gn.error012(e));return}t.setState({nodesSelectionActive:!1}),p.selected?(i||p.selected&&c)&&(l({nodes:[p],edges:[]}),requestAnimationFrame(()=>o?.current?.blur())):s([e])}function J0({nodeRef:e,disabled:t=!1,noDragClassName:i,handleSelector:o,nodeId:s,isSelectable:l,nodeClickDistance:c}){const f=st(),[h,p]=T.useState(!1),m=T.useRef();return T.useEffect(()=>{m.current=cT({getStoreItems:()=>f.getState(),onNodeMouseDown:g=>{Ah({id:g,store:f,nodeRef:e})},onDragStart:()=>{p(!0)},onDragStop:()=>{p(!1)}})},[]),T.useEffect(()=>{if(t)m.current?.destroy();else if(e.current)return m.current?.update({noDragClassName:i,handleSelector:o,domNode:e.current,isSelectable:l,nodeId:s,nodeClickDistance:c}),()=>{m.current?.destroy()}},[i,o,t,l,e,s]),h}const NA=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function K0(){const e=st();return T.useCallback(i=>{const{nodeExtent:o,snapToGrid:s,snapGrid:l,nodesDraggable:c,onError:f,updateNodePositions:h,nodeLookup:p,nodeOrigin:m}=e.getState(),g=new Map,v=NA(c),b=s?l[0]:5,w=s?l[1]:5,N=i.direction.x*b*i.factor,C=i.direction.y*w*i.factor;for(const[,S]of p){if(!v(S))continue;let k={x:S.internals.positionAbsolute.x+N,y:S.internals.positionAbsolute.y+C};s&&(k=Ms(k,l));const{position:j,positionAbsolute:_}=y0({nodeId:S.id,nextPosition:k,nodeLookup:p,nodeExtent:o,nodeOrigin:m,onError:f});S.position=j,S.internals.positionAbsolute=_,g.set(S.id,S)}h(g)},[])}const up=T.createContext(null),EA=up.Provider;up.Consumer;const Pr=()=>T.useContext(up),jA=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),CA=(e,t,i)=>o=>{const{connectionClickStartHandle:s,connectionMode:l,connection:c}=o,{fromHandle:f,toHandle:h,isValid:p}=c,m=h?.nodeId===e&&h?.id===t&&h?.type===i;return{connectingFrom:f?.nodeId===e&&f?.id===t&&f?.type===i,connectingTo:m,clickConnecting:s?.nodeId===e&&s?.id===t&&s?.type===i,isPossibleEndHandle:l===Uo.Strict?f?.type!==i:e!==f?.nodeId||t!==f?.id,connectionInProcess:!!f,clickConnectionInProcess:!!s,valid:m&&p}};function kA({type:e="source",position:t=ge.Top,isValidConnection:i,isConnectable:o=!0,isConnectableStart:s=!0,isConnectableEnd:l=!0,id:c,onConnect:f,children:h,className:p,onMouseDown:m,onTouchStart:g,...v},b){const w=c||null,N=e==="target",C=st(),S=Pr(),{connectOnClick:k,noPanClassName:j,rfId:_}=Be(jA,at),{connectingFrom:$,connectingTo:A,clickConnecting:H,isPossibleEndHandle:V,connectionInProcess:G,clickConnectionInProcess:I,valid:z}=Be(CA(S,w,e),at);S||C.getState().onError?.("010",Gn.error010());const U=P=>{const{defaultEdgeOptions:O,onConnect:q,hasDefaultEdges:Y}=C.getState(),Q={...O,...P};if(Y){const{edges:D,setEdges:B}=C.getState();B(A0(Q,D))}q?.(Q),f?.(Q)},Z=P=>{if(!S)return;const O=j0(P.nativeEvent);if(s&&(O&&P.button===0||!O)){const q=C.getState();kh.onPointerDown(P.nativeEvent,{handleDomNode:P.currentTarget,autoPanOnConnect:q.autoPanOnConnect,connectionMode:q.connectionMode,connectionRadius:q.connectionRadius,domNode:q.domNode,nodeLookup:q.nodeLookup,lib:q.lib,isTarget:N,handleId:w,nodeId:S,flowId:q.rfId,panBy:q.panBy,cancelConnection:q.cancelConnection,onConnectStart:q.onConnectStart,onConnectEnd:q.onConnectEnd,updateConnection:q.updateConnection,onConnect:U,isValidConnection:i||q.isValidConnection,getTransform:()=>C.getState().transform,getFromHandle:()=>C.getState().connection.fromHandle,autoPanSpeed:q.autoPanSpeed,dragThreshold:q.connectionDragThreshold})}O?m?.(P):g?.(P)},M=P=>{const{onClickConnectStart:O,onClickConnectEnd:q,connectionClickStartHandle:Y,connectionMode:Q,isValidConnection:D,lib:B,rfId:F,nodeLookup:L,connection:ie}=C.getState();if(!S||!Y&&!s)return;if(!Y){O?.(P.nativeEvent,{nodeId:S,handleId:w,handleType:e}),C.setState({connectionClickStartHandle:{nodeId:S,type:e,id:w}});return}const te=N0(P.target),re=i||D,{connection:de,isValid:ae}=kh.isValid(P.nativeEvent,{handle:{nodeId:S,id:w,type:e},connectionMode:Q,fromNodeId:Y.nodeId,fromHandleId:Y.id||null,fromType:Y.type,isValidConnection:re,flowId:F,doc:te,lib:B,nodeLookup:L});ae&&de&&U(de);const fe=structuredClone(ie);delete fe.inProgress,fe.toPosition=fe.toHandle?fe.toHandle.position:null,q?.(P,fe),C.setState({connectionClickStartHandle:null})};return u.jsx("div",{"data-handleid":w,"data-nodeid":S,"data-handlepos":t,"data-id":`${_}-${S}-${w}-${e}`,className:St(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",j,p,{source:!N,target:N,connectable:o,connectablestart:s,connectableend:l,clickconnecting:H,connectingfrom:$,connectingto:A,valid:z,connectionindicator:o&&(!G||V)&&(G||I?l:s)}]),onMouseDown:Z,onTouchStart:Z,onClick:k?M:void 0,ref:b,...v,children:h})}const Ln=T.memo(W0(kA));function TA({data:e,isConnectable:t,sourcePosition:i=ge.Bottom}){return u.jsxs(u.Fragment,{children:[e?.label,u.jsx(Ln,{type:"source",position:i,isConnectable:t})]})}function AA({data:e,isConnectable:t,targetPosition:i=ge.Top,sourcePosition:o=ge.Bottom}){return u.jsxs(u.Fragment,{children:[u.jsx(Ln,{type:"target",position:i,isConnectable:t}),e?.label,u.jsx(Ln,{type:"source",position:o,isConnectable:t})]})}function MA(){return null}function DA({data:e,isConnectable:t,targetPosition:i=ge.Top}){return u.jsxs(u.Fragment,{children:[u.jsx(Ln,{type:"target",position:i,isConnectable:t}),e?.label]})}const $c={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},xv={input:TA,default:AA,output:DA,group:MA};function _A(e){return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}const OA=e=>{const{width:t,height:i,x:o,y:s}=As(e.nodeLookup,{filter:l=>!!l.selected});return{width:_n(t)?t:null,height:_n(i)?i:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${o}px,${s}px)`}};function RA({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:i}){const o=st(),{width:s,height:l,transformString:c,userSelectionActive:f}=Be(OA,at),h=K0(),p=T.useRef(null);if(T.useEffect(()=>{i||p.current?.focus({preventScroll:!0})},[i]),J0({nodeRef:p}),f||!s||!l)return null;const m=e?v=>{const b=o.getState().nodes.filter(w=>w.selected);e(v,b)}:void 0,g=v=>{Object.prototype.hasOwnProperty.call($c,v.key)&&(v.preventDefault(),h({direction:$c[v.key],factor:v.shiftKey?4:1}))};return u.jsx("div",{className:St(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c},children:u.jsx("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:i?void 0:-1,onKeyDown:i?void 0:g,style:{width:s,height:l}})})}const vv=typeof window<"u"?window:void 0,LA=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function ew({children:e,onPaneClick:t,onPaneMouseEnter:i,onPaneMouseMove:o,onPaneMouseLeave:s,onPaneContextMenu:l,onPaneScroll:c,paneClickDistance:f,deleteKeyCode:h,selectionKeyCode:p,selectionOnDrag:m,selectionMode:g,onSelectionStart:v,onSelectionEnd:b,multiSelectionKeyCode:w,panActivationKeyCode:N,zoomActivationKeyCode:C,elementsSelectable:S,zoomOnScroll:k,zoomOnPinch:j,panOnScroll:_,panOnScrollSpeed:$,panOnScrollMode:A,zoomOnDoubleClick:H,panOnDrag:V,defaultViewport:G,translateExtent:I,minZoom:z,maxZoom:U,preventScrolling:Z,onSelectionContextMenu:M,noWheelClassName:P,noPanClassName:O,disableKeyboardA11y:q,onViewportChange:Y,isControlledViewport:Q}){const{nodesSelectionActive:D,userSelectionActive:B}=Be(LA,at),F=ws(p,{target:vv}),L=ws(N,{target:vv}),ie=L||V,te=L||_,re=m&&ie!==!0,de=F||B||re;return mA({deleteKeyCode:h,multiSelectionKeyCode:w}),u.jsx(xA,{onPaneContextMenu:l,elementsSelectable:S,zoomOnScroll:k,zoomOnPinch:j,panOnScroll:te,panOnScrollSpeed:$,panOnScrollMode:A,zoomOnDoubleClick:H,panOnDrag:!F&&ie,defaultViewport:G,translateExtent:I,minZoom:z,maxZoom:U,zoomActivationKeyCode:C,preventScrolling:Z,noWheelClassName:P,noPanClassName:O,onViewportChange:Y,isControlledViewport:Q,paneClickDistance:f,selectionOnDrag:re,children:u.jsxs(SA,{onSelectionStart:v,onSelectionEnd:b,onPaneClick:t,onPaneMouseEnter:i,onPaneMouseMove:o,onPaneMouseLeave:s,onPaneContextMenu:l,onPaneScroll:c,panOnDrag:ie,isSelecting:!!de,selectionMode:g,selectionKeyPressed:F,paneClickDistance:f,selectionOnDrag:re,children:[e,D&&u.jsx(RA,{onSelectionContextMenu:M,noPanClassName:O,disableKeyboardA11y:q})]})})}ew.displayName="FlowRenderer";const zA=T.memo(ew),IA=e=>t=>e?np(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(i=>i.id):Array.from(t.nodeLookup.keys());function BA(e){return Be(T.useCallback(IA(e),[e]),at)}const HA=e=>e.updateNodeInternals;function $A(){const e=Be(HA),[t]=T.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(i=>{const o=new Map;i.forEach(s=>{const l=s.target.getAttribute("data-id");o.set(l,{id:l,nodeElement:s.target,force:!0})}),e(o)}));return T.useEffect(()=>()=>{t?.disconnect()},[t]),t}function PA({node:e,nodeType:t,hasDimensions:i,resizeObserver:o}){const s=st(),l=T.useRef(null),c=T.useRef(null),f=T.useRef(e.sourcePosition),h=T.useRef(e.targetPosition),p=T.useRef(t),m=i&&!!e.internals.handleBounds;return T.useEffect(()=>{l.current&&!e.hidden&&(!m||c.current!==l.current)&&(c.current&&o?.unobserve(c.current),o?.observe(l.current),c.current=l.current)},[m,e.hidden]),T.useEffect(()=>()=>{c.current&&(o?.unobserve(c.current),c.current=null)},[]),T.useEffect(()=>{if(l.current){const g=p.current!==t,v=f.current!==e.sourcePosition,b=h.current!==e.targetPosition;(g||v||b)&&(p.current=t,f.current=e.sourcePosition,h.current=e.targetPosition,s.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:l.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),l}function qA({id:e,onClick:t,onMouseEnter:i,onMouseMove:o,onMouseLeave:s,onContextMenu:l,onDoubleClick:c,nodesDraggable:f,elementsSelectable:h,nodesConnectable:p,nodesFocusable:m,resizeObserver:g,noDragClassName:v,noPanClassName:b,disableKeyboardA11y:w,rfId:N,nodeTypes:C,nodeClickDistance:S,onError:k}){const{node:j,internals:_,isParent:$}=Be(ae=>{const fe=ae.nodeLookup.get(e),xe=ae.parentLookup.has(e);return{node:fe,internals:fe.internals,isParent:xe}},at);let A=j.type||"default",H=C?.[A]||xv[A];H===void 0&&(k?.("003",Gn.error003(A)),A="default",H=C?.default||xv.default);const V=!!(j.draggable||f&&typeof j.draggable>"u"),G=!!(j.selectable||h&&typeof j.selectable>"u"),I=!!(j.connectable||p&&typeof j.connectable>"u"),z=!!(j.focusable||m&&typeof j.focusable>"u"),U=st(),Z=w0(j),M=PA({node:j,nodeType:A,hasDimensions:Z,resizeObserver:g}),P=J0({nodeRef:M,disabled:j.hidden||!V,noDragClassName:v,handleSelector:j.dragHandle,nodeId:e,isSelectable:G,nodeClickDistance:S}),O=K0();if(j.hidden)return null;const q=wi(j),Y=_A(j),Q=G||V||t||i||o||s,D=i?ae=>i(ae,{..._.userNode}):void 0,B=o?ae=>o(ae,{..._.userNode}):void 0,F=s?ae=>s(ae,{..._.userNode}):void 0,L=l?ae=>l(ae,{..._.userNode}):void 0,ie=c?ae=>c(ae,{..._.userNode}):void 0,te=ae=>{const{selectNodesOnDrag:fe,nodeDragThreshold:xe}=U.getState();G&&(!fe||!V||xe>0)&&Ah({id:e,store:U,nodeRef:M}),t&&t(ae,{..._.userNode})},re=ae=>{if(!(E0(ae.nativeEvent)||w)){if(f0.includes(ae.key)&&G){const fe=ae.key==="Escape";Ah({id:e,store:U,unselect:fe,nodeRef:M})}else if(V&&j.selected&&Object.prototype.hasOwnProperty.call($c,ae.key)){ae.preventDefault();const{ariaLabelConfig:fe}=U.getState();U.setState({ariaLiveMessage:fe["node.a11yDescription.ariaLiveMessage"]({direction:ae.key.replace("Arrow","").toLowerCase(),x:~~_.positionAbsolute.x,y:~~_.positionAbsolute.y})}),O({direction:$c[ae.key],factor:ae.shiftKey?4:1})}}},de=()=>{if(w||!M.current?.matches(":focus-visible"))return;const{transform:ae,width:fe,height:xe,autoPanOnNodeFocus:je,setCenter:ve}=U.getState();if(!je)return;np(new Map([[e,j]]),{x:0,y:0,width:fe,height:xe},ae,!0).length>0||ve(j.position.x+q.width/2,j.position.y+q.height/2,{zoom:ae[2]})};return u.jsx("div",{className:St(["react-flow__node",`react-flow__node-${A}`,{[b]:V},j.className,{selected:j.selected,selectable:G,parent:$,draggable:V,dragging:P}]),ref:M,style:{zIndex:_.z,transform:`translate(${_.positionAbsolute.x}px,${_.positionAbsolute.y}px)`,pointerEvents:Q?"all":"none",visibility:Z?"visible":"hidden",...j.style,...Y},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:D,onMouseMove:B,onMouseLeave:F,onContextMenu:L,onClick:te,onDoubleClick:ie,onKeyDown:z?re:void 0,tabIndex:z?0:void 0,onFocus:z?de:void 0,role:j.ariaRole??(z?"group":void 0),"aria-roledescription":"node","aria-describedby":w?void 0:`${V0}-${N}`,"aria-label":j.ariaLabel,...j.domAttributes,children:u.jsx(EA,{value:e,children:u.jsx(H,{id:e,data:j.data,type:A,positionAbsoluteX:_.positionAbsolute.x,positionAbsoluteY:_.positionAbsolute.y,selected:j.selected??!1,selectable:G,draggable:V,deletable:j.deletable??!0,isConnectable:I,sourcePosition:j.sourcePosition,targetPosition:j.targetPosition,dragging:P,dragHandle:j.dragHandle,zIndex:_.z,parentId:j.parentId,...q})})})}var UA=T.memo(qA);const VA=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function tw(e){const{nodesDraggable:t,nodesConnectable:i,nodesFocusable:o,elementsSelectable:s,onError:l}=Be(VA,at),c=BA(e.onlyRenderVisibleElements),f=$A();return u.jsx("div",{className:"react-flow__nodes",style:au,children:c.map(h=>u.jsx(UA,{id:h,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:f,nodesDraggable:t,nodesConnectable:i,nodesFocusable:o,elementsSelectable:s,nodeClickDistance:e.nodeClickDistance,onError:l},h))})}tw.displayName="NodeRenderer";const FA=T.memo(tw);function GA(e){return Be(T.useCallback(i=>{if(!e)return i.edges.map(s=>s.id);const o=[];if(i.width&&i.height)for(const s of i.edges){const l=i.nodeLookup.get(s.source),c=i.nodeLookup.get(s.target);l&&c&&Fk({sourceNode:l,targetNode:c,width:i.width,height:i.height,transform:i.transform})&&o.push(s.id)}return o},[e]),at)}const YA=({color:e="none",strokeWidth:t=1})=>{const i={strokeWidth:t,...e&&{stroke:e}};return u.jsx("polyline",{className:"arrow",style:i,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},XA=({color:e="none",strokeWidth:t=1})=>{const i={strokeWidth:t,...e&&{stroke:e,fill:e}};return u.jsx("polyline",{className:"arrowclosed",style:i,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},bv={[zc.Arrow]:YA,[zc.ArrowClosed]:XA};function QA(e){const t=st();return T.useMemo(()=>Object.prototype.hasOwnProperty.call(bv,e)?bv[e]:(t.getState().onError?.("009",Gn.error009(e)),null),[e])}const WA=({id:e,type:t,color:i,width:o=12.5,height:s=12.5,markerUnits:l="strokeWidth",strokeWidth:c,orient:f="auto-start-reverse"})=>{const h=QA(t);return h?u.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${o}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:l,orient:f,refX:"0",refY:"0",children:u.jsx(h,{color:i,strokeWidth:c})}):null},nw=({defaultColor:e,rfId:t})=>{const i=Be(l=>l.edges),o=Be(l=>l.defaultEdgeOptions),s=T.useMemo(()=>Jk(i,{id:t,defaultColor:e,defaultMarkerStart:o?.markerStart,defaultMarkerEnd:o?.markerEnd}),[i,o,t,e]);return s.length?u.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:u.jsx("defs",{children:s.map(l=>u.jsx(WA,{id:l.id,type:l.type,color:l.color,width:l.width,height:l.height,markerUnits:l.markerUnits,strokeWidth:l.strokeWidth,orient:l.orient},l.id))})}):null};nw.displayName="MarkerDefinitions";var ZA=T.memo(nw);function iw({x:e,y:t,label:i,labelStyle:o,labelShowBg:s=!0,labelBgStyle:l,labelBgPadding:c=[2,4],labelBgBorderRadius:f=2,children:h,className:p,...m}){const[g,v]=T.useState({x:1,y:0,width:0,height:0}),b=St(["react-flow__edge-textwrapper",p]),w=T.useRef(null);return T.useEffect(()=>{if(w.current){const N=w.current.getBBox();v({x:N.x,y:N.y,width:N.width,height:N.height})}},[i]),i?u.jsxs("g",{transform:`translate(${e-g.width/2} ${t-g.height/2})`,className:b,visibility:g.width?"visible":"hidden",...m,children:[s&&u.jsx("rect",{width:g.width+2*c[0],x:-c[0],y:-c[1],height:g.height+2*c[1],className:"react-flow__edge-textbg",style:l,rx:f,ry:f}),u.jsx("text",{className:"react-flow__edge-text",y:g.height/2,dy:"0.3em",ref:w,style:o,children:i}),h]}):null}iw.displayName="EdgeText";const JA=T.memo(iw);function _s({path:e,labelX:t,labelY:i,label:o,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h,interactionWidth:p=20,...m}){return u.jsxs(u.Fragment,{children:[u.jsx("path",{...m,d:e,fill:"none",className:St(["react-flow__edge-path",m.className])}),p?u.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}):null,o&&_n(t)&&_n(i)?u.jsx(JA,{x:t,y:i,label:o,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h}):null]})}function wv({pos:e,x1:t,y1:i,x2:o,y2:s}){return e===ge.Left||e===ge.Right?[.5*(t+o),i]:[t,.5*(i+s)]}function rw({sourceX:e,sourceY:t,sourcePosition:i=ge.Bottom,targetX:o,targetY:s,targetPosition:l=ge.Top}){const[c,f]=wv({pos:i,x1:e,y1:t,x2:o,y2:s}),[h,p]=wv({pos:l,x1:o,y1:s,x2:e,y2:t}),[m,g,v,b]=C0({sourceX:e,sourceY:t,targetX:o,targetY:s,sourceControlX:c,sourceControlY:f,targetControlX:h,targetControlY:p});return[`M${e},${t} C${c},${f} ${h},${p} ${o},${s}`,m,g,v,b]}function ow(e){return T.memo(({id:t,sourceX:i,sourceY:o,targetX:s,targetY:l,sourcePosition:c,targetPosition:f,label:h,labelStyle:p,labelShowBg:m,labelBgStyle:g,labelBgPadding:v,labelBgBorderRadius:b,style:w,markerEnd:N,markerStart:C,interactionWidth:S})=>{const[k,j,_]=rw({sourceX:i,sourceY:o,sourcePosition:c,targetX:s,targetY:l,targetPosition:f}),$=e.isInternal?void 0:t;return u.jsx(_s,{id:$,path:k,labelX:j,labelY:_,label:h,labelStyle:p,labelShowBg:m,labelBgStyle:g,labelBgPadding:v,labelBgBorderRadius:b,style:w,markerEnd:N,markerStart:C,interactionWidth:S})})}const KA=ow({isInternal:!1}),aw=ow({isInternal:!0});KA.displayName="SimpleBezierEdge";aw.displayName="SimpleBezierEdgeInternal";function sw(e){return T.memo(({id:t,sourceX:i,sourceY:o,targetX:s,targetY:l,label:c,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:g,style:v,sourcePosition:b=ge.Bottom,targetPosition:w=ge.Top,markerEnd:N,markerStart:C,pathOptions:S,interactionWidth:k})=>{const[j,_,$]=Hc({sourceX:i,sourceY:o,sourcePosition:b,targetX:s,targetY:l,targetPosition:w,borderRadius:S?.borderRadius,offset:S?.offset,stepPosition:S?.stepPosition}),A=e.isInternal?void 0:t;return u.jsx(_s,{id:A,path:j,labelX:_,labelY:$,label:c,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:g,style:v,markerEnd:N,markerStart:C,interactionWidth:k})})}const lw=sw({isInternal:!1}),cw=sw({isInternal:!0});lw.displayName="SmoothStepEdge";cw.displayName="SmoothStepEdgeInternal";function uw(e){return T.memo(({id:t,...i})=>{const o=e.isInternal?void 0:t;return u.jsx(lw,{...i,id:o,pathOptions:T.useMemo(()=>({borderRadius:0,offset:i.pathOptions?.offset}),[i.pathOptions?.offset])})})}const eM=uw({isInternal:!1}),dw=uw({isInternal:!0});eM.displayName="StepEdge";dw.displayName="StepEdgeInternal";function fw(e){return T.memo(({id:t,sourceX:i,sourceY:o,targetX:s,targetY:l,label:c,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:g,style:v,markerEnd:b,markerStart:w,interactionWidth:N})=>{const[C,S,k]=M0({sourceX:i,sourceY:o,targetX:s,targetY:l}),j=e.isInternal?void 0:t;return u.jsx(_s,{id:j,path:C,labelX:S,labelY:k,label:c,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:g,style:v,markerEnd:b,markerStart:w,interactionWidth:N})})}const tM=fw({isInternal:!1}),hw=fw({isInternal:!0});tM.displayName="StraightEdge";hw.displayName="StraightEdgeInternal";function pw(e){return T.memo(({id:t,sourceX:i,sourceY:o,targetX:s,targetY:l,sourcePosition:c=ge.Bottom,targetPosition:f=ge.Top,label:h,labelStyle:p,labelShowBg:m,labelBgStyle:g,labelBgPadding:v,labelBgBorderRadius:b,style:w,markerEnd:N,markerStart:C,pathOptions:S,interactionWidth:k})=>{const[j,_,$]=k0({sourceX:i,sourceY:o,sourcePosition:c,targetX:s,targetY:l,targetPosition:f,curvature:S?.curvature}),A=e.isInternal?void 0:t;return u.jsx(_s,{id:A,path:j,labelX:_,labelY:$,label:h,labelStyle:p,labelShowBg:m,labelBgStyle:g,labelBgPadding:v,labelBgBorderRadius:b,style:w,markerEnd:N,markerStart:C,interactionWidth:k})})}const nM=pw({isInternal:!1}),mw=pw({isInternal:!0});nM.displayName="BezierEdge";mw.displayName="BezierEdgeInternal";const Sv={default:mw,straight:hw,step:dw,smoothstep:cw,simplebezier:aw},Nv={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},iM=(e,t,i)=>i===ge.Left?e-t:i===ge.Right?e+t:e,rM=(e,t,i)=>i===ge.Top?e-t:i===ge.Bottom?e+t:e,Ev="react-flow__edgeupdater";function jv({position:e,centerX:t,centerY:i,radius:o=10,onMouseDown:s,onMouseEnter:l,onMouseOut:c,type:f}){return u.jsx("circle",{onMouseDown:s,onMouseEnter:l,onMouseOut:c,className:St([Ev,`${Ev}-${f}`]),cx:iM(t,o,e),cy:rM(i,o,e),r:o,stroke:"transparent",fill:"transparent"})}function oM({isReconnectable:e,reconnectRadius:t,edge:i,sourceX:o,sourceY:s,targetX:l,targetY:c,sourcePosition:f,targetPosition:h,onReconnect:p,onReconnectStart:m,onReconnectEnd:g,setReconnecting:v,setUpdateHover:b}){const w=st(),N=(_,$)=>{if(_.button!==0)return;const{autoPanOnConnect:A,domNode:H,isValidConnection:V,connectionMode:G,connectionRadius:I,lib:z,onConnectStart:U,onConnectEnd:Z,cancelConnection:M,nodeLookup:P,rfId:O,panBy:q,updateConnection:Y}=w.getState(),Q=$.type==="target",D=(L,ie)=>{v(!1),g?.(L,i,$.type,ie)},B=L=>p?.(i,L),F=(L,ie)=>{v(!0),m?.(_,i,$.type),U?.(L,ie)};kh.onPointerDown(_.nativeEvent,{autoPanOnConnect:A,connectionMode:G,connectionRadius:I,domNode:H,handleId:$.id,nodeId:$.nodeId,nodeLookup:P,isTarget:Q,edgeUpdaterType:$.type,lib:z,flowId:O,cancelConnection:M,panBy:q,isValidConnection:V,onConnect:B,onConnectStart:F,onConnectEnd:Z,onReconnectEnd:D,updateConnection:Y,getTransform:()=>w.getState().transform,getFromHandle:()=>w.getState().connection.fromHandle,dragThreshold:w.getState().connectionDragThreshold,handleDomNode:_.currentTarget})},C=_=>N(_,{nodeId:i.target,id:i.targetHandle??null,type:"target"}),S=_=>N(_,{nodeId:i.source,id:i.sourceHandle??null,type:"source"}),k=()=>b(!0),j=()=>b(!1);return u.jsxs(u.Fragment,{children:[(e===!0||e==="source")&&u.jsx(jv,{position:f,centerX:o,centerY:s,radius:t,onMouseDown:C,onMouseEnter:k,onMouseOut:j,type:"source"}),(e===!0||e==="target")&&u.jsx(jv,{position:h,centerX:l,centerY:c,radius:t,onMouseDown:S,onMouseEnter:k,onMouseOut:j,type:"target"})]})}function aM({id:e,edgesFocusable:t,edgesReconnectable:i,elementsSelectable:o,onClick:s,onDoubleClick:l,onContextMenu:c,onMouseEnter:f,onMouseMove:h,onMouseLeave:p,reconnectRadius:m,onReconnect:g,onReconnectStart:v,onReconnectEnd:b,rfId:w,edgeTypes:N,noPanClassName:C,onError:S,disableKeyboardA11y:k}){let j=Be(ve=>ve.edgeLookup.get(e));const _=Be(ve=>ve.defaultEdgeOptions);j=_?{..._,...j}:j;let $=j.type||"default",A=N?.[$]||Sv[$];A===void 0&&(S?.("011",Gn.error011($)),$="default",A=N?.default||Sv.default);const H=!!(j.focusable||t&&typeof j.focusable>"u"),V=typeof g<"u"&&(j.reconnectable||i&&typeof j.reconnectable>"u"),G=!!(j.selectable||o&&typeof j.selectable>"u"),I=T.useRef(null),[z,U]=T.useState(!1),[Z,M]=T.useState(!1),P=st(),{zIndex:O,sourceX:q,sourceY:Y,targetX:Q,targetY:D,sourcePosition:B,targetPosition:F}=Be(T.useCallback(ve=>{const Ee=ve.nodeLookup.get(j.source),De=ve.nodeLookup.get(j.target);if(!Ee||!De)return{zIndex:j.zIndex,...Nv};const qe=Zk({id:e,sourceNode:Ee,targetNode:De,sourceHandle:j.sourceHandle||null,targetHandle:j.targetHandle||null,connectionMode:ve.connectionMode,onError:S});return{zIndex:Vk({selected:j.selected,zIndex:j.zIndex,sourceNode:Ee,targetNode:De,elevateOnSelect:ve.elevateEdgesOnSelect,zIndexMode:ve.zIndexMode}),...qe||Nv}},[j.source,j.target,j.sourceHandle,j.targetHandle,j.selected,j.zIndex]),at),L=T.useMemo(()=>j.markerStart?`url('#${jh(j.markerStart,w)}')`:void 0,[j.markerStart,w]),ie=T.useMemo(()=>j.markerEnd?`url('#${jh(j.markerEnd,w)}')`:void 0,[j.markerEnd,w]);if(j.hidden||q===null||Y===null||Q===null||D===null)return null;const te=ve=>{const{addSelectedEdges:Ee,unselectNodesAndEdges:De,multiSelectionActive:qe}=P.getState();G&&(P.setState({nodesSelectionActive:!1}),j.selected&&qe?(De({nodes:[],edges:[j]}),I.current?.blur()):Ee([e])),s&&s(ve,j)},re=l?ve=>{l(ve,{...j})}:void 0,de=c?ve=>{c(ve,{...j})}:void 0,ae=f?ve=>{f(ve,{...j})}:void 0,fe=h?ve=>{h(ve,{...j})}:void 0,xe=p?ve=>{p(ve,{...j})}:void 0,je=ve=>{if(!k&&f0.includes(ve.key)&&G){const{unselectNodesAndEdges:Ee,addSelectedEdges:De}=P.getState();ve.key==="Escape"?(I.current?.blur(),Ee({edges:[j]})):De([e])}};return u.jsx("svg",{style:{zIndex:O},children:u.jsxs("g",{className:St(["react-flow__edge",`react-flow__edge-${$}`,j.className,C,{selected:j.selected,animated:j.animated,inactive:!G&&!s,updating:z,selectable:G}]),onClick:te,onDoubleClick:re,onContextMenu:de,onMouseEnter:ae,onMouseMove:fe,onMouseLeave:xe,onKeyDown:H?je:void 0,tabIndex:H?0:void 0,role:j.ariaRole??(H?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":j.ariaLabel===null?void 0:j.ariaLabel||`Edge from ${j.source} to ${j.target}`,"aria-describedby":H?`${F0}-${w}`:void 0,ref:I,...j.domAttributes,children:[!Z&&u.jsx(A,{id:e,source:j.source,target:j.target,type:j.type,selected:j.selected,animated:j.animated,selectable:G,deletable:j.deletable??!0,label:j.label,labelStyle:j.labelStyle,labelShowBg:j.labelShowBg,labelBgStyle:j.labelBgStyle,labelBgPadding:j.labelBgPadding,labelBgBorderRadius:j.labelBgBorderRadius,sourceX:q,sourceY:Y,targetX:Q,targetY:D,sourcePosition:B,targetPosition:F,data:j.data,style:j.style,sourceHandleId:j.sourceHandle,targetHandleId:j.targetHandle,markerStart:L,markerEnd:ie,pathOptions:"pathOptions"in j?j.pathOptions:void 0,interactionWidth:j.interactionWidth}),V&&u.jsx(oM,{edge:j,isReconnectable:V,reconnectRadius:m,onReconnect:g,onReconnectStart:v,onReconnectEnd:b,sourceX:q,sourceY:Y,targetX:Q,targetY:D,sourcePosition:B,targetPosition:F,setUpdateHover:U,setReconnecting:M})]})})}var sM=T.memo(aM);const lM=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function gw({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:i,edgeTypes:o,noPanClassName:s,onReconnect:l,onEdgeContextMenu:c,onEdgeMouseEnter:f,onEdgeMouseMove:h,onEdgeMouseLeave:p,onEdgeClick:m,reconnectRadius:g,onEdgeDoubleClick:v,onReconnectStart:b,onReconnectEnd:w,disableKeyboardA11y:N}){const{edgesFocusable:C,edgesReconnectable:S,elementsSelectable:k,onError:j}=Be(lM,at),_=GA(t);return u.jsxs("div",{className:"react-flow__edges",children:[u.jsx(ZA,{defaultColor:e,rfId:i}),_.map($=>u.jsx(sM,{id:$,edgesFocusable:C,edgesReconnectable:S,elementsSelectable:k,noPanClassName:s,onReconnect:l,onContextMenu:c,onMouseEnter:f,onMouseMove:h,onMouseLeave:p,onClick:m,reconnectRadius:g,onDoubleClick:v,onReconnectStart:b,onReconnectEnd:w,rfId:i,onError:j,edgeTypes:o,disableKeyboardA11y:N},$))]})}gw.displayName="EdgeRenderer";const cM=T.memo(gw),uM=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function dM({children:e}){const t=Be(uM);return u.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function fM(e){const t=ou(),i=T.useRef(!1);T.useEffect(()=>{!i.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),i.current=!0)},[e,t.viewportInitialized])}const hM=e=>e.panZoom?.syncViewport;function pM(e){const t=Be(hM),i=st();return T.useEffect(()=>{e&&(t?.(e),i.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function mM(e){return e.connection.inProgress?{...e.connection,to:Ds(e.connection.to,e.transform)}:{...e.connection}}function gM(e){return mM}function yM(e){const t=gM();return Be(t,at)}const xM=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function vM({containerStyle:e,style:t,type:i,component:o}){const{nodesConnectable:s,width:l,height:c,isValid:f,inProgress:h}=Be(xM,at);return!(l&&s&&h)?null:u.jsx("svg",{style:e,width:l,height:c,className:"react-flow__connectionline react-flow__container",children:u.jsx("g",{className:St(["react-flow__connection",m0(f)]),children:u.jsx(yw,{style:t,type:i,CustomComponent:o,isValid:f})})})}const yw=({style:e,type:t=rr.Bezier,CustomComponent:i,isValid:o})=>{const{inProgress:s,from:l,fromNode:c,fromHandle:f,fromPosition:h,to:p,toNode:m,toHandle:g,toPosition:v,pointer:b}=yM();if(!s)return;if(i)return u.jsx(i,{connectionLineType:t,connectionLineStyle:e,fromNode:c,fromHandle:f,fromX:l.x,fromY:l.y,toX:p.x,toY:p.y,fromPosition:h,toPosition:v,connectionStatus:m0(o),toNode:m,toHandle:g,pointer:b});let w="";const N={sourceX:l.x,sourceY:l.y,sourcePosition:h,targetX:p.x,targetY:p.y,targetPosition:v};switch(t){case rr.Bezier:[w]=k0(N);break;case rr.SimpleBezier:[w]=rw(N);break;case rr.Step:[w]=Hc({...N,borderRadius:0});break;case rr.SmoothStep:[w]=Hc(N);break;default:[w]=M0(N)}return u.jsx("path",{d:w,fill:"none",className:"react-flow__connection-path",style:e})};yw.displayName="ConnectionLine";const bM={};function Cv(e=bM){T.useRef(e),st(),T.useEffect(()=>{},[e])}function wM(){st(),T.useRef(!1),T.useEffect(()=>{},[])}function xw({nodeTypes:e,edgeTypes:t,onInit:i,onNodeClick:o,onEdgeClick:s,onNodeDoubleClick:l,onEdgeDoubleClick:c,onNodeMouseEnter:f,onNodeMouseMove:h,onNodeMouseLeave:p,onNodeContextMenu:m,onSelectionContextMenu:g,onSelectionStart:v,onSelectionEnd:b,connectionLineType:w,connectionLineStyle:N,connectionLineComponent:C,connectionLineContainerStyle:S,selectionKeyCode:k,selectionOnDrag:j,selectionMode:_,multiSelectionKeyCode:$,panActivationKeyCode:A,zoomActivationKeyCode:H,deleteKeyCode:V,onlyRenderVisibleElements:G,elementsSelectable:I,defaultViewport:z,translateExtent:U,minZoom:Z,maxZoom:M,preventScrolling:P,defaultMarkerColor:O,zoomOnScroll:q,zoomOnPinch:Y,panOnScroll:Q,panOnScrollSpeed:D,panOnScrollMode:B,zoomOnDoubleClick:F,panOnDrag:L,onPaneClick:ie,onPaneMouseEnter:te,onPaneMouseMove:re,onPaneMouseLeave:de,onPaneScroll:ae,onPaneContextMenu:fe,paneClickDistance:xe,nodeClickDistance:je,onEdgeContextMenu:ve,onEdgeMouseEnter:Ee,onEdgeMouseMove:De,onEdgeMouseLeave:qe,reconnectRadius:Ue,onReconnect:ft,onReconnectStart:Kt,onReconnectEnd:_t,noDragClassName:Pt,noWheelClassName:Nn,noPanClassName:Qn,disableKeyboardA11y:Wn,nodeExtent:Nt,rfId:Ei,viewport:se,onViewportChange:pe}){return Cv(e),Cv(t),wM(),fM(i),pM(se),u.jsx(zA,{onPaneClick:ie,onPaneMouseEnter:te,onPaneMouseMove:re,onPaneMouseLeave:de,onPaneContextMenu:fe,onPaneScroll:ae,paneClickDistance:xe,deleteKeyCode:V,selectionKeyCode:k,selectionOnDrag:j,selectionMode:_,onSelectionStart:v,onSelectionEnd:b,multiSelectionKeyCode:$,panActivationKeyCode:A,zoomActivationKeyCode:H,elementsSelectable:I,zoomOnScroll:q,zoomOnPinch:Y,zoomOnDoubleClick:F,panOnScroll:Q,panOnScrollSpeed:D,panOnScrollMode:B,panOnDrag:L,defaultViewport:z,translateExtent:U,minZoom:Z,maxZoom:M,onSelectionContextMenu:g,preventScrolling:P,noDragClassName:Pt,noWheelClassName:Nn,noPanClassName:Qn,disableKeyboardA11y:Wn,onViewportChange:pe,isControlledViewport:!!se,children:u.jsxs(dM,{children:[u.jsx(cM,{edgeTypes:t,onEdgeClick:s,onEdgeDoubleClick:c,onReconnect:ft,onReconnectStart:Kt,onReconnectEnd:_t,onlyRenderVisibleElements:G,onEdgeContextMenu:ve,onEdgeMouseEnter:Ee,onEdgeMouseMove:De,onEdgeMouseLeave:qe,reconnectRadius:Ue,defaultMarkerColor:O,noPanClassName:Qn,disableKeyboardA11y:Wn,rfId:Ei}),u.jsx(vM,{style:N,type:w,component:C,containerStyle:S}),u.jsx("div",{className:"react-flow__edgelabel-renderer"}),u.jsx(FA,{nodeTypes:e,onNodeClick:o,onNodeDoubleClick:l,onNodeMouseEnter:f,onNodeMouseMove:h,onNodeMouseLeave:p,onNodeContextMenu:m,nodeClickDistance:je,onlyRenderVisibleElements:G,noPanClassName:Qn,noDragClassName:Pt,disableKeyboardA11y:Wn,nodeExtent:Nt,rfId:Ei}),u.jsx("div",{className:"react-flow__viewport-portal"})]})})}xw.displayName="GraphView";const SM=T.memo(xw),kv=({nodes:e,edges:t,defaultNodes:i,defaultEdges:o,width:s,height:l,fitView:c,fitViewOptions:f,minZoom:h=.5,maxZoom:p=2,nodeOrigin:m,nodeExtent:g,zIndexMode:v="basic"}={})=>{const b=new Map,w=new Map,N=new Map,C=new Map,S=o??t??[],k=i??e??[],j=m??[0,0],_=g??ys;O0(N,C,S);const $=Ch(k,b,w,{nodeOrigin:j,nodeExtent:_,zIndexMode:v});let A=[0,0,1];if(c&&s&&l){const H=As(b,{filter:z=>!!((z.width||z.initialWidth)&&(z.height||z.initialHeight))}),{x:V,y:G,zoom:I}=ip(H,s,l,h,p,f?.padding??.1);A=[V,G,I]}return{rfId:"1",width:s??0,height:l??0,transform:A,nodes:k,nodesInitialized:$,nodeLookup:b,parentLookup:w,edges:S,edgeLookup:C,connectionLookup:N,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:i!==void 0,hasDefaultEdges:o!==void 0,panZoom:null,minZoom:h,maxZoom:p,translateExtent:ys,nodeExtent:_,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Uo.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:j,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:c??!1,fitViewOptions:f,fitViewResolver:null,connection:{...p0},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:Bk,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:h0,zIndexMode:v,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},NM=({nodes:e,edges:t,defaultNodes:i,defaultEdges:o,width:s,height:l,fitView:c,fitViewOptions:f,minZoom:h,maxZoom:p,nodeOrigin:m,nodeExtent:g,zIndexMode:v})=>PT((b,w)=>{async function N(){const{nodeLookup:C,panZoom:S,fitViewOptions:k,fitViewResolver:j,width:_,height:$,minZoom:A,maxZoom:H}=w();S&&(await zk({nodes:C,width:_,height:$,panZoom:S,minZoom:A,maxZoom:H},k),j?.resolve(!0),b({fitViewResolver:null}))}return{...kv({nodes:e,edges:t,width:s,height:l,fitView:c,fitViewOptions:f,minZoom:h,maxZoom:p,nodeOrigin:m,nodeExtent:g,defaultNodes:i,defaultEdges:o,zIndexMode:v}),setNodes:C=>{const{nodeLookup:S,parentLookup:k,nodeOrigin:j,elevateNodesOnSelect:_,fitViewQueued:$,zIndexMode:A}=w(),H=Ch(C,S,k,{nodeOrigin:j,nodeExtent:g,elevateNodesOnSelect:_,checkEquality:!0,zIndexMode:A});$&&H?(N(),b({nodes:C,nodesInitialized:H,fitViewQueued:!1,fitViewOptions:void 0})):b({nodes:C,nodesInitialized:H})},setEdges:C=>{const{connectionLookup:S,edgeLookup:k}=w();O0(S,k,C),b({edges:C})},setDefaultNodesAndEdges:(C,S)=>{if(C){const{setNodes:k}=w();k(C),b({hasDefaultNodes:!0})}if(S){const{setEdges:k}=w();k(S),b({hasDefaultEdges:!0})}},updateNodeInternals:C=>{const{triggerNodeChanges:S,nodeLookup:k,parentLookup:j,domNode:_,nodeOrigin:$,nodeExtent:A,debug:H,fitViewQueued:V,zIndexMode:G}=w(),{changes:I,updatedInternals:z}=oT(C,k,j,_,$,A,G);z&&(tT(k,j,{nodeOrigin:$,nodeExtent:A,zIndexMode:G}),V?(N(),b({fitViewQueued:!1,fitViewOptions:void 0})):b({}),I?.length>0&&(H&&console.log("React Flow: trigger node changes",I),S?.(I)))},updateNodePositions:(C,S=!1)=>{const k=[];let j=[];const{nodeLookup:_,triggerNodeChanges:$,connection:A,updateConnection:H,onNodesChangeMiddlewareMap:V}=w();for(const[G,I]of C){const z=_.get(G),U=!!(z?.expandParent&&z?.parentId&&I?.position),Z={id:G,type:"position",position:U?{x:Math.max(0,I.position.x),y:Math.max(0,I.position.y)}:I.position,dragging:S};if(z&&A.inProgress&&A.fromNode.id===z.id){const M=Br(z,A.fromHandle,ge.Left,!0);H({...A,from:M})}U&&z.parentId&&k.push({id:G,parentId:z.parentId,rect:{...I.internals.positionAbsolute,width:I.measured.width??0,height:I.measured.height??0}}),j.push(Z)}if(k.length>0){const{parentLookup:G,nodeOrigin:I}=w(),z=cp(k,_,G,I);j.push(...z)}for(const G of V.values())j=G(j);$(j)},triggerNodeChanges:C=>{const{onNodesChange:S,setNodes:k,nodes:j,hasDefaultNodes:_,debug:$}=w();if(C?.length){if(_){const A=X0(C,j);k(A)}$&&console.log("React Flow: trigger node changes",C),S?.(C)}},triggerEdgeChanges:C=>{const{onEdgesChange:S,setEdges:k,edges:j,hasDefaultEdges:_,debug:$}=w();if(C?.length){if(_){const A=Q0(C,j);k(A)}$&&console.log("React Flow: trigger edge changes",C),S?.(C)}},addSelectedNodes:C=>{const{multiSelectionActive:S,edgeLookup:k,nodeLookup:j,triggerNodeChanges:_,triggerEdgeChanges:$}=w();if(S){const A=C.map(H=>Dr(H,!0));_(A);return}_(zo(j,new Set([...C]),!0)),$(zo(k))},addSelectedEdges:C=>{const{multiSelectionActive:S,edgeLookup:k,nodeLookup:j,triggerNodeChanges:_,triggerEdgeChanges:$}=w();if(S){const A=C.map(H=>Dr(H,!0));$(A);return}$(zo(k,new Set([...C]))),_(zo(j,new Set,!0))},unselectNodesAndEdges:({nodes:C,edges:S}={})=>{const{edges:k,nodes:j,nodeLookup:_,triggerNodeChanges:$,triggerEdgeChanges:A}=w(),H=C||j,V=S||k,G=H.map(z=>{const U=_.get(z.id);return U&&(U.selected=!1),Dr(z.id,!1)}),I=V.map(z=>Dr(z.id,!1));$(G),A(I)},setMinZoom:C=>{const{panZoom:S,maxZoom:k}=w();S?.setScaleExtent([C,k]),b({minZoom:C})},setMaxZoom:C=>{const{panZoom:S,minZoom:k}=w();S?.setScaleExtent([k,C]),b({maxZoom:C})},setTranslateExtent:C=>{w().panZoom?.setTranslateExtent(C),b({translateExtent:C})},resetSelectedElements:()=>{const{edges:C,nodes:S,triggerNodeChanges:k,triggerEdgeChanges:j,elementsSelectable:_}=w();if(!_)return;const $=S.reduce((H,V)=>V.selected?[...H,Dr(V.id,!1)]:H,[]),A=C.reduce((H,V)=>V.selected?[...H,Dr(V.id,!1)]:H,[]);k($),j(A)},setNodeExtent:C=>{const{nodes:S,nodeLookup:k,parentLookup:j,nodeOrigin:_,elevateNodesOnSelect:$,nodeExtent:A,zIndexMode:H}=w();C[0][0]===A[0][0]&&C[0][1]===A[0][1]&&C[1][0]===A[1][0]&&C[1][1]===A[1][1]||(Ch(S,k,j,{nodeOrigin:_,nodeExtent:C,elevateNodesOnSelect:$,checkEquality:!1,zIndexMode:H}),b({nodeExtent:C}))},panBy:C=>{const{transform:S,width:k,height:j,panZoom:_,translateExtent:$}=w();return aT({delta:C,panZoom:_,transform:S,translateExtent:$,width:k,height:j})},setCenter:async(C,S,k)=>{const{width:j,height:_,maxZoom:$,panZoom:A}=w();if(!A)return Promise.resolve(!1);const H=typeof k?.zoom<"u"?k.zoom:$;return await A.setViewport({x:j/2-C*H,y:_/2-S*H,zoom:H},{duration:k?.duration,ease:k?.ease,interpolate:k?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{b({connection:{...p0}})},updateConnection:C=>{b({connection:C})},reset:()=>b({...kv()})}},Object.is);function vw({initialNodes:e,initialEdges:t,defaultNodes:i,defaultEdges:o,initialWidth:s,initialHeight:l,initialMinZoom:c,initialMaxZoom:f,initialFitViewOptions:h,fitView:p,nodeOrigin:m,nodeExtent:g,zIndexMode:v,children:b}){const[w]=T.useState(()=>NM({nodes:e,edges:t,defaultNodes:i,defaultEdges:o,width:s,height:l,fitView:p,minZoom:c,maxZoom:f,fitViewOptions:h,nodeOrigin:m,nodeExtent:g,zIndexMode:v}));return u.jsx(qT,{value:w,children:u.jsx(dA,{children:b})})}function EM({children:e,nodes:t,edges:i,defaultNodes:o,defaultEdges:s,width:l,height:c,fitView:f,fitViewOptions:h,minZoom:p,maxZoom:m,nodeOrigin:g,nodeExtent:v,zIndexMode:b}){return T.useContext(iu)?u.jsx(u.Fragment,{children:e}):u.jsx(vw,{initialNodes:t,initialEdges:i,defaultNodes:o,defaultEdges:s,initialWidth:l,initialHeight:c,fitView:f,initialFitViewOptions:h,initialMinZoom:p,initialMaxZoom:m,nodeOrigin:g,nodeExtent:v,zIndexMode:b,children:e})}const jM={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function CM({nodes:e,edges:t,defaultNodes:i,defaultEdges:o,className:s,nodeTypes:l,edgeTypes:c,onNodeClick:f,onEdgeClick:h,onInit:p,onMove:m,onMoveStart:g,onMoveEnd:v,onConnect:b,onConnectStart:w,onConnectEnd:N,onClickConnectStart:C,onClickConnectEnd:S,onNodeMouseEnter:k,onNodeMouseMove:j,onNodeMouseLeave:_,onNodeContextMenu:$,onNodeDoubleClick:A,onNodeDragStart:H,onNodeDrag:V,onNodeDragStop:G,onNodesDelete:I,onEdgesDelete:z,onDelete:U,onSelectionChange:Z,onSelectionDragStart:M,onSelectionDrag:P,onSelectionDragStop:O,onSelectionContextMenu:q,onSelectionStart:Y,onSelectionEnd:Q,onBeforeDelete:D,connectionMode:B,connectionLineType:F=rr.Bezier,connectionLineStyle:L,connectionLineComponent:ie,connectionLineContainerStyle:te,deleteKeyCode:re="Backspace",selectionKeyCode:de="Shift",selectionOnDrag:ae=!1,selectionMode:fe=xs.Full,panActivationKeyCode:xe="Space",multiSelectionKeyCode:je=bs()?"Meta":"Control",zoomActivationKeyCode:ve=bs()?"Meta":"Control",snapToGrid:Ee,snapGrid:De,onlyRenderVisibleElements:qe=!1,selectNodesOnDrag:Ue,nodesDraggable:ft,autoPanOnNodeFocus:Kt,nodesConnectable:_t,nodesFocusable:Pt,nodeOrigin:Nn=G0,edgesFocusable:Qn,edgesReconnectable:Wn,elementsSelectable:Nt=!0,defaultViewport:Ei=tA,minZoom:se=.5,maxZoom:pe=2,translateExtent:Se=ys,preventScrolling:_e=!0,nodeExtent:$e,defaultMarkerColor:Bt="#b1b1b7",zoomOnScroll:En=!0,zoomOnPinch:kt=!0,panOnScroll:ht=!1,panOnScrollSpeed:Ot=.5,panOnScrollMode:Qe=Rr.Free,zoomOnDoubleClick:In=!0,panOnDrag:en=!0,onPaneClick:mu,onPaneMouseEnter:Ur,onPaneMouseMove:Vr,onPaneMouseLeave:Fr,onPaneScroll:Zn,onPaneContextMenu:Gr,paneClickDistance:cr=1,nodeClickDistance:gu=0,children:Is,onReconnect:Jo,onReconnectStart:ur,onReconnectEnd:yu,onEdgeContextMenu:Bs,onEdgeDoubleClick:Hs,onEdgeMouseEnter:$s,onEdgeMouseMove:Ko,onEdgeMouseLeave:ea,reconnectRadius:Ps=10,onNodesChange:qs,onEdgesChange:Bn,noDragClassName:Et="nodrag",noWheelClassName:Rt="nowheel",noPanClassName:Jn="nopan",fitView:Yr,fitViewOptions:Us,connectOnClick:xu,attributionPosition:Vs,proOptions:dr,defaultEdgeOptions:ta,elevateNodesOnSelect:ji=!0,elevateEdgesOnSelect:Ci=!1,disableKeyboardA11y:ki=!1,autoPanOnConnect:Ti,autoPanOnNodeDrag:gt,autoPanSpeed:Fs,connectionRadius:Gs,isValidConnection:Kn,onError:Ai,style:vu,id:na,nodeDragThreshold:Ys,connectionDragThreshold:bu,viewport:Xr,onViewportChange:Qr,width:jn,height:qt,colorMode:Xs="light",debug:wu,onScroll:Wr,ariaLabelConfig:Qs,zIndexMode:fr="basic",...Su},Ut){const hr=na||"1",Ws=oA(Xs),ia=T.useCallback(ei=>{ei.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Wr?.(ei)},[Wr]);return u.jsx("div",{"data-testid":"rf__wrapper",...Su,onScroll:ia,style:{...vu,...jM},ref:Ut,className:St(["react-flow",s,Ws]),id:na,role:"application",children:u.jsxs(EM,{nodes:e,edges:t,width:jn,height:qt,fitView:Yr,fitViewOptions:Us,minZoom:se,maxZoom:pe,nodeOrigin:Nn,nodeExtent:$e,zIndexMode:fr,children:[u.jsx(SM,{onInit:p,onNodeClick:f,onEdgeClick:h,onNodeMouseEnter:k,onNodeMouseMove:j,onNodeMouseLeave:_,onNodeContextMenu:$,onNodeDoubleClick:A,nodeTypes:l,edgeTypes:c,connectionLineType:F,connectionLineStyle:L,connectionLineComponent:ie,connectionLineContainerStyle:te,selectionKeyCode:de,selectionOnDrag:ae,selectionMode:fe,deleteKeyCode:re,multiSelectionKeyCode:je,panActivationKeyCode:xe,zoomActivationKeyCode:ve,onlyRenderVisibleElements:qe,defaultViewport:Ei,translateExtent:Se,minZoom:se,maxZoom:pe,preventScrolling:_e,zoomOnScroll:En,zoomOnPinch:kt,zoomOnDoubleClick:In,panOnScroll:ht,panOnScrollSpeed:Ot,panOnScrollMode:Qe,panOnDrag:en,onPaneClick:mu,onPaneMouseEnter:Ur,onPaneMouseMove:Vr,onPaneMouseLeave:Fr,onPaneScroll:Zn,onPaneContextMenu:Gr,paneClickDistance:cr,nodeClickDistance:gu,onSelectionContextMenu:q,onSelectionStart:Y,onSelectionEnd:Q,onReconnect:Jo,onReconnectStart:ur,onReconnectEnd:yu,onEdgeContextMenu:Bs,onEdgeDoubleClick:Hs,onEdgeMouseEnter:$s,onEdgeMouseMove:Ko,onEdgeMouseLeave:ea,reconnectRadius:Ps,defaultMarkerColor:Bt,noDragClassName:Et,noWheelClassName:Rt,noPanClassName:Jn,rfId:hr,disableKeyboardA11y:ki,nodeExtent:$e,viewport:Xr,onViewportChange:Qr}),u.jsx(rA,{nodes:e,edges:t,defaultNodes:i,defaultEdges:o,onConnect:b,onConnectStart:w,onConnectEnd:N,onClickConnectStart:C,onClickConnectEnd:S,nodesDraggable:ft,autoPanOnNodeFocus:Kt,nodesConnectable:_t,nodesFocusable:Pt,edgesFocusable:Qn,edgesReconnectable:Wn,elementsSelectable:Nt,elevateNodesOnSelect:ji,elevateEdgesOnSelect:Ci,minZoom:se,maxZoom:pe,nodeExtent:$e,onNodesChange:qs,onEdgesChange:Bn,snapToGrid:Ee,snapGrid:De,connectionMode:B,translateExtent:Se,connectOnClick:xu,defaultEdgeOptions:ta,fitView:Yr,fitViewOptions:Us,onNodesDelete:I,onEdgesDelete:z,onDelete:U,onNodeDragStart:H,onNodeDrag:V,onNodeDragStop:G,onSelectionDrag:P,onSelectionDragStart:M,onSelectionDragStop:O,onMove:m,onMoveStart:g,onMoveEnd:v,noPanClassName:Jn,nodeOrigin:Nn,rfId:hr,autoPanOnConnect:Ti,autoPanOnNodeDrag:gt,autoPanSpeed:Fs,onError:Ai,connectionRadius:Gs,isValidConnection:Kn,selectNodesOnDrag:Ue,nodeDragThreshold:Ys,connectionDragThreshold:bu,onBeforeDelete:D,debug:wu,ariaLabelConfig:Qs,zIndexMode:fr}),u.jsx(eA,{onSelectionChange:Z}),Is,u.jsx(QT,{proOptions:dr,position:Vs}),u.jsx(XT,{rfId:hr,disableKeyboardA11y:ki})]})})}var kM=W0(CM);const TM=e=>e.domNode?.querySelector(".react-flow__edgelabel-renderer");function AM({children:e}){const t=Be(TM);return t?Th.createPortal(e,t):null}function bw(){const e=st();return T.useCallback(t=>{const{domNode:i,updateNodeInternals:o}=e.getState(),s=Array.isArray(t)?t:[t],l=new Map;s.forEach(c=>{const f=i?.querySelector(`.react-flow__node[data-id="${c}"]`);f&&l.set(c,{id:c,nodeElement:f,force:!0})}),requestAnimationFrame(()=>o(l,{triggerFitView:!1}))},[])}const MM=e=>({x:e.transform[0],y:e.transform[1],zoom:e.transform[2]});function DM(){return Be(MM,at)}function _M({dimensions:e,lineWidth:t,variant:i,className:o}){return u.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:St(["react-flow__background-pattern",i,o])})}function OM({radius:e,className:t}){return u.jsx("circle",{cx:e,cy:e,r:e,className:St(["react-flow__background-pattern","dots",t])})}var ar;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(ar||(ar={}));const RM={[ar.Dots]:1,[ar.Lines]:1,[ar.Cross]:6},LM=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function ww({id:e,variant:t=ar.Dots,gap:i=20,size:o,lineWidth:s=1,offset:l=0,color:c,bgColor:f,style:h,className:p,patternClassName:m}){const g=T.useRef(null),{transform:v,patternId:b}=Be(LM,at),w=o||RM[t],N=t===ar.Dots,C=t===ar.Cross,S=Array.isArray(i)?i:[i,i],k=[S[0]*v[2]||1,S[1]*v[2]||1],j=w*v[2],_=Array.isArray(l)?l:[l,l],$=C?[j,j]:k,A=[_[0]*v[2]||1+$[0]/2,_[1]*v[2]||1+$[1]/2],H=`${b}${e||""}`;return u.jsxs("svg",{className:St(["react-flow__background",p]),style:{...h,...au,"--xy-background-color-props":f,"--xy-background-pattern-color-props":c},ref:g,"data-testid":"rf__background",children:[u.jsx("pattern",{id:H,x:v[0]%k[0],y:v[1]%k[1],width:k[0],height:k[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${A[0]},-${A[1]})`,children:N?u.jsx(OM,{radius:j/2,className:m}):u.jsx(_M,{dimensions:$,lineWidth:s,variant:t,className:m})}),u.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${H})`})]})}ww.displayName="Background";const zM=T.memo(ww);function IM(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:u.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function BM(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:u.jsx("path",{d:"M0 0h32v4.2H0z"})})}function HM(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:u.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function $M(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:u.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function PM(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:u.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function pc({children:e,className:t,...i}){return u.jsx("button",{type:"button",className:St(["react-flow__controls-button",t]),...i,children:e})}const qM=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function Sw({style:e,showZoom:t=!0,showFitView:i=!0,showInteractive:o=!0,fitViewOptions:s,onZoomIn:l,onZoomOut:c,onFitView:f,onInteractiveChange:h,className:p,children:m,position:g="bottom-left",orientation:v="vertical","aria-label":b}){const w=st(),{isInteractive:N,minZoomReached:C,maxZoomReached:S,ariaLabelConfig:k}=Be(qM,at),{zoomIn:j,zoomOut:_,fitView:$}=ou(),A=()=>{j(),l?.()},H=()=>{_(),c?.()},V=()=>{$(s),f?.()},G=()=>{w.setState({nodesDraggable:!N,nodesConnectable:!N,elementsSelectable:!N}),h?.(!N)},I=v==="horizontal"?"horizontal":"vertical";return u.jsxs(ru,{className:St(["react-flow__controls",I,p]),position:g,style:e,"data-testid":"rf__controls","aria-label":b??k["controls.ariaLabel"],children:[t&&u.jsxs(u.Fragment,{children:[u.jsx(pc,{onClick:A,className:"react-flow__controls-zoomin",title:k["controls.zoomIn.ariaLabel"],"aria-label":k["controls.zoomIn.ariaLabel"],disabled:S,children:u.jsx(IM,{})}),u.jsx(pc,{onClick:H,className:"react-flow__controls-zoomout",title:k["controls.zoomOut.ariaLabel"],"aria-label":k["controls.zoomOut.ariaLabel"],disabled:C,children:u.jsx(BM,{})})]}),i&&u.jsx(pc,{className:"react-flow__controls-fitview",onClick:V,title:k["controls.fitView.ariaLabel"],"aria-label":k["controls.fitView.ariaLabel"],children:u.jsx(HM,{})}),o&&u.jsx(pc,{className:"react-flow__controls-interactive",onClick:G,title:k["controls.interactive.ariaLabel"],"aria-label":k["controls.interactive.ariaLabel"],children:N?u.jsx(PM,{}):u.jsx($M,{})}),m]})}Sw.displayName="Controls";T.memo(Sw);function UM({id:e,x:t,y:i,width:o,height:s,style:l,color:c,strokeColor:f,strokeWidth:h,className:p,borderRadius:m,shapeRendering:g,selected:v,onClick:b}){const{background:w,backgroundColor:N}=l||{},C=c||w||N;return u.jsx("rect",{className:St(["react-flow__minimap-node",{selected:v},p]),x:t,y:i,rx:m,ry:m,width:o,height:s,style:{fill:C,stroke:f,strokeWidth:h},shapeRendering:g,onClick:b?S=>b(S,e):void 0})}const VM=T.memo(UM),FM=e=>e.nodes.map(t=>t.id),Gf=e=>e instanceof Function?e:()=>e;function GM({nodeStrokeColor:e,nodeColor:t,nodeClassName:i="",nodeBorderRadius:o=5,nodeStrokeWidth:s,nodeComponent:l=VM,onClick:c}){const f=Be(FM,at),h=Gf(t),p=Gf(e),m=Gf(i),g=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return u.jsx(u.Fragment,{children:f.map(v=>u.jsx(XM,{id:v,nodeColorFunc:h,nodeStrokeColorFunc:p,nodeClassNameFunc:m,nodeBorderRadius:o,nodeStrokeWidth:s,NodeComponent:l,onClick:c,shapeRendering:g},v))})}function YM({id:e,nodeColorFunc:t,nodeStrokeColorFunc:i,nodeClassNameFunc:o,nodeBorderRadius:s,nodeStrokeWidth:l,shapeRendering:c,NodeComponent:f,onClick:h}){const{node:p,x:m,y:g,width:v,height:b}=Be(w=>{const{internals:N}=w.nodeLookup.get(e),C=N.userNode,{x:S,y:k}=N.positionAbsolute,{width:j,height:_}=wi(C);return{node:C,x:S,y:k,width:j,height:_}},at);return!p||p.hidden||!w0(p)?null:u.jsx(f,{x:m,y:g,width:v,height:b,style:p.style,selected:!!p.selected,className:o(p),color:t(p),borderRadius:s,strokeColor:i(p),strokeWidth:l,shapeRendering:c,onClick:h,id:p.id})}const XM=T.memo(YM);var QM=T.memo(GM);const WM=200,ZM=150,JM=e=>!e.hidden,KM=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?b0(As(e.nodeLookup,{filter:JM}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},e2="react-flow__minimap-desc";function Nw({style:e,className:t,nodeStrokeColor:i,nodeColor:o,nodeClassName:s="",nodeBorderRadius:l=5,nodeStrokeWidth:c,nodeComponent:f,bgColor:h,maskColor:p,maskStrokeColor:m,maskStrokeWidth:g,position:v="bottom-right",onClick:b,onNodeClick:w,pannable:N=!1,zoomable:C=!1,ariaLabel:S,inversePan:k,zoomStep:j=1,offsetScale:_=5}){const $=st(),A=T.useRef(null),{boundingRect:H,viewBB:V,rfId:G,panZoom:I,translateExtent:z,flowWidth:U,flowHeight:Z,ariaLabelConfig:M}=Be(KM,at),P=e?.width??WM,O=e?.height??ZM,q=H.width/P,Y=H.height/O,Q=Math.max(q,Y),D=Q*P,B=Q*O,F=_*Q,L=H.x-(D-H.width)/2-F,ie=H.y-(B-H.height)/2-F,te=D+F*2,re=B+F*2,de=`${e2}-${G}`,ae=T.useRef(0),fe=T.useRef();ae.current=Q,T.useEffect(()=>{if(A.current&&I)return fe.current=mT({domNode:A.current,panZoom:I,getTransform:()=>$.getState().transform,getViewScale:()=>ae.current}),()=>{fe.current?.destroy()}},[I]),T.useEffect(()=>{fe.current?.update({translateExtent:z,width:U,height:Z,inversePan:k,pannable:N,zoomStep:j,zoomable:C})},[N,C,k,j,z,U,Z]);const xe=b?Ee=>{const[De,qe]=fe.current?.pointer(Ee)||[0,0];b(Ee,{x:De,y:qe})}:void 0,je=w?T.useCallback((Ee,De)=>{const qe=$.getState().nodeLookup.get(De).internals.userNode;w(Ee,qe)},[]):void 0,ve=S??M["minimap.ariaLabel"];return u.jsx(ru,{position:v,style:{...e,"--xy-minimap-background-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-background-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-stroke-color-props":typeof m=="string"?m:void 0,"--xy-minimap-mask-stroke-width-props":typeof g=="number"?g*Q:void 0,"--xy-minimap-node-background-color-props":typeof o=="string"?o:void 0,"--xy-minimap-node-stroke-color-props":typeof i=="string"?i:void 0,"--xy-minimap-node-stroke-width-props":typeof c=="number"?c:void 0},className:St(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:u.jsxs("svg",{width:P,height:O,viewBox:`${L} ${ie} ${te} ${re}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":de,ref:A,onClick:xe,children:[ve&&u.jsx("title",{id:de,children:ve}),u.jsx(QM,{onClick:je,nodeColor:o,nodeStrokeColor:i,nodeBorderRadius:l,nodeClassName:s,nodeStrokeWidth:c,nodeComponent:f}),u.jsx("path",{className:"react-flow__minimap-mask",d:`M${L-F},${ie-F}h${te+F*2}v${re+F*2}h${-te-F*2}z
        M${V.x},${V.y}h${V.width}v${V.height}h${-V.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}Nw.displayName="MiniMap";const t2=T.memo(Nw),n2=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,i2={[Yo.Line]:"right",[Yo.Handle]:"bottom-right"};function r2({nodeId:e,position:t,variant:i=Yo.Handle,className:o,style:s=void 0,children:l,color:c,minWidth:f=10,minHeight:h=10,maxWidth:p=Number.MAX_VALUE,maxHeight:m=Number.MAX_VALUE,keepAspectRatio:g=!1,resizeDirection:v,autoScale:b=!0,shouldResize:w,onResizeStart:N,onResize:C,onResizeEnd:S}){const k=Pr(),j=typeof e=="string"?e:k,_=st(),$=T.useRef(null),A=i===Yo.Handle,H=Be(T.useCallback(n2(A&&b),[A,b]),at),V=T.useRef(null),G=t??i2[i];T.useEffect(()=>{if(!(!$.current||!j))return V.current||(V.current=AT({domNode:$.current,nodeId:j,getStoreItems:()=>{const{nodeLookup:z,transform:U,snapGrid:Z,snapToGrid:M,nodeOrigin:P,domNode:O}=_.getState();return{nodeLookup:z,transform:U,snapGrid:Z,snapToGrid:M,nodeOrigin:P,paneDomNode:O}},onChange:(z,U)=>{const{triggerNodeChanges:Z,nodeLookup:M,parentLookup:P,nodeOrigin:O}=_.getState(),q=[],Y={x:z.x,y:z.y},Q=M.get(j);if(Q&&Q.expandParent&&Q.parentId){const D=Q.origin??O,B=z.width??Q.measured.width??0,F=z.height??Q.measured.height??0,L={id:Q.id,parentId:Q.parentId,rect:{width:B,height:F,...S0({x:z.x??Q.position.x,y:z.y??Q.position.y},{width:B,height:F},Q.parentId,M,D)}},ie=cp([L],M,P,O);q.push(...ie),Y.x=z.x?Math.max(D[0]*B,z.x):void 0,Y.y=z.y?Math.max(D[1]*F,z.y):void 0}if(Y.x!==void 0&&Y.y!==void 0){const D={id:j,type:"position",position:{...Y}};q.push(D)}if(z.width!==void 0&&z.height!==void 0){const B={id:j,type:"dimensions",resizing:!0,setAttributes:v?v==="horizontal"?"width":"height":!0,dimensions:{width:z.width,height:z.height}};q.push(B)}for(const D of U){const B={...D,type:"position"};q.push(B)}Z(q)},onEnd:({width:z,height:U})=>{const Z={id:j,type:"dimensions",resizing:!1,dimensions:{width:z,height:U}};_.getState().triggerNodeChanges([Z])}})),V.current.update({controlPosition:G,boundaries:{minWidth:f,minHeight:h,maxWidth:p,maxHeight:m},keepAspectRatio:g,resizeDirection:v,onResizeStart:N,onResize:C,onResizeEnd:S,shouldResize:w}),()=>{V.current?.destroy()}},[G,f,h,p,m,g,N,C,S,w]);const I=G.split("-");return u.jsx("div",{className:St(["react-flow__resize-control","nodrag",...I,i,o]),ref:$,style:{...s,scale:H,...c&&{[A?"backgroundColor":"borderColor"]:c}},children:l})}T.memo(r2);const Tv=e=>{let t;const i=new Set,o=(p,m)=>{const g=typeof p=="function"?p(t):p;if(!Object.is(g,t)){const v=t;t=m??(typeof g!="object"||g===null)?g:Object.assign({},t,g),i.forEach(b=>b(t,v))}},s=()=>t,f={setState:o,getState:s,getInitialState:()=>h,subscribe:p=>(i.add(p),()=>i.delete(p))},h=t=e(o,s,f);return f},o2=(e=>e?Tv(e):Tv),a2=e=>e;function s2(e,t=a2){const i=Dn.useSyncExternalStore(e.subscribe,Dn.useCallback(()=>t(e.getState()),[e,t]),Dn.useCallback(()=>t(e.getInitialState()),[e,t]));return Dn.useDebugValue(i),i}const Av=e=>{const t=o2(e),i=o=>s2(t,o);return Object.assign(i,t),i},su=(e=>e?Av(e):Av),Ce=su((e,t)=>({workflowId:null,workflowName:"Untitled Workflow",nodes:[],edges:[],selectedNodeId:null,configOpen:!1,setNodes:i=>e({nodes:i}),setEdges:i=>e({edges:i}),onNodesChange:i=>{e({nodes:X0(i,t().nodes)})},onEdgesChange:i=>{e({edges:Q0(i,t().edges)})},onConnect:i=>{const o={...i,type:"animated"};e({edges:A0(o,t().edges)})},addNode:i=>{e({nodes:[...t().nodes,i]})},updateNode:(i,o)=>{e({nodes:t().nodes.map(s=>s.id===i?{...s,data:{...s.data,...o}}:s)})},deleteNode:i=>{e({nodes:t().nodes.filter(o=>o.id!==i),edges:t().edges.filter(o=>o.source!==i&&o.target!==i)})},setSelectedNode:i=>e({selectedNodeId:i}),setConfigOpen:i=>e({configOpen:i}),openConfig:i=>e({selectedNodeId:i,configOpen:!0}),closeConfig:()=>e({configOpen:!1}),clearWorkflow:()=>e({nodes:[],edges:[],selectedNodeId:null,configOpen:!1}),setWorkflowName:i=>e({workflowName:i}),getWorkflowData:()=>({id:t().workflowId,name:t().workflowName,nodes:t().nodes,edges:t().edges}),loadWorkflow:i=>{e({workflowId:i.id||Date.now().toString(),workflowName:i.name||"Untitled Workflow",nodes:i.nodes||[],edges:i.edges||[],selectedNodeId:null})}})),Xe=su((e,t)=>({isRunning:!1,isPaused:!1,isDebugMode:!1,currentNodeId:null,activeSupportingNodeIds:[],executionPath:[],logs:[],nodeResults:{},edgeSnapshots:{},artifacts:[],startTime:null,endTime:null,startExecution:()=>{e({isRunning:!0,isPaused:!1,startTime:Date.now(),endTime:null,logs:[],nodeResults:{},executionPath:[],currentNodeId:null,activeSupportingNodeIds:[]})},stopExecution:()=>{e({isRunning:!1,isPaused:!1,endTime:Date.now(),currentNodeId:null,activeSupportingNodeIds:[]})},setCurrentNode:i=>{const o=t().executionPath;e({currentNodeId:i,executionPath:i?[...o,i]:o,activeSupportingNodeIds:[]})},setActiveSupportingNodes:i=>{e({activeSupportingNodeIds:i||[]})},setNodeResult:(i,o)=>{e({nodeResults:{...t().nodeResults,[i]:o}})},addEdgeSnapshot:(i,o)=>{const s=t().edgeSnapshots,l=s[i]||[],c={timestamp:Date.now(),data:o,preview:JSON.stringify(o,null,2).slice(0,500)},f=[...l,c].slice(-5);e({edgeSnapshots:{...s,[i]:f}})},getEdgeSnapshots:i=>t().edgeSnapshots[i]||[],getLastEdgeSnapshot:i=>{const o=t().edgeSnapshots[i];return o?.[o.length-1]||null},clearEdgeSnapshots:()=>e({edgeSnapshots:{}}),addLog:i=>{const o={id:Date.now().toString()+Math.random().toString(36).slice(2,9),timestamp:new Date().toISOString(),...i};e({logs:[...t().logs,o]})},addArtifact:i=>{e({artifacts:[...t().artifacts,i]})},clearLogs:()=>e({logs:[]}),setDebugMode:i=>e({isDebugMode:i}),getExecutionDuration:()=>{const{startTime:i,endTime:o,isRunning:s}=t();return i?(s?Date.now():o||Date.now())-i:0},reset:()=>{e({isRunning:!1,isPaused:!1,isDebugMode:!1,currentNodeId:null,executionPath:[],logs:[],nodeResults:{},edgeSnapshots:{},artifacts:[],startTime:null,endTime:null})}})),Xo=su((e,t)=>({toasts:[],addToast:(i,o="info",s=3e3)=>{const l=Date.now().toString()+Math.random().toString(36).slice(2,6),c={id:l,message:i,type:o,duration:s};return e({toasts:[...t().toasts,c]}),s>0&&setTimeout(()=>{t().removeToast(l)},s),l},removeToast:i=>{e({toasts:t().toasts.filter(o=>o.id!==i)})},success:(i,o)=>t().addToast(i,"success",o),error:(i,o)=>t().addToast(i,"error",o??5e3),warning:(i,o)=>t().addToast(i,"warning",o),info:(i,o)=>t().addToast(i,"info",o)})),Hr={trigger:{name:"Triggers",color:"#00c853",description:"Start a workflow execution"},action:{name:"Actions",color:"#2979ff",description:"Perform operations on data"},logic:{name:"Logic",color:"#ffab00",description:"Control workflow flow"},ai:{name:"AI",color:"#e040fb",description:"AI-powered operations"},aiTool:{name:"AI Tools",color:"#f59e0b",description:"Tools callable by AI Agents"}},Si={manualTrigger:{type:"manualTrigger",category:"trigger",name:"Manual Trigger",description:"Manually start the workflow",icon:"",inputs:0,outputs:1,defaultData:{label:"Manual Trigger"}},scheduleTrigger:{type:"scheduleTrigger",category:"trigger",name:"Schedule Trigger",description:"Run on a schedule (cron-like)",icon:"",inputs:1,outputs:1,defaultData:{label:"Schedule",schedule:"*/5 * * * *",enabled:!1}},webhookTrigger:{type:"webhookTrigger",category:"trigger",name:"Webhook Trigger",description:"Receive external HTTP triggers",icon:"",inputs:0,outputs:1,defaultData:{label:"Webhook",method:"POST",endpoint:"/webhook/default",authRequired:!1}},errorTrigger:{type:"errorTrigger",category:"trigger",name:"Error Trigger",description:"Trigger when any node fails",icon:"",inputs:0,outputs:1,defaultData:{label:"On Error",watchAll:!0,specificNodes:[],retryEnabled:!1,retryCount:3}},browserEventTrigger:{type:"browserEventTrigger",category:"trigger",name:"Browser Event",description:"Trigger on browser events",icon:"",inputs:0,outputs:1,defaultData:{label:"Browser Event",eventType:"focus",selector:"",urlPattern:"",interval:1e3}},output:{type:"output",category:"trigger",name:"Output",description:"Workflow output - displays or saves result",icon:"",inputs:1,outputs:0,defaultData:{label:"Output",outputType:"console",filename:"output.txt",formatJson:!1}},codeExecutor:{type:"codeExecutor",category:"action",name:"Code",description:"Execute JavaScript code",icon:"",inputs:1,outputs:1,defaultData:{label:"Code",code:"// Access input data via `input`\n// Return output data\nreturn input;"}},setVariable:{type:"setVariable",category:"action",name:"Set Variable",description:"Set or transform data",icon:"",inputs:1,outputs:1,defaultData:{label:"Set Variable",variableName:"data",value:"",mode:"set"}},httpRequest:{type:"httpRequest",category:"aiTool",name:"HTTP Request",description:"Make HTTP requests to APIs",icon:"",inputs:0,outputs:0,isProvider:!0,defaultData:{label:"HTTP Request",method:"GET",url:"",headers:{},body:"",timeout:3e4,description:"Perform HTTP request. Args: { url, method, body }"}},fileSystem:{type:"fileSystem",category:"aiTool",name:"File System",description:"Read/write local files (FSA API)",icon:"",inputs:0,outputs:0,isProvider:!0,defaultData:{label:"File",mode:"read",filename:"",fileTypes:[],description:"Read or write files. Args: { filename, content, mode }"}},localStorage:{type:"localStorage",category:"action",name:"Local Storage",description:"Read/write to IndexedDB or LocalStorage",icon:"",inputs:1,outputs:1,defaultData:{label:"Storage",mode:"get",storageType:"indexedDB",key:""}},ifElse:{type:"ifElse",category:"logic",name:"If/Else",description:"Branch based on conditions",icon:"",inputs:1,outputs:2,defaultData:{label:"If/Else",condition:"",operator:"equals",compareValue:""}},loop:{type:"loop",category:"logic",name:"Loop",description:"Iterate over array items or repeat N times",icon:"",inputs:1,outputs:2,defaultData:{label:"Loop",iterations:1,itemsPath:"items",maxIterations:100}},switchNode:{type:"switchNode",category:"logic",name:"Switch",description:"Route to different outputs",icon:"",inputs:1,outputs:4,defaultData:{label:"Switch",field:"",routes:[{value:"",outputIndex:0},{value:"",outputIndex:1}],defaultOutput:3}},merge:{type:"merge",category:"logic",name:"Merge",description:"Combine multiple inputs (wait for all or first)",icon:"",inputs:2,outputs:1,defaultData:{label:"Merge",mode:"wait",inputCount:2,aggregator:"array"}},semanticRouter:{type:"semanticRouter",category:"ai",name:"Semantic Router",description:"Route input to outputs based on semantic classification",icon:"",inputs:1,outputs:4,defaultData:{label:"Router",classificationMode:"keyword",routes:[{id:"route-0",label:"General",keywords:["general","other"]},{id:"route-1",label:"Technical",keywords:["code","programming","bug"]},{id:"route-2",label:"Creative",keywords:["story","write","creative"]}]}},evaluator:{type:"evaluator",category:"ai",name:"Evaluator",description:"Validate output against schema for self-correction loops",icon:"",inputs:1,outputs:2,defaultData:{label:"Evaluator",evaluationType:"schema",maxRetries:3,schema:null,regexPattern:""}},groupNode:{type:"groupNode",category:"logic",name:"Group",description:"Collapsible container for grouping nodes",icon:"",inputs:1,outputs:1,defaultData:{label:"Node Group",collapsed:!1,childNodeIds:[],width:300,height:200,color:"#6366f1"}},chatModel:{type:"chatModel",category:"ai",name:"Chat Model",description:"AI model provider for agents",icon:"",inputs:0,outputs:0,isProvider:!0,defaultData:{label:"Chat Model",provider:"webllm",modelId:"gemma-2-2b-it-q4f16_1-MLC",modelName:"Gemma 2 2B",temperature:.7,maxTokens:2e3}},aiAgent:{type:"aiAgent",category:"ai",name:"AI Agent",description:"WebLLM-powered AI agent with ReAct",icon:"",inputs:1,outputs:1,defaultData:{label:"AI Agent",systemPrompt:"",modelId:"gemma-2-2b-it-q4f16_1-MLC",temperature:.7,maxTokens:2e3,tools:[]}},vectorMemory:{type:"vectorMemory",category:"ai",name:"Vector Memory",description:"Store and query local vector memory",icon:"",inputs:1,outputs:1,isProvider:!0,defaultData:{label:"Memory",mode:"query",namespace:"default",topK:5,minScore:.3}},waitForApproval:{type:"waitForApproval",category:"ai",name:"Wait for Approval",description:"Pause workflow for human approval",icon:"",inputs:1,outputs:2,defaultData:{label:"Approval",title:"Approval Required",message:"",timeout:0,notifyBrowser:!0}},subWorkflow:{type:"subWorkflow",category:"ai",name:"Sub-Workflow",description:"Execute another workflow as subroutine",icon:"",inputs:1,outputs:1,defaultData:{label:"Sub-Workflow",workflowId:"",workflowName:"",passInput:!0,async:!1}},textToSpeech:{type:"textToSpeech",category:"aiTool",name:"Text to Speech",description:"Convert text to audio using Web Speech API",icon:"",inputs:0,outputs:0,isProvider:!0,defaultData:{label:"Text to Speech",provider:"webSpeech",voice:"default",speed:1,pitch:1,autoPlay:!0}},imageGeneration:{type:"imageGeneration",category:"aiTool",name:"Image Generation",description:"Generate images using AI models",icon:"",inputs:1,outputs:1,defaultData:{label:"Generate Image",provider:"local",model:"stable-diffusion",size:"512x512",negativePrompt:"",seed:null,steps:20}},pythonExecutor:{type:"pythonExecutor",category:"aiTool",name:"Python Executor",description:"Run Python code locally using Pyodide",icon:"",inputs:1,outputs:1,defaultData:{label:"Python",code:`# Access input via 'input' variable
result = input`,packages:[],timeout:3e4}}};function l2(){const e={};return Object.values(Hr).forEach(t=>{e[t.name]=[]}),Object.values(Si).forEach(t=>{const i=Hr[t.category];i&&e[i.name].push(t)}),e}function tr(e,t){const i=Si[e];if(!i)throw new Error(`Unknown node type: ${e}`);return{id:`${e}-${Date.now()}-${Math.random().toString(36).slice(2,9)}`,type:e,position:t,data:{...i.defaultData}}}function lu(e){const t=Si[e];if(!t)return"#666666";const i=Hr[t.category];return i?i.color:"#666666"}function c2(e,t,i){const{source:o,target:s}=e;if(o===s)return!1;const l=t.find(v=>v.id===o),c=t.find(v=>v.id===s);if(!l||!c||Si[c.type]?.category==="trigger"&&c.type!=="scheduleTrigger"&&c.type!=="output"||i.find(v=>v.source===o&&v.target===s))return!1;const p=l.type==="loop";if(i.find(v=>v.source===s&&v.target===o)&&!p)return!1;const{targetHandle:g}=e;return!(g==="model-slot"&&l.type!=="chatModel"||g==="memory-slot"&&l.type!=="vectorMemory"||g==="tool-slot"&&!["codeExecutor","pythonExecutor","httpRequest","pythonTool","textToSpeech","imageGeneration","aiAgent","fileSystem"].includes(l.type))}function u2(e){return e.filter(t=>Si[t.type]?.category==="trigger")}function d2({x:e,y:t,type:i,onClose:o,onAction:s}){const l=i==="node"?[{id:"duplicate",label:"Duplicate",icon:"",shortcut:"Ctrl+D"},{id:"copy",label:"Copy",icon:"",shortcut:"Ctrl+C"},{id:"cut",label:"Cut",icon:"",shortcut:"Ctrl+X"},{id:"divider1",divider:!0},{id:"delete",label:"Delete",icon:"",shortcut:"Del",danger:!0}]:i==="insert"?[{id:"addTrigger",label:"Add Trigger",icon:""},{id:"addHTTP",label:"Add HTTP Request",icon:""},{id:"addAI",label:"Add AI Agent",icon:""},{id:"codeExecutor",label:"Add Code Executor",icon:""},{id:"setVariable",label:"Add Set Variable",icon:""},{id:"divider1",divider:!0},{id:"ifElse",label:"Add If/Else",icon:""},{id:"textToSpeech",label:"Add Text to Speech",icon:""},{id:"output",label:"Add Output",icon:""}]:[{id:"addTrigger",label:"Add Trigger",icon:""},{id:"addHTTP",label:"Add HTTP Request",icon:""},{id:"addAI",label:"Add AI Agent",icon:""},{id:"divider1",divider:!0},{id:"paste",label:"Paste",icon:"",shortcut:"Ctrl+V"},{id:"selectAll",label:"Select All",icon:"",shortcut:"Ctrl+A"},{id:"divider2",divider:!0},{id:"fitView",label:"Fit View",icon:""},{id:"zoomIn",label:"Zoom In",icon:"",shortcut:"Ctrl++"},{id:"zoomOut",label:"Zoom Out",icon:"",shortcut:"Ctrl+-"}],c=f=>{s(f),o()};return u.jsx("div",{className:"context-menu",style:{left:e,top:t},onClick:f=>f.stopPropagation(),children:l.map(f=>f.divider?u.jsx("div",{className:"context-menu-divider"},f.id):u.jsxs("button",{className:`context-menu-item ${f.danger?"danger":""}`,onClick:()=>c(f.id),children:[u.jsx("span",{className:"menu-icon",children:f.icon}),u.jsx("span",{className:"menu-label",children:f.label}),f.shortcut&&u.jsx("span",{className:"menu-shortcut",children:f.shortcut})]},f.id))})}const f2=T.memo(d2),mc={circle:"circle",diamond:"diamond"},Mv={workflow:{id:"workflow",label:"Data",color:"#888",strokeDasharray:"none",shape:mc.circle,description:"Standard data flow connection"},model:{id:"model",label:"Chat Model",color:"#6366f1",strokeDasharray:"5,5",shape:mc.diamond,description:"AI model provider connection",required:!0,warningColor:"#ef4444"},memory:{id:"memory",label:"Memory",color:"#10b981",strokeDasharray:"5,5",shape:mc.diamond,description:"Memory/context connection",required:!1},tool:{id:"tool",label:"Tool",color:"#f59e0b",strokeDasharray:"5,5",shape:mc.diamond,description:"Tool/function connection",multiple:!0,required:!1}},h2={resourceSlots:[{id:"model-slot",type:"model",position:"bottom",label:"Model",shape:"diamond",required:!0},{id:"memory-slot",type:"memory",position:"bottom",label:"Memory",shape:"diamond",required:!1},{id:"tool-slot",type:"tool",position:"bottom",label:"Tools",shape:"diamond",multiple:!0,required:!1}]},p2="modulepreload",m2=function(e){return"/"+e},Dv={},g2=function(t,i,o){let s=Promise.resolve();if(i&&i.length>0){let h=function(p){return Promise.all(p.map(m=>Promise.resolve(m).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),f=c?.nonce||c?.getAttribute("nonce");s=h(i.map(p=>{if(p=m2(p),p in Dv)return;Dv[p]=!0;const m=p.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${g}`))return;const v=document.createElement("link");if(v.rel=m?"stylesheet":p2,m||(v.as="script"),v.crossOrigin="",v.href=p,f&&v.setAttribute("nonce",f),document.head.appendChild(v),m)return new Promise((b,w)=>{v.addEventListener("load",b),v.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(c){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=c,window.dispatchEvent(f),!f.defaultPrevented)throw c}return s.then(c=>{for(const f of c||[])f.status==="rejected"&&l(f.reason);return t().catch(l)})},y2=[{id:"gemma-2-2b-it-q4f16_1-MLC",name:"Gemma 2 2B",size:"~1.4GB",description:"Google's fast, lightweight model (Recommended)",category:"recommended"},{id:"Qwen2.5-1.5B-Instruct-q4f16_1-MLC",name:"Qwen 2.5 1.5B",size:"~1GB",description:"Alibaba's efficient small model",category:"recommended"},{id:"SmolLM2-1.7B-Instruct-q4f16_1-MLC",name:"SmolLM2 1.7B",size:"~1.1GB",description:"HuggingFace's compact model",category:"recommended"},{id:"Qwen2.5-0.5B-Instruct-q4f16_1-MLC",name:"Qwen 2.5 0.5B",size:"~350MB",description:"Ultra-light Qwen for basic tasks",category:"qwen"},{id:"Qwen2.5-3B-Instruct-q4f16_1-MLC",name:"Qwen 2.5 3B",size:"~2GB",description:"Balanced Qwen with good reasoning",category:"qwen"},{id:"Qwen2.5-7B-Instruct-q4f16_1-MLC",name:"Qwen 2.5 7B",size:"~4.5GB",description:"Powerful Qwen for complex tasks",category:"qwen"},{id:"Qwen2.5-Coder-1.5B-Instruct-q4f16_1-MLC",name:"Qwen 2.5 Coder 1.5B",size:"~1GB",description:"Optimized for code generation",category:"qwen"},{id:"Qwen2.5-Coder-7B-Instruct-q4f16_1-MLC",name:"Qwen 2.5 Coder 7B",size:"~4.5GB",description:"Advanced coding assistant",category:"qwen"},{id:"Phi-3.5-mini-instruct-q4f16_1-MLC",name:"Phi-3.5 Mini",size:"~2.4GB",description:"Microsoft's balanced 3.8B model",category:"medium"},{id:"Llama-3.2-3B-Instruct-q4f16_1-MLC",name:"Llama 3.2 3B",size:"~2GB",description:"Meta's capable small model",category:"medium"},{id:"Mistral-7B-Instruct-v0.3-q4f16_1-MLC",name:"Mistral 7B v0.3",size:"~4.5GB",description:"Mistral AI's flagship model",category:"medium"},{id:"TinyLlama-1.1B-Chat-v1.0-q4f16_1-MLC",name:"TinyLlama 1.1B",size:"~700MB",description:"Ultra-fast for simple tasks",category:"tiny"},{id:"SmolLM2-360M-Instruct-q4f16_1-MLC",name:"SmolLM2 360M",size:"~250MB",description:"Smallest practical model",category:"tiny"}];class x2{constructor(){this.worker=null,this.isLoading=!1,this.isReady=!1,this.currentModel=null,this.messageId=0,this.pendingRequests=new Map}static async checkWebGPUSupport(){if(!navigator.gpu)return{supported:!1,reason:"WebGPU not available in this browser"};try{const t=await navigator.gpu.requestAdapter();return t?{supported:!0,adapter:t}:{supported:!1,reason:"No WebGPU adapter found"}}catch(t){return{supported:!1,reason:t.message}}}async downloadModel(t,i=null){return new Promise((o,s)=>{const l=new Worker(new URL("/assets/webllm.worker-Ch0B_N4r.js",import.meta.url),{type:"module"}),c=this.getNextMessageId();l.onmessage=f=>{const{type:h,id:p,progress:m,text:g,error:v}=f.data;if(!(p!==c&&h!=="INIT_PROGRESS"))switch(h){case"INIT_PROGRESS":i&&i({progress:m,text:g});break;case"INIT_COMPLETE":l.terminate(),o(!0);break;case"ERROR":l.terminate(),s(new Error(v));break}},l.onerror=f=>{l.terminate(),s(f)},l.postMessage({type:"INIT",id:c,payload:{modelId:t}})})}async initialize(t=y2[0].id,i=null){if(this.isLoading)throw new Error("Model is already loading");return this.isLoading=!0,new Promise((o,s)=>{this.worker=new Worker(new URL("/assets/webllm.worker-Ch0B_N4r.js",import.meta.url),{type:"module"});const l=this.getNextMessageId();this.worker.onmessage=c=>{const{type:f,id:h,progress:p,text:m,timeElapsed:g,error:v}=c.data;if(!(h!==l&&f!=="INIT_PROGRESS"))switch(f){case"INIT_PROGRESS":i&&i({progress:p,text:m,timeElapsed:g});break;case"INIT_COMPLETE":this.isReady=!0,this.isLoading=!1,this.currentModel=t,o(!0);break;case"ERROR":this.isLoading=!1,s(new Error(v));break}},this.worker.onerror=c=>{this.isLoading=!1,s(c)},this.worker.postMessage({type:"INIT",id:l,payload:{modelId:t}})})}async generateWithHistory(t,i=[],o={},s=null){if(!this.isReady||!this.worker)throw new Error("Model not loaded");const{maxTokens:l=4096,temperature:c=1,systemPrompt:f=""}=o,h=this.getNextMessageId(),p=!!s;return new Promise((m,g)=>{const v=setTimeout(()=>{this.worker.removeEventListener("message",b),g(new Error("Model generation timed out (worker unresponsive)"))},6e4),b=w=>{const{type:N,id:C,text:S,token:k,error:j}=w.data;if(C===h)switch((N==="GENERATE_TOKEN"||N==="GENERATE_COMPLETE")&&clearTimeout(v),N){case"GENERATE_TOKEN":s&&s(k,S);break;case"GENERATE_COMPLETE":this.worker.removeEventListener("message",b),m(S);break;case"ERROR":this.worker.removeEventListener("message",b),clearTimeout(v),g(new Error(j));break}};this.worker.addEventListener("message",b),this.worker.postMessage({type:"GENERATE",id:h,payload:{userMessage:t,history:i,maxTokens:l,temperature:c,systemPrompt:f,streaming:p}})})}async resetChat(){if(!this.worker)return;const t=this.getNextMessageId();this.worker.postMessage({type:"RESET",id:t})}async unload(){this.worker&&(this.worker.terminate(),this.worker=null,this.isReady=!1,this.currentModel=null)}getNextMessageId(){return++this.messageId}}const or=new x2,v2="EchoesArtifactsDB",Pc="artifacts",b2=1,w2=()=>new Promise((e,t)=>{const i=indexedDB.open(v2,b2);i.onerror=o=>t("IndexedDB error: "+o.target.error),i.onsuccess=o=>e(o.target.result),i.onupgradeneeded=o=>{const s=o.target.result;if(!s.objectStoreNames.contains(Pc)){const l=s.createObjectStore(Pc,{keyPath:"id"});l.createIndex("executionId","executionId",{unique:!1}),l.createIndex("nodeId","nodeId",{unique:!1}),l.createIndex("timestamp","timestamp",{unique:!1})}}}),S2=async e=>{const t=await w2();return new Promise((i,o)=>{const c=t.transaction([Pc],"readwrite").objectStore(Pc).put(e);c.onsuccess=()=>i(e),c.onerror=f=>o(f.target.error)})};class N2{constructor(){this.storagePrefix="echoes_memory_"}_getKey(t){return`${this.storagePrefix}${t}`}_load(t){try{const i=localStorage.getItem(this._getKey(t));return i?JSON.parse(i):[]}catch(i){return console.error("Memory load error:",i),[]}}_save(t,i){try{localStorage.setItem(this._getKey(t),JSON.stringify(i))}catch(o){console.error("Memory save error:",o)}}_tokenize(t){return t?new Set(t.toLowerCase().replace(/[^\w\s]/g,"").split(/\s+/).filter(i=>i.length>2)):new Set}_similarity(t,i){const o=this._tokenize(t),s=this._tokenize(i);if(o.size===0||s.size===0)return 0;const l=new Set([...o].filter(f=>s.has(f))),c=new Set([...o,...s]);return l.size/c.size}async upsert(t="default",i){const o=this._load(t),s=Date.now(),l=Array.isArray(i)?i:[i];let c=0,f=0;return l.forEach(h=>{h.id||(h.id=`mem_${s}_${Math.random().toString(36).substr(2,9)}`);const p=o.findIndex(g=>g.id===h.id),m={id:h.id,text:h.text||JSON.stringify(h),metadata:h.metadata||{},timestamp:s};p>=0?(o[p]=m,f++):(o.push(m),c++)}),this._save(t,o),{status:"success",added:c,updated:f,total:o.length}}async query(t="default",i,o=5,s=.1){const c=this._load(t).map(f=>{const h=this._similarity(i,f.text);return{...f,score:h}}).filter(f=>f.score>=s).sort((f,h)=>h.score-f.score).slice(0,o);return{matches:c,count:c.length}}async delete(t="default",i=[],o=!1){if(o)return localStorage.removeItem(this._getKey(t)),{status:"success",deleted:"all"};const s=this._load(t),l=s.length,c=new Set(Array.isArray(i)?i:[i]),f=s.filter(h=>!c.has(h.id));return this._save(t,f),{status:"success",deleted:l-f.length,remaining:f.length}}}const gc=new N2,E2=["window","document","location","navigator","fetch","XMLHttpRequest","WebSocket","EventSource","Worker","SharedWorker","ServiceWorker","importScripts","eval","Function","localStorage","sessionStorage","indexedDB","caches","cookieStore","crypto","Notification","alert","confirm","prompt","open","close","postMessage","parent","top","frames","opener","self","globalThis"],j2={Math,Array,Object,String,Number,Boolean,Date,RegExp,Map,Set,WeakMap,WeakSet,JSON,Promise,Error,TypeError,RangeError,SyntaxError,parseInt,parseFloat,isNaN,isFinite,encodeURI,decodeURI,encodeURIComponent,decodeURIComponent,console:{log:(...e)=>console.log("[Sandbox]",...e),info:(...e)=>console.info("[Sandbox]",...e),warn:(...e)=>console.warn("[Sandbox]",...e),error:(...e)=>console.error("[Sandbox]",...e)},setTimeout:(e,t)=>setTimeout(e,Math.min(t,3e4)),undefined:void 0,NaN:NaN,Infinity:1/0};async function C2(e,t,i={},o={}){const{timeout:s=3e4}=o;if(typeof e!="string")throw new Error("Code must be a string");const l=[/\beval\s*\(/gi,/\bFunction\s*\(/gi,/\bimport\s*\(/gi,/\bimport\s+/gi,/\brequire\s*\(/gi,/\b__proto__\b/gi,/\bconstructor\s*\[/gi,/\bprototype\b/gi];for(const m of l)if(m.test(e))throw new Error(`Potentially dangerous code pattern detected: ${m.source}`);const c={...j2,input:t,context:{nodeId:i.nodeId}};for(const m of E2)c[m]=new Proxy({},{get(){throw new Error(`Access to '${m}' is not allowed in sandboxed code`)},set(){throw new Error(`Cannot modify '${m}' in sandboxed code`)},apply(){throw new Error(`Cannot call '${m}' in sandboxed code`)}});const f=Object.keys(c),h=Object.values(c),p=`
    "use strict";
    return (async () => {
      ${e}
    })();
  `;try{const m=new Function(...f,p);return await Promise.race([m(...h),new Promise((v,b)=>setTimeout(()=>b(new Error(`Execution timeout after ${s}ms`)),s))])}catch(m){const g=m.message.replace(/at\s+.*?:\d+:\d+/g,"").replace(/\n\s+at\s+.*/g,"").trim();throw new Error(`Sandbox execution error: ${g}`)}}function k2(e){if(e==null)return{mimeType:"text/plain",extension:".txt",data:"",isBlob:!1};if(e instanceof Blob)return{mimeType:e.type||"application/octet-stream",extension:Qa(e.type),data:e,isBlob:!0};if(e instanceof ArrayBuffer||ArrayBuffer.isView(e))return{mimeType:"application/octet-stream",extension:".bin",data:new Blob([e]),isBlob:!0};if(typeof e=="object"&&e!==null){if(e.audioBlob instanceof Blob)return{mimeType:e.audioBlob.type||"audio/wav",extension:".wav",data:e.audioBlob,isBlob:!0};if(e.imageBlob instanceof Blob)return{mimeType:e.imageBlob.type||"image/png",extension:".png",data:e.imageBlob,isBlob:!0};if(e.videoBlob instanceof Blob)return{mimeType:e.videoBlob.type||"video/mp4",extension:".mp4",data:e.videoBlob,isBlob:!0};if(typeof e.url=="string"&&e.url.startsWith("blob:")){const t=e.type||e.mimeType||"application/octet-stream";return{mimeType:t,extension:Qa(t),data:e.url,isBlob:!1,isBlobUrl:!0}}return{mimeType:"application/json",extension:".json",data:JSON.stringify(e,null,2),isBlob:!1}}if(typeof e=="string"){if(e.startsWith("data:audio/")){const t=e.match(/^data:(audio\/[^;]+)/),i=t?t[1]:"audio/wav";return{mimeType:i,extension:Qa(i),data:e,isBlob:!1,isDataUri:!0}}if(e.startsWith("data:image/")){const t=e.match(/^data:(image\/[^;]+)/),i=t?t[1]:"image/png";return{mimeType:i,extension:Qa(i),data:e,isBlob:!1,isDataUri:!0}}if(e.startsWith("data:video/")){const t=e.match(/^data:(video\/[^;]+)/),i=t?t[1]:"video/mp4";return{mimeType:i,extension:Qa(i),data:e,isBlob:!1,isDataUri:!0}}if(/<[a-z][\s\S]*>/i.test(e)&&(e.includes("<html")||e.includes("<div")||e.includes("<p>")))return{mimeType:"text/html",extension:".html",data:e,isBlob:!1};if(e.startsWith("{")&&e.endsWith("}")||e.startsWith("[")&&e.endsWith("]"))try{return JSON.parse(e),{mimeType:"application/json",extension:".json",data:e,isBlob:!1}}catch{}return e.includes("# ")||e.includes("## ")||e.includes("```")||e.includes("**")?{mimeType:"text/markdown",extension:".md",data:e,isBlob:!1}:e.includes(",")&&e.split(`
`).every(t=>t.split(",").length>1)?{mimeType:"text/csv",extension:".csv",data:e,isBlob:!1}:{mimeType:"text/plain",extension:".txt",data:e,isBlob:!1}}return{mimeType:"text/plain",extension:".txt",data:String(e),isBlob:!1}}function Qa(e){return{"audio/wav":".wav","audio/wave":".wav","audio/x-wav":".wav","audio/mpeg":".mp3","audio/mp3":".mp3","audio/ogg":".ogg","audio/webm":".webm","audio/flac":".flac","audio/aac":".aac","audio/mp4":".m4a","video/mp4":".mp4","video/webm":".webm","video/ogg":".ogv","video/quicktime":".mov","video/x-msvideo":".avi","image/png":".png","image/jpeg":".jpg","image/jpg":".jpg","image/gif":".gif","image/webp":".webp","image/svg+xml":".svg","image/bmp":".bmp","text/plain":".txt","text/markdown":".md","text/html":".html","text/css":".css","text/javascript":".js","text/csv":".csv","application/json":".json","application/xml":".xml","application/yaml":".yaml","application/pdf":".pdf","application/octet-stream":".bin"}[e]||".bin"}function T2(e){try{const[t,i]=e.split(","),o=t.match(/data:([^;]+)/),s=o?o[1]:"application/octet-stream",l=atob(i),c=new Array(l.length);for(let f=0;f<l.length;f++)c[f]=l.charCodeAt(f);return new Blob([new Uint8Array(c)],{type:s})}catch{return null}}const A2={$now:()=>new Date().toISOString(),$uuid:()=>crypto.randomUUID?.()||"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)}),$formatDate:(e,t="yyyy-MM-dd")=>{const i=new Date(e),o=s=>String(s).padStart(2,"0");return t.replace("yyyy",i.getFullYear()).replace("MM",o(i.getMonth()+1)).replace("dd",o(i.getDate())).replace("HH",o(i.getHours())).replace("mm",o(i.getMinutes())).replace("ss",o(i.getSeconds()))},$upper:e=>String(e).toUpperCase(),$lower:e=>String(e).toLowerCase(),$trim:e=>String(e).trim(),$replace:(e,t,i)=>String(e).replace(t,i),$split:(e,t)=>String(e).split(t),$join:(e,t=",")=>Array.isArray(e)?e.join(t):String(e),$round:(e,t=0)=>Number(Number(e).toFixed(t)),$floor:e=>Math.floor(Number(e)),$ceil:e=>Math.ceil(Number(e)),$abs:e=>Math.abs(Number(e)),$min:(...e)=>Math.min(...e.map(Number)),$max:(...e)=>Math.max(...e.map(Number)),$length:e=>Array.isArray(e)?e.length:String(e).length,$first:e=>Array.isArray(e)?e[0]:e,$last:e=>Array.isArray(e)?e[e.length-1]:e,$reverse:e=>Array.isArray(e)?[...e].reverse():e,$keys:e=>typeof e=="object"&&e!==null?Object.keys(e):[],$values:e=>typeof e=="object"&&e!==null?Object.values(e):[],$pick:(e,...t)=>typeof e!="object"||e===null?{}:t.reduce((i,o)=>(o in e&&(i[o]=e[o]),i),{}),$stringify:(e,t=!1)=>JSON.stringify(e,null,t?2:void 0),$parse:e=>{try{return JSON.parse(e)}catch{return e}},$if:(e,t,i)=>e?t:i,$default:(e,t)=>e??t,$isEmpty:e=>e==null||e===""||Array.isArray(e)&&e.length===0||typeof e=="object"&&Object.keys(e).length===0};function M2(e,t={}){const i=e.trim(),o=[/\beval\b/i,/\bFunction\b/,/\bimport\b/i,/\brequire\b/i,/\b__proto__\b/,/\bconstructor\b/,/\bprototype\b/,/\bwindow\b/i,/\bdocument\b/i,/\bfetch\b/i,/\bglobalThis\b/i];for(const l of o)if(l.test(i))return console.warn(`Blocked dangerous expression: ${l.source}`),"{{BLOCKED: unsafe pattern}}";const s={...A2,$json:t.input||{},$input:t.input||{},$index:t.index??0,$item:t.item??null,$node:t.nodeData||{},$workflow:t.workflowData||{},...t.variables};try{const l=Object.keys(s),c=Object.values(s),f=`"use strict"; return (${i});`;return new Function(...l,f)(...c)}catch(l){return console.warn(`Expression error: ${l.message}`,{expr:e,context:t}),`{{ERROR: ${l.message}}}`}}function ls(e,t={}){if(typeof e!="string")return e;const i=/\{\{\s*((?:[^{}]|\{[^{}]*\})*)\s*\}\}/g;return e.replace(i,(o,s)=>{const l=M2(s,t);return l==null?"":typeof l=="object"?JSON.stringify(l):String(l)})}function D2(){return[{name:"$json",description:"Input data object",example:"$json.fieldName"},{name:"$input",description:"Full input object",example:"$input"},{name:"$index",description:"Current loop index",example:"$index"},{name:"$item",description:"Current loop item",example:"$item"},{name:"$node",description:"Current node data",example:"$node.label"},{name:"$now",description:"Current timestamp",example:"$now"},{name:"$uuid",description:"Generate UUID",example:"$uuid"},{name:"$formatDate",description:"Format date",example:'$formatDate($now, "yyyy-MM-dd")'},{name:"$upper",description:"Uppercase string",example:"$upper($json.name)"},{name:"$lower",description:"Lowercase string",example:"$lower($json.name)"},{name:"$trim",description:"Trim whitespace",example:"$trim($json.text)"},{name:"$replace",description:"Replace text",example:'$replace($json.text, "old", "new")'},{name:"$split",description:"Split string",example:'$split($json.csv, ",")'},{name:"$join",description:"Join array",example:'$join($json.items, ", ")'},{name:"$round",description:"Round number",example:"$round($json.price, 2)"},{name:"$floor",description:"Floor number",example:"$floor($json.value)"},{name:"$ceil",description:"Ceiling number",example:"$ceil($json.value)"},{name:"$min",description:"Minimum value",example:"$min($json.a, $json.b)"},{name:"$max",description:"Maximum value",example:"$max($json.a, $json.b)"},{name:"$length",description:"Array/string length",example:"$length($json.items)"},{name:"$first",description:"First array item",example:"$first($json.items)"},{name:"$last",description:"Last array item",example:"$last($json.items)"},{name:"$keys",description:"Object keys",example:"$keys($json)"},{name:"$values",description:"Object values",example:"$values($json)"},{name:"$stringify",description:"JSON stringify",example:"$stringify($json, true)"},{name:"$if",description:"Conditional value",example:'$if($json.active, "Yes", "No")'},{name:"$default",description:"Default value",example:'$default($json.name, "Unknown")'},{name:"$isEmpty",description:"Check if empty",example:"$isEmpty($json.items)"}]}async function dp(e,t,i){const o=L2[e.type];if(!o)throw new Error(`No executor found for node type: ${e.type}`);try{return{success:!0,...await o(e.data,t,i)}}catch(s){return{success:!1,error:s.message||"Node execution failed",output:null}}}const _2=e=>{try{return JSON.parse(e)}catch{return null}},O2=e=>{if(e instanceof Blob){const t=Mh(e.type);return{mimeType:e.type||"application/octet-stream",extension:t,data:e,isBlob:!0}}if(e?.audioBlob instanceof Blob)return{mimeType:e.audioBlob.type||"audio/wav",extension:".wav",data:e.audioBlob,isBlob:!0};if(e?.imageBlob instanceof Blob)return{mimeType:e.imageBlob.type||"image/png",extension:".png",data:e.imageBlob,isBlob:!0};if(typeof e?.audioBase64=="string")return{mimeType:"audio/wav",extension:".wav",data:R2(e.audioBase64,"audio/wav"),isBlob:!0};if(typeof e?.url=="string"&&e.url.startsWith("blob:")){const t=e.type||"application/octet-stream";return{mimeType:t,extension:Mh(t),data:e.url,isBlob:!1}}return typeof e=="string"?{mimeType:"text/plain",extension:".txt",data:e,isBlob:!1}:typeof e=="object"&&e!==null?{mimeType:"application/json",extension:".json",data:JSON.stringify(e,null,2),isBlob:!1}:{mimeType:"text/plain",extension:".txt",data:String(e),isBlob:!1}},Mh=e=>({"audio/wav":".wav","audio/mpeg":".mp3","audio/mp3":".mp3","audio/ogg":".ogg","audio/webm":".webm","audio/flac":".flac","audio/aac":".aac","video/mp4":".mp4","video/webm":".webm","video/ogg":".ogv","video/quicktime":".mov","video/x-msvideo":".avi","image/png":".png","image/jpeg":".jpg","image/jpg":".jpg","image/gif":".gif","image/webp":".webp","image/svg+xml":".svg","image/bmp":".bmp","text/plain":".txt","text/markdown":".md","text/html":".html","text/css":".css","text/javascript":".js","text/csv":".csv","application/json":".json","application/xml":".xml","application/yaml":".yaml","application/pdf":".pdf","application/msword":".doc","application/vnd.openxmlformats-officedocument.wordprocessingml.document":".docx","application/vnd.ms-excel":".xls","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":".xlsx","application/vnd.ms-powerpoint":".ppt","application/vnd.openxmlformats-officedocument.presentationml.presentation":".pptx","application/zip":".zip","application/x-tar":".tar","application/gzip":".gz","application/x-7z-compressed":".7z","application/octet-stream":".bin"})[e]||".bin",R2=(e,t="application/octet-stream")=>{try{const i=atob(e.replace(/^data:[^;]+;base64,/,"")),o=new Array(i.length);for(let s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return new Blob([new Uint8Array(o)],{type:t})}catch{return null}},_v=async(e,t,i,o)=>{try{const s={id:crypto.randomUUID(),nodeId:e.nodeId,executionId:e.executionId||"manual",name:t,type:i,data:o,timestamp:Date.now()};return await S2(s),e.executionStore?.addArtifact&&e.executionStore.addArtifact(s),e.addLog({type:"success",nodeId:e.nodeId,nodeName:"System",message:` Saved artifact: ${t}`}),s}catch(s){return console.error("Failed to save artifact:",s),e.addLog({type:"error",nodeId:e.nodeId,nodeName:"System",message:`Failed to save artifact: ${s.message}`}),null}},L2={manualTrigger:async(e,t,i)=>{const o=e.defaultPayload||"",s=e.inputValues||{},l={timestamp:new Date().toISOString(),trigger:"manual",...s,text:o,data:t||{...s,text:o}};return i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Manual Trigger",message:" Workflow started manually"}),{output:l}},scheduleTrigger:async(e,t,i)=>(i.addLog({type:"info",nodeId:i.nodeId,nodeName:"Schedule",message:" Rescheduling next run... (Simulated)"}),{output:t}),aiAgent:async(e,t,i)=>{const o={...e};typeof t=="object"&&t!==null&&!Array.isArray(t)&&["model","temperature","maxTokens","systemMessage"].forEach(b=>{t[b]!==void 0&&(o[b]=t[b])});const s=o.connectedModel;s&&(s.temperature!==void 0&&(o.temperature=s.temperature),s.maxTokens!==void 0&&(o.maxTokens=s.maxTokens),s.modelId&&(o.modelId=s.modelId));const{systemMessage:l,userMessage:c,temperature:f=.7,maxTokens:h=1e3}=o;let p=[],m="",g=l||"";if(Array.isArray(t)&&t.length>0){m=t[t.length-1].content,p=t.slice(0,-1);const w=p.find(N=>N.role==="system");w&&(g=w.content,p=p.filter(N=>N.role!=="system"))}else g&&g.includes("{{")&&(g=ls(g,{input:t})),c?c.includes("{{")?m=ls(c,{input:t}):m=c:m=typeof t=="string"?t:JSON.stringify(t);i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"AI Agent",message:" AI processing..."});const v=o.connectedMemory;if(v){i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"AI Agent",message:` Retrieving memories from ${v.namespace}...`});try{const b=await gc.query(v.namespace,m,v.topK||5);if(b&&b.matches&&b.matches.length>0){const w=b.matches.map(N=>`- ${typeof N.text=="string"?N.text:JSON.stringify(N.text)}`).join(`
`);g=`${g}

[CONTEXT FROM MEMORY]
Use the following retrieved context to answer the user:
${w}
[/CONTEXT]`.trim(),i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"AI Agent",message:` Found ${b.matches.length} relevant memories`})}}catch(b){i.addLog({type:"warning",nodeId:i.nodeId,nodeName:e.label||"AI Agent",message:` Memory retrieval failed: ${b.message}`})}i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"AI Agent",message:" Context prep complete. Starting generation..."})}try{const b=o.modelId||"gemma-2-2b-it";(!or.isReady||or.currentModel!==b)&&(i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"AI Agent",message:` Loading AI Model: ${b}... (This may take a moment)`}),await or.initialize(b,()=>{i.heartbeat&&i.heartbeat()}),i.addLog({type:"success",nodeId:i.nodeId,nodeName:e.label||"AI Agent",message:` Model loaded: ${b}`}));const w=o.tools||[];let N="";w.length>0&&(N=`

You have access to these tools:
${w.map(A=>`- ${A.name}: ${A.description||"Execute "+A.type+" node"}`).join(`
`)}

IMPORTANT: When you need to use a tool, respond ONLY with this JSON format:
{"action": "tool", "tool": "tool_name", "input": "your input for the tool"}

When you have the final answer (after tool results or if no tool needed), respond with:
{"action": "answer", "content": "your final response to the user"}

Always respond with valid JSON. Do not include any text outside the JSON object.`);const C=g+N,S=5;let k=0,j=[...p],_=m,$=null;for(;k<S;){k++,i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"AI Agent",message:k===1?" Generating response...":` Processing tool result (iteration ${k})...`});let H=(await or.generateWithHistory(_,j,{temperature:f,maxTokens:h,systemPrompt:C},()=>{i.heartbeat&&i.heartbeat()})).trim();i.addLog({type:"success",nodeId:i.nodeId,nodeName:e.label||"AI Agent",message:" Generation complete"});let V=null;try{let G=H;const I=H.match(/```(?:json)?\s*([\s\S]*?)```/);I&&(G=I[1].trim());const z=H.match(/\{[\s\S]*\}/);!I&&z&&(G=z[0]),V=JSON.parse(G)}catch{i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"AI Agent",message:" Response is not JSON, treating as direct answer"}),$=H;break}if(V.action==="answer"){$=V.content||H;break}else if(V.action==="tool"&&V.tool){const G=V.tool,I=V.input;i.addLog({type:"warning",nodeId:i.nodeId,nodeName:e.label||"AI Agent",message:` Agent calling tool: ${G}`,data:{tool:G,input:I}});const z=w.find(U=>U.name.toLowerCase()===G.toLowerCase());if(z){const U=i.nodes.find(Z=>Z.id===z.nodeId);if(U){i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"AI Agent",message:` Executing tool: ${G}...`});const Z=await dp(U,I,i);Z.success?(i.addLog({type:"success",nodeId:i.nodeId,nodeName:e.label||"AI Agent",message:` Tool '${G}' executed successfully`}),j.push({role:"assistant",content:H},{role:"user",content:`Tool "${G}" returned: ${typeof Z.output=="object"?JSON.stringify(Z.output):String(Z.output)}

Please provide your final answer using: {"action": "answer", "content": "..."}`}),_="",k===S&&($=Z.output)):(i.addLog({type:"error",nodeId:i.nodeId,nodeName:e.label||"AI Agent",message:` Tool '${G}' failed: ${Z.error}`}),j.push({role:"assistant",content:H},{role:"user",content:`Tool "${G}" failed with error: ${Z.error}

Please handle this error and provide your final answer.`}),_="")}else{i.addLog({type:"error",nodeId:i.nodeId,nodeName:e.label||"AI Agent",message:` Tool node not found: ${z.nodeId}`}),$=`Error: Tool node "${G}" not found in workflow`;break}}else i.addLog({type:"error",nodeId:i.nodeId,nodeName:e.label||"AI Agent",message:` Tool '${G}' not connected. Available: ${w.map(U=>U.name).join(", ")||"none"}`}),j.push({role:"assistant",content:H},{role:"user",content:`Tool "${G}" is not available. Available tools: ${w.map(U=>U.name).join(", ")||"none"}.

Please provide your answer without using that tool.`}),_=""}else{$=V.content||H;break}}return k>=S&&!$&&i.addLog({type:"warning",nodeId:i.nodeId,nodeName:e.label||"AI Agent",message:` Max tool iterations reached (${S})`}),{output:$}}catch(b){throw new Error(`AI generation failed: ${b.message}`)}},codeExecutor:async(e,t,i)=>{const{code:o,language:s="javascript",cdnUrls:l=[]}=e;if(i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Code Executor",message:` Executing ${s} code (sandboxed)...`}),s==="javascript")try{if(l.length>0){i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Code Executor",message:` Loading ${l.length} CDN libraries...`});const{loadFromCDN:f}=await g2(async()=>{const{loadFromCDN:h}=await Promise.resolve().then(()=>u5);return{loadFromCDN:h}},void 0);for(const h of l)try{await f(h)}catch{i.addLog({type:"warning",nodeId:i.nodeId,nodeName:e.label||"Code Executor",message:` Failed to load: ${h.split("/").pop()}`})}}return{output:await C2(o,t,{nodeId:i.nodeId},{timeout:3e4})}}catch(c){throw new Error(`Execution error: ${c.message}`)}else throw s==="python"&&window.pyodide?new Error("Python execution not ready pending Pyodide load"):new Error(`Unsupported language: ${s}`)},imageGeneration:async(e,t,i)=>{const o={...e};typeof t=="object"&&t!==null&&["model","size","negativePrompt","seed","steps"].forEach(f=>{t[f]!==void 0&&(o[f]=t[f])});const{seed:s=null}=o;i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Image Generation",message:" Generating image (Simulated)..."}),await new Promise(f=>setTimeout(f,2e3));const l=document.createElement("canvas");l.width=512,l.height=512;const c=l.getContext("2d");return c.fillStyle="#ff4444",c.fillRect(0,0,512,512),c.fillStyle="white",c.font="30px Arial",c.fillText("AI Generated Image",100,256),new Promise(f=>{l.toBlob(async h=>{await _v(i,`image_${Date.now()}.png`,"image/png",h),f({output:{url:URL.createObjectURL(h),prompt:t,seed:s||12345}})})})},httpRequest:async(e,t,i)=>{const{method:o="GET",url:s,headers:l,body:c,timeout:f=5e3}=e;i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"HTTP Request",message:` ${o} ${s}`});try{const h=new AbortController,p=setTimeout(()=>h.abort(),f),m=await fetch(s,{method:o,headers:_2(l)||{},body:["GET","HEAD"].includes(o)?void 0:typeof c=="string"?c:JSON.stringify(c),signal:h.signal});clearTimeout(p);const g=await m.json().catch(()=>({}));return{output:{status:m.status,statusText:m.statusText,data:g,headers:Object.fromEntries(m.headers.entries())}}}catch(h){throw new Error(`HTTP Request failed: ${h.message}`)}},setVariable:async(e,t,i)=>{const{variableName:o,value:s}=e;let l=s;return typeof t=="object"&&t!==null&&(t[o]!==void 0?l=t[o]:t.value!==void 0?l=t.value:t.text!==void 0&&(l=t.text)),typeof l=="string"&&l.includes("{{")&&(l=Ov(l,{input:t})),i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Set Variable",message:` Set ${o} = ${typeof l=="string"?l.slice(0,50):"..."}`}),{output:{...t,[o]:l}}},ifElse:async(e,t,i)=>{const{condition:o,operator:s="equals",compareValue:l}=e,c=Rv(t,o);let f=!1;switch(s){case"equals":f=c==l;break;case"notEquals":f=c!=l;break;case"contains":f=String(c).includes(l);break;case"greaterThan":f=Number(c)>Number(l);break;case"lessThan":f=Number(c)<Number(l);break;case"exists":f=c!=null;break}return i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"If/Else",message:` Check: ${o} ${s} ${l} -> ${f}`}),{output:t,outputIndex:f?0:1}},merge:async(e,t,i)=>{const{mode:o="wait",inputCount:s=2,aggregator:l="array"}=e;i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Merge",message:` Merge node (mode: ${o})`});let c;if(Array.isArray(t))switch(l){case"object":c=t.reduce((f,h,p)=>({...f,[`input${p}`]:h}),{});break;case"concat":c=t.flat();break;case"array":default:c=t}else c=t;return{output:c}},semanticRouter:async(e,t,i)=>{const{routes:o=[],classificationMode:s="keyword"}=e,l=typeof t=="string"?t:t?.text||t?.content||JSON.stringify(t);i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Router",message:` Classifying input (${s} mode)...`});let c=-1;if(s==="keyword"){const p=l.toLowerCase();for(let m=0;m<o.length;m++){const v=o[m].keywords||[];for(const b of v)if(p.includes(b.toLowerCase())){c=m;break}if(c>=0)break}}const f=c>=0?c:o.length,h=f<o.length?o[f].label:"Other";return i.addLog({type:"success",nodeId:i.nodeId,nodeName:e.label||"Router",message:` Routed to: ${h} (output ${f+1})`}),{output:t,outputIndex:f}},evaluator:async(e,t,i)=>{const{evaluationType:o="schema",schema:s=null,regexPattern:l="",maxRetries:c=3}=e,f=i.retryCount||0;i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Evaluator",message:` Evaluating output (${o}, attempt ${f+1}/${c+1})...`});let h=!1,p=null;try{switch(o){case"schema":if(s&&typeof s=="object"){const m=Object.keys(s),g=typeof t=="object"?t:JSON.parse(t),v=m.filter(b=>!(b in g));h=v.length===0,h||(p=`Missing required keys: ${v.join(", ")}`)}else h=!0;break;case"regex":if(l){const m=new RegExp(l),g=typeof t=="string"?t:JSON.stringify(t);h=m.test(g),h||(p=`Pattern not matched: ${l}`)}else h=!0;break;case"llm":h=!0;break;default:h=!0}}catch(m){h=!1,p=m.message}return h?(i.addLog({type:"success",nodeId:i.nodeId,nodeName:e.label||"Evaluator",message:" Validation passed"}),{output:t,outputIndex:0}):f<c?(i.addLog({type:"warning",nodeId:i.nodeId,nodeName:e.label||"Evaluator",message:` Validation failed: ${p}. Retrying...`}),{output:{originalInput:t,error:p,retryCount:f+1,feedback:`Your output was invalid: ${p}. Please try again.`},outputIndex:1,retryCount:f+1}):(i.addLog({type:"error",nodeId:i.nodeId,nodeName:e.label||"Evaluator",message:` Max retries reached. Validation failed: ${p}`}),{output:{...t,_validationFailed:!0,_validationError:p},outputIndex:0})},loop:async(e,t,i)=>{const{iterations:o=1}=e,s=i.loopState||{currentIteration:0,totalIterations:o,results:[]};return s.currentIteration>0&&t&&s.results.push(t),s.currentIteration++,s.currentIteration<=s.totalIterations?(i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Loop",message:` Iteration ${s.currentIteration} of ${s.totalIterations}`}),{output:{iteration:s.currentIteration,totalIterations:s.totalIterations,previousResult:t,isLoopIteration:!0},outputIndex:0,loopState:s}):(i.addLog({type:"success",nodeId:i.nodeId,nodeName:e.label||"Loop",message:` Loop complete: ${s.results.length} iterations processed`}),{output:{results:s.results,totalIterations:s.totalIterations,lastResult:t,completed:!0},outputIndex:1,loopState:null})},toolCall:async(e,t,i)=>{const{toolName:o,args:s}=e;return i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Tool Call",message:` Executing tool: ${o}`,data:s||t}),{output:{tool:o,status:"success",result:`Executed ${o} successfully`,args:s||t}}},vectorMemory:async(e,t,i)=>{const o={...e};typeof t=="object"&&t!==null&&["mode","namespace","topK","minScore"].forEach(p=>{t[p]!==void 0&&(o[p]=t[p])});const{mode:s="upsert",namespace:l="default",topK:c=5,minScore:f=.1}=o;i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Vector Store",message:` Vector Store Operation: ${s} (${l})`});let h;try{if(s==="upsert"){let p=[];Array.isArray(t)?p=t.map(m=>typeof m=="string"?{text:m}:m):typeof t=="object"&&t!==null?t.text?p=[t]:t.content?p=[{text:t.content,...t}]:p=[{text:JSON.stringify(t),metadata:t}]:p=[{text:String(t)}],h=await gc.upsert(l,p),i.addLog({type:"success",nodeId:i.nodeId,nodeName:e.label||"Vector Store",message:` Memorized ${h.added} new items, updated ${h.updated}`})}else if(s==="query"){const p=typeof t=="string"?t:JSON.stringify(t);h=await gc.query(l,p,c,f),i.addLog({type:"success",nodeId:i.nodeId,nodeName:e.label||"Vector Store",message:` Found ${h.count} matches`})}else if(s==="delete"){const p=Array.isArray(t)?t:t.id||t;h=await gc.delete(l,p),i.addLog({type:"success",nodeId:i.nodeId,nodeName:e.label||"Vector Store",message:` Deleted ${h.deleted} items`})}}catch(p){throw new Error(`Memory operation failed: ${p.message}`)}return{output:h}},output:async(e,t,i)=>{const o={...e};typeof t=="object"&&t!==null&&["outputType","filename","notificationTitle","artifactType","artifactName"].forEach(N=>{t[N]!==void 0&&(o[N]=t[N])});const{outputType:s="console",filename:l,formatJson:c,notificationTitle:f,artifactType:h="auto",artifactName:p=""}=o,m=c?JSON.stringify(t,null,2):t;switch(i.addLog({type:"success",nodeId:i.nodeId,nodeName:e.label||"Output",message:` Workflow output (${s})`,data:m}),s){case"console":console.log(" Workflow Output:",m),i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Output",message:`Console: ${String(m).slice(0,150)}${String(m).length>150?"...":""}`});break;case"file":{const N=k2(t);let C=N.data,S=N.mimeType,k=N.extension;if(N.isDataUri&&typeof C=="string"){const H=T2(C);H&&(C=H)}const j=C instanceof Blob?C:new Blob([C],{type:S}),_=URL.createObjectURL(j),$=document.createElement("a");$.href=_;let A=l;A?A.includes(".")||(A+=k):A=`output_${Date.now()}${k}`,$.download=A,document.body.appendChild($),$.click(),document.body.removeChild($),URL.revokeObjectURL(_),i.addLog({type:"success",nodeId:i.nodeId,nodeName:e.label||"Output",message:` Downloaded: ${A} (${S})`});break}case"notification":{if("Notification"in window){let N=Notification.permission;N==="default"&&(N=await Notification.requestPermission()),N==="granted"&&new Notification(f||"Workflow Complete",{body:typeof m=="string"?m.slice(0,200):"Data ready"})}typeof window<"u"&&window.dispatchEvent(new CustomEvent("workflow-toast",{detail:{type:"success",message:f||"Workflow Complete"}})),i.addLog({type:"success",nodeId:i.nodeId,nodeName:e.label||"Output",message:` Notification: ${f||"Workflow Complete"}`});break}case"artifact":i.addLog({type:"success",nodeId:i.nodeId,nodeName:e.label||"Output",message:" Artifact saved"});break;default:console.log(" Output:",m)}let g,v,b;if(h&&h!=="auto")if(g=h,v=Mh(h),t instanceof Blob)b=t;else if(typeof t=="object"&&t!==null)if(h==="application/json")b=JSON.stringify(t,null,2);else if(h==="text/csv")if(Array.isArray(t)&&t.length>0&&typeof t[0]=="object"){const N=Object.keys(t[0]);b=[N.join(","),...t.map(S=>N.map(k=>JSON.stringify(S[k]??"")).join(","))].join(`
`)}else b=JSON.stringify(t,null,2);else b=JSON.stringify(t,null,2);else b=String(t);else{const N=O2(t);g=N.mimeType,v=N.extension,b=N.data}let w=p||l;return w?w.includes(".")?h&&h!=="auto"&&(w=w.replace(/\.[^.]+$/,v)):w+=v:w=`output_${Date.now()}`+v,await _v(i,w,g,b),{output:m}},webhookTrigger:async(e,t,i)=>(i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Webhook",message:` Webhook endpoint ready: ${e.endpoint||"/webhook/default"}`}),{output:{timestamp:new Date().toISOString(),trigger:"webhook",method:e.method||"POST",endpoint:e.endpoint||"/webhook/default",body:t||{},query:{}}}),errorTrigger:async(e,t,i)=>(i.addLog({type:"warning",nodeId:i.nodeId,nodeName:e.label||"Error Trigger",message:" Error trigger activated",data:t}),{output:{timestamp:new Date().toISOString(),trigger:"error",error:t?.error||null,originalInput:t}}),browserEventTrigger:async(e,t,i)=>{const{eventType:o="focus"}=e;return i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Browser Event",message:` Browser event: ${o}`}),{output:{timestamp:new Date().toISOString(),trigger:"browserEvent",eventType:o,url:typeof window<"u"?window.location.href:"",...t}}},fileSystem:async(e,t,i)=>{const o={...e};typeof t=="object"&&t!==null&&(t.mode&&(o.mode=t.mode),t.filename&&(o.filename=t.filename),t.content&&(o.content=t.content));const{mode:s="read"}=o;if(s==="read")try{if(typeof window<"u"&&"showOpenFilePicker"in window){const[l]=await window.showOpenFilePicker({types:o.fileTypes?.length?[{accept:{"text/*":o.fileTypes}}]:void 0}),c=await l.getFile(),f=await c.text();return i.addLog({type:"success",nodeId:i.nodeId,nodeName:e.label||"File System",message:` Read file: ${c.name} (${c.size} bytes)`}),{output:{filename:c.name,size:c.size,type:c.type,content:f,lastModified:c.lastModified}}}else throw new Error("File System Access API not supported")}catch(l){return i.addLog({type:"error",nodeId:i.nodeId,nodeName:e.label||"File System",message:` File read failed: ${l.message}`}),{output:{error:l.message}}}else if(s==="write")try{const l=typeof t=="string"?t:t?.text||JSON.stringify(t,null,2);if(typeof window<"u"&&"showSaveFilePicker"in window){const c=await window.showSaveFilePicker({suggestedName:e.filename||"output.txt"}),f=await c.createWritable();return await f.write(l),await f.close(),i.addLog({type:"success",nodeId:i.nodeId,nodeName:e.label||"File System",message:" File written successfully"}),{output:{success:!0,filename:c.name}}}else{const c=new Blob([l],{type:"text/plain"}),f=URL.createObjectURL(c),h=document.createElement("a");return h.href=f,h.download=e.filename||"output.txt",h.click(),URL.revokeObjectURL(f),{output:{success:!0,downloaded:!0}}}}catch(l){return{output:{error:l.message}}}return{output:t}},localStorage:async(e,t,i)=>{const{mode:o="get",storageType:s="localStorage",key:l}=e;if(!l)return{output:{error:"No key specified"}};try{if(s==="localStorage")switch(o){case"get":{const c=window.localStorage.getItem(l),f=c?JSON.parse(c):null;return i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Storage",message:` Retrieved: ${l}`}),{output:{key:l,value:f,found:c!==null}}}case"set":{const c=typeof t=="string"?t:JSON.stringify(t);return window.localStorage.setItem(l,c),i.addLog({type:"success",nodeId:i.nodeId,nodeName:e.label||"Storage",message:` Stored: ${l}`}),{output:{key:l,success:!0}}}case"delete":return window.localStorage.removeItem(l),i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Storage",message:` Deleted: ${l}`}),{output:{key:l,deleted:!0}}}else{const c="iosans-storage",f="keyvalue",p=await new Promise((m,g)=>{const v=indexedDB.open(c,1);v.onerror=()=>g(v.error),v.onsuccess=()=>m(v.result),v.onupgradeneeded=b=>{const w=b.target.result;w.objectStoreNames.contains(f)||w.createObjectStore(f)}});switch(o){case"get":return new Promise(m=>{const b=p.transaction(f,"readonly").objectStore(f).get(l);b.onsuccess=()=>{i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Storage",message:` Retrieved (IndexedDB): ${l}`}),m({output:{key:l,value:b.result,found:b.result!==void 0}})},b.onerror=()=>m({output:{error:b.error.message}})});case"set":return new Promise(m=>{const b=p.transaction(f,"readwrite").objectStore(f).put(t,l);b.onsuccess=()=>{i.addLog({type:"success",nodeId:i.nodeId,nodeName:e.label||"Storage",message:` Stored (IndexedDB): ${l}`}),m({output:{key:l,success:!0}})},b.onerror=()=>m({output:{error:b.error.message}})});case"delete":return new Promise(m=>{const b=p.transaction(f,"readwrite").objectStore(f).delete(l);b.onsuccess=()=>{i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Storage",message:` Deleted (IndexedDB): ${l}`}),m({output:{key:l,deleted:!0}})},b.onerror=()=>m({output:{error:b.error.message}})})}}}catch(c){return{output:{error:c.message}}}return{output:t}},switchNode:async(e,t,i)=>{const{field:o,routes:s=[],defaultOutput:l=3}=e,c=Rv(t,o);i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Switch",message:` Switch on "${o}": value = "${c}"`});for(const f of s)if(String(f.value)===String(c))return{output:t,outputIndex:f.outputIndex};return{output:t,outputIndex:l}},waitForApproval:async(e,t,i)=>{const{title:o="Approval Required",message:s=""}=e;return i.addLog({type:"warning",nodeId:i.nodeId,nodeName:e.label||"Approval",message:` Waiting for approval: ${o}`,data:t}),new Promise(l=>{const c=Ov(s,t);window.confirm(`${o}

${c}

Click OK to approve, Cancel to reject.`)?(i.addLog({type:"success",nodeId:i.nodeId,nodeName:e.label||"Approval",message:" Approved"}),l({output:{approved:!0,approvedAt:new Date().toISOString(),originalInput:t},outputIndex:0})):(i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Approval",message:" Rejected"}),l({output:{approved:!1,rejectedAt:new Date().toISOString(),originalInput:t},outputIndex:1}))})},subWorkflow:async(e,t,i)=>{const{workflowId:o,passInput:s=!0}=e;return i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Sub-Workflow",message:` Executing sub-workflow: ${o||"none selected"}`}),o?(i.addLog({type:"warning",nodeId:i.nodeId,nodeName:e.label||"Sub-Workflow",message:" Sub-workflow execution not yet implemented"}),{output:{subWorkflowId:o,result:s?t:{},duration:0,note:"Sub-workflow execution coming soon"}}):{output:{error:"No workflow selected"}}},textToSpeech:async(e,t,i)=>{let o="";typeof t=="object"&&t!==null?o=t.text||t.data||JSON.stringify(t):o=String(t||"");const s=ls(o,{input:t});return i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Text to Speech",message:` Generating audio for: "${s.substring(0,30)}..."`}),{output:{text:s,voice:e.voice||"default",speed:e.speed||1,pitch:e.pitch||1,audioId:Date.now().toString(),canPlay:!0}}},pythonExecutor:async(e,t,i)=>{const{code:o="",packages:s=[]}=e;if(i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Python",message:" Executing Python code..."}),typeof window>"u"||!window.loadPyodide)try{i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Python",message:" Loading Pyodide runtime..."}),window.pyodideLoading||(window.pyodideLoading=(async()=>{const c=document.createElement("script");return c.src="https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.js",document.head.appendChild(c),await new Promise(f=>{c.onload=f}),window.pyodide=await window.loadPyodide(),window.pyodide})()),await window.pyodideLoading}catch(c){return i.addLog({type:"error",nodeId:i.nodeId,nodeName:e.label||"Python",message:` Failed to load Pyodide: ${c.message}`}),{output:{error:`Failed to load Pyodide: ${c.message}`}}}const l=window.pyodide;try{s.length>0&&(i.addLog({type:"info",nodeId:i.nodeId,nodeName:e.label||"Python",message:` Installing packages: ${s.join(", ")}`}),await l.loadPackagesFromImports(s.join(`
`))),l.globals.set("input",l.toPy(t));let c="";l.setStdout({batched:g=>{c+=g}});const f=Date.now(),h=await l.runPythonAsync(`
${o}
result if 'result' in dir() else None
`),p=(Date.now()-f)/1e3,m=h?.toJs?h.toJs():h;return i.addLog({type:"success",nodeId:i.nodeId,nodeName:e.label||"Python",message:` Python executed in ${p.toFixed(2)}s`,data:m}),{output:{result:m,stdout:c,duration:p}}}catch(c){return i.addLog({type:"error",nodeId:i.nodeId,nodeName:e.label||"Python",message:` Python error: ${c.message}`}),{output:{error:c.message}}}}};function Ov(e,t){return ls(e,{input:t})}function Rv(e,t){return!t||!e?e:t.split(".").reduce((i,o)=>i&&i[o]!==void 0?i[o]:void 0,e)}async function z2(e,t=null){const i=Xe.getState();let o=t;if(!o){const c=i.nodeResults[e.id];c?.input?o=c.input:o=I2(e.type)}const s={nodeId:e.id,nodes:[],edges:[],addLog:c=>{i.addLog({...c,nodeId:e.id})}};i.addLog({type:"info",nodeId:e.id,nodeName:e.data?.label||e.type,message:` Running step: ${e.data?.label||e.type}`});const l=Date.now();try{const c=await dp(e,o,s),f=Date.now()-l;return i.setNodeResult(e.id,{...c,executionTime:f,input:o,stepExecution:!0}),i.addLog({type:"success",nodeId:e.id,nodeName:e.data?.label||e.type,message:` Step completed in ${f}ms`,data:{preview:B2(c.output)}}),{success:!0,output:c.output,executionTime:f}}catch(c){const f=Date.now()-l;return i.setNodeResult(e.id,{success:!1,error:c.message,executionTime:f,input:o,stepExecution:!0}),i.addLog({type:"error",nodeId:e.id,nodeName:e.data?.label||e.type,message:` Step failed: ${c.message}`}),{success:!1,error:c.message,executionTime:f}}}function I2(e){return{manualTrigger:{timestamp:new Date().toISOString(),trigger:"manual",test:!0},httpRequest:{url:"https://api.example.com/data",method:"GET"},codeExecutor:{message:"Hello from step execution",value:42,items:[1,2,3]},pythonExecutor:{data:[1,2,3,4,5],text:"Sample Python input"},aiAgent:{prompt:"Test prompt for AI agent",context:"Running in step mode"},ifElse:{value:!0,status:"active"},loop:{items:["item1","item2","item3"]},switchNode:{value:"case1",status:"pending"},setVariable:{key:"testVar",value:"testValue"},textToSpeech:{text:"This is a test message for text to speech."},output:{result:"Test output data",status:"complete"}}[e]||{input:"default mock data",timestamp:new Date().toISOString()}}function B2(e){if(typeof e=="string")return e.slice(0,100)+(e.length>100?"...":"");if(typeof e=="object"){const t=JSON.stringify(e);return t.slice(0,100)+(t.length>100?"...":"")}return String(e)}function Lv({id:e,type:t,position:i,label:o,isConnected:s,isRequired:l}){const c=Mv[t]||Mv.workflow,f=l&&!s?"#ef4444":c.color;return u.jsxs("div",{className:"diamond-handle-wrapper",children:[o&&u.jsx("span",{className:"diamond-handle-label",style:{color:f},children:o}),u.jsx(Ln,{type:i===ge.Top?"source":"target",position:i,id:e,isConnectable:!0,className:`diamond-handle handle-${t} ${l&&!s?"required":""} ${s?"connected":""}`,style:{"--handle-color":f}})]})}function H2({type:e,data:t,children:i,inputs:o=1,outputs:s=1,outputLabels:l=[],resourceSlots:c=null,providerOutput:f=null}){const h=Pr(),p=Si[e],m=lu(e),[g,v]=T.useState(!1),[b,w]=T.useState(!1),N=Xe(D=>D.currentNodeId),C=Xe(D=>D.activeSupportingNodeIds||[]),S=Xe(D=>D.isRunning),k=Xe(D=>D.nodeResults),j=Ce(D=>D.selectedNodeId),_=Ce(D=>D.configOpen),$=Ce(D=>D.openConfig),A=Ce(D=>D.closeConfig),H=Ce(D=>D.edges),V=Ce(D=>D.nodes),G=S&&N===h,I=S&&C.includes(h),z=j===h,U=k[h]!==void 0,Z=k[h]?.error,M=k[h],P=T.useCallback(D=>{D.stopPropagation(),z&&_?A():$(h)},[h,z,_,$,A]),O=T.useCallback(async D=>{if(D.stopPropagation(),!(g||S)){v(!0),w(!0);try{const B=V.find(F=>F.id===h);B&&await z2(B)}finally{v(!1)}}},[h,V,g,S]),q=T.useMemo(()=>{const D=new Set;return H.forEach(B=>{B.source===h&&B.sourceHandle&&D.add(B.sourceHandle),B.target===h&&B.targetHandle&&D.add(B.targetHandle)}),D},[H,h]),Y=c||(e==="aiAgent"?h2.resourceSlots:null),Q=()=>{if(!M?.output)return null;const D=M.output;if(typeof D=="string")return D.slice(0,80)+(D.length>80?"...":"");const B=JSON.stringify(D,null,2);return B.slice(0,120)+(B.length>120?"...":"")};return u.jsxs("div",{className:`base-node ${G?"active":""} ${I?"supporting-active":""} ${z?"selected":""} ${Z?"error":""} ${Y?"has-resource-slots":""} ${g?"step-running":""}
      }`,style:{"--node-color":m},children:[f&&u.jsx(Lv,{id:f.id,type:f.type,position:ge.Top,label:f.label,isConnected:q.has(f.id),isRequired:!1}),o>0&&Array.from({length:o},(D,B)=>{const F=`input-${B}`,L=q.has(F);return u.jsx(Ln,{type:"target",position:ge.Left,id:F,isConnectable:!0,className:`node-handle input-handle circle-handle ${L?"connected":""}`,style:o>1?{top:`${(B+1)/(o+1)*100}%`}:{}},F)}),u.jsxs("div",{className:"node-header",children:[u.jsx("span",{className:"node-icon",children:p?.icon||""}),u.jsx("span",{className:"node-label",children:t.label||p?.name||e}),G&&u.jsx("span",{className:"running-indicator",children:""}),g&&u.jsx("span",{className:"running-indicator step",children:""}),U&&!G&&!g&&!Z&&u.jsx("span",{className:"success-indicator",children:""}),Z&&u.jsx("span",{className:"error-indicator",title:"Node failed - click to see error",children:""})]}),u.jsx("div",{className:"node-body",children:i}),u.jsxs("div",{className:"node-action-toolbar",children:[u.jsx("button",{className:`action-btn config-btn ${z?"active":""}`,onClick:P,title:z?"Close config":"Open config",children:""}),!S&&u.jsx("button",{className:`action-btn run-btn ${g?"running":""}`,onClick:O,disabled:g,title:"Run this step",children:g?"":""})]}),b&&M&&u.jsxs("div",{className:`step-result-preview ${Z?"error":"success"}`,children:[u.jsxs("div",{className:"step-result-header",children:[u.jsx("span",{children:Z?" Error":" Result"}),u.jsxs("span",{className:"step-time",children:[M.executionTime,"ms"]}),u.jsx("button",{className:"step-close-btn",onClick:D=>{D.stopPropagation(),w(!1)},children:""})]}),u.jsx("pre",{className:"step-result-body",children:Z?M.error:Q()})]}),Y&&Y.length>0&&u.jsx("div",{className:"resource-slots-container",children:Y.map(D=>u.jsx(Lv,{id:D.id,type:D.type,position:ge.Bottom,label:D.label,isConnected:q.has(D.id),isRequired:D.required},D.id))}),s>0&&Array.from({length:s},(D,B)=>{const F=`output-${B}`,L=q.has(F);return u.jsx(Ln,{type:"source",position:ge.Right,id:F,isConnectable:!0,className:`node-handle output-handle circle-handle ${L?"connected":""}`,style:s>1?{top:`${(B+1)/(s+1)*100}%`}:{},children:l[B]&&u.jsx("span",{className:"handle-label",children:l[B]})},F)})]})}const ct=T.memo(H2);function $2({data:e}){const t=Pr(),i=Ce(s=>s.updateNode),o=T.useCallback(s=>{i(t,{defaultPayload:s.target.value})},[t,i]);return u.jsx(ct,{type:"manualTrigger",data:e,inputs:0,outputs:1,children:u.jsxs("div",{className:"node-field",children:[u.jsx("label",{children:"Default Payload"}),u.jsx("textarea",{className:"node-input nodrag",placeholder:"Enter text to start flow...",value:e.defaultPayload||"",onChange:o,rows:3,style:{width:"100%",resize:"vertical"}})]})})}const P2=T.memo($2);function q2({data:e}){return u.jsxs(ct,{type:"scheduleTrigger",data:e,inputs:1,outputs:1,children:[u.jsxs("div",{className:"node-field",children:[u.jsx("label",{children:"Schedule (cron)"}),u.jsx("div",{className:"node-preview",children:e.schedule||"*/5 * * * *"})]}),u.jsx("div",{className:"node-preview",children:e.enabled?" Enabled":" Disabled"})]})}const U2=T.memo(q2);function V2({data:e}){const[t,i]=T.useState(!1),o=e.endpoint||`/webhook/${e.id||"default"}`,s=e.method||"POST",l=()=>{navigator.clipboard.writeText(`${window.location.origin}${o}`),i(!0),setTimeout(()=>i(!1),2e3)};return u.jsx(ct,{type:"webhookTrigger",data:e,inputs:0,outputs:1,children:u.jsxs("div",{className:"webhook-content",children:[u.jsx("div",{className:"method-badge",children:s}),u.jsxs("div",{className:"endpoint-display",onClick:l,children:[u.jsx("span",{className:"endpoint-path",children:o}),u.jsx("span",{className:"copy-hint",children:t?"":""})]}),e.authRequired&&u.jsx("div",{className:"auth-badge",children:" Auth Required"})]})})}const F2=T.memo(V2);function G2({data:e}){const t=e.watchAll!==!1,i=e.specificNodes||[];return u.jsx(ct,{type:"errorTrigger",data:e,inputs:0,outputs:1,children:u.jsxs("div",{className:"error-trigger-content",children:[u.jsx("div",{className:"error-icon",children:""}),u.jsx("div",{className:"watch-mode",children:t?u.jsx("span",{className:"watch-all",children:"Watching all nodes"}):u.jsxs("span",{className:"watch-specific",children:["Watching ",i.length," node(s)"]})}),e.retryEnabled&&u.jsxs("div",{className:"retry-badge",children:[" Auto-retry: ",e.retryCount||3,"x"]})]})})}const Y2=T.memo(G2),X2={focus:"Tab Focus",blur:"Tab Blur",urlChange:"URL Change",domClick:"DOM Click",domChange:"DOM Change",keypress:"Key Press",timer:"Timer"};function Q2({data:e}){const t=e.eventType||"focus",i=X2[t]||t;return u.jsx(ct,{type:"browserEventTrigger",data:e,inputs:0,outputs:1,children:u.jsxs("div",{className:"browser-event-content",children:[u.jsx("div",{className:"event-icon",children:""}),u.jsx("div",{className:"event-type",children:i}),t==="domClick"&&e.selector&&u.jsx("div",{className:"selector-preview",children:u.jsx("code",{children:e.selector})}),t==="timer"&&e.interval&&u.jsxs("div",{className:"timer-preview",children:["Every ",e.interval,"ms"]}),t==="urlChange"&&e.urlPattern&&u.jsxs("div",{className:"pattern-preview",children:[e.urlPattern.slice(0,30),"..."]})]})})}const W2=T.memo(Q2),zv="https://cdn.jsdelivr.net/npm/monaco-editor@0.45.0/min/vs";function Z2({data:e}){const[t,i]=T.useState(!1),[o,s]=T.useState(!!window.monaco),l=T.useRef(null),c=T.useRef(null),f=(e.code||"").split(`
`)[0].slice(0,40);return T.useEffect(()=>{if(!t||o)return;if(window.monaco){s(!0);return}let h=!0;const p=document.createElement("script");return p.src=`${zv}/loader.js`,p.async=!0,p.onload=()=>{window.require.config({paths:{vs:zv}}),window.require(["vs/editor/editor.main"],()=>{h&&s(!0)})},document.body.appendChild(p),()=>{h=!1}},[t,o]),T.useEffect(()=>{o&&t&&c.current&&!l.current&&(l.current=window.monaco.editor.create(c.current,{value:e.code||`// JavaScript code
return input;`,language:"javascript",theme:"vs-dark",minimap:{enabled:!1},fontSize:12,lineNumbers:"on",scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:2}))},[o,t,e.code]),T.useEffect(()=>(!t&&l.current&&(l.current.dispose(),l.current=null),()=>{l.current&&(l.current.dispose(),l.current=null)}),[t]),u.jsxs(ct,{type:"codeExecutor",data:e,inputs:1,outputs:1,children:[u.jsxs("div",{className:"code-executor-content",children:[u.jsxs("div",{className:"node-preview code-preview",onClick:()=>i(!0),title:"Click to edit code",children:[u.jsxs("span",{className:"code-text",children:[f||"// JavaScript code",f&&f.length>=40&&"..."]}),u.jsx("span",{className:"edit-hint",children:""})]}),e.cdnUrls?.length>0&&u.jsxs("div",{className:"cdn-badge",children:[" ",e.cdnUrls.length," CDN",e.cdnUrls.length>1?"s":""]})]}),t&&u.jsx("div",{className:"monaco-modal-overlay",onClick:h=>{h.target===h.currentTarget&&i(!1)},children:u.jsxs("div",{className:"monaco-modal",children:[u.jsxs("div",{className:"monaco-header",children:[u.jsx("span",{children:" Code Editor"}),u.jsx("button",{className:"monaco-close",onClick:()=>i(!1),children:""})]}),u.jsx("div",{ref:c,className:"monaco-container",children:!o&&u.jsx("div",{className:"monaco-loading",children:"Loading editor..."})})]})})]})}const J2=T.memo(Z2);function K2({data:e}){return u.jsxs(ct,{type:"setVariable",data:e,inputs:1,outputs:1,children:[u.jsxs("div",{className:"node-field",children:[u.jsx("label",{children:"Variable"}),u.jsx("div",{className:"node-preview",children:e.variableName||"data"})]}),u.jsxs("div",{className:"node-preview",style:{marginTop:"4px"},children:["Mode: ",e.mode||"set"]})]})}const eD=T.memo(K2);function tD({data:e}){const t=e.mode||"get",i=e.storageType||"indexedDB",o=e.key||"";return u.jsx(ct,{type:"localStorage",data:e,inputs:1,outputs:1,children:u.jsxs("div",{className:"localstorage-content",children:[u.jsxs("div",{className:"storage-badge",children:[u.jsx("span",{className:"storage-icon",children:""}),u.jsx("span",{className:"storage-type",children:i})]}),u.jsxs("div",{className:"operation-row",children:[u.jsx("span",{className:`operation-mode ${t}`,children:t==="get"?"GET":t==="set"?"SET":"DELETE"}),o&&u.jsx("span",{className:"key-name",children:o})]})]})})}const nD=T.memo(tD);function iD({data:e}){const t=e.mode||"read";return u.jsx(ct,{type:"fileSystem",data:e,inputs:0,outputs:0,providerOutput:{id:"tool-out",type:"tool",label:null},children:u.jsxs("div",{className:"filesystem-content",style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"10px"},children:[u.jsx("div",{className:"mode-badge",style:{marginBottom:"5px"},children:u.jsx("span",{className:"mode-icon",style:{fontSize:"24px"},children:""})}),u.jsx("div",{className:"filename-display",children:u.jsx("span",{className:"mode-label",style:{fontSize:"10px",textTransform:"uppercase",fontWeight:"bold"},children:t==="read"?"Read File":"Write File"})})]})})}const rD=T.memo(iD);function oD({data:e}){const t={GET:"#00c853",POST:"#2979ff",PUT:"#ffab00",DELETE:"#ff5252",PATCH:"#e040fb"};return u.jsx(ct,{type:"httpRequest",data:e,inputs:0,outputs:0,providerOutput:{id:"tool-out",type:"tool",label:null},children:u.jsxs("div",{className:"http-content",style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"10px"},children:[u.jsx("div",{className:"http-icon",style:{fontSize:"24px",marginBottom:"8px"},children:""}),u.jsx("div",{className:"node-field",children:u.jsx("span",{className:"http-method",style:{color:t[e.method]||"#666",fontWeight:600,fontSize:"10px"},children:e.method||"GET"})})]})})}const aD=T.memo(oD);function sD({data:e}){return u.jsx(ct,{type:"ifElse",data:e,inputs:1,outputs:2,outputLabels:["true","false"],children:u.jsx("div",{className:"node-preview",children:e.condition||"No condition set"})})}const lD=T.memo(sD);function cD({data:e}){return u.jsxs(ct,{type:"loop",data:e,inputs:1,outputs:2,outputLabels:["loop ","done "],children:[u.jsxs("div",{className:"node-field",children:[u.jsx("label",{children:"Iterations"}),u.jsxs("div",{className:"node-preview",children:[e.iterations||1,""]})]}),u.jsxs("div",{className:"node-field",children:[u.jsx("label",{children:"Items path"}),u.jsx("div",{className:"node-preview",children:e.itemsPath||"items"})]})]})}const uD=T.memo(cD);function dD({data:e}){const t=Pr(),i=bw(),o=lu("switchNode"),s=Xe(N=>N.currentNodeId),l=Xe(N=>N.isRunning),c=Xe(N=>N.nodeResults),f=Ce(N=>N.selectedNodeId),h=l&&s===t,p=f===t,m=c[t]!==void 0,g=c[t]?.error,v=T.useMemo(()=>e.routes||[],[e.routes]),b=e.field||"value",w=T.useMemo(()=>{const N=v.map((C,S)=>({id:`output-${S}`,label:String(C.value||C.label||S),index:S}));return N.push({id:"output-default",label:"default",index:N.length}),N},[v]);return T.useEffect(()=>{i(t)},[t,v.length,i]),u.jsxs("div",{className:`switch-node ${h?"active":""} ${p?"selected":""} ${g?"error":""}`,style:{"--node-color":o},children:[u.jsx(Ln,{type:"target",position:ge.Left,id:"input-0",className:"node-handle circle-handle"}),u.jsxs("div",{className:"node-header",children:[u.jsx("span",{className:"node-icon",children:""}),u.jsx("span",{className:"node-label",children:e.label||"Switch"}),h&&u.jsx("span",{className:"running-indicator",children:""}),m&&!h&&!g&&u.jsx("span",{className:"success-indicator",children:""})]}),u.jsxs("div",{className:"node-body",children:[u.jsxs("div",{className:"switch-field",children:[u.jsx("span",{className:"field-label",children:"Switch on:"}),u.jsx("span",{className:"field-value",children:b})]}),u.jsx("div",{className:"switch-routes",children:w.map(N=>u.jsxs("div",{className:"route-label-row",children:[u.jsx("span",{className:"route-value",children:N.label}),u.jsx("span",{className:"route-arrow",children:""})]},N.id))})]}),w.map((N,C)=>u.jsx(Ln,{type:"source",position:ge.Right,id:N.id,className:`node-handle circle-handle ${N.id==="output-default"?"default-handle":""}`,style:{top:`${(C+1)/(w.length+1)*100}%`}},N.id))]})}const fD=T.memo(dD);function hD({data:e}){const t=e.inputCount||2,i=e.mode||"wait";return u.jsx(ct,{type:"merge",data:e,inputs:t,outputs:1,outputLabels:["merged"],children:u.jsxs("div",{className:"merge-node-content",children:[u.jsxs("div",{className:"merge-mode",children:[u.jsx("span",{className:"mode-icon",children:i==="wait"?"":""}),u.jsx("span",{className:"mode-text",children:i==="wait"?"Wait for all":"First to arrive"})]}),u.jsxs("div",{className:"merge-inputs",children:[u.jsx("span",{className:"inputs-label",children:"Inputs:"}),u.jsx("span",{className:"inputs-count",children:t})]}),e.aggregator&&u.jsxs("div",{className:"merge-aggregator",children:[u.jsx("span",{className:"agg-label",children:"Combine:"}),u.jsx("span",{className:"agg-value",children:e.aggregator})]})]})})}const pD=T.memo(hD);function mD({data:e}){const[t,i]=T.useState(e.collapsed||!1),o=T.useCallback(()=>{i(f=>!f)},[]),s=e.childNodeIds?.length||0,l=e.label||"Node Group",c=e.color||"#6366f1";return u.jsxs("div",{className:`group-node ${t?"collapsed":"expanded"}`,style:{"--group-color":c,minWidth:t?"160px":e.width||"300px",minHeight:t?"60px":e.height||"200px"},children:[u.jsx(Ln,{type:"target",position:ge.Left,id:"input-0",className:"group-handle"}),u.jsxs("div",{className:"group-header",onClick:o,children:[u.jsx("span",{className:"group-icon",children:t?"":""}),u.jsx("span",{className:"group-label",children:l}),u.jsxs("span",{className:"group-badge",children:[s," nodes"]}),u.jsx("button",{className:"collapse-btn",title:t?"Expand":"Collapse",children:t?"":""})]}),!t&&u.jsx("div",{className:"group-body",children:s>0?u.jsx("div",{className:"group-content",children:u.jsx("span",{className:"group-hint",children:"Drag nodes here to add them to the group"})}):u.jsxs("div",{className:"group-empty",children:[u.jsx("span",{children:"Empty Group"}),u.jsx("span",{className:"group-hint",children:"Add nodes from context menu"})]})}),t&&s>0&&u.jsxs("div",{className:"collapsed-preview",children:["Contains ",s," connected nodes"]}),u.jsx(Ln,{type:"source",position:ge.Right,id:"output-0",className:"group-handle"})]})}const gD=T.memo(mD);function yD(e,t){let i;try{i=e()}catch{return}return{getItem:s=>{var l;const c=h=>h===null?null:JSON.parse(h,void 0),f=(l=i.getItem(s))!=null?l:null;return f instanceof Promise?f.then(c):c(f)},setItem:(s,l)=>i.setItem(s,JSON.stringify(l,void 0)),removeItem:s=>i.removeItem(s)}}const Dh=e=>t=>{try{const i=e(t);return i instanceof Promise?i:{then(o){return Dh(o)(i)},catch(o){return this}}}catch(i){return{then(o){return this},catch(o){return Dh(o)(i)}}}},xD=(e,t)=>(i,o,s)=>{let l={storage:yD(()=>localStorage),partialize:N=>N,version:0,merge:(N,C)=>({...C,...N}),...t},c=!1;const f=new Set,h=new Set;let p=l.storage;if(!p)return e((...N)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),i(...N)},o,s);const m=()=>{const N=l.partialize({...o()});return p.setItem(l.name,{state:N,version:l.version})},g=s.setState;s.setState=(N,C)=>(g(N,C),m());const v=e((...N)=>(i(...N),m()),o,s);s.getInitialState=()=>v;let b;const w=()=>{var N,C;if(!p)return;c=!1,f.forEach(k=>{var j;return k((j=o())!=null?j:v)});const S=((C=l.onRehydrateStorage)==null?void 0:C.call(l,(N=o())!=null?N:v))||void 0;return Dh(p.getItem.bind(p))(l.name).then(k=>{if(k)if(typeof k.version=="number"&&k.version!==l.version){if(l.migrate){const j=l.migrate(k.state,k.version);return j instanceof Promise?j.then(_=>[!0,_]):[!0,j]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,k.state];return[!1,void 0]}).then(k=>{var j;const[_,$]=k;if(b=l.merge($,(j=o())!=null?j:v),i(b,!0),_)return m()}).then(()=>{S?.(b,void 0),b=o(),c=!0,h.forEach(k=>k(b))}).catch(k=>{S?.(void 0,k)})};return s.persist={setOptions:N=>{l={...l,...N},N.storage&&(p=N.storage)},clearStorage:()=>{p?.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>w(),hasHydrated:()=>c,onHydrate:N=>(f.add(N),()=>{f.delete(N)}),onFinishHydration:N=>(h.add(N),()=>{h.delete(N)})},l.skipHydration||w(),b||v},vD=xD,Ye=su(vD((e,t)=>({status:"idle",currentModelId:null,loadProgress:0,loadingText:"",errorMessage:null,downloadedModels:[],downloadProgress:{},downloadQueue:[],isDownloading:!1,availableModels:[{id:"gemma-2-2b-it-q4f16_1-MLC",name:"Gemma 2 2B",size:"~1.4GB",vramRequired:2,description:"Google's fast, lightweight model (Recommended)",category:"recommended"},{id:"Qwen2.5-1.5B-Instruct-q4f16_1-MLC",name:"Qwen 2.5 1.5B",size:"~1GB",vramRequired:1.5,description:"Alibaba's efficient small model",category:"recommended"},{id:"SmolLM2-1.7B-Instruct-q4f16_1-MLC",name:"SmolLM2 1.7B",size:"~1.1GB",vramRequired:1.8,description:"HuggingFace's compact model",category:"recommended"},{id:"gemma-2-2b-it-q4f32_1-MLC",name:"Gemma 2 2B (F32)",size:"~2.5GB",vramRequired:3,description:"Higher precision Gemma 2",category:"gemma"},{id:"gemma-2-9b-it-q4f16_1-MLC",name:"Gemma 2 9B",size:"~6GB",vramRequired:8,description:"Larger Gemma 2 with better reasoning",category:"gemma"},{id:"gemma-2-2b-jpn-it-q4f16_1-MLC",name:"Gemma 2 2B Japanese",size:"~1.4GB",vramRequired:2,description:"Japanese-optimized Gemma 2",category:"gemma"},{id:"Qwen3-0.6B-q4f16_1-MLC",name:"Qwen 3 0.6B",size:"~400MB",vramRequired:.8,description:"Ultra-light Qwen 3 - instant responses",category:"qwen3"},{id:"Qwen3-1.7B-q4f16_1-MLC",name:"Qwen 3 1.7B",size:"~1.1GB",vramRequired:1.8,description:"Fast Qwen 3 with hybrid thinking",category:"qwen3"},{id:"Qwen3-4B-q4f16_1-MLC",name:"Qwen 3 4B",size:"~2.5GB",vramRequired:3.5,description:"Balanced Qwen 3 for most tasks",category:"qwen3"},{id:"Qwen3-8B-q4f16_1-MLC",name:"Qwen 3 8B",size:"~5GB",vramRequired:6.5,description:"Advanced Qwen 3 with deep reasoning",category:"qwen3"},{id:"Qwen2.5-0.5B-Instruct-q4f16_1-MLC",name:"Qwen 2.5 0.5B",size:"~350MB",description:"Ultra-light Qwen for basic tasks",category:"qwen"},{id:"Qwen2.5-3B-Instruct-q4f16_1-MLC",name:"Qwen 2.5 3B",size:"~2GB",description:"Balanced Qwen with good reasoning",category:"qwen"},{id:"Qwen2.5-7B-Instruct-q4f16_1-MLC",name:"Qwen 2.5 7B",size:"~4.5GB",description:"Powerful Qwen for complex tasks",category:"qwen"},{id:"Qwen2.5-Coder-1.5B-Instruct-q4f16_1-MLC",name:"Qwen 2.5 Coder 1.5B",size:"~1GB",description:"Optimized for code generation",category:"qwen"},{id:"Phi-3.5-mini-instruct-q4f16_1-MLC",name:"Phi-3.5 Mini",size:"~2.4GB",description:"Microsoft's balanced 3.8B model",category:"medium"},{id:"Llama-3.2-3B-Instruct-q4f16_1-MLC",name:"Llama 3.2 3B",size:"~2GB",description:"Meta's capable small model",category:"medium"},{id:"Llama-3.2-1B-Instruct-q4f16_1-MLC",name:"Llama 3.2 1B",size:"~900MB",description:"Meta's fast tiny model",category:"medium"},{id:"Mistral-7B-Instruct-v0.3-q4f16_1-MLC",name:"Mistral 7B v0.3",size:"~4.5GB",description:"Mistral AI's flagship model",category:"medium"},{id:"SmolLM2-360M-Instruct-q4f16_1-MLC",name:"SmolLM2 360M",size:"~250MB",description:"Smallest practical model",category:"tiny"},{id:"SmolLM2-135M-Instruct-q0f16-MLC",name:"SmolLM2 135M",size:"~150MB",description:"Tiny model for simple tasks",category:"tiny"}],setStatus:i=>e({status:i}),setLoading:(i,o)=>{e({status:"loading",loadProgress:i,loadingText:o})},setReady:i=>{const{downloadedModels:o}=t(),s=o.includes(i)?o:[...o,i];e({status:"ready",currentModelId:i,loadProgress:1,loadingText:"",errorMessage:null,downloadedModels:s})},setError:i=>{e({status:"error",errorMessage:i,loadProgress:0,loadingText:""})},reset:()=>{e({status:"idle",currentModelId:null,loadProgress:0,loadingText:"",errorMessage:null})},addToDownloadQueue:i=>{const{downloadQueue:o,downloadedModels:s}=t();!o.includes(i)&&!s.includes(i)&&e({downloadQueue:[...o,i]})},removeFromQueue:i=>{const{downloadQueue:o}=t();e({downloadQueue:o.filter(s=>s!==i)})},setDownloadProgress:(i,o,s="downloading")=>{const{downloadProgress:l}=t();e({downloadProgress:{...l,[i]:{progress:o,status:s}}})},markDownloaded:i=>{const{downloadedModels:o,downloadProgress:s,downloadQueue:l}=t();o.includes(i)||e({downloadedModels:[...o,i],downloadProgress:{...s,[i]:{progress:100,status:"complete"}},downloadQueue:l.filter(c=>c!==i)})},isModelDownloaded:i=>t().downloadedModels.includes(i),getDownloadStatus:i=>{const{downloadProgress:o,downloadedModels:s}=t();return s.includes(i)?{progress:100,status:"complete"}:o[i]||{progress:0,status:"idle"}},isReady:()=>t().status==="ready",isLoading:()=>t().status==="loading",getDownloadedModels:()=>{const{availableModels:i,downloadedModels:o}=t();return i.filter(s=>o.includes(s.id))},getModelsForVRAM:i=>{const{availableModels:o}=t();return o.filter(s=>(s.vramRequired||1)<=i)},canLoadModel:(i,o)=>{const{availableModels:s}=t(),l=s.find(c=>c.id===i);return l?(l.vramRequired||1)<=o:!1},getVRAMStatus:(i,o)=>{const{availableModels:s}=t(),l=s.find(h=>h.id===i);if(!l)return{status:"unknown",message:"Model not found"};const c=l.vramRequired||1,f=o/c;return f>=1.5?{status:"excellent",color:"#10b981",message:"Plenty of VRAM"}:f>=1?{status:"good",color:"#22c55e",message:"Should work well"}:f>=.8?{status:"tight",color:"#f59e0b",message:"May be slow"}:{status:"insufficient",color:"#ef4444",message:"Not enough VRAM"}}}),{name:"sauvrn-models",partialize:e=>({downloadedModels:e.downloadedModels,currentModelId:e.currentModelId})}));let Yf=null;async function bD(){if(Yf)return Yf;const e={webgpu:!1,gpuVendor:null,gpuRenderer:null,estimatedVRAM:0,tier:"cpu",warning:null,recommendations:[]};if("gpu"in navigator)try{const t=await navigator.gpu.requestAdapter();if(t){e.webgpu=!0;const i=await t.requestAdapterInfo?.();i&&(e.gpuVendor=i.vendor||"Unknown",e.gpuRenderer=i.device||"Unknown GPU");const o=t.limits,s=o.maxBufferSize||0,l=o.maxStorageBufferBindingSize||0,c=Math.max(s,l)/(1024*1024*1024);e.estimatedVRAM=Math.round(c*10)/10,e.estimatedVRAM>=8?e.tier="high":e.estimatedVRAM>=4?e.tier="medium":(e.estimatedVRAM>=2||e.webgpu)&&(e.tier="low")}}catch(t){console.warn("WebGPU detection failed:",t),e.warning="WebGPU available but adapter request failed"}if(!e.gpuRenderer)try{const t=document.createElement("canvas"),i=t.getContext("webgl")||t.getContext("experimental-webgl");if(i){const o=i.getExtension("WEBGL_debug_renderer_info");o&&(e.gpuVendor=i.getParameter(o.UNMASKED_VENDOR_WEBGL)||"Unknown",e.gpuRenderer=i.getParameter(o.UNMASKED_RENDERER_WEBGL)||"Unknown GPU")}}catch{}return e.tier==="cpu"?(e.recommendations.push("WebGPU not supported - AI will run on CPU (slower)"),e.warning="No GPU acceleration available"):e.tier==="low"?(e.recommendations.push("Limited VRAM - use smaller AI models"),e.recommendations.push("Recommended: Phi-3-mini, Gemma-2B")):e.tier==="medium"?(e.recommendations.push("Moderate VRAM - most models will work"),e.recommendations.push("Recommended: Mistral-7B, Llama-3.1-8B")):e.tier==="high"&&e.recommendations.push("High VRAM - all models supported"),Yf=e,e}function wD(e){switch(e){case"high":return"#22c55e";case"medium":return"#f59e0b";case"low":return"#f87171";case"cpu":return"#6b7280";default:return"#6b7280"}}function SD(e){switch(e){case"high":return"";case"medium":return"";case"low":return"";case"cpu":return"";default:return""}}function ND({data:e}){const t=Ye(h=>h.availableModels),i=Ye(h=>h.status),[o,s]=T.useState(null);T.useEffect(()=>{bD().then(s)},[]);const c=t.find(h=>h.id===e.modelId)?.name||"Gemma 2 2B",f=(e.systemPrompt||"").split(`
`)[0].slice(0,50);return u.jsx(ct,{type:"aiAgent",data:e,inputs:1,outputs:1,children:u.jsxs("div",{className:"ai-node-content",children:[u.jsxs("div",{className:"model-badge",children:[u.jsx("span",{className:`status-dot ${i}`}),u.jsx("span",{className:"model-name",children:c})]}),o&&u.jsxs("div",{className:"hardware-badge",title:o.recommendations?.[0]||`GPU: ${o.gpuRenderer}`,style:{"--tier-color":wD(o.tier)},children:[SD(o.tier)," ",o.tier.toUpperCase()]}),e.systemPrompt&&u.jsxs("div",{className:"node-preview prompt-preview",children:[f,"..."]}),e.tools&&e.tools.length>0&&u.jsxs("div",{className:"tools-count",children:[" ",e.tools.length," tool(s) available"]})]})})}const ED=T.memo(ND);function jD({data:e}){const t=Ye(f=>f.availableModels),i=Ye(f=>f.status),o=e.provider||"webllm",l=t.find(f=>f.id===e.modelId)?.name||e.modelName||"Gemma 2 2B",c={webllm:"",openai:"",anthropic:"",local:""};return u.jsx(ct,{type:"chatModel",data:e,inputs:0,outputs:0,providerOutput:{id:"model-out",type:"model"},children:u.jsx("div",{className:"chat-model-content",children:u.jsxs("div",{className:"model-provider-row",children:[u.jsx("span",{className:"provider-icon-badge",children:c[o]||""}),u.jsxs("div",{className:"model-details",children:[u.jsx("div",{className:"model-name-label",children:l}),u.jsx("div",{className:"provider-name",children:o.toUpperCase()})]}),u.jsxs("div",{className:`model-status-indicator ${i}`,children:[i==="ready"&&"",i==="loading"&&"",i==="error"&&""]})]})})})}const CD=T.memo(jD);function kD({data:e}){const t=e.mode||"query",i=e.namespace||"default";return u.jsx(ct,{type:"vectorMemory",data:e,inputs:0,outputs:0,providerOutput:{id:"memory-out",type:"memory",label:null},children:u.jsxs("div",{className:"vector-memory-content",children:[u.jsxs("div",{className:"mode-badge",children:[u.jsx("span",{className:"mode-icon",children:t==="upsert"?"":""}),u.jsx("span",{className:"mode-label",children:t==="upsert"?"Store":"Query"})]}),u.jsxs("div",{className:"namespace-tag",children:[u.jsx("span",{className:"namespace-icon",children:""}),u.jsx("span",{className:"namespace-name",children:i})]}),e.topK&&t==="query"&&u.jsxs("div",{className:"config-preview",children:["Top ",e.topK," results"]})]})})}const TD=T.memo(kD);function AD({data:e}){const t=e.title||"Approval Required",i=e.timeout||0;return u.jsx(ct,{type:"waitForApproval",data:e,inputs:1,outputs:2,children:u.jsxs("div",{className:"approval-content",children:[u.jsx("div",{className:"approval-icon",children:""}),u.jsx("div",{className:"approval-title",children:t}),e.message&&u.jsxs("div",{className:"approval-message",children:[e.message.slice(0,60),"..."]}),u.jsxs("div",{className:"approval-outputs",children:[u.jsx("div",{className:"output-label approved",children:" Approved"}),u.jsx("div",{className:"output-label rejected",children:" Rejected"})]}),i>0&&u.jsxs("div",{className:"timeout-badge",children:[" ",i,"s timeout"]})]})})}const MD=T.memo(AD);function DD({data:e}){const t=e.workflowName||"Select workflow...",i=e.passInput!==!1;return u.jsx(ct,{type:"subWorkflow",data:e,inputs:1,outputs:1,children:u.jsxs("div",{className:"subworkflow-content",children:[u.jsx("div",{className:"workflow-icon",children:""}),u.jsx("div",{className:"workflow-name",children:t}),u.jsxs("div",{className:"workflow-config",children:[i&&u.jsx("span",{className:"config-tag",children:" Pass input"}),e.async&&u.jsx("span",{className:"config-tag",children:" Async"})]}),e.description&&u.jsxs("div",{className:"workflow-desc",children:[e.description.slice(0,50),"..."]})]})})}const _D=T.memo(DD);function OD({data:e}){const t=Pr(),i=bw(),o=e.routes||[{id:"route-0",label:"General",keywords:["general","other"]},{id:"route-1",label:"Technical",keywords:["code","programming","bug"]},{id:"route-2",label:"Creative",keywords:["story","write","creative"]}],s=o.length+1;T.useEffect(()=>{i(t)},[o.length,t,i]);const l=[...o.map(c=>c.label),"Other"];return u.jsx(ct,{type:"semanticRouter",data:e,inputs:1,outputs:s,outputLabels:l,children:u.jsxs("div",{className:"semantic-router-content",children:[u.jsxs("div",{className:"routes-header",children:[u.jsx("span",{className:"routes-icon",children:""}),u.jsxs("span",{className:"routes-count",children:[o.length," routes"]})]}),u.jsxs("div",{className:"routes-preview",children:[o.slice(0,3).map((c,f)=>u.jsxs("div",{className:"route-chip",children:[u.jsx("span",{className:"route-number",children:f+1}),u.jsx("span",{className:"route-label",children:c.label})]},c.id||f)),o.length>3&&u.jsxs("div",{className:"route-chip more",children:["+",o.length-3]})]}),u.jsxs("div",{className:"classification-mode",children:[u.jsx("span",{className:"mode-label",children:"Mode:"}),u.jsx("span",{className:"mode-value",children:e.classificationMode||"keyword"})]})]})})}const RD=T.memo(OD);function LD({data:e}){const t=e.evaluationType||"schema",i=e.maxRetries||3,o=e.schema||null;return u.jsx(ct,{type:"evaluator",data:e,inputs:1,outputs:2,outputLabels:["pass ","retry "],children:u.jsxs("div",{className:"evaluator-node-content",children:[u.jsxs("div",{className:"eval-type",children:[u.jsx("span",{className:"eval-icon",children:""}),u.jsx("span",{className:"eval-label",children:t})]}),u.jsxs("div",{className:"eval-retries",children:[u.jsx("span",{className:"retries-label",children:"Max retries:"}),u.jsx("span",{className:"retries-count",children:i})]}),o&&u.jsxs("div",{className:"eval-schema",children:[u.jsx("span",{className:"schema-label",children:"Schema:"}),u.jsx("span",{className:"schema-preview",children:typeof o=="object"?Object.keys(o).slice(0,3).join(", "):o})]}),u.jsxs("div",{className:"eval-modes",children:[u.jsx("span",{className:`mode-chip ${t==="schema"?"active":""}`,children:"JSON"}),u.jsx("span",{className:`mode-chip ${t==="regex"?"active":""}`,children:"Regex"}),u.jsx("span",{className:`mode-chip ${t==="llm"?"active":""}`,children:"LLM"})]})]})})}const zD=T.memo(LD);function ID({data:e}){const t=Pr(),i=e.voice||"default",o=e.speed||1,s=e.provider||"webSpeech",f=Xe(w=>w.nodeResults)[t]?.output,[h,p]=T.useState(!1),m=T.useCallback(()=>{if(!f?.audioId)return;const w=window.__ttsAudio?.[f.audioId];if(!w){const k=new SpeechSynthesisUtterance(f.text);k.rate=f.speed||1,k.pitch=f.pitch||1,k.onend=()=>{p(!1),window.dispatchEvent(new CustomEvent("audioEnd"))},p(!0),window.dispatchEvent(new CustomEvent("audioStart")),speechSynthesis.speak(k);return}const{utterance:N,text:C}=w,S=new SpeechSynthesisUtterance(C);S.rate=N.rate,S.pitch=N.pitch,N.voice&&(S.voice=N.voice),S.onend=()=>{p(!1),window.dispatchEvent(new CustomEvent("audioEnd"))},p(!0),window.dispatchEvent(new CustomEvent("audioStart")),speechSynthesis.speak(S)},[f]),g=T.useCallback(()=>{speechSynthesis.cancel(),p(!1),window.dispatchEvent(new CustomEvent("audioEnd"))},[]),v=T.useCallback(()=>{if(!f?.text)return;const w=`Text to Speech Content
${"=".repeat(40)}

${f.text}

---
Voice: ${f.voice}
Speed: ${f.speed}x
Pitch: ${f.pitch}`,N=new Blob([w],{type:"text/plain"}),C=URL.createObjectURL(N),S=document.createElement("a");S.href=C,S.download="speech-content.txt",S.click(),URL.revokeObjectURL(C)},[f]),b=f?.canPlay;return u.jsx(ct,{type:"textToSpeech",data:e,inputs:0,outputs:0,providerOutput:{id:"tool-out",type:"tool",label:null},children:u.jsxs("div",{className:"tts-content",children:[u.jsx("div",{className:"tts-icon",children:""}),u.jsxs("div",{className:"tts-config",children:[u.jsx("div",{className:"provider-badge",children:s==="webSpeech"?"Web Speech API":s}),u.jsxs("div",{className:"voice-info",children:[u.jsx("span",{className:"voice-label",children:"Voice:"}),u.jsx("span",{className:"voice-name",children:i})]}),u.jsx("div",{className:"speed-info",children:o!==1&&u.jsxs("span",{children:[o,"x speed"]})})]}),e.autoPlay&&u.jsx("div",{className:"autoplay-badge",children:" Auto-play"}),b&&u.jsxs("div",{className:"tts-audio-controls",children:[h?u.jsx("button",{className:"tts-btn tts-btn-stop",onClick:g,children:" Stop"}):u.jsx("button",{className:"tts-btn tts-btn-play",onClick:m,children:" Play"}),u.jsx("button",{className:"tts-btn tts-btn-download",onClick:v,children:""})]})]})})}const BD=T.memo(ID);function HD({data:e}){const t=e.model||"stable-diffusion";return u.jsx(ct,{type:"imageGeneration",data:e,inputs:0,outputs:0,providerOutput:{id:"tool-out",type:"tool",label:null},children:u.jsxs("div",{className:"imagegen-content",style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"10px"},children:[u.jsx("div",{className:"imagegen-icon",style:{fontSize:"24px",marginBottom:"8px"},children:""}),u.jsx("div",{className:"model-info",style:{fontSize:"12px",fontWeight:"500"},children:t})]})})}const $D=T.memo(HD);function PD({data:e}){return u.jsx(ct,{type:"pythonExecutor",data:e,inputs:0,outputs:0,providerOutput:{id:"tool-out",type:"tool",label:null},children:u.jsxs("div",{className:"python-content",style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"10px"},children:[u.jsx("div",{className:"python-icon",style:{fontSize:"24px",marginBottom:"8px"},children:""}),u.jsx("div",{className:"python-label",style:{fontSize:"12px",fontWeight:"500"},children:"Python (Pyodide)"})]})})}const qD=T.memo(PD);function UD({data:e}){const t=()=>{switch(e.outputType){case"file":return" File";case"notification":return" Notify";case"artifact":return" Artifact";default:return" Console"}};return u.jsx(ct,{type:"output",data:e,inputs:1,outputs:0,children:u.jsx("div",{className:"output-node-body",children:u.jsx("div",{className:"output-type-badge",children:t()})})})}const VD=T.memo(UD);function FD({sourceX:e,sourceY:t,sourcePosition:i,targetX:o,targetY:s,targetPosition:l,nodes:c,excludeNodeIds:f=[],gap:h=10}){const p=c.filter(j=>!(!j.measured?.width&&!j.width||f.includes(j.id))).map(j=>{const _=j.measured?.width||j.width||180,$=j.measured?.height||j.height||80,A=j.position.x,H=j.position.y;return{left:A,right:A+_,top:H,bottom:H+$,centerX:A+_/2,centerY:H+$/2}}),m=(j,_,$,A,H=h)=>{const V=Math.min(j,$),G=Math.max(j,$),I=Math.min(_,A),z=Math.max(_,A);return p.some(U=>G>U.left-H&&V<U.right+H&&z>U.top-H&&I<U.bottom+H)};let g=0;const v=(e+o)/2,b=(t+s)/2,w=i===ge.Left||i===ge.Right;let N=!1;if(w?N=m(e,t,v,t)||m(v,t,v,s)||m(v,s,o,s):N=m(e,t,e,b)||m(e,b,o,b)||m(o,b,o,s),N){let j=h;for(const _ of p)if(_.left<Math.max(e,o)+h&&_.right>Math.min(e,o)-h&&_.top<Math.max(t,s)+h&&_.bottom>Math.min(t,s)-h)if(w){const A=t-_.bottom,H=_.top-t,V=Math.min(Math.abs(A),Math.abs(H));j=Math.max(j,V+h*2)}else{const A=e-_.right,H=_.left-e,V=Math.min(Math.abs(A),Math.abs(H));j=Math.max(j,V+h*2)}g=Math.max(h,j)}const[C,S,k]=Hc({sourceX:e,sourceY:t,sourcePosition:i,targetX:o,targetY:s,targetPosition:l,borderRadius:8,offset:g});return[C,S,k]}function GD({id:e,source:t,target:i,sourceX:o,sourceY:s,targetX:l,targetY:c,sourcePosition:f,targetPosition:h,style:p={},markerEnd:m,sourceHandleId:g,targetHandleId:v}){const[b,w]=T.useState(!1),[N,C]=T.useState(!1),S=T.useRef(null),k=Ce(Q=>Q.nodes),{currentNodeId:j,edgeSnapshots:_,isRunning:$}=Xe(Q=>({currentNodeId:Q.currentNodeId,edgeSnapshots:Q.edgeSnapshots,isRunning:Q.isRunning})),A=$&&j===t,H=_[e]?.[_[e]?.length-1]||null,V=T.useMemo(()=>{const Q=v||g||"";return Q.includes("model")?"model":Q.includes("memory")?"memory":Q.includes("tool")?"tool":"workflow"},[g,v]),G=T.useMemo(()=>{const Q={...p};switch(V){case"model":return{...Q,stroke:"#6366f1",strokeDasharray:"5,5"};case"memory":return{...Q,stroke:"#10b981",strokeDasharray:"5,5"};case"tool":return{...Q,stroke:"#f59e0b",strokeDasharray:"5,5"};default:return Q}},[V,p]),I=T.useCallback(()=>{S.current&&(clearTimeout(S.current),S.current=null),w(!0),H&&C(!0)},[H]),z=T.useCallback(()=>{S.current=setTimeout(()=>{w(!1),C(!1)},400)},[]),U=T.useCallback(()=>{S.current&&(clearTimeout(S.current),S.current=null),w(!0)},[]),[Z,M,P]=FD({sourceX:o,sourceY:s,sourcePosition:f,targetX:l,targetY:c,targetPosition:h,nodes:k,excludeNodeIds:[t,i],gap:50}),O=T.useCallback(Q=>{Q.stopPropagation(),Q.preventDefault(),window.dispatchEvent(new CustomEvent("deleteEdge",{detail:{edgeId:e}}))},[e]),q=T.useCallback(Q=>{Q.stopPropagation(),Q.preventDefault(),window.dispatchEvent(new CustomEvent("addNodeOnEdge",{detail:{edgeId:e,position:{x:M,y:P}}}))},[e,M,P]),Y=Q=>Q?new Date(Q).toLocaleTimeString():"";return u.jsxs(u.Fragment,{children:[u.jsx("path",{d:Z,fill:"none",strokeWidth:30,stroke:"transparent",style:{cursor:"pointer"},onMouseEnter:I,onMouseLeave:z}),u.jsx(_s,{path:Z,markerEnd:m,style:{...G,strokeWidth:b?3:A?2.5:2},className:`animated-edge ${b?"hovered":""} edge-${V} ${H?"has-data":""} ${A?"edge-active":""}`}),u.jsx("path",{className:`edge-flow-animation ${A?"flowing":""}`,d:Z,fill:"none",strokeWidth:2,style:{pointerEvents:"none"}}),u.jsxs(AM,{children:[u.jsx("div",{className:`edge-action-container ${b?"visible":""}`,style:{position:"absolute",transform:`translate(-50%, -50%) translate(${M}px, ${P}px)`,pointerEvents:b?"all":"none"},onMouseEnter:U,onMouseLeave:z,children:u.jsxs("div",{className:"edge-action-buttons",children:[u.jsx("button",{className:"edge-btn edge-btn-add",onClick:q,title:"Insert node here",children:"+"}),u.jsx("button",{className:"edge-btn edge-btn-delete",onClick:O,title:"Delete connection",children:""})]})}),N&&H&&u.jsxs("div",{className:"ghost-data-tooltip",style:{position:"absolute",transform:`translate(-50%, -120%) translate(${M}px, ${P}px)`,pointerEvents:"none"},children:[u.jsxs("div",{className:"ghost-header",children:[u.jsx("span",{className:"ghost-icon",children:""}),u.jsx("span",{className:"ghost-title",children:"Last Data"}),u.jsx("span",{className:"ghost-time",children:Y(H.timestamp)})]}),u.jsxs("pre",{className:"ghost-preview",children:[H.preview,H.preview?.length>=500&&"..."]})]})]})]})}const YD=T.memo(GD);class XD{constructor(){this.isRunning=!1,this.isPaused=!1,this.debugMode=!1,this.stepResolve=null,this.abortController=null,this.executedNodes=new Set}async execute(t,i,o,s={},l={}){const{executionStore:c}=o,{debug:f=!1}=l;if(this.isRunning)throw new Error("Workflow is already running");this.isRunning=!0,this.isPaused=!1,this.debugMode=f,this.abortController=new AbortController,this.executedNodes=new Set,this.nodes=t,this.edges=i,this.nodeMap=new Map(t.map(h=>[h.id,h])),this.executionStore=c,c.startExecution();try{const h=u2(t);if(h.length===0)throw c.addLog({type:"error",message:"No trigger node found. Add a trigger to start the workflow."}),new Error("No trigger node found");c.addLog({type:"info",message:`Starting workflow${f?" (debug mode)":""} with ${h.length} trigger(s)`});const p=[];for(const m of h){const g=await this.executeFromNode(m.id,s);p.push(g)}return c.stopExecution(),c.addLog({type:"success",message:"Workflow completed successfully"}),this.isRunning=!1,{success:!0,results:p}}catch(h){return c.addLog({type:"error",message:`Workflow failed: ${h.message}`}),c.stopExecution(),this.isRunning=!1,{success:!1,error:h.message}}}async executeFromNode(t,i,o=new Set){const s=`${t}-${JSON.stringify(i).slice(0,50)}`;if(o.has(s))return{success:!0,output:i,skipped:!0};if(o.add(s),this.abortController?.signal.aborted)throw new Error("Workflow was stopped");await this.waitIfPaused(),this.debugMode&&await this.waitForStep();const l=this.nodeMap.get(t);if(!l)return{success:!1,error:`Node ${t} not found`};if(this.executionStore.setCurrentNode(t),this.executionStore.addLog({type:"node",nodeId:t,nodeName:l.data?.label||l.type,message:`Executing ${l.data?.label||l.type}`}),l.type==="aiAgent"){const w=this.getConnectedResources(t);if(w.model&&(l.data={...l.data,connectedModel:w.model},this.executionStore.addLog({type:"info",nodeId:t,nodeName:l.data?.label||"AI Agent",message:`Using connected model: ${w.model.modelName||w.model.modelId||"WebLLM"}`})),w.memory&&(l.data={...l.data,connectedMemory:w.memory},this.executionStore.addLog({type:"info",nodeId:t,nodeName:l.data?.label||"AI Agent",message:`Using connected memory: ${w.memory.namespace}`})),l.data?.enableToolCalling!==!1){const C=this.getConnectedTools(t),S=[...w.tools,...C];S.length>0&&(l.data={...l.data,tools:S},this.executionStore.addLog({type:"info",nodeId:t,nodeName:l.data?.label||"AI Agent",message:`Detected ${S.length} tool(s): ${S.map(k=>k.name).join(", ")}`}))}const N=[];w.model?.nodeId&&N.push(w.model.nodeId),w.memory?.nodeId&&N.push(w.memory.nodeId),w.tools.forEach(C=>N.push(C.nodeId)),N.length>0&&this.executionStore.setActiveSupportingNodes&&this.executionStore.setActiveSupportingNodes(N)}const c={nodeId:t,nodes:this.nodes,edges:this.edges,executionStore:this.executionStore,addLog:w=>this.executionStore.addLog({...w,nodeId:t})},f=l.data?.retries||0,h=l.data?.retryDelay||1e3,p=l.type==="aiAgent"||l.type==="textToSpeech"||l.type==="imageGeneration",m=l.data?.timeout||(p?3e5:6e4);let g;const v=Date.now();for(let w=0;w<=f;w++){if(w>0){const N=h*Math.pow(2,w-1);this.executionStore.addLog({type:"warning",nodeId:t,nodeName:l.data?.label||l.type,message:`Retrying (attempt ${w+1}/${f+1}) after ${N}ms...`}),await new Promise(C=>setTimeout(C,N))}try{if(g=await this.executeWithTimeout(l,i,c,m),!g.success)throw new Error(g.error||"Node execution failed");break}catch(N){if(w===f){const C=Date.now()-v;throw this.executionStore.setNodeResult(t,{success:!1,error:N.message,executionTime:C,attempts:w+1}),this.executionStore.addLog({type:"error",nodeId:t,nodeName:l.data?.label||l.type,message:`Node failed after ${w+1} attempt(s): ${N.message}`,data:{error:N.message,executionTime:C,canRetry:!0,nodeId:t}}),new Error(`Node ${l.data?.label||t} failed: ${N.message}`)}}}const b=Date.now()-v;return this.executionStore.setNodeResult(t,{...g,executionTime:b}),this.executedNodes.add(t),this.executionStore.addLog({type:"success",nodeId:t,nodeName:l.data?.label||l.type,message:`Completed in ${b}ms`,data:g.output?{preview:this.getOutputPreview(g.output),executionTime:b}:void 0}),await new Promise(w=>setTimeout(w,50)),g.loopData?await this.executeLoop(l,g,o):g.outputIndex!==void 0?await this.executeBranch(l,g,o):await this.executeNextNodes(t,g.output,o)}async executeLoop(t,i,o){const{items:s,index:l}=i.loopData,c=t.id,f=[];this.executionStore.addLog({type:"info",nodeId:c,nodeName:t.data?.label||"Loop",message:`Starting loop with ${s.length} items`});const h=this.edges.find(m=>m.source===c&&m.sourceHandle==="output-0");if(h)for(let m=l;m<s.length;m++){if(this.abortController?.signal.aborted)throw new Error("Workflow was stopped");const v={item:s[m],index:m,total:s.length,isFirst:m===0,isLast:m===s.length-1,...i.output};this.executionStore.addLog({type:"info",nodeId:c,message:`Loop iteration ${m+1}/${s.length}`});const b=await this.executeFromNode(h.target,v,new Set);b.success&&f.push(b.output)}this.executionStore.addLog({type:"success",nodeId:c,message:`Loop completed (${s.length} iterations)`});const p=this.edges.find(m=>m.source===c&&m.sourceHandle==="output-1");if(p){const m={...i.output,loopResults:f,itemCount:s.length};return await this.executeFromNode(p.target,m,o)}return{success:!0,output:f}}async executeBranch(t,i,o){const{output:s,outputIndex:l}=i,c=t.id,f=this.edges.find(h=>h.source===c&&h.sourceHandle===`output-${l}`);return f?(this.executionStore.addLog({type:"info",nodeId:c,message:`Taking branch: output ${l+1}`}),await this.executeFromNode(f.target,s,o)):(this.executionStore.addLog({type:"info",nodeId:c,message:`Branch output ${l+1} has no connection, ending path`}),{success:!0,output:s})}async executeNextNodes(t,i,o){const s=this.edges.filter(c=>c.source===t);if(s.length===0)return{success:!0,output:i};const l=[];for(const c of s){this.executionStore?.addEdgeSnapshot&&this.executionStore.addEdgeSnapshot(c.id,i);const f=await this.executeFromNode(c.target,i,o);l.push(f)}return l.length===1?l[0]:{success:!0,outputs:l}}async waitIfPaused(){for(;this.isPaused&&!this.abortController?.signal.aborted;)await new Promise(t=>setTimeout(t,100))}async waitForStep(){return new Promise(t=>{this.stepResolve=t,this.executionStore.addLog({type:"debug",message:"Waiting for step (press Step to continue)..."})})}step(){if(this.stepResolve){const t=this.stepResolve;this.stepResolve=null,t()}}stop(){this.abortController&&this.abortController.abort(),this.stepResolve&&(this.stepResolve(),this.stepResolve=null),this.isRunning=!1,this.isPaused=!1,this.debugMode=!1}pause(){this.isPaused=!0,this.executionStore?.addLog({type:"info",message:"Execution paused"})}resume(){this.isPaused=!1,this.executionStore?.addLog({type:"info",message:"Execution resumed"})}setDebugMode(t){this.debugMode=t}async executeWithTimeout(t,i,o,s){let l,c;const f=new Promise((p,m)=>{c=m}),h=()=>{l&&clearTimeout(l),l=setTimeout(()=>{c(new Error(`Timeout after ${s}ms`))},s)};if(h(),this.abortController?.signal){if(this.abortController.signal.aborted)return Promise.reject(new Error("Workflow was stopped"));this.abortController.signal.addEventListener("abort",()=>{c(new Error("Workflow was stopped"))})}o.heartbeat=()=>{l&&h()};try{return await Promise.race([dp(t,i,o),f,new Promise((m,g)=>{this.abortController?.signal&&this.abortController.signal.addEventListener("abort",()=>{g(new Error("Workflow was stopped"))})})])}finally{l&&clearTimeout(l),l=null}}getConnectedResources(t){const i=this.edges.filter(s=>s.target===t&&["model-slot","memory-slot","tool-slot"].includes(s.targetHandle)),o={model:null,memory:null,tools:[]};for(const s of i){const l=this.nodeMap.get(s.source);if(l)switch(s.targetHandle){case"model-slot":o.model={nodeId:l.id,modelId:l.data?.modelId,modelName:l.data?.modelName,provider:l.data?.provider||"webllm",temperature:l.data?.temperature,maxTokens:l.data?.maxTokens};break;case"memory-slot":o.memory={nodeId:l.id,namespace:l.data?.namespace||"default",mode:l.data?.mode||"query",topK:l.data?.topK||5};break;case"tool-slot":o.tools.push({nodeId:l.id,name:l.data?.label||l.type,type:l.type,description:this.getToolDescription(l.type)});break}}return o}getConnectedTools(t){const i=this.edges.filter(s=>s.source===t),o=[];for(const s of i){const l=this.nodeMap.get(s.target);l&&this.isToolNode(l.type)&&o.push({nodeId:l.id,name:l.data?.label||l.type,type:l.type,description:this.getToolDescription(l.type),inputSchema:{input:"any"}})}return o}isToolNode(t){return["codeExecutor","httpRequest","setVariable","ifElse","loopEach","switchNode","delay","merge"].includes(t)}getToolDescription(t){return{codeExecutor:"Execute JavaScript code. Pass data to process and receive the result.",httpRequest:"Make HTTP requests to APIs. Returns the response data.",setVariable:"Store a value in workflow memory for later use.",ifElse:"Evaluate a condition and return the result.",loopEach:"Iterate through an array of items.",switchNode:"Route based on a value matching specific cases.",delay:"Wait for a specified duration.",merge:"Combine multiple inputs into one output."}[t]||`Execute ${t} node.`}getOutputPreview(t){if(typeof t=="string")return t.slice(0,100)+(t.length>100?"...":"");if(typeof t=="object"){const i=JSON.stringify(t);return i.slice(0,100)+(i.length>100?"...":"")}return String(t)}}const Oo=new XD;function QD(){const e=Ce(v=>v.nodes),t=Ce(v=>v.edges),i=Xe(v=>v.isRunning),o=Xe(v=>v.isPaused),s=Xe(v=>v.isDebugMode),l=Xe(v=>v.setDebugMode),c=Xe(v=>v.setPaused),f=T.useCallback(async()=>{if(i)return;const v=Xe.getState();await Oo.execute(e,t,{executionStore:v},{},{debug:s})},[e,t,i,s]),h=T.useCallback(()=>Oo.stop(),[]),p=T.useCallback(()=>{Oo.pause(),c(!0)},[c]),m=T.useCallback(()=>{Oo.resume(),c(!1)},[c]),g=T.useCallback(()=>Oo.step(),[]);return u.jsxs("div",{className:"execution-controls-panel",children:[u.jsx("div",{className:"exec-btn-group",children:i?u.jsxs(u.Fragment,{children:[u.jsx("button",{className:"exec-btn btn-stop",onClick:h,title:"Stop Execution",children:" Stop"}),o?u.jsx("button",{className:"exec-btn btn-resume",onClick:m,title:"Resume",children:" Resume"}):u.jsx("button",{className:"exec-btn btn-pause",onClick:p,title:"Pause",children:" Pause"}),s&&u.jsx("button",{className:"exec-btn btn-step",onClick:g,title:"Step Next",children:" Step"})]}):u.jsx("button",{className:"exec-btn btn-run",onClick:f,disabled:e.length===0,title:s?"Start Debug Run":"Start Workflow",children:s?" Debug Run":" Run"})}),u.jsx("div",{className:"separator"}),u.jsx("button",{className:`exec-btn btn-toggle-debug ${s?"active":""}`,onClick:()=>l(!s),title:"Toggle Debug Mode",children:s?" Debug On":" Debug Off"})]})}function WD({isOpen:e,onClose:t}){const[i,o]=T.useState("all"),s=Ye(k=>k.availableModels),l=Ye(k=>k.currentModelId),c=Ye(k=>k.status),f=Ye(k=>k.loadProgress),h=Ye(k=>k.downloadedModels),p=Ye(k=>k.downloadProgress),m=Ye(k=>k.setDownloadProgress),g=k=>{m(k,5,"downloading"),window.dispatchEvent(new CustomEvent("downloadModel",{detail:{modelId:k}}))},v=async k=>{window.dispatchEvent(new CustomEvent("loadModel",{detail:{modelId:k}})),t()},b=async k=>{try{const j=await caches.keys();for(const A of j)if(A.includes("webllm")||A.includes("mlc")){const H=await caches.open(A),V=await H.keys();for(const G of V)G.url.includes(k)&&await H.delete(G)}const $=Ye.getState().downloadedModels.filter(A=>A!==k);Ye.setState({downloadedModels:$}),console.log(`Removed model: ${k}`)}catch(j){console.error("Failed to remove model:",j)}},w=async()=>{if(confirm("This will remove ALL downloaded models. Continue?"))try{const k=await caches.keys();for(const _ of k)(_.includes("webllm")||_.includes("mlc")||_.includes("huggingface"))&&await caches.delete(_);const j=await indexedDB.databases();for(const _ of j)(_.name?.includes("webllm")||_.name?.includes("mlc"))&&indexedDB.deleteDatabase(_.name);Ye.setState({downloadedModels:[],downloadProgress:{},currentModelId:null,status:"idle"}),localStorage.removeItem("selectedModel"),console.log("All model caches cleared"),alert("All models removed. Refresh the page to start fresh.")}catch(k){console.error("Failed to clear cache:",k),alert("Failed to clear some caches. Try clearing browser data manually.")}},N=[{id:"all",label:"All"},{id:"recommended",label:" Recommended"},{id:"downloaded",label:" Downloaded"},{id:"gemma",label:" Gemma 3"},{id:"qwen3",label:" Qwen 3"},{id:"qwen",label:"Qwen 2.5"},{id:"medium",label:"Medium"},{id:"tiny",label:"Tiny"}],C=s.filter(k=>i==="all"?!0:i==="downloaded"?h.includes(k.id):k.category===i),S=k=>l===k&&c==="ready"?"active":h.includes(k)?"downloaded":p[k]?.status==="downloading"?"downloading":"available";return e?u.jsx("div",{className:"model-switcher-overlay",onClick:t,children:u.jsxs("div",{className:"model-switcher",onClick:k=>k.stopPropagation(),children:[u.jsxs("header",{className:"ms-header",children:[u.jsx("h2",{children:" Model Manager"}),u.jsx("button",{className:"btn-close",onClick:t,children:""})]}),u.jsx("div",{className:"ms-categories",children:N.map(k=>u.jsxs("button",{className:`cat-btn ${i===k.id?"active":""}`,onClick:()=>o(k.id),children:[k.label,k.id==="downloaded"&&h.length>0&&u.jsx("span",{className:"cat-badge",children:h.length})]},k.id))}),u.jsxs("div",{className:"ms-content",children:[l&&u.jsxs("div",{className:"current-model-banner",children:[u.jsx("span",{className:"banner-icon",children:""}),u.jsxs("span",{className:"banner-text",children:["Active:"," ",s.find(k=>k.id===l)?.name]}),u.jsx("span",{className:`banner-status ${c}`,children:c==="ready"?" Ready":c==="loading"?` ${Math.round(f*100)}%`:""})]}),u.jsx("div",{className:"models-grid",children:C.map(k=>{const j=S(k.id),_=p[k.id]?.progress||0;return u.jsxs("div",{className:`model-card ${j}`,children:[u.jsxs("div",{className:"model-card-header",children:[u.jsx("span",{className:"model-name",children:k.name}),u.jsx("span",{className:"model-size",children:k.size})]}),u.jsx("p",{className:"model-desc",children:k.description}),j==="downloading"&&u.jsxs("div",{className:"download-progress",children:[u.jsx("div",{className:"progress-bar",children:u.jsx("div",{className:"progress-fill",style:{width:`${_}%`}})}),u.jsxs("span",{className:"progress-text",children:[_,"%"]})]}),u.jsxs("div",{className:"model-actions",children:[j==="active"&&u.jsx("span",{className:"status-badge active",children:" Active"}),j==="downloaded"&&u.jsx("button",{className:"btn-load",onClick:()=>v(k.id),children:" Load"}),j==="available"&&u.jsx("button",{className:"btn-download",onClick:()=>g(k.id),children:" Download"}),j==="downloading"&&u.jsx("span",{className:"status-badge downloading",children:"Downloading..."}),(j==="downloaded"||j==="active")&&u.jsx("button",{className:"btn-remove",onClick:$=>{$.stopPropagation(),b(k.id)},title:"Remove from cache",children:""})]})]},k.id)})}),C.length===0&&u.jsx("div",{className:"empty-state",children:u.jsx("p",{children:"No models in this category"})})]}),u.jsxs("footer",{className:"ms-footer",children:[u.jsx("p",{className:"hint",children:" Models are cached locally after download. Larger models = better quality but slower."}),u.jsx("button",{className:"btn-clear-cache",onClick:w,children:" Clear All Cache"})]})]})}):null}const ZD=T.memo(WD);function JD({isOpen:e,onClose:t}){const[i,o]=T.useState({localRequests:0,externalRequests:0,modelsLoaded:[],storageUsed:0,lastActivity:null});T.useEffect(()=>{navigator.storage?.estimate&&navigator.storage.estimate().then(({usage:p,quota:m})=>{o(g=>({...g,storageUsed:p||0,storageQuota:m||0}))});const c=window.fetch;let f=0,h=0;return window.fetch=function(...p){const m=p[0]?.toString()||"";return m.startsWith("/")||m.includes("localhost")?f++:m.startsWith("http")&&h++,o(g=>({...g,localRequests:f,externalRequests:h,lastActivity:new Date().toISOString()})),c.apply(this,p)},()=>{window.fetch=c}},[]);const s=c=>{if(!c)return"0 B";const f=1024,h=["B","KB","MB","GB"],p=Math.floor(Math.log(c)/Math.log(f));return`${(c/Math.pow(f,p)).toFixed(1)} ${h[p]}`},l=i.externalRequests===0?100:Math.max(0,100-i.externalRequests/(i.localRequests+1)*100);return e?u.jsx("div",{className:"privacy-monitor-overlay",onClick:t,children:u.jsxs("div",{className:"privacy-monitor",onClick:c=>c.stopPropagation(),children:[u.jsxs("header",{className:"pm-header",children:[u.jsx("h2",{children:" Privacy Monitor"}),u.jsx("button",{className:"btn-close",onClick:t,children:""})]}),u.jsxs("div",{className:"pm-content",children:[u.jsxs("div",{className:"privacy-score-section",children:[u.jsxs("div",{className:`privacy-score ${l===100?"perfect":l>80?"good":"warning"}`,children:[u.jsxs("span",{className:"score-value",children:[Math.round(l),"%"]}),u.jsx("span",{className:"score-label",children:"Local Processing"})]}),l===100&&u.jsx("div",{className:"privacy-badge",children:" Zero Cloud Leakage"})]}),u.jsxs("div",{className:"pm-stats-grid",children:[u.jsxs("div",{className:"pm-stat",children:[u.jsx("span",{className:"stat-icon",children:""}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-value",children:i.localRequests}),u.jsx("span",{className:"stat-label",children:"Local Requests"})]})]}),u.jsxs("div",{className:"pm-stat",children:[u.jsx("span",{className:"stat-icon",children:""}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-value",children:i.externalRequests}),u.jsx("span",{className:"stat-label",children:"External Calls"})]})]}),u.jsxs("div",{className:"pm-stat",children:[u.jsx("span",{className:"stat-icon",children:""}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-value",children:s(i.storageUsed)}),u.jsx("span",{className:"stat-label",children:"Local Storage"})]})]}),u.jsxs("div",{className:"pm-stat",children:[u.jsx("span",{className:"stat-icon",children:""}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-value",children:"WebLLM"}),u.jsx("span",{className:"stat-label",children:"AI Engine"})]})]})]}),u.jsxs("div",{className:"pm-features",children:[u.jsx("h3",{children:"Privacy Features"}),u.jsxs("ul",{children:[u.jsx("li",{children:" All AI runs locally in your browser"}),u.jsx("li",{children:" No data sent to external APIs"}),u.jsx("li",{children:" Workflows stored in IndexedDB"}),u.jsx("li",{children:" No telemetry or tracking"}),u.jsx("li",{children:" Open source & auditable"})]})]}),u.jsxs("div",{className:"pm-storage",children:[u.jsx("h3",{children:"Local Data"}),u.jsx("div",{className:"storage-bar",children:u.jsx("div",{className:"storage-used",style:{width:`${Math.min(100,i.storageUsed/(i.storageQuota||1)*100)}%`}})}),u.jsxs("span",{className:"storage-text",children:[s(i.storageUsed)," /"," ",s(i.storageQuota)]})]})]})]})}):null}const KD=T.memo(JD);function e_(){const[e,t]=T.useState(!1),[i,o]=T.useState(!1),s=T.useCallback(()=>{window.dispatchEvent(new CustomEvent("toggleOverseer"))},[]);return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"ai-controls-panel",children:[u.jsxs("button",{className:"ai-btn overseer-btn",onClick:s,title:"Toggle Overseer Agent",children:[" ",u.jsx("span",{children:"Chat with Overseer"})]}),u.jsx("div",{className:"divider"}),u.jsx("button",{className:`ai-btn ${i?"active":""}`,onClick:()=>o(!0),title:"Switch Model",children:""}),u.jsx("button",{className:`ai-btn ${e?"active":""}`,onClick:()=>t(!0),title:"Privacy Monitor",children:""})]}),e&&Th.createPortal(u.jsx(KD,{onClose:()=>t(!1),isOpen:!0}),document.body),i&&Th.createPortal(u.jsx(ZD,{onClose:()=>o(!1),isOpen:!0}),document.body)]})}function t_({isOpen:e,onClose:t,onSelectNode:i,insertPosition:o}){const[s,l]=T.useState(""),[c,f]=T.useState(0),h=T.useRef(null),p=T.useRef(null),m=T.useMemo(()=>Object.values(Si).map(C=>({...C,categoryName:Hr[C.category]?.name||C.category,categoryColor:Hr[C.category]?.color||"#666"})),[]),g=T.useMemo(()=>{if(!s.trim())return m;const C=s.toLowerCase();return m.filter(S=>S.name.toLowerCase().includes(C)||S.description?.toLowerCase().includes(C)||S.categoryName.toLowerCase().includes(C))},[m,s]),v=T.useMemo(()=>{const C={};return g.forEach(S=>{C[S.category]||(C[S.category]={name:S.categoryName,color:S.categoryColor,nodes:[]}),C[S.category].nodes.push(S)}),C},[g]),b=T.useMemo(()=>{const C=[];return Object.entries(v).forEach(([,S])=>{S.nodes.forEach(k=>C.push(k))}),C},[v]);T.useEffect(()=>{e&&h.current&&(h.current.focus(),l(""),f(0))},[e]),T.useEffect(()=>{if(p.current&&b.length>0){const C=p.current.querySelector(".node-item.selected");C&&C.scrollIntoView({block:"nearest"})}},[c,b.length]);const w=T.useCallback(C=>{switch(C.key){case"ArrowDown":C.preventDefault(),f(S=>Math.min(S+1,b.length-1));break;case"ArrowUp":C.preventDefault(),f(S=>Math.max(S-1,0));break;case"Enter":C.preventDefault(),b[c]&&(i(b[c].type,o),t());break;case"Escape":t();break}},[b,c,i,o,t]),N=T.useCallback(C=>{i(C,o),t()},[i,o,t]);return e?u.jsx("div",{className:"command-palette-overlay",onClick:t,children:u.jsxs("div",{className:"command-palette",onClick:C=>C.stopPropagation(),onKeyDown:w,children:[u.jsxs("div",{className:"palette-header",children:[u.jsx("span",{className:"search-icon",children:""}),u.jsx("input",{ref:h,type:"text",className:"palette-search",placeholder:"Search nodes... (Esc to close)",value:s,onChange:C=>{l(C.target.value),f(0)}}),u.jsx("span",{className:"shortcut-hint",children:"K"})]}),u.jsxs("div",{className:"palette-content",ref:p,children:[Object.entries(v).map(([C,S])=>u.jsxs("div",{className:"node-category",children:[u.jsx("div",{className:"category-header",style:{"--cat-color":S.color},children:S.name}),S.nodes.map(k=>{const j=b.findIndex(_=>_.type===k.type);return u.jsxs("div",{className:`node-item ${j===c?"selected":""}`,onClick:()=>N(k.type),onMouseEnter:()=>f(j),children:[u.jsx("span",{className:"node-icon",children:k.icon}),u.jsxs("div",{className:"node-info",children:[u.jsx("span",{className:"node-name",children:k.name}),u.jsx("span",{className:"node-desc",children:k.description})]})]},k.type)})]},C)),b.length===0&&u.jsxs("div",{className:"no-results",children:['No nodes match "',s,'"']})]})]})}):null}const n_=T.memo(t_);function i_({onClose:e}){const t=Xe(h=>h.logs),i=Xe(h=>h.nodeResults),[o,s]=T.useState("timeline"),l=T.useMemo(()=>{const h={},p={total:0,byNode:{}};let m=0,g=0;Object.entries(i).forEach(([b,w])=>{m++,w.executionTime&&(g+=w.executionTime,h[b]||(h[b]={times:[],avg:0,max:0,min:1/0}),h[b].times.push(w.executionTime),h[b].max=Math.max(h[b].max,w.executionTime),h[b].min=Math.min(h[b].min,w.executionTime),h[b].avg=h[b].times.reduce((N,C)=>N+C,0)/h[b].times.length),(w.error||w.success===!1)&&(p.total++,p.byNode[b]=(p.byNode[b]||0)+1)});const v=Object.entries(h).map(([b,w])=>({nodeId:b,avg:w.avg,max:w.max})).sort((b,w)=>w.avg-b.avg).slice(0,5);return{totalExecutions:m,totalTime:g,avgTime:m>0?g/m:0,errorCount:p,slowestNodes:v,nodeTimings:h}},[i]),c=T.useMemo(()=>t.slice(-50).reverse(),[t]),f=h=>h<1e3?`${Math.round(h)}ms`:`${(h/1e3).toFixed(2)}s`;return u.jsx("div",{className:"analytics-overlay",onClick:e,children:u.jsxs("div",{className:"analytics-panel",onClick:h=>h.stopPropagation(),children:[u.jsxs("div",{className:"analytics-header",children:[u.jsx("h2",{children:" Execution Analytics"}),u.jsx("button",{className:"close-btn",onClick:e,children:""})]}),u.jsxs("div",{className:"analytics-tabs",children:[u.jsx("button",{className:`tab ${o==="timeline"?"active":""}`,onClick:()=>s("timeline"),children:"Timeline"}),u.jsx("button",{className:`tab ${o==="performance"?"active":""}`,onClick:()=>s("performance"),children:"Performance"}),u.jsxs("button",{className:`tab ${o==="errors"?"active":""}`,onClick:()=>s("errors"),children:["Errors"," ",l.errorCount.total>0&&u.jsx("span",{className:"error-badge",children:l.errorCount.total})]})]}),u.jsxs("div",{className:"analytics-body",children:[u.jsxs("div",{className:"stats-grid",children:[u.jsxs("div",{className:"stat-card",children:[u.jsx("span",{className:"stat-value",children:l.totalExecutions}),u.jsx("span",{className:"stat-label",children:"Executions"})]}),u.jsxs("div",{className:"stat-card",children:[u.jsx("span",{className:"stat-value",children:f(l.avgTime)}),u.jsx("span",{className:"stat-label",children:"Avg Time"})]}),u.jsxs("div",{className:"stat-card",children:[u.jsx("span",{className:"stat-value",children:f(l.totalTime)}),u.jsx("span",{className:"stat-label",children:"Total Time"})]}),u.jsxs("div",{className:"stat-card error",children:[u.jsx("span",{className:"stat-value",children:l.errorCount.total}),u.jsx("span",{className:"stat-label",children:"Errors"})]})]}),o==="timeline"&&u.jsxs("div",{className:"timeline-section",children:[u.jsx("h3",{children:"Recent Activity"}),u.jsx("div",{className:"timeline-list",children:c.length>0?c.map((h,p)=>u.jsxs("div",{className:`timeline-item ${h.type}`,children:[u.jsx("span",{className:"timeline-icon",children:h.type==="success"?"":h.type==="error"?"":h.type==="warning"?"":""}),u.jsx("span",{className:"timeline-node",children:h.nodeName}),u.jsx("span",{className:"timeline-msg",children:h.message})]},p)):u.jsx("div",{className:"empty-state",children:"No execution history yet"})})]}),o==="performance"&&u.jsxs("div",{className:"performance-section",children:[u.jsx("h3",{children:"Slowest Nodes"}),u.jsx("div",{className:"performance-list",children:l.slowestNodes.length>0?l.slowestNodes.map((h,p)=>u.jsxs("div",{className:"performance-item",children:[u.jsxs("span",{className:"rank",children:["#",p+1]}),u.jsx("span",{className:"node-id",children:h.nodeId.split("-")[0]}),u.jsx("div",{className:"timing-bar",style:{width:`${Math.min(h.avg/(l.slowestNodes[0]?.avg||1)*100,100)}%`}}),u.jsx("span",{className:"timing-value",children:f(h.avg)})]},h.nodeId)):u.jsx("div",{className:"empty-state",children:"No performance data yet"})})]}),o==="errors"&&u.jsxs("div",{className:"errors-section",children:[u.jsx("h3",{children:"Error Log"}),u.jsx("div",{className:"errors-list",children:l.errorCount.total>0?Object.entries(l.errorCount.byNode).map(([h,p])=>u.jsxs("div",{className:"error-item",children:[u.jsxs("span",{className:"error-count",children:[p,"x"]}),u.jsx("span",{className:"error-node",children:h.split("-")[0]})]},h)):u.jsx("div",{className:"empty-state",children:" No errors!"})})]})]})]})})}const r_=T.memo(i_),o_={manualTrigger:P2,scheduleTrigger:U2,webhookTrigger:F2,errorTrigger:Y2,browserEventTrigger:W2,httpRequest:aD,codeExecutor:J2,setVariable:eD,fileSystem:rD,localStorage:nD,pythonExecutor:qD,ifElse:lD,loop:uD,switchNode:fD,merge:pD,aiAgent:ED,chatModel:CD,vectorMemory:TD,waitForApproval:MD,subWorkflow:_D,textToSpeech:BD,imageGeneration:$D,semanticRouter:RD,evaluator:zD,output:VD,groupNode:gD},a_={animated:YD};function s_(){const e=T.useRef(null),{screenToFlowPosition:t,fitView:i,zoomIn:o,zoomOut:s}=ou(),[l,c]=T.useState(null),[f,h]=T.useState(null),[p,m]=T.useState(!0),[g,v]=T.useState(!1),[b,w]=T.useState(!1),{zoom:N}=DM(),C=Ce(te=>te.nodes),S=Ce(te=>te.edges),k=Ce(te=>te.onNodesChange),j=Ce(te=>te.onEdgesChange),_=Ce(te=>te.onConnect),$=Ce(te=>te.addNode),A=Ce(te=>te.deleteNode),H=Ce(te=>te.setSelectedNode),V=Ce(te=>te.selectedNodeId),G=Ce(te=>te.getWorkflowData),I=Xo(),z=Xe(te=>te.currentNodeId),U=Xe(te=>te.isRunning),Z=T.useCallback(te=>c2(te,C,S),[C,S]),M=T.useCallback(()=>{c(null)},[]),P=T.useCallback(()=>{H(null),c(null)},[H]),O=T.useCallback((te,re)=>{te.preventDefault(),H(re.id),c({x:te.clientX,y:te.clientY,type:"node",nodeId:re.id})},[H]),q=T.useCallback(te=>{te.preventDefault();const re=t({x:te.clientX,y:te.clientY});c({x:te.clientX,y:te.clientY,type:"pane",position:re})},[t]),[Y,Q]=T.useState(null);T.useEffect(()=>{const te=de=>{const{edgeId:ae}=de.detail;S.find(xe=>xe.id===ae)&&(Ce.getState().onEdgesChange([{id:ae,type:"remove"}]),I.info("Connection deleted"))},re=de=>{const{edgeId:ae,position:fe}=de.detail;Q(ae),c({x:fe.x+(e.current?.getBoundingClientRect().left||0),y:fe.y+(e.current?.getBoundingClientRect().top||0),type:"insert",position:{x:fe.x,y:fe.y}})};return window.addEventListener("deleteEdge",te),window.addEventListener("addNodeOnEdge",re),()=>{window.removeEventListener("deleteEdge",te),window.removeEventListener("addNodeOnEdge",re)}},[S,I]);const D=T.useCallback(te=>{const re=C.find(ae=>ae.id===V),de=ae=>{if(l?.position)if(l.type==="insert"&&Y){const fe=S.find(xe=>xe.id===Y);if(fe){const xe=tr(ae,l.position);$(xe);const je={id:`e${fe.source}-${xe.id}`,source:fe.source,sourceHandle:fe.sourceHandle,target:xe.id,targetHandle:"input-0",type:"animated"},ve={id:`e${xe.id}-${fe.target}`,source:xe.id,sourceHandle:"output-0",target:fe.target,targetHandle:fe.targetHandle,type:"animated"};Ce.getState().onEdgesChange([{id:Y,type:"remove"}]);const{edges:Ee,setEdges:De}=Ce.getState();De([...Ee.filter(qe=>qe.id!==Y),je,ve]),I.success("Node inserted")}Q(null)}else $(tr(ae,l.position))};switch(te){case"delete":V&&(A(V),H(null),I.info("Node deleted"));break;case"duplicate":if(re){const ae=tr(re.type,{x:re.position.x+50,y:re.position.y+50});ae.data={...re.data,label:`${re.data.label} (copy)`},$(ae),I.success("Node duplicated")}break;case"copy":re&&(h({...re}),I.info("Node copied"));break;case"cut":re&&(h({...re}),A(V),H(null),I.info("Node cut"));break;case"paste":if(f&&l?.position){const ae=tr(f.type,l.position);ae.data={...f.data,label:`${f.data.label} (paste)`},$(ae),I.success("Node pasted")}break;case"addTrigger":de("manualTrigger");break;case"addHTTP":de("httpRequest");break;case"addAI":de("aiAgent");break;case"codeExecutor":de("codeExecutor");break;case"setVariable":de("setVariable");break;case"ifElse":de("ifElse");break;case"textToSpeech":de("textToSpeech");break;case"output":de("output");break;case"fitView":i({padding:.2});break;case"zoomIn":o();break;case"zoomOut":s();break}c(null)},[C,S,V,A,H,$,f,l,Y,i,o,s,I]);T.useEffect(()=>{const te=re=>{if(re.target.tagName==="INPUT"||re.target.tagName==="TEXTAREA")return;const de=re.ctrlKey||re.metaKey;if(de&&re.key==="s"){re.preventDefault();const ae=G();localStorage.setItem("flownode-workflow",JSON.stringify(ae)),I.success("Workflow saved")}if(de&&re.key==="c"&&V){const ae=C.find(fe=>fe.id===V);ae&&(h({...ae}),I.info("Node copied"))}if(de&&re.key==="v"&&f){const ae=tr(f.type,{x:f.position.x+100,y:f.position.y+100});ae.data={...f.data},$(ae),I.success("Node pasted")}if(de&&re.key==="d"&&V){re.preventDefault();const ae=C.find(fe=>fe.id===V);if(ae){const fe=tr(ae.type,{x:ae.position.x+50,y:ae.position.y+50});fe.data={...ae.data,label:`${ae.data.label} (copy)`},$(fe),H(fe.id),I.success("Node duplicated")}}de&&(re.key==="+"||re.key==="=")&&(re.preventDefault(),o()),de&&re.key==="-"&&(re.preventDefault(),s()),de&&re.key==="0"&&(re.preventDefault(),i({padding:.2})),de&&re.key==="k"&&(re.preventDefault(),v(!0)),re.shiftKey&&re.key==="A"&&(re.preventDefault(),w(ae=>!ae))};return window.addEventListener("keydown",te),()=>window.removeEventListener("keydown",te)},[C,V,f,$,H,G,i,o,s,I]);const B=T.useCallback(te=>{te.preventDefault(),te.dataTransfer.dropEffect="move"},[]),F=T.useCallback(te=>{te.preventDefault();const re=te.dataTransfer.getData("application/reactflow");if(!re||!Si[re])return;const de=t({x:te.clientX,y:te.clientY}),ae=tr(re,de);$(ae)},[t,$]),L=T.useMemo(()=>({type:"animated",style:{stroke:"var(--edge-color)",strokeWidth:2}}),[]),ie=T.useCallback(te=>U&&te.id===z?"var(--color-success)":lu(te.type),[U,z]);return u.jsxs("div",{className:"workflow-editor",ref:e,children:[u.jsxs(kM,{nodes:C,edges:S,onNodesChange:k,onEdgesChange:j,onConnect:_,onNodeClick:M,onPaneClick:P,onNodeContextMenu:O,onPaneContextMenu:q,onDragOver:B,onDrop:F,nodeTypes:o_,edgeTypes:a_,isValidConnection:Z,defaultEdgeOptions:L,snapToGrid:!0,snapGrid:[15,15],minZoom:.5,maxZoom:5,deleteKeyCode:["Backspace","Delete"],proOptions:{hideAttribution:!0},children:[u.jsx(zM,{variant:"dots",gap:20,size:1,color:"var(--border-color)"}),u.jsxs("div",{className:`minimap-container ${p?"expanded":"collapsed"}`,children:[u.jsx("button",{className:"minimap-toggle",onClick:()=>m(!p),title:p?"Hide minimap":"Show minimap",children:""}),p&&u.jsx(t2,{nodeColor:ie,maskColor:"rgba(10, 10, 15, 0.8)",className:"workflow-minimap",pannable:!0,zoomable:!0})]}),u.jsxs("div",{className:"view-controls-panel",children:[u.jsxs("div",{className:"zoom-controls",children:[u.jsx("button",{className:"zoom-btn",onClick:()=>s(),title:"Zoom out (Ctrl+-)",children:""}),u.jsxs("span",{className:"zoom-level",children:[Math.round(N*100),"%"]}),u.jsx("button",{className:"zoom-btn",onClick:()=>o(),title:"Zoom in (Ctrl++)",children:"+"})]}),u.jsx("button",{className:"view-btn",onClick:()=>i({padding:.2}),title:"Fit to screen (Ctrl+0)",children:""})]}),u.jsx(e_,{}),u.jsx(QD,{})]}),l&&u.jsx(f2,{x:l.x,y:l.y,type:l.type,onAction:D,onClose:()=>c(null)}),u.jsx(n_,{isOpen:g,onClose:()=>v(!1),onSelectNode:(te,re)=>{$(tr(te,re||{x:400,y:300}))},insertPosition:l?.position||{x:400,y:300}}),b&&u.jsx(r_,{onClose:()=>w(!1)}),C.length===0&&u.jsxs("div",{className:"workflow-empty-state",children:[u.jsx("div",{className:"empty-icon",children:""}),u.jsx("h3",{children:"Build Your Workflow"}),u.jsx("p",{children:"Drag nodes from the sidebar to get started"})]})]})}const _h=[{id:"api-fetch",name:"API Fetch & Transform",description:"Fetch data from an API and process it with code",category:"api",icon:"",nodes:[{id:"trigger-1",type:"manualTrigger",position:{x:100,y:200},data:{label:"Start"}},{id:"http-1",type:"httpRequest",position:{x:350,y:200},data:{label:"Fetch Data",method:"GET",url:"https://jsonplaceholder.typicode.com/posts/1",timeout:3e4}},{id:"code-1",type:"codeExecutor",position:{x:600,y:200},data:{label:"Transform",code:`// Process the API response
const { data } = input;
return {
  title: data.title.toUpperCase(),
  body: data.body.substring(0, 100) + "...",
  processed: true
};`}}],edges:[{id:"e1-2",source:"trigger-1",target:"http-1",sourceHandle:"output-0",targetHandle:"input-0"},{id:"e2-3",source:"http-1",target:"code-1",sourceHandle:"output-0",targetHandle:"input-0"}]},{id:"conditional-routing",name:"Conditional Routing",description:"Route data based on conditions using If/Else",category:"logic",icon:"",nodes:[{id:"trigger-1",type:"manualTrigger",position:{x:100,y:250},data:{label:"Input"}},{id:"setvar-1",type:"setVariable",position:{x:320,y:250},data:{label:"Set Status",variableName:"status",value:"active",mode:"set"}},{id:"ifelse-1",type:"ifElse",position:{x:540,y:250},data:{label:"Check Status",condition:"status",operator:"equals",compareValue:"active"}},{id:"code-true",type:"codeExecutor",position:{x:780,y:150},data:{label:"Active Path",code:'return { ...input, message: "User is ACTIVE" };'}},{id:"code-false",type:"codeExecutor",position:{x:780,y:350},data:{label:"Inactive Path",code:'return { ...input, message: "User is INACTIVE" };'}}],edges:[{id:"e1",source:"trigger-1",target:"setvar-1",sourceHandle:"output-0",targetHandle:"input-0"},{id:"e2",source:"setvar-1",target:"ifelse-1",sourceHandle:"output-0",targetHandle:"input-0"},{id:"e3",source:"ifelse-1",target:"code-true",sourceHandle:"output-0",targetHandle:"input-0"},{id:"e4",source:"ifelse-1",target:"code-false",sourceHandle:"output-1",targetHandle:"input-0"}]},{id:"loop-processing",name:"Loop Over Items",description:"Process an array of items one by one",category:"data",icon:"",nodes:[{id:"trigger-1",type:"manualTrigger",position:{x:100,y:200},data:{label:"Start"}},{id:"setvar-1",type:"setVariable",position:{x:320,y:200},data:{label:"Create Array",variableName:"items",value:"{{ [1, 2, 3, 4, 5] }}",mode:"set"}},{id:"loop-1",type:"loop",position:{x:540,y:200},data:{label:"Loop Items",itemsPath:"items",maxIterations:100}},{id:"code-1",type:"codeExecutor",position:{x:760,y:120},data:{label:"Process Item",code:`return { 
  item: input.item,
  squared: input.item * input.item,
  index: input.index 
};`}},{id:"code-done",type:"codeExecutor",position:{x:760,y:280},data:{label:"Done",code:`return { 
  completed: true, 
  results: input.loopResults 
};`}}],edges:[{id:"e1",source:"trigger-1",target:"setvar-1",sourceHandle:"output-0",targetHandle:"input-0"},{id:"e2",source:"setvar-1",target:"loop-1",sourceHandle:"output-0",targetHandle:"input-0"},{id:"e3",source:"loop-1",target:"code-1",sourceHandle:"output-0",targetHandle:"input-0"},{id:"e4",source:"loop-1",target:"code-done",sourceHandle:"output-1",targetHandle:"input-0"}]},{id:"ai-chat",name:"AI Chat Assistant",description:"Send text to AI and get a response",category:"ai",icon:"",nodes:[{id:"trigger-1",type:"manualTrigger",position:{x:100,y:200},data:{label:"User Input"}},{id:"setvar-1",type:"setVariable",position:{x:340,y:200},data:{label:"Set Question",variableName:"question",value:"What is the capital of France?",mode:"set"}},{id:"ai-1",type:"aiAgent",position:{x:580,y:200},data:{label:"AI Assistant",systemPrompt:"You are a helpful assistant. Answer concisely.",modelId:"gemma-2-2b-it-q4f16_1-MLC",temperature:.7,maxTokens:500}}],edges:[{id:"e1",source:"trigger-1",target:"setvar-1",sourceHandle:"output-0",targetHandle:"input-0"},{id:"e2",source:"setvar-1",target:"ai-1",sourceHandle:"output-0",targetHandle:"input-0"}]},{id:"data-pipeline",name:"Data Pipeline",description:"Fetch, filter, and aggregate data",category:"data",icon:"",nodes:[{id:"trigger-1",type:"manualTrigger",position:{x:100,y:200},data:{label:"Start Pipeline"}},{id:"http-1",type:"httpRequest",position:{x:320,y:200},data:{label:"Fetch Users",method:"GET",url:"https://jsonplaceholder.typicode.com/users",timeout:3e4}},{id:"code-filter",type:"codeExecutor",position:{x:540,y:200},data:{label:"Filter & Map",code:`// Filter and transform the data
const users = input.data;
return {
  users: users.map(u => ({
    id: u.id,
    name: u.name,
    email: u.email,
    city: u.address.city
  })),
  count: users.length
};`}},{id:"code-aggregate",type:"codeExecutor",position:{x:760,y:200},data:{label:"Aggregate",code:`// Create summary
return {
  summary: \`Processed \${input.count} users\`,
  users: input.users,
  timestamp: new Date().toISOString()
};`}}],edges:[{id:"e1",source:"trigger-1",target:"http-1",sourceHandle:"output-0",targetHandle:"input-0"},{id:"e2",source:"http-1",target:"code-filter",sourceHandle:"output-0",targetHandle:"input-0"},{id:"e3",source:"code-filter",target:"code-aggregate",sourceHandle:"output-0",targetHandle:"input-0"}]},{id:"poem-speech",name:"Poem to Speech",description:"Generate a poem using AI and read it out loud",category:"ai",icon:"",nodes:[{id:"trigger-1",type:"manualTrigger",position:{x:100,y:200},data:{label:"Start",description:"Enter your poem topic",inputFields:[{name:"topic",type:"text",label:"Poem Topic",placeholder:"Enter a topic for the poem...",required:!0}]}},{id:"ai-1",type:"aiAgent",position:{x:350,y:200},data:{label:"Poem Writer",systemPrompt:"You are a creative poet. Write beautiful, evocative poems based on the given topic. Keep poems to 4-8 lines. Output ONLY the poem, no commentary.",reasoningMode:"direct",temperature:.8,maxTokens:500}},{id:"tts-1",type:"textToSpeech",position:{x:600,y:200},data:{label:"Speak Poem",provider:"webSpeech",voice:"default",speed:.9,pitch:1,autoPlay:!0}},{id:"output-1",type:"output",position:{x:850,y:200},data:{label:"Final Output",outputType:"console",formatJson:!1}}],edges:[{id:"e1",source:"trigger-1",target:"ai-1",sourceHandle:"output-0",targetHandle:"input-0",type:"animated"},{id:"e2",source:"ai-1",target:"tts-1",sourceHandle:"output-0",targetHandle:"input-0",type:"animated"},{id:"e3",source:"tts-1",target:"output-1",sourceHandle:"output-0",targetHandle:"input-0",type:"animated"}]}],Wa=l2();function l_(){const[e,t]=T.useState(null),[i,o]=T.useState(""),[s,l]=T.useState(!1),c=Ce(S=>S.loadWorkflow),f=Xo(),h=e?Object.values(Hr).find(S=>S.name===e):null,p=T.useMemo(()=>e?Wa[e]||[]:[],[e]),m=T.useMemo(()=>{if(!i.trim())return p;const S=i.toLowerCase();return p.filter(k=>k.name.toLowerCase().includes(S)||k.description.toLowerCase().includes(S))},[p,i]),g=T.useMemo(()=>{if(!i.trim())return Object.entries(Wa);const S=i.toLowerCase();return Object.entries(Wa).filter(([k,j])=>k.toLowerCase().includes(S)?!0:j.some(_=>_.name.toLowerCase().includes(S)||_.description.toLowerCase().includes(S)))},[i]),v=T.useCallback(S=>{t(S),o("")},[]),b=T.useCallback(()=>{t(null),o("")},[]),w=T.useCallback((S,k)=>{S.dataTransfer.setData("application/reactflow",k),S.dataTransfer.effectAllowed="move"},[]),N=T.useCallback(S=>{c({nodes:S.nodes,edges:S.edges}),f.success(`Loaded template: ${S.name}`)},[c,f]),C=Object.values(Wa).flat().length;return u.jsxs("aside",{className:"node-sidebar",children:[u.jsxs("div",{className:"sidebar-header",children:[e?u.jsxs("div",{className:"breadcrumb",children:[u.jsx("button",{className:"back-btn",onClick:b,title:"Back to folders",children:""}),u.jsxs("span",{className:"current-folder",style:{"--folder-color":h?.color},children:[" ",e]})]}):u.jsx("h2",{children:" Nodes"}),u.jsx("div",{className:"header-actions",children:u.jsx("button",{className:`templates-toggle ${s?"active":""}`,onClick:()=>l(!s),title:"Templates",children:""})})]}),s&&u.jsxs("div",{className:"templates-panel",children:[u.jsxs("div",{className:"templates-header",children:[u.jsx("h3",{children:" Templates"}),u.jsx("span",{className:"templates-count",children:_h.length})]}),u.jsx("div",{className:"templates-list",children:_h.map(S=>u.jsxs("button",{className:"template-item",onClick:()=>N(S),children:[u.jsx("span",{className:"template-icon",children:S.icon}),u.jsxs("div",{className:"template-info",children:[u.jsx("span",{className:"template-name",children:S.name}),u.jsx("span",{className:"template-desc",children:S.description})]})]},S.id))})]}),!s&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"sidebar-search",children:u.jsxs("div",{className:"search-wrapper",children:[u.jsx("span",{className:"search-icon",children:""}),u.jsx("input",{type:"text",placeholder:e?"Search in folder...":"Search nodes...",value:i,onChange:S=>o(S.target.value),className:"node-search-input"}),i&&u.jsx("button",{className:"search-clear",onClick:()=>o(""),children:""})]})}),u.jsxs("div",{className:"sidebar-content",children:[!e&&u.jsxs("div",{className:"folder-list",children:[g.map(([S,k])=>{const j=Object.values(Hr).find(_=>_.name===S);return u.jsxs("button",{className:"folder-item",onClick:()=>v(S),style:{"--folder-color":j?.color},children:[u.jsx("span",{className:"folder-icon",children:""}),u.jsxs("div",{className:"folder-info",children:[u.jsx("span",{className:"folder-name",children:S}),u.jsx("span",{className:"folder-desc",children:j?.description})]}),u.jsx("span",{className:"folder-count",children:k.length}),u.jsx("span",{className:"folder-arrow",children:""})]},S)}),i&&g.length===0&&u.jsx("div",{className:"no-results",children:u.jsxs("p",{children:['No folders match "',i,'"']})})]}),e&&u.jsxs("div",{className:"node-list",children:[m.map(S=>u.jsxs("div",{className:"draggable-node",draggable:!0,onDragStart:k=>w(k,S.type),style:{"--node-color":h?.color},title:S.description,children:[u.jsx("span",{className:"node-icon",children:S.icon}),u.jsxs("div",{className:"node-info",children:[u.jsx("span",{className:"node-name",children:S.name}),u.jsx("span",{className:"node-description",children:S.description})]})]},S.type)),i&&m.length===0&&u.jsxs("div",{className:"no-results",children:[u.jsxs("p",{children:['No nodes match "',i,'"']}),u.jsx("button",{onClick:()=>o(""),children:"Clear"})]}),!i&&m.length===0&&u.jsx("div",{className:"no-results",children:u.jsx("p",{children:"This folder is empty"})})]})]})]}),u.jsx("div",{className:"sidebar-footer",children:u.jsx("p",{className:"tip",children:s?"Click template to load":e?`${m.length} nodes  Drag to canvas`:`${C} nodes in ${Object.keys(Wa).length} folders`})})]})}const c_=T.memo(l_);function u_({onClose:e}){return u.jsx("div",{className:"modal-overlay",onClick:e,children:u.jsxs("div",{className:"modal-content",onClick:t=>t.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:" Getting Started"}),u.jsx("button",{className:"btn-close",onClick:e,children:""})]}),u.jsxs("div",{className:"modal-body",children:[u.jsxs("div",{className:"tutorial-intro",children:[u.jsxs("p",{children:["Welcome to ",u.jsx("strong",{children:"IOSANS"}),". You can learn the basics by reading below, or take an interactive tour of the interface."]}),u.jsx("button",{className:"btn-primary",style:{width:"100%",padding:"12px",margin:"16px 0",fontSize:"1.1em"},onClick:()=>{e(),window.dispatchEvent(new Event("startTour"))},children:" Start Guided Onboarding"})]}),u.jsx("hr",{style:{borderColor:"rgba(255,255,255,0.1)",margin:"20px 0"}}),u.jsx("h3",{children:" Quick Start Guide"}),u.jsxs("div",{className:"tutorial-step",children:[u.jsx("h4",{children:"1. Start with a Trigger"}),u.jsxs("p",{children:["Drag a ",u.jsx("strong",{children:"Manual Trigger"})," from the sidebar (green category). This tells the workflow when to start running."]})]}),u.jsxs("div",{className:"tutorial-step",children:[u.jsx("h4",{children:"2. Add Intelligence"}),u.jsxs("p",{children:["Add an ",u.jsx("strong",{children:"AI Agent"}),' node. Configure its system prompt to define its personality and task (e.g., "Summarize this text").']})]}),u.jsxs("div",{className:"tutorial-step",children:[u.jsx("h4",{children:"3. Connect & Flow"}),u.jsxs("p",{children:["Connect nodes by dragging from"," ",u.jsx("span",{style:{color:"var(--color-success)"},children:"Source"})," to"," ",u.jsx("span",{style:{color:"var(--text-muted)"},children:"Target"})," ","handles. Data flows along these lines."]})]}),u.jsxs("div",{className:"tutorial-step",children:[u.jsx("h4",{children:"4. View Results"}),u.jsxs("p",{children:["Add an ",u.jsx("strong",{children:"Output Node"})," to visualize the final result, or inspect the ",u.jsx("strong",{children:"Logs Panel"})," on the right for detailed execution steps."]})]}),u.jsxs("div",{className:"tip-box",children:[u.jsx("strong",{children:"Pro Tip:"})," Use the ",u.jsx("strong",{children:"Overseer Agent"})," ","(Eye icon) to help you build complex workflows automatically!"]})]})]})})}const d_=T.memo(u_);function f_(e,t){const i={};return(e[e.length-1]===""?[...e,""]:e).join((i.padRight?" ":"")+","+(i.padLeft===!1?"":" ")).trim()}const h_=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,p_=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,m_={};function Iv(e,t){return(m_.jsx?p_:h_).test(e)}const g_=/[ \t\n\f\r]/g;function y_(e){return typeof e=="object"?e.type==="text"?Bv(e.value):!1:Bv(e)}function Bv(e){return e.replace(g_,"")===""}class Os{constructor(t,i,o){this.normal=i,this.property=t,o&&(this.space=o)}}Os.prototype.normal={};Os.prototype.property={};Os.prototype.space=void 0;function Ew(e,t){const i={},o={};for(const s of e)Object.assign(i,s.property),Object.assign(o,s.normal);return new Os(i,o,t)}function Oh(e){return e.toLowerCase()}class Jt{constructor(t,i){this.attribute=i,this.property=t}}Jt.prototype.attribute="";Jt.prototype.booleanish=!1;Jt.prototype.boolean=!1;Jt.prototype.commaOrSpaceSeparated=!1;Jt.prototype.commaSeparated=!1;Jt.prototype.defined=!1;Jt.prototype.mustUseProperty=!1;Jt.prototype.number=!1;Jt.prototype.overloadedBoolean=!1;Jt.prototype.property="";Jt.prototype.spaceSeparated=!1;Jt.prototype.space=void 0;let x_=0;const Me=qr(),wt=qr(),Rh=qr(),he=qr(),it=qr(),$o=qr(),cn=qr();function qr(){return 2**++x_}const Lh=Object.freeze(Object.defineProperty({__proto__:null,boolean:Me,booleanish:wt,commaOrSpaceSeparated:cn,commaSeparated:$o,number:he,overloadedBoolean:Rh,spaceSeparated:it},Symbol.toStringTag,{value:"Module"})),Xf=Object.keys(Lh);class fp extends Jt{constructor(t,i,o,s){let l=-1;if(super(t,i),Hv(this,"space",s),typeof o=="number")for(;++l<Xf.length;){const c=Xf[l];Hv(this,Xf[l],(o&Lh[c])===Lh[c])}}}fp.prototype.defined=!0;function Hv(e,t,i){i&&(e[t]=i)}function Wo(e){const t={},i={};for(const[o,s]of Object.entries(e.properties)){const l=new fp(o,e.transform(e.attributes||{},o),s,e.space);e.mustUseProperty&&e.mustUseProperty.includes(o)&&(l.mustUseProperty=!0),t[o]=l,i[Oh(o)]=o,i[Oh(l.attribute)]=o}return new Os(t,i,e.space)}const jw=Wo({properties:{ariaActiveDescendant:null,ariaAtomic:wt,ariaAutoComplete:null,ariaBusy:wt,ariaChecked:wt,ariaColCount:he,ariaColIndex:he,ariaColSpan:he,ariaControls:it,ariaCurrent:null,ariaDescribedBy:it,ariaDetails:null,ariaDisabled:wt,ariaDropEffect:it,ariaErrorMessage:null,ariaExpanded:wt,ariaFlowTo:it,ariaGrabbed:wt,ariaHasPopup:null,ariaHidden:wt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:it,ariaLevel:he,ariaLive:null,ariaModal:wt,ariaMultiLine:wt,ariaMultiSelectable:wt,ariaOrientation:null,ariaOwns:it,ariaPlaceholder:null,ariaPosInSet:he,ariaPressed:wt,ariaReadOnly:wt,ariaRelevant:null,ariaRequired:wt,ariaRoleDescription:it,ariaRowCount:he,ariaRowIndex:he,ariaRowSpan:he,ariaSelected:wt,ariaSetSize:he,ariaSort:null,ariaValueMax:he,ariaValueMin:he,ariaValueNow:he,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function Cw(e,t){return t in e?e[t]:t}function kw(e,t){return Cw(e,t.toLowerCase())}const v_=Wo({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:$o,acceptCharset:it,accessKey:it,action:null,allow:null,allowFullScreen:Me,allowPaymentRequest:Me,allowUserMedia:Me,alt:null,as:null,async:Me,autoCapitalize:null,autoComplete:it,autoFocus:Me,autoPlay:Me,blocking:it,capture:null,charSet:null,checked:Me,cite:null,className:it,cols:he,colSpan:null,content:null,contentEditable:wt,controls:Me,controlsList:it,coords:he|$o,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Me,defer:Me,dir:null,dirName:null,disabled:Me,download:Rh,draggable:wt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Me,formTarget:null,headers:it,height:he,hidden:Rh,high:he,href:null,hrefLang:null,htmlFor:it,httpEquiv:it,id:null,imageSizes:null,imageSrcSet:null,inert:Me,inputMode:null,integrity:null,is:null,isMap:Me,itemId:null,itemProp:it,itemRef:it,itemScope:Me,itemType:it,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Me,low:he,manifest:null,max:null,maxLength:he,media:null,method:null,min:null,minLength:he,multiple:Me,muted:Me,name:null,nonce:null,noModule:Me,noValidate:Me,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Me,optimum:he,pattern:null,ping:it,placeholder:null,playsInline:Me,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Me,referrerPolicy:null,rel:it,required:Me,reversed:Me,rows:he,rowSpan:he,sandbox:it,scope:null,scoped:Me,seamless:Me,selected:Me,shadowRootClonable:Me,shadowRootDelegatesFocus:Me,shadowRootMode:null,shape:null,size:he,sizes:null,slot:null,span:he,spellCheck:wt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:he,step:null,style:null,tabIndex:he,target:null,title:null,translate:null,type:null,typeMustMatch:Me,useMap:null,value:wt,width:he,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:it,axis:null,background:null,bgColor:null,border:he,borderColor:null,bottomMargin:he,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Me,declare:Me,event:null,face:null,frame:null,frameBorder:null,hSpace:he,leftMargin:he,link:null,longDesc:null,lowSrc:null,marginHeight:he,marginWidth:he,noResize:Me,noHref:Me,noShade:Me,noWrap:Me,object:null,profile:null,prompt:null,rev:null,rightMargin:he,rules:null,scheme:null,scrolling:wt,standby:null,summary:null,text:null,topMargin:he,valueType:null,version:null,vAlign:null,vLink:null,vSpace:he,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Me,disableRemotePlayback:Me,prefix:null,property:null,results:he,security:null,unselectable:null},space:"html",transform:kw}),b_=Wo({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:cn,accentHeight:he,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:he,amplitude:he,arabicForm:null,ascent:he,attributeName:null,attributeType:null,azimuth:he,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:he,by:null,calcMode:null,capHeight:he,className:it,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:he,diffuseConstant:he,direction:null,display:null,dur:null,divisor:he,dominantBaseline:null,download:Me,dx:null,dy:null,edgeMode:null,editable:null,elevation:he,enableBackground:null,end:null,event:null,exponent:he,externalResourcesRequired:null,fill:null,fillOpacity:he,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:$o,g2:$o,glyphName:$o,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:he,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:he,horizOriginX:he,horizOriginY:he,id:null,ideographic:he,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:he,k:he,k1:he,k2:he,k3:he,k4:he,kernelMatrix:cn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:he,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:he,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:he,overlineThickness:he,paintOrder:null,panose1:null,path:null,pathLength:he,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:it,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:he,pointsAtY:he,pointsAtZ:he,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:cn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:cn,rev:cn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:cn,requiredFeatures:cn,requiredFonts:cn,requiredFormats:cn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:he,specularExponent:he,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:he,strikethroughThickness:he,string:null,stroke:null,strokeDashArray:cn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:he,strokeOpacity:he,strokeWidth:null,style:null,surfaceScale:he,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:cn,tabIndex:he,tableValues:null,target:null,targetX:he,targetY:he,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:cn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:he,underlineThickness:he,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:he,values:null,vAlphabetic:he,vMathematical:he,vectorEffect:null,vHanging:he,vIdeographic:he,version:null,vertAdvY:he,vertOriginX:he,vertOriginY:he,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:he,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Cw}),Tw=Wo({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),Aw=Wo({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:kw}),Mw=Wo({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),w_={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},S_=/[A-Z]/g,$v=/-[a-z]/g,N_=/^data[-\w.:]+$/i;function E_(e,t){const i=Oh(t);let o=t,s=Jt;if(i in e.normal)return e.property[e.normal[i]];if(i.length>4&&i.slice(0,4)==="data"&&N_.test(t)){if(t.charAt(4)==="-"){const l=t.slice(5).replace($v,C_);o="data"+l.charAt(0).toUpperCase()+l.slice(1)}else{const l=t.slice(4);if(!$v.test(l)){let c=l.replace(S_,j_);c.charAt(0)!=="-"&&(c="-"+c),t="data"+c}}s=fp}return new s(o,t)}function j_(e){return"-"+e.toLowerCase()}function C_(e){return e.charAt(1).toUpperCase()}const k_=Ew([jw,v_,Tw,Aw,Mw],"html"),hp=Ew([jw,b_,Tw,Aw,Mw],"svg");function T_(e){return e.join(" ").trim()}var Do={},Qf,Pv;function A_(){if(Pv)return Qf;Pv=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,i=/^\s*/,o=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,l=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,c=/^[;\s]*/,f=/^\s+|\s+$/g,h=`
`,p="/",m="*",g="",v="comment",b="declaration";function w(C,S){if(typeof C!="string")throw new TypeError("First argument must be a string");if(!C)return[];S=S||{};var k=1,j=1;function _(M){var P=M.match(t);P&&(k+=P.length);var O=M.lastIndexOf(h);j=~O?M.length-O:j+M.length}function $(){var M={line:k,column:j};return function(P){return P.position=new A(M),G(),P}}function A(M){this.start=M,this.end={line:k,column:j},this.source=S.source}A.prototype.content=C;function H(M){var P=new Error(S.source+":"+k+":"+j+": "+M);if(P.reason=M,P.filename=S.source,P.line=k,P.column=j,P.source=C,!S.silent)throw P}function V(M){var P=M.exec(C);if(P){var O=P[0];return _(O),C=C.slice(O.length),P}}function G(){V(i)}function I(M){var P;for(M=M||[];P=z();)P!==!1&&M.push(P);return M}function z(){var M=$();if(!(p!=C.charAt(0)||m!=C.charAt(1))){for(var P=2;g!=C.charAt(P)&&(m!=C.charAt(P)||p!=C.charAt(P+1));)++P;if(P+=2,g===C.charAt(P-1))return H("End of comment missing");var O=C.slice(2,P-2);return j+=2,_(O),C=C.slice(P),j+=2,M({type:v,comment:O})}}function U(){var M=$(),P=V(o);if(P){if(z(),!V(s))return H("property missing ':'");var O=V(l),q=M({type:b,property:N(P[0].replace(e,g)),value:O?N(O[0].replace(e,g)):g});return V(c),q}}function Z(){var M=[];I(M);for(var P;P=U();)P!==!1&&(M.push(P),I(M));return M}return G(),Z()}function N(C){return C?C.replace(f,g):g}return Qf=w,Qf}var qv;function M_(){if(qv)return Do;qv=1;var e=Do&&Do.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Do,"__esModule",{value:!0}),Do.default=i;const t=e(A_());function i(o,s){let l=null;if(!o||typeof o!="string")return l;const c=(0,t.default)(o),f=typeof s=="function";return c.forEach(h=>{if(h.type!=="declaration")return;const{property:p,value:m}=h;f?s(p,m,h):m&&(l=l||{},l[p]=m)}),l}return Do}var Za={},Uv;function D_(){if(Uv)return Za;Uv=1,Object.defineProperty(Za,"__esModule",{value:!0}),Za.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,i=/^[^-]+$/,o=/^-(webkit|moz|ms|o|khtml)-/,s=/^-(ms)-/,l=function(p){return!p||i.test(p)||e.test(p)},c=function(p,m){return m.toUpperCase()},f=function(p,m){return"".concat(m,"-")},h=function(p,m){return m===void 0&&(m={}),l(p)?p:(p=p.toLowerCase(),m.reactCompat?p=p.replace(s,f):p=p.replace(o,f),p.replace(t,c))};return Za.camelCase=h,Za}var Ja,Vv;function __(){if(Vv)return Ja;Vv=1;var e=Ja&&Ja.__importDefault||function(s){return s&&s.__esModule?s:{default:s}},t=e(M_()),i=D_();function o(s,l){var c={};return!s||typeof s!="string"||(0,t.default)(s,function(f,h){f&&h&&(c[(0,i.camelCase)(f,l)]=h)}),c}return o.default=o,Ja=o,Ja}var O_=__();const R_=Xc(O_),Dw=_w("end"),pp=_w("start");function _w(e){return t;function t(i){const o=i&&i.position&&i.position[e]||{};if(typeof o.line=="number"&&o.line>0&&typeof o.column=="number"&&o.column>0)return{line:o.line,column:o.column,offset:typeof o.offset=="number"&&o.offset>-1?o.offset:void 0}}}function L_(e){const t=pp(e),i=Dw(e);if(t&&i)return{start:t,end:i}}function cs(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Fv(e.position):"start"in e||"end"in e?Fv(e):"line"in e||"column"in e?zh(e):""}function zh(e){return Gv(e&&e.line)+":"+Gv(e&&e.column)}function Fv(e){return zh(e&&e.start)+"-"+zh(e&&e.end)}function Gv(e){return e&&typeof e=="number"?e:1}class It extends Error{constructor(t,i,o){super(),typeof i=="string"&&(o=i,i=void 0);let s="",l={},c=!1;if(i&&("line"in i&&"column"in i?l={place:i}:"start"in i&&"end"in i?l={place:i}:"type"in i?l={ancestors:[i],place:i.position}:l={...i}),typeof t=="string"?s=t:!l.cause&&t&&(c=!0,s=t.message,l.cause=t),!l.ruleId&&!l.source&&typeof o=="string"){const h=o.indexOf(":");h===-1?l.ruleId=o:(l.source=o.slice(0,h),l.ruleId=o.slice(h+1))}if(!l.place&&l.ancestors&&l.ancestors){const h=l.ancestors[l.ancestors.length-1];h&&(l.place=h.position)}const f=l.place&&"start"in l.place?l.place.start:l.place;this.ancestors=l.ancestors||void 0,this.cause=l.cause||void 0,this.column=f?f.column:void 0,this.fatal=void 0,this.file="",this.message=s,this.line=f?f.line:void 0,this.name=cs(l.place)||"1:1",this.place=l.place||void 0,this.reason=this.message,this.ruleId=l.ruleId||void 0,this.source=l.source||void 0,this.stack=c&&l.cause&&typeof l.cause.stack=="string"?l.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}It.prototype.file="";It.prototype.name="";It.prototype.reason="";It.prototype.message="";It.prototype.stack="";It.prototype.column=void 0;It.prototype.line=void 0;It.prototype.ancestors=void 0;It.prototype.cause=void 0;It.prototype.fatal=void 0;It.prototype.place=void 0;It.prototype.ruleId=void 0;It.prototype.source=void 0;const mp={}.hasOwnProperty,z_=new Map,I_=/[A-Z]/g,B_=new Set(["table","tbody","thead","tfoot","tr"]),H_=new Set(["td","th"]),Ow="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function $_(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const i=t.filePath||void 0;let o;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");o=X_(i,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");o=Y_(i,t.jsx,t.jsxs)}const s={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:o,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:i,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?hp:k_,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},l=Rw(s,e,void 0);return l&&typeof l!="string"?l:s.create(e,s.Fragment,{children:l||void 0},void 0)}function Rw(e,t,i){if(t.type==="element")return P_(e,t,i);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return q_(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return V_(e,t,i);if(t.type==="mdxjsEsm")return U_(e,t);if(t.type==="root")return F_(e,t,i);if(t.type==="text")return G_(e,t)}function P_(e,t,i){const o=e.schema;let s=o;t.tagName.toLowerCase()==="svg"&&o.space==="html"&&(s=hp,e.schema=s),e.ancestors.push(t);const l=zw(e,t.tagName,!1),c=Q_(e,t);let f=yp(e,t);return B_.has(t.tagName)&&(f=f.filter(function(h){return typeof h=="string"?!y_(h):!0})),Lw(e,c,l,t),gp(c,f),e.ancestors.pop(),e.schema=o,e.create(t,l,c,i)}function q_(e,t){if(t.data&&t.data.estree&&e.evaluater){const o=t.data.estree.body[0];return o.type,e.evaluater.evaluateExpression(o.expression)}Ss(e,t.position)}function U_(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Ss(e,t.position)}function V_(e,t,i){const o=e.schema;let s=o;t.name==="svg"&&o.space==="html"&&(s=hp,e.schema=s),e.ancestors.push(t);const l=t.name===null?e.Fragment:zw(e,t.name,!0),c=W_(e,t),f=yp(e,t);return Lw(e,c,l,t),gp(c,f),e.ancestors.pop(),e.schema=o,e.create(t,l,c,i)}function F_(e,t,i){const o={};return gp(o,yp(e,t)),e.create(t,e.Fragment,o,i)}function G_(e,t){return t.value}function Lw(e,t,i,o){typeof i!="string"&&i!==e.Fragment&&e.passNode&&(t.node=o)}function gp(e,t){if(t.length>0){const i=t.length>1?t:t[0];i&&(e.children=i)}}function Y_(e,t,i){return o;function o(s,l,c,f){const p=Array.isArray(c.children)?i:t;return f?p(l,c,f):p(l,c)}}function X_(e,t){return i;function i(o,s,l,c){const f=Array.isArray(l.children),h=pp(o);return t(s,l,c,f,{columnNumber:h?h.column-1:void 0,fileName:e,lineNumber:h?h.line:void 0},void 0)}}function Q_(e,t){const i={};let o,s;for(s in t.properties)if(s!=="children"&&mp.call(t.properties,s)){const l=Z_(e,s,t.properties[s]);if(l){const[c,f]=l;e.tableCellAlignToStyle&&c==="align"&&typeof f=="string"&&H_.has(t.tagName)?o=f:i[c]=f}}if(o){const l=i.style||(i.style={});l[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=o}return i}function W_(e,t){const i={};for(const o of t.attributes)if(o.type==="mdxJsxExpressionAttribute")if(o.data&&o.data.estree&&e.evaluater){const l=o.data.estree.body[0];l.type;const c=l.expression;c.type;const f=c.properties[0];f.type,Object.assign(i,e.evaluater.evaluateExpression(f.argument))}else Ss(e,t.position);else{const s=o.name;let l;if(o.value&&typeof o.value=="object")if(o.value.data&&o.value.data.estree&&e.evaluater){const f=o.value.data.estree.body[0];f.type,l=e.evaluater.evaluateExpression(f.expression)}else Ss(e,t.position);else l=o.value===null?!0:o.value;i[s]=l}return i}function yp(e,t){const i=[];let o=-1;const s=e.passKeys?new Map:z_;for(;++o<t.children.length;){const l=t.children[o];let c;if(e.passKeys){const h=l.type==="element"?l.tagName:l.type==="mdxJsxFlowElement"||l.type==="mdxJsxTextElement"?l.name:void 0;if(h){const p=s.get(h)||0;c=h+"-"+p,s.set(h,p+1)}}const f=Rw(e,l,c);f!==void 0&&i.push(f)}return i}function Z_(e,t,i){const o=E_(e.schema,t);if(!(i==null||typeof i=="number"&&Number.isNaN(i))){if(Array.isArray(i)&&(i=o.commaSeparated?f_(i):T_(i)),o.property==="style"){let s=typeof i=="object"?i:J_(e,String(i));return e.stylePropertyNameCase==="css"&&(s=K_(s)),["style",s]}return[e.elementAttributeNameCase==="react"&&o.space?w_[o.property]||o.property:o.attribute,i]}}function J_(e,t){try{return R_(t,{reactCompat:!0})}catch(i){if(e.ignoreInvalidStyle)return{};const o=i,s=new It("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:o,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=e.filePath||void 0,s.url=Ow+"#cannot-parse-style-attribute",s}}function zw(e,t,i){let o;if(!i)o={type:"Literal",value:t};else if(t.includes(".")){const s=t.split(".");let l=-1,c;for(;++l<s.length;){const f=Iv(s[l])?{type:"Identifier",name:s[l]}:{type:"Literal",value:s[l]};c=c?{type:"MemberExpression",object:c,property:f,computed:!!(l&&f.type==="Literal"),optional:!1}:f}o=c}else o=Iv(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(o.type==="Literal"){const s=o.value;return mp.call(e.components,s)?e.components[s]:s}if(e.evaluater)return e.evaluater.evaluateExpression(o);Ss(e)}function Ss(e,t){const i=new It("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=Ow+"#cannot-handle-mdx-estrees-without-createevaluater",i}function K_(e){const t={};let i;for(i in e)mp.call(e,i)&&(t[eO(i)]=e[i]);return t}function eO(e){let t=e.replace(I_,tO);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function tO(e){return"-"+e.toLowerCase()}const Wf={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},nO={};function xp(e,t){const i=nO,o=typeof i.includeImageAlt=="boolean"?i.includeImageAlt:!0,s=typeof i.includeHtml=="boolean"?i.includeHtml:!0;return Iw(e,o,s)}function Iw(e,t,i){if(iO(e)){if("value"in e)return e.type==="html"&&!i?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Yv(e.children,t,i)}return Array.isArray(e)?Yv(e,t,i):""}function Yv(e,t,i){const o=[];let s=-1;for(;++s<e.length;)o[s]=Iw(e[s],t,i);return o.join("")}function iO(e){return!!(e&&typeof e=="object")}const Xv=document.createElement("i");function vp(e){const t="&"+e+";";Xv.innerHTML=t;const i=Xv.textContent;return i.charCodeAt(i.length-1)===59&&e!=="semi"||i===t?!1:i}function fn(e,t,i,o){const s=e.length;let l=0,c;if(t<0?t=-t>s?0:s+t:t=t>s?s:t,i=i>0?i:0,o.length<1e4)c=Array.from(o),c.unshift(t,i),e.splice(...c);else for(i&&e.splice(t,i);l<o.length;)c=o.slice(l,l+1e4),c.unshift(t,0),e.splice(...c),l+=1e4,t+=1e4}function Sn(e,t){return e.length>0?(fn(e,e.length,0,t),e):t}const Qv={}.hasOwnProperty;function Bw(e){const t={};let i=-1;for(;++i<e.length;)rO(t,e[i]);return t}function rO(e,t){let i;for(i in t){const s=(Qv.call(e,i)?e[i]:void 0)||(e[i]={}),l=t[i];let c;if(l)for(c in l){Qv.call(s,c)||(s[c]=[]);const f=l[c];oO(s[c],Array.isArray(f)?f:f?[f]:[])}}}function oO(e,t){let i=-1;const o=[];for(;++i<t.length;)(t[i].add==="after"?e:o).push(t[i]);fn(e,0,0,o)}function Hw(e,t){const i=Number.parseInt(e,t);return i<9||i===11||i>13&&i<32||i>126&&i<160||i>55295&&i<57344||i>64975&&i<65008||(i&65535)===65535||(i&65535)===65534||i>1114111?"":String.fromCodePoint(i)}function Rn(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const $t=lr(/[A-Za-z]/),zt=lr(/[\dA-Za-z]/),aO=lr(/[#-'*+\--9=?A-Z^-~]/);function qc(e){return e!==null&&(e<32||e===127)}const Ih=lr(/\d/),sO=lr(/[\dA-Fa-f]/),lO=lr(/[!-/:-@[-`{-~]/);function we(e){return e!==null&&e<-2}function nt(e){return e!==null&&(e<0||e===32)}function Le(e){return e===-2||e===-1||e===32}const cu=lr(new RegExp("\\p{P}|\\p{S}","u")),$r=lr(/\s/);function lr(e){return t;function t(i){return i!==null&&i>-1&&e.test(String.fromCharCode(i))}}function Zo(e){const t=[];let i=-1,o=0,s=0;for(;++i<e.length;){const l=e.charCodeAt(i);let c="";if(l===37&&zt(e.charCodeAt(i+1))&&zt(e.charCodeAt(i+2)))s=2;else if(l<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(l))||(c=String.fromCharCode(l));else if(l>55295&&l<57344){const f=e.charCodeAt(i+1);l<56320&&f>56319&&f<57344?(c=String.fromCharCode(l,f),s=1):c=""}else c=String.fromCharCode(l);c&&(t.push(e.slice(o,i),encodeURIComponent(c)),o=i+s+1,c=""),s&&(i+=s,s=0)}return t.join("")+e.slice(o)}function Pe(e,t,i,o){const s=o?o-1:Number.POSITIVE_INFINITY;let l=0;return c;function c(h){return Le(h)?(e.enter(i),f(h)):t(h)}function f(h){return Le(h)&&l++<s?(e.consume(h),f):(e.exit(i),t(h))}}const cO={tokenize:uO};function uO(e){const t=e.attempt(this.parser.constructs.contentInitial,o,s);let i;return t;function o(f){if(f===null){e.consume(f);return}return e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),Pe(e,t,"linePrefix")}function s(f){return e.enter("paragraph"),l(f)}function l(f){const h=e.enter("chunkText",{contentType:"text",previous:i});return i&&(i.next=h),i=h,c(f)}function c(f){if(f===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(f);return}return we(f)?(e.consume(f),e.exit("chunkText"),l):(e.consume(f),c)}}const dO={tokenize:fO},Wv={tokenize:hO};function fO(e){const t=this,i=[];let o=0,s,l,c;return f;function f(j){if(o<i.length){const _=i[o];return t.containerState=_[1],e.attempt(_[0].continuation,h,p)(j)}return p(j)}function h(j){if(o++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,s&&k();const _=t.events.length;let $=_,A;for(;$--;)if(t.events[$][0]==="exit"&&t.events[$][1].type==="chunkFlow"){A=t.events[$][1].end;break}S(o);let H=_;for(;H<t.events.length;)t.events[H][1].end={...A},H++;return fn(t.events,$+1,0,t.events.slice(_)),t.events.length=H,p(j)}return f(j)}function p(j){if(o===i.length){if(!s)return v(j);if(s.currentConstruct&&s.currentConstruct.concrete)return w(j);t.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Wv,m,g)(j)}function m(j){return s&&k(),S(o),v(j)}function g(j){return t.parser.lazy[t.now().line]=o!==i.length,c=t.now().offset,w(j)}function v(j){return t.containerState={},e.attempt(Wv,b,w)(j)}function b(j){return o++,i.push([t.currentConstruct,t.containerState]),v(j)}function w(j){if(j===null){s&&k(),S(0),e.consume(j);return}return s=s||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:l}),N(j)}function N(j){if(j===null){C(e.exit("chunkFlow"),!0),S(0),e.consume(j);return}return we(j)?(e.consume(j),C(e.exit("chunkFlow")),o=0,t.interrupt=void 0,f):(e.consume(j),N)}function C(j,_){const $=t.sliceStream(j);if(_&&$.push(null),j.previous=l,l&&(l.next=j),l=j,s.defineSkip(j.start),s.write($),t.parser.lazy[j.start.line]){let A=s.events.length;for(;A--;)if(s.events[A][1].start.offset<c&&(!s.events[A][1].end||s.events[A][1].end.offset>c))return;const H=t.events.length;let V=H,G,I;for(;V--;)if(t.events[V][0]==="exit"&&t.events[V][1].type==="chunkFlow"){if(G){I=t.events[V][1].end;break}G=!0}for(S(o),A=H;A<t.events.length;)t.events[A][1].end={...I},A++;fn(t.events,V+1,0,t.events.slice(H)),t.events.length=A}}function S(j){let _=i.length;for(;_-- >j;){const $=i[_];t.containerState=$[1],$[0].exit.call(t,e)}i.length=j}function k(){s.write([null]),l=void 0,s=void 0,t.containerState._closeFlow=void 0}}function hO(e,t,i){return Pe(e,e.attempt(this.parser.constructs.document,t,i),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Qo(e){if(e===null||nt(e)||$r(e))return 1;if(cu(e))return 2}function uu(e,t,i){const o=[];let s=-1;for(;++s<e.length;){const l=e[s].resolveAll;l&&!o.includes(l)&&(t=l(t,i),o.push(l))}return t}const Bh={name:"attention",resolveAll:pO,tokenize:mO};function pO(e,t){let i=-1,o,s,l,c,f,h,p,m;for(;++i<e.length;)if(e[i][0]==="enter"&&e[i][1].type==="attentionSequence"&&e[i][1]._close){for(o=i;o--;)if(e[o][0]==="exit"&&e[o][1].type==="attentionSequence"&&e[o][1]._open&&t.sliceSerialize(e[o][1]).charCodeAt(0)===t.sliceSerialize(e[i][1]).charCodeAt(0)){if((e[o][1]._close||e[i][1]._open)&&(e[i][1].end.offset-e[i][1].start.offset)%3&&!((e[o][1].end.offset-e[o][1].start.offset+e[i][1].end.offset-e[i][1].start.offset)%3))continue;h=e[o][1].end.offset-e[o][1].start.offset>1&&e[i][1].end.offset-e[i][1].start.offset>1?2:1;const g={...e[o][1].end},v={...e[i][1].start};Zv(g,-h),Zv(v,h),c={type:h>1?"strongSequence":"emphasisSequence",start:g,end:{...e[o][1].end}},f={type:h>1?"strongSequence":"emphasisSequence",start:{...e[i][1].start},end:v},l={type:h>1?"strongText":"emphasisText",start:{...e[o][1].end},end:{...e[i][1].start}},s={type:h>1?"strong":"emphasis",start:{...c.start},end:{...f.end}},e[o][1].end={...c.start},e[i][1].start={...f.end},p=[],e[o][1].end.offset-e[o][1].start.offset&&(p=Sn(p,[["enter",e[o][1],t],["exit",e[o][1],t]])),p=Sn(p,[["enter",s,t],["enter",c,t],["exit",c,t],["enter",l,t]]),p=Sn(p,uu(t.parser.constructs.insideSpan.null,e.slice(o+1,i),t)),p=Sn(p,[["exit",l,t],["enter",f,t],["exit",f,t],["exit",s,t]]),e[i][1].end.offset-e[i][1].start.offset?(m=2,p=Sn(p,[["enter",e[i][1],t],["exit",e[i][1],t]])):m=0,fn(e,o-1,i-o+3,p),i=o+p.length-m-2;break}}for(i=-1;++i<e.length;)e[i][1].type==="attentionSequence"&&(e[i][1].type="data");return e}function mO(e,t){const i=this.parser.constructs.attentionMarkers.null,o=this.previous,s=Qo(o);let l;return c;function c(h){return l=h,e.enter("attentionSequence"),f(h)}function f(h){if(h===l)return e.consume(h),f;const p=e.exit("attentionSequence"),m=Qo(h),g=!m||m===2&&s||i.includes(h),v=!s||s===2&&m||i.includes(o);return p._open=!!(l===42?g:g&&(s||!v)),p._close=!!(l===42?v:v&&(m||!g)),t(h)}}function Zv(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const gO={name:"autolink",tokenize:yO};function yO(e,t,i){let o=0;return s;function s(b){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(b),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),l}function l(b){return $t(b)?(e.consume(b),c):b===64?i(b):p(b)}function c(b){return b===43||b===45||b===46||zt(b)?(o=1,f(b)):p(b)}function f(b){return b===58?(e.consume(b),o=0,h):(b===43||b===45||b===46||zt(b))&&o++<32?(e.consume(b),f):(o=0,p(b))}function h(b){return b===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(b),e.exit("autolinkMarker"),e.exit("autolink"),t):b===null||b===32||b===60||qc(b)?i(b):(e.consume(b),h)}function p(b){return b===64?(e.consume(b),m):aO(b)?(e.consume(b),p):i(b)}function m(b){return zt(b)?g(b):i(b)}function g(b){return b===46?(e.consume(b),o=0,m):b===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(b),e.exit("autolinkMarker"),e.exit("autolink"),t):v(b)}function v(b){if((b===45||zt(b))&&o++<63){const w=b===45?v:g;return e.consume(b),w}return i(b)}}const Rs={partial:!0,tokenize:xO};function xO(e,t,i){return o;function o(l){return Le(l)?Pe(e,s,"linePrefix")(l):s(l)}function s(l){return l===null||we(l)?t(l):i(l)}}const $w={continuation:{tokenize:bO},exit:wO,name:"blockQuote",tokenize:vO};function vO(e,t,i){const o=this;return s;function s(c){if(c===62){const f=o.containerState;return f.open||(e.enter("blockQuote",{_container:!0}),f.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(c),e.exit("blockQuoteMarker"),l}return i(c)}function l(c){return Le(c)?(e.enter("blockQuotePrefixWhitespace"),e.consume(c),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(c))}}function bO(e,t,i){const o=this;return s;function s(c){return Le(c)?Pe(e,l,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c):l(c)}function l(c){return e.attempt($w,t,i)(c)}}function wO(e){e.exit("blockQuote")}const Pw={name:"characterEscape",tokenize:SO};function SO(e,t,i){return o;function o(l){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(l),e.exit("escapeMarker"),s}function s(l){return lO(l)?(e.enter("characterEscapeValue"),e.consume(l),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):i(l)}}const qw={name:"characterReference",tokenize:NO};function NO(e,t,i){const o=this;let s=0,l,c;return f;function f(g){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(g),e.exit("characterReferenceMarker"),h}function h(g){return g===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(g),e.exit("characterReferenceMarkerNumeric"),p):(e.enter("characterReferenceValue"),l=31,c=zt,m(g))}function p(g){return g===88||g===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(g),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),l=6,c=sO,m):(e.enter("characterReferenceValue"),l=7,c=Ih,m(g))}function m(g){if(g===59&&s){const v=e.exit("characterReferenceValue");return c===zt&&!vp(o.sliceSerialize(v))?i(g):(e.enter("characterReferenceMarker"),e.consume(g),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return c(g)&&s++<l?(e.consume(g),m):i(g)}}const Jv={partial:!0,tokenize:jO},Kv={concrete:!0,name:"codeFenced",tokenize:EO};function EO(e,t,i){const o=this,s={partial:!0,tokenize:$};let l=0,c=0,f;return h;function h(A){return p(A)}function p(A){const H=o.events[o.events.length-1];return l=H&&H[1].type==="linePrefix"?H[2].sliceSerialize(H[1],!0).length:0,f=A,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),m(A)}function m(A){return A===f?(c++,e.consume(A),m):c<3?i(A):(e.exit("codeFencedFenceSequence"),Le(A)?Pe(e,g,"whitespace")(A):g(A))}function g(A){return A===null||we(A)?(e.exit("codeFencedFence"),o.interrupt?t(A):e.check(Jv,N,_)(A)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),v(A))}function v(A){return A===null||we(A)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),g(A)):Le(A)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Pe(e,b,"whitespace")(A)):A===96&&A===f?i(A):(e.consume(A),v)}function b(A){return A===null||we(A)?g(A):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),w(A))}function w(A){return A===null||we(A)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),g(A)):A===96&&A===f?i(A):(e.consume(A),w)}function N(A){return e.attempt(s,_,C)(A)}function C(A){return e.enter("lineEnding"),e.consume(A),e.exit("lineEnding"),S}function S(A){return l>0&&Le(A)?Pe(e,k,"linePrefix",l+1)(A):k(A)}function k(A){return A===null||we(A)?e.check(Jv,N,_)(A):(e.enter("codeFlowValue"),j(A))}function j(A){return A===null||we(A)?(e.exit("codeFlowValue"),k(A)):(e.consume(A),j)}function _(A){return e.exit("codeFenced"),t(A)}function $(A,H,V){let G=0;return I;function I(P){return A.enter("lineEnding"),A.consume(P),A.exit("lineEnding"),z}function z(P){return A.enter("codeFencedFence"),Le(P)?Pe(A,U,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(P):U(P)}function U(P){return P===f?(A.enter("codeFencedFenceSequence"),Z(P)):V(P)}function Z(P){return P===f?(G++,A.consume(P),Z):G>=c?(A.exit("codeFencedFenceSequence"),Le(P)?Pe(A,M,"whitespace")(P):M(P)):V(P)}function M(P){return P===null||we(P)?(A.exit("codeFencedFence"),H(P)):V(P)}}}function jO(e,t,i){const o=this;return s;function s(c){return c===null?i(c):(e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),l)}function l(c){return o.parser.lazy[o.now().line]?i(c):t(c)}}const Zf={name:"codeIndented",tokenize:kO},CO={partial:!0,tokenize:TO};function kO(e,t,i){const o=this;return s;function s(p){return e.enter("codeIndented"),Pe(e,l,"linePrefix",5)(p)}function l(p){const m=o.events[o.events.length-1];return m&&m[1].type==="linePrefix"&&m[2].sliceSerialize(m[1],!0).length>=4?c(p):i(p)}function c(p){return p===null?h(p):we(p)?e.attempt(CO,c,h)(p):(e.enter("codeFlowValue"),f(p))}function f(p){return p===null||we(p)?(e.exit("codeFlowValue"),c(p)):(e.consume(p),f)}function h(p){return e.exit("codeIndented"),t(p)}}function TO(e,t,i){const o=this;return s;function s(c){return o.parser.lazy[o.now().line]?i(c):we(c)?(e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),s):Pe(e,l,"linePrefix",5)(c)}function l(c){const f=o.events[o.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?t(c):we(c)?s(c):i(c)}}const AO={name:"codeText",previous:DO,resolve:MO,tokenize:_O};function MO(e){let t=e.length-4,i=3,o,s;if((e[i][1].type==="lineEnding"||e[i][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(o=i;++o<t;)if(e[o][1].type==="codeTextData"){e[i][1].type="codeTextPadding",e[t][1].type="codeTextPadding",i+=2,t-=2;break}}for(o=i-1,t++;++o<=t;)s===void 0?o!==t&&e[o][1].type!=="lineEnding"&&(s=o):(o===t||e[o][1].type==="lineEnding")&&(e[s][1].type="codeTextData",o!==s+2&&(e[s][1].end=e[o-1][1].end,e.splice(s+2,o-s-2),t-=o-s-2,o=s+2),s=void 0);return e}function DO(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function _O(e,t,i){let o=0,s,l;return c;function c(g){return e.enter("codeText"),e.enter("codeTextSequence"),f(g)}function f(g){return g===96?(e.consume(g),o++,f):(e.exit("codeTextSequence"),h(g))}function h(g){return g===null?i(g):g===32?(e.enter("space"),e.consume(g),e.exit("space"),h):g===96?(l=e.enter("codeTextSequence"),s=0,m(g)):we(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),h):(e.enter("codeTextData"),p(g))}function p(g){return g===null||g===32||g===96||we(g)?(e.exit("codeTextData"),h(g)):(e.consume(g),p)}function m(g){return g===96?(e.consume(g),s++,m):s===o?(e.exit("codeTextSequence"),e.exit("codeText"),t(g)):(l.type="codeTextData",p(g))}}class OO{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,i){const o=i??Number.POSITIVE_INFINITY;return o<this.left.length?this.left.slice(t,o):t>this.left.length?this.right.slice(this.right.length-o+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-o+this.left.length).reverse())}splice(t,i,o){const s=i||0;this.setCursor(Math.trunc(t));const l=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return o&&Ka(this.left,o),l.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Ka(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Ka(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const i=this.left.splice(t,Number.POSITIVE_INFINITY);Ka(this.right,i.reverse())}else{const i=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Ka(this.left,i.reverse())}}}function Ka(e,t){let i=0;if(t.length<1e4)e.push(...t);else for(;i<t.length;)e.push(...t.slice(i,i+1e4)),i+=1e4}function Uw(e){const t={};let i=-1,o,s,l,c,f,h,p;const m=new OO(e);for(;++i<m.length;){for(;i in t;)i=t[i];if(o=m.get(i),i&&o[1].type==="chunkFlow"&&m.get(i-1)[1].type==="listItemPrefix"&&(h=o[1]._tokenizer.events,l=0,l<h.length&&h[l][1].type==="lineEndingBlank"&&(l+=2),l<h.length&&h[l][1].type==="content"))for(;++l<h.length&&h[l][1].type!=="content";)h[l][1].type==="chunkText"&&(h[l][1]._isInFirstContentOfListItem=!0,l++);if(o[0]==="enter")o[1].contentType&&(Object.assign(t,RO(m,i)),i=t[i],p=!0);else if(o[1]._container){for(l=i,s=void 0;l--;)if(c=m.get(l),c[1].type==="lineEnding"||c[1].type==="lineEndingBlank")c[0]==="enter"&&(s&&(m.get(s)[1].type="lineEndingBlank"),c[1].type="lineEnding",s=l);else if(!(c[1].type==="linePrefix"||c[1].type==="listItemIndent"))break;s&&(o[1].end={...m.get(s)[1].start},f=m.slice(s,i),f.unshift(o),m.splice(s,i-s+1,f))}}return fn(e,0,Number.POSITIVE_INFINITY,m.slice(0)),!p}function RO(e,t){const i=e.get(t)[1],o=e.get(t)[2];let s=t-1;const l=[];let c=i._tokenizer;c||(c=o.parser[i.contentType](i.start),i._contentTypeTextTrailing&&(c._contentTypeTextTrailing=!0));const f=c.events,h=[],p={};let m,g,v=-1,b=i,w=0,N=0;const C=[N];for(;b;){for(;e.get(++s)[1]!==b;);l.push(s),b._tokenizer||(m=o.sliceStream(b),b.next||m.push(null),g&&c.defineSkip(b.start),b._isInFirstContentOfListItem&&(c._gfmTasklistFirstContentOfListItem=!0),c.write(m),b._isInFirstContentOfListItem&&(c._gfmTasklistFirstContentOfListItem=void 0)),g=b,b=b.next}for(b=i;++v<f.length;)f[v][0]==="exit"&&f[v-1][0]==="enter"&&f[v][1].type===f[v-1][1].type&&f[v][1].start.line!==f[v][1].end.line&&(N=v+1,C.push(N),b._tokenizer=void 0,b.previous=void 0,b=b.next);for(c.events=[],b?(b._tokenizer=void 0,b.previous=void 0):C.pop(),v=C.length;v--;){const S=f.slice(C[v],C[v+1]),k=l.pop();h.push([k,k+S.length-1]),e.splice(k,2,S)}for(h.reverse(),v=-1;++v<h.length;)p[w+h[v][0]]=w+h[v][1],w+=h[v][1]-h[v][0]-1;return p}const LO={resolve:IO,tokenize:BO},zO={partial:!0,tokenize:HO};function IO(e){return Uw(e),e}function BO(e,t){let i;return o;function o(f){return e.enter("content"),i=e.enter("chunkContent",{contentType:"content"}),s(f)}function s(f){return f===null?l(f):we(f)?e.check(zO,c,l)(f):(e.consume(f),s)}function l(f){return e.exit("chunkContent"),e.exit("content"),t(f)}function c(f){return e.consume(f),e.exit("chunkContent"),i.next=e.enter("chunkContent",{contentType:"content",previous:i}),i=i.next,s}}function HO(e,t,i){const o=this;return s;function s(c){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),Pe(e,l,"linePrefix")}function l(c){if(c===null||we(c))return i(c);const f=o.events[o.events.length-1];return!o.parser.constructs.disable.null.includes("codeIndented")&&f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?t(c):e.interrupt(o.parser.constructs.flow,i,t)(c)}}function Vw(e,t,i,o,s,l,c,f,h){const p=h||Number.POSITIVE_INFINITY;let m=0;return g;function g(S){return S===60?(e.enter(o),e.enter(s),e.enter(l),e.consume(S),e.exit(l),v):S===null||S===32||S===41||qc(S)?i(S):(e.enter(o),e.enter(c),e.enter(f),e.enter("chunkString",{contentType:"string"}),N(S))}function v(S){return S===62?(e.enter(l),e.consume(S),e.exit(l),e.exit(s),e.exit(o),t):(e.enter(f),e.enter("chunkString",{contentType:"string"}),b(S))}function b(S){return S===62?(e.exit("chunkString"),e.exit(f),v(S)):S===null||S===60||we(S)?i(S):(e.consume(S),S===92?w:b)}function w(S){return S===60||S===62||S===92?(e.consume(S),b):b(S)}function N(S){return!m&&(S===null||S===41||nt(S))?(e.exit("chunkString"),e.exit(f),e.exit(c),e.exit(o),t(S)):m<p&&S===40?(e.consume(S),m++,N):S===41?(e.consume(S),m--,N):S===null||S===32||S===40||qc(S)?i(S):(e.consume(S),S===92?C:N)}function C(S){return S===40||S===41||S===92?(e.consume(S),N):N(S)}}function Fw(e,t,i,o,s,l){const c=this;let f=0,h;return p;function p(b){return e.enter(o),e.enter(s),e.consume(b),e.exit(s),e.enter(l),m}function m(b){return f>999||b===null||b===91||b===93&&!h||b===94&&!f&&"_hiddenFootnoteSupport"in c.parser.constructs?i(b):b===93?(e.exit(l),e.enter(s),e.consume(b),e.exit(s),e.exit(o),t):we(b)?(e.enter("lineEnding"),e.consume(b),e.exit("lineEnding"),m):(e.enter("chunkString",{contentType:"string"}),g(b))}function g(b){return b===null||b===91||b===93||we(b)||f++>999?(e.exit("chunkString"),m(b)):(e.consume(b),h||(h=!Le(b)),b===92?v:g)}function v(b){return b===91||b===92||b===93?(e.consume(b),f++,g):g(b)}}function Gw(e,t,i,o,s,l){let c;return f;function f(v){return v===34||v===39||v===40?(e.enter(o),e.enter(s),e.consume(v),e.exit(s),c=v===40?41:v,h):i(v)}function h(v){return v===c?(e.enter(s),e.consume(v),e.exit(s),e.exit(o),t):(e.enter(l),p(v))}function p(v){return v===c?(e.exit(l),h(c)):v===null?i(v):we(v)?(e.enter("lineEnding"),e.consume(v),e.exit("lineEnding"),Pe(e,p,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),m(v))}function m(v){return v===c||v===null||we(v)?(e.exit("chunkString"),p(v)):(e.consume(v),v===92?g:m)}function g(v){return v===c||v===92?(e.consume(v),m):m(v)}}function us(e,t){let i;return o;function o(s){return we(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),i=!0,o):Le(s)?Pe(e,o,i?"linePrefix":"lineSuffix")(s):t(s)}}const $O={name:"definition",tokenize:qO},PO={partial:!0,tokenize:UO};function qO(e,t,i){const o=this;let s;return l;function l(b){return e.enter("definition"),c(b)}function c(b){return Fw.call(o,e,f,i,"definitionLabel","definitionLabelMarker","definitionLabelString")(b)}function f(b){return s=Rn(o.sliceSerialize(o.events[o.events.length-1][1]).slice(1,-1)),b===58?(e.enter("definitionMarker"),e.consume(b),e.exit("definitionMarker"),h):i(b)}function h(b){return nt(b)?us(e,p)(b):p(b)}function p(b){return Vw(e,m,i,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(b)}function m(b){return e.attempt(PO,g,g)(b)}function g(b){return Le(b)?Pe(e,v,"whitespace")(b):v(b)}function v(b){return b===null||we(b)?(e.exit("definition"),o.parser.defined.push(s),t(b)):i(b)}}function UO(e,t,i){return o;function o(f){return nt(f)?us(e,s)(f):i(f)}function s(f){return Gw(e,l,i,"definitionTitle","definitionTitleMarker","definitionTitleString")(f)}function l(f){return Le(f)?Pe(e,c,"whitespace")(f):c(f)}function c(f){return f===null||we(f)?t(f):i(f)}}const VO={name:"hardBreakEscape",tokenize:FO};function FO(e,t,i){return o;function o(l){return e.enter("hardBreakEscape"),e.consume(l),s}function s(l){return we(l)?(e.exit("hardBreakEscape"),t(l)):i(l)}}const GO={name:"headingAtx",resolve:YO,tokenize:XO};function YO(e,t){let i=e.length-2,o=3,s,l;return e[o][1].type==="whitespace"&&(o+=2),i-2>o&&e[i][1].type==="whitespace"&&(i-=2),e[i][1].type==="atxHeadingSequence"&&(o===i-1||i-4>o&&e[i-2][1].type==="whitespace")&&(i-=o+1===i?2:4),i>o&&(s={type:"atxHeadingText",start:e[o][1].start,end:e[i][1].end},l={type:"chunkText",start:e[o][1].start,end:e[i][1].end,contentType:"text"},fn(e,o,i-o+1,[["enter",s,t],["enter",l,t],["exit",l,t],["exit",s,t]])),e}function XO(e,t,i){let o=0;return s;function s(m){return e.enter("atxHeading"),l(m)}function l(m){return e.enter("atxHeadingSequence"),c(m)}function c(m){return m===35&&o++<6?(e.consume(m),c):m===null||nt(m)?(e.exit("atxHeadingSequence"),f(m)):i(m)}function f(m){return m===35?(e.enter("atxHeadingSequence"),h(m)):m===null||we(m)?(e.exit("atxHeading"),t(m)):Le(m)?Pe(e,f,"whitespace")(m):(e.enter("atxHeadingText"),p(m))}function h(m){return m===35?(e.consume(m),h):(e.exit("atxHeadingSequence"),f(m))}function p(m){return m===null||m===35||nt(m)?(e.exit("atxHeadingText"),f(m)):(e.consume(m),p)}}const QO=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],eb=["pre","script","style","textarea"],WO={concrete:!0,name:"htmlFlow",resolveTo:KO,tokenize:eR},ZO={partial:!0,tokenize:nR},JO={partial:!0,tokenize:tR};function KO(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function eR(e,t,i){const o=this;let s,l,c,f,h;return p;function p(L){return m(L)}function m(L){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(L),g}function g(L){return L===33?(e.consume(L),v):L===47?(e.consume(L),l=!0,N):L===63?(e.consume(L),s=3,o.interrupt?t:D):$t(L)?(e.consume(L),c=String.fromCharCode(L),C):i(L)}function v(L){return L===45?(e.consume(L),s=2,b):L===91?(e.consume(L),s=5,f=0,w):$t(L)?(e.consume(L),s=4,o.interrupt?t:D):i(L)}function b(L){return L===45?(e.consume(L),o.interrupt?t:D):i(L)}function w(L){const ie="CDATA[";return L===ie.charCodeAt(f++)?(e.consume(L),f===ie.length?o.interrupt?t:U:w):i(L)}function N(L){return $t(L)?(e.consume(L),c=String.fromCharCode(L),C):i(L)}function C(L){if(L===null||L===47||L===62||nt(L)){const ie=L===47,te=c.toLowerCase();return!ie&&!l&&eb.includes(te)?(s=1,o.interrupt?t(L):U(L)):QO.includes(c.toLowerCase())?(s=6,ie?(e.consume(L),S):o.interrupt?t(L):U(L)):(s=7,o.interrupt&&!o.parser.lazy[o.now().line]?i(L):l?k(L):j(L))}return L===45||zt(L)?(e.consume(L),c+=String.fromCharCode(L),C):i(L)}function S(L){return L===62?(e.consume(L),o.interrupt?t:U):i(L)}function k(L){return Le(L)?(e.consume(L),k):I(L)}function j(L){return L===47?(e.consume(L),I):L===58||L===95||$t(L)?(e.consume(L),_):Le(L)?(e.consume(L),j):I(L)}function _(L){return L===45||L===46||L===58||L===95||zt(L)?(e.consume(L),_):$(L)}function $(L){return L===61?(e.consume(L),A):Le(L)?(e.consume(L),$):j(L)}function A(L){return L===null||L===60||L===61||L===62||L===96?i(L):L===34||L===39?(e.consume(L),h=L,H):Le(L)?(e.consume(L),A):V(L)}function H(L){return L===h?(e.consume(L),h=null,G):L===null||we(L)?i(L):(e.consume(L),H)}function V(L){return L===null||L===34||L===39||L===47||L===60||L===61||L===62||L===96||nt(L)?$(L):(e.consume(L),V)}function G(L){return L===47||L===62||Le(L)?j(L):i(L)}function I(L){return L===62?(e.consume(L),z):i(L)}function z(L){return L===null||we(L)?U(L):Le(L)?(e.consume(L),z):i(L)}function U(L){return L===45&&s===2?(e.consume(L),O):L===60&&s===1?(e.consume(L),q):L===62&&s===4?(e.consume(L),B):L===63&&s===3?(e.consume(L),D):L===93&&s===5?(e.consume(L),Q):we(L)&&(s===6||s===7)?(e.exit("htmlFlowData"),e.check(ZO,F,Z)(L)):L===null||we(L)?(e.exit("htmlFlowData"),Z(L)):(e.consume(L),U)}function Z(L){return e.check(JO,M,F)(L)}function M(L){return e.enter("lineEnding"),e.consume(L),e.exit("lineEnding"),P}function P(L){return L===null||we(L)?Z(L):(e.enter("htmlFlowData"),U(L))}function O(L){return L===45?(e.consume(L),D):U(L)}function q(L){return L===47?(e.consume(L),c="",Y):U(L)}function Y(L){if(L===62){const ie=c.toLowerCase();return eb.includes(ie)?(e.consume(L),B):U(L)}return $t(L)&&c.length<8?(e.consume(L),c+=String.fromCharCode(L),Y):U(L)}function Q(L){return L===93?(e.consume(L),D):U(L)}function D(L){return L===62?(e.consume(L),B):L===45&&s===2?(e.consume(L),D):U(L)}function B(L){return L===null||we(L)?(e.exit("htmlFlowData"),F(L)):(e.consume(L),B)}function F(L){return e.exit("htmlFlow"),t(L)}}function tR(e,t,i){const o=this;return s;function s(c){return we(c)?(e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),l):i(c)}function l(c){return o.parser.lazy[o.now().line]?i(c):t(c)}}function nR(e,t,i){return o;function o(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),e.attempt(Rs,t,i)}}const iR={name:"htmlText",tokenize:rR};function rR(e,t,i){const o=this;let s,l,c;return f;function f(D){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(D),h}function h(D){return D===33?(e.consume(D),p):D===47?(e.consume(D),$):D===63?(e.consume(D),j):$t(D)?(e.consume(D),V):i(D)}function p(D){return D===45?(e.consume(D),m):D===91?(e.consume(D),l=0,w):$t(D)?(e.consume(D),k):i(D)}function m(D){return D===45?(e.consume(D),b):i(D)}function g(D){return D===null?i(D):D===45?(e.consume(D),v):we(D)?(c=g,q(D)):(e.consume(D),g)}function v(D){return D===45?(e.consume(D),b):g(D)}function b(D){return D===62?O(D):D===45?v(D):g(D)}function w(D){const B="CDATA[";return D===B.charCodeAt(l++)?(e.consume(D),l===B.length?N:w):i(D)}function N(D){return D===null?i(D):D===93?(e.consume(D),C):we(D)?(c=N,q(D)):(e.consume(D),N)}function C(D){return D===93?(e.consume(D),S):N(D)}function S(D){return D===62?O(D):D===93?(e.consume(D),S):N(D)}function k(D){return D===null||D===62?O(D):we(D)?(c=k,q(D)):(e.consume(D),k)}function j(D){return D===null?i(D):D===63?(e.consume(D),_):we(D)?(c=j,q(D)):(e.consume(D),j)}function _(D){return D===62?O(D):j(D)}function $(D){return $t(D)?(e.consume(D),A):i(D)}function A(D){return D===45||zt(D)?(e.consume(D),A):H(D)}function H(D){return we(D)?(c=H,q(D)):Le(D)?(e.consume(D),H):O(D)}function V(D){return D===45||zt(D)?(e.consume(D),V):D===47||D===62||nt(D)?G(D):i(D)}function G(D){return D===47?(e.consume(D),O):D===58||D===95||$t(D)?(e.consume(D),I):we(D)?(c=G,q(D)):Le(D)?(e.consume(D),G):O(D)}function I(D){return D===45||D===46||D===58||D===95||zt(D)?(e.consume(D),I):z(D)}function z(D){return D===61?(e.consume(D),U):we(D)?(c=z,q(D)):Le(D)?(e.consume(D),z):G(D)}function U(D){return D===null||D===60||D===61||D===62||D===96?i(D):D===34||D===39?(e.consume(D),s=D,Z):we(D)?(c=U,q(D)):Le(D)?(e.consume(D),U):(e.consume(D),M)}function Z(D){return D===s?(e.consume(D),s=void 0,P):D===null?i(D):we(D)?(c=Z,q(D)):(e.consume(D),Z)}function M(D){return D===null||D===34||D===39||D===60||D===61||D===96?i(D):D===47||D===62||nt(D)?G(D):(e.consume(D),M)}function P(D){return D===47||D===62||nt(D)?G(D):i(D)}function O(D){return D===62?(e.consume(D),e.exit("htmlTextData"),e.exit("htmlText"),t):i(D)}function q(D){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(D),e.exit("lineEnding"),Y}function Y(D){return Le(D)?Pe(e,Q,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(D):Q(D)}function Q(D){return e.enter("htmlTextData"),c(D)}}const bp={name:"labelEnd",resolveAll:lR,resolveTo:cR,tokenize:uR},oR={tokenize:dR},aR={tokenize:fR},sR={tokenize:hR};function lR(e){let t=-1;const i=[];for(;++t<e.length;){const o=e[t][1];if(i.push(e[t]),o.type==="labelImage"||o.type==="labelLink"||o.type==="labelEnd"){const s=o.type==="labelImage"?4:2;o.type="data",t+=s}}return e.length!==i.length&&fn(e,0,e.length,i),e}function cR(e,t){let i=e.length,o=0,s,l,c,f;for(;i--;)if(s=e[i][1],l){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;e[i][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(c){if(e[i][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(l=i,s.type!=="labelLink")){o=2;break}}else s.type==="labelEnd"&&(c=i);const h={type:e[l][1].type==="labelLink"?"link":"image",start:{...e[l][1].start},end:{...e[e.length-1][1].end}},p={type:"label",start:{...e[l][1].start},end:{...e[c][1].end}},m={type:"labelText",start:{...e[l+o+2][1].end},end:{...e[c-2][1].start}};return f=[["enter",h,t],["enter",p,t]],f=Sn(f,e.slice(l+1,l+o+3)),f=Sn(f,[["enter",m,t]]),f=Sn(f,uu(t.parser.constructs.insideSpan.null,e.slice(l+o+4,c-3),t)),f=Sn(f,[["exit",m,t],e[c-2],e[c-1],["exit",p,t]]),f=Sn(f,e.slice(c+1)),f=Sn(f,[["exit",h,t]]),fn(e,l,e.length,f),e}function uR(e,t,i){const o=this;let s=o.events.length,l,c;for(;s--;)if((o.events[s][1].type==="labelImage"||o.events[s][1].type==="labelLink")&&!o.events[s][1]._balanced){l=o.events[s][1];break}return f;function f(v){return l?l._inactive?g(v):(c=o.parser.defined.includes(Rn(o.sliceSerialize({start:l.end,end:o.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(v),e.exit("labelMarker"),e.exit("labelEnd"),h):i(v)}function h(v){return v===40?e.attempt(oR,m,c?m:g)(v):v===91?e.attempt(aR,m,c?p:g)(v):c?m(v):g(v)}function p(v){return e.attempt(sR,m,g)(v)}function m(v){return t(v)}function g(v){return l._balanced=!0,i(v)}}function dR(e,t,i){return o;function o(g){return e.enter("resource"),e.enter("resourceMarker"),e.consume(g),e.exit("resourceMarker"),s}function s(g){return nt(g)?us(e,l)(g):l(g)}function l(g){return g===41?m(g):Vw(e,c,f,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(g)}function c(g){return nt(g)?us(e,h)(g):m(g)}function f(g){return i(g)}function h(g){return g===34||g===39||g===40?Gw(e,p,i,"resourceTitle","resourceTitleMarker","resourceTitleString")(g):m(g)}function p(g){return nt(g)?us(e,m)(g):m(g)}function m(g){return g===41?(e.enter("resourceMarker"),e.consume(g),e.exit("resourceMarker"),e.exit("resource"),t):i(g)}}function fR(e,t,i){const o=this;return s;function s(f){return Fw.call(o,e,l,c,"reference","referenceMarker","referenceString")(f)}function l(f){return o.parser.defined.includes(Rn(o.sliceSerialize(o.events[o.events.length-1][1]).slice(1,-1)))?t(f):i(f)}function c(f){return i(f)}}function hR(e,t,i){return o;function o(l){return e.enter("reference"),e.enter("referenceMarker"),e.consume(l),e.exit("referenceMarker"),s}function s(l){return l===93?(e.enter("referenceMarker"),e.consume(l),e.exit("referenceMarker"),e.exit("reference"),t):i(l)}}const pR={name:"labelStartImage",resolveAll:bp.resolveAll,tokenize:mR};function mR(e,t,i){const o=this;return s;function s(f){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(f),e.exit("labelImageMarker"),l}function l(f){return f===91?(e.enter("labelMarker"),e.consume(f),e.exit("labelMarker"),e.exit("labelImage"),c):i(f)}function c(f){return f===94&&"_hiddenFootnoteSupport"in o.parser.constructs?i(f):t(f)}}const gR={name:"labelStartLink",resolveAll:bp.resolveAll,tokenize:yR};function yR(e,t,i){const o=this;return s;function s(c){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(c),e.exit("labelMarker"),e.exit("labelLink"),l}function l(c){return c===94&&"_hiddenFootnoteSupport"in o.parser.constructs?i(c):t(c)}}const Jf={name:"lineEnding",tokenize:xR};function xR(e,t){return i;function i(o){return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Pe(e,t,"linePrefix")}}const Tc={name:"thematicBreak",tokenize:vR};function vR(e,t,i){let o=0,s;return l;function l(p){return e.enter("thematicBreak"),c(p)}function c(p){return s=p,f(p)}function f(p){return p===s?(e.enter("thematicBreakSequence"),h(p)):o>=3&&(p===null||we(p))?(e.exit("thematicBreak"),t(p)):i(p)}function h(p){return p===s?(e.consume(p),o++,h):(e.exit("thematicBreakSequence"),Le(p)?Pe(e,f,"whitespace")(p):f(p))}}const Wt={continuation:{tokenize:NR},exit:jR,name:"list",tokenize:SR},bR={partial:!0,tokenize:CR},wR={partial:!0,tokenize:ER};function SR(e,t,i){const o=this,s=o.events[o.events.length-1];let l=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,c=0;return f;function f(b){const w=o.containerState.type||(b===42||b===43||b===45?"listUnordered":"listOrdered");if(w==="listUnordered"?!o.containerState.marker||b===o.containerState.marker:Ih(b)){if(o.containerState.type||(o.containerState.type=w,e.enter(w,{_container:!0})),w==="listUnordered")return e.enter("listItemPrefix"),b===42||b===45?e.check(Tc,i,p)(b):p(b);if(!o.interrupt||b===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),h(b)}return i(b)}function h(b){return Ih(b)&&++c<10?(e.consume(b),h):(!o.interrupt||c<2)&&(o.containerState.marker?b===o.containerState.marker:b===41||b===46)?(e.exit("listItemValue"),p(b)):i(b)}function p(b){return e.enter("listItemMarker"),e.consume(b),e.exit("listItemMarker"),o.containerState.marker=o.containerState.marker||b,e.check(Rs,o.interrupt?i:m,e.attempt(bR,v,g))}function m(b){return o.containerState.initialBlankLine=!0,l++,v(b)}function g(b){return Le(b)?(e.enter("listItemPrefixWhitespace"),e.consume(b),e.exit("listItemPrefixWhitespace"),v):i(b)}function v(b){return o.containerState.size=l+o.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(b)}}function NR(e,t,i){const o=this;return o.containerState._closeFlow=void 0,e.check(Rs,s,l);function s(f){return o.containerState.furtherBlankLines=o.containerState.furtherBlankLines||o.containerState.initialBlankLine,Pe(e,t,"listItemIndent",o.containerState.size+1)(f)}function l(f){return o.containerState.furtherBlankLines||!Le(f)?(o.containerState.furtherBlankLines=void 0,o.containerState.initialBlankLine=void 0,c(f)):(o.containerState.furtherBlankLines=void 0,o.containerState.initialBlankLine=void 0,e.attempt(wR,t,c)(f))}function c(f){return o.containerState._closeFlow=!0,o.interrupt=void 0,Pe(e,e.attempt(Wt,t,i),"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(f)}}function ER(e,t,i){const o=this;return Pe(e,s,"listItemIndent",o.containerState.size+1);function s(l){const c=o.events[o.events.length-1];return c&&c[1].type==="listItemIndent"&&c[2].sliceSerialize(c[1],!0).length===o.containerState.size?t(l):i(l)}}function jR(e){e.exit(this.containerState.type)}function CR(e,t,i){const o=this;return Pe(e,s,"listItemPrefixWhitespace",o.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(l){const c=o.events[o.events.length-1];return!Le(l)&&c&&c[1].type==="listItemPrefixWhitespace"?t(l):i(l)}}const tb={name:"setextUnderline",resolveTo:kR,tokenize:TR};function kR(e,t){let i=e.length,o,s,l;for(;i--;)if(e[i][0]==="enter"){if(e[i][1].type==="content"){o=i;break}e[i][1].type==="paragraph"&&(s=i)}else e[i][1].type==="content"&&e.splice(i,1),!l&&e[i][1].type==="definition"&&(l=i);const c={type:"setextHeading",start:{...e[o][1].start},end:{...e[e.length-1][1].end}};return e[s][1].type="setextHeadingText",l?(e.splice(s,0,["enter",c,t]),e.splice(l+1,0,["exit",e[o][1],t]),e[o][1].end={...e[l][1].end}):e[o][1]=c,e.push(["exit",c,t]),e}function TR(e,t,i){const o=this;let s;return l;function l(p){let m=o.events.length,g;for(;m--;)if(o.events[m][1].type!=="lineEnding"&&o.events[m][1].type!=="linePrefix"&&o.events[m][1].type!=="content"){g=o.events[m][1].type==="paragraph";break}return!o.parser.lazy[o.now().line]&&(o.interrupt||g)?(e.enter("setextHeadingLine"),s=p,c(p)):i(p)}function c(p){return e.enter("setextHeadingLineSequence"),f(p)}function f(p){return p===s?(e.consume(p),f):(e.exit("setextHeadingLineSequence"),Le(p)?Pe(e,h,"lineSuffix")(p):h(p))}function h(p){return p===null||we(p)?(e.exit("setextHeadingLine"),t(p)):i(p)}}const AR={tokenize:MR};function MR(e){const t=this,i=e.attempt(Rs,o,e.attempt(this.parser.constructs.flowInitial,s,Pe(e,e.attempt(this.parser.constructs.flow,s,e.attempt(LO,s)),"linePrefix")));return i;function o(l){if(l===null){e.consume(l);return}return e.enter("lineEndingBlank"),e.consume(l),e.exit("lineEndingBlank"),t.currentConstruct=void 0,i}function s(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),t.currentConstruct=void 0,i}}const DR={resolveAll:Xw()},_R=Yw("string"),OR=Yw("text");function Yw(e){return{resolveAll:Xw(e==="text"?RR:void 0),tokenize:t};function t(i){const o=this,s=this.parser.constructs[e],l=i.attempt(s,c,f);return c;function c(m){return p(m)?l(m):f(m)}function f(m){if(m===null){i.consume(m);return}return i.enter("data"),i.consume(m),h}function h(m){return p(m)?(i.exit("data"),l(m)):(i.consume(m),h)}function p(m){if(m===null)return!0;const g=s[m];let v=-1;if(g)for(;++v<g.length;){const b=g[v];if(!b.previous||b.previous.call(o,o.previous))return!0}return!1}}}function Xw(e){return t;function t(i,o){let s=-1,l;for(;++s<=i.length;)l===void 0?i[s]&&i[s][1].type==="data"&&(l=s,s++):(!i[s]||i[s][1].type!=="data")&&(s!==l+2&&(i[l][1].end=i[s-1][1].end,i.splice(l+2,s-l-2),s=l+2),l=void 0);return e?e(i,o):i}}function RR(e,t){let i=0;for(;++i<=e.length;)if((i===e.length||e[i][1].type==="lineEnding")&&e[i-1][1].type==="data"){const o=e[i-1][1],s=t.sliceStream(o);let l=s.length,c=-1,f=0,h;for(;l--;){const p=s[l];if(typeof p=="string"){for(c=p.length;p.charCodeAt(c-1)===32;)f++,c--;if(c)break;c=-1}else if(p===-2)h=!0,f++;else if(p!==-1){l++;break}}if(t._contentTypeTextTrailing&&i===e.length&&(f=0),f){const p={type:i===e.length||h||f<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:l?c:o.start._bufferIndex+c,_index:o.start._index+l,line:o.end.line,column:o.end.column-f,offset:o.end.offset-f},end:{...o.end}};o.end={...p.start},o.start.offset===o.end.offset?Object.assign(o,p):(e.splice(i,0,["enter",p,t],["exit",p,t]),i+=2)}i++}return e}const LR={42:Wt,43:Wt,45:Wt,48:Wt,49:Wt,50:Wt,51:Wt,52:Wt,53:Wt,54:Wt,55:Wt,56:Wt,57:Wt,62:$w},zR={91:$O},IR={[-2]:Zf,[-1]:Zf,32:Zf},BR={35:GO,42:Tc,45:[tb,Tc],60:WO,61:tb,95:Tc,96:Kv,126:Kv},HR={38:qw,92:Pw},$R={[-5]:Jf,[-4]:Jf,[-3]:Jf,33:pR,38:qw,42:Bh,60:[gO,iR],91:gR,92:[VO,Pw],93:bp,95:Bh,96:AO},PR={null:[Bh,DR]},qR={null:[42,95]},UR={null:[]},VR=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:qR,contentInitial:zR,disable:UR,document:LR,flow:BR,flowInitial:IR,insideSpan:PR,string:HR,text:$R},Symbol.toStringTag,{value:"Module"}));function FR(e,t,i){let o={_bufferIndex:-1,_index:0,line:i&&i.line||1,column:i&&i.column||1,offset:i&&i.offset||0};const s={},l=[];let c=[],f=[];const h={attempt:H($),check:H(A),consume:k,enter:j,exit:_,interrupt:H(A,{interrupt:!0})},p={code:null,containerState:{},defineSkip:N,events:[],now:w,parser:e,previous:null,sliceSerialize:v,sliceStream:b,write:g};let m=t.tokenize.call(p,h);return t.resolveAll&&l.push(t),p;function g(z){return c=Sn(c,z),C(),c[c.length-1]!==null?[]:(V(t,0),p.events=uu(l,p.events,p),p.events)}function v(z,U){return YR(b(z),U)}function b(z){return GR(c,z)}function w(){const{_bufferIndex:z,_index:U,line:Z,column:M,offset:P}=o;return{_bufferIndex:z,_index:U,line:Z,column:M,offset:P}}function N(z){s[z.line]=z.column,I()}function C(){let z;for(;o._index<c.length;){const U=c[o._index];if(typeof U=="string")for(z=o._index,o._bufferIndex<0&&(o._bufferIndex=0);o._index===z&&o._bufferIndex<U.length;)S(U.charCodeAt(o._bufferIndex));else S(U)}}function S(z){m=m(z)}function k(z){we(z)?(o.line++,o.column=1,o.offset+=z===-3?2:1,I()):z!==-1&&(o.column++,o.offset++),o._bufferIndex<0?o._index++:(o._bufferIndex++,o._bufferIndex===c[o._index].length&&(o._bufferIndex=-1,o._index++)),p.previous=z}function j(z,U){const Z=U||{};return Z.type=z,Z.start=w(),p.events.push(["enter",Z,p]),f.push(Z),Z}function _(z){const U=f.pop();return U.end=w(),p.events.push(["exit",U,p]),U}function $(z,U){V(z,U.from)}function A(z,U){U.restore()}function H(z,U){return Z;function Z(M,P,O){let q,Y,Q,D;return Array.isArray(M)?F(M):"tokenize"in M?F([M]):B(M);function B(re){return de;function de(ae){const fe=ae!==null&&re[ae],xe=ae!==null&&re.null,je=[...Array.isArray(fe)?fe:fe?[fe]:[],...Array.isArray(xe)?xe:xe?[xe]:[]];return F(je)(ae)}}function F(re){return q=re,Y=0,re.length===0?O:L(re[Y])}function L(re){return de;function de(ae){return D=G(),Q=re,re.partial||(p.currentConstruct=re),re.name&&p.parser.constructs.disable.null.includes(re.name)?te():re.tokenize.call(U?Object.assign(Object.create(p),U):p,h,ie,te)(ae)}}function ie(re){return z(Q,D),P}function te(re){return D.restore(),++Y<q.length?L(q[Y]):O}}}function V(z,U){z.resolveAll&&!l.includes(z)&&l.push(z),z.resolve&&fn(p.events,U,p.events.length-U,z.resolve(p.events.slice(U),p)),z.resolveTo&&(p.events=z.resolveTo(p.events,p))}function G(){const z=w(),U=p.previous,Z=p.currentConstruct,M=p.events.length,P=Array.from(f);return{from:M,restore:O};function O(){o=z,p.previous=U,p.currentConstruct=Z,p.events.length=M,f=P,I()}}function I(){o.line in s&&o.column<2&&(o.column=s[o.line],o.offset+=s[o.line]-1)}}function GR(e,t){const i=t.start._index,o=t.start._bufferIndex,s=t.end._index,l=t.end._bufferIndex;let c;if(i===s)c=[e[i].slice(o,l)];else{if(c=e.slice(i,s),o>-1){const f=c[0];typeof f=="string"?c[0]=f.slice(o):c.shift()}l>0&&c.push(e[s].slice(0,l))}return c}function YR(e,t){let i=-1;const o=[];let s;for(;++i<e.length;){const l=e[i];let c;if(typeof l=="string")c=l;else switch(l){case-5:{c="\r";break}case-4:{c=`
`;break}case-3:{c=`\r
`;break}case-2:{c=t?" ":"	";break}case-1:{if(!t&&s)continue;c=" ";break}default:c=String.fromCharCode(l)}s=l===-2,o.push(c)}return o.join("")}function XR(e){const o={constructs:Bw([VR,...(e||{}).extensions||[]]),content:s(cO),defined:[],document:s(dO),flow:s(AR),lazy:{},string:s(_R),text:s(OR)};return o;function s(l){return c;function c(f){return FR(o,l,f)}}}function QR(e){for(;!Uw(e););return e}const nb=/[\0\t\n\r]/g;function WR(){let e=1,t="",i=!0,o;return s;function s(l,c,f){const h=[];let p,m,g,v,b;for(l=t+(typeof l=="string"?l.toString():new TextDecoder(c||void 0).decode(l)),g=0,t="",i&&(l.charCodeAt(0)===65279&&g++,i=void 0);g<l.length;){if(nb.lastIndex=g,p=nb.exec(l),v=p&&p.index!==void 0?p.index:l.length,b=l.charCodeAt(v),!p){t=l.slice(g);break}if(b===10&&g===v&&o)h.push(-3),o=void 0;else switch(o&&(h.push(-5),o=void 0),g<v&&(h.push(l.slice(g,v)),e+=v-g),b){case 0:{h.push(65533),e++;break}case 9:{for(m=Math.ceil(e/4)*4,h.push(-2);e++<m;)h.push(-1);break}case 10:{h.push(-4),e=1;break}default:o=!0,e=1}g=v+1}return f&&(o&&h.push(-5),t&&h.push(t),h.push(null)),h}}const ZR=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function JR(e){return e.replace(ZR,KR)}function KR(e,t,i){if(t)return t;if(i.charCodeAt(0)===35){const s=i.charCodeAt(1),l=s===120||s===88;return Hw(i.slice(l?2:1),l?16:10)}return vp(i)||e}const Qw={}.hasOwnProperty;function eL(e,t,i){return typeof t!="string"&&(i=t,t=void 0),tL(i)(QR(XR(i).document().write(WR()(e,t,!0))))}function tL(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:l(_t),autolinkProtocol:G,autolinkEmail:G,atxHeading:l(qe),blockQuote:l(xe),characterEscape:G,characterReference:G,codeFenced:l(je),codeFencedFenceInfo:c,codeFencedFenceMeta:c,codeIndented:l(je,c),codeText:l(ve,c),codeTextData:G,data:G,codeFlowValue:G,definition:l(Ee),definitionDestinationString:c,definitionLabelString:c,definitionTitleString:c,emphasis:l(De),hardBreakEscape:l(Ue),hardBreakTrailing:l(Ue),htmlFlow:l(ft,c),htmlFlowData:G,htmlText:l(ft,c),htmlTextData:G,image:l(Kt),label:c,link:l(_t),listItem:l(Nn),listItemValue:v,listOrdered:l(Pt,g),listUnordered:l(Pt),paragraph:l(Qn),reference:L,referenceString:c,resourceDestinationString:c,resourceTitleString:c,setextHeading:l(qe),strong:l(Wn),thematicBreak:l(Ei)},exit:{atxHeading:h(),atxHeadingSequence:$,autolink:h(),autolinkEmail:fe,autolinkProtocol:ae,blockQuote:h(),characterEscapeValue:I,characterReferenceMarkerHexadecimal:te,characterReferenceMarkerNumeric:te,characterReferenceValue:re,characterReference:de,codeFenced:h(C),codeFencedFence:N,codeFencedFenceInfo:b,codeFencedFenceMeta:w,codeFlowValue:I,codeIndented:h(S),codeText:h(P),codeTextData:I,data:I,definition:h(),definitionDestinationString:_,definitionLabelString:k,definitionTitleString:j,emphasis:h(),hardBreakEscape:h(U),hardBreakTrailing:h(U),htmlFlow:h(Z),htmlFlowData:I,htmlText:h(M),htmlTextData:I,image:h(q),label:Q,labelText:Y,lineEnding:z,link:h(O),listItem:h(),listOrdered:h(),listUnordered:h(),paragraph:h(),referenceString:ie,resourceDestinationString:D,resourceTitleString:B,resource:F,setextHeading:h(V),setextHeadingLineSequence:H,setextHeadingText:A,strong:h(),thematicBreak:h()}};Ww(t,(e||{}).mdastExtensions||[]);const i={};return o;function o(se){let pe={type:"root",children:[]};const Se={stack:[pe],tokenStack:[],config:t,enter:f,exit:p,buffer:c,resume:m,data:i},_e=[];let $e=-1;for(;++$e<se.length;)if(se[$e][1].type==="listOrdered"||se[$e][1].type==="listUnordered")if(se[$e][0]==="enter")_e.push($e);else{const Bt=_e.pop();$e=s(se,Bt,$e)}for($e=-1;++$e<se.length;){const Bt=t[se[$e][0]];Qw.call(Bt,se[$e][1].type)&&Bt[se[$e][1].type].call(Object.assign({sliceSerialize:se[$e][2].sliceSerialize},Se),se[$e][1])}if(Se.tokenStack.length>0){const Bt=Se.tokenStack[Se.tokenStack.length-1];(Bt[1]||ib).call(Se,void 0,Bt[0])}for(pe.position={start:nr(se.length>0?se[0][1].start:{line:1,column:1,offset:0}),end:nr(se.length>0?se[se.length-2][1].end:{line:1,column:1,offset:0})},$e=-1;++$e<t.transforms.length;)pe=t.transforms[$e](pe)||pe;return pe}function s(se,pe,Se){let _e=pe-1,$e=-1,Bt=!1,En,kt,ht,Ot;for(;++_e<=Se;){const Qe=se[_e];switch(Qe[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Qe[0]==="enter"?$e++:$e--,Ot=void 0;break}case"lineEndingBlank":{Qe[0]==="enter"&&(En&&!Ot&&!$e&&!ht&&(ht=_e),Ot=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Ot=void 0}if(!$e&&Qe[0]==="enter"&&Qe[1].type==="listItemPrefix"||$e===-1&&Qe[0]==="exit"&&(Qe[1].type==="listUnordered"||Qe[1].type==="listOrdered")){if(En){let In=_e;for(kt=void 0;In--;){const en=se[In];if(en[1].type==="lineEnding"||en[1].type==="lineEndingBlank"){if(en[0]==="exit")continue;kt&&(se[kt][1].type="lineEndingBlank",Bt=!0),en[1].type="lineEnding",kt=In}else if(!(en[1].type==="linePrefix"||en[1].type==="blockQuotePrefix"||en[1].type==="blockQuotePrefixWhitespace"||en[1].type==="blockQuoteMarker"||en[1].type==="listItemIndent"))break}ht&&(!kt||ht<kt)&&(En._spread=!0),En.end=Object.assign({},kt?se[kt][1].start:Qe[1].end),se.splice(kt||_e,0,["exit",En,Qe[2]]),_e++,Se++}if(Qe[1].type==="listItemPrefix"){const In={type:"listItem",_spread:!1,start:Object.assign({},Qe[1].start),end:void 0};En=In,se.splice(_e,0,["enter",In,Qe[2]]),_e++,Se++,ht=void 0,Ot=!0}}}return se[pe][1]._spread=Bt,Se}function l(se,pe){return Se;function Se(_e){f.call(this,se(_e),_e),pe&&pe.call(this,_e)}}function c(){this.stack.push({type:"fragment",children:[]})}function f(se,pe,Se){this.stack[this.stack.length-1].children.push(se),this.stack.push(se),this.tokenStack.push([pe,Se||void 0]),se.position={start:nr(pe.start),end:void 0}}function h(se){return pe;function pe(Se){se&&se.call(this,Se),p.call(this,Se)}}function p(se,pe){const Se=this.stack.pop(),_e=this.tokenStack.pop();if(_e)_e[0].type!==se.type&&(pe?pe.call(this,se,_e[0]):(_e[1]||ib).call(this,se,_e[0]));else throw new Error("Cannot close `"+se.type+"` ("+cs({start:se.start,end:se.end})+"): its not open");Se.position.end=nr(se.end)}function m(){return xp(this.stack.pop())}function g(){this.data.expectingFirstListItemValue=!0}function v(se){if(this.data.expectingFirstListItemValue){const pe=this.stack[this.stack.length-2];pe.start=Number.parseInt(this.sliceSerialize(se),10),this.data.expectingFirstListItemValue=void 0}}function b(){const se=this.resume(),pe=this.stack[this.stack.length-1];pe.lang=se}function w(){const se=this.resume(),pe=this.stack[this.stack.length-1];pe.meta=se}function N(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function C(){const se=this.resume(),pe=this.stack[this.stack.length-1];pe.value=se.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function S(){const se=this.resume(),pe=this.stack[this.stack.length-1];pe.value=se.replace(/(\r?\n|\r)$/g,"")}function k(se){const pe=this.resume(),Se=this.stack[this.stack.length-1];Se.label=pe,Se.identifier=Rn(this.sliceSerialize(se)).toLowerCase()}function j(){const se=this.resume(),pe=this.stack[this.stack.length-1];pe.title=se}function _(){const se=this.resume(),pe=this.stack[this.stack.length-1];pe.url=se}function $(se){const pe=this.stack[this.stack.length-1];if(!pe.depth){const Se=this.sliceSerialize(se).length;pe.depth=Se}}function A(){this.data.setextHeadingSlurpLineEnding=!0}function H(se){const pe=this.stack[this.stack.length-1];pe.depth=this.sliceSerialize(se).codePointAt(0)===61?1:2}function V(){this.data.setextHeadingSlurpLineEnding=void 0}function G(se){const Se=this.stack[this.stack.length-1].children;let _e=Se[Se.length-1];(!_e||_e.type!=="text")&&(_e=Nt(),_e.position={start:nr(se.start),end:void 0},Se.push(_e)),this.stack.push(_e)}function I(se){const pe=this.stack.pop();pe.value+=this.sliceSerialize(se),pe.position.end=nr(se.end)}function z(se){const pe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Se=pe.children[pe.children.length-1];Se.position.end=nr(se.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(pe.type)&&(G.call(this,se),I.call(this,se))}function U(){this.data.atHardBreak=!0}function Z(){const se=this.resume(),pe=this.stack[this.stack.length-1];pe.value=se}function M(){const se=this.resume(),pe=this.stack[this.stack.length-1];pe.value=se}function P(){const se=this.resume(),pe=this.stack[this.stack.length-1];pe.value=se}function O(){const se=this.stack[this.stack.length-1];if(this.data.inReference){const pe=this.data.referenceType||"shortcut";se.type+="Reference",se.referenceType=pe,delete se.url,delete se.title}else delete se.identifier,delete se.label;this.data.referenceType=void 0}function q(){const se=this.stack[this.stack.length-1];if(this.data.inReference){const pe=this.data.referenceType||"shortcut";se.type+="Reference",se.referenceType=pe,delete se.url,delete se.title}else delete se.identifier,delete se.label;this.data.referenceType=void 0}function Y(se){const pe=this.sliceSerialize(se),Se=this.stack[this.stack.length-2];Se.label=JR(pe),Se.identifier=Rn(pe).toLowerCase()}function Q(){const se=this.stack[this.stack.length-1],pe=this.resume(),Se=this.stack[this.stack.length-1];if(this.data.inReference=!0,Se.type==="link"){const _e=se.children;Se.children=_e}else Se.alt=pe}function D(){const se=this.resume(),pe=this.stack[this.stack.length-1];pe.url=se}function B(){const se=this.resume(),pe=this.stack[this.stack.length-1];pe.title=se}function F(){this.data.inReference=void 0}function L(){this.data.referenceType="collapsed"}function ie(se){const pe=this.resume(),Se=this.stack[this.stack.length-1];Se.label=pe,Se.identifier=Rn(this.sliceSerialize(se)).toLowerCase(),this.data.referenceType="full"}function te(se){this.data.characterReferenceType=se.type}function re(se){const pe=this.sliceSerialize(se),Se=this.data.characterReferenceType;let _e;Se?(_e=Hw(pe,Se==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):_e=vp(pe);const $e=this.stack[this.stack.length-1];$e.value+=_e}function de(se){const pe=this.stack.pop();pe.position.end=nr(se.end)}function ae(se){I.call(this,se);const pe=this.stack[this.stack.length-1];pe.url=this.sliceSerialize(se)}function fe(se){I.call(this,se);const pe=this.stack[this.stack.length-1];pe.url="mailto:"+this.sliceSerialize(se)}function xe(){return{type:"blockquote",children:[]}}function je(){return{type:"code",lang:null,meta:null,value:""}}function ve(){return{type:"inlineCode",value:""}}function Ee(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function De(){return{type:"emphasis",children:[]}}function qe(){return{type:"heading",depth:0,children:[]}}function Ue(){return{type:"break"}}function ft(){return{type:"html",value:""}}function Kt(){return{type:"image",title:null,url:"",alt:null}}function _t(){return{type:"link",title:null,url:"",children:[]}}function Pt(se){return{type:"list",ordered:se.type==="listOrdered",start:null,spread:se._spread,children:[]}}function Nn(se){return{type:"listItem",spread:se._spread,checked:null,children:[]}}function Qn(){return{type:"paragraph",children:[]}}function Wn(){return{type:"strong",children:[]}}function Nt(){return{type:"text",value:""}}function Ei(){return{type:"thematicBreak"}}}function nr(e){return{line:e.line,column:e.column,offset:e.offset}}function Ww(e,t){let i=-1;for(;++i<t.length;){const o=t[i];Array.isArray(o)?Ww(e,o):nL(e,o)}}function nL(e,t){let i;for(i in t)if(Qw.call(t,i))switch(i){case"canContainEols":{const o=t[i];o&&e[i].push(...o);break}case"transforms":{const o=t[i];o&&e[i].push(...o);break}case"enter":case"exit":{const o=t[i];o&&Object.assign(e[i],o);break}}}function ib(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+cs({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+cs({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+cs({start:t.start,end:t.end})+") is still open")}function iL(e){const t=this;t.parser=i;function i(o){return eL(o,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function rL(e,t){const i={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,i),e.applyData(t,i)}function oL(e,t){const i={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,i),[e.applyData(t,i),{type:"text",value:`
`}]}function aL(e,t){const i=t.value?t.value+`
`:"",o={},s=t.lang?t.lang.split(/\s+/):[];s.length>0&&(o.className=["language-"+s[0]]);let l={type:"element",tagName:"code",properties:o,children:[{type:"text",value:i}]};return t.meta&&(l.data={meta:t.meta}),e.patch(t,l),l=e.applyData(t,l),l={type:"element",tagName:"pre",properties:{},children:[l]},e.patch(t,l),l}function sL(e,t){const i={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function lL(e,t){const i={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function cL(e,t){const i=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",o=String(t.identifier).toUpperCase(),s=Zo(o.toLowerCase()),l=e.footnoteOrder.indexOf(o);let c,f=e.footnoteCounts.get(o);f===void 0?(f=0,e.footnoteOrder.push(o),c=e.footnoteOrder.length):c=l+1,f+=1,e.footnoteCounts.set(o,f);const h={type:"element",tagName:"a",properties:{href:"#"+i+"fn-"+s,id:i+"fnref-"+s+(f>1?"-"+f:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(c)}]};e.patch(t,h);const p={type:"element",tagName:"sup",properties:{},children:[h]};return e.patch(t,p),e.applyData(t,p)}function uL(e,t){const i={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function dL(e,t){if(e.options.allowDangerousHtml){const i={type:"raw",value:t.value};return e.patch(t,i),e.applyData(t,i)}}function Zw(e,t){const i=t.referenceType;let o="]";if(i==="collapsed"?o+="[]":i==="full"&&(o+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+o}];const s=e.all(t),l=s[0];l&&l.type==="text"?l.value="["+l.value:s.unshift({type:"text",value:"["});const c=s[s.length-1];return c&&c.type==="text"?c.value+=o:s.push({type:"text",value:o}),s}function fL(e,t){const i=String(t.identifier).toUpperCase(),o=e.definitionById.get(i);if(!o)return Zw(e,t);const s={src:Zo(o.url||""),alt:t.alt};o.title!==null&&o.title!==void 0&&(s.title=o.title);const l={type:"element",tagName:"img",properties:s,children:[]};return e.patch(t,l),e.applyData(t,l)}function hL(e,t){const i={src:Zo(t.url)};t.alt!==null&&t.alt!==void 0&&(i.alt=t.alt),t.title!==null&&t.title!==void 0&&(i.title=t.title);const o={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,o),e.applyData(t,o)}function pL(e,t){const i={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,i);const o={type:"element",tagName:"code",properties:{},children:[i]};return e.patch(t,o),e.applyData(t,o)}function mL(e,t){const i=String(t.identifier).toUpperCase(),o=e.definitionById.get(i);if(!o)return Zw(e,t);const s={href:Zo(o.url||"")};o.title!==null&&o.title!==void 0&&(s.title=o.title);const l={type:"element",tagName:"a",properties:s,children:e.all(t)};return e.patch(t,l),e.applyData(t,l)}function gL(e,t){const i={href:Zo(t.url)};t.title!==null&&t.title!==void 0&&(i.title=t.title);const o={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,o),e.applyData(t,o)}function yL(e,t,i){const o=e.all(t),s=i?xL(i):Jw(t),l={},c=[];if(typeof t.checked=="boolean"){const m=o[0];let g;m&&m.type==="element"&&m.tagName==="p"?g=m:(g={type:"element",tagName:"p",properties:{},children:[]},o.unshift(g)),g.children.length>0&&g.children.unshift({type:"text",value:" "}),g.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),l.className=["task-list-item"]}let f=-1;for(;++f<o.length;){const m=o[f];(s||f!==0||m.type!=="element"||m.tagName!=="p")&&c.push({type:"text",value:`
`}),m.type==="element"&&m.tagName==="p"&&!s?c.push(...m.children):c.push(m)}const h=o[o.length-1];h&&(s||h.type!=="element"||h.tagName!=="p")&&c.push({type:"text",value:`
`});const p={type:"element",tagName:"li",properties:l,children:c};return e.patch(t,p),e.applyData(t,p)}function xL(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const i=e.children;let o=-1;for(;!t&&++o<i.length;)t=Jw(i[o])}return t}function Jw(e){const t=e.spread;return t??e.children.length>1}function vL(e,t){const i={},o=e.all(t);let s=-1;for(typeof t.start=="number"&&t.start!==1&&(i.start=t.start);++s<o.length;){const c=o[s];if(c.type==="element"&&c.tagName==="li"&&c.properties&&Array.isArray(c.properties.className)&&c.properties.className.includes("task-list-item")){i.className=["contains-task-list"];break}}const l={type:"element",tagName:t.ordered?"ol":"ul",properties:i,children:e.wrap(o,!0)};return e.patch(t,l),e.applyData(t,l)}function bL(e,t){const i={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function wL(e,t){const i={type:"root",children:e.wrap(e.all(t))};return e.patch(t,i),e.applyData(t,i)}function SL(e,t){const i={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function NL(e,t){const i=e.all(t),o=i.shift(),s=[];if(o){const c={type:"element",tagName:"thead",properties:{},children:e.wrap([o],!0)};e.patch(t.children[0],c),s.push(c)}if(i.length>0){const c={type:"element",tagName:"tbody",properties:{},children:e.wrap(i,!0)},f=pp(t.children[1]),h=Dw(t.children[t.children.length-1]);f&&h&&(c.position={start:f,end:h}),s.push(c)}const l={type:"element",tagName:"table",properties:{},children:e.wrap(s,!0)};return e.patch(t,l),e.applyData(t,l)}function EL(e,t,i){const o=i?i.children:void 0,l=(o?o.indexOf(t):1)===0?"th":"td",c=i&&i.type==="table"?i.align:void 0,f=c?c.length:t.children.length;let h=-1;const p=[];for(;++h<f;){const g=t.children[h],v={},b=c?c[h]:void 0;b&&(v.align=b);let w={type:"element",tagName:l,properties:v,children:[]};g&&(w.children=e.all(g),e.patch(g,w),w=e.applyData(g,w)),p.push(w)}const m={type:"element",tagName:"tr",properties:{},children:e.wrap(p,!0)};return e.patch(t,m),e.applyData(t,m)}function jL(e,t){const i={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}const rb=9,ob=32;function CL(e){const t=String(e),i=/\r?\n|\r/g;let o=i.exec(t),s=0;const l=[];for(;o;)l.push(ab(t.slice(s,o.index),s>0,!0),o[0]),s=o.index+o[0].length,o=i.exec(t);return l.push(ab(t.slice(s),s>0,!1)),l.join("")}function ab(e,t,i){let o=0,s=e.length;if(t){let l=e.codePointAt(o);for(;l===rb||l===ob;)o++,l=e.codePointAt(o)}if(i){let l=e.codePointAt(s-1);for(;l===rb||l===ob;)s--,l=e.codePointAt(s-1)}return s>o?e.slice(o,s):""}function kL(e,t){const i={type:"text",value:CL(String(t.value))};return e.patch(t,i),e.applyData(t,i)}function TL(e,t){const i={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,i),e.applyData(t,i)}const AL={blockquote:rL,break:oL,code:aL,delete:sL,emphasis:lL,footnoteReference:cL,heading:uL,html:dL,imageReference:fL,image:hL,inlineCode:pL,linkReference:mL,link:gL,listItem:yL,list:vL,paragraph:bL,root:wL,strong:SL,table:NL,tableCell:jL,tableRow:EL,text:kL,thematicBreak:TL,toml:yc,yaml:yc,definition:yc,footnoteDefinition:yc};function yc(){}const Kw=-1,du=0,ds=1,Uc=2,wp=3,Sp=4,Np=5,Ep=6,e1=7,t1=8,sb=typeof self=="object"?self:globalThis,ML=(e,t)=>{const i=(s,l)=>(e.set(l,s),s),o=s=>{if(e.has(s))return e.get(s);const[l,c]=t[s];switch(l){case du:case Kw:return i(c,s);case ds:{const f=i([],s);for(const h of c)f.push(o(h));return f}case Uc:{const f=i({},s);for(const[h,p]of c)f[o(h)]=o(p);return f}case wp:return i(new Date(c),s);case Sp:{const{source:f,flags:h}=c;return i(new RegExp(f,h),s)}case Np:{const f=i(new Map,s);for(const[h,p]of c)f.set(o(h),o(p));return f}case Ep:{const f=i(new Set,s);for(const h of c)f.add(o(h));return f}case e1:{const{name:f,message:h}=c;return i(new sb[f](h),s)}case t1:return i(BigInt(c),s);case"BigInt":return i(Object(BigInt(c)),s);case"ArrayBuffer":return i(new Uint8Array(c).buffer,c);case"DataView":{const{buffer:f}=new Uint8Array(c);return i(new DataView(f),c)}}return i(new sb[l](c),s)};return o},lb=e=>ML(new Map,e)(0),_o="",{toString:DL}={},{keys:_L}=Object,es=e=>{const t=typeof e;if(t!=="object"||!e)return[du,t];const i=DL.call(e).slice(8,-1);switch(i){case"Array":return[ds,_o];case"Object":return[Uc,_o];case"Date":return[wp,_o];case"RegExp":return[Sp,_o];case"Map":return[Np,_o];case"Set":return[Ep,_o];case"DataView":return[ds,i]}return i.includes("Array")?[ds,i]:i.includes("Error")?[e1,i]:[Uc,i]},xc=([e,t])=>e===du&&(t==="function"||t==="symbol"),OL=(e,t,i,o)=>{const s=(c,f)=>{const h=o.push(c)-1;return i.set(f,h),h},l=c=>{if(i.has(c))return i.get(c);let[f,h]=es(c);switch(f){case du:{let m=c;switch(h){case"bigint":f=t1,m=c.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+h);m=null;break;case"undefined":return s([Kw],c)}return s([f,m],c)}case ds:{if(h){let v=c;return h==="DataView"?v=new Uint8Array(c.buffer):h==="ArrayBuffer"&&(v=new Uint8Array(c)),s([h,[...v]],c)}const m=[],g=s([f,m],c);for(const v of c)m.push(l(v));return g}case Uc:{if(h)switch(h){case"BigInt":return s([h,c.toString()],c);case"Boolean":case"Number":case"String":return s([h,c.valueOf()],c)}if(t&&"toJSON"in c)return l(c.toJSON());const m=[],g=s([f,m],c);for(const v of _L(c))(e||!xc(es(c[v])))&&m.push([l(v),l(c[v])]);return g}case wp:return s([f,c.toISOString()],c);case Sp:{const{source:m,flags:g}=c;return s([f,{source:m,flags:g}],c)}case Np:{const m=[],g=s([f,m],c);for(const[v,b]of c)(e||!(xc(es(v))||xc(es(b))))&&m.push([l(v),l(b)]);return g}case Ep:{const m=[],g=s([f,m],c);for(const v of c)(e||!xc(es(v)))&&m.push(l(v));return g}}const{message:p}=c;return s([f,{name:h,message:p}],c)};return l},cb=(e,{json:t,lossy:i}={})=>{const o=[];return OL(!(t||i),!!t,new Map,o)(e),o},Vc=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?lb(cb(e,t)):structuredClone(e):(e,t)=>lb(cb(e,t));function RL(e,t){const i=[{type:"text",value:""}];return t>1&&i.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),i}function LL(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function zL(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",i=e.options.footnoteBackContent||RL,o=e.options.footnoteBackLabel||LL,s=e.options.footnoteLabel||"Footnotes",l=e.options.footnoteLabelTagName||"h2",c=e.options.footnoteLabelProperties||{className:["sr-only"]},f=[];let h=-1;for(;++h<e.footnoteOrder.length;){const p=e.footnoteById.get(e.footnoteOrder[h]);if(!p)continue;const m=e.all(p),g=String(p.identifier).toUpperCase(),v=Zo(g.toLowerCase());let b=0;const w=[],N=e.footnoteCounts.get(g);for(;N!==void 0&&++b<=N;){w.length>0&&w.push({type:"text",value:" "});let k=typeof i=="string"?i:i(h,b);typeof k=="string"&&(k={type:"text",value:k}),w.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+v+(b>1?"-"+b:""),dataFootnoteBackref:"",ariaLabel:typeof o=="string"?o:o(h,b),className:["data-footnote-backref"]},children:Array.isArray(k)?k:[k]})}const C=m[m.length-1];if(C&&C.type==="element"&&C.tagName==="p"){const k=C.children[C.children.length-1];k&&k.type==="text"?k.value+=" ":C.children.push({type:"text",value:" "}),C.children.push(...w)}else m.push(...w);const S={type:"element",tagName:"li",properties:{id:t+"fn-"+v},children:e.wrap(m,!0)};e.patch(p,S),f.push(S)}if(f.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:l,properties:{...Vc(c),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(f,!0)},{type:"text",value:`
`}]}}const fu=(function(e){if(e==null)return $L;if(typeof e=="function")return hu(e);if(typeof e=="object")return Array.isArray(e)?IL(e):BL(e);if(typeof e=="string")return HL(e);throw new Error("Expected function, string, or object as test")});function IL(e){const t=[];let i=-1;for(;++i<e.length;)t[i]=fu(e[i]);return hu(o);function o(...s){let l=-1;for(;++l<t.length;)if(t[l].apply(this,s))return!0;return!1}}function BL(e){const t=e;return hu(i);function i(o){const s=o;let l;for(l in e)if(s[l]!==t[l])return!1;return!0}}function HL(e){return hu(t);function t(i){return i&&i.type===e}}function hu(e){return t;function t(i,o,s){return!!(PL(i)&&e.call(this,i,typeof o=="number"?o:void 0,s||void 0))}}function $L(){return!0}function PL(e){return e!==null&&typeof e=="object"&&"type"in e}const n1=[],qL=!0,Hh=!1,UL="skip";function i1(e,t,i,o){let s;typeof t=="function"&&typeof i!="function"?(o=i,i=t):s=t;const l=fu(s),c=o?-1:1;f(e,void 0,[])();function f(h,p,m){const g=h&&typeof h=="object"?h:{};if(typeof g.type=="string"){const b=typeof g.tagName=="string"?g.tagName:typeof g.name=="string"?g.name:void 0;Object.defineProperty(v,"name",{value:"node ("+(h.type+(b?"<"+b+">":""))+")"})}return v;function v(){let b=n1,w,N,C;if((!t||l(h,p,m[m.length-1]||void 0))&&(b=VL(i(h,m)),b[0]===Hh))return b;if("children"in h&&h.children){const S=h;if(S.children&&b[0]!==UL)for(N=(o?S.children.length:-1)+c,C=m.concat(S);N>-1&&N<S.children.length;){const k=S.children[N];if(w=f(k,N,C)(),w[0]===Hh)return w;N=typeof w[1]=="number"?w[1]:N+c}}return b}}}function VL(e){return Array.isArray(e)?e:typeof e=="number"?[qL,e]:e==null?n1:[e]}function jp(e,t,i,o){let s,l,c;typeof t=="function"&&typeof i!="function"?(l=void 0,c=t,s=i):(l=t,c=i,s=o),i1(e,l,f,s);function f(h,p){const m=p[p.length-1],g=m?m.children.indexOf(h):void 0;return c(h,g,m)}}const $h={}.hasOwnProperty,FL={};function GL(e,t){const i=t||FL,o=new Map,s=new Map,l=new Map,c={...AL,...i.handlers},f={all:p,applyData:XL,definitionById:o,footnoteById:s,footnoteCounts:l,footnoteOrder:[],handlers:c,one:h,options:i,patch:YL,wrap:WL};return jp(e,function(m){if(m.type==="definition"||m.type==="footnoteDefinition"){const g=m.type==="definition"?o:s,v=String(m.identifier).toUpperCase();g.has(v)||g.set(v,m)}}),f;function h(m,g){const v=m.type,b=f.handlers[v];if($h.call(f.handlers,v)&&b)return b(f,m,g);if(f.options.passThrough&&f.options.passThrough.includes(v)){if("children"in m){const{children:N,...C}=m,S=Vc(C);return S.children=f.all(m),S}return Vc(m)}return(f.options.unknownHandler||QL)(f,m,g)}function p(m){const g=[];if("children"in m){const v=m.children;let b=-1;for(;++b<v.length;){const w=f.one(v[b],m);if(w){if(b&&v[b-1].type==="break"&&(!Array.isArray(w)&&w.type==="text"&&(w.value=ub(w.value)),!Array.isArray(w)&&w.type==="element")){const N=w.children[0];N&&N.type==="text"&&(N.value=ub(N.value))}Array.isArray(w)?g.push(...w):g.push(w)}}}return g}}function YL(e,t){e.position&&(t.position=L_(e))}function XL(e,t){let i=t;if(e&&e.data){const o=e.data.hName,s=e.data.hChildren,l=e.data.hProperties;if(typeof o=="string")if(i.type==="element")i.tagName=o;else{const c="children"in i?i.children:[i];i={type:"element",tagName:o,properties:{},children:c}}i.type==="element"&&l&&Object.assign(i.properties,Vc(l)),"children"in i&&i.children&&s!==null&&s!==void 0&&(i.children=s)}return i}function QL(e,t){const i=t.data||{},o="value"in t&&!($h.call(i,"hProperties")||$h.call(i,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,o),e.applyData(t,o)}function WL(e,t){const i=[];let o=-1;for(t&&i.push({type:"text",value:`
`});++o<e.length;)o&&i.push({type:"text",value:`
`}),i.push(e[o]);return t&&e.length>0&&i.push({type:"text",value:`
`}),i}function ub(e){let t=0,i=e.charCodeAt(t);for(;i===9||i===32;)t++,i=e.charCodeAt(t);return e.slice(t)}function db(e,t){const i=GL(e,t),o=i.one(e,void 0),s=zL(i),l=Array.isArray(o)?{type:"root",children:o}:o||{type:"root",children:[]};return s&&l.children.push({type:"text",value:`
`},s),l}function ZL(e,t){return e&&"run"in e?async function(i,o){const s=db(i,{file:o,...t});await e.run(s,o)}:function(i,o){return db(i,{file:o,...e||t})}}function fb(e){if(e)throw e}var Kf,hb;function JL(){if(hb)return Kf;hb=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,i=Object.defineProperty,o=Object.getOwnPropertyDescriptor,s=function(p){return typeof Array.isArray=="function"?Array.isArray(p):t.call(p)==="[object Array]"},l=function(p){if(!p||t.call(p)!=="[object Object]")return!1;var m=e.call(p,"constructor"),g=p.constructor&&p.constructor.prototype&&e.call(p.constructor.prototype,"isPrototypeOf");if(p.constructor&&!m&&!g)return!1;var v;for(v in p);return typeof v>"u"||e.call(p,v)},c=function(p,m){i&&m.name==="__proto__"?i(p,m.name,{enumerable:!0,configurable:!0,value:m.newValue,writable:!0}):p[m.name]=m.newValue},f=function(p,m){if(m==="__proto__")if(e.call(p,m)){if(o)return o(p,m).value}else return;return p[m]};return Kf=function h(){var p,m,g,v,b,w,N=arguments[0],C=1,S=arguments.length,k=!1;for(typeof N=="boolean"&&(k=N,N=arguments[1]||{},C=2),(N==null||typeof N!="object"&&typeof N!="function")&&(N={});C<S;++C)if(p=arguments[C],p!=null)for(m in p)g=f(N,m),v=f(p,m),N!==v&&(k&&v&&(l(v)||(b=s(v)))?(b?(b=!1,w=g&&s(g)?g:[]):w=g&&l(g)?g:{},c(N,{name:m,newValue:h(k,w,v)})):typeof v<"u"&&c(N,{name:m,newValue:v}));return N},Kf}var KL=JL();const eh=Xc(KL);function Ph(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function ez(){const e=[],t={run:i,use:o};return t;function i(...s){let l=-1;const c=s.pop();if(typeof c!="function")throw new TypeError("Expected function as last argument, not "+c);f(null,...s);function f(h,...p){const m=e[++l];let g=-1;if(h){c(h);return}for(;++g<s.length;)(p[g]===null||p[g]===void 0)&&(p[g]=s[g]);s=p,m?tz(m,f)(...p):c(null,...p)}}function o(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return e.push(s),t}}function tz(e,t){let i;return o;function o(...c){const f=e.length>c.length;let h;f&&c.push(s);try{h=e.apply(this,c)}catch(p){const m=p;if(f&&i)throw m;return s(m)}f||(h&&h.then&&typeof h.then=="function"?h.then(l,s):h instanceof Error?s(h):l(h))}function s(c,...f){i||(i=!0,t(c,...f))}function l(c){s(null,c)}}const Un={basename:nz,dirname:iz,extname:rz,join:oz,sep:"/"};function nz(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Ls(e);let i=0,o=-1,s=e.length,l;if(t===void 0||t.length===0||t.length>e.length){for(;s--;)if(e.codePointAt(s)===47){if(l){i=s+1;break}}else o<0&&(l=!0,o=s+1);return o<0?"":e.slice(i,o)}if(t===e)return"";let c=-1,f=t.length-1;for(;s--;)if(e.codePointAt(s)===47){if(l){i=s+1;break}}else c<0&&(l=!0,c=s+1),f>-1&&(e.codePointAt(s)===t.codePointAt(f--)?f<0&&(o=s):(f=-1,o=c));return i===o?o=c:o<0&&(o=e.length),e.slice(i,o)}function iz(e){if(Ls(e),e.length===0)return".";let t=-1,i=e.length,o;for(;--i;)if(e.codePointAt(i)===47){if(o){t=i;break}}else o||(o=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function rz(e){Ls(e);let t=e.length,i=-1,o=0,s=-1,l=0,c;for(;t--;){const f=e.codePointAt(t);if(f===47){if(c){o=t+1;break}continue}i<0&&(c=!0,i=t+1),f===46?s<0?s=t:l!==1&&(l=1):s>-1&&(l=-1)}return s<0||i<0||l===0||l===1&&s===i-1&&s===o+1?"":e.slice(s,i)}function oz(...e){let t=-1,i;for(;++t<e.length;)Ls(e[t]),e[t]&&(i=i===void 0?e[t]:i+"/"+e[t]);return i===void 0?".":az(i)}function az(e){Ls(e);const t=e.codePointAt(0)===47;let i=sz(e,!t);return i.length===0&&!t&&(i="."),i.length>0&&e.codePointAt(e.length-1)===47&&(i+="/"),t?"/"+i:i}function sz(e,t){let i="",o=0,s=-1,l=0,c=-1,f,h;for(;++c<=e.length;){if(c<e.length)f=e.codePointAt(c);else{if(f===47)break;f=47}if(f===47){if(!(s===c-1||l===1))if(s!==c-1&&l===2){if(i.length<2||o!==2||i.codePointAt(i.length-1)!==46||i.codePointAt(i.length-2)!==46){if(i.length>2){if(h=i.lastIndexOf("/"),h!==i.length-1){h<0?(i="",o=0):(i=i.slice(0,h),o=i.length-1-i.lastIndexOf("/")),s=c,l=0;continue}}else if(i.length>0){i="",o=0,s=c,l=0;continue}}t&&(i=i.length>0?i+"/..":"..",o=2)}else i.length>0?i+="/"+e.slice(s+1,c):i=e.slice(s+1,c),o=c-s-1;s=c,l=0}else f===46&&l>-1?l++:l=-1}return i}function Ls(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const lz={cwd:cz};function cz(){return"/"}function qh(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function uz(e){if(typeof e=="string")e=new URL(e);else if(!qh(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return dz(e)}function dz(e){if(e.hostname!==""){const o=new TypeError('File URL host must be "localhost" or empty on darwin');throw o.code="ERR_INVALID_FILE_URL_HOST",o}const t=e.pathname;let i=-1;for(;++i<t.length;)if(t.codePointAt(i)===37&&t.codePointAt(i+1)===50){const o=t.codePointAt(i+2);if(o===70||o===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(t)}const th=["history","path","basename","stem","extname","dirname"];class r1{constructor(t){let i;t?qh(t)?i={path:t}:typeof t=="string"||fz(t)?i={value:t}:i=t:i={},this.cwd="cwd"in i?"":lz.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let o=-1;for(;++o<th.length;){const l=th[o];l in i&&i[l]!==void 0&&i[l]!==null&&(this[l]=l==="history"?[...i[l]]:i[l])}let s;for(s in i)th.includes(s)||(this[s]=i[s])}get basename(){return typeof this.path=="string"?Un.basename(this.path):void 0}set basename(t){ih(t,"basename"),nh(t,"basename"),this.path=Un.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Un.dirname(this.path):void 0}set dirname(t){pb(this.basename,"dirname"),this.path=Un.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Un.extname(this.path):void 0}set extname(t){if(nh(t,"extname"),pb(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Un.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){qh(t)&&(t=uz(t)),ih(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Un.basename(this.path,this.extname):void 0}set stem(t){ih(t,"stem"),nh(t,"stem"),this.path=Un.join(this.dirname||"",t+(this.extname||""))}fail(t,i,o){const s=this.message(t,i,o);throw s.fatal=!0,s}info(t,i,o){const s=this.message(t,i,o);return s.fatal=void 0,s}message(t,i,o){const s=new It(t,i,o);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function nh(e,t){if(e&&e.includes(Un.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Un.sep+"`")}function ih(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function pb(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function fz(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const hz=(function(e){const o=this.constructor.prototype,s=o[e],l=function(){return s.apply(l,arguments)};return Object.setPrototypeOf(l,o),l}),pz={}.hasOwnProperty;class Cp extends hz{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=ez()}copy(){const t=new Cp;let i=-1;for(;++i<this.attachers.length;){const o=this.attachers[i];t.use(...o)}return t.data(eh(!0,{},this.namespace)),t}data(t,i){return typeof t=="string"?arguments.length===2?(ah("data",this.frozen),this.namespace[t]=i,this):pz.call(this.namespace,t)&&this.namespace[t]||void 0:t?(ah("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[i,...o]=this.attachers[this.freezeIndex];if(o[0]===!1)continue;o[0]===!0&&(o[0]=void 0);const s=i.call(t,...o);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const i=vc(t),o=this.parser||this.Parser;return rh("parse",o),o(String(i),i)}process(t,i){const o=this;return this.freeze(),rh("process",this.parser||this.Parser),oh("process",this.compiler||this.Compiler),i?s(void 0,i):new Promise(s);function s(l,c){const f=vc(t),h=o.parse(f);o.run(h,f,function(m,g,v){if(m||!g||!v)return p(m);const b=g,w=o.stringify(b,v);yz(w)?v.value=w:v.result=w,p(m,v)});function p(m,g){m||!g?c(m):l?l(g):i(void 0,g)}}}processSync(t){let i=!1,o;return this.freeze(),rh("processSync",this.parser||this.Parser),oh("processSync",this.compiler||this.Compiler),this.process(t,s),gb("processSync","process",i),o;function s(l,c){i=!0,fb(l),o=c}}run(t,i,o){mb(t),this.freeze();const s=this.transformers;return!o&&typeof i=="function"&&(o=i,i=void 0),o?l(void 0,o):new Promise(l);function l(c,f){const h=vc(i);s.run(t,h,p);function p(m,g,v){const b=g||t;m?f(m):c?c(b):o(void 0,b,v)}}}runSync(t,i){let o=!1,s;return this.run(t,i,l),gb("runSync","run",o),s;function l(c,f){fb(c),s=f,o=!0}}stringify(t,i){this.freeze();const o=vc(i),s=this.compiler||this.Compiler;return oh("stringify",s),mb(t),s(t,o)}use(t,...i){const o=this.attachers,s=this.namespace;if(ah("use",this.frozen),t!=null)if(typeof t=="function")h(t,i);else if(typeof t=="object")Array.isArray(t)?f(t):c(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function l(p){if(typeof p=="function")h(p,[]);else if(typeof p=="object")if(Array.isArray(p)){const[m,...g]=p;h(m,g)}else c(p);else throw new TypeError("Expected usable value, not `"+p+"`")}function c(p){if(!("plugins"in p)&&!("settings"in p))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");f(p.plugins),p.settings&&(s.settings=eh(!0,s.settings,p.settings))}function f(p){let m=-1;if(p!=null)if(Array.isArray(p))for(;++m<p.length;){const g=p[m];l(g)}else throw new TypeError("Expected a list of plugins, not `"+p+"`")}function h(p,m){let g=-1,v=-1;for(;++g<o.length;)if(o[g][0]===p){v=g;break}if(v===-1)o.push([p,...m]);else if(m.length>0){let[b,...w]=m;const N=o[v][1];Ph(N)&&Ph(b)&&(b=eh(!0,N,b)),o[v]=[p,b,...w]}}}}const mz=new Cp().freeze();function rh(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function oh(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function ah(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function mb(e){if(!Ph(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function gb(e,t,i){if(!i)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function vc(e){return gz(e)?e:new r1(e)}function gz(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function yz(e){return typeof e=="string"||xz(e)}function xz(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const vz="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",yb=[],xb={allowDangerousHtml:!0},bz=/^(https?|ircs?|mailto|xmpp)$/i,wz=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function o1(e){const t=Sz(e),i=Nz(e);return Ez(t.runSync(t.parse(i),i),e)}function Sz(e){const t=e.rehypePlugins||yb,i=e.remarkPlugins||yb,o=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...xb}:xb;return mz().use(iL).use(i).use(ZL,o).use(t)}function Nz(e){const t=e.children||"",i=new r1;return typeof t=="string"&&(i.value=t),i}function Ez(e,t){const i=t.allowedElements,o=t.allowElement,s=t.components,l=t.disallowedElements,c=t.skipHtml,f=t.unwrapDisallowed,h=t.urlTransform||jz;for(const m of wz)Object.hasOwn(t,m.from)&&(""+m.from+(m.to?"use `"+m.to+"` instead":"remove it")+vz+m.id,void 0);return jp(e,p),$_(e,{Fragment:u.Fragment,components:s,ignoreInvalidStyle:!0,jsx:u.jsx,jsxs:u.jsxs,passKeys:!0,passNode:!0});function p(m,g,v){if(m.type==="raw"&&v&&typeof g=="number")return c?v.children.splice(g,1):v.children[g]={type:"text",value:m.value},g;if(m.type==="element"){let b;for(b in Wf)if(Object.hasOwn(Wf,b)&&Object.hasOwn(m.properties,b)){const w=m.properties[b],N=Wf[b];(N===null||N.includes(m.tagName))&&(m.properties[b]=h(String(w||""),b,m))}}if(m.type==="element"){let b=i?!i.includes(m.tagName):l?l.includes(m.tagName):!1;if(!b&&o&&typeof g=="number"&&(b=!o(m,g,v)),b&&v&&typeof g=="number")return f&&m.children?v.children.splice(g,1,...m.children):v.children.splice(g,1),g}}}function jz(e){const t=e.indexOf(":"),i=e.indexOf("?"),o=e.indexOf("#"),s=e.indexOf("/");return t===-1||s!==-1&&t>s||i!==-1&&t>i||o!==-1&&t>o||bz.test(e.slice(0,t))?e:""}function vb(e,t){const i=String(e);if(typeof t!="string")throw new TypeError("Expected character");let o=0,s=i.indexOf(t);for(;s!==-1;)o++,s=i.indexOf(t,s+t.length);return o}function Cz(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function kz(e,t,i){const s=fu((i||{}).ignore||[]),l=Tz(t);let c=-1;for(;++c<l.length;)i1(e,"text",f);function f(p,m){let g=-1,v;for(;++g<m.length;){const b=m[g],w=v?v.children:void 0;if(s(b,w?w.indexOf(b):void 0,v))return;v=b}if(v)return h(p,m)}function h(p,m){const g=m[m.length-1],v=l[c][0],b=l[c][1];let w=0;const C=g.children.indexOf(p);let S=!1,k=[];v.lastIndex=0;let j=v.exec(p.value);for(;j;){const _=j.index,$={index:j.index,input:j.input,stack:[...m,p]};let A=b(...j,$);if(typeof A=="string"&&(A=A.length>0?{type:"text",value:A}:void 0),A===!1?v.lastIndex=_+1:(w!==_&&k.push({type:"text",value:p.value.slice(w,_)}),Array.isArray(A)?k.push(...A):A&&k.push(A),w=_+j[0].length,S=!0),!v.global)break;j=v.exec(p.value)}return S?(w<p.value.length&&k.push({type:"text",value:p.value.slice(w)}),g.children.splice(C,1,...k)):k=[p],C+k.length}}function Tz(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const i=!e[0]||Array.isArray(e[0])?e:[e];let o=-1;for(;++o<i.length;){const s=i[o];t.push([Az(s[0]),Mz(s[1])])}return t}function Az(e){return typeof e=="string"?new RegExp(Cz(e),"g"):e}function Mz(e){return typeof e=="function"?e:function(){return e}}const sh="phrasing",lh=["autolink","link","image","label"];function Dz(){return{transforms:[Bz],enter:{literalAutolink:Oz,literalAutolinkEmail:ch,literalAutolinkHttp:ch,literalAutolinkWww:ch},exit:{literalAutolink:Iz,literalAutolinkEmail:zz,literalAutolinkHttp:Rz,literalAutolinkWww:Lz}}}function _z(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:sh,notInConstruct:lh},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:sh,notInConstruct:lh},{character:":",before:"[ps]",after:"\\/",inConstruct:sh,notInConstruct:lh}]}}function Oz(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function ch(e){this.config.enter.autolinkProtocol.call(this,e)}function Rz(e){this.config.exit.autolinkProtocol.call(this,e)}function Lz(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function zz(e){this.config.exit.autolinkEmail.call(this,e)}function Iz(e){this.exit(e)}function Bz(e){kz(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Hz],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),$z]],{ignore:["link","linkReference"]})}function Hz(e,t,i,o,s){let l="";if(!a1(s)||(/^w/i.test(t)&&(i=t+i,t="",l="http://"),!Pz(i)))return!1;const c=qz(i+o);if(!c[0])return!1;const f={type:"link",title:null,url:l+t+c[0],children:[{type:"text",value:t+c[0]}]};return c[1]?[f,{type:"text",value:c[1]}]:f}function $z(e,t,i,o){return!a1(o,!0)||/[-\d_]$/.test(i)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+i,children:[{type:"text",value:t+"@"+i}]}}function Pz(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function qz(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let i=t[0],o=i.indexOf(")");const s=vb(e,"(");let l=vb(e,")");for(;o!==-1&&s>l;)e+=i.slice(0,o+1),i=i.slice(o+1),o=i.indexOf(")"),l++;return[e,i]}function a1(e,t){const i=e.input.charCodeAt(e.index-1);return(e.index===0||$r(i)||cu(i))&&(!t||i!==47)}s1.peek=Zz;function Uz(){this.buffer()}function Vz(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function Fz(){this.buffer()}function Gz(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function Yz(e){const t=this.resume(),i=this.stack[this.stack.length-1];i.type,i.identifier=Rn(this.sliceSerialize(e)).toLowerCase(),i.label=t}function Xz(e){this.exit(e)}function Qz(e){const t=this.resume(),i=this.stack[this.stack.length-1];i.type,i.identifier=Rn(this.sliceSerialize(e)).toLowerCase(),i.label=t}function Wz(e){this.exit(e)}function Zz(){return"["}function s1(e,t,i,o){const s=i.createTracker(o);let l=s.move("[^");const c=i.enter("footnoteReference"),f=i.enter("reference");return l+=s.move(i.safe(i.associationId(e),{after:"]",before:l})),f(),c(),l+=s.move("]"),l}function Jz(){return{enter:{gfmFootnoteCallString:Uz,gfmFootnoteCall:Vz,gfmFootnoteDefinitionLabelString:Fz,gfmFootnoteDefinition:Gz},exit:{gfmFootnoteCallString:Yz,gfmFootnoteCall:Xz,gfmFootnoteDefinitionLabelString:Qz,gfmFootnoteDefinition:Wz}}}function Kz(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:i,footnoteReference:s1},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function i(o,s,l,c){const f=l.createTracker(c);let h=f.move("[^");const p=l.enter("footnoteDefinition"),m=l.enter("label");return h+=f.move(l.safe(l.associationId(o),{before:h,after:"]"})),m(),h+=f.move("]:"),o.children&&o.children.length>0&&(f.shift(4),h+=f.move((t?`
`:" ")+l.indentLines(l.containerFlow(o,f.current()),t?l1:eI))),p(),h}}function eI(e,t,i){return t===0?e:l1(e,t,i)}function l1(e,t,i){return(i?"":"    ")+e}const tI=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];c1.peek=aI;function nI(){return{canContainEols:["delete"],enter:{strikethrough:rI},exit:{strikethrough:oI}}}function iI(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:tI}],handlers:{delete:c1}}}function rI(e){this.enter({type:"delete",children:[]},e)}function oI(e){this.exit(e)}function c1(e,t,i,o){const s=i.createTracker(o),l=i.enter("strikethrough");let c=s.move("~~");return c+=i.containerPhrasing(e,{...s.current(),before:c,after:"~"}),c+=s.move("~~"),l(),c}function aI(){return"~"}function sI(e){return e.length}function lI(e,t){const i=t||{},o=(i.align||[]).concat(),s=i.stringLength||sI,l=[],c=[],f=[],h=[];let p=0,m=-1;for(;++m<e.length;){const N=[],C=[];let S=-1;for(e[m].length>p&&(p=e[m].length);++S<e[m].length;){const k=cI(e[m][S]);if(i.alignDelimiters!==!1){const j=s(k);C[S]=j,(h[S]===void 0||j>h[S])&&(h[S]=j)}N.push(k)}c[m]=N,f[m]=C}let g=-1;if(typeof o=="object"&&"length"in o)for(;++g<p;)l[g]=bb(o[g]);else{const N=bb(o);for(;++g<p;)l[g]=N}g=-1;const v=[],b=[];for(;++g<p;){const N=l[g];let C="",S="";N===99?(C=":",S=":"):N===108?C=":":N===114&&(S=":");let k=i.alignDelimiters===!1?1:Math.max(1,h[g]-C.length-S.length);const j=C+"-".repeat(k)+S;i.alignDelimiters!==!1&&(k=C.length+k+S.length,k>h[g]&&(h[g]=k),b[g]=k),v[g]=j}c.splice(1,0,v),f.splice(1,0,b),m=-1;const w=[];for(;++m<c.length;){const N=c[m],C=f[m];g=-1;const S=[];for(;++g<p;){const k=N[g]||"";let j="",_="";if(i.alignDelimiters!==!1){const $=h[g]-(C[g]||0),A=l[g];A===114?j=" ".repeat($):A===99?$%2?(j=" ".repeat($/2+.5),_=" ".repeat($/2-.5)):(j=" ".repeat($/2),_=j):_=" ".repeat($)}i.delimiterStart!==!1&&!g&&S.push("|"),i.padding!==!1&&!(i.alignDelimiters===!1&&k==="")&&(i.delimiterStart!==!1||g)&&S.push(" "),i.alignDelimiters!==!1&&S.push(j),S.push(k),i.alignDelimiters!==!1&&S.push(_),i.padding!==!1&&S.push(" "),(i.delimiterEnd!==!1||g!==p-1)&&S.push("|")}w.push(i.delimiterEnd===!1?S.join("").replace(/ +$/,""):S.join(""))}return w.join(`
`)}function cI(e){return e==null?"":String(e)}function bb(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function uI(e,t,i,o){const s=i.enter("blockquote"),l=i.createTracker(o);l.move("> "),l.shift(2);const c=i.indentLines(i.containerFlow(e,l.current()),dI);return s(),c}function dI(e,t,i){return">"+(i?"":" ")+e}function fI(e,t){return wb(e,t.inConstruct,!0)&&!wb(e,t.notInConstruct,!1)}function wb(e,t,i){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return i;let o=-1;for(;++o<t.length;)if(e.includes(t[o]))return!0;return!1}function Sb(e,t,i,o){let s=-1;for(;++s<i.unsafe.length;)if(i.unsafe[s].character===`
`&&fI(i.stack,i.unsafe[s]))return/[ \t]/.test(o.before)?"":" ";return`\\
`}function hI(e,t){const i=String(e);let o=i.indexOf(t),s=o,l=0,c=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;o!==-1;)o===s?++l>c&&(c=l):l=1,s=o+t.length,o=i.indexOf(t,s);return c}function pI(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function mI(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function gI(e,t,i,o){const s=mI(i),l=e.value||"",c=s==="`"?"GraveAccent":"Tilde";if(pI(e,i)){const g=i.enter("codeIndented"),v=i.indentLines(l,yI);return g(),v}const f=i.createTracker(o),h=s.repeat(Math.max(hI(l,s)+1,3)),p=i.enter("codeFenced");let m=f.move(h);if(e.lang){const g=i.enter(`codeFencedLang${c}`);m+=f.move(i.safe(e.lang,{before:m,after:" ",encode:["`"],...f.current()})),g()}if(e.lang&&e.meta){const g=i.enter(`codeFencedMeta${c}`);m+=f.move(" "),m+=f.move(i.safe(e.meta,{before:m,after:`
`,encode:["`"],...f.current()})),g()}return m+=f.move(`
`),l&&(m+=f.move(l+`
`)),m+=f.move(h),p(),m}function yI(e,t,i){return(i?"":"    ")+e}function kp(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function xI(e,t,i,o){const s=kp(i),l=s==='"'?"Quote":"Apostrophe",c=i.enter("definition");let f=i.enter("label");const h=i.createTracker(o);let p=h.move("[");return p+=h.move(i.safe(i.associationId(e),{before:p,after:"]",...h.current()})),p+=h.move("]: "),f(),!e.url||/[\0- \u007F]/.test(e.url)?(f=i.enter("destinationLiteral"),p+=h.move("<"),p+=h.move(i.safe(e.url,{before:p,after:">",...h.current()})),p+=h.move(">")):(f=i.enter("destinationRaw"),p+=h.move(i.safe(e.url,{before:p,after:e.title?" ":`
`,...h.current()}))),f(),e.title&&(f=i.enter(`title${l}`),p+=h.move(" "+s),p+=h.move(i.safe(e.title,{before:p,after:s,...h.current()})),p+=h.move(s),f()),c(),p}function vI(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function Ns(e){return"&#x"+e.toString(16).toUpperCase()+";"}function Fc(e,t,i){const o=Qo(e),s=Qo(t);return o===void 0?s===void 0?i==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:o===1?s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}u1.peek=bI;function u1(e,t,i,o){const s=vI(i),l=i.enter("emphasis"),c=i.createTracker(o),f=c.move(s);let h=c.move(i.containerPhrasing(e,{after:s,before:f,...c.current()}));const p=h.charCodeAt(0),m=Fc(o.before.charCodeAt(o.before.length-1),p,s);m.inside&&(h=Ns(p)+h.slice(1));const g=h.charCodeAt(h.length-1),v=Fc(o.after.charCodeAt(0),g,s);v.inside&&(h=h.slice(0,-1)+Ns(g));const b=c.move(s);return l(),i.attentionEncodeSurroundingInfo={after:v.outside,before:m.outside},f+h+b}function bI(e,t,i){return i.options.emphasis||"*"}function wI(e,t){let i=!1;return jp(e,function(o){if("value"in o&&/\r?\n|\r/.test(o.value)||o.type==="break")return i=!0,Hh}),!!((!e.depth||e.depth<3)&&xp(e)&&(t.options.setext||i))}function SI(e,t,i,o){const s=Math.max(Math.min(6,e.depth||1),1),l=i.createTracker(o);if(wI(e,i)){const m=i.enter("headingSetext"),g=i.enter("phrasing"),v=i.containerPhrasing(e,{...l.current(),before:`
`,after:`
`});return g(),m(),v+`
`+(s===1?"=":"-").repeat(v.length-(Math.max(v.lastIndexOf("\r"),v.lastIndexOf(`
`))+1))}const c="#".repeat(s),f=i.enter("headingAtx"),h=i.enter("phrasing");l.move(c+" ");let p=i.containerPhrasing(e,{before:"# ",after:`
`,...l.current()});return/^[\t ]/.test(p)&&(p=Ns(p.charCodeAt(0))+p.slice(1)),p=p?c+" "+p:c,i.options.closeAtx&&(p+=" "+c),h(),f(),p}d1.peek=NI;function d1(e){return e.value||""}function NI(){return"<"}f1.peek=EI;function f1(e,t,i,o){const s=kp(i),l=s==='"'?"Quote":"Apostrophe",c=i.enter("image");let f=i.enter("label");const h=i.createTracker(o);let p=h.move("![");return p+=h.move(i.safe(e.alt,{before:p,after:"]",...h.current()})),p+=h.move("]("),f(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(f=i.enter("destinationLiteral"),p+=h.move("<"),p+=h.move(i.safe(e.url,{before:p,after:">",...h.current()})),p+=h.move(">")):(f=i.enter("destinationRaw"),p+=h.move(i.safe(e.url,{before:p,after:e.title?" ":")",...h.current()}))),f(),e.title&&(f=i.enter(`title${l}`),p+=h.move(" "+s),p+=h.move(i.safe(e.title,{before:p,after:s,...h.current()})),p+=h.move(s),f()),p+=h.move(")"),c(),p}function EI(){return"!"}h1.peek=jI;function h1(e,t,i,o){const s=e.referenceType,l=i.enter("imageReference");let c=i.enter("label");const f=i.createTracker(o);let h=f.move("![");const p=i.safe(e.alt,{before:h,after:"]",...f.current()});h+=f.move(p+"]["),c();const m=i.stack;i.stack=[],c=i.enter("reference");const g=i.safe(i.associationId(e),{before:h,after:"]",...f.current()});return c(),i.stack=m,l(),s==="full"||!p||p!==g?h+=f.move(g+"]"):s==="shortcut"?h=h.slice(0,-1):h+=f.move("]"),h}function jI(){return"!"}p1.peek=CI;function p1(e,t,i){let o=e.value||"",s="`",l=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(o);)s+="`";for(/[^ \r\n]/.test(o)&&(/^[ \r\n]/.test(o)&&/[ \r\n]$/.test(o)||/^`|`$/.test(o))&&(o=" "+o+" ");++l<i.unsafe.length;){const c=i.unsafe[l],f=i.compilePattern(c);let h;if(c.atBreak)for(;h=f.exec(o);){let p=h.index;o.charCodeAt(p)===10&&o.charCodeAt(p-1)===13&&p--,o=o.slice(0,p)+" "+o.slice(h.index+1)}}return s+o+s}function CI(){return"`"}function m1(e,t){const i=xp(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(i===e.url||"mailto:"+i===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}g1.peek=kI;function g1(e,t,i,o){const s=kp(i),l=s==='"'?"Quote":"Apostrophe",c=i.createTracker(o);let f,h;if(m1(e,i)){const m=i.stack;i.stack=[],f=i.enter("autolink");let g=c.move("<");return g+=c.move(i.containerPhrasing(e,{before:g,after:">",...c.current()})),g+=c.move(">"),f(),i.stack=m,g}f=i.enter("link"),h=i.enter("label");let p=c.move("[");return p+=c.move(i.containerPhrasing(e,{before:p,after:"](",...c.current()})),p+=c.move("]("),h(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(h=i.enter("destinationLiteral"),p+=c.move("<"),p+=c.move(i.safe(e.url,{before:p,after:">",...c.current()})),p+=c.move(">")):(h=i.enter("destinationRaw"),p+=c.move(i.safe(e.url,{before:p,after:e.title?" ":")",...c.current()}))),h(),e.title&&(h=i.enter(`title${l}`),p+=c.move(" "+s),p+=c.move(i.safe(e.title,{before:p,after:s,...c.current()})),p+=c.move(s),h()),p+=c.move(")"),f(),p}function kI(e,t,i){return m1(e,i)?"<":"["}y1.peek=TI;function y1(e,t,i,o){const s=e.referenceType,l=i.enter("linkReference");let c=i.enter("label");const f=i.createTracker(o);let h=f.move("[");const p=i.containerPhrasing(e,{before:h,after:"]",...f.current()});h+=f.move(p+"]["),c();const m=i.stack;i.stack=[],c=i.enter("reference");const g=i.safe(i.associationId(e),{before:h,after:"]",...f.current()});return c(),i.stack=m,l(),s==="full"||!p||p!==g?h+=f.move(g+"]"):s==="shortcut"?h=h.slice(0,-1):h+=f.move("]"),h}function TI(){return"["}function Tp(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function AI(e){const t=Tp(e),i=e.options.bulletOther;if(!i)return t==="*"?"-":"*";if(i!=="*"&&i!=="+"&&i!=="-")throw new Error("Cannot serialize items with `"+i+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(i===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+i+"`) to be different");return i}function MI(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function x1(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function DI(e,t,i,o){const s=i.enter("list"),l=i.bulletCurrent;let c=e.ordered?MI(i):Tp(i);const f=e.ordered?c==="."?")":".":AI(i);let h=t&&i.bulletLastUsed?c===i.bulletLastUsed:!1;if(!e.ordered){const m=e.children?e.children[0]:void 0;if((c==="*"||c==="-")&&m&&(!m.children||!m.children[0])&&i.stack[i.stack.length-1]==="list"&&i.stack[i.stack.length-2]==="listItem"&&i.stack[i.stack.length-3]==="list"&&i.stack[i.stack.length-4]==="listItem"&&i.indexStack[i.indexStack.length-1]===0&&i.indexStack[i.indexStack.length-2]===0&&i.indexStack[i.indexStack.length-3]===0&&(h=!0),x1(i)===c&&m){let g=-1;for(;++g<e.children.length;){const v=e.children[g];if(v&&v.type==="listItem"&&v.children&&v.children[0]&&v.children[0].type==="thematicBreak"){h=!0;break}}}}h&&(c=f),i.bulletCurrent=c;const p=i.containerFlow(e,o);return i.bulletLastUsed=c,i.bulletCurrent=l,s(),p}function _I(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function OI(e,t,i,o){const s=_I(i);let l=i.bulletCurrent||Tp(i);t&&t.type==="list"&&t.ordered&&(l=(typeof t.start=="number"&&t.start>-1?t.start:1)+(i.options.incrementListMarker===!1?0:t.children.indexOf(e))+l);let c=l.length+1;(s==="tab"||s==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(c=Math.ceil(c/4)*4);const f=i.createTracker(o);f.move(l+" ".repeat(c-l.length)),f.shift(c);const h=i.enter("listItem"),p=i.indentLines(i.containerFlow(e,f.current()),m);return h(),p;function m(g,v,b){return v?(b?"":" ".repeat(c))+g:(b?l:l+" ".repeat(c-l.length))+g}}function RI(e,t,i,o){const s=i.enter("paragraph"),l=i.enter("phrasing"),c=i.containerPhrasing(e,o);return l(),s(),c}const LI=fu(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function zI(e,t,i,o){return(e.children.some(function(c){return LI(c)})?i.containerPhrasing:i.containerFlow).call(i,e,o)}function II(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}v1.peek=BI;function v1(e,t,i,o){const s=II(i),l=i.enter("strong"),c=i.createTracker(o),f=c.move(s+s);let h=c.move(i.containerPhrasing(e,{after:s,before:f,...c.current()}));const p=h.charCodeAt(0),m=Fc(o.before.charCodeAt(o.before.length-1),p,s);m.inside&&(h=Ns(p)+h.slice(1));const g=h.charCodeAt(h.length-1),v=Fc(o.after.charCodeAt(0),g,s);v.inside&&(h=h.slice(0,-1)+Ns(g));const b=c.move(s+s);return l(),i.attentionEncodeSurroundingInfo={after:v.outside,before:m.outside},f+h+b}function BI(e,t,i){return i.options.strong||"*"}function HI(e,t,i,o){return i.safe(e.value,o)}function $I(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function PI(e,t,i){const o=(x1(i)+(i.options.ruleSpaces?" ":"")).repeat($I(i));return i.options.ruleSpaces?o.slice(0,-1):o}const b1={blockquote:uI,break:Sb,code:gI,definition:xI,emphasis:u1,hardBreak:Sb,heading:SI,html:d1,image:f1,imageReference:h1,inlineCode:p1,link:g1,linkReference:y1,list:DI,listItem:OI,paragraph:RI,root:zI,strong:v1,text:HI,thematicBreak:PI};function qI(){return{enter:{table:UI,tableData:Nb,tableHeader:Nb,tableRow:FI},exit:{codeText:GI,table:VI,tableData:uh,tableHeader:uh,tableRow:uh}}}function UI(e){const t=e._align;this.enter({type:"table",align:t.map(function(i){return i==="none"?null:i}),children:[]},e),this.data.inTable=!0}function VI(e){this.exit(e),this.data.inTable=void 0}function FI(e){this.enter({type:"tableRow",children:[]},e)}function uh(e){this.exit(e)}function Nb(e){this.enter({type:"tableCell",children:[]},e)}function GI(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,YI));const i=this.stack[this.stack.length-1];i.type,i.value=t,this.exit(e)}function YI(e,t){return t==="|"?t:e}function XI(e){const t=e||{},i=t.tableCellPadding,o=t.tablePipeAlign,s=t.stringLength,l=i?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:v,table:c,tableCell:h,tableRow:f}};function c(b,w,N,C){return p(m(b,N,C),b.align)}function f(b,w,N,C){const S=g(b,N,C),k=p([S]);return k.slice(0,k.indexOf(`
`))}function h(b,w,N,C){const S=N.enter("tableCell"),k=N.enter("phrasing"),j=N.containerPhrasing(b,{...C,before:l,after:l});return k(),S(),j}function p(b,w){return lI(b,{align:w,alignDelimiters:o,padding:i,stringLength:s})}function m(b,w,N){const C=b.children;let S=-1;const k=[],j=w.enter("table");for(;++S<C.length;)k[S]=g(C[S],w,N);return j(),k}function g(b,w,N){const C=b.children;let S=-1;const k=[],j=w.enter("tableRow");for(;++S<C.length;)k[S]=h(C[S],b,w,N);return j(),k}function v(b,w,N){let C=b1.inlineCode(b,w,N);return N.stack.includes("tableCell")&&(C=C.replace(/\|/g,"\\$&")),C}}function QI(){return{exit:{taskListCheckValueChecked:Eb,taskListCheckValueUnchecked:Eb,paragraph:ZI}}}function WI(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:JI}}}function Eb(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function ZI(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const i=this.stack[this.stack.length-1];i.type;const o=i.children[0];if(o&&o.type==="text"){const s=t.children;let l=-1,c;for(;++l<s.length;){const f=s[l];if(f.type==="paragraph"){c=f;break}}c===i&&(o.value=o.value.slice(1),o.value.length===0?i.children.shift():i.position&&o.position&&typeof o.position.start.offset=="number"&&(o.position.start.column++,o.position.start.offset++,i.position.start=Object.assign({},o.position.start)))}}this.exit(e)}function JI(e,t,i,o){const s=e.children[0],l=typeof e.checked=="boolean"&&s&&s.type==="paragraph",c="["+(e.checked?"x":" ")+"] ",f=i.createTracker(o);l&&f.move(c);let h=b1.listItem(e,t,i,{...o,...f.current()});return l&&(h=h.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,p)),h;function p(m){return m+c}}function KI(){return[Dz(),Jz(),nI(),qI(),QI()]}function e3(e){return{extensions:[_z(),Kz(e),iI(),XI(e),WI()]}}const t3={tokenize:s3,partial:!0},w1={tokenize:l3,partial:!0},S1={tokenize:c3,partial:!0},N1={tokenize:u3,partial:!0},n3={tokenize:d3,partial:!0},E1={name:"wwwAutolink",tokenize:o3,previous:C1},j1={name:"protocolAutolink",tokenize:a3,previous:k1},Ni={name:"emailAutolink",tokenize:r3,previous:T1},Xn={};function i3(){return{text:Xn}}let Mr=48;for(;Mr<123;)Xn[Mr]=Ni,Mr++,Mr===58?Mr=65:Mr===91&&(Mr=97);Xn[43]=Ni;Xn[45]=Ni;Xn[46]=Ni;Xn[95]=Ni;Xn[72]=[Ni,j1];Xn[104]=[Ni,j1];Xn[87]=[Ni,E1];Xn[119]=[Ni,E1];function r3(e,t,i){const o=this;let s,l;return c;function c(g){return!Uh(g)||!T1.call(o,o.previous)||Ap(o.events)?i(g):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),f(g))}function f(g){return Uh(g)?(e.consume(g),f):g===64?(e.consume(g),h):i(g)}function h(g){return g===46?e.check(n3,m,p)(g):g===45||g===95||zt(g)?(l=!0,e.consume(g),h):m(g)}function p(g){return e.consume(g),s=!0,h}function m(g){return l&&s&&$t(o.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(g)):i(g)}}function o3(e,t,i){const o=this;return s;function s(c){return c!==87&&c!==119||!C1.call(o,o.previous)||Ap(o.events)?i(c):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(t3,e.attempt(w1,e.attempt(S1,l),i),i)(c))}function l(c){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(c)}}function a3(e,t,i){const o=this;let s="",l=!1;return c;function c(g){return(g===72||g===104)&&k1.call(o,o.previous)&&!Ap(o.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),s+=String.fromCodePoint(g),e.consume(g),f):i(g)}function f(g){if($t(g)&&s.length<5)return s+=String.fromCodePoint(g),e.consume(g),f;if(g===58){const v=s.toLowerCase();if(v==="http"||v==="https")return e.consume(g),h}return i(g)}function h(g){return g===47?(e.consume(g),l?p:(l=!0,h)):i(g)}function p(g){return g===null||qc(g)||nt(g)||$r(g)||cu(g)?i(g):e.attempt(w1,e.attempt(S1,m),i)(g)}function m(g){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(g)}}function s3(e,t,i){let o=0;return s;function s(c){return(c===87||c===119)&&o<3?(o++,e.consume(c),s):c===46&&o===3?(e.consume(c),l):i(c)}function l(c){return c===null?i(c):t(c)}}function l3(e,t,i){let o,s,l;return c;function c(p){return p===46||p===95?e.check(N1,h,f)(p):p===null||nt(p)||$r(p)||p!==45&&cu(p)?h(p):(l=!0,e.consume(p),c)}function f(p){return p===95?o=!0:(s=o,o=void 0),e.consume(p),c}function h(p){return s||o||!l?i(p):t(p)}}function c3(e,t){let i=0,o=0;return s;function s(c){return c===40?(i++,e.consume(c),s):c===41&&o<i?l(c):c===33||c===34||c===38||c===39||c===41||c===42||c===44||c===46||c===58||c===59||c===60||c===63||c===93||c===95||c===126?e.check(N1,t,l)(c):c===null||nt(c)||$r(c)?t(c):(e.consume(c),s)}function l(c){return c===41&&o++,e.consume(c),s}}function u3(e,t,i){return o;function o(f){return f===33||f===34||f===39||f===41||f===42||f===44||f===46||f===58||f===59||f===63||f===95||f===126?(e.consume(f),o):f===38?(e.consume(f),l):f===93?(e.consume(f),s):f===60||f===null||nt(f)||$r(f)?t(f):i(f)}function s(f){return f===null||f===40||f===91||nt(f)||$r(f)?t(f):o(f)}function l(f){return $t(f)?c(f):i(f)}function c(f){return f===59?(e.consume(f),o):$t(f)?(e.consume(f),c):i(f)}}function d3(e,t,i){return o;function o(l){return e.consume(l),s}function s(l){return zt(l)?i(l):t(l)}}function C1(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||nt(e)}function k1(e){return!$t(e)}function T1(e){return!(e===47||Uh(e))}function Uh(e){return e===43||e===45||e===46||e===95||zt(e)}function Ap(e){let t=e.length,i=!1;for(;t--;){const o=e[t][1];if((o.type==="labelLink"||o.type==="labelImage")&&!o._balanced){i=!0;break}if(o._gfmAutolinkLiteralWalkedInto){i=!1;break}}return e.length>0&&!i&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),i}const f3={tokenize:b3,partial:!0};function h3(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:y3,continuation:{tokenize:x3},exit:v3}},text:{91:{name:"gfmFootnoteCall",tokenize:g3},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:p3,resolveTo:m3}}}}function p3(e,t,i){const o=this;let s=o.events.length;const l=o.parser.gfmFootnotes||(o.parser.gfmFootnotes=[]);let c;for(;s--;){const h=o.events[s][1];if(h.type==="labelImage"){c=h;break}if(h.type==="gfmFootnoteCall"||h.type==="labelLink"||h.type==="label"||h.type==="image"||h.type==="link")break}return f;function f(h){if(!c||!c._balanced)return i(h);const p=Rn(o.sliceSerialize({start:c.end,end:o.now()}));return p.codePointAt(0)!==94||!l.includes(p.slice(1))?i(h):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(h),e.exit("gfmFootnoteCallLabelMarker"),t(h))}}function m3(e,t){let i=e.length;for(;i--;)if(e[i][1].type==="labelImage"&&e[i][0]==="enter"){e[i][1];break}e[i+1][1].type="data",e[i+3][1].type="gfmFootnoteCallLabelMarker";const o={type:"gfmFootnoteCall",start:Object.assign({},e[i+3][1].start),end:Object.assign({},e[e.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},e[i+3][1].end),end:Object.assign({},e[i+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const l={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},e[e.length-1][1].start)},c={type:"chunkString",contentType:"string",start:Object.assign({},l.start),end:Object.assign({},l.end)},f=[e[i+1],e[i+2],["enter",o,t],e[i+3],e[i+4],["enter",s,t],["exit",s,t],["enter",l,t],["enter",c,t],["exit",c,t],["exit",l,t],e[e.length-2],e[e.length-1],["exit",o,t]];return e.splice(i,e.length-i+1,...f),e}function g3(e,t,i){const o=this,s=o.parser.gfmFootnotes||(o.parser.gfmFootnotes=[]);let l=0,c;return f;function f(g){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(g),e.exit("gfmFootnoteCallLabelMarker"),h}function h(g){return g!==94?i(g):(e.enter("gfmFootnoteCallMarker"),e.consume(g),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",p)}function p(g){if(l>999||g===93&&!c||g===null||g===91||nt(g))return i(g);if(g===93){e.exit("chunkString");const v=e.exit("gfmFootnoteCallString");return s.includes(Rn(o.sliceSerialize(v)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(g),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):i(g)}return nt(g)||(c=!0),l++,e.consume(g),g===92?m:p}function m(g){return g===91||g===92||g===93?(e.consume(g),l++,p):p(g)}}function y3(e,t,i){const o=this,s=o.parser.gfmFootnotes||(o.parser.gfmFootnotes=[]);let l,c=0,f;return h;function h(w){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(w),e.exit("gfmFootnoteDefinitionLabelMarker"),p}function p(w){return w===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(w),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",m):i(w)}function m(w){if(c>999||w===93&&!f||w===null||w===91||nt(w))return i(w);if(w===93){e.exit("chunkString");const N=e.exit("gfmFootnoteDefinitionLabelString");return l=Rn(o.sliceSerialize(N)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(w),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),v}return nt(w)||(f=!0),c++,e.consume(w),w===92?g:m}function g(w){return w===91||w===92||w===93?(e.consume(w),c++,m):m(w)}function v(w){return w===58?(e.enter("definitionMarker"),e.consume(w),e.exit("definitionMarker"),s.includes(l)||s.push(l),Pe(e,b,"gfmFootnoteDefinitionWhitespace")):i(w)}function b(w){return t(w)}}function x3(e,t,i){return e.check(Rs,t,e.attempt(f3,t,i))}function v3(e){e.exit("gfmFootnoteDefinition")}function b3(e,t,i){const o=this;return Pe(e,s,"gfmFootnoteDefinitionIndent",5);function s(l){const c=o.events[o.events.length-1];return c&&c[1].type==="gfmFootnoteDefinitionIndent"&&c[2].sliceSerialize(c[1],!0).length===4?t(l):i(l)}}function w3(e){let i=(e||{}).singleTilde;const o={name:"strikethrough",tokenize:l,resolveAll:s};return i==null&&(i=!0),{text:{126:o},insideSpan:{null:[o]},attentionMarkers:{null:[126]}};function s(c,f){let h=-1;for(;++h<c.length;)if(c[h][0]==="enter"&&c[h][1].type==="strikethroughSequenceTemporary"&&c[h][1]._close){let p=h;for(;p--;)if(c[p][0]==="exit"&&c[p][1].type==="strikethroughSequenceTemporary"&&c[p][1]._open&&c[h][1].end.offset-c[h][1].start.offset===c[p][1].end.offset-c[p][1].start.offset){c[h][1].type="strikethroughSequence",c[p][1].type="strikethroughSequence";const m={type:"strikethrough",start:Object.assign({},c[p][1].start),end:Object.assign({},c[h][1].end)},g={type:"strikethroughText",start:Object.assign({},c[p][1].end),end:Object.assign({},c[h][1].start)},v=[["enter",m,f],["enter",c[p][1],f],["exit",c[p][1],f],["enter",g,f]],b=f.parser.constructs.insideSpan.null;b&&fn(v,v.length,0,uu(b,c.slice(p+1,h),f)),fn(v,v.length,0,[["exit",g,f],["enter",c[h][1],f],["exit",c[h][1],f],["exit",m,f]]),fn(c,p-1,h-p+3,v),h=p+v.length-2;break}}for(h=-1;++h<c.length;)c[h][1].type==="strikethroughSequenceTemporary"&&(c[h][1].type="data");return c}function l(c,f,h){const p=this.previous,m=this.events;let g=0;return v;function v(w){return p===126&&m[m.length-1][1].type!=="characterEscape"?h(w):(c.enter("strikethroughSequenceTemporary"),b(w))}function b(w){const N=Qo(p);if(w===126)return g>1?h(w):(c.consume(w),g++,b);if(g<2&&!i)return h(w);const C=c.exit("strikethroughSequenceTemporary"),S=Qo(w);return C._open=!S||S===2&&!!N,C._close=!N||N===2&&!!S,f(w)}}}class S3{constructor(){this.map=[]}add(t,i,o){N3(this,t,i,o)}consume(t){if(this.map.sort(function(l,c){return l[0]-c[0]}),this.map.length===0)return;let i=this.map.length;const o=[];for(;i>0;)i-=1,o.push(t.slice(this.map[i][0]+this.map[i][1]),this.map[i][2]),t.length=this.map[i][0];o.push(t.slice()),t.length=0;let s=o.pop();for(;s;){for(const l of s)t.push(l);s=o.pop()}this.map.length=0}}function N3(e,t,i,o){let s=0;if(!(i===0&&o.length===0)){for(;s<e.map.length;){if(e.map[s][0]===t){e.map[s][1]+=i,e.map[s][2].push(...o);return}s+=1}e.map.push([t,i,o])}}function E3(e,t){let i=!1;const o=[];for(;t<e.length;){const s=e[t];if(i){if(s[0]==="enter")s[1].type==="tableContent"&&o.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(s[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const l=o.length-1;o[l]=o[l]==="left"?"center":"right"}}else if(s[1].type==="tableDelimiterRow")break}else s[0]==="enter"&&s[1].type==="tableDelimiterRow"&&(i=!0);t+=1}return o}function j3(){return{flow:{null:{name:"table",tokenize:C3,resolveAll:k3}}}}function C3(e,t,i){const o=this;let s=0,l=0,c;return f;function f(I){let z=o.events.length-1;for(;z>-1;){const M=o.events[z][1].type;if(M==="lineEnding"||M==="linePrefix")z--;else break}const U=z>-1?o.events[z][1].type:null,Z=U==="tableHead"||U==="tableRow"?A:h;return Z===A&&o.parser.lazy[o.now().line]?i(I):Z(I)}function h(I){return e.enter("tableHead"),e.enter("tableRow"),p(I)}function p(I){return I===124||(c=!0,l+=1),m(I)}function m(I){return I===null?i(I):we(I)?l>1?(l=0,o.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(I),e.exit("lineEnding"),b):i(I):Le(I)?Pe(e,m,"whitespace")(I):(l+=1,c&&(c=!1,s+=1),I===124?(e.enter("tableCellDivider"),e.consume(I),e.exit("tableCellDivider"),c=!0,m):(e.enter("data"),g(I)))}function g(I){return I===null||I===124||nt(I)?(e.exit("data"),m(I)):(e.consume(I),I===92?v:g)}function v(I){return I===92||I===124?(e.consume(I),g):g(I)}function b(I){return o.interrupt=!1,o.parser.lazy[o.now().line]?i(I):(e.enter("tableDelimiterRow"),c=!1,Le(I)?Pe(e,w,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(I):w(I))}function w(I){return I===45||I===58?C(I):I===124?(c=!0,e.enter("tableCellDivider"),e.consume(I),e.exit("tableCellDivider"),N):$(I)}function N(I){return Le(I)?Pe(e,C,"whitespace")(I):C(I)}function C(I){return I===58?(l+=1,c=!0,e.enter("tableDelimiterMarker"),e.consume(I),e.exit("tableDelimiterMarker"),S):I===45?(l+=1,S(I)):I===null||we(I)?_(I):$(I)}function S(I){return I===45?(e.enter("tableDelimiterFiller"),k(I)):$(I)}function k(I){return I===45?(e.consume(I),k):I===58?(c=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(I),e.exit("tableDelimiterMarker"),j):(e.exit("tableDelimiterFiller"),j(I))}function j(I){return Le(I)?Pe(e,_,"whitespace")(I):_(I)}function _(I){return I===124?w(I):I===null||we(I)?!c||s!==l?$(I):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(I)):$(I)}function $(I){return i(I)}function A(I){return e.enter("tableRow"),H(I)}function H(I){return I===124?(e.enter("tableCellDivider"),e.consume(I),e.exit("tableCellDivider"),H):I===null||we(I)?(e.exit("tableRow"),t(I)):Le(I)?Pe(e,H,"whitespace")(I):(e.enter("data"),V(I))}function V(I){return I===null||I===124||nt(I)?(e.exit("data"),H(I)):(e.consume(I),I===92?G:V)}function G(I){return I===92||I===124?(e.consume(I),V):V(I)}}function k3(e,t){let i=-1,o=!0,s=0,l=[0,0,0,0],c=[0,0,0,0],f=!1,h=0,p,m,g;const v=new S3;for(;++i<e.length;){const b=e[i],w=b[1];b[0]==="enter"?w.type==="tableHead"?(f=!1,h!==0&&(jb(v,t,h,p,m),m=void 0,h=0),p={type:"table",start:Object.assign({},w.start),end:Object.assign({},w.end)},v.add(i,0,[["enter",p,t]])):w.type==="tableRow"||w.type==="tableDelimiterRow"?(o=!0,g=void 0,l=[0,0,0,0],c=[0,i+1,0,0],f&&(f=!1,m={type:"tableBody",start:Object.assign({},w.start),end:Object.assign({},w.end)},v.add(i,0,[["enter",m,t]])),s=w.type==="tableDelimiterRow"?2:m?3:1):s&&(w.type==="data"||w.type==="tableDelimiterMarker"||w.type==="tableDelimiterFiller")?(o=!1,c[2]===0&&(l[1]!==0&&(c[0]=c[1],g=bc(v,t,l,s,void 0,g),l=[0,0,0,0]),c[2]=i)):w.type==="tableCellDivider"&&(o?o=!1:(l[1]!==0&&(c[0]=c[1],g=bc(v,t,l,s,void 0,g)),l=c,c=[l[1],i,0,0])):w.type==="tableHead"?(f=!0,h=i):w.type==="tableRow"||w.type==="tableDelimiterRow"?(h=i,l[1]!==0?(c[0]=c[1],g=bc(v,t,l,s,i,g)):c[1]!==0&&(g=bc(v,t,c,s,i,g)),s=0):s&&(w.type==="data"||w.type==="tableDelimiterMarker"||w.type==="tableDelimiterFiller")&&(c[3]=i)}for(h!==0&&jb(v,t,h,p,m),v.consume(t.events),i=-1;++i<t.events.length;){const b=t.events[i];b[0]==="enter"&&b[1].type==="table"&&(b[1]._align=E3(t.events,i))}return e}function bc(e,t,i,o,s,l){const c=o===1?"tableHeader":o===2?"tableDelimiter":"tableData",f="tableContent";i[0]!==0&&(l.end=Object.assign({},Ro(t.events,i[0])),e.add(i[0],0,[["exit",l,t]]));const h=Ro(t.events,i[1]);if(l={type:c,start:Object.assign({},h),end:Object.assign({},h)},e.add(i[1],0,[["enter",l,t]]),i[2]!==0){const p=Ro(t.events,i[2]),m=Ro(t.events,i[3]),g={type:f,start:Object.assign({},p),end:Object.assign({},m)};if(e.add(i[2],0,[["enter",g,t]]),o!==2){const v=t.events[i[2]],b=t.events[i[3]];if(v[1].end=Object.assign({},b[1].end),v[1].type="chunkText",v[1].contentType="text",i[3]>i[2]+1){const w=i[2]+1,N=i[3]-i[2]-1;e.add(w,N,[])}}e.add(i[3]+1,0,[["exit",g,t]])}return s!==void 0&&(l.end=Object.assign({},Ro(t.events,s)),e.add(s,0,[["exit",l,t]]),l=void 0),l}function jb(e,t,i,o,s){const l=[],c=Ro(t.events,i);s&&(s.end=Object.assign({},c),l.push(["exit",s,t])),o.end=Object.assign({},c),l.push(["exit",o,t]),e.add(i+1,0,l)}function Ro(e,t){const i=e[t],o=i[0]==="enter"?"start":"end";return i[1][o]}const T3={name:"tasklistCheck",tokenize:M3};function A3(){return{text:{91:T3}}}function M3(e,t,i){const o=this;return s;function s(h){return o.previous!==null||!o._gfmTasklistFirstContentOfListItem?i(h):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(h),e.exit("taskListCheckMarker"),l)}function l(h){return nt(h)?(e.enter("taskListCheckValueUnchecked"),e.consume(h),e.exit("taskListCheckValueUnchecked"),c):h===88||h===120?(e.enter("taskListCheckValueChecked"),e.consume(h),e.exit("taskListCheckValueChecked"),c):i(h)}function c(h){return h===93?(e.enter("taskListCheckMarker"),e.consume(h),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),f):i(h)}function f(h){return we(h)?t(h):Le(h)?e.check({tokenize:D3},t,i)(h):i(h)}}function D3(e,t,i){return Pe(e,o,"whitespace");function o(s){return s===null?i(s):t(s)}}function _3(e){return Bw([i3(),h3(),w3(e),j3(),A3()])}const O3={};function R3(e){const t=this,i=e||O3,o=t.data(),s=o.micromarkExtensions||(o.micromarkExtensions=[]),l=o.fromMarkdownExtensions||(o.fromMarkdownExtensions=[]),c=o.toMarkdownExtensions||(o.toMarkdownExtensions=[]);s.push(_3(i)),l.push(KI()),c.push(e3(i))}const Gc={manualTrigger:{id:"manualTrigger",icon:"",title:"Manual Trigger",category:"Triggers",overview:"The Manual Trigger is the starting point for on-demand workflows. When you click the Run button, this node fires first and passes its configured payload to connected nodes. It's ideal for testing, user-initiated automations, or workflows that need human activation.",technicalDetails:`
**Execution Flow:**
1. User clicks Run button or presses Ctrl+Enter
2. Manual Trigger node activates and emits its payload
3. Output data flows to all connected downstream nodes
4. Execution continues through the graph

**Output Schema:**
\`\`\`javascript
{
  timestamp: "2024-01-15T10:30:00.000Z",
  trigger: "manual",
  text: "Your default payload text",
  data: { ...formFieldValues }
}
\`\`\`
    `,config:[{name:"Label",type:"string",desc:"Display name for the node",default:"Manual Trigger"},{name:"Default Payload",type:"string (multiline)",desc:"Text content passed as 'text' field in output",default:""},{name:"Input Fields",type:"Form Builder",desc:"Dynamic form fields for user input at runtime",default:"[]"}],examples:[{title:"Simple Text Input",description:"Pass a question to an AI Agent",config:'Default Payload: "What are the benefits of renewable energy?"',output:'{ timestamp: "...", trigger: "manual", text: "What are the benefits of renewable energy?", data: {} }'},{title:"Form with Multiple Fields",description:"Collect structured data before processing",config:`Input Fields:
- name: "email" | type: "text" | label: "Email Address"
- name: "subject" | type: "text" | label: "Subject Line"  
- name: "priority" | type: "select" | options: ["low", "medium", "high"]`,output:'{ timestamp: "...", trigger: "manual", data: { email: "user@example.com", subject: "Hello", priority: "high" } }'},{title:"JSON Payload",description:"Pass structured JSON data",config:`Default Payload:
{
  "action": "process",
  "items": ["item1", "item2"],
  "config": { "verbose": true }
}`,output:`{ timestamp: "...", trigger: "manual", text: '{"action":"process",...}', data: {} }`}],tips:["Use Input Fields to create reusable workflows with variable parameters","The 'text' field is the primary data carrier - use it for simple string inputs","Form field values are accessible via input.data.fieldName in downstream nodes","Combine with AI Agent to build interactive chat interfaces"],connections:{inputs:0,outputs:1,outputLabels:["output"]}},scheduleTrigger:{id:"scheduleTrigger",icon:"",title:"Schedule Trigger",category:"Triggers",overview:"The Schedule Trigger runs workflows automatically at specified intervals using CRON expressions. Perfect for periodic tasks like data synchronization, report generation, health checks, or cleanup jobs.",technicalDetails:`
**CRON Expression Format:**
\`\`\`
 minute (0-59)
  hour (0-23)
   day of month (1-31)
    month (1-12)
     day of week (0-6, Sunday=0)
    
* * * * *
\`\`\`

**Special Characters:**
- \`*\` = any value
- \`,\` = value list (1,3,5)
- \`-\` = range (1-5)
- \`/\` = step (*/5 = every 5)

**Output Schema:**
\`\`\`javascript
{
  timestamp: "2024-01-15T10:30:00.000Z",
  trigger: "schedule",
  schedule: "*/5 * * * *",
  nextRun: "2024-01-15T10:35:00.000Z"
}
\`\`\`
    `,config:[{name:"Schedule",type:"CRON expression",desc:"When the workflow should run",default:"*/5 * * * *"},{name:"Enabled",type:"boolean",desc:"Toggle schedule on/off without deleting",default:"false"}],examples:[{title:"Every 5 Minutes",description:"Health check or monitoring",config:"Schedule: */5 * * * *",output:"Runs at: 10:00, 10:05, 10:10, 10:15..."},{title:"Daily at 9 AM",description:"Morning report generation",config:"Schedule: 0 9 * * *",output:"Runs at: 09:00 every day"},{title:"Every Monday at 8:30 AM",description:"Weekly summary email",config:"Schedule: 30 8 * * 1",output:"Runs at: 08:30 every Monday"},{title:"First Day of Month",description:"Monthly billing or reports",config:"Schedule: 0 0 1 * *",output:"Runs at: midnight on the 1st of each month"}],tips:["Schedules only run when the browser tab is open and active","Use 'Enabled' toggle to pause schedules without deleting the configuration","For more reliable scheduling, consider using browser extensions or service workers","Test your CRON expression at crontab.guru before deploying"],connections:{inputs:1,outputs:1,inputLabels:["re-trigger"],outputLabels:["output"]}},webhookTrigger:{id:"webhookTrigger",icon:"",title:"Webhook Trigger",category:"Triggers",overview:"The Webhook Trigger creates an HTTP endpoint that external services can call to start your workflow. Use it to integrate with third-party APIs, form submissions, IoT devices, or any system that can make HTTP requests.",technicalDetails:`
**Endpoint URL Format:**
\`\`\`
https://your-domain.com/webhook/{endpoint}
\`\`\`

**Supported Methods:**
- GET - Retrieve data, parameters in URL
- POST - Submit data in request body (JSON)
- PUT - Update resources
- DELETE - Remove resources

**Request Body Parsing:**
\`\`\`javascript
// JSON body is automatically parsed
{
  "event": "user.created",
  "data": { "id": 123, "email": "user@example.com" }
}
\`\`\`

**Output Schema:**
\`\`\`javascript
{
  method: "POST",
  endpoint: "/webhook/my-hook",
  headers: { "content-type": "application/json", ... },
  body: { ...requestBody },
  query: { ...urlParams },
  timestamp: "..."
}
\`\`\`
    `,config:[{name:"Method",type:"select",desc:"HTTP method to accept",default:"POST",options:["GET","POST","PUT","DELETE"]},{name:"Endpoint",type:"string",desc:"URL path for the webhook",default:"/webhook/default"},{name:"Auth Required",type:"boolean",desc:"Require authentication token",default:"false"}],examples:[{title:"Form Submission Handler",description:"Process contact form data",config:`Method: POST
Endpoint: /webhook/contact-form`,output:'{ method: "POST", body: { name: "John", email: "john@example.com", message: "Hello!" } }'},{title:"GitHub Webhook",description:"Trigger on repository events",config:`Method: POST
Endpoint: /webhook/github`,output:'{ method: "POST", body: { action: "push", repository: {...}, commits: [...] } }'},{title:"Stripe Payment Webhook",description:"Handle payment confirmations",config:`Method: POST
Endpoint: /webhook/stripe`,output:'{ method: "POST", body: { type: "payment_intent.succeeded", data: {...} } }'}],tips:["Webhooks require a publicly accessible URL - use tunneling (ngrok) for local development","Always validate incoming data before processing","Use Auth Required for sensitive webhooks to prevent unauthorized access","Connect to Code Executor to validate signatures or transform data"],connections:{inputs:0,outputs:1,outputLabels:["output"]}},errorTrigger:{id:"errorTrigger",icon:"",title:"Error Trigger",category:"Triggers",overview:"The Error Trigger catches exceptions from other nodes, enabling graceful error handling and recovery. Build resilient workflows that can log errors, send notifications, or retry failed operations.",technicalDetails:`
**Error Capture Modes:**
1. **Watch All** - Catches errors from any node in the workflow
2. **Specific Nodes** - Only watches selected nodes by ID

**Retry Logic:**
- Automatic retry with configurable count
- Exponential backoff between attempts
- Final failure triggers error output

**Output Schema:**
\`\`\`javascript
{
  error: {
    message: "Network request failed",
    nodeId: "httpRequest-abc123",
    nodeName: "API Call",
    stack: "Error: Network request failed\\n  at..."
  },
  originalInput: { ...inputThatCausedError },
  retryAttempt: 1,
  timestamp: "..."
}
\`\`\`
    `,config:[{name:"Watch All",type:"boolean",desc:"Monitor all nodes for errors",default:"true"},{name:"Specific Nodes",type:"array",desc:"Node IDs to watch (when Watch All is false)",default:"[]"},{name:"Retry Enabled",type:"boolean",desc:"Automatically retry failed nodes",default:"false"},{name:"Retry Count",type:"number",desc:"Maximum retry attempts",default:"3"}],examples:[{title:"Error Logging",description:"Log all errors to console",config:`Watch All: true
Retry Enabled: false`,flow:"Error Trigger  Code Executor (log error)  Output"},{title:"Error Notification",description:"Send Slack message on failure",config:"Watch All: true",flow:"Error Trigger  HTTP Request (Slack API)  Output"},{title:"Retry with Fallback",description:"Retry API call, then use cached data",config:`Specific Nodes: ["httpRequest-main"]
Retry Enabled: true
Retry Count: 3`,flow:"Error Trigger  If/Else (retries exhausted?)  Local Storage (get cache)"}],tips:["Place Error Trigger anywhere in your workflow - it's not connected to the main flow","Use error.nodeId to identify which node failed","Combine with AI Agent to generate human-readable error summaries","Log errors to Local Storage for debugging across sessions"],connections:{inputs:0,outputs:1,outputLabels:["error"]}},browserEventTrigger:{id:"browserEventTrigger",icon:"",title:"Browser Event",category:"Triggers",overview:"The Browser Event Trigger responds to browser and DOM events like focus, blur, URL changes, element clicks, or timed intervals. Automate based on user interactions or browser state changes.",technicalDetails:`
**Event Types:**
| Type | Description | Use Case |
|------|-------------|----------|
| focus | Tab receives focus | Resume paused workflows |
| blur | Tab loses focus | Pause background tasks |
| urlChange | URL hash or path changes | SPA navigation |
| domClick | Element is clicked | User interaction |
| timer | Interval elapses | Polling |

**Output Schema:**
\`\`\`javascript
{
  eventType: "domClick",
  target: { selector: "#submit-btn", tagName: "BUTTON" },
  timestamp: "...",
  url: "https://example.com/page"
}
\`\`\`
    `,config:[{name:"Event Type",type:"select",desc:"Browser event to listen for",default:"focus",options:["focus","blur","urlChange","domClick","timer"]},{name:"Selector",type:"CSS selector",desc:"Element selector for domClick events",default:""},{name:"URL Pattern",type:"regex",desc:"Pattern to match for urlChange events",default:""},{name:"Interval",type:"number (ms)",desc:"Milliseconds between timer events",default:"1000"}],examples:[{title:"Auto-Save on Blur",description:"Save work when user leaves tab",config:"Event Type: blur",flow:"Browser Event  Local Storage (save state)"},{title:"Click Tracking",description:"Log button clicks",config:`Event Type: domClick
Selector: .track-btn`,flow:"Browser Event  HTTP Request (analytics API)"},{title:"Polling API",description:"Check for updates every 30 seconds",config:`Event Type: timer
Interval: 30000`,flow:"Browser Event  HTTP Request  If/Else (new data?)  Output"}],tips:["Timer events only fire when the tab is active to conserve resources","Use specific CSS selectors to avoid triggering on unintended elements","Combine with If/Else to filter events before processing","URL patterns support regex for flexible matching"],connections:{inputs:0,outputs:1,outputLabels:["event"]}},output:{id:"output",icon:"",title:"Output",category:"Actions",overview:"The Output node is the terminal point of your workflow. It displays results, downloads files, sends notifications, and automatically saves all output as artifacts for future reference.",technicalDetails:`
**Output Types:**
| Type | Behavior |
|------|----------|
| console | Logs to browser console + saves artifact |
| file | Downloads file + saves artifact |
| notification | Shows browser notification + saves artifact |

**All outputs automatically save artifacts to IndexedDB.**

**Output Schema:**
\`\`\`javascript
// The output node passes through its input
{
  ...inputData,
  _outputMeta: {
    type: "console|file|notification",
    artifactId: "uuid",
    timestamp: "..."
  }
}
\`\`\`
    `,config:[{name:"Output Type",type:"select",desc:"How to display/save the output",default:"console",options:["console","file","notification"]},{name:"Filename",type:"string",desc:"Filename for file downloads",default:"output.txt"},{name:"Format JSON",type:"boolean",desc:"Pretty-print JSON with indentation",default:"false"}],examples:[{title:"Console Logging",description:"Debug workflow output",config:`Output Type: console
Format JSON: true`,result:"Opens browser DevTools console with formatted output"},{title:"Download Report",description:"Save AI-generated content to file",config:`Output Type: file
Filename: report_{{date}}.txt`,result:"Downloads file to user's Downloads folder"},{title:"Desktop Notification",description:"Alert user when workflow completes",config:"Output Type: notification",result:"Shows browser notification with output preview"}],tips:["All outputs are saved as artifacts regardless of output type","View artifacts in the Execution Panel's Artifacts tab","Use Format JSON for complex object outputs","Notification requires browser permission - prompt appears on first use"],connections:{inputs:1,outputs:0}},httpRequest:{id:"httpRequest",icon:"",title:"HTTP Request",category:"Actions",overview:"The HTTP Request node makes REST API calls to external services. Supports all HTTP methods, custom headers, request bodies, and configurable timeouts.",technicalDetails:`
**Request Configuration:**
\`\`\`javascript
{
  method: "GET|POST|PUT|PATCH|DELETE",
  url: "https://api.example.com/endpoint",
  headers: { "Authorization": "Bearer token", ... },
  body: "string or JSON object",
  timeout: 30000 // milliseconds
}
\`\`\`

**Response Schema:**
\`\`\`javascript
{
  status: 200,
  statusText: "OK",
  data: { ...responseJSON },
  headers: { "content-type": "application/json", ... }
}
\`\`\`

**Error Handling:**
- Network errors throw exceptions (catch with Error Trigger)
- 4xx/5xx responses return normally with status code
- Timeout aborts request after configured duration
    `,config:[{name:"Method",type:"select",desc:"HTTP method",default:"GET",options:["GET","POST","PUT","PATCH","DELETE"]},{name:"URL",type:"string",desc:"Full endpoint URL (supports {{expressions}})",default:""},{name:"Headers",type:"JSON",desc:"Request headers as JSON object",default:"{}"},{name:"Body",type:"string/JSON",desc:"Request body for POST/PUT/PATCH",default:""},{name:"Timeout",type:"number",desc:"Timeout in milliseconds",default:"30000"}],examples:[{title:"GET Request",description:"Fetch data from API",config:`Method: GET
URL: https://api.github.com/users/octocat
Headers: { "Accept": "application/json" }`,output:'{ status: 200, data: { login: "octocat", id: 583231, ... } }'},{title:"POST with JSON Body",description:"Create a new resource",config:`Method: POST
URL: https://api.example.com/posts
Headers: { "Content-Type": "application/json", "Authorization": "Bearer {{input.token}}" }
Body: { "title": "{{input.title}}", "content": "{{input.content}}" }`,output:'{ status: 201, data: { id: 42, title: "...", created: true } }'},{title:"Dynamic URL from Input",description:"Parameterized API call",config:`Method: GET
URL: https://api.example.com/users/{{input.userId}}/profile`,output:"Fetches profile for the user ID from previous node"},{title:"Slack Webhook",description:"Send message to Slack channel",config:`Method: POST
URL: https://hooks.slack.com/services/T00/B00/XXX
Headers: { "Content-Type": "application/json" }
Body: { "text": "Workflow completed: {{input.result}}" }`,output:'{ status: 200, data: "ok" }'}],tips:["Use {{input.field}} syntax to inject dynamic values from previous nodes","Set appropriate Content-Type header for POST/PUT requests","Handle API rate limits with retry logic via Error Trigger","CORS restrictions apply - use a proxy for cross-origin requests if needed"],connections:{inputs:1,outputs:1}},codeExecutor:{id:"codeExecutor",icon:"",title:"Code Executor",category:"Actions",overview:"The Code Executor runs custom JavaScript code with full access to input data. Transform data, implement complex logic, call APIs, or generate dynamic content. Your code runs in a sandboxed environment with async/await support.",technicalDetails:`
**Execution Context:**
\`\`\`javascript
// Available variables:
input    // Data from previous node
context  // Execution context with nodeId, addLog()

// Your code is wrapped in async IIFE:
(async () => {
  // Your code here
  return result;
})();
\`\`\`

**Return Value:**
- Use \`return\` to pass data to next node
- Returned value becomes \`output\` for downstream nodes
- Objects, arrays, strings, numbers all supported

**Available APIs:**
- fetch() for HTTP requests
- console.log() for debugging
- JSON, Math, Date, Array methods
- async/await for promises
    `,config:[{name:"Code",type:"JavaScript",desc:"Your JavaScript code to execute",default:`// Access input data via 'input'
// Return output data
return input;`}],examples:[{title:"Data Transformation",description:"Transform array of objects",code:`// Extract specific fields
const users = input.data || [];
return users.map(user => ({
  id: user.id,
  name: user.name.toUpperCase(),
  email: user.email.toLowerCase()
}));`},{title:"Filtering",description:"Filter array by condition",code:`// Keep only active items
const items = input.items || [];
return items.filter(item => 
  item.status === 'active' && 
  item.score > 50
);`},{title:"API Call with Processing",description:"Fetch and transform external data",code:`// Fetch additional data
const userId = input.userId;
const response = await fetch(
  \`https://api.example.com/users/\${userId}\`
);
const user = await response.json();

// Combine with input
return {
  ...input,
  userDetails: user,
  fetchedAt: new Date().toISOString()
};`},{title:"Generate Dynamic Content",description:"Create content based on input",code:`// Build email template
const { name, items, total } = input;

const itemList = items
  .map(i => \`- \${i.name}: $\${i.price}\`)
  .join('\\n');

return {
  subject: \`Order Confirmation for \${name}\`,
  body: \`Dear \${name},

Thank you for your order!

Items:
\${itemList}

Total: $\${total}

Best regards,
The Team\`
};`},{title:"Error Handling",description:"Graceful error handling",code:`try {
  const result = await riskyOperation(input);
  return { success: true, data: result };
} catch (error) {
  return { 
    success: false, 
    error: error.message,
    fallback: input.defaultValue 
  };
}`}],tips:["Use console.log() for debugging - output appears in browser DevTools","Always handle potential null/undefined with optional chaining (?.) or defaults","Async operations are fully supported with async/await","Complex logic is better here than chaining multiple Set Variable nodes"],connections:{inputs:1,outputs:1}},setVariable:{id:"setVariable",icon:"",title:"Set Variable",category:"Actions",overview:"The Set Variable node creates, transforms, or merges data into named variables. Use it to prepare data for downstream nodes, rename fields, or combine multiple data sources.",technicalDetails:`
**Modes:**
| Mode | Behavior |
|------|----------|
| set | Replaces value entirely |
| append | Adds to existing array |
| merge | Shallow merge with existing object |

**Template Expressions:**
\`\`\`
{{input.field}}           - Access input field
{{input.data.nested}}     - Nested access
{{input.items[0].name}}   - Array indexing
\`\`\`

**Output Schema:**
\`\`\`javascript
{
  ...input,
  [variableName]: value
}
\`\`\`
    `,config:[{name:"Variable Name",type:"string",desc:"Name of the variable to create/update",default:"data"},{name:"Value",type:"string",desc:"Value or expression (supports {{templates}})",default:""},{name:"Mode",type:"select",desc:"How to set the value",default:"set",options:["set","append","merge"]}],examples:[{title:"Extract Field",description:"Pull out specific data",config:`Variable Name: email
Value: {{input.user.email}}
Mode: set`,output:'{ ...input, email: "user@example.com" }'},{title:"Build Array",description:"Accumulate items from loop",config:`Variable Name: results
Value: {{input.currentItem}}
Mode: append`,output:"{ ...input, results: [...existing, currentItem] }"},{title:"Merge Objects",description:"Combine data sources",config:`Variable Name: combined
Value: { "timestamp": "{{now}}", "source": "workflow" }
Mode: merge`,output:'{ ...input, combined: { ...existing, timestamp: "...", source: "workflow" } }'}],tips:["Use Set Variable for simple transformations; Code Executor for complex logic","Variable names become keys in the output object","Template expressions are resolved from the input data","Append mode is useful for collecting results in loops"],connections:{inputs:1,outputs:1}},fileSystem:{id:"fileSystem",icon:"",title:"File System",category:"Actions",overview:"The File System node reads from and writes to local files using the File System Access API. Process local documents, save generated content, or build file-based workflows.",technicalDetails:`
**Read Mode:**
- Opens file picker dialog
- Returns file contents as text or base64
- Supports filtering by file extension

**Write Mode:**
- Opens save dialog
- Writes string content to selected file
- Creates new file or overwrites existing

**Output Schema (Read):**
\`\`\`javascript
{
  filename: "document.txt",
  size: 1024,
  type: "text/plain",
  content: "File contents here...",
  lastModified: 1697234567890
}
\`\`\`
    `,config:[{name:"Mode",type:"select",desc:"Read or write operation",default:"read",options:["read","write"]},{name:"Filename",type:"string",desc:"Default filename for write operations",default:""},{name:"File Types",type:"array",desc:"Accepted extensions for read (e.g., ['.txt', '.json'])",default:"[]"}],examples:[{title:"Read Text File",description:"Load document for processing",config:`Mode: read
File Types: [".txt", ".md"]`,output:'{ filename: "notes.txt", content: "Document content..." }'},{title:"Save AI Output",description:"Write generated content to file",config:`Mode: write
Filename: generated_{{date}}.txt`,flow:"AI Agent  File System (write)"},{title:"Process JSON File",description:"Load and parse JSON data",config:`Mode: read
File Types: [".json"]`,flow:"File System (read)  Code Executor (parse JSON)  Output"}],tips:["File System Access API requires user permission for each file","Works best in Chrome and Edge browsers","Combine with AI Agent to analyze document contents","Use Code Executor to parse JSON or CSV file contents"],connections:{inputs:1,outputs:1}},localStorage:{id:"localStorage",icon:"",title:"Local Storage",category:"Actions",overview:"The Local Storage node persists data between workflow runs using IndexedDB or localStorage. Store configuration, cache API responses, or maintain state across sessions.",technicalDetails:`
**Storage Types:**
| Type | Capacity | Best For |
|------|----------|----------|
| localStorage | ~5MB | Simple key-value pairs |
| indexedDB | ~50MB+ | Complex objects, large data |

**Operations:**
| Mode | Behavior |
|------|----------|
| get | Retrieve value by key |
| set | Store value at key |
| delete | Remove key and value |

**Output Schema:**
\`\`\`javascript
// Get mode
{ key: "myData", value: { ...storedData }, found: true }

// Set mode  
{ key: "myData", success: true }

// Delete mode
{ key: "myData", deleted: true }
\`\`\`
    `,config:[{name:"Mode",type:"select",desc:"Operation to perform",default:"get",options:["get","set","delete"]},{name:"Storage Type",type:"select",desc:"Which storage to use",default:"indexedDB",options:["indexedDB","localStorage"]},{name:"Key",type:"string",desc:"Storage key name",default:""}],examples:[{title:"Cache API Response",description:"Store data to avoid repeated API calls",config:`Mode: set
Storage Type: indexedDB
Key: api_cache_{{input.endpoint}}`,flow:"HTTP Request  Local Storage (set)"},{title:"Load Cached Data",description:"Retrieve previously stored data",config:`Mode: get
Storage Type: indexedDB
Key: api_cache`,output:'{ key: "api_cache", value: {...cachedData}, found: true }'},{title:"Clear Cache",description:"Remove stored data",config:`Mode: delete
Storage Type: indexedDB
Key: api_cache`,output:'{ key: "api_cache", deleted: true }'}],tips:["Use indexedDB for complex objects and larger datasets","localStorage is simpler but limited to 5MB","Keys can include template expressions for dynamic storage","Combine with If/Else to check if cache exists before fetching"],connections:{inputs:1,outputs:1}},ifElse:{id:"ifElse",icon:"",title:"If/Else",category:"Logic",overview:"The If/Else node creates conditional branches in your workflow. Route data to different paths based on comparisons, creating dynamic decision trees.",technicalDetails:`
**Operators:**
| Operator | Description | Example |
|----------|-------------|---------|
| equals | Exact match (==) | status equals "success" |
| notEquals | Not match (!=) | status notEquals "error" |
| contains | String includes | message contains "error" |
| greaterThan | Numeric > | count greaterThan 10 |
| lessThan | Numeric < | count lessThan 5 |
| exists | Not null/undefined | user.email exists |

**Output Routing:**
- Output 0 (top): Condition is TRUE
- Output 1 (bottom): Condition is FALSE

**Condition Path:**
Access nested values with dot notation:
\`\`\`
user.profile.settings.notifications
data.items[0].status
response.headers.content-type
\`\`\`
    `,config:[{name:"Condition",type:"string",desc:"Field path to evaluate (e.g., status, data.count)",default:""},{name:"Operator",type:"select",desc:"Comparison operator",default:"equals",options:["equals","notEquals","contains","greaterThan","lessThan","exists"]},{name:"Compare Value",type:"string",desc:"Value to compare against",default:""}],examples:[{title:"Check API Status",description:"Branch on response status",config:`Condition: status
Operator: equals
Compare Value: 200`,routing:"TRUE  Process data | FALSE  Error handling"},{title:"Validate Data Exists",description:"Check if field is present",config:`Condition: user.email
Operator: exists`,routing:"TRUE  Send email | FALSE  Request email"},{title:"Numeric Threshold",description:"Check if value exceeds limit",config:`Condition: items.length
Operator: greaterThan
Compare Value: 100`,routing:"TRUE  Paginate | FALSE  Process all"},{title:"String Contains",description:"Search for keyword",config:`Condition: message
Operator: contains
Compare Value: error`,routing:"TRUE  Log error | FALSE  Continue"}],tips:["Use dot notation to access deeply nested properties","The 'exists' operator checks for null, undefined, and empty strings","Numeric comparisons convert strings to numbers automatically","Chain multiple If/Else nodes for complex decision trees"],connections:{inputs:1,outputs:2,outputLabels:["true ","false "]}},loop:{id:"loop",icon:"",title:"Loop",category:"Logic",overview:"The Loop node repeats workflow sections multiple times. Use count-based iteration (repeat N times) or array-based iteration (process each item). Essential for batch processing and automated repetition.",technicalDetails:`
**Loop Modes:**
1. **Count-Based**: Repeat N times with iteration counter
2. **Array-Based**: Iterate over items in an array

**Two Outputs:**
| Output | Name | Purpose |
|--------|------|---------|
| 0 (top) | loop  | Fires for each iteration, connect back to repeat |
| 1 (bottom) | done  | Fires when all iterations complete |

**Creating the Loop:**
Connect "loop " output BACK to the node you want to repeat.
This creates a cycle that executes for each iteration.

**Iteration Data:**
\`\`\`javascript
{
  iteration: 1,          // Current iteration (1-indexed)
  totalIterations: 5,    // Total configured iterations
  previousResult: {...}, // Output from last iteration
  isLoopIteration: true
}
\`\`\`

**Completion Data:**
\`\`\`javascript
{
  results: [...],        // Array of all iteration results
  totalIterations: 5,
  lastResult: {...},     // Final iteration output
  completed: true
}
\`\`\`
    `,config:[{name:"Iterations",type:"number",desc:"Number of times to repeat (1-1000)",default:"1"},{name:"Items Path",type:"string",desc:"Path to array for item-based looping",default:"items"},{name:"Max Items",type:"number",desc:"Maximum items to process per iteration",default:"100"}],examples:[{title:"Generate 5 Stories",description:"AI generates multiple unique stories",config:"Iterations: 5",flow:`Manual Trigger  AI Agent (generate story)  Loop  Output
                                                              |
                                     loop  `},{title:"Process Array Items",description:"Handle each item in a list",config:`Iterations: 1
Items Path: data.users`,flow:"HTTP Request  Loop  Process User  Loop  Output"},{title:"Infinite Automation",description:"Continuous content generation",config:`Iterations: 100
(Set high for long-running...)`,flow:`Trigger  AI Agent  Loop  Output
                                      |
                            loop  `},{title:"Batch API Calls",description:"Call API for each item",config:"Iterations: 10",flow:"For each ID: Trigger  Set Variable  HTTP Request  Loop  Output"}],tips:["Always connect the 'loop ' output back to create the actual loop","Use 'done ' output for final processing after all iterations","Access current iteration via input.iteration in downstream nodes","Set reasonable iteration limits to prevent runaway loops"],connections:{inputs:1,outputs:2,outputLabels:["loop ","done "]}},switchNode:{id:"switchNode",icon:"",title:"Switch",category:"Logic",overview:"The Switch node routes data to different outputs based on field values. Like a multi-way If/Else, it supports up to 4 output paths plus a default.",technicalDetails:`
**Route Configuration:**
\`\`\`javascript
routes: [
  { value: "urgent", outputIndex: 0 },
  { value: "normal", outputIndex: 1 },
  { value: "low", outputIndex: 2 }
]
\`\`\`

**Outputs:**
- Outputs 0-2: Matched routes
- Output 3: Default (when no match)

**Matching:**
- Exact string match (case-sensitive)
- First matching route wins
- Unmatched values go to defaultOutput
    `,config:[{name:"Field",type:"string",desc:"Field path to switch on",default:""},{name:"Routes",type:"array",desc:"Value-to-output mappings",default:"[{value:'', outputIndex:0}]"},{name:"Default Output",type:"number",desc:"Output index when no match (0-3)",default:"3"}],examples:[{title:"Priority Routing",description:"Route tasks by priority level",config:`Field: priority
Routes:
  - value: "urgent"  Output 0
  - value: "normal"  Output 1
  - value: "low"  Output 2
Default Output: 3`,routing:"urgent  Immediate | normal  Queue | low  Archive | unknown  Review"},{title:"Content Type Handler",description:"Process different data types",config:`Field: type
Routes:
  - value: "text"  Output 0
  - value: "image"  Output 1
  - value: "video"  Output 2`,routing:"text  Text processor | image  Image handler | video  Video handler"}],tips:["Use for multiple discrete values; If/Else for binary conditions","Default output catches unexpected values - always handle it","Combine with Merge node to rejoin paths after processing","Route values are case-sensitive"],connections:{inputs:1,outputs:4,outputLabels:["0","1","2","default"]}},merge:{id:"merge",icon:"",title:"Merge",category:"Logic",overview:"The Merge node combines multiple workflow branches back into a single path. Wait for all inputs to arrive or take the first one that completes.",technicalDetails:`
**Modes:**
| Mode | Behavior |
|------|----------|
| wait | Waits for ALL inputs before proceeding |
| first | Proceeds with FIRST input to arrive |

**Output (wait mode):**
\`\`\`javascript
{
  inputs: [
    { source: 0, data: {...} },
    { source: 1, data: {...} }
  ],
  merged: { ...combinedData }
}
\`\`\`

**Output (first mode):**
\`\`\`javascript
{
  source: 0,  // Which input arrived first
  data: {...} // Data from that input
}
\`\`\`
    `,config:[{name:"Mode",type:"select",desc:"How to handle multiple inputs",default:"wait",options:["wait","first"]}],examples:[{title:"Combine API Responses",description:"Fetch from multiple APIs and merge",config:"Mode: wait",flow:` HTTP (API 1) 
Trigger                     Merge  Process
        HTTP (API 2) `},{title:"Race Condition",description:"Use fastest response",config:"Mode: first",flow:` HTTP (Primary) 
Trigger                        Merge  Use result
        HTTP (Backup) `},{title:"Rejoin After Branch",description:"Merge If/Else branches",config:"Mode: wait",flow:`If/Else  True path  
               False path  Merge  Continue`}],tips:["Use 'wait' mode when you need data from all branches","Use 'first' mode for redundancy or timeout scenarios","Merge has 2 inputs - connect both to activate","Data from both inputs is available in the merged output"],connections:{inputs:2,outputs:1}},aiAgent:{id:"aiAgent",icon:"",title:"AI Agent",category:"AI",overview:"The AI Agent is the brain of your automation. It generates text using WebLLM, a local LLM inference engine that runs entirely in your browser via WebGPU. No data ever leaves your device.",technicalDetails:`
**Execution Flow:**
1. User/System message templates are resolved with input data
2. Messages sent to local WebLLM model
3. Model generates response token by token
4. Response passed to downstream nodes

**Template Syntax:**
\`\`\`
{{input}}              - Full input object as JSON
{{input.text}}         - Specific field
{{input.data.items}}   - Nested access
\`\`\`

**Output Schema:**
\`\`\`javascript
{
  response: "AI-generated text...",
  model: "gemma-2-2b-it",
  tokens: 245,
  duration: 3.2
}
\`\`\`

**Available Models:**
| Model | Size | Best For |
|-------|------|----------|
| Gemma 2 2B | 1.4GB | Balanced quality/speed |
| Phi-3.5 Mini | 2.2GB | Reasoning tasks |
| Llama 3.2 3B | 1.8GB | General purpose |
| Qwen 2.5 1.5B | 1.0GB | Fast responses |
| SmolLM 1.7B | 1.1GB | Minimal resources |
    `,config:[{name:"System Prompt",type:"text (multiline)",desc:"Instructions for AI behavior/persona",default:""},{name:"User Message",type:"text (multiline)",desc:"Template for user input (supports {{templates}})",default:"{{input.text}}"},{name:"Temperature",type:"slider (0-1)",desc:"Creativity level. Low=factual, High=creative",default:"0.7"},{name:"Max Tokens",type:"number",desc:"Maximum response length in tokens",default:"2000"}],examples:[{title:"Story Generator",description:"Create unique stories from prompts",config:`System Prompt: You are a creative fiction writer. Write engaging short stories with vivid descriptions and compelling characters.

User Message: Write a 300-word story about: {{input.text}}

Temperature: 0.9
Max Tokens: 1000`},{title:"Data Analyzer",description:"Analyze and summarize data",config:`System Prompt: You are a data analyst. Analyze the provided data and give clear, actionable insights.

User Message: Analyze this data and provide key insights:
{{input.data}}

Temperature: 0.3
Max Tokens: 500`},{title:"Code Assistant",description:"Generate or explain code",config:`System Prompt: You are an expert programmer. Write clean, well-documented code. Explain your approach.

User Message: {{input.request}}

Language: {{input.language}}

Temperature: 0.4
Max Tokens: 1500`},{title:"Email Composer",description:"Draft professional emails",config:`System Prompt: You are a professional communication expert. Write clear, concise, and polite emails.

User Message: Write an email about: {{input.subject}}
Tone: {{input.tone}}
Key points: {{input.points}}

Temperature: 0.6
Max Tokens: 400`}],tips:["Use lower temperature (0.2-0.4) for factual/analytical tasks","Use higher temperature (0.7-0.9) for creative content","Include clear instructions in the system prompt for consistent results","Connect as a tool to other AI Agents for multi-agent workflows"],connections:{inputs:1,outputs:1}},vectorMemory:{id:"vectorMemory",icon:"",title:"Vector Memory",category:"AI",overview:"Vector Memory stores and retrieves information using semantic similarity. It converts text into embeddings (vector representations) and finds the most relevant matches. Essential for RAG (Retrieval Augmented Generation) workflows.",technicalDetails:`
**Operations:**
| Mode | Purpose |
|------|---------|
| query | Find similar content by meaning |
| upsert | Add or update memory entries |
| delete | Remove specific entries |

**Embedding Process:**
1. Text is converted to vector embeddings
2. Vectors are stored in local IndexedDB
3. Queries find closest vectors by cosine similarity

**Query Output:**
\`\`\`javascript
{
  results: [
    { id: "mem_123", text: "...", score: 0.92, metadata: {...} },
    { id: "mem_456", text: "...", score: 0.85, metadata: {...} }
  ],
  query: "original query text",
  namespace: "default"
}
\`\`\`

**Upsert Output:**
\`\`\`javascript
{
  id: "mem_789",
  success: true,
  namespace: "default"
}
\`\`\`
    `,config:[{name:"Mode",type:"select",desc:"Operation to perform",default:"query",options:["query","upsert","delete"]},{name:"Namespace",type:"string",desc:"Memory isolation (like folders)",default:"default"},{name:"Top K",type:"number",desc:"Number of results to return",default:"5"},{name:"Min Score",type:"number (0-1)",desc:"Minimum similarity threshold",default:"0.3"}],examples:[{title:"Build Knowledge Base",description:"Store documents for later retrieval",config:`Mode: upsert
Namespace: knowledge`,flow:"File System (read)  Code (split into chunks)  Loop  Vector Memory (upsert)"},{title:"RAG Query",description:"Find relevant context for AI",config:`Mode: query
Namespace: knowledge
Top K: 3
Min Score: 0.5`,flow:"Manual Trigger  Vector Memory (query)  AI Agent (answer with context)"},{title:"Conversation Memory",description:"Remember past conversations",config:`Mode: upsert
Namespace: conversations`,flow:"After AI response  Vector Memory (upsert) // stores each exchange"}],tips:["Use namespaces to separate different knowledge bases","Higher Min Score returns fewer but more relevant results","Chunk large documents into paragraphs for better retrieval","Combine with AI Agent for powerful RAG workflows"],connections:{inputs:1,outputs:1}},waitForApproval:{id:"waitForApproval",icon:"",title:"Wait for Approval",category:"AI",overview:"The Wait for Approval node pauses workflow execution until a human approves or rejects. Essential for human-in-the-loop automation where critical actions need oversight.",technicalDetails:`
**Workflow Pause:**
1. Execution reaches this node and stops
2. Approval dialog appears to user
3. User reviews data and clicks Approve/Reject
4. Execution continues on appropriate output

**Two Outputs:**
- Output 0 (top): User clicked Approve 
- Output 1 (bottom): User clicked Reject 

**Approval Data:**
\`\`\`javascript
// Passed to approved/rejected branch
{
  approved: true,
  approvedBy: "user",
  approvedAt: "2024-01-15T10:30:00.000Z",
  originalInput: {...},
  notes: "User comment if any"
}
\`\`\`
    `,config:[{name:"Title",type:"string",desc:"Dialog header",default:"Approval Required"},{name:"Message",type:"text (multiline)",desc:"Description for reviewer (supports {{templates}})",default:""},{name:"Timeout",type:"number (seconds)",desc:"Auto-reject after N seconds (0=never)",default:"0"},{name:"Notify Browser",type:"boolean",desc:"Show browser notification",default:"true"}],examples:[{title:"Review AI Output",description:"Approve before publishing",config:`Title: Review Generated Content
Message: Please review this AI-generated content before publishing:

{{input.content}}

Timeout: 0
Notify Browser: true`,flow:"AI Agent  Wait for Approval  (Approved) HTTP Post || (Rejected) Log"},{title:"Confirm API Action",description:"Approve before destructive operation",config:`Title: Confirm Delete
Message: About to delete {{input.count}} records. Are you sure?

Timeout: 300
Notify Browser: true`,flow:"Process Data  Wait for Approval  (Approved) HTTP DELETE || (Rejected) Cancel"},{title:"Review Email",description:"Approve before sending",config:`Title: Review Email
Message: To: {{input.recipient}}
Subject: {{input.subject}}

{{input.body}}`,flow:"AI Compose  Wait for Approval  (Approved) Send Email"}],tips:["Use before any irreversible actions (deletions, sends, purchases)","Set a timeout for time-sensitive workflows","Browser notification helps if you switch tabs","Include key details in the message for informed decisions"],connections:{inputs:1,outputs:2,outputLabels:["approved ","rejected "]}},subWorkflow:{id:"subWorkflow",icon:"",title:"Sub-Workflow",category:"AI",overview:"The Sub-Workflow node executes another saved workflow as a subroutine. Build modular, reusable automation by composing complex workflows from simpler building blocks.",technicalDetails:`
**Execution:**
1. Current workflow pauses
2. Selected sub-workflow executes with input
3. Sub-workflow output becomes this node's output
4. Parent workflow continues

**Input Passing:**
- If "Pass Input" enabled: full input passed to sub-workflow
- Sub-workflow receives data at its trigger node

**Output:**
\`\`\`javascript
{
  subWorkflowId: "wf_abc123",
  subWorkflowName: "Process Data",
  result: { ...subWorkflowOutput },
  duration: 1.5
}
\`\`\`
    `,config:[{name:"Workflow",type:"select",desc:"Saved workflow to execute",default:""},{name:"Pass Input",type:"boolean",desc:"Send current input to sub-workflow",default:"true"},{name:"Async",type:"boolean",desc:"Don't wait for completion (fire and forget)",default:"false"}],examples:[{title:"Reusable Data Processor",description:"Call shared processing logic",config:`Workflow: "Data Sanitizer"
Pass Input: true
Async: false`,flow:"API Response  Sub-Workflow (sanitize)  Use Clean Data"},{title:"Parallel Sub-Workflows",description:"Run multiple workflows simultaneously",config:"Async: true",flow:`Trigger  Sub-Workflow A (async)
               Sub-Workflow B (async)  
               Merge results`}],tips:["Build a library of reusable workflows for common tasks","Use async mode when you don't need the result immediately","Sub-workflows can call other sub-workflows (nested)","Great for team collaboration - share common workflows"],connections:{inputs:1,outputs:1}},textToSpeech:{id:"textToSpeech",icon:"",title:"Text to Speech",category:"AI",overview:"The Text to Speech node converts text into spoken audio using the Web Speech API. Add voice output to your workflows for accessibility, notifications, or interactive experiences.",technicalDetails:`
**Web Speech API:**
- Uses browser's built-in speech synthesis
- No external API calls or costs
- Access to system voices

**Voice Selection:**
Browser provides various voices based on OS:
- Windows: Microsoft voices
- macOS: System voices  
- Chrome: Additional Google voices

**Output:**
\`\`\`javascript
{
  spoken: true,
  text: "The spoken text...",
  voice: "Microsoft Zira",
  duration: 3.5
}
\`\`\`
    `,config:[{name:"Voice",type:"select",desc:"Voice to use for speech",default:"default"},{name:"Rate",type:"slider (0.5-2)",desc:"Speech speed",default:"1.0"},{name:"Pitch",type:"slider (0.5-2)",desc:"Voice pitch",default:"1.0"},{name:"Auto Play",type:"boolean",desc:"Play immediately when triggered",default:"true"}],examples:[{title:"Read AI Response",description:"Speak AI-generated content",config:`Voice: default
Rate: 1.0
Auto Play: true`,flow:"AI Agent  Text to Speech"},{title:"Notification Alert",description:"Voice notification for events",config:`Rate: 1.2
Voice: (select clear voice)`,flow:'HTTP Request  If/Else (important?)  Text to Speech ("Alert: {{message}}")'}],tips:["Available voices vary by browser and operating system","Higher rate (1.2-1.5) is good for notifications","Use clear, punctuated text for better pronunciation","Combine with AI Agent for voice assistant experiences"],connections:{inputs:1,outputs:1}},imageGeneration:{id:"imageGeneration",icon:"",title:"Image Generation",category:"AI",overview:"The Image Generation node creates images from text prompts using AI models. Generate visuals for content, social media, presentations, or creative projects.",technicalDetails:`
**Providers:**
| Provider | Location | Notes |
|----------|----------|-------|
| local (WebSD) | Browser | Requires powerful GPU |
| openai | API | Requires API key |
| stability | API | Requires API key |

**Output:**
\`\`\`javascript
{
  imageUrl: "blob:..." or "data:image/png;base64,...",
  artifactId: "art_123",
  prompt: "original prompt",
  size: "512x512",
  provider: "local"
}
\`\`\`
    `,config:[{name:"Provider",type:"select",desc:"Image generation service",default:"local",options:["local","openai","stability"]},{name:"Size",type:"select",desc:"Image dimensions",default:"512x512",options:["256x256","512x512","1024x1024"]},{name:"Negative Prompt",type:"text",desc:"What to avoid in the image",default:""},{name:"Seed",type:"number",desc:"Random seed for reproducibility",default:""},{name:"Steps",type:"number",desc:"Diffusion steps (quality vs speed)",default:"20"}],examples:[{title:"Blog Illustration",description:"Generate images for articles",config:`Provider: openai
Size: 1024x1024`,flow:"AI Agent (write article)  AI Agent (describe image)  Image Generation"},{title:"Product Mockup",description:"Create product visualizations",config:`Provider: stability
Negative Prompt: blurry, low quality`,flow:"Manual Trigger  Image Generation  Output"}],tips:["Local generation requires WebGPU and significant GPU resources","API providers have costs - check pricing","Use negative prompts to avoid common issues (blurry, low quality)","Set a seed for reproducible results"],connections:{inputs:1,outputs:1}},pythonExecutor:{id:"pythonExecutor",icon:"",title:"Python Executor",category:"AI",overview:"The Python Executor runs Python code directly in your browser using Pyodide. Access Python's scientific computing ecosystem including NumPy, Pandas, and moreall without a server.",technicalDetails:`
**Pyodide Runtime:**
- Full Python 3.11 interpreter in WebAssembly
- Runs entirely in the browser
- Access to many pure-Python packages

**Available Packages:**
- numpy, pandas, scipy
- matplotlib, pillow
- requests (limited), json
- And many more

**Variable Access:**
\`\`\`python
# Input is available as 'input' variable
data = input  # Dict from previous node

# Set result for output
result = {"processed": True, "data": data}
\`\`\`

**Output:**
\`\`\`javascript
{
  result: { ...pythonResult },
  stdout: "Any print() output",
  duration: 1.2
}
\`\`\`
    `,config:[{name:"Code",type:"Python",desc:"Python code to execute",default:"# Access input via 'input' variable\\nresult = input"},{name:"Packages",type:"array",desc:"Additional packages to install",default:"[]"},{name:"Timeout",type:"number (ms)",desc:"Execution timeout",default:"30000"}],examples:[{title:"Data Analysis",description:"Analyze data with Pandas",code:`import pandas as pd
import json

# Parse input data
data = input.get('data', [])
df = pd.DataFrame(data)

# Analyze
result = {
    'count': len(df),
    'columns': list(df.columns),
    'summary': df.describe().to_dict()
}`},{title:"Statistical Calculation",description:"Complex math with NumPy",code:`import numpy as np

values = input.get('values', [])
arr = np.array(values)

result = {
    'mean': float(np.mean(arr)),
    'std': float(np.std(arr)),
    'median': float(np.median(arr)),
    'percentile_95': float(np.percentile(arr, 95))
}`},{title:"Text Processing",description:"Process text with Python",code:`import re
from collections import Counter

text = input.get('text', '')

# Word frequency
words = re.findall(r'\\w+', text.lower())
freq = Counter(words).most_common(10)

result = {
    'word_count': len(words),
    'unique_words': len(set(words)),
    'top_words': freq
}`}],tips:["First execution is slow (loading Pyodide) - subsequent runs are fast","Use 'result' variable to pass data to next node","print() output appears in stdout field","Not all Python packages are available - check Pyodide compatibility"],connections:{inputs:1,outputs:1}}},L3=[{type:"welcome",nodes:["welcome","shortcuts"]},{type:"category",name:"Triggers",color:"#00c853",nodes:["manualTrigger","scheduleTrigger","webhookTrigger","errorTrigger","browserEventTrigger"]},{type:"category",name:"Actions",color:"#2979ff",nodes:["output","httpRequest","codeExecutor","setVariable","fileSystem","localStorage"]},{type:"category",name:"Logic",color:"#ffab00",nodes:["ifElse","loop","switchNode","merge"]},{type:"category",name:"AI",color:"#e040fb",nodes:["aiAgent","vectorMemory","waitForApproval","subWorkflow","textToSpeech","imageGeneration","pythonExecutor"]}],z3={welcome:{id:"welcome",icon:"",title:"Documentation"},shortcuts:{id:"shortcuts",icon:"",title:"Keyboard Shortcuts"}};function I3({onClose:e}){const[t,i]=T.useState("welcome"),o=()=>u.jsx("nav",{className:"docs-nav",children:L3.map((h,p)=>u.jsxs("div",{className:"nav-category",children:[h.type==="category"&&u.jsx("div",{className:"nav-category-title",style:{color:h.color},children:h.name}),h.nodes.map(m=>{const g=Gc[m]||z3[m];return g?u.jsxs("div",{className:`nav-item ${t===m?"active":""}`,onClick:()=>i(m),children:[u.jsx("span",{className:"nav-item-icon",children:g.icon}),u.jsx("span",{children:g.title})]},m):null})]},p))}),s=()=>u.jsxs("div",{className:"welcome-content",children:[u.jsx("h1",{children:" IOSANS Documentation"}),u.jsx("p",{className:"tagline",children:"Welcome to the Infinite Open Source Automation System. Build powerful, local-first AI workflows with complete privacy and control."}),u.jsxs("div",{className:"feature-grid",children:[u.jsxs("div",{className:"feature-card",children:[u.jsx("div",{className:"feature-card-icon",children:""}),u.jsx("h4",{children:"100% Local"}),u.jsx("p",{children:"All processing happens in your browser. No data leaves your device."})]}),u.jsxs("div",{className:"feature-card",children:[u.jsx("div",{className:"feature-card-icon",children:""}),u.jsx("h4",{children:"WebLLM AI"}),u.jsx("p",{children:"Run powerful LLMs directly in your browser using WebGPU."})]}),u.jsxs("div",{className:"feature-card",children:[u.jsx("div",{className:"feature-card-icon",children:""}),u.jsx("h4",{children:"Visual Workflows"}),u.jsx("p",{children:"Drag-and-drop node editor for building complex automations."})]}),u.jsxs("div",{className:"feature-card",children:[u.jsx("div",{className:"feature-card-icon",children:""}),u.jsx("h4",{children:"Artifacts"}),u.jsx("p",{children:"All outputs are saved as artifacts for future reference."})]})]}),u.jsxs("div",{className:"article-section",style:{marginTop:32},children:[u.jsx("h3",{children:" Getting Started"}),u.jsxs("p",{children:["1. Drag a ",u.jsx("strong",{children:"Manual Trigger"})," from the sidebar to start your workflow.",u.jsx("br",{}),"2. Add nodes like ",u.jsx("strong",{children:"AI Agent"}),","," ",u.jsx("strong",{children:"Code Executor"}),", or ",u.jsx("strong",{children:"HTTP Request"}),".",u.jsx("br",{}),"3. Connect nodes by dragging from output handles (right) to input handles (left).",u.jsx("br",{}),"4. Click ",u.jsx("strong",{children:"Run"})," to execute your workflow."]})]}),u.jsxs("div",{className:"article-section",children:[u.jsx("h3",{children:" Node Categories"}),u.jsx("div",{className:"config-table",children:u.jsxs("table",{children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Category"}),u.jsx("th",{children:"Count"}),u.jsx("th",{children:"Purpose"})]})}),u.jsxs("tbody",{children:[u.jsxs("tr",{children:[u.jsx("td",{style:{color:"#00c853"},children:"Triggers"}),u.jsx("td",{children:"5"}),u.jsx("td",{children:"Start workflows (manual, schedule, webhook, error, browser)"})]}),u.jsxs("tr",{children:[u.jsx("td",{style:{color:"#2979ff"},children:"Actions"}),u.jsx("td",{children:"6"}),u.jsx("td",{children:"Perform operations (HTTP, code, files, storage)"})]}),u.jsxs("tr",{children:[u.jsx("td",{style:{color:"#ffab00"},children:"Logic"}),u.jsx("td",{children:"4"}),u.jsx("td",{children:"Control flow (if/else, loop, switch, merge)"})]}),u.jsxs("tr",{children:[u.jsx("td",{style:{color:"#e040fb"},children:"AI"}),u.jsx("td",{children:"7"}),u.jsx("td",{children:"AI capabilities (LLM, memory, TTS, images, Python)"})]})]})]})})]})]}),l=()=>u.jsxs("div",{className:"docs-article",children:[u.jsxs("div",{className:"article-header",children:[u.jsx("div",{className:"article-icon",children:""}),u.jsx("div",{children:u.jsx("h2",{className:"article-title",children:"Keyboard Shortcuts"})})]}),u.jsxs("div",{className:"article-section",children:[u.jsx("h3",{children:"General"}),u.jsxs("div",{className:"shortcuts-list",children:[u.jsxs("div",{className:"shortcut-row",children:[u.jsx("span",{children:"Save Workflow"}),u.jsx("span",{className:"shortcut-key",children:"Ctrl + S"})]}),u.jsxs("div",{className:"shortcut-row",children:[u.jsx("span",{children:"Run Workflow"}),u.jsx("span",{className:"shortcut-key",children:"Ctrl + Enter"})]}),u.jsxs("div",{className:"shortcut-row",children:[u.jsx("span",{children:"Undo"}),u.jsx("span",{className:"shortcut-key",children:"Ctrl + Z"})]}),u.jsxs("div",{className:"shortcut-row",children:[u.jsx("span",{children:"Redo"}),u.jsx("span",{className:"shortcut-key",children:"Ctrl + Shift + Z"})]})]})]}),u.jsxs("div",{className:"article-section",children:[u.jsx("h3",{children:"Node Operations"}),u.jsxs("div",{className:"shortcuts-list",children:[u.jsxs("div",{className:"shortcut-row",children:[u.jsx("span",{children:"Delete Selected"}),u.jsx("span",{className:"shortcut-key",children:"Delete / Backspace"})]}),u.jsxs("div",{className:"shortcut-row",children:[u.jsx("span",{children:"Copy Node"}),u.jsx("span",{className:"shortcut-key",children:"Ctrl + C"})]}),u.jsxs("div",{className:"shortcut-row",children:[u.jsx("span",{children:"Paste Node"}),u.jsx("span",{className:"shortcut-key",children:"Ctrl + V"})]}),u.jsxs("div",{className:"shortcut-row",children:[u.jsx("span",{children:"Duplicate Node"}),u.jsx("span",{className:"shortcut-key",children:"Ctrl + D"})]}),u.jsxs("div",{className:"shortcut-row",children:[u.jsx("span",{children:"Select All"}),u.jsx("span",{className:"shortcut-key",children:"Ctrl + A"})]})]})]}),u.jsxs("div",{className:"article-section",children:[u.jsx("h3",{children:"Canvas Navigation"}),u.jsxs("div",{className:"shortcuts-list",children:[u.jsxs("div",{className:"shortcut-row",children:[u.jsx("span",{children:"Pan Canvas"}),u.jsx("span",{className:"shortcut-key",children:"Space + Drag"})]}),u.jsxs("div",{className:"shortcut-row",children:[u.jsx("span",{children:"Zoom In/Out"}),u.jsx("span",{className:"shortcut-key",children:"Ctrl + +/-"})]}),u.jsxs("div",{className:"shortcut-row",children:[u.jsx("span",{children:"Fit to Screen"}),u.jsx("span",{className:"shortcut-key",children:"Ctrl + 0"})]}),u.jsxs("div",{className:"shortcut-row",children:[u.jsx("span",{children:"Scroll Zoom"}),u.jsx("span",{className:"shortcut-key",children:"Mouse Wheel"})]})]})]})]}),c=h=>{const p=Gc[h];return p?u.jsxs("div",{className:"docs-article",children:[u.jsxs("div",{className:"article-header",children:[u.jsx("div",{className:"article-icon",children:p.icon}),u.jsxs("div",{children:[u.jsx("h2",{className:"article-title",children:p.title}),p.category&&u.jsx("div",{className:"article-category",children:p.category})]})]}),u.jsxs("div",{className:"article-section",children:[u.jsx("h3",{children:" Overview"}),u.jsx("p",{children:p.overview})]}),p.technicalDetails&&u.jsxs("div",{className:"article-section",children:[u.jsx("h3",{children:" Technical Details"}),u.jsx("div",{className:"markdown-content",children:u.jsx(o1,{remarkPlugins:[R3],children:p.technicalDetails.trim()})})]}),p.config&&p.config.length>0&&u.jsxs("div",{className:"article-section",children:[u.jsx("h3",{children:" Configuration"}),u.jsxs("table",{className:"config-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Property"}),u.jsx("th",{children:"Type"}),u.jsx("th",{children:"Description"}),u.jsx("th",{children:"Default"})]})}),u.jsx("tbody",{children:p.config.map((m,g)=>u.jsxs("tr",{children:[u.jsx("td",{children:u.jsx("strong",{children:m.name})}),u.jsx("td",{children:u.jsx("code",{children:m.type})}),u.jsx("td",{children:m.desc}),u.jsx("td",{children:u.jsx("code",{children:m.default||"-"})})]},g))})]})]}),p.examples&&p.examples.length>0&&u.jsxs("div",{className:"article-section",children:[u.jsx("h3",{children:" Examples"}),p.examples.map((m,g)=>u.jsxs("div",{className:"example-block",children:[u.jsx("h4",{children:m.title}),u.jsx("p",{className:"example-desc",children:m.description}),m.config&&u.jsxs("div",{className:"example-config",children:[u.jsx("strong",{children:"Configuration:"}),u.jsx("div",{className:"code-block",children:m.config})]}),m.code&&u.jsxs("div",{className:"example-code",children:[u.jsx("strong",{children:"Code:"}),u.jsx("div",{className:"code-block",children:m.code})]}),m.flow&&u.jsxs("div",{className:"example-flow",children:[u.jsx("strong",{children:"Workflow:"}),u.jsx("div",{className:"code-block",children:m.flow})]}),m.output&&u.jsxs("div",{className:"example-output",children:[u.jsx("strong",{children:"Output:"}),u.jsx("div",{className:"code-block",children:m.output})]}),m.routing&&u.jsxs("div",{className:"example-routing",children:[u.jsx("strong",{children:"Routing:"}),u.jsx("div",{className:"code-block",children:m.routing})]}),m.result&&u.jsxs("div",{className:"example-result",children:[u.jsx("strong",{children:"Result:"}),u.jsx("div",{className:"code-block",children:m.result})]})]},g))]}),p.connections&&u.jsxs("div",{className:"article-section",children:[u.jsx("h3",{children:" Connections"}),u.jsxs("div",{className:"connections-info",children:[u.jsxs("div",{className:"connection-item",children:[u.jsx("span",{className:"connection-label",children:"Inputs:"}),u.jsx("span",{className:"connection-value",children:p.connections.inputs})]}),u.jsxs("div",{className:"connection-item",children:[u.jsx("span",{className:"connection-label",children:"Outputs:"}),u.jsx("span",{className:"connection-value",children:p.connections.outputs})]}),p.connections.outputLabels&&u.jsxs("div",{className:"connection-item",children:[u.jsx("span",{className:"connection-label",children:"Output Labels:"}),u.jsx("span",{className:"connection-value",children:p.connections.outputLabels.join(", ")})]})]})]}),p.tips&&p.tips.length>0&&u.jsxs("div",{className:"article-section",children:[u.jsx("h3",{children:" Tips & Best Practices"}),u.jsx("ul",{className:"tips-list",children:p.tips.map((m,g)=>u.jsx("li",{children:m},g))})]})]}):null},f=()=>t==="welcome"?s():t==="shortcuts"?l():c(t);return u.jsx("div",{className:"docs-overlay",onClick:e,children:u.jsxs("div",{className:"docs-modal",onClick:h=>h.stopPropagation(),children:[u.jsxs("header",{className:"docs-header",children:[u.jsx("h2",{children:" IOSANS Documentation"}),u.jsx("button",{className:"docs-close-btn",onClick:e,children:""})]}),u.jsxs("div",{className:"docs-body",children:[o(),u.jsx("div",{className:"docs-content",children:f()})]})]})})}const B3=T.memo(I3),A1="workflow_automations";function H3(e){const t=$3(),i=e.id||Date.now().toString(),o={...e,id:i,updatedAt:new Date().toISOString(),createdAt:e.createdAt||new Date().toISOString()};return t[i]=o,localStorage.setItem(A1,JSON.stringify(t)),i}function $3(){try{const e=localStorage.getItem(A1);return e?JSON.parse(e):{}}catch(e){return console.error("Failed to load workflows:",e),{}}}function P3(e){const t=JSON.stringify(e,null,2),i=new Blob([t],{type:"application/json"}),o=URL.createObjectURL(i),s=document.createElement("a");s.href=o,s.download=`${e.name||"workflow"}.json`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(o)}function q3(e){return new Promise((t,i)=>{const o=new FileReader;o.onload=s=>{try{const l=JSON.parse(s.target.result);if(!l.nodes||!Array.isArray(l.nodes))throw new Error("Invalid workflow: missing nodes array");if(!l.edges||!Array.isArray(l.edges))throw new Error("Invalid workflow: missing edges array");l.id=Date.now().toString(),l.name=l.name+" (Imported)",t(l)}catch(l){i(new Error("Failed to parse workflow file: "+l.message))}},o.onerror=()=>{i(new Error("Failed to read file"))},o.readAsText(e)})}function U3(){const e=T.useRef(null),t=Xo(),[i,o]=T.useState(!1),[s,l]=T.useState(!1),c=Ce($=>$.workflowName),f=Ce($=>$.setWorkflowName),h=Ce($=>$.nodes),p=Ce($=>$.clearWorkflow),m=Ce($=>$.loadWorkflow),g=Ce($=>$.getWorkflowData),v=Xe($=>$.clearLogs),[b,w]=T.useState(!1);T.useEffect(()=>{const $=()=>w(!0),A=()=>w(!1);return window.addEventListener("audioStart",$),window.addEventListener("audioEnd",A),()=>{window.removeEventListener("audioStart",$),window.removeEventListener("audioEnd",A)}},[]);const N=T.useCallback(()=>{"speechSynthesis"in window&&(window.speechSynthesis.cancel(),window.dispatchEvent(new CustomEvent("audioEnd")))},[]),C=T.useCallback(()=>{const $=g();H3($),t.success("Workflow saved successfully!")},[g,t]),S=T.useCallback(()=>{const $=g();P3($),t.success(`Exported "${$.name}.json"`)},[g,t]),k=T.useCallback(()=>{e.current?.click()},[]),j=T.useCallback(async $=>{const A=$.target.files?.[0];if(A){try{const H=await q3(A);m(H),t.success(`Imported "${H.name}"`)}catch(H){console.error("Import failed:",H),t.error("Import failed: "+H.message)}$.target.value=""}},[m,t]),_=T.useCallback(()=>{h.length!==0&&(p(),v(),t.info("Workflow cleared"))},[h.length,p,v,t]);return u.jsxs("header",{className:"toolbar",children:[u.jsxs("div",{className:"toolbar-left",children:[u.jsx("button",{className:"btn-nav",onClick:()=>o(!0),children:"Tutorial"}),u.jsx("button",{className:"btn-nav",onClick:()=>l(!0),children:"Docs"})]}),u.jsxs("div",{className:"toolbar-center",children:[u.jsx("input",{type:"text",className:"workflow-name-input",value:c,onChange:$=>f($.target.value),placeholder:"Untitled Workflow"}),b&&u.jsx("button",{className:"btn-stop-audio",onClick:N,title:"Stop all audio playback",children:" Stop Audio"})]}),u.jsxs("div",{className:"toolbar-right",children:[u.jsx("button",{onClick:C,title:"Save workflow",disabled:h.length===0,children:" Save"}),u.jsx("button",{onClick:S,title:"Export to JSON",disabled:h.length===0,children:" Export"}),u.jsx("button",{onClick:k,title:"Import from JSON",children:" Import"}),u.jsx("button",{onClick:()=>window.dispatchEvent(new CustomEvent("openWorkflowManager")),title:"Manage saved workflows",children:" Manage"}),u.jsx("button",{onClick:_,title:"Clear canvas",className:"btn-danger",disabled:h.length===0,children:" Clear"}),u.jsx("input",{type:"file",ref:e,accept:".json",onChange:j,style:{display:"none"}})]}),i&&u.jsx(d_,{onClose:()=>o(!1)}),s&&u.jsx(B3,{onClose:()=>l(!1)})]})}const V3=T.memo(U3);function Vh(e){return e===null?"null":e===void 0?"undefined":Array.isArray(e)?"array":typeof e=="object"?"object":typeof e=="string"?"string":typeof e=="number"?"number":typeof e=="boolean"?"boolean":"unknown"}function Fh(e,t){switch(t){case"null":return"null";case"undefined":return"undefined";case"string":return`"${e.length>100?e.slice(0,100)+"...":e}"`;case"number":case"boolean":return String(e);case"array":return`Array(${e.length})`;case"object":return`Object{${Object.keys(e).length}}`;default:return String(e)}}function Gh({keyName:e,value:t,depth:i=0,path:o=""}){const[s,l]=T.useState(i<2),c=Vh(t),f=c==="object"||c==="array",h=o?`${o}.${e}`:e,p=T.useCallback(g=>{g.stopPropagation();const v=typeof t=="string"?t:JSON.stringify(t,null,2);navigator.clipboard.writeText(v)},[t]),m=()=>{f&&l(!s)};return u.jsxs("div",{className:"tree-node",style:{paddingLeft:i*16},children:[u.jsxs("div",{className:"tree-node-header",onClick:m,children:[f&&u.jsx("span",{className:`tree-expand ${s?"expanded":""}`,children:""}),e!==void 0&&u.jsxs("span",{className:"tree-key",children:[e,":"]}),u.jsx("span",{className:`tree-value type-${c}`,children:f&&!s?Fh(t,c):c==="array"?"[":c==="object"?"{":Fh(t,c)}),u.jsx("button",{className:"tree-copy-btn",onClick:p,title:`Copy ${h||"value"}`,children:""})]}),f&&s&&u.jsxs("div",{className:"tree-children",children:[c==="array"?t.map((g,v)=>u.jsx(Gh,{keyName:v,value:g,depth:i+1,path:h},v)):Object.entries(t).map(([g,v])=>u.jsx(Gh,{keyName:g,value:v,depth:i+1,path:h},g)),u.jsx("div",{className:"tree-bracket",style:{paddingLeft:i*16},children:c==="array"?"]":"}"})]})]})}function F3({data:e}){if(!Array.isArray(e)||e.length===0)return u.jsx("div",{className:"table-empty",children:"No data to display"});const t=[...new Set(e.flatMap(i=>typeof i=="object"&&i!==null?Object.keys(i):[]))];return t.length===0?u.jsx("div",{className:"table-empty",children:"Array contains non-object values"}):u.jsxs("div",{className:"data-table-wrapper",children:[u.jsxs("table",{className:"data-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"#"}),t.map(i=>u.jsx("th",{children:i},i))]})}),u.jsx("tbody",{children:e.slice(0,100).map((i,o)=>u.jsxs("tr",{children:[u.jsx("td",{className:"row-index",children:o}),t.map(s=>u.jsx("td",{className:`type-${Vh(i?.[s])}`,children:Fh(i?.[s],Vh(i?.[s]))},s))]},o))})]}),e.length>100&&u.jsxs("div",{className:"table-more",children:["+ ",e.length-100," more rows"]})]})}function G3({data:e,title:t,showViewToggle:i=!0}){const[o,s]=T.useState("tree"),[l,c]=T.useState(""),f=T.useCallback(()=>{navigator.clipboard.writeText(JSON.stringify(e,null,2))},[e]),h=l?JSON.parse(JSON.stringify(e,(g,v)=>{if(typeof v=="string"&&v.toLowerCase().includes(l.toLowerCase())||typeof g=="string"&&g.toLowerCase().includes(l.toLowerCase())||typeof v=="object")return v})):e,m=Array.isArray(e)&&e.length>0&&typeof e[0]=="object";return u.jsxs("div",{className:"data-viewer",children:[u.jsxs("div",{className:"data-viewer-header",children:[t&&u.jsx("span",{className:"data-viewer-title",children:t}),u.jsxs("div",{className:"data-viewer-controls",children:[u.jsx("input",{type:"text",className:"data-search",placeholder:"Search...",value:l,onChange:g=>c(g.target.value)}),i&&u.jsxs("div",{className:"view-toggle",children:[u.jsx("button",{className:o==="tree"?"active":"",onClick:()=>s("tree"),title:"Tree view",children:""}),m&&u.jsx("button",{className:o==="table"?"active":"",onClick:()=>s("table"),title:"Table view",children:""}),u.jsx("button",{className:o==="raw"?"active":"",onClick:()=>s("raw"),title:"Raw JSON"})]}),u.jsx("button",{className:"copy-all-btn",onClick:f,title:"Copy all",children:" Copy"})]})]}),u.jsx("div",{className:"data-viewer-content",children:e==null?u.jsx("div",{className:"data-empty",children:"No data available"}):o==="tree"?u.jsx(Gh,{value:h,depth:0}):o==="table"&&m?u.jsx(F3,{data:e}):u.jsx("pre",{className:"data-raw",children:JSON.stringify(e,null,2)})})]})}const dh=T.memo(G3);function Y3(){const e=T.useRef(null),[t]=T.useState(null),[i,o]=T.useState(new Set),[s,l]=T.useState(new Set),[c,f]=T.useState("logs"),[h,p]=T.useState(320),[m,g]=T.useState(!1),v=T.useRef({startX:0,startWidth:320}),b=Xe(M=>M.logs),w=Xe(M=>M.artifacts),N=Xe(M=>M.isRunning),C=Xe(M=>M.currentNodeId),S=Xe(M=>M.getExecutionDuration),k=Xe(M=>M.clearLogs);T.useEffect(()=>{c==="logs"&&e.current?.scrollIntoView({behavior:"smooth"})},[b,c]);const j=b.find(M=>M.id===t),_=b.filter(M=>M.data&&M.type!=="artifact"),$=M=>new Date(M).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3}),A=M=>{switch(M){case"info":return"";case"success":return"";case"error":return"";case"warning":return"";case"ai":return"";case"node":return"";case"artifact":return"";default:return""}},H=M=>M<1e3?`${M}ms`:`${(M/1e3).toFixed(2)}s`,V=M=>{o(P=>{const O=new Set(P);return O.has(M)?O.delete(M):O.add(M),O})},G=T.useCallback(M=>{l(P=>{const O=new Set(P);return O.has(M)?O.delete(M):O.add(M),O})},[]),I=T.useCallback(M=>{const P=M.data;let O;P instanceof Blob?O=P:typeof P=="string"?O=new Blob([P],{type:M.type||"text/plain"}):O=new Blob([JSON.stringify(P,null,2)],{type:"application/json"});const q=URL.createObjectURL(O),Y=document.createElement("a");Y.href=q,Y.download=M.name||`artifact_${M.id}.txt`,document.body.appendChild(Y),Y.click(),document.body.removeChild(Y),URL.revokeObjectURL(q)},[]),z=T.useCallback(M=>M?M.includes("audio")?"":M.includes("image")?"":M.includes("json")?"":M.includes("text")?"":"":"",[]),U=async()=>{const M=b.map(P=>{const O=$(P.timestamp),q=P.nodeName||P.nodeId||"",Y=P.data?`
  Data: ${JSON.stringify(P.data,null,2)}`:"";return`[${O}] ${q?`[${q}] `:""}${P.message}${Y}`}).join(`
`);try{await navigator.clipboard.writeText(M),alert("Logs copied to clipboard!")}catch(P){console.error("Failed to copy logs:",P)}},Z=M=>{M.preventDefault(),g(!0),v.current={startX:M.clientX,startWidth:h}};return T.useEffect(()=>{if(!m)return;const M=O=>{const q=v.current.startX-O.clientX,Y=Math.max(240,Math.min(600,v.current.startWidth+q));p(Y)},P=()=>{g(!1)};return document.addEventListener("mousemove",M),document.addEventListener("mouseup",P),()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",P)}},[m]),u.jsxs("aside",{className:`execution-panel ${m?"resizing":""}`,style:{width:`${h}px`},children:[u.jsx("div",{className:"ep-resize-handle",onMouseDown:Z,title:"Drag to resize"}),u.jsxs("header",{className:"panel-header",children:[u.jsxs("div",{className:"panel-tabs",children:[u.jsxs("button",{className:`tab-btn ${c==="logs"?"active":""}`,onClick:()=>f("logs"),children:[" Logs",b.length>0&&u.jsx("span",{className:"tab-badge",children:b.length})]}),u.jsxs("button",{className:`tab-btn ${c==="output"?"active":""}`,onClick:()=>f("output"),children:[" Output",_.length>0&&u.jsx("span",{className:"tab-badge",children:_.length})]}),u.jsxs("button",{className:`tab-btn ${c==="artifacts"?"active":""}`,onClick:()=>f("artifacts"),children:[" Artifacts",w.length>0&&u.jsx("span",{className:"tab-badge",children:w.length})]})]}),u.jsxs("div",{className:"panel-actions",children:[N&&u.jsxs("span",{className:"running-indicator",children:[u.jsx("span",{className:"pulse-dot"}),"Running..."]}),u.jsx("button",{className:"btn-icon",onClick:U,title:"Copy all logs",disabled:b.length===0,children:""}),u.jsx("button",{className:"btn-icon",onClick:k,title:"Clear logs",disabled:b.length===0,children:""})]})]}),u.jsxs("div",{className:"panel-content",children:[c==="logs"&&u.jsx(u.Fragment,{children:b.length===0?u.jsxs("div",{className:"empty-logs",children:[u.jsx("p",{children:"No logs yet"}),u.jsx("p",{className:"hint",children:"Run a workflow to see execution logs"})]}):u.jsxs("div",{className:"logs-list",children:[b.map(M=>u.jsxs("div",{className:`log-entry log-${M.type||"info"} ${t===M.id?"selected":""} ${M.data?"has-data":""} ${i.has(M.id)?"expanded":""}`,children:[u.jsxs("div",{className:"log-main",onClick:()=>V(M.id),children:[u.jsx("span",{className:"log-icon",children:A(M.type)}),u.jsx("span",{className:"log-time",children:$(M.timestamp)}),u.jsxs("div",{className:"log-content",children:[M.nodeId&&u.jsxs("span",{className:"log-node",children:["[",M.nodeName||M.nodeId,"]"]}),u.jsx("span",{className:`log-message ${i.has(M.id)?"expanded":""}`,children:M.message}),(M.data||M.message.length>60)&&u.jsx("span",{className:"log-expand-indicator",title:"Click to expand",children:i.has(M.id)?"":""})]})]}),i.has(M.id)&&M.data&&u.jsx("div",{className:"log-data-expanded",children:u.jsx(dh,{data:M.data})})]},M.id)),u.jsx("div",{ref:e})]})}),c==="output"&&u.jsx(u.Fragment,{children:_.length===0?u.jsxs("div",{className:"empty-logs",children:[u.jsx("p",{children:"No output data yet"}),u.jsx("p",{className:"hint",children:"Node outputs will appear here"})]}):u.jsx("div",{className:"outputs-list",children:_.map(M=>u.jsxs("div",{className:"output-item",children:[u.jsxs("div",{className:"output-header",children:[u.jsxs("span",{className:"output-node",children:[A(M.type)," ",M.nodeName||M.nodeId]}),u.jsx("span",{className:"output-time",children:$(M.timestamp)})]}),u.jsx("div",{className:"output-data",children:u.jsx(dh,{data:M.data})})]},M.id))})}),c==="artifacts"&&u.jsx(u.Fragment,{children:w.length===0?u.jsxs("div",{className:"empty-logs",children:[u.jsx("p",{children:"No artifacts yet"}),u.jsx("p",{className:"hint",children:"Generated files and data will appear here"})]}):u.jsx("div",{className:"artifacts-list",children:w.map(M=>{const P=s.has(M.id),O=M.type?.includes("text")||M.type?.includes("json"),q=M.type?.includes("audio"),Y=typeof M.data=="string"?M.data.slice(0,500):JSON.stringify(M.data,null,2).slice(0,500);return u.jsxs("div",{className:`artifact-item ${P?"expanded":""}`,children:[u.jsxs("div",{className:"artifact-header",onClick:()=>G(M.id),children:[u.jsx("span",{className:"artifact-icon",children:z(M.type)}),u.jsxs("div",{className:"artifact-info",children:[u.jsx("span",{className:"artifact-name",children:M.name||"Artifact"}),u.jsxs("span",{className:"artifact-meta",children:[M.type?.split("/")[1]||"file"," "," ",new Date(M.timestamp).toLocaleTimeString()]})]}),u.jsx("span",{className:"artifact-expand-icon",children:P?"":""})]}),P&&u.jsxs("div",{className:"artifact-content",children:[O&&M.data&&u.jsxs("pre",{className:"artifact-preview",children:[Y,typeof M.data=="string"&&M.data.length>500&&u.jsx("span",{className:"preview-truncated",children:"... (truncated)"})]}),q&&M.data instanceof Blob&&u.jsx("audio",{className:"artifact-audio-player",controls:!0,src:URL.createObjectURL(M.data)}),u.jsx("button",{className:"artifact-download-btn",onClick:Q=>{Q.stopPropagation(),I(M)},children:" Download"})]})]},M.id)})})})]}),j?.data&&c==="logs"&&u.jsx("div",{className:"data-viewer-panel",children:u.jsx(dh,{data:j.data,title:`Output: ${j.nodeName||j.nodeId||"Data"}`})}),u.jsx("footer",{className:"panel-footer",children:u.jsxs("span",{className:"execution-stats",children:[N&&C&&u.jsxs("span",{children:["Current: ",u.jsx("strong",{children:C})]}),!N&&b.length>0&&u.jsxs("span",{children:["Total: ",H(S())]})]})})]})}const X3=T.memo(Y3);function Q3({value:e,onChange:t,placeholder:i,multiline:o=!1,previewContext:s={}}){const[l,c]=T.useState(!1),[f,h]=T.useState(""),[p,m]=T.useState(0),g=T.useRef(null),b=D2().filter(A=>A.name.toLowerCase().includes(f.toLowerCase())||A.description.toLowerCase().includes(f.toLowerCase())),w=T.useCallback((A,H)=>{const V=A.slice(0,H),G=V.lastIndexOf("{{"),I=V.lastIndexOf("}}");return G>I},[]),N=A=>{const H=A.target.value,V=A.target.selectionStart;if(m(V),t(H),w(H,V)){const G=H.slice(0,V),I=G.lastIndexOf("{{"),z=G.slice(I+2).trim();h(z),c(!0)}else c(!1)},C=A=>{const H=e.slice(0,p),V=e.slice(p),G=H.lastIndexOf("{{"),z=H.slice(0,G+2)+" "+A.name+" }}"+V;t(z),c(!1),setTimeout(()=>{g.current?.focus()},0)},S=A=>{A.key==="Escape"&&c(!1)},k=e&&e.includes("{{"),j=k?ls(e,{input:s}):null,_=!k||!j?.includes("{{ERROR:"),$=o?"textarea":"input";return u.jsxs("div",{className:"expression-input-wrapper",children:[u.jsxs("div",{className:`expression-input-container ${_?"":"error"}`,children:[u.jsx($,{ref:g,type:o?void 0:"text",value:e||"",onChange:N,onKeyDown:S,onBlur:()=>setTimeout(()=>c(!1),200),placeholder:i,className:`expression-input ${k?"has-expression":""}`}),k&&u.jsx("span",{className:"expression-badge",title:"Contains expressions",children:"{{ }}"})]}),l&&b.length>0&&u.jsx("div",{className:"expression-autocomplete",children:b.slice(0,10).map(A=>u.jsxs("button",{className:"autocomplete-option",onMouseDown:()=>C(A),children:[u.jsx("span",{className:"option-name",children:A.name}),u.jsx("span",{className:"option-desc",children:A.description}),u.jsx("code",{className:"option-example",children:A.example})]},A.name))}),k&&j&&u.jsxs("div",{className:`expression-preview ${_?"":"error"}`,children:[u.jsx("span",{className:"preview-label",children:"Preview:"}),u.jsx("span",{className:"preview-value",children:j.length>100?j.slice(0,100)+"...":j})]})]})}const W3=T.memo(Q3),Z3=["GET","POST","PUT","PATCH","DELETE","HEAD","OPTIONS"];function J3({data:e,onUpdate:t}){return u.jsxs("div",{className:"http-request-config",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Request"}),u.jsxs("div",{className:"config-row",children:[u.jsxs("div",{className:"config-field",style:{flex:"0 0 100px"},children:[u.jsx("label",{children:"Method"}),u.jsx("select",{value:e.method||"GET",onChange:i=>t({method:i.target.value}),children:Z3.map(i=>u.jsx("option",{value:i,children:i},i))})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"URL"}),u.jsx(W3,{value:e.url||"",onChange:i=>t({url:i}),placeholder:"https://api.example.com/{{ $json.endpoint }}"}),u.jsxs("p",{className:"hint",children:["Use ","{{ expression }}"," for dynamic values"]})]})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Headers"}),u.jsxs("div",{className:"config-field",children:[u.jsx("textarea",{value:typeof e.headers=="object"?JSON.stringify(e.headers,null,2):e.headers||"",onChange:i=>{try{const o=JSON.parse(i.target.value);t({headers:o})}catch{t({headers:i.target.value})}},placeholder:'{"Content-Type": "application/json"}',style:{minHeight:"80px"}}),u.jsx("p",{className:"hint",children:"JSON object with header key-value pairs"})]})]}),e.method!=="GET"&&e.method!=="HEAD"&&u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Body"}),u.jsxs("div",{className:"config-field",children:[u.jsx("textarea",{value:typeof e.body=="object"?JSON.stringify(e.body,null,2):e.body||"",onChange:i=>t({body:i.target.value}),placeholder:'{"key": "value"}',style:{minHeight:"100px"}}),u.jsxs("p",{className:"hint",children:["Request body (JSON or text). Use ","{{field}}"," for templating."]})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Options & Error Handling"}),u.jsxs("div",{className:"config-row",children:[u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Timeout (ms)"}),u.jsx("input",{type:"number",value:e.timeout||3e4,onChange:i=>t({timeout:parseInt(i.target.value,10)}),min:1e3,max:3e5})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Retry Count"}),u.jsx("input",{type:"number",value:e.retries||0,onChange:i=>t({retries:parseInt(i.target.value,10)}),min:0,max:10}),u.jsx("p",{className:"hint",children:"0 = no retries"})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Retry Delay (ms)"}),u.jsx("input",{type:"number",value:e.retryDelay||1e3,onChange:i=>t({retryDelay:parseInt(i.target.value,10)}),min:100,max:3e4,disabled:!e.retries||e.retries===0}),u.jsx("p",{className:"hint",children:"Uses exponential backoff"})]})]})]})]})}const K3=T.memo(J3);function Cb(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,o=Array(t);i<t;i++)o[i]=e[i];return o}function e4(e){if(Array.isArray(e))return e}function t4(e,t,i){return(t=l4(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function n4(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var o,s,l,c,f=[],h=!0,p=!1;try{if(l=(i=i.call(e)).next,t!==0)for(;!(h=(o=l.call(i)).done)&&(f.push(o.value),f.length!==t);h=!0);}catch(m){p=!0,s=m}finally{try{if(!h&&i.return!=null&&(c=i.return(),Object(c)!==c))return}finally{if(p)throw s}}return f}}function i4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kb(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),i.push.apply(i,o)}return i}function Tb(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?kb(Object(i),!0).forEach(function(o){t4(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):kb(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function r4(e,t){if(e==null)return{};var i,o,s=o4(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)i=l[o],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(s[i]=e[i])}return s}function o4(e,t){if(e==null)return{};var i={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;i[o]=e[o]}return i}function a4(e,t){return e4(e)||n4(e,t)||c4(e,t)||i4()}function s4(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function l4(e){var t=s4(e,"string");return typeof t=="symbol"?t:t+""}function c4(e,t){if(e){if(typeof e=="string")return Cb(e,t);var i={}.toString.call(e).slice(8,-1);return i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set"?Array.from(e):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Cb(e,t):void 0}}function u4(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Ab(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),i.push.apply(i,o)}return i}function Mb(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Ab(Object(i),!0).forEach(function(o){u4(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ab(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function d4(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(o){return t.reduceRight(function(s,l){return l(s)},o)}}function os(e){return function t(){for(var i=this,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return s.length>=e.length?e.apply(this,s):function(){for(var c=arguments.length,f=new Array(c),h=0;h<c;h++)f[h]=arguments[h];return t.apply(i,[].concat(s,f))}}}function Yc(e){return{}.toString.call(e).includes("Object")}function f4(e){return!Object.keys(e).length}function Es(e){return typeof e=="function"}function h4(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function p4(e,t){return Yc(t)||sr("changeType"),Object.keys(t).some(function(i){return!h4(e,i)})&&sr("changeField"),t}function m4(e){Es(e)||sr("selectorType")}function g4(e){Es(e)||Yc(e)||sr("handlerType"),Yc(e)&&Object.values(e).some(function(t){return!Es(t)})&&sr("handlersType")}function y4(e){e||sr("initialIsRequired"),Yc(e)||sr("initialType"),f4(e)&&sr("initialContent")}function x4(e,t){throw new Error(e[t]||e.default)}var v4={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},sr=os(x4)(v4),wc={changes:p4,selector:m4,handler:g4,initial:y4};function b4(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};wc.initial(e),wc.handler(t);var i={current:e},o=os(N4)(i,t),s=os(S4)(i),l=os(wc.changes)(e),c=os(w4)(i);function f(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(m){return m};return wc.selector(p),p(i.current)}function h(p){d4(o,s,l,c)(p)}return[f,h]}function w4(e,t){return Es(t)?t(e.current):t}function S4(e,t){return e.current=Mb(Mb({},e.current),t),t}function N4(e,t,i){return Es(t)?t(e.current):Object.keys(i).forEach(function(o){var s;return(s=t[o])===null||s===void 0?void 0:s.call(t,e.current[o])}),i}var E4={create:b4},j4={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function C4(e){return function t(){for(var i=this,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return s.length>=e.length?e.apply(this,s):function(){for(var c=arguments.length,f=new Array(c),h=0;h<c;h++)f[h]=arguments[h];return t.apply(i,[].concat(s,f))}}}function k4(e){return{}.toString.call(e).includes("Object")}function T4(e){return e||Db("configIsRequired"),k4(e)||Db("configType"),e.urls?(A4(),{paths:{vs:e.urls.monacoBase}}):e}function A4(){console.warn(M1.deprecation)}function M4(e,t){throw new Error(e[t]||e.default)}var M1={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},Db=C4(M4)(M1),D4={config:T4},_4=function(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return function(s){return i.reduceRight(function(l,c){return c(l)},s)}};function D1(e,t){return Object.keys(t).forEach(function(i){t[i]instanceof Object&&e[i]&&Object.assign(t[i],D1(e[i],t[i]))}),Tb(Tb({},e),t)}var O4={type:"cancelation",msg:"operation is manually canceled"};function fh(e){var t=!1,i=new Promise(function(o,s){e.then(function(l){return t?s(O4):o(l)}),e.catch(s)});return i.cancel=function(){return t=!0},i}var R4=["monaco"],L4=E4.create({config:j4,isInitialized:!1,resolve:null,reject:null,monaco:null}),_1=a4(L4,2),zs=_1[0],pu=_1[1];function z4(e){var t=D4.config(e),i=t.monaco,o=r4(t,R4);pu(function(s){return{config:D1(s.config,o),monaco:i}})}function I4(){var e=zs(function(t){var i=t.monaco,o=t.isInitialized,s=t.resolve;return{monaco:i,isInitialized:o,resolve:s}});if(!e.isInitialized){if(pu({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),fh(hh);if(window.monaco&&window.monaco.editor)return O1(window.monaco),e.resolve(window.monaco),fh(hh);_4(B4,$4)(P4)}return fh(hh)}function B4(e){return document.body.appendChild(e)}function H4(e){var t=document.createElement("script");return e&&(t.src=e),t}function $4(e){var t=zs(function(o){var s=o.config,l=o.reject;return{config:s,reject:l}}),i=H4("".concat(t.config.paths.vs,"/loader.js"));return i.onload=function(){return e()},i.onerror=t.reject,i}function P4(){var e=zs(function(i){var o=i.config,s=i.resolve,l=i.reject;return{config:o,resolve:s,reject:l}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(i){var o=i.m||i;O1(o),e.resolve(o)},function(i){e.reject(i)})}function O1(e){zs().monaco||pu({monaco:e})}function q4(){return zs(function(e){var t=e.monaco;return t})}var hh=new Promise(function(e,t){return pu({resolve:e,reject:t})}),R1={config:z4,init:I4,__getMonacoInstance:q4},U4={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},ph=U4,V4={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},F4=V4;function G4({children:e}){return Dn.createElement("div",{style:F4.container},e)}var Y4=G4,X4=Y4;function Q4({width:e,height:t,isEditorReady:i,loading:o,_ref:s,className:l,wrapperProps:c}){return Dn.createElement("section",{style:{...ph.wrapper,width:e,height:t},...c},!i&&Dn.createElement(X4,null,o),Dn.createElement("div",{ref:s,style:{...ph.fullWidth,...!i&&ph.hide},className:l}))}var W4=Q4,L1=T.memo(W4);function Z4(e){T.useEffect(e,[])}var z1=Z4;function J4(e,t,i=!0){let o=T.useRef(!0);T.useEffect(o.current||!i?()=>{o.current=!1}:e,t)}var un=J4;function fs(){}function Io(e,t,i,o){return K4(e,o)||e5(e,t,i,o)}function K4(e,t){return e.editor.getModel(I1(e,t))}function e5(e,t,i,o){return e.editor.createModel(t,i,o?I1(e,o):void 0)}function I1(e,t){return e.Uri.parse(t)}function t5({original:e,modified:t,language:i,originalLanguage:o,modifiedLanguage:s,originalModelPath:l,modifiedModelPath:c,keepCurrentOriginalModel:f=!1,keepCurrentModifiedModel:h=!1,theme:p="light",loading:m="Loading...",options:g={},height:v="100%",width:b="100%",className:w,wrapperProps:N={},beforeMount:C=fs,onMount:S=fs}){let[k,j]=T.useState(!1),[_,$]=T.useState(!0),A=T.useRef(null),H=T.useRef(null),V=T.useRef(null),G=T.useRef(S),I=T.useRef(C),z=T.useRef(!1);z1(()=>{let P=R1.init();return P.then(O=>(H.current=O)&&$(!1)).catch(O=>O?.type!=="cancelation"&&console.error("Monaco initialization: error:",O)),()=>A.current?M():P.cancel()}),un(()=>{if(A.current&&H.current){let P=A.current.getOriginalEditor(),O=Io(H.current,e||"",o||i||"text",l||"");O!==P.getModel()&&P.setModel(O)}},[l],k),un(()=>{if(A.current&&H.current){let P=A.current.getModifiedEditor(),O=Io(H.current,t||"",s||i||"text",c||"");O!==P.getModel()&&P.setModel(O)}},[c],k),un(()=>{let P=A.current.getModifiedEditor();P.getOption(H.current.editor.EditorOption.readOnly)?P.setValue(t||""):t!==P.getValue()&&(P.executeEdits("",[{range:P.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),P.pushUndoStop())},[t],k),un(()=>{A.current?.getModel()?.original.setValue(e||"")},[e],k),un(()=>{let{original:P,modified:O}=A.current.getModel();H.current.editor.setModelLanguage(P,o||i||"text"),H.current.editor.setModelLanguage(O,s||i||"text")},[i,o,s],k),un(()=>{H.current?.editor.setTheme(p)},[p],k),un(()=>{A.current?.updateOptions(g)},[g],k);let U=T.useCallback(()=>{if(!H.current)return;I.current(H.current);let P=Io(H.current,e||"",o||i||"text",l||""),O=Io(H.current,t||"",s||i||"text",c||"");A.current?.setModel({original:P,modified:O})},[i,t,s,e,o,l,c]),Z=T.useCallback(()=>{!z.current&&V.current&&(A.current=H.current.editor.createDiffEditor(V.current,{automaticLayout:!0,...g}),U(),H.current?.editor.setTheme(p),j(!0),z.current=!0)},[g,p,U]);T.useEffect(()=>{k&&G.current(A.current,H.current)},[k]),T.useEffect(()=>{!_&&!k&&Z()},[_,k,Z]);function M(){let P=A.current?.getModel();f||P?.original?.dispose(),h||P?.modified?.dispose(),A.current?.dispose()}return Dn.createElement(L1,{width:b,height:v,isEditorReady:k,loading:m,_ref:V,className:w,wrapperProps:N})}var n5=t5;T.memo(n5);function i5(e){let t=T.useRef();return T.useEffect(()=>{t.current=e},[e]),t.current}var r5=i5,Sc=new Map;function o5({defaultValue:e,defaultLanguage:t,defaultPath:i,value:o,language:s,path:l,theme:c="light",line:f,loading:h="Loading...",options:p={},overrideServices:m={},saveViewState:g=!0,keepCurrentModel:v=!1,width:b="100%",height:w="100%",className:N,wrapperProps:C={},beforeMount:S=fs,onMount:k=fs,onChange:j,onValidate:_=fs}){let[$,A]=T.useState(!1),[H,V]=T.useState(!0),G=T.useRef(null),I=T.useRef(null),z=T.useRef(null),U=T.useRef(k),Z=T.useRef(S),M=T.useRef(),P=T.useRef(o),O=r5(l),q=T.useRef(!1),Y=T.useRef(!1);z1(()=>{let B=R1.init();return B.then(F=>(G.current=F)&&V(!1)).catch(F=>F?.type!=="cancelation"&&console.error("Monaco initialization: error:",F)),()=>I.current?D():B.cancel()}),un(()=>{let B=Io(G.current,e||o||"",t||s||"",l||i||"");B!==I.current?.getModel()&&(g&&Sc.set(O,I.current?.saveViewState()),I.current?.setModel(B),g&&I.current?.restoreViewState(Sc.get(l)))},[l],$),un(()=>{I.current?.updateOptions(p)},[p],$),un(()=>{!I.current||o===void 0||(I.current.getOption(G.current.editor.EditorOption.readOnly)?I.current.setValue(o):o!==I.current.getValue()&&(Y.current=!0,I.current.executeEdits("",[{range:I.current.getModel().getFullModelRange(),text:o,forceMoveMarkers:!0}]),I.current.pushUndoStop(),Y.current=!1))},[o],$),un(()=>{let B=I.current?.getModel();B&&s&&G.current?.editor.setModelLanguage(B,s)},[s],$),un(()=>{f!==void 0&&I.current?.revealLine(f)},[f],$),un(()=>{G.current?.editor.setTheme(c)},[c],$);let Q=T.useCallback(()=>{if(!(!z.current||!G.current)&&!q.current){Z.current(G.current);let B=l||i,F=Io(G.current,o||e||"",t||s||"",B||"");I.current=G.current?.editor.create(z.current,{model:F,automaticLayout:!0,...p},m),g&&I.current.restoreViewState(Sc.get(B)),G.current.editor.setTheme(c),f!==void 0&&I.current.revealLine(f),A(!0),q.current=!0}},[e,t,i,o,s,l,p,m,g,c,f]);T.useEffect(()=>{$&&U.current(I.current,G.current)},[$]),T.useEffect(()=>{!H&&!$&&Q()},[H,$,Q]),P.current=o,T.useEffect(()=>{$&&j&&(M.current?.dispose(),M.current=I.current?.onDidChangeModelContent(B=>{Y.current||j(I.current.getValue(),B)}))},[$,j]),T.useEffect(()=>{if($){let B=G.current.editor.onDidChangeMarkers(F=>{let L=I.current.getModel()?.uri;if(L&&F.find(ie=>ie.path===L.path)){let ie=G.current.editor.getModelMarkers({resource:L});_?.(ie)}});return()=>{B?.dispose()}}return()=>{}},[$,_]);function D(){M.current?.dispose(),v?g&&Sc.set(l,I.current.saveViewState()):I.current.getModel()?.dispose(),I.current.dispose()}return Dn.createElement(L1,{width:b,height:w,isEditorReady:$,loading:h,_ref:z,className:N,wrapperProps:C})}var a5=o5,s5=T.memo(a5),B1=s5;const mh=new Map,ts=new Map;async function l5(e,t=null){if(mh.has(e))return mh.get(e);if(ts.has(e))return ts.get(e);const i=new Promise((o,s)=>{if(!c5(e)){s(new Error(`Invalid CDN URL: ${e}`));return}const l=document.createElement("script");l.src=e,l.async=!0,l.onload=()=>{const c=t?window[t]:!0;mh.set(e,c),ts.delete(e),o(c)},l.onerror=()=>{ts.delete(e),s(new Error(`Failed to load library from: ${e}`))},document.head.appendChild(l)});return ts.set(e,i),i}function c5(e){try{const t=new URL(e);return t.protocol!=="https:"?!1:["unpkg.com","cdn.jsdelivr.net","cdnjs.cloudflare.com","esm.sh","esm.run","cdn.skypack.dev","cdn.pika.dev","ga.jspm.io"].some(o=>t.hostname===o||t.hostname.endsWith(`.${o}`))}catch{return!1}}const Yh=[{name:"Lodash",url:"https://cdn.jsdelivr.net/npm/lodash@4/lodash.min.js",globalName:"_"},{name:"Axios",url:"https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js",globalName:"axios"},{name:"Day.js",url:"https://cdn.jsdelivr.net/npm/dayjs@1/dayjs.min.js",globalName:"dayjs"},{name:"UUID",url:"https://cdn.jsdelivr.net/npm/uuid@8/dist/umd/uuid.min.js",globalName:"uuid"},{name:"Marked (Markdown)",url:"https://cdn.jsdelivr.net/npm/marked/marked.min.js",globalName:"marked"}],u5=Object.freeze(Object.defineProperty({__proto__:null,CDN_EXAMPLES:Yh,loadFromCDN:l5},Symbol.toStringTag,{value:"Module"}));function d5({data:e,onUpdate:t}){const[i,o]=T.useState(!1),s=T.useCallback(p=>{t({code:p||""})},[t]),l=T.useCallback(p=>{const m=e.cdnUrls||[];m.includes(p)||t({cdnUrls:[...m,p]}),o(!1)},[e.cdnUrls,t]),c=T.useCallback(p=>{const m=e.cdnUrls||[];t({cdnUrls:m.filter(g=>g!==p)})},[e.cdnUrls,t]),f="// Access input data via `input`\n// Return output data\nreturn input;",h=e.cdnUrls||[];return u.jsxs("div",{className:"code-executor-config",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"JavaScript Code"}),u.jsx("div",{className:"config-field monaco-container",children:u.jsx(B1,{height:"200px",language:"javascript",theme:"vs-dark",value:e.code||f,onChange:s,options:{minimap:{enabled:!1},fontSize:12,lineNumbers:"on",scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:2,wordWrap:"on",padding:{top:8,bottom:8},renderLineHighlight:"gutter",scrollbar:{verticalScrollbarSize:8,horizontalScrollbarSize:8}}})}),u.jsx("div",{className:"code-help",children:u.jsxs("p",{className:"hint",children:[u.jsx("strong",{children:"Available:"})," ",u.jsx("code",{children:"input"}),", ",u.jsx("code",{children:"context"})]})})]}),u.jsxs("div",{className:"config-section",children:[u.jsxs("div",{className:"config-section-title",children:[" CDN Libraries",u.jsx("button",{className:"add-cdn-btn",onClick:()=>o(!i),title:"Add library",children:"+"})]}),i&&u.jsxs("div",{className:"cdn-picker",children:[Yh.map(p=>u.jsxs("button",{className:"cdn-option",onClick:()=>l(p.url),children:[u.jsx("strong",{children:p.name}),u.jsxs("span",{className:"cdn-global",children:["window.",p.globalName]})]},p.name)),u.jsx("div",{className:"cdn-custom",children:u.jsx("input",{type:"text",placeholder:"https://cdn.jsdelivr.net/npm/...",onKeyDown:p=>{p.key==="Enter"&&p.target.value.trim()&&(l(p.target.value.trim()),p.target.value="")}})})]}),h.length>0?u.jsx("div",{className:"cdn-list",children:h.map(p=>{const m=Yh.find(g=>g.url===p);return u.jsxs("div",{className:"cdn-item",children:[u.jsx("span",{className:"cdn-name",children:m?.name||p.split("/").pop()}),u.jsx("button",{className:"cdn-remove",onClick:()=>c(p),children:""})]},p)})}):u.jsx("p",{className:"hint",style:{marginTop:"8px"},children:"No libraries loaded. Click + to add."})]})]})}const f5=T.memo(d5),h5=[{value:"set",label:"Set (replace)"},{value:"append",label:"Append (to array)"},{value:"merge",label:"Merge (objects)"}];function p5({data:e,onUpdate:t}){return u.jsxs("div",{className:"set-variable-config",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Variable"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Variable Name"}),u.jsx("input",{type:"text",value:e.variableName||"",onChange:i=>t({variableName:i.target.value}),placeholder:"data"}),u.jsx("p",{className:"hint",children:"The key to set on the output object"})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Mode"}),u.jsx("select",{value:e.mode||"set",onChange:i=>t({mode:i.target.value}),children:h5.map(i=>u.jsx("option",{value:i.value,children:i.label},i.value))})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Value"}),u.jsxs("div",{className:"config-field",children:[u.jsx("textarea",{value:e.value||"",onChange:i=>t({value:i.target.value}),placeholder:"Value or expression",style:{minHeight:"80px"}}),u.jsxs("p",{className:"hint",children:["Use ","{{field.path}}"," to reference input data. Leave empty to use entire input."]})]})]})]})}const m5=T.memo(p5),g5=[{value:"equals",label:"Equals (==)"},{value:"notEquals",label:"Not Equals (!=)"},{value:"contains",label:"Contains"},{value:"greaterThan",label:"Greater Than (>)"},{value:"lessThan",label:"Less Than (<)"},{value:"isEmpty",label:"Is Empty"},{value:"isNotEmpty",label:"Is Not Empty"},{value:"isTrue",label:"Is Truthy"},{value:"isFalse",label:"Is Falsy"}];function y5({data:e,onUpdate:t}){const i=!["isEmpty","isNotEmpty","isTrue","isFalse"].includes(e.operator);return u.jsxs("div",{className:"if-else-config",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Condition"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Field Path"}),u.jsx("input",{type:"text",value:e.condition||"",onChange:o=>t({condition:o.target.value}),placeholder:"data.status"}),u.jsx("p",{className:"hint",children:"Path to the field to check (e.g., response.status)"})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Operator"}),u.jsx("select",{value:e.operator||"equals",onChange:o=>t({operator:o.target.value}),children:g5.map(o=>u.jsx("option",{value:o.value,children:o.label},o.value))})]}),i&&u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Compare Value"}),u.jsx("input",{type:"text",value:e.compareValue||"",onChange:o=>t({compareValue:o.target.value}),placeholder:"value to compare"})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Outputs"}),u.jsxs("div",{className:"output-info",children:[u.jsxs("div",{className:"output-row",children:[u.jsx("span",{className:"output-badge true",children:"Output 1"}),u.jsx("span",{children:"Condition is TRUE"})]}),u.jsxs("div",{className:"output-row",children:[u.jsx("span",{className:"output-badge false",children:"Output 2"}),u.jsx("span",{children:"Condition is FALSE"})]})]})]})]})}const x5=T.memo(y5);function v5({data:e,onUpdate:t}){return u.jsxs("div",{className:"loop-config",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Loop Settings"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Iterations (repeat count)"}),u.jsx("input",{type:"number",value:e.iterations||1,onChange:i=>t({iterations:parseInt(i.target.value,10)||1}),min:1,max:1e3}),u.jsx("p",{className:"hint",children:"How many times the loop will repeat the workflow"})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Items Path (optional)"}),u.jsx("input",{type:"text",value:e.itemsPath||"",onChange:i=>t({itemsPath:i.target.value}),placeholder:"items"}),u.jsx("p",{className:"hint",children:"Path to array in input data for item-based looping"})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Max Items"}),u.jsx("input",{type:"number",value:e.maxIterations||100,onChange:i=>t({maxIterations:parseInt(i.target.value,10)}),min:1,max:1e4}),u.jsx("p",{className:"hint",children:"Maximum array items to process per iteration"})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Outputs"}),u.jsxs("div",{className:"output-info",children:[u.jsxs("div",{className:"output-row",children:[u.jsx("span",{className:"output-badge loop",children:"loop "}),u.jsx("span",{children:"Connect back to repeat the workflow"})]}),u.jsxs("div",{className:"output-row",children:[u.jsx("span",{className:"output-badge done",children:"done "}),u.jsx("span",{children:"Fires when all iterations complete"})]})]})]})]})}const b5=T.memo(v5);function w5({data:e,onUpdate:t}){const i=T.useMemo(()=>e.routes||[],[e.routes]),o=T.useCallback(()=>{const c=[...i,{value:"",outputIndex:i.length}];t({routes:c})},[i,t]),s=T.useCallback((c,f,h)=>{const p=i.map((m,g)=>g===c?{...m,[f]:h}:m);t({routes:p})},[i,t]),l=T.useCallback(c=>{const f=i.filter((h,p)=>p!==c);t({routes:f})},[i,t]);return u.jsxs("div",{className:"switch-config",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Switch Field"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Field Path"}),u.jsx("input",{type:"text",value:e.field||"",onChange:c=>t({field:c.target.value}),placeholder:"status"}),u.jsx("p",{className:"hint",children:"Path to the field to switch on"})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Routes"}),i.map((c,f)=>u.jsxs("div",{className:"route-row",children:[u.jsx("input",{type:"text",value:c.value,onChange:h=>s(f,"value",h.target.value),placeholder:`Value for output ${f+1}`,className:"route-value"}),u.jsxs("span",{className:"route-output",children:[" Output ",c.outputIndex+1]}),u.jsx("button",{className:"btn-icon btn-small",onClick:()=>l(f),title:"Remove route",children:""})]},f)),u.jsx("button",{className:"btn-add-route",onClick:o,children:"+ Add Route"}),u.jsx("p",{className:"hint",style:{marginTop:"8px",marginBottom:"8px"},children:"Routes map values to dynamic output handles"}),u.jsxs("div",{className:"config-field",style:{marginTop:"12px"},children:[u.jsx("label",{children:"Default Output"}),u.jsx("p",{className:"hint",children:'When no routes match, data flows to the "default" output handle'})]})]})]})}const S5=T.memo(w5),N5=[{value:"* * * * *",label:"Every minute"},{value:"*/5 * * * *",label:"Every 5 minutes"},{value:"*/15 * * * *",label:"Every 15 minutes"},{value:"0 * * * *",label:"Every hour"},{value:"0 0 * * *",label:"Every day at midnight"},{value:"0 9 * * 1-5",label:"Weekdays at 9 AM"},{value:"0 0 * * 0",label:"Every Sunday at midnight"}];function E5({data:e,onUpdate:t}){return u.jsxs("div",{className:"schedule-trigger-config",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Schedule"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Cron Expression"}),u.jsx("input",{type:"text",value:e.schedule||"*/5 * * * *",onChange:i=>t({schedule:i.target.value}),placeholder:"*/5 * * * *"}),u.jsx("p",{className:"hint",children:"Format: minute hour day month weekday"})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Quick Presets"}),u.jsxs("select",{value:"",onChange:i=>{i.target.value&&t({schedule:i.target.value})},children:[u.jsx("option",{value:"",children:"Select a preset..."}),N5.map(i=>u.jsx("option",{value:i.value,children:i.label},i.value))]})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Status"}),u.jsxs("div",{className:"config-toggle",children:[u.jsx("label",{children:"Enable Schedule"}),u.jsx("div",{className:`toggle-switch ${e.enabled?"active":""}`,onClick:()=>t({enabled:!e.enabled})})]}),u.jsx("p",{className:"hint",style:{marginTop:"8px"},children:"Note: Browser schedules use setInterval simulation. For production, use a proper scheduler."})]})]})}const j5=T.memo(E5),C5={recommended:" Recommended",qwen:" Qwen Models",medium:" Medium Models",tiny:" Tiny Models"};function k5({data:e,onUpdate:t}){const i=Ye(h=>h.availableModels),o=Ye(h=>h.downloadedModels),s=Ye(h=>h.status),l=Ye(h=>h.currentModelId),c=T.useMemo(()=>i.filter(h=>o.includes(h.id)),[i,o]),f=T.useMemo(()=>{const h={};for(const p of c){const m=p.category||"other";h[m]||(h[m]=[]),h[m].push(p)}return h},[c]);return u.jsxs("div",{className:"ai-agent-config",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Model"}),u.jsxs("div",{className:"config-field",children:[u.jsxs("label",{children:["AI Model ",c.length===0&&"(No models downloaded)"]}),c.length>0?u.jsx("select",{value:e.modelId||l||String(c[0]?.id),onChange:h=>t({modelId:h.target.value}),children:Object.entries(f).map(([h,p])=>u.jsx("optgroup",{label:C5[h]||h,children:p.map(m=>u.jsxs("option",{value:m.id,children:[m.name," (",m.size,")"]},m.id))},h))}):u.jsx("div",{className:"warning-box",style:{padding:"8px",background:"rgba(239, 68, 68, 0.1)",borderRadius:"4px",fontSize:"13px",color:"#fca5a5"},children:"Please download a model using the Model Switcher () in the AI Control Panel."}),u.jsxs("p",{className:"hint",children:["Status:"," ",u.jsx("span",{style:{color:s==="ready"?"var(--color-success)":"var(--color-warning)"},children:s==="ready"?" Ready":s==="loading"?" Loading...":" Not loaded"})]})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"System Prompt"}),u.jsxs("div",{className:"config-field",children:[u.jsx("textarea",{value:e.systemPrompt||"",onChange:h=>t({systemPrompt:h.target.value}),placeholder:"You are a helpful AI assistant...",style:{minHeight:"150px"}}),u.jsx("p",{className:"hint",children:"Define the agent's behavior and personality"})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Reasoning Mode"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Strategy"}),u.jsxs("select",{value:e.reasoningMode||"auto",onChange:h=>t({reasoningMode:h.target.value}),children:[u.jsx("option",{value:"auto",children:" Auto (Smart Selection)"}),u.jsx("option",{value:"cot",children:" Chain-of-Thought (Step-by-Step)"}),u.jsx("option",{value:"tot",children:" Tree-of-Thoughts (Branching)"}),u.jsx("option",{value:"react",children:" ReAct (Tool Calling)"})]}),u.jsx("p",{className:"hint",children:e.reasoningMode==="cot"?"Linear step-by-step reasoning with audit trail":e.reasoningMode==="tot"?"Explores multiple branches, picks the best path":e.reasoningMode==="react"?"Thought  Action  Observation loop with tools":"Automatically selects based on task complexity"})]}),e.reasoningMode==="tot"&&u.jsx("div",{className:"config-row",children:u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Branch Count"}),u.jsx("input",{type:"number",value:e.branchCount||3,onChange:h=>t({branchCount:parseInt(h.target.value,10)}),min:2,max:5}),u.jsx("p",{className:"hint",children:"Number of reasoning paths to explore"})]})}),u.jsxs("div",{className:"config-field",children:[u.jsxs("label",{className:"toggle-label",children:[u.jsx("input",{type:"checkbox",checked:e.enableSelfCorrection||!1,onChange:h=>t({enableSelfCorrection:h.target.checked})}),"Enable Self-Correction (Critic)"]}),u.jsx("p",{className:"hint",children:"Second-pass verification to detect and fix errors before output"})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Parameters"}),u.jsxs("div",{className:"config-row",children:[u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Temperature"}),u.jsx("input",{type:"number",value:e.temperature??.7,onChange:h=>t({temperature:parseFloat(h.target.value)}),min:0,max:2,step:.1}),u.jsx("p",{className:"hint",children:"0 = focused, 2 = creative"})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Max Tokens"}),u.jsx("input",{type:"number",value:e.maxTokens||2e3,onChange:h=>t({maxTokens:parseInt(h.target.value,10)}),min:100,max:8e3,step:100})]})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Tool Calling (ReAct)"}),u.jsxs("div",{className:"config-field",children:[u.jsxs("label",{className:"toggle-label",children:[u.jsx("input",{type:"checkbox",checked:e.enableToolCalling!==!1,onChange:h=>t({enableToolCalling:h.target.checked})}),"Enable Tool Calling"]}),u.jsx("p",{className:"hint",children:"When enabled, the agent can call connected nodes as tools during reasoning"})]}),e.enableToolCalling!==!1&&u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Max Iterations"}),u.jsx("input",{type:"number",value:e.maxIterations||10,onChange:h=>t({maxIterations:parseInt(h.target.value,10)}),min:1,max:20}),u.jsx("p",{className:"hint",children:"Maximum ReAct loop iterations (prevents infinite loops)"})]}),u.jsxs("div",{className:"tools-info",children:[u.jsx("h4",{style:{margin:"0 0 8px",fontSize:"13px"},children:"Connected Tools"}),e.tools&&e.tools.length>0?u.jsx("ul",{className:"tools-list",children:e.tools.map((h,p)=>u.jsxs("li",{children:[u.jsx("span",{className:"tool-icon",children:""}),u.jsx("span",{className:"tool-name",children:h.name||h.nodeId}),u.jsx("span",{className:"tool-type",children:h.type})]},p))}):u.jsx("p",{className:"hint",style:{fontStyle:"italic"},children:"No tools connected. Connect nodes to this agent to use them as tools."})]})]})]})}const T5=T.memo(k5),_b=[{value:"text",label:"Text",icon:""},{value:"number",label:"Number",icon:""},{value:"dropdown",label:"Dropdown",icon:""},{value:"toggle",label:"Toggle",icon:""},{value:"textarea",label:"Text Area",icon:""},{value:"json",label:"JSON",icon:"{ }"}];function A5({data:e,onUpdate:t}){const[i,o]=T.useState(""),[s,l]=T.useState("text"),c=e.inputFields||[],f=e.inputValues||{},h=()=>{if(!i.trim())return;const N=`field_${crypto.randomUUID()}`,C={id:N,name:i.trim(),type:s,options:s==="dropdown"?["Option 1","Option 2"]:void 0,defaultValue:p(s)};t({inputFields:[...c,C],inputValues:{...f,[N]:C.defaultValue}}),o("")},p=N=>{switch(N){case"number":return 0;case"toggle":return!1;case"json":return"{}";default:return""}},m=N=>{const C={...f};delete C[N],t({inputFields:c.filter(S=>S.id!==N),inputValues:C})},g=(N,C)=>{t({inputValues:{...f,[N]:C}})},v=(N,C)=>{const S=C.split(",").map(k=>k.trim()).filter(Boolean);t({inputFields:c.map(k=>k.id===N?{...k,options:S}:k)})},b=(N,C)=>{const S=[...c],k=C==="up"?N-1:N+1;k<0||k>=c.length||([S[N],S[k]]=[S[k],S[N]],t({inputFields:S}))},w=N=>{const C=f[N.id]??N.defaultValue;switch(N.type){case"number":return u.jsx("input",{type:"number",value:C,onChange:S=>g(N.id,parseFloat(S.target.value)||0)});case"toggle":return u.jsxs("label",{className:"toggle-switch",children:[u.jsx("input",{type:"checkbox",checked:C,onChange:S=>g(N.id,S.target.checked)}),u.jsx("span",{className:"toggle-slider"}),u.jsx("span",{className:"toggle-label",children:C?"On":"Off"})]});case"dropdown":return u.jsxs("select",{value:C,onChange:S=>g(N.id,S.target.value),children:[u.jsx("option",{value:"",children:"Select..."}),(N.options||[]).map((S,k)=>u.jsx("option",{value:S,children:S},k))]});case"textarea":return u.jsx("textarea",{value:C,onChange:S=>g(N.id,S.target.value),rows:3});case"json":return u.jsx("textarea",{value:C,onChange:S=>g(N.id,S.target.value),className:"json-input",rows:4,placeholder:'{"key": "value"}'});default:return u.jsx("input",{type:"text",value:C,onChange:S=>g(N.id,S.target.value)})}};return u.jsxs("div",{className:"manual-trigger-config",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Trigger Settings"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Trigger Name"}),u.jsx("input",{type:"text",value:e.label||"Manual Trigger",onChange:N=>t({label:N.target.value}),placeholder:"Start Workflow"})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsxs("div",{className:"config-section-title",children:["Input Fields",u.jsx("span",{className:"field-count",children:c.length})]}),u.jsx("p",{className:"hint",children:"Define input fields that users will fill when running this workflow"}),u.jsxs("div",{className:"fields-list",children:[c.map((N,C)=>u.jsxs("div",{className:"field-item",children:[u.jsxs("div",{className:"field-header",children:[u.jsx("span",{className:"field-icon",children:_b.find(S=>S.value===N.type)?.icon||""}),u.jsx("span",{className:"field-name",children:N.name}),u.jsx("span",{className:"field-type",children:N.type}),u.jsxs("div",{className:"field-actions",children:[u.jsx("button",{className:"action-btn",onClick:()=>b(C,"up"),disabled:C===0,title:"Move up",children:""}),u.jsx("button",{className:"action-btn",onClick:()=>b(C,"down"),disabled:C===c.length-1,title:"Move down",children:""}),u.jsx("button",{className:"action-btn delete",onClick:()=>m(N.id),title:"Remove field",children:""})]})]}),u.jsx("div",{className:"field-input",children:w(N)}),N.type==="dropdown"&&u.jsxs("div",{className:"field-options",children:[u.jsx("label",{children:"Options (comma-separated)"}),u.jsx("input",{type:"text",value:(N.options||[]).join(", "),onChange:S=>v(N.id,S.target.value),placeholder:"Option 1, Option 2, Option 3"})]})]},N.id)),c.length===0&&u.jsxs("div",{className:"empty-fields",children:[u.jsx("p",{children:"No input fields defined"}),u.jsx("p",{className:"hint",children:"Add fields below to create a form"})]})]}),u.jsx("div",{className:"add-field-form",children:u.jsxs("div",{className:"add-field-row",children:[u.jsx("input",{type:"text",value:i,onChange:N=>o(N.target.value),placeholder:"Field name...",className:"field-name-input",onKeyDown:N=>N.key==="Enter"&&h()}),u.jsx("select",{value:s,onChange:N=>l(N.target.value),className:"field-type-select",children:_b.map(N=>u.jsxs("option",{value:N.value,children:[N.icon," ",N.label]},N.value))}),u.jsx("button",{className:"add-field-btn",onClick:h,disabled:!i.trim(),children:"+ Add"})]})})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Output Preview"}),u.jsx("div",{className:"output-preview",children:u.jsx("pre",{children:JSON.stringify(f,null,2)})}),u.jsx("p",{className:"hint",children:"This data will be passed to connected nodes"})]})]})}const M5=T.memo(A5);function D5({data:e,onUpdate:t}){return u.jsx("div",{className:"config-sections",children:u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Voice Settings"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Provider"}),u.jsxs("select",{value:e.provider||"webSpeech",onChange:i=>t({provider:i.target.value}),children:[u.jsx("option",{value:"webSpeech",children:"Web Speech API (Local)"}),u.jsx("option",{value:"elevenlabs",children:"ElevenLabs (API Key Required)"})]})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Voice"}),u.jsxs("select",{value:e.voice||"default",onChange:i=>t({voice:i.target.value}),children:[u.jsx("option",{value:"default",children:"Default"}),u.jsx("option",{value:"Microsoft David",children:"Microsoft David"}),u.jsx("option",{value:"Microsoft Zira",children:"Microsoft Zira"}),u.jsx("option",{value:"Google US English",children:"Google US English"})]}),u.jsx("p",{className:"hint",children:"Available voices depend on your browser"})]}),u.jsxs("div",{className:"config-row",children:[u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Speed"}),u.jsx("input",{type:"range",min:"0.5",max:"2",step:"0.1",value:e.speed||1,onChange:i=>t({speed:parseFloat(i.target.value)})}),u.jsxs("span",{className:"hint",children:[e.speed||1,"x"]})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Pitch"}),u.jsx("input",{type:"range",min:"0.5",max:"2",step:"0.1",value:e.pitch||1,onChange:i=>t({pitch:parseFloat(i.target.value)})}),u.jsx("span",{className:"hint",children:e.pitch||1})]})]}),u.jsxs("div",{className:"config-toggle",children:[u.jsx("label",{children:"Auto-play audio"}),u.jsx("div",{className:`toggle-switch ${e.autoPlay!==!1?"active":""}`,onClick:()=>t({autoPlay:e.autoPlay===!1})})]})]})})}const _5=T.memo(D5);function O5({data:e,onUpdate:t}){const i=T.useCallback(s=>{t({code:s||""})},[t]);return u.jsxs("div",{className:"config-sections",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Python Code"}),u.jsxs("div",{className:"config-field monaco-container",children:[u.jsx(B1,{height:"250px",language:"python",theme:"vs-dark",value:e.code||`# Access input via 'input' variable
# Set 'result' to output data
result = input`,onChange:i,options:{minimap:{enabled:!1},fontSize:12,lineNumbers:"on",scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:4,wordWrap:"on",padding:{top:8,bottom:8},renderLineHighlight:"gutter",scrollbar:{verticalScrollbarSize:8,horizontalScrollbarSize:8}}}),u.jsx("p",{className:"hint",children:"Use 'input' to access incoming data. Set 'result' for output."})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Required Packages"}),u.jsx("input",{type:"text",value:(e.packages||[]).join(", "),onChange:s=>t({packages:s.target.value.split(",").map(l=>l.trim()).filter(Boolean)}),placeholder:"numpy, pandas, matplotlib"}),u.jsx("p",{className:"hint",children:"Comma-separated list of pip packages"})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Timeout (ms)"}),u.jsx("input",{type:"number",value:e.timeout||3e4,onChange:s=>t({timeout:parseInt(s.target.value)}),min:1e3,max:3e5})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:" Tips"}),u.jsxs("ul",{className:"hint-list",children:[u.jsx("li",{children:"First run downloads Pyodide (~15MB)"}),u.jsx("li",{children:"Supports numpy, pandas, scipy, matplotlib"}),u.jsx("li",{children:"All execution happens locally"})]})]})]})}const R5=T.memo(O5);function L5({data:e,onUpdate:t}){return u.jsx("div",{className:"config-sections",children:u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Memory Settings"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Mode"}),u.jsxs("select",{value:e.mode||"query",onChange:i=>t({mode:i.target.value}),children:[u.jsx("option",{value:"query",children:"Query (Search)"}),u.jsx("option",{value:"upsert",children:"Upsert (Add/Update)"}),u.jsx("option",{value:"delete",children:"Delete"})]})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Namespace"}),u.jsx("input",{type:"text",value:e.namespace||"default",onChange:i=>t({namespace:i.target.value}),placeholder:"default"}),u.jsx("p",{className:"hint",children:"Group related memories together"})]}),e.mode==="query"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Top K Results"}),u.jsx("input",{type:"number",value:e.topK||5,onChange:i=>t({topK:parseInt(i.target.value)}),min:1,max:50})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Min Score"}),u.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:e.minScore||.3,onChange:i=>t({minScore:parseFloat(i.target.value)})}),u.jsx("span",{className:"hint",children:e.minScore||.3})]})]})]})})}const z5=T.memo(L5);function I5({data:e,onUpdate:t}){return u.jsxs("div",{className:"config-sections",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"File Operation"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Mode"}),u.jsxs("select",{value:e.mode||"read",onChange:i=>t({mode:i.target.value}),children:[u.jsx("option",{value:"read",children:"Read File"}),u.jsx("option",{value:"write",children:"Write File"})]})]}),e.mode==="write"&&u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Suggested Filename"}),u.jsx("input",{type:"text",value:e.filename||"",onChange:i=>t({filename:i.target.value}),placeholder:"output.txt"})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:" Info"}),u.jsx("p",{className:"hint",children:"Uses the File System Access API. A file picker will open when the node runs."})]})]})}const B5=T.memo(I5);function H5({data:e,onUpdate:t}){return u.jsx("div",{className:"config-sections",children:u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Storage Settings"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Storage Type"}),u.jsxs("select",{value:e.storageType||"localStorage",onChange:i=>t({storageType:i.target.value}),children:[u.jsx("option",{value:"localStorage",children:"LocalStorage"}),u.jsx("option",{value:"indexedDB",children:"IndexedDB"})]})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Operation"}),u.jsxs("select",{value:e.mode||"get",onChange:i=>t({mode:i.target.value}),children:[u.jsx("option",{value:"get",children:"Get"}),u.jsx("option",{value:"set",children:"Set"}),u.jsx("option",{value:"delete",children:"Delete"})]})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Key"}),u.jsx("input",{type:"text",value:e.key||"",onChange:i=>t({key:i.target.value}),placeholder:"my_data_key"})]})]})})}const $5=T.memo(H5),P5=[{value:"auto",label:"Auto-detect",category:"Auto"},{value:"text/plain",label:"Text (.txt)",category:"Text"},{value:"text/markdown",label:"Markdown (.md)",category:"Text"},{value:"text/html",label:"HTML (.html)",category:"Text"},{value:"text/css",label:"CSS (.css)",category:"Text"},{value:"text/javascript",label:"JavaScript (.js)",category:"Text"},{value:"application/json",label:"JSON (.json)",category:"Data"},{value:"text/csv",label:"CSV (.csv)",category:"Data"},{value:"application/xml",label:"XML (.xml)",category:"Data"},{value:"application/yaml",label:"YAML (.yaml)",category:"Data"},{value:"application/pdf",label:"PDF (.pdf)",category:"Document"},{value:"application/msword",label:"Word (.doc)",category:"Document"},{value:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",label:"Word (.docx)",category:"Document"},{value:"application/vnd.ms-excel",label:"Excel (.xls)",category:"Document"},{value:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",label:"Excel (.xlsx)",category:"Document"},{value:"application/vnd.ms-powerpoint",label:"PowerPoint (.ppt)",category:"Document"},{value:"application/vnd.openxmlformats-officedocument.presentationml.presentation",label:"PowerPoint (.pptx)",category:"Document"},{value:"audio/wav",label:"WAV Audio (.wav)",category:"Audio"},{value:"audio/mpeg",label:"MP3 Audio (.mp3)",category:"Audio"},{value:"audio/ogg",label:"OGG Audio (.ogg)",category:"Audio"},{value:"audio/webm",label:"WebM Audio (.webm)",category:"Audio"},{value:"audio/flac",label:"FLAC Audio (.flac)",category:"Audio"},{value:"audio/aac",label:"AAC Audio (.aac)",category:"Audio"},{value:"video/mp4",label:"MP4 Video (.mp4)",category:"Video"},{value:"video/webm",label:"WebM Video (.webm)",category:"Video"},{value:"video/ogg",label:"OGG Video (.ogv)",category:"Video"},{value:"video/quicktime",label:"QuickTime (.mov)",category:"Video"},{value:"video/x-msvideo",label:"AVI Video (.avi)",category:"Video"},{value:"image/png",label:"PNG Image (.png)",category:"Image"},{value:"image/jpeg",label:"JPEG Image (.jpg)",category:"Image"},{value:"image/gif",label:"GIF Image (.gif)",category:"Image"},{value:"image/webp",label:"WebP Image (.webp)",category:"Image"},{value:"image/svg+xml",label:"SVG Image (.svg)",category:"Image"},{value:"image/bmp",label:"Bitmap Image (.bmp)",category:"Image"},{value:"application/zip",label:"ZIP Archive (.zip)",category:"Archive"},{value:"application/x-tar",label:"TAR Archive (.tar)",category:"Archive"},{value:"application/gzip",label:"GZIP Archive (.gz)",category:"Archive"},{value:"application/x-7z-compressed",label:"7-Zip Archive (.7z)",category:"Archive"},{value:"application/octet-stream",label:"Binary (.bin)",category:"Binary"}],q5=P5.reduce((e,t)=>(e[t.category]||(e[t.category]=[]),e[t.category].push(t),e),{});function U5({data:e,onUpdate:t}){return u.jsx("div",{className:"config-sections",children:u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Output Settings"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Output Type"}),u.jsxs("select",{value:e.outputType||"console",onChange:i=>t({outputType:i.target.value}),children:[u.jsx("option",{value:"console",children:"Console Log"}),u.jsx("option",{value:"file",children:"Save to File"}),u.jsx("option",{value:"notification",children:"Show Notification"}),u.jsx("option",{value:"artifact",children:"Save as Artifact"})]})]}),e.outputType==="file"&&u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Filename"}),u.jsx("input",{type:"text",value:e.filename||"output.txt",onChange:i=>t({filename:i.target.value}),placeholder:"output.txt"})]}),e.outputType==="artifact"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Artifact Type"}),u.jsx("select",{value:e.artifactType||"auto",onChange:i=>t({artifactType:i.target.value}),children:Object.entries(q5).map(([i,o])=>u.jsx("optgroup",{label:i,children:o.map(s=>u.jsx("option",{value:s.value,children:s.label},s.value))},i))})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Artifact Name"}),u.jsx("input",{type:"text",value:e.artifactName||"",onChange:i=>t({artifactName:i.target.value}),placeholder:"Auto-generated if empty"})]})]}),e.outputType==="notification"&&u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Notification Title"}),u.jsx("input",{type:"text",value:e.notificationTitle||"Workflow Complete",onChange:i=>t({notificationTitle:i.target.value})})]}),u.jsxs("div",{className:"config-toggle",children:[u.jsx("label",{children:"Format as JSON"}),u.jsx("div",{className:`toggle-switch ${e.formatJson?"active":""}`,onClick:()=>t({formatJson:!e.formatJson})})]})]})})}const V5=T.memo(U5);function F5({data:e,onUpdate:t}){const i=Ye(f=>f.availableModels),o=Ye(f=>f.status),s=Ye(f=>f.loadModel),l=f=>{const h=i.find(p=>p.id===f);t({modelId:f,modelName:h?.name||f})},c=async()=>{e.modelId&&await s(e.modelId)};return u.jsxs("div",{className:"chat-model-config",children:[u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Model Selection"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Provider"}),u.jsxs("select",{value:e.provider||"webllm",onChange:f=>t({provider:f.target.value}),children:[u.jsx("option",{value:"webllm",children:"WebLLM (Local Browser)"}),u.jsx("option",{value:"openai",children:"OpenAI API"}),u.jsx("option",{value:"anthropic",children:"Anthropic API"}),u.jsx("option",{value:"local",children:"Local Ollama"})]})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Model"}),u.jsxs("select",{value:e.modelId||"",onChange:f=>l(f.target.value),children:[u.jsx("option",{value:"",children:"Select a model..."}),i.map(f=>u.jsxs("option",{value:f.id,children:[f.name," (",f.size,")"]},f.id))]}),u.jsx("p",{className:"hint",children:"Choose the AI model for text generation"})]}),e.provider==="webllm"&&u.jsxs("div",{className:"model-status-section",children:[u.jsxs("div",{className:`status-badge ${o}`,children:[o==="ready"&&" Model Ready",o==="loading"&&" Loading...",o==="idle"&&" Not Loaded",o==="error"&&" Error"]}),o!=="ready"&&o!=="loading"&&u.jsx("button",{className:"load-model-btn",onClick:c,disabled:!e.modelId,children:"Load Model"})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Generation Settings"}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Temperature"}),u.jsxs("div",{className:"slider-row",children:[u.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",value:e.temperature||.7,onChange:f=>t({temperature:parseFloat(f.target.value)})}),u.jsx("span",{className:"slider-value",children:e.temperature||.7})]}),u.jsx("p",{className:"hint",children:"Higher = more creative, Lower = more focused"})]}),u.jsxs("div",{className:"config-field",children:[u.jsx("label",{children:"Max Tokens"}),u.jsx("input",{type:"number",value:e.maxTokens||2e3,onChange:f=>t({maxTokens:parseInt(f.target.value,10)||2e3}),min:100,max:8e3}),u.jsx("p",{className:"hint",children:"Maximum response length"})]})]}),u.jsxs("div",{className:"config-section",children:[u.jsx("div",{className:"config-section-title",children:"Connection"}),u.jsx("div",{className:"connection-info",children:u.jsxs("p",{children:["Connect the ",u.jsx("strong",{children:"Model "})," output (top) to an AI Agent's Model input slot."]})})]})]})}const G5=T.memo(F5),Y5={httpRequest:K3,codeExecutor:f5,setVariable:m5,ifElse:x5,loop:b5,switchNode:S5,scheduleTrigger:j5,aiAgent:T5,manualTrigger:M5,textToSpeech:_5,pythonExecutor:R5,vectorMemory:z5,fileSystem:B5,localStorage:$5,output:V5,chatModel:G5};function X5(){const e=Ce(z=>z.nodes),t=Ce(z=>z.selectedNodeId),i=Ce(z=>z.configOpen),o=Ce(z=>z.updateNode),s=Ce(z=>z.deleteNode),l=Ce(z=>z.setSelectedNode),c=Ce(z=>z.closeConfig),[f,h]=T.useState({x:0,y:0}),[p,m]=T.useState(!1),g=T.useRef({startX:0,startY:0,startPosX:0,startPosY:0}),v=T.useRef(null),[b,w]=T.useState(380),[N,C]=T.useState(!1),S=T.useRef({startX:0,startWidth:380}),k=T.useCallback(z=>{z.target.tagName==="INPUT"||z.target.tagName==="BUTTON"||(m(!0),g.current={startX:z.clientX,startY:z.clientY,startPosX:f.x,startPosY:f.y},z.preventDefault())},[f]);T.useEffect(()=>{if(!p)return;const z=Z=>{const M=Z.clientX-g.current.startX,P=Z.clientY-g.current.startY;h({x:g.current.startPosX+M,y:g.current.startPosY+P})},U=()=>{m(!1)};return document.addEventListener("mousemove",z),document.addEventListener("mouseup",U),()=>{document.removeEventListener("mousemove",z),document.removeEventListener("mouseup",U)}},[p]);const j=T.useCallback(z=>{z.preventDefault(),C(!0),S.current={startX:z.clientX,startWidth:b}},[b]);T.useEffect(()=>{if(!N)return;const z=Z=>{const M=S.current.startX-Z.clientX,P=Math.max(280,Math.min(800,S.current.startWidth+M));w(P)},U=()=>{C(!1)};return document.addEventListener("mousemove",z),document.addEventListener("mouseup",U),()=>{document.removeEventListener("mousemove",z),document.removeEventListener("mouseup",U)}},[N]);const _=e.find(z=>z.id===t),$=T.useCallback(z=>{t&&o(t,z)},[t,o]),A=T.useCallback(()=>{t&&(s(t),l(null),c())},[t,s,l,c]),H=T.useCallback(()=>{c()},[c]);if(!i||!_)return null;const V=Si[_.type],G=Y5[_.type],I=lu(_.type);return u.jsxs("div",{ref:v,className:`node-config-panel ${p?"dragging":""} ${N?"resizing":""}`,style:{"--node-color":I,width:`${b}px`,transform:`translate(${f.x}px, ${f.y}px)`},children:[u.jsx("div",{className:"resize-handle",onMouseDown:j,title:"Drag to resize"}),u.jsxs("header",{className:"config-header draggable",onMouseDown:k,children:[u.jsx("div",{className:"drag-handle",title:"Drag to move",children:""}),u.jsxs("div",{className:"config-title",children:[u.jsx("span",{className:"node-icon",children:V?.icon||""}),u.jsx("input",{type:"text",className:"node-label-input",value:_.data.label||"",onChange:z=>$({label:z.target.value}),placeholder:V?.name||"Node"})]}),u.jsxs("div",{className:"config-actions",children:[u.jsx("button",{type:"button",className:"btn-icon btn-delete",onClick:z=>{z.stopPropagation(),z.preventDefault(),A()},title:"Delete node",children:""}),u.jsx("button",{type:"button",className:"btn-icon",onClick:z=>{z.stopPropagation(),H()},title:"Close",children:""})]})]}),u.jsx("div",{className:"config-body",children:G?u.jsx(G,{data:_.data,onUpdate:$,nodeId:_.id}):u.jsx("div",{className:"config-empty",children:u.jsx("p",{children:"No configuration available for this node type."})})}),u.jsxs("footer",{className:"config-footer",children:[u.jsx("span",{className:"node-type-label",children:V?.name||_.type}),u.jsxs("span",{className:"node-id",children:[_.id.slice(0,12),"..."]})]})]})}const Q5=T.memo(X5);function W5({message:e,type:t,onClose:i}){const o={success:"",error:"",warning:"",info:""};return u.jsxs("div",{className:`toast toast-${t}`,role:"alert",children:[u.jsx("span",{className:"toast-icon",children:o[t]}),u.jsx("span",{className:"toast-message",children:e}),u.jsx("button",{className:"toast-close",onClick:i,children:""})]})}function Z5(){const e=Xo(i=>i.toasts),t=Xo(i=>i.removeToast);return e.length===0?null:u.jsx("div",{className:"toast-container",children:e.map(i=>u.jsx(W5,{...i,onClose:()=>t(i.id)},i.id))})}const J5=T.memo(Z5);function K5(){const e=Ye(l=>l.status),t=Ye(l=>l.loadProgress),i=Ye(l=>l.currentModel),o=Ye(l=>l.availableModels);if(e!=="loading")return null;const s=o.find(l=>l.id===i);return u.jsx("div",{className:"loading-overlay",children:u.jsxs("div",{className:"loading-content",children:[u.jsxs("div",{className:"loading-header",children:[u.jsx("h1",{className:"brand-title",children:"IOSANS"}),u.jsx("span",{className:"brand-tagline",children:"Infinite Open Source Automation System"})]}),u.jsxs("div",{className:"loading-spinner",children:[u.jsx("div",{className:"spinner-ring"}),u.jsx("span",{className:"spinner-icon",children:""})]}),u.jsx("h2",{className:"loading-title",children:"Preparing Your Sovereign AI"}),u.jsxs("div",{className:"loading-model-info",children:[u.jsx("span",{className:"model-name",children:s?.name||i}),s?.size&&u.jsx("span",{className:"model-size",children:s.size})]}),u.jsxs("div",{className:"progress-container",children:[u.jsx("div",{className:"progress-bar",children:u.jsx("div",{className:"progress-fill",style:{width:`${Math.round((t||0)*100)}%`}})}),u.jsxs("span",{className:"progress-text",children:[Math.round((t||0)*100),"%"]})]}),u.jsxs("p",{className:"loading-hint",children:["Your AI runs locally. No cloud. No data harvesting.",u.jsx("br",{}),u.jsx("strong",{children:"You own your intelligence."})]})]})})}const eB=T.memo(K5),Ob="flownode-workflows";function tB({isOpen:e,onClose:t}){const[i,o]=T.useState([]),[s,l]=T.useState(""),[c,f]=T.useState(null),[h,p]=T.useState(""),m=Ce(I=>I.loadWorkflow),g=Ce(I=>I.getWorkflowData),v=Ce(I=>I.clearWorkflow),b=Ce(I=>I.setWorkflowName),w=Xo(),N=T.useCallback(()=>{try{const I=localStorage.getItem(Ob);I&&o(JSON.parse(I))}catch(I){console.error("Failed to load workflows:",I)}},[]);T.useEffect(()=>{e&&N()},[e,N]);const C=I=>{localStorage.setItem(Ob,JSON.stringify(I)),o(I)},S=i.filter(I=>I.name.toLowerCase().includes(s.toLowerCase())),k=T.useCallback(()=>{const I=g(),z={id:Date.now().toString(),name:I.name||"Untitled Workflow",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),nodeCount:I.nodes.length,data:I};C([z,...i]),w.success(`Saved "${z.name}"`)},[g,i,w]),j=T.useCallback(I=>{m(I.data),b(I.name),w.success(`Loaded "${I.name}"`),t()},[m,b,w,t]),_=T.useCallback(I=>{const z=i.find(Z=>Z.id===I),U=i.filter(Z=>Z.id!==I);C(U),w.info(`Deleted "${z?.name}"`)},[i,w]),$=T.useCallback(I=>{const z={...I,id:Date.now().toString(),name:`${I.name} (Copy)`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};C([z,...i]),w.success(`Duplicated "${I.name}"`)},[i,w]),A=I=>{f(I.id),p(I.name)},H=T.useCallback(I=>{const z=i.map(U=>U.id===I?{...U,name:h,updatedAt:new Date().toISOString()}:U);C(z),f(null),w.success("Renamed workflow")},[i,h,w]),V=T.useCallback(()=>{v(),b("New Workflow"),w.info("Created new workflow"),t()},[v,b,w,t]),G=I=>new Date(I).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"});return e?u.jsx("div",{className:"workflow-manager-overlay",onClick:t,children:u.jsxs("div",{className:"workflow-manager-modal",onClick:I=>I.stopPropagation(),children:[u.jsxs("div",{className:"manager-header",children:[u.jsx("h2",{children:"Workflow Manager"}),u.jsx("button",{className:"close-btn",onClick:t,children:""})]}),u.jsxs("div",{className:"manager-toolbar",children:[u.jsx("input",{type:"text",className:"manager-search",placeholder:"Search workflows...",value:s,onChange:I=>l(I.target.value)}),u.jsxs("div",{className:"manager-actions",children:[u.jsx("button",{className:"btn-primary",onClick:k,children:" Save Current"}),u.jsx("button",{className:"btn-secondary",onClick:V,children:" New Workflow"})]})]}),u.jsx("div",{className:"manager-content",children:S.length===0?u.jsx("div",{className:"empty-state",children:s?u.jsxs("p",{children:['No workflows match "',s,'"']}):u.jsxs("div",{children:[u.jsx("p",{children:"No saved workflows yet"}),u.jsx("p",{className:"hint",children:'Click "Save Current" to save your first workflow'})]})}):u.jsx("div",{className:"workflow-list",children:S.map(I=>u.jsxs("div",{className:"workflow-item",children:[u.jsxs("div",{className:"workflow-info",children:[c===I.id?u.jsx("input",{type:"text",className:"edit-name-input",value:h,onChange:z=>p(z.target.value),onBlur:()=>H(I.id),onKeyDown:z=>z.key==="Enter"&&H(I.id),autoFocus:!0}):u.jsx("h3",{className:"workflow-name",onClick:()=>A(I),children:I.name}),u.jsxs("div",{className:"workflow-meta",children:[u.jsxs("span",{children:[I.nodeCount," nodes"]}),u.jsx("span",{children:""}),u.jsx("span",{children:G(I.updatedAt)})]})]}),u.jsxs("div",{className:"workflow-actions",children:[u.jsx("button",{className:"action-btn load",onClick:()=>j(I),title:"Load workflow",children:""}),u.jsx("button",{className:"action-btn duplicate",onClick:()=>$(I),title:"Duplicate workflow",children:""}),u.jsx("button",{className:"action-btn delete",onClick:()=>_(I.id),title:"Delete workflow",children:""})]})]},I.id))})}),u.jsx("div",{className:"manager-footer",children:u.jsxs("span",{className:"workflow-count",children:[i.length," workflow",i.length!==1?"s":""," saved"]})})]})}):null}const nB=T.memo(tB),Rb={"0.5B":1,"1B":2,"1.5B":2.5,"2B":3,"3B":4,"4B":5,"7B":8,"8B":10,"9B":12};function iB(e,t){return{summary:{totalNodes:e.length,totalConnections:t.length,nodeTypes:[...new Set(e.map(i=>i.type))]},nodes:e.map(i=>({id:i.id,type:i.type,title:i.data?.label||i.type,hasConfig:Object.keys(i.data||{}).length>1})),connections:t.map(i=>({from:i.source,to:i.target}))}}function rB(e,t){const i=[],o=e.map(c=>c.type);o.includes("webhookTrigger")&&!o.includes("aiAgent")&&i.push({type:"add_node",message:"I see you have a webhook trigger. Would you like me to add an AI Agent to process the incoming data?",suggestedAction:{type:"addNode",nodeType:"aiAgent",label:"Process Webhook Data"}}),o.includes("aiAgent")&&!o.includes("output")&&i.push({type:"add_node",message:"Your AI Agent needs an Output node to display results. Want me to add one?",suggestedAction:{type:"addNode",nodeType:"output",label:"Result"}}),o.includes("httpRequest")&&!o.includes("ifElse")&&i.push({type:"add_node",message:"Consider adding an If/Else node to handle API errors gracefully.",suggestedAction:{type:"addNode",nodeType:"ifElse",label:"Check Response"}}),o.includes("codeExecutor")&&!o.includes("aiAgent")&&i.push({type:"enhance",message:"Want to add an AI Agent to dynamically generate or modify the code?",suggestedAction:{type:"addNode",nodeType:"aiAgent",label:"Code Generator"}});const s=new Set;t.forEach(c=>{s.add(c.source),s.add(c.target)});const l=e.filter(c=>!s.has(c.id)&&e.length>1);return l.length>0&&i.push({type:"warning",message:`You have ${l.length} disconnected node(s). Would you like help connecting them?`,disconnectedNodes:l.map(c=>c.id)}),i}function oB(e){if(!e)return null;const t=e.match(/(\d+(?:\.\d+)?)[Bb]/i);if(!t)return null;const i=t[1]+"B",o=Rb[i];if(!o)return null;const s=8;if(o>s){const c=Ye.getState().availableModels.filter(f=>{const h=f.id.match(/(\d+(?:\.\d+)?)[Bb]/i);if(!h)return!1;const p=Rb[h[1]+"B"];return p&&p<=s}).slice(0,3);return{warning:!0,message:` Warning: ${e} requires ~${o}GB VRAM which may exceed your device's capacity.`,suggestion:c.length>0?`Consider using a quantized smaller model like: ${c.map(f=>f.name).join(", ")}`:"Consider using a smaller quantized model for better stability.",requiredVRAM:o,estimatedAvailable:s}}return null}function aB(e,t){const i=t?.message||t?.error||"Unknown error",o={nodeId:e,error:i,diagnosis:"",suggestedFix:null},s=[{pattern:/{{(\w+)\.(\w+)}}/,diagnosis:"Variable expression syntax error",fix:l=>({type:"updateNode",nodeId:e,config:{expression:`{{${l[1]}.output.${l[2]}}}`},description:`Fix variable syntax: Use {{${l[1]}.output.${l[2]}}} instead of {{${l[1]}.${l[2]}}}`})},{pattern:/undefined is not|Cannot read propert/i,diagnosis:"Missing or undefined input data",fix:()=>({type:"addNode",nodeType:"setVariable",config:{name:"defaultInput",value:"{}"},description:"Add a Set Variable node to provide default input values"})},{pattern:/timeout|timed out/i,diagnosis:"Operation timed out - possibly due to model loading",fix:()=>({type:"updateNode",nodeId:e,config:{timeout:3e5},description:"Increase timeout to 5 minutes for AI operations"})},{pattern:/fetch|network|CORS/i,diagnosis:"Network or CORS error in HTTP request",fix:()=>({type:"updateNode",nodeId:e,config:{mode:"cors",headers:{Accept:"application/json"}},description:"Update request headers to handle CORS"})},{pattern:/JSON\.parse|Unexpected token/i,diagnosis:"Invalid JSON in response or configuration",fix:()=>({type:"addNode",nodeType:"codeExecutor",config:{code:`// Safely parse JSON
try {
  return JSON.parse(input);
} catch {
  return { raw: input };
}`},description:"Add a Code Executor to safely parse JSON"})}];for(const{pattern:l,diagnosis:c,fix:f}of s){const h=i.match(l);if(h){o.diagnosis=c,o.suggestedFix=f(h);break}}return o.diagnosis||(o.diagnosis="Unrecognized error - manual inspection recommended",o.suggestedFix={type:"focusNode",nodeId:e,description:"Open node configuration to inspect settings"}),o}function sB(){return Object.entries(Gc).map(([e,t])=>({type:e,title:t.title,category:t.category,overview:t.overview?.slice(0,150)+"...",config:t.config?.map(i=>i.name).join(", ")||"none"}))}const lB=`
You are the Overseer, an expert AI assistant for IOSANS.
You have **DIRECT CONTROL** over the workflow canvas. You can build, edit, and run workflows by outputting JSON actions.

##  MISSION CRITICAL RULES
1. **ACTION OVER EXPLANATION**: If the user asks to "build", "create", "add", or "make" something, **DO NOT** explain how to do it. **JUST DO IT** by outputting the JSON actions.
   -  "I can't build it directly, but here is a plan..."
   -  (Outputs JSON to build it immediately)
2. **NO HALLUCINATIONS**: Use only Valid Node Types.
3. **CONNECT EVERYTHING**: Add 'addEdge' actions for every connection.
4. **ALWAYS OUTPUT**: Every flow needs an 'output' node.

## Valid Node Types
{{NODE_REFERENCE}}

## Interactive Capabilities
- **Build/Edit**: Output JSON with \`addNode\`, \`addEdge\`, \`updateNode\`.
- **Control**: Output JSON with \`runWorkflow\`, \`clearCanvas\`.
- **Teach**: Output JSON with \`startTutorial\`.

## Response Format
- **Chatting**: Text only.
- **Acting**: **ONLY** valid JSON inside a code block. NO explanation text outside the block if you are building the whole request.

\`\`\`json
{
  "actions": [
    { "type": "addNode", "nodeType": "aiAgent", ... },
    { "type": "addEdge", ... }
  ]
}
\`\`\`
`;function cB(e,t){const i=[],o=[],s=e.some(p=>p.type==="output");e.length>0&&!s&&i.push(" No OUTPUT node - add one to see results");const l=new Set;t.forEach(p=>{l.add(p.source),l.add(p.target)});const c=e.filter(p=>!l.has(p.id)&&e.length>1);c.length>0&&i.push(` ${c.length} disconnected node(s)`);const f=e.some(p=>["manualTrigger","scheduleTrigger","webhookTrigger","browserEventTrigger"].includes(p.type));e.length>0&&!f&&i.push(" No TRIGGER node - workflow cannot start");const h=e[e.length-1];if(h)switch(h.type){case"aiAgent":o.push(" Connect to textToSpeech to hear the response"),o.push(" Connect to output to display the result");break;case"httpRequest":o.push(" Connect to codeExecutor to transform the data"),o.push(" Connect to ifElse to check status code");break;case"codeExecutor":o.push(" Connect to output to display results"),o.push(" Connect to httpRequest to send data");break;case"manualTrigger":o.push(" Connect to aiAgent for AI processing"),o.push(" Connect to httpRequest for API calls");break}return{issues:i,suggestions:o,hasOutput:s,hasTrigger:f,disconnectedCount:c.length}}function uB(e){const t=Gc[e];return t?{title:t.title,overview:t.overview,config:t.config,examples:t.examples?.slice(0,2),tips:t.tips?.slice(0,3)}:null}class dB{constructor(){this.sessions=this.loadSessions(),this.activeSessionId=this.getLastActiveSessionId(),this.sessions.length===0?this.createSession("New Chat"):(!this.activeSessionId||!this.getSession(this.activeSessionId))&&(this.activeSessionId=this.sessions[0].id,this.saveLastActiveSessionId()),this.subscribers=[],this.actionHistory=[],this.thinkingCallbacks=[],this.errorSubscribers=[],this.pendingErrorAnalysis=null,this.setupErrorSubscription()}setupErrorSubscription(){Xe.subscribe((t,i)=>{const o=t.logs.filter(s=>s.type==="error"&&!i.logs.some(l=>l.id===s.id));if(o.length>0){const s=o[o.length-1];this.handleExecutionError(s)}})}handleExecutionError(t){const{nodes:i}=Ce.getState(),o=i.find(c=>c.id===t.nodeId);if(!o)return;const s=aB(t.nodeId,t);this.pendingErrorAnalysis=s;const l=this.getActiveSession();if(l){const c={role:"assistant",content:` **Workflow Error Detected**

**Node:** ${o.data?.label||o.type}
**Error:** ${s.error}
**Diagnosis:** ${s.diagnosis}

`+(s.suggestedFix?`**Suggested Fix:** ${s.suggestedFix.description}

\`\`\`json
{"actions": [{"type": "${s.suggestedFix.type}", "nodeId": "${s.nodeId}", "config": ${JSON.stringify(s.suggestedFix.config||{})}, "__fixAction": true}]}
\`\`\``:""),isErrorAnalysis:!0,timestamp:Date.now()};l.messages.push(c),l.timestamp=Date.now(),this.saveSessions(),this.notifySubscribers(),this.errorSubscribers.forEach(f=>f(s))}}onError(t){return this.errorSubscribers.push(t),()=>{this.errorSubscribers=this.errorSubscribers.filter(i=>i!==t)}}loadSessions(){try{const t=localStorage.getItem("overseer_sessions");if(t)return JSON.parse(t);const i=localStorage.getItem("overseer_history");if(i){const o=JSON.parse(i);if(o.length>0){const s={id:"legacy-"+Date.now(),title:"Legacy Chat",timestamp:Date.now(),messages:o};return localStorage.removeItem("overseer_history"),[s]}}return[]}catch(t){return console.warn("Failed to load Overseer sessions",t),[]}}saveSessions(){try{localStorage.setItem("overseer_sessions",JSON.stringify(this.sessions))}catch(t){console.warn("Failed to save Overseer sessions",t)}}getLastActiveSessionId(){return localStorage.getItem("overseer_active_session_id")}saveLastActiveSessionId(){localStorage.setItem("overseer_active_session_id",this.activeSessionId)}getSessions(){return[...this.sessions].sort((t,i)=>i.timestamp-t.timestamp)}getSession(t){return this.sessions.find(i=>i.id===t)}getActiveSession(){return this.getSession(this.activeSessionId)}createSession(t="New Chat"){const i={id:Date.now().toString(36)+Math.random().toString(36).substr(2),title:t,timestamp:Date.now(),messages:[]};return this.sessions.unshift(i),this.activeSessionId=i.id,this.saveSessions(),this.saveLastActiveSessionId(),this.notifySubscribers(),i}switchSession(t){return this.getSession(t)?(this.activeSessionId=t,this.saveLastActiveSessionId(),this.notifySubscribers(),!0):!1}deleteSession(t){this.sessions=this.sessions.filter(i=>i.id!==t),this.activeSessionId===t&&(this.sessions.length>0?this.activeSessionId=this.sessions[0].id:this.createSession()),this.saveSessions(),this.saveLastActiveSessionId(),this.notifySubscribers()}renameSession(t,i){const o=this.getSession(t);o&&(o.title=i,this.saveSessions(),this.notifySubscribers())}clearAllSessions(){this.sessions=[],this.createSession(),this.saveSessions(),this.notifySubscribers()}subscribe(t){return this.subscribers.push(t),()=>{this.subscribers=this.subscribers.filter(i=>i!==t)}}notifySubscribers(){this.subscribers.forEach(t=>t())}async chat(t){const i=this.getActiveSession();if(!i)throw new Error("No active session");const{nodes:o,edges:s}=Ce.getState(),l=cB(o,s),c=iB(o,s),f=rB(o,s),h=o.find(N=>N.selected),p=h?uB(h.type):null;let m=null;const g=t.match(/(?:llama|qwen|gemma|phi|mistral)[\s-]*(?:\d+(?:\.\d+)?)?[\s-]*(\d+)[Bb]/i);g&&(m=oB(g[0]));const v=JSON.stringify({canvas:c,analysis:{issues:l.issues,suggestions:l.suggestions,hasOutput:l.hasOutput,hasTrigger:l.hasTrigger},proactiveSuggestions:f.slice(0,3),selectedNode:h?{id:h.id,type:h.type,help:p}:null,resourceWarning:m}),b=sB().map(N=>`- **${N.type}**: ${N.overview} (Inputs: ${N.config})`).join(`
`),w=lB.replace("{{NODE_REFERENCE}}",b)+`

### Current Canvas State
${v}`+(f.length>0?`

### Proactive Suggestions
Based on the current canvas, consider mentioning:
${f.map(N=>`- ${N.message}`).join(`
`)}`:"")+(m?`

### Resource Warning
${m.message}
${m.suggestion}`:"");try{const N=await or.generateWithHistory(t,i.messages,{temperature:.7,maxTokens:2e3,systemPrompt:w});i.messages.push({role:"user",content:t}),i.messages.push({role:"assistant",content:N}),i.timestamp=Date.now(),i.title==="New Chat"&&i.messages.length<=2&&(i.title=t.split(" ").slice(0,5).join(" ")+"..."),this.saveSessions(),this.notifySubscribers();const C=this.parseActions(N);return C.length>0&&(console.log("Overseer executing actions:",C),this.executeActions(C)),N}catch(N){return console.error("Overseer Error:",N),`Error: ${N.message}. Is a model loaded?`}}parseActions(t){try{let i=null;const o=t.match(/```(?:json)?\s*([\s\S]*?)\s*```/i);if(o)i=o[1];else{const s=t.indexOf("{"),l=t.lastIndexOf("}");s!==-1&&l!==-1&&l>s&&(i=t.substring(s,l+1))}if(i){const s=i.trim(),l=JSON.parse(s);if(l.actions&&Array.isArray(l.actions))return l.actions}}catch(i){console.warn("Failed to parse Overseer actions:",i)}return[]}executeActions(t){const i=Ce.getState(),o=["manualTrigger","scheduleTrigger","webhookTrigger","errorTrigger","httpRequest","codeExecutor","setVariable","fileSystem","ifElse","loop","switchNode","merge","aiAgent","vectorMemory","waitForApproval","textToSpeech","imageGeneration","output"],s={audioGeneration:"textToSpeech",AudioNode:"textToSpeech","text-to-speech":"textToSpeech",TextToSpeech:"textToSpeech","image-generation":"imageGeneration","ai-agent":"aiAgent","manual-trigger":"manualTrigger"};t.forEach(l=>{const c=l.nodeType||"unknown",f=l.id||`${c}-${Date.now()}-${Math.random().toString(36).substr(2,5)}`;switch(l.type){case"addNode":{let h=l.nodeType;if(!h){console.warn("Overseer: Missing nodeType in addNode action",l);return}const p=h.toLowerCase(),m={...s,audiogeneration:"textToSpeech",audionode:"textToSpeech","text-to-speech":"textToSpeech",texttospeech:"textToSpeech","image-generation":"imageGeneration",imagegeneration:"imageGeneration","ai-agent":"aiAgent",aiagent:"aiAgent",agent:"aiAgent","manual-trigger":"manualTrigger",manualtrigger:"manualTrigger","schedule-trigger":"scheduleTrigger",scheduletrigger:"scheduleTrigger","webhook-trigger":"webhookTrigger",webhooktrigger:"webhookTrigger",errortrigger:"errorTrigger","error-trigger":"errorTrigger",httprequest:"httpRequest","http-request":"httpRequest",codeexecutor:"codeExecutor","code-executor":"codeExecutor",setvariable:"setVariable","set-variable":"setVariable",filesystem:"fileSystem","file-system":"fileSystem",ifelse:"ifElse","if-else":"ifElse",switchnode:"switchNode",switch:"switchNode",vectormemory:"vectorMemory",waitforapproval:"waitForApproval","wait-for-approval":"waitForApproval"};if(m[p])h=m[p];else{const g=o.find(v=>v.toLowerCase()===p);g&&(h=g)}if(!o.includes(h)){console.warn(`Overseer: Skipped invalid node type '${h}'`);return}i.addNode({id:f,type:h,position:{x:l.x||Math.random()*400+50,y:l.y||Math.random()*400+50},data:{label:l.label||h,...l.config}});break}case"addEdge":i.onConnect({source:l.source,target:l.target,sourceHandle:l.sourceHandle||"output-0",targetHandle:l.targetHandle||"input-0",type:"animated"});break;case"deleteNode":l.nodeId&&i.deleteNode(l.nodeId);break;case"clearCanvas":i.clearWorkflow();break;case"loadTemplate":{const h=_h.find(p=>p.id===l.templateId);h?(i.clearWorkflow(),h.nodes.forEach(p=>i.addNode({...p})),h.edges.forEach(p=>i.onConnect({source:p.source,target:p.target,sourceHandle:p.sourceHandle||"output-0",targetHandle:p.targetHandle||"input-0",type:"animated"})),console.log(`Overseer: Loaded template '${h.name}'`)):console.warn(`Overseer: Template '${l.templateId}' not found`);break}case"updateNode":{if(l.nodeId&&l.config){const h=i.nodes,p=h.findIndex(m=>m.id===l.nodeId);if(p!==-1){const m=[...h];m[p]={...m[p],data:{...m[p].data,...l.config}},i.setNodes(m),console.log(`Overseer: Updated node '${l.nodeId}'`)}}break}case"runWorkflow":{window.dispatchEvent(new CustomEvent("startWorkflow")),console.log("Overseer: Triggered workflow execution");break}case"focusNode":{l.nodeId&&(i.openConfig(l.nodeId),console.log(`Overseer: Focused on node '${l.nodeId}'`));break}case"startTutorial":{window.dispatchEvent(new CustomEvent("startTutorial",{detail:l.tutorialId})),console.log(`Overseer: Started tutorial '${l.tutorialId}'`);break}case"undoAction":{const h=this.undoLastAction();h&&console.log(`Overseer: Undid action '${h.type}'`);break}}})}onThinking(t){return this.thinkingCallbacks.push(t),()=>{this.thinkingCallbacks=this.thinkingCallbacks.filter(i=>i!==t)}}broadcastThinking(t,i,o=null){this.thinkingCallbacks.forEach(s=>s({type:t,content:i,details:o,timestamp:Date.now()}))}undoLastAction(){const t=this.actionHistory.pop();if(!t)return null;const i=Ce.getState();switch(t.type){case"addNode":i.deleteNode(t.nodeId);break;case"deleteNode":i.addNode(t.node);break;case"clearCanvas":t.nodes.forEach(o=>i.addNode(o)),t.edges.forEach(o=>i.onConnect(o));break}return t}clearHistory(){this.sessions=this.loadSessions(),this.notifySubscribers()}}const ir=new dB;function fB({actions:e,isFixAction:t}){const[i,o]=T.useState(!1),[s,l]=T.useState(!1),c=()=>{l(!s),console.log("Preview actions:",e)},f=()=>{i||(ir.executeActions(e),o(!0),l(!1))},h=T.useMemo(()=>{const p=e.filter(b=>b.type==="addNode").length,m=e.filter(b=>b.type==="addEdge").length,g=e.filter(b=>b.type==="updateNode").length,v=[];return p&&v.push(`${p} node${p>1?"s":""}`),m&&v.push(`${m} connection${m>1?"s":""}`),g&&v.push(`${g} update${g>1?"s":""}`),v.join(", ")||"Actions"},[e]);return u.jsxs("div",{className:`action-card ${t?"fix-card":""}`,children:[u.jsxs("div",{className:"action-card-header",children:[u.jsx("span",{className:"action-card-icon",children:t?"":""}),u.jsx("span",{className:"action-card-title",children:t?"Quick Fix":"Workflow Recipe"}),u.jsx("span",{className:"action-card-summary",children:h})]}),u.jsxs("div",{className:"action-card-actions",children:[!t&&u.jsx("button",{className:`btn-preview ${s?"active":""}`,onClick:c,disabled:i,children:s?" Hide Preview":" Preview"}),u.jsx("button",{className:`btn-apply ${i?"applied":""}`,onClick:f,disabled:i,children:i?" Applied":t?" Apply Fix":" Apply"})]})]})}function hB(e){const t=[];let i=0;const o=/```(?:json)?\s*([\s\S]*?)```/gi;let s;for(;(s=o.exec(e))!==null;){s.index>i&&t.push({type:"text",content:e.slice(i,s.index)});try{const l=JSON.parse(s[1].trim());if(l.actions&&Array.isArray(l.actions)){const c=l.actions.some(f=>f.__fixAction);t.push({type:"actions",actions:l.actions,isFixAction:c})}else t.push({type:"code",content:s[0]})}catch{t.push({type:"code",content:s[0]})}i=s.index+s[0].length}return i<e.length&&t.push({type:"text",content:e.slice(i)}),t.length>0?t:[{type:"text",content:e}]}function pB({content:e}){const t=T.useMemo(()=>hB(e),[e]);return u.jsx(u.Fragment,{children:t.map((i,o)=>i.type==="actions"?u.jsx(fB,{actions:i.actions,isFixAction:i.isFixAction},o):u.jsx(o1,{children:i.content},o))})}function mB({isOpen:e,onClose:t}){const[i,o]=T.useState([]),[s,l]=T.useState(""),[c,f]=T.useState(!1),[h,p]=T.useState(!1),[m,g]=T.useState([]),[v,b]=T.useState(null),w=T.useRef(null),[N,C]=T.useState(()=>({x:window.innerWidth/2-250,y:window.innerHeight-680})),S=T.useRef({active:!1,offsetX:0,offsetY:0}),k=Ye(z=>z.isReady),j=()=>{w.current?.scrollIntoView({behavior:"smooth"})};T.useEffect(()=>{const z=Z=>{S.current.active&&C({x:Z.clientX-S.current.offsetX,y:Z.clientY-S.current.offsetY})},U=()=>{S.current.active=!1};return document.addEventListener("mousemove",z),document.addEventListener("mouseup",U),()=>{document.removeEventListener("mousemove",z),document.removeEventListener("mouseup",U)}},[]);const _=T.useCallback(()=>{g(ir.getSessions());const z=ir.getActiveSession();z?(o([...z.messages]),b(z.id)):(o([]),b(null))},[]);T.useEffect(()=>{_();const z=ir.subscribe(_);return()=>z()},[_]),T.useEffect(()=>{j()},[i,e]);const $=z=>{S.current={active:!0,offsetX:z.clientX-N.x,offsetY:z.clientY-N.y}},A=async()=>{if(!s.trim()||c)return;const z=s.trim();l(""),f(!0);try{if(!k)throw new Error("Please load a model from the Model Manager first.");await ir.chat(z)}catch(U){o(Z=>[...Z,{role:"system",content:`Error: ${U.message}`}])}finally{f(!1)}},H=z=>{z.stopPropagation(),ir.createSession(),p(!1)},V=z=>{ir.switchSession(z),p(!1)},G=(z,U)=>{z.stopPropagation(),window.confirm("Delete this chat?")&&ir.deleteSession(U)},I=z=>{z.key==="Enter"&&!z.shiftKey&&(z.preventDefault(),A())};return u.jsxs("div",{className:`overseer-panel ${e?"":"closed"}`,style:{left:N.x,top:N.y},children:[u.jsxs("header",{className:"overseer-header",onMouseDown:$,children:[u.jsxs("div",{className:"overseer-title",children:[u.jsx("span",{className:"overseer-icon",children:""}),u.jsx("span",{className:"title-text",children:"Overseer"})]}),u.jsxs("div",{className:"header-controls",children:[u.jsx("button",{className:"btn-icon",onClick:H,title:"New Chat",onMouseDown:z=>z.stopPropagation(),children:"+"}),u.jsx("button",{className:`btn-icon ${h?"active":""}`,onClick:z=>{z.stopPropagation(),p(!h)},title:"History",onMouseDown:z=>z.stopPropagation(),children:""}),u.jsx("button",{className:"btn-close-float",onClick:z=>{z.stopPropagation(),t()},onMouseDown:z=>z.stopPropagation(),onMouseUp:z=>z.stopPropagation(),children:""})]})]}),u.jsxs("div",{className:"overseer-content-wrapper",children:[u.jsxs("div",{className:`history-sidebar ${h?"visible":""}`,children:[u.jsx("div",{className:"history-header",children:"Chat History"}),u.jsxs("div",{className:"history-list",children:[m.map(z=>u.jsxs("div",{className:`history-item ${v===z.id?"active":""}`,onClick:()=>V(z.id),children:[u.jsxs("div",{className:"history-info",children:[u.jsx("span",{className:"history-title",children:z.title||"Untitled"}),u.jsx("span",{className:"history-date",children:new Date(z.timestamp).toLocaleDateString()})]}),u.jsx("button",{className:"btn-delete-session",onClick:U=>G(U,z.id),title:"Delete",children:""})]},z.id)),m.length===0&&u.jsx("div",{className:"history-empty",children:"No history"})]})]}),u.jsxs("div",{className:"overseer-messages",children:[i.length===0&&!c&&u.jsxs("div",{className:"welcome-message",children:[u.jsx("h3",{children:"I am the Overseer."}),u.jsx("p",{children:"How can I help you build your workflow?"})]}),i.map((z,U)=>u.jsx("div",{className:`message ${z.role} ${z.isErrorAnalysis?"error-analysis":""}`,children:u.jsx(pB,{content:z.content})},U)),c&&u.jsxs("div",{className:"typing-indicator",children:[u.jsx("div",{className:"dot"}),u.jsx("div",{className:"dot"}),u.jsx("div",{className:"dot"})]}),u.jsx("div",{ref:w})]})]}),u.jsxs("div",{className:"overseer-input-area",children:[u.jsx("textarea",{className:"overseer-input",placeholder:k?"Describe a workflow to build...":"Load a model first...",value:s,onChange:z=>l(z.target.value),onKeyDown:I,disabled:c}),u.jsx("button",{className:"btn-send",onClick:A,disabled:!s.trim()||c,children:""})]})]})}const ns=[{target:".node-sidebar",title:" Node Library",content:"Drag & drop nodes from here to build your workflow. Browse categories like Triggers, Actions, Logic, and AI nodes.",placement:"right"},{target:".templates-toggle",title:" Workflow Templates",content:"Click here to access pre-built workflow templates. Quickly load example automations to learn or customize for your needs.",placement:"right"},{target:".react-flow",title:" Workflow Canvas",content:"This is your workspace. Drop nodes here, connect them with edges, and build powerful automations. Right-click for options.",placement:"center"},{target:".execution-panel",title:" Logs & Results",content:"See real-time execution logs here. The Output tab shows final results, and Artifacts stores generated files.",placement:"left"},{target:".toolbar",title:" Workflow Management",content:"Name your workflow, save it, or import/export. Use the dropdown to switch between saved workflows.",placement:"bottom"},{target:".exec-btn-group",title:" Run Controls",content:"Click Run to execute your workflow. Use Debug mode to step through nodes one by one and inspect data.",placement:"top"},{target:".ai-controls-panel",title:" AI Controls",content:"Chat with the Overseer AI, manage your local LLM models in the model manager. Keep track of privacy Leaks in the privacy manager.",placement:"top"},{target:".overseer-btn",title:" The Overseer",content:"Your AI assistant! Ask it to build workflows for you, explain nodes, or debug errors. It understands your entire canvas.",placement:"top"}];function gB({isActive:e,onComplete:t}){const[i,o]=T.useState(0),[s,l]=T.useState(null);if(T.useLayoutEffect(()=>{if(!e)return;const v=ns[i],b=document.querySelector(v.target);if(b){const w=b.getBoundingClientRect();l(w),b.scrollIntoView({behavior:"smooth",block:"center"})}else console.warn(`Tour target not found: ${v.target}`),l({top:window.innerHeight/2-100,left:window.innerWidth/2-150,width:300,height:200})},[e,i,t]),!e||!s)return null;const c=ns[i],f=()=>{i<ns.length-1?o(v=>v+1):t()},h=()=>{i>0&&o(v=>v-1)},p=()=>{t()};let m={};const g=20;switch(c.placement){case"right":m={top:s.top,left:s.right+g};break;case"left":m={top:s.top,right:window.innerWidth-s.left+g};break;case"bottom":m={top:s.bottom+g,left:s.left};break;case"top":m={bottom:window.innerHeight-s.top+g,left:s.left};break;case"top-left":m={bottom:window.innerHeight-s.top+g,left:s.left};break;case"bottom-left":m={top:s.bottom+g,left:s.left};break;default:m={top:s.top+s.height/2-100,left:s.left+s.width/2-160}}return u.jsxs("div",{className:"tour-overlay",children:[u.jsx("div",{className:"tour-spotlight",style:{top:s.top,left:s.left,width:s.width,height:s.height}}),u.jsxs("div",{className:"tour-popover",style:m,children:[u.jsx("h3",{children:c.title}),u.jsx("p",{children:c.content}),u.jsxs("div",{className:"tour-actions",children:[u.jsx("button",{className:"btn-skip",onClick:p,children:"Skip"}),u.jsxs("div",{className:"tour-nav-buttons",children:[u.jsx("button",{className:"btn-prev",onClick:h,disabled:i===0,children:" Prev"}),u.jsx("div",{className:"tour-dots",children:ns.map((v,b)=>u.jsx("span",{className:`tour-dot ${b===i?"active":""}`},b))}),u.jsx("button",{className:"btn-next",onClick:f,children:i===ns.length-1?"Finish":"Next "})]})]})]})]})}function yB(){const e=Ce(w=>w.nodes),t=Ce(w=>w.edges),i=Ce(w=>w.selectedNodeId),o=Xe(w=>w.isRunning),s=Ye(w=>w.setLoading),l=Ye(w=>w.setReady),c=Ye(w=>w.setError),[f,h]=T.useState(!1),[p,m]=T.useState(!1),[g,v]=T.useState(!1);T.useEffect(()=>{const w=()=>h(!0),N=()=>m(S=>!S),C=()=>v(!0);return window.addEventListener("openWorkflowManager",w),window.addEventListener("toggleOverseer",N),window.addEventListener("startTour",C),()=>{window.removeEventListener("openWorkflowManager",w),window.removeEventListener("toggleOverseer",N),window.removeEventListener("startTour",C)}},[]),T.useEffect(()=>{(async()=>{try{const N=localStorage.getItem("selectedModel")||"gemma-2-2b-it-q4f16_1-MLC";await or.initialize(N,C=>{s(C.progress,C.text||`Loading model... ${Math.round(C.progress*100)}%`)}),l(N)}catch(N){console.error("Failed to initialize WebLLM:",N),c(N.message||"Failed to load AI model")}})()},[s,l,c]),T.useEffect(()=>{const w=async C=>{const{modelId:S}=C.detail;try{s(0,`Switching to ${S}...`),await or.initialize(S,k=>{s(k.progress,k.text||`Loading ${S}... ${Math.round(k.progress*100)}%`)}),localStorage.setItem("selectedModel",S),l(S)}catch(k){console.error("Failed to switch model:",k),c(k.message||"Failed to switch model")}},N=C=>{const{modelId:S}=C.detail,k=Ye.getState().setDownloadProgress;k(S,0,"downloading"),or.downloadModel(S,j=>{k(S,j.progress*100,"downloading")}).then(()=>{k(S,100,"complete")}).catch(j=>{console.error("Download failed:",j),k(S,0,"error")})};return window.addEventListener("loadModel",w),window.addEventListener("downloadModel",N),()=>{window.removeEventListener("loadModel",w),window.removeEventListener("downloadModel",N)}},[s,l,c]);const b=T.useCallback(async(w={})=>{if(o)return;const{debug:N=!1}=w,C=Xe.getState();N&&Xe.getState().setDebugMode(!0),await Oo.execute(e,t,{executionStore:C},{},{debug:N})},[e,t,o]);return u.jsx(vw,{children:u.jsxs("div",{className:"app",children:[u.jsx(V3,{onRun:b}),u.jsxs("div",{className:"app-body",children:[u.jsx(c_,{}),u.jsx(s_,{}),u.jsx(Q5,{},i||"none"),u.jsx(X3,{}),u.jsx(mB,{isOpen:p,onClose:()=>m(!1)})]}),u.jsx(J5,{}),u.jsx(eB,{}),u.jsx(nB,{isOpen:f,onClose:()=>h(!1)}),u.jsx(gB,{isActive:g,onComplete:()=>v(!1)})]})})}JN.createRoot(document.getElementById("root")).render(u.jsx(T.StrictMode,{children:u.jsx(yB,{})}));
